const __vite__fileDeps=["assets/raw-Dt1HMqYc.js","assets/basedecoder-DvumDe3Y.js","assets/lzw-DpvbRwG5.js","assets/jpeg-CdeCw_eT.js","assets/deflate-CUkHh1nh.js","assets/pako.esm-CPws4d4z.js","assets/packbits-DQnG8s9w.js","assets/lerc-DSSsRuq6.js","assets/webimage-BcnuJlio.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var swe=Object.defineProperty;var owe=(t,e,n)=>e in t?swe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var hq=(t,e,n)=>(owe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function x$(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const sl={},rC=[],co=()=>{},awe=()=>!1,k5=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),C$=t=>t.startsWith("onUpdate:"),hc=Object.assign,E$=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},lwe=Object.prototype.hasOwnProperty,vs=(t,e)=>lwe.call(t,e),Jn=Array.isArray,iC=t=>PB(t)==="[object Map]",D5=t=>PB(t)==="[object Set]",mb=t=>PB(t)==="[object Date]",Gr=t=>typeof t=="function",Xr=t=>typeof t=="string",Hv=t=>typeof t=="symbol",xi=t=>t!==null&&typeof t=="object",bI=t=>(xi(t)||Gr(t))&&Gr(t.then)&&Gr(t.catch),Bse=Object.prototype.toString,PB=t=>Bse.call(t),GP=t=>PB(t).slice(8,-1),KF=t=>PB(t)==="[object Object]",S$=t=>Xr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,RT=x$(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),U5=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},cwe=/-(\w)/g,xp=U5(t=>t.replace(cwe,(e,n)=>n?n.toUpperCase():"")),uwe=/\B([A-Z])/g,y_=U5(t=>t.replace(uwe,"-$1").toLowerCase()),FB=U5(t=>t.charAt(0).toUpperCase()+t.slice(1)),QP=U5(t=>t?`on${FB(t)}`:""),qy=(t,e)=>!Object.is(t,e),jP=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Mse=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},LU=t=>{const e=parseFloat(t);return isNaN(e)?t:e},hwe=t=>{const e=Xr(t)?Number(t):NaN;return isNaN(e)?t:e};let dq;const Lse=()=>dq||(dq=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vr(t){if(Jn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Xr(r)?Awe(r):vr(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Xr(t)||xi(t))return t}const dwe=/;(?![^(]*\))/g,fwe=/:([^]+)/,pwe=/\/\*[^]*?\*\//g;function Awe(t){const e={};return t.replace(pwe,"").split(dwe).forEach(n=>{if(n){const r=n.split(fwe);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xe(t){let e="";if(Xr(t))e=t;else if(Jn(t))for(let n=0;n<t.length;n++){const r=xe(t[n]);r&&(e+=r+" ")}else if(xi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Tv(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Xr(e)&&(t.class=xe(e)),n&&(t.style=vr(n)),t}const gwe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mwe=x$(gwe);function Rse(t){return!!t||t===""}function vwe(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=BC(t[r],e[r]);return n}function BC(t,e){if(t===e)return!0;let n=mb(t),r=mb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Hv(t),r=Hv(e),n||r)return t===e;if(n=Jn(t),r=Jn(e),n||r)return n&&r?vwe(t,e):!1;if(n=xi(t),r=xi(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const a in t){const l=t.hasOwnProperty(a),o=e.hasOwnProperty(a);if(l&&!o||!l&&o||!BC(t[a],e[a]))return!1}}return String(t)===String(e)}function Pse(t,e){return t.findIndex(n=>BC(n,e))}const Nn=t=>Xr(t)?t:t==null?"":Jn(t)||xi(t)&&(t.toString===Bse||!Gr(t.toString))?JSON.stringify(t,Fse,2):String(t),Fse=(t,e)=>e&&e.__v_isRef?Fse(t,e.value):iC(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[vD(r,s)+" =>"]=i,n),{})}:D5(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>vD(n))}:Hv(e)?vD(e):xi(e)&&!Jn(e)&&!KF(e)?String(e):e,vD=(t,e="")=>{var n;return Hv(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ef;class Ose{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ef,!e&&Ef&&(this.index=(Ef.scopes||(Ef.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Ef;try{return Ef=this,e()}finally{Ef=n}}}on(){Ef=this}off(){Ef=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function ywe(t){return new Ose(t)}function _we(t,e=Ef){e&&e.active&&e.effects.push(t)}function Nse(){return Ef}function kse(t){Ef&&Ef.cleanups.push(t)}let Z1;class T${constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,_we(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,__();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(bwe(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),b_()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=$y,n=Z1;try{return $y=!0,Z1=this,this._runnings++,fq(this),this.fn()}finally{pq(this),this._runnings--,Z1=n,$y=e}}stop(){this.active&&(fq(this),pq(this),this.onStop&&this.onStop(),this.active=!1)}}function bwe(t){return t.value}function fq(t){t._trackId++,t._depsLength=0}function pq(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Dse(t.deps[e],t);t.deps.length=t._depsLength}}function Dse(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let $y=!0,RU=0;const Use=[];function __(){Use.push($y),$y=!1}function b_(){const t=Use.pop();$y=t===void 0?!0:t}function I$(){RU++}function B$(){for(RU--;!RU&&PU.length;)PU.shift()()}function zse(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&Dse(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const PU=[];function $se(t,e,n){I$();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&PU.push(r.scheduler)))}B$()}const Vse=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},WF=new WeakMap,J1=Symbol(""),FU=Symbol("");function Ld(t,e,n){if($y&&Z1){let r=WF.get(t);r||WF.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Vse(()=>r.delete(n))),zse(Z1,i)}}function Lv(t,e,n,r,i,s){const a=WF.get(t);if(!a)return;let l=[];if(e==="clear")l=[...a.values()];else if(n==="length"&&Jn(t)){const o=Number(r);a.forEach((d,p)=>{(p==="length"||!Hv(p)&&p>=o)&&l.push(d)})}else switch(n!==void 0&&l.push(a.get(n)),e){case"add":Jn(t)?S$(n)&&l.push(a.get("length")):(l.push(a.get(J1)),iC(t)&&l.push(a.get(FU)));break;case"delete":Jn(t)||(l.push(a.get(J1)),iC(t)&&l.push(a.get(FU)));break;case"set":iC(t)&&l.push(a.get(J1));break}I$();for(const o of l)o&&$se(o,4);B$()}function wwe(t,e){const n=WF.get(t);return n&&n.get(e)}const xwe=x$("__proto__,__v_isRef,__isVue"),Hse=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hv)),Aq=Cwe();function Cwe(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=fo(this);for(let s=0,a=this.length;s<a;s++)Ld(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(fo)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){__(),I$();const r=fo(this)[e].apply(this,n);return B$(),b_(),r}}),t}function Ewe(t){Hv(t)||(t=String(t));const e=fo(this);return Ld(e,"has",t),e.hasOwnProperty(t)}class Gse{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Dwe:Wse:s?Kse:jse).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Jn(e);if(!i){if(a&&vs(Aq,n))return Reflect.get(Aq,n,r);if(n==="hasOwnProperty")return Ewe}const l=Reflect.get(e,n,r);return(Hv(n)?Hse.has(n):xwe(n))||(i||Ld(e,"get",n),s)?l:Go(l)?a&&S$(n)?l:l.value:xi(l)?i?vE(l):Xs(l):l}}class Qse extends Gse{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const o=wI(s);if(!qF(r)&&!wI(r)&&(s=fo(s),r=fo(r)),!Jn(e)&&Go(s)&&!Go(r))return o?!1:(s.value=r,!0)}const a=Jn(e)&&S$(n)?Number(n)<e.length:vs(e,n),l=Reflect.set(e,n,r,i);return e===fo(i)&&(a?qy(r,s)&&Lv(e,"set",n,r):Lv(e,"add",n,r)),l}deleteProperty(e,n){const r=vs(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Lv(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Hv(n)||!Hse.has(n))&&Ld(e,"has",n),r}ownKeys(e){return Ld(e,"iterate",Jn(e)?"length":J1),Reflect.ownKeys(e)}}class Swe extends Gse{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Twe=new Qse,Iwe=new Swe,Bwe=new Qse(!0);const M$=t=>t,z5=t=>Reflect.getPrototypeOf(t);function HL(t,e,n=!1,r=!1){t=t.__v_raw;const i=fo(t),s=fo(e);n||(qy(e,s)&&Ld(i,"get",e),Ld(i,"get",s));const{has:a}=z5(i),l=r?M$:n?F$:xI;if(a.call(i,e))return l(t.get(e));if(a.call(i,s))return l(t.get(s));t!==i&&t.get(e)}function GL(t,e=!1){const n=this.__v_raw,r=fo(n),i=fo(t);return e||(qy(t,i)&&Ld(r,"has",t),Ld(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function QL(t,e=!1){return t=t.__v_raw,!e&&Ld(fo(t),"iterate",J1),Reflect.get(t,"size",t)}function gq(t){t=fo(t);const e=fo(this);return z5(e).has.call(e,t)||(e.add(t),Lv(e,"add",t,t)),this}function mq(t,e){e=fo(e);const n=fo(this),{has:r,get:i}=z5(n);let s=r.call(n,t);s||(t=fo(t),s=r.call(n,t));const a=i.call(n,t);return n.set(t,e),s?qy(e,a)&&Lv(n,"set",t,e):Lv(n,"add",t,e),this}function vq(t){const e=fo(this),{has:n,get:r}=z5(e);let i=n.call(e,t);i||(t=fo(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Lv(e,"delete",t,void 0),s}function yq(){const t=fo(this),e=t.size!==0,n=t.clear();return e&&Lv(t,"clear",void 0,void 0),n}function jL(t,e){return function(r,i){const s=this,a=s.__v_raw,l=fo(a),o=e?M$:t?F$:xI;return!t&&Ld(l,"iterate",J1),a.forEach((d,p)=>r.call(i,o(d),o(p),s))}}function KL(t,e,n){return function(...r){const i=this.__v_raw,s=fo(i),a=iC(s),l=t==="entries"||t===Symbol.iterator&&a,o=t==="keys"&&a,d=i[t](...r),p=n?M$:e?F$:xI;return!e&&Ld(s,"iterate",o?FU:J1),{next(){const{value:A,done:v}=d.next();return v?{value:A,done:v}:{value:l?[p(A[0]),p(A[1])]:p(A),done:v}},[Symbol.iterator](){return this}}}}function Y0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Mwe(){const t={get(s){return HL(this,s)},get size(){return QL(this)},has:GL,add:gq,set:mq,delete:vq,clear:yq,forEach:jL(!1,!1)},e={get(s){return HL(this,s,!1,!0)},get size(){return QL(this)},has:GL,add:gq,set:mq,delete:vq,clear:yq,forEach:jL(!1,!0)},n={get(s){return HL(this,s,!0)},get size(){return QL(this,!0)},has(s){return GL.call(this,s,!0)},add:Y0("add"),set:Y0("set"),delete:Y0("delete"),clear:Y0("clear"),forEach:jL(!0,!1)},r={get(s){return HL(this,s,!0,!0)},get size(){return QL(this,!0)},has(s){return GL.call(this,s,!0)},add:Y0("add"),set:Y0("set"),delete:Y0("delete"),clear:Y0("clear"),forEach:jL(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=KL(s,!1,!1),n[s]=KL(s,!0,!1),e[s]=KL(s,!1,!0),r[s]=KL(s,!0,!0)}),[t,n,e,r]}const[Lwe,Rwe,Pwe,Fwe]=Mwe();function L$(t,e){const n=e?t?Fwe:Pwe:t?Rwe:Lwe;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(vs(n,i)&&i in r?n:r,i,s)}const Owe={get:L$(!1,!1)},Nwe={get:L$(!1,!0)},kwe={get:L$(!0,!1)};const jse=new WeakMap,Kse=new WeakMap,Wse=new WeakMap,Dwe=new WeakMap;function Uwe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zwe(t){return t.__v_skip||!Object.isExtensible(t)?0:Uwe(GP(t))}function Xs(t){return wI(t)?t:P$(t,!1,Twe,Owe,jse)}function R$(t){return P$(t,!1,Bwe,Nwe,Kse)}function vE(t){return P$(t,!0,Iwe,kwe,Wse)}function P$(t,e,n,r,i){if(!xi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const a=zwe(t);if(a===0)return t;const l=new Proxy(t,a===2?r:n);return i.set(t,l),l}function PT(t){return wI(t)?PT(t.__v_raw):!!(t&&t.__v_isReactive)}function wI(t){return!!(t&&t.__v_isReadonly)}function qF(t){return!!(t&&t.__v_isShallow)}function qse(t){return t?!!t.__v_raw:!1}function fo(t){const e=t&&t.__v_raw;return e?fo(e):t}function sC(t){return Object.isExtensible(t)&&Mse(t,"__v_skip",!0),t}const xI=t=>xi(t)?Xs(t):t,F$=t=>xi(t)?vE(t):t;class Yse{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new T$(()=>e(this._value),()=>FT(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=fo(this);return(!e._cacheable||e.effect.dirty)&&qy(e._value,e._value=e.effect.run())&&FT(e,4),O$(e),e.effect._dirtyLevel>=2&&FT(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Xse(t,e,n=!1){let r,i;const s=Gr(t);return s?(r=t,i=co):(r=t.get,i=t.set),new Yse(r,i,s||!i,n)}function O$(t){var e;$y&&Z1&&(t=fo(t),zse(Z1,(e=t.dep)!=null?e:t.dep=Vse(()=>t.dep=void 0,t instanceof Yse?t:void 0)))}function FT(t,e=4,n){t=fo(t);const r=t.dep;r&&$se(r,e)}function Go(t){return!!(t&&t.__v_isRef===!0)}function Me(t){return Zse(t,!1)}function Ds(t){return Zse(t,!0)}function Zse(t,e){return Go(t)?t:new $we(t,e)}class $we{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:fo(e),this._value=n?e:xI(e)}get value(){return O$(this),this._value}set value(e){const n=this.__v_isShallow||qF(e)||wI(e);e=n?e:fo(e),qy(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:xI(e),FT(this,4))}}function T(t){return Go(t)?t.value:t}const Vwe={get:(t,e,n)=>T(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Go(i)&&!Go(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Jse(t){return PT(t)?t:new Proxy(t,Vwe)}class Hwe{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>O$(this),()=>FT(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function Gwe(t){return new Hwe(t)}function dc(t){const e=Jn(t)?new Array(t.length):{};for(const n in t)e[n]=eoe(t,n);return e}class Qwe{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return wwe(fo(this._object),this._key)}}class jwe{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Io(t,e,n){return Go(t)?t:Gr(t)?new jwe(t):xi(t)&&arguments.length>1?eoe(t,e,n):Me(t)}function eoe(t,e,n){const r=t[e];return Go(r)?r:new Qwe(t,e,n)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vy(t,e,n,r){try{return r?t(...r):t()}catch(i){$5(i,e,n)}}function _p(t,e,n,r){if(Gr(t)){const i=Vy(t,e,n,r);return i&&bI(i)&&i.catch(s=>{$5(s,e,n)}),i}if(Jn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(_p(t[s],e,n,r));return i}}function $5(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const d=s.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,a,l)===!1)return}s=s.parent}const o=e.appContext.config.errorHandler;if(o){__(),Vy(o,null,10,[t,a,l]),b_();return}}Kwe(t,n,i,r)}function Kwe(t,e,n,r=!0){console.error(t)}let CI=!1,OU=!1;const ph=[];let zg=0;const oC=[];let my=null,B1=0;const toe=Promise.resolve();let N$=null;function Tr(t){const e=N$||toe;return t?e.then(this?t.bind(this):t):e}function Wwe(t){let e=zg+1,n=ph.length;for(;e<n;){const r=e+n>>>1,i=ph[r],s=EI(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function k$(t){(!ph.length||!ph.includes(t,CI&&t.allowRecurse?zg+1:zg))&&(t.id==null?ph.push(t):ph.splice(Wwe(t.id),0,t),noe())}function noe(){!CI&&!OU&&(OU=!0,N$=toe.then(ioe))}function qwe(t){const e=ph.indexOf(t);e>zg&&ph.splice(e,1)}function Ywe(t){Jn(t)?oC.push(...t):(!my||!my.includes(t,t.allowRecurse?B1+1:B1))&&oC.push(t),noe()}function _q(t,e,n=CI?zg+1:0){for(;n<ph.length;n++){const r=ph[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;ph.splice(n,1),n--,r()}}}function roe(t){if(oC.length){const e=[...new Set(oC)].sort((n,r)=>EI(n)-EI(r));if(oC.length=0,my){my.push(...e);return}for(my=e,B1=0;B1<my.length;B1++)my[B1]();my=null,B1=0}}const EI=t=>t.id==null?1/0:t.id,Xwe=(t,e)=>{const n=EI(t)-EI(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ioe(t){OU=!1,CI=!0,ph.sort(Xwe);try{for(zg=0;zg<ph.length;zg++){const e=ph[zg];e&&e.active!==!1&&Vy(e,null,14)}}finally{zg=0,ph.length=0,roe(),CI=!1,N$=null,(ph.length||oC.length)&&ioe()}}function Zwe(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||sl;let i=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const p=`${a==="modelValue"?"model":a}Modifiers`,{number:A,trim:v}=r[p]||sl;v&&(i=n.map(y=>Xr(y)?y.trim():y)),A&&(i=n.map(LU))}let l,o=r[l=QP(e)]||r[l=QP(xp(e))];!o&&s&&(o=r[l=QP(y_(e))]),o&&_p(o,t,6,i);const d=r[l+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,_p(d,t,6,i)}}function soe(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let a={},l=!1;if(!Gr(t)){const o=d=>{const p=soe(d,e,!0);p&&(l=!0,hc(a,p))};!n&&e.mixins.length&&e.mixins.forEach(o),t.extends&&o(t.extends),t.mixins&&t.mixins.forEach(o)}return!s&&!l?(xi(t)&&r.set(t,null),null):(Jn(s)?s.forEach(o=>a[o]=null):hc(a,s),xi(t)&&r.set(t,a),a)}function V5(t,e){return!t||!k5(e)?!1:(e=e.slice(2).replace(/Once$/,""),vs(t,e[0].toLowerCase()+e.slice(1))||vs(t,y_(e))||vs(t,e))}let Zc=null,H5=null;function YF(t){const e=Zc;return Zc=t,H5=t&&t.type.__scopeId||null,e}function Jwe(t){H5=t}function exe(){H5=null}function It(t,e=Zc,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Pq(-1);const s=YF(e);let a;try{a=t(...i)}finally{YF(s),r._d&&Pq(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function yD(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:l,emit:o,render:d,renderCache:p,props:A,data:v,setupState:y,ctx:C,inheritAttrs:x}=t,M=YF(t);let I,P;try{if(n.shapeFlag&4){const D=i||r,V=D;I=Ug(d.call(V,D,p,A,y,v,C)),P=l}else{const D=e;I=Ug(D.length>1?D(A,{attrs:l,slots:a,emit:o}):D(A,null)),P=e.props?l:txe(l)}}catch(D){UT.length=0,$5(D,t,1),I=pt(gh)}let F=I;if(P&&x!==!1){const D=Object.keys(P),{shapeFlag:V}=F;D.length&&V&7&&(s&&D.some(C$)&&(P=nxe(P,s)),F=Qv(F,P,!1,!0))}return n.dirs&&(F=Qv(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&(F.transition=n.transition),I=F,YF(M),I}const txe=t=>{let e;for(const n in t)(n==="class"||n==="style"||k5(n))&&((e||(e={}))[n]=t[n]);return e},nxe=(t,e)=>{const n={};for(const r in t)(!C$(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function rxe(t,e,n){const{props:r,children:i,component:s}=t,{props:a,children:l,patchFlag:o}=e,d=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&o>=0){if(o&1024)return!0;if(o&16)return r?bq(r,a,d):!!a;if(o&8){const p=e.dynamicProps;for(let A=0;A<p.length;A++){const v=p[A];if(a[v]!==r[v]&&!V5(d,v))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?bq(r,a,d):!0:!!a;return!1}function bq(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!V5(n,s))return!0}return!1}function ixe({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const D$="components",sxe="directives";function ui(t,e){return U$(D$,t,!0,e)||t}const ooe=Symbol.for("v-ndc");function Mi(t){return Xr(t)?U$(D$,t,!1)||t:t||ooe}function G5(t){return U$(sxe,t)}function U$(t,e,n=!0,r=!1){const i=Zc||Du;if(i){const s=i.type;if(t===D$){const l=Wxe(s,!1);if(l&&(l===e||l===xp(e)||l===FB(xp(e))))return s}const a=wq(i[t]||s[t],e)||wq(i.appContext[t],e);return!a&&r?s:a}}function wq(t,e){return t&&(t[e]||t[xp(e)]||t[FB(xp(e))])}const oxe=t=>t.__isSuspense;function axe(t,e){e&&e.pendingBranch?Jn(t)?e.effects.push(...t):e.effects.push(t):Ywe(t)}const lxe=Symbol.for("v-scx"),cxe=()=>mn(lxe);function bu(t,e){return z$(t,null,e)}const WL={};function zt(t,e,n){return z$(t,e,n)}function z$(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:a,onTrigger:l}=sl){if(e&&s){const H=e;e=(...Q)=>{H(...Q),V()}}const o=Du,d=H=>r===!0?H:N1(H,r===!1?1:void 0);let p,A=!1,v=!1;if(Go(t)?(p=()=>t.value,A=qF(t)):PT(t)?(p=()=>d(t),A=!0):Jn(t)?(v=!0,A=t.some(H=>PT(H)||qF(H)),p=()=>t.map(H=>{if(Go(H))return H.value;if(PT(H))return d(H);if(Gr(H))return Vy(H,o,2)})):Gr(t)?e?p=()=>Vy(t,o,2):p=()=>(y&&y(),_p(t,o,3,[C])):p=co,e&&r){const H=p;p=()=>N1(H())}let y,C=H=>{y=F.onStop=()=>{Vy(H,o,4),y=F.onStop=void 0}},x;if(W5)if(C=co,e?n&&_p(e,o,3,[p(),v?[]:void 0,C]):p(),i==="sync"){const H=cxe();x=H.__watcherHandles||(H.__watcherHandles=[])}else return co;let M=v?new Array(t.length).fill(WL):WL;const I=()=>{if(!(!F.active||!F.dirty))if(e){const H=F.run();(r||A||(v?H.some((Q,G)=>qy(Q,M[G])):qy(H,M)))&&(y&&y(),_p(e,o,3,[H,M===WL?void 0:v&&M[0]===WL?[]:M,C]),M=H)}else F.run()};I.allowRecurse=!!e;let P;i==="sync"?P=I:i==="post"?P=()=>md(I,o&&o.suspense):(I.pre=!0,o&&(I.id=o.uid),P=()=>k$(I));const F=new T$(p,co,P),D=Nse(),V=()=>{F.stop(),D&&E$(D.effects,F)};return e?n?I():M=F.run():i==="post"?md(F.run.bind(F),o&&o.suspense):F.run(),x&&x.push(V),V}function uxe(t,e,n){const r=this.proxy,i=Xr(t)?t.includes(".")?aoe(r,t):()=>r[t]:t.bind(r,r);let s;Gr(e)?s=e:(s=e.handler,n=e);const a=OB(this),l=z$(i,s.bind(r),n);return a(),l}function aoe(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function N1(t,e=1/0,n){if(e<=0||!xi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Go(t))N1(t.value,e,n);else if(Jn(t))for(let r=0;r<t.length;r++)N1(t[r],e,n);else if(D5(t)||iC(t))t.forEach(r=>{N1(r,e,n)});else if(KF(t))for(const r in t)N1(t[r],e,n);return t}function ci(t,e){if(Zc===null)return t;const n=q5(Zc)||Zc.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,l,o=sl]=e[i];s&&(Gr(s)&&(s={mounted:s,updated:s}),s.deep&&N1(a),r.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:o}))}return t}function p1(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const l=i[a];s&&(l.oldValue=s[a].value);let o=l.dir[r];o&&(__(),_p(o,n,8,[t.el,l,t,e]),b_())}}const vy=Symbol("_leaveCb"),qL=Symbol("_enterCb");function loe(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return dr(()=>{t.isMounted=!0}),Do(()=>{t.isUnmounting=!0}),t}const rp=[Function,Array],coe={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rp,onEnter:rp,onAfterEnter:rp,onEnterCancelled:rp,onBeforeLeave:rp,onLeave:rp,onAfterLeave:rp,onLeaveCancelled:rp,onBeforeAppear:rp,onAppear:rp,onAfterAppear:rp,onAppearCancelled:rp},hxe={name:"BaseTransition",props:coe,setup(t,{slots:e}){const n=mi(),r=loe();return()=>{const i=e.default&&$$(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const v of i)if(v.type!==gh){s=v;break}}const a=fo(t),{mode:l}=a;if(r.isLeaving)return _D(s);const o=xq(s);if(!o)return _D(s);const d=SI(o,a,r,n);TI(o,d);const p=n.subTree,A=p&&xq(p);if(A&&A.type!==gh&&!M1(o,A)){const v=SI(A,a,r,n);if(TI(A,v),l==="out-in"&&o.type!==gh)return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},_D(s);l==="in-out"&&o.type!==gh&&(v.delayLeave=(y,C,x)=>{const M=uoe(r,A);M[String(A.key)]=A,y[vy]=()=>{C(),y[vy]=void 0,delete d.delayedLeave},d.delayedLeave=x})}return s}}},dxe=hxe;function uoe(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function SI(t,e,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:l,onEnter:o,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:A,onLeave:v,onAfterLeave:y,onLeaveCancelled:C,onBeforeAppear:x,onAppear:M,onAfterAppear:I,onAppearCancelled:P}=e,F=String(t.key),D=uoe(n,t),V=(G,W)=>{G&&_p(G,r,9,W)},H=(G,W)=>{const te=W[1];V(G,W),Jn(G)?G.every(q=>q.length<=1)&&te():G.length<=1&&te()},Q={mode:s,persisted:a,beforeEnter(G){let W=l;if(!n.isMounted)if(i)W=x||l;else return;G[vy]&&G[vy](!0);const te=D[F];te&&M1(t,te)&&te.el[vy]&&te.el[vy](),V(W,[G])},enter(G){let W=o,te=d,q=p;if(!n.isMounted)if(i)W=M||o,te=I||d,q=P||p;else return;let Y=!1;const ee=G[qL]=ce=>{Y||(Y=!0,ce?V(q,[G]):V(te,[G]),Q.delayedLeave&&Q.delayedLeave(),G[qL]=void 0)};W?H(W,[G,ee]):ee()},leave(G,W){const te=String(t.key);if(G[qL]&&G[qL](!0),n.isUnmounting)return W();V(A,[G]);let q=!1;const Y=G[vy]=ee=>{q||(q=!0,W(),ee?V(C,[G]):V(y,[G]),G[vy]=void 0,D[te]===t&&delete D[te])};D[te]=t,v?H(v,[G,Y]):Y()},clone(G){return SI(G,e,n,r)}};return Q}function _D(t){if(Q5(t))return t=Qv(t),t.children=null,t}function xq(t){if(!Q5(t))return t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Gr(n.default))return n.default()}}function TI(t,e){t.shapeFlag&6&&t.component?TI(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function $$(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let a=t[s];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===_r?(a.patchFlag&128&&i++,r=r.concat($$(a.children,e,l))):(e||a.type!==gh)&&r.push(l!=null?Qv(a,{key:l}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ge(t,e){return Gr(t)?hc({name:t.name},e,{setup:t}):t}const OT=t=>!!t.type.__asyncLoader,Q5=t=>t.type.__isKeepAlive;function fxe(t,e){doe(t,"a",e)}function hoe(t,e){doe(t,"da",e)}function doe(t,e,n=Du){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(j5(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Q5(i.parent.vnode)&&pxe(r,e,n,i),i=i.parent}}function pxe(t,e,n,r){const i=j5(e,t,r,!0);Ss(()=>{E$(r[e],i)},n)}function j5(t,e,n=Du,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;__();const l=OB(n),o=_p(e,n,t,a);return l(),b_(),o});return r?i.unshift(s):i.push(s),s}}const s0=t=>(e,n=Du)=>(!W5||t==="sp")&&j5(t,(...r)=>e(...r),n),K5=s0("bm"),dr=s0("m"),foe=s0("bu"),o0=s0("u"),Do=s0("bum"),Ss=s0("um"),Axe=s0("sp"),gxe=s0("rtg"),mxe=s0("rtc");function vxe(t,e=Du){j5("ec",t,e)}function cs(t,e,n,r){let i;const s=n;if(Jn(t)||Xr(t)){i=new Array(t.length);for(let a=0,l=t.length;a<l;a++)i[a]=e(t[a],a,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(xi(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,o=a.length;l<o;l++){const d=a[l];i[l]=e(t[d],d,l,s)}}else i=[];return i}function Gv(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Jn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function kt(t,e,n={},r,i){if(Zc.isCE||Zc.parent&&OT(Zc.parent)&&Zc.parent.isCE)return e!=="default"&&(n.name=e),pt("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),ve();const a=s&&poe(s(n)),l=qt(_r,{key:n.key||a&&a.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function poe(t){return t.some(e=>ya(e)?!(e.type===gh||e.type===_r&&!poe(e.children)):!0)?t:null}function yxe(t,e){const n={};for(const r in t)n[QP(r)]=t[r];return n}const NU=t=>t?Moe(t)?q5(t)||t.proxy:NU(t.parent):null,NT=hc(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>NU(t.parent),$root:t=>NU(t.root),$emit:t=>t.emit,$options:t=>V$(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,k$(t.update)}),$nextTick:t=>t.n||(t.n=Tr.bind(t.proxy)),$watch:t=>uxe.bind(t)}),bD=(t,e)=>t!==sl&&!t.__isScriptSetup&&vs(t,e),_xe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:l,appContext:o}=t;let d;if(e[0]!=="$"){const y=a[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(bD(r,e))return a[e]=1,r[e];if(i!==sl&&vs(i,e))return a[e]=2,i[e];if((d=t.propsOptions[0])&&vs(d,e))return a[e]=3,s[e];if(n!==sl&&vs(n,e))return a[e]=4,n[e];DU&&(a[e]=0)}}const p=NT[e];let A,v;if(p)return e==="$attrs"&&Ld(t.attrs,"get",""),p(t);if((A=l.__cssModules)&&(A=A[e]))return A;if(n!==sl&&vs(n,e))return a[e]=4,n[e];if(v=o.config.globalProperties,vs(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return bD(i,e)?(i[e]=n,!0):r!==sl&&vs(r,e)?(r[e]=n,!0):vs(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let l;return!!n[a]||t!==sl&&vs(t,a)||bD(e,a)||(l=s[0])&&vs(l,a)||vs(r,a)||vs(NT,a)||vs(i.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:vs(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Uc(){return Aoe().slots}function Ra(){return Aoe().attrs}function Aoe(){const t=mi();return t.setupContext||(t.setupContext=Roe(t))}function kU(t){return Jn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Qu(t,e){const n=kU(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Jn(i)||Gr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}let DU=!0;function bxe(t){const e=V$(t),n=t.proxy,r=t.ctx;DU=!1,e.beforeCreate&&Cq(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:a,watch:l,provide:o,inject:d,created:p,beforeMount:A,mounted:v,beforeUpdate:y,updated:C,activated:x,deactivated:M,beforeDestroy:I,beforeUnmount:P,destroyed:F,unmounted:D,render:V,renderTracked:H,renderTriggered:Q,errorCaptured:G,serverPrefetch:W,expose:te,inheritAttrs:q,components:Y,directives:ee,filters:ce}=e;if(d&&wxe(d,r,null),a)for(const ie in a){const pe=a[ie];Gr(pe)&&(r[ie]=pe.bind(n))}if(i){const ie=i.call(n,n);xi(ie)&&(t.data=Xs(ie))}if(DU=!0,s)for(const ie in s){const pe=s[ie],ue=Gr(pe)?pe.bind(n,n):Gr(pe.get)?pe.get.bind(n,n):co,me=!Gr(pe)&&Gr(pe.set)?pe.set.bind(n):co,Le=oe({get:ue,set:me});Object.defineProperty(r,ie,{enumerable:!0,configurable:!0,get:()=>Le.value,set:ae=>Le.value=ae})}if(l)for(const ie in l)goe(l[ie],r,n,ie);if(o){const ie=Gr(o)?o.call(n):o;Reflect.ownKeys(ie).forEach(pe=>{Rr(pe,ie[pe])})}p&&Cq(p,t,"c");function le(ie,pe){Jn(pe)?pe.forEach(ue=>ie(ue.bind(n))):pe&&ie(pe.bind(n))}if(le(K5,A),le(dr,v),le(foe,y),le(o0,C),le(fxe,x),le(hoe,M),le(vxe,G),le(mxe,H),le(gxe,Q),le(Do,P),le(Ss,D),le(Axe,W),Jn(te))if(te.length){const ie=t.exposed||(t.exposed={});te.forEach(pe=>{Object.defineProperty(ie,pe,{get:()=>n[pe],set:ue=>n[pe]=ue})})}else t.exposed||(t.exposed={});V&&t.render===co&&(t.render=V),q!=null&&(t.inheritAttrs=q),Y&&(t.components=Y),ee&&(t.directives=ee)}function wxe(t,e,n=co){Jn(t)&&(t=UU(t));for(const r in t){const i=t[r];let s;xi(i)?"default"in i?s=mn(i.from||r,i.default,!0):s=mn(i.from||r):s=mn(i),Go(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function Cq(t,e,n){_p(Jn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function goe(t,e,n,r){const i=r.includes(".")?aoe(n,r):()=>n[r];if(Xr(t)){const s=e[t];Gr(s)&&zt(i,s)}else if(Gr(t))zt(i,t.bind(n));else if(xi(t))if(Jn(t))t.forEach(s=>goe(s,e,n,r));else{const s=Gr(t.handler)?t.handler.bind(n):e[t.handler];Gr(s)&&zt(i,s,t)}}function V$(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let o;return l?o=l:!i.length&&!n&&!r?o=e:(o={},i.length&&i.forEach(d=>XF(o,d,a,!0)),XF(o,e,a)),xi(e)&&s.set(e,o),o}function XF(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&XF(t,s,n,!0),i&&i.forEach(a=>XF(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const l=xxe[a]||n&&n[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const xxe={data:Eq,props:Sq,emits:Sq,methods:cT,computed:cT,beforeCreate:Ph,created:Ph,beforeMount:Ph,mounted:Ph,beforeUpdate:Ph,updated:Ph,beforeDestroy:Ph,beforeUnmount:Ph,destroyed:Ph,unmounted:Ph,activated:Ph,deactivated:Ph,errorCaptured:Ph,serverPrefetch:Ph,components:cT,directives:cT,watch:Exe,provide:Eq,inject:Cxe};function Eq(t,e){return e?t?function(){return hc(Gr(t)?t.call(this,this):t,Gr(e)?e.call(this,this):e)}:e:t}function Cxe(t,e){return cT(UU(t),UU(e))}function UU(t){if(Jn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ph(t,e){return t?[...new Set([].concat(t,e))]:e}function cT(t,e){return t?hc(Object.create(null),t,e):e}function Sq(t,e){return t?Jn(t)&&Jn(e)?[...new Set([...t,...e])]:hc(Object.create(null),kU(t),kU(e??{})):e}function Exe(t,e){if(!t)return e;if(!e)return t;const n=hc(Object.create(null),t);for(const r in e)n[r]=Ph(t[r],e[r]);return n}function moe(){return{app:null,config:{isNativeTag:awe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sxe=0;function Txe(t,e){return function(r,i=null){Gr(r)||(r=hc({},r)),i!=null&&!xi(i)&&(i=null);const s=moe(),a=new WeakSet;let l=!1;const o=s.app={_uid:Sxe++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Yxe,get config(){return s.config},set config(d){},use(d,...p){return a.has(d)||(d&&Gr(d.install)?(a.add(d),d.install(o,...p)):Gr(d)&&(a.add(d),d(o,...p))),o},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),o},component(d,p){return p?(s.components[d]=p,o):s.components[d]},directive(d,p){return p?(s.directives[d]=p,o):s.directives[d]},mount(d,p,A){if(!l){const v=pt(r,i);return v.appContext=s,A===!0?A="svg":A===!1&&(A=void 0),p&&e?e(v,d):t(v,d,A),l=!0,o._container=d,d.__vue_app__=o,q5(v.component)||v.component.proxy}},unmount(){l&&(t(null,o._container),delete o._container.__vue_app__)},provide(d,p){return s.provides[d]=p,o},runWithContext(d){const p=kT;kT=o;try{return d()}finally{kT=p}}};return o}}let kT=null;function Rr(t,e){if(Du){let n=Du.provides;const r=Du.parent&&Du.parent.provides;r===n&&(n=Du.provides=Object.create(r)),n[t]=e}}function mn(t,e,n=!1){const r=Du||Zc;if(r||kT){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:kT._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Gr(e)?e.call(r&&r.proxy):e}}const voe={},yoe=()=>Object.create(voe),_oe=t=>Object.getPrototypeOf(t)===voe;function Ixe(t,e,n,r=!1){const i={},s=yoe();t.propsDefaults=Object.create(null),boe(t,e,i,s);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:R$(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Bxe(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=t,l=fo(i),[o]=t.propsOptions;let d=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=t.vnode.dynamicProps;for(let A=0;A<p.length;A++){let v=p[A];if(V5(t.emitsOptions,v))continue;const y=e[v];if(o)if(vs(s,v))y!==s[v]&&(s[v]=y,d=!0);else{const C=xp(v);i[C]=zU(o,l,C,y,t,!1)}else y!==s[v]&&(s[v]=y,d=!0)}}}else{boe(t,e,i,s)&&(d=!0);let p;for(const A in l)(!e||!vs(e,A)&&((p=y_(A))===A||!vs(e,p)))&&(o?n&&(n[A]!==void 0||n[p]!==void 0)&&(i[A]=zU(o,l,A,void 0,t,!0)):delete i[A]);if(s!==l)for(const A in s)(!e||!vs(e,A))&&(delete s[A],d=!0)}d&&Lv(t.attrs,"set","")}function boe(t,e,n,r){const[i,s]=t.propsOptions;let a=!1,l;if(e)for(let o in e){if(RT(o))continue;const d=e[o];let p;i&&vs(i,p=xp(o))?!s||!s.includes(p)?n[p]=d:(l||(l={}))[p]=d:V5(t.emitsOptions,o)||(!(o in r)||d!==r[o])&&(r[o]=d,a=!0)}if(s){const o=fo(n),d=l||sl;for(let p=0;p<s.length;p++){const A=s[p];n[A]=zU(i,o,A,d[A],t,!vs(d,A))}}return a}function zU(t,e,n,r,i,s){const a=t[n];if(a!=null){const l=vs(a,"default");if(l&&r===void 0){const o=a.default;if(a.type!==Function&&!a.skipFactory&&Gr(o)){const{propsDefaults:d}=i;if(n in d)r=d[n];else{const p=OB(i);r=d[n]=o.call(null,e),p()}}else r=o}a[0]&&(s&&!l?r=!1:a[1]&&(r===""||r===y_(n))&&(r=!0))}return r}function woe(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,a={},l=[];let o=!1;if(!Gr(t)){const p=A=>{o=!0;const[v,y]=woe(A,e,!0);hc(a,v),y&&l.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!s&&!o)return xi(t)&&r.set(t,rC),rC;if(Jn(s))for(let p=0;p<s.length;p++){const A=xp(s[p]);Tq(A)&&(a[A]=sl)}else if(s)for(const p in s){const A=xp(p);if(Tq(A)){const v=s[p],y=a[A]=Jn(v)||Gr(v)?{type:v}:hc({},v);if(y){const C=Mq(Boolean,y.type),x=Mq(String,y.type);y[0]=C>-1,y[1]=x<0||C<x,(C>-1||vs(y,"default"))&&l.push(A)}}}const d=[a,l];return xi(t)&&r.set(t,d),d}function Tq(t){return t[0]!=="$"&&!RT(t)}function Iq(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Bq(t,e){return Iq(t)===Iq(e)}function Mq(t,e){return Jn(e)?e.findIndex(n=>Bq(n,t)):Gr(e)&&Bq(e,t)?0:-1}const xoe=t=>t[0]==="_"||t==="$stable",H$=t=>Jn(t)?t.map(Ug):[Ug(t)],Mxe=(t,e,n)=>{if(e._n)return e;const r=It((...i)=>H$(e(...i)),n);return r._c=!1,r},Coe=(t,e,n)=>{const r=t._ctx;for(const i in t){if(xoe(i))continue;const s=t[i];if(Gr(s))e[i]=Mxe(i,s,r);else if(s!=null){const a=H$(s);e[i]=()=>a}}},Eoe=(t,e)=>{const n=H$(e);t.slots.default=()=>n},Lxe=(t,e)=>{const n=t.slots=yoe();if(t.vnode.shapeFlag&32){const r=e._;r?(hc(n,e),Mse(n,"_",r,!0)):Coe(e,n)}else e&&Eoe(t,e)},Rxe=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,a=sl;if(r.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:(hc(i,e),!n&&l===1&&delete i._):(s=!e.$stable,Coe(e,i)),a=e}else e&&(Eoe(t,e),a={default:1});if(s)for(const l in i)!xoe(l)&&a[l]==null&&delete i[l]};function $U(t,e,n,r,i=!1){if(Jn(t)){t.forEach((v,y)=>$U(v,e&&(Jn(e)?e[y]:e),n,r,i));return}if(OT(r)&&!i)return;const s=r.shapeFlag&4?q5(r.component)||r.component.proxy:r.el,a=i?null:s,{i:l,r:o}=t,d=e&&e.r,p=l.refs===sl?l.refs={}:l.refs,A=l.setupState;if(d!=null&&d!==o&&(Xr(d)?(p[d]=null,vs(A,d)&&(A[d]=null)):Go(d)&&(d.value=null)),Gr(o))Vy(o,l,12,[a,p]);else{const v=Xr(o),y=Go(o);if(v||y){const C=()=>{if(t.f){const x=v?vs(A,o)?A[o]:p[o]:o.value;i?Jn(x)&&E$(x,s):Jn(x)?x.includes(s)||x.push(s):v?(p[o]=[s],vs(A,o)&&(A[o]=p[o])):(o.value=[s],t.k&&(p[t.k]=o.value))}else v?(p[o]=a,vs(A,o)&&(A[o]=a)):y&&(o.value=a,t.k&&(p[t.k]=a))};a?(C.id=-1,md(C,n)):C()}}}const md=axe;function Pxe(t){return Fxe(t)}function Fxe(t,e){const n=Lse();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:l,createComment:o,setText:d,setElementText:p,parentNode:A,nextSibling:v,setScopeId:y=co,insertStaticContent:C}=t,x=(ke,Ye,at,He=null,Tt=null,Ut=null,Rt=void 0,Bt=null,Ht=!!Ye.dynamicChildren)=>{if(ke===Ye)return;ke&&!M1(ke,Ye)&&(He=Ie(ke),ae(ke,Tt,Ut,!0),ke=null),Ye.patchFlag===-2&&(Ht=!1,Ye.dynamicChildren=null);const{type:xt,ref:Zt,shapeFlag:un}=Ye;switch(xt){case _E:M(ke,Ye,at,He);break;case gh:I(ke,Ye,at,He);break;case xD:ke==null&&P(Ye,at,He,Rt);break;case _r:Y(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht);break;default:un&1?V(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht):un&6?ee(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht):(un&64||un&128)&&xt.process(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht,je)}Zt!=null&&Tt&&$U(Zt,ke&&ke.ref,Ut,Ye||ke,!Ye)},M=(ke,Ye,at,He)=>{if(ke==null)r(Ye.el=l(Ye.children),at,He);else{const Tt=Ye.el=ke.el;Ye.children!==ke.children&&d(Tt,Ye.children)}},I=(ke,Ye,at,He)=>{ke==null?r(Ye.el=o(Ye.children||""),at,He):Ye.el=ke.el},P=(ke,Ye,at,He)=>{[ke.el,ke.anchor]=C(ke.children,Ye,at,He,ke.el,ke.anchor)},F=({el:ke,anchor:Ye},at,He)=>{let Tt;for(;ke&&ke!==Ye;)Tt=v(ke),r(ke,at,He),ke=Tt;r(Ye,at,He)},D=({el:ke,anchor:Ye})=>{let at;for(;ke&&ke!==Ye;)at=v(ke),i(ke),ke=at;i(Ye)},V=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht)=>{Ye.type==="svg"?Rt="svg":Ye.type==="math"&&(Rt="mathml"),ke==null?H(Ye,at,He,Tt,Ut,Rt,Bt,Ht):W(ke,Ye,Tt,Ut,Rt,Bt,Ht)},H=(ke,Ye,at,He,Tt,Ut,Rt,Bt)=>{let Ht,xt;const{props:Zt,shapeFlag:un,transition:Ft,dirs:mt}=ke;if(Ht=ke.el=a(ke.type,Ut,Zt&&Zt.is,Zt),un&8?p(Ht,ke.children):un&16&&G(ke.children,Ht,null,He,Tt,wD(ke,Ut),Rt,Bt),mt&&p1(ke,null,He,"created"),Q(Ht,ke,ke.scopeId,Rt,He),Zt){for(const ze in Zt)ze!=="value"&&!RT(ze)&&s(Ht,ze,null,Zt[ze],Ut,ke.children,He,Tt,Re);"value"in Zt&&s(Ht,"value",null,Zt.value,Ut),(xt=Zt.onVnodeBeforeMount)&&Tg(xt,He,ke)}mt&&p1(ke,null,He,"beforeMount");const Be=Oxe(Tt,Ft);Be&&Ft.beforeEnter(Ht),r(Ht,Ye,at),((xt=Zt&&Zt.onVnodeMounted)||Be||mt)&&md(()=>{xt&&Tg(xt,He,ke),Be&&Ft.enter(Ht),mt&&p1(ke,null,He,"mounted")},Tt)},Q=(ke,Ye,at,He,Tt)=>{if(at&&y(ke,at),He)for(let Ut=0;Ut<He.length;Ut++)y(ke,He[Ut]);if(Tt){let Ut=Tt.subTree;if(Ye===Ut){const Rt=Tt.vnode;Q(ke,Rt,Rt.scopeId,Rt.slotScopeIds,Tt.parent)}}},G=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht=0)=>{for(let xt=Ht;xt<ke.length;xt++){const Zt=ke[xt]=Bt?yy(ke[xt]):Ug(ke[xt]);x(null,Zt,Ye,at,He,Tt,Ut,Rt,Bt)}},W=(ke,Ye,at,He,Tt,Ut,Rt)=>{const Bt=Ye.el=ke.el;let{patchFlag:Ht,dynamicChildren:xt,dirs:Zt}=Ye;Ht|=ke.patchFlag&16;const un=ke.props||sl,Ft=Ye.props||sl;let mt;if(at&&A1(at,!1),(mt=Ft.onVnodeBeforeUpdate)&&Tg(mt,at,Ye,ke),Zt&&p1(Ye,ke,at,"beforeUpdate"),at&&A1(at,!0),xt?te(ke.dynamicChildren,xt,Bt,at,He,wD(Ye,Tt),Ut):Rt||pe(ke,Ye,Bt,null,at,He,wD(Ye,Tt),Ut,!1),Ht>0){if(Ht&16)q(Bt,Ye,un,Ft,at,He,Tt);else if(Ht&2&&un.class!==Ft.class&&s(Bt,"class",null,Ft.class,Tt),Ht&4&&s(Bt,"style",un.style,Ft.style,Tt),Ht&8){const Be=Ye.dynamicProps;for(let ze=0;ze<Be.length;ze++){const it=Be[ze],bt=un[it],Qe=Ft[it];(Qe!==bt||it==="value")&&s(Bt,it,bt,Qe,Tt,ke.children,at,He,Re)}}Ht&1&&ke.children!==Ye.children&&p(Bt,Ye.children)}else!Rt&&xt==null&&q(Bt,Ye,un,Ft,at,He,Tt);((mt=Ft.onVnodeUpdated)||Zt)&&md(()=>{mt&&Tg(mt,at,Ye,ke),Zt&&p1(Ye,ke,at,"updated")},He)},te=(ke,Ye,at,He,Tt,Ut,Rt)=>{for(let Bt=0;Bt<Ye.length;Bt++){const Ht=ke[Bt],xt=Ye[Bt],Zt=Ht.el&&(Ht.type===_r||!M1(Ht,xt)||Ht.shapeFlag&70)?A(Ht.el):at;x(Ht,xt,Zt,null,He,Tt,Ut,Rt,!0)}},q=(ke,Ye,at,He,Tt,Ut,Rt)=>{if(at!==He){if(at!==sl)for(const Bt in at)!RT(Bt)&&!(Bt in He)&&s(ke,Bt,at[Bt],null,Rt,Ye.children,Tt,Ut,Re);for(const Bt in He){if(RT(Bt))continue;const Ht=He[Bt],xt=at[Bt];Ht!==xt&&Bt!=="value"&&s(ke,Bt,xt,Ht,Rt,Ye.children,Tt,Ut,Re)}"value"in He&&s(ke,"value",at.value,He.value,Rt)}},Y=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht)=>{const xt=Ye.el=ke?ke.el:l(""),Zt=Ye.anchor=ke?ke.anchor:l("");let{patchFlag:un,dynamicChildren:Ft,slotScopeIds:mt}=Ye;mt&&(Bt=Bt?Bt.concat(mt):mt),ke==null?(r(xt,at,He),r(Zt,at,He),G(Ye.children||[],at,Zt,Tt,Ut,Rt,Bt,Ht)):un>0&&un&64&&Ft&&ke.dynamicChildren?(te(ke.dynamicChildren,Ft,at,Tt,Ut,Rt,Bt),(Ye.key!=null||Tt&&Ye===Tt.subTree)&&G$(ke,Ye,!0)):pe(ke,Ye,at,Zt,Tt,Ut,Rt,Bt,Ht)},ee=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht)=>{Ye.slotScopeIds=Bt,ke==null?Ye.shapeFlag&512?Tt.ctx.activate(Ye,at,He,Rt,Ht):ce(Ye,at,He,Tt,Ut,Rt,Ht):se(ke,Ye,Ht)},ce=(ke,Ye,at,He,Tt,Ut,Rt)=>{const Bt=ke.component=Gxe(ke,He,Tt);if(Q5(ke)&&(Bt.ctx.renderer=je),Qxe(Bt),Bt.asyncDep){if(Tt&&Tt.registerDep(Bt,le),!ke.el){const Ht=Bt.subTree=pt(gh);I(null,Ht,Ye,at)}}else le(Bt,ke,Ye,at,Tt,Ut,Rt)},se=(ke,Ye,at)=>{const He=Ye.component=ke.component;if(rxe(ke,Ye,at))if(He.asyncDep&&!He.asyncResolved){ie(He,Ye,at);return}else He.next=Ye,qwe(He.update),He.effect.dirty=!0,He.update();else Ye.el=ke.el,He.vnode=Ye},le=(ke,Ye,at,He,Tt,Ut,Rt)=>{const Bt=()=>{if(ke.isMounted){let{next:Zt,bu:un,u:Ft,parent:mt,vnode:Be}=ke;{const St=Soe(ke);if(St){Zt&&(Zt.el=Be.el,ie(ke,Zt,Rt)),St.asyncDep.then(()=>{ke.isUnmounted||Bt()});return}}let ze=Zt,it;A1(ke,!1),Zt?(Zt.el=Be.el,ie(ke,Zt,Rt)):Zt=Be,un&&jP(un),(it=Zt.props&&Zt.props.onVnodeBeforeUpdate)&&Tg(it,mt,Zt,Be),A1(ke,!0);const bt=yD(ke),Qe=ke.subTree;ke.subTree=bt,x(Qe,bt,A(Qe.el),Ie(Qe),ke,Tt,Ut),Zt.el=bt.el,ze===null&&ixe(ke,bt.el),Ft&&md(Ft,Tt),(it=Zt.props&&Zt.props.onVnodeUpdated)&&md(()=>Tg(it,mt,Zt,Be),Tt)}else{let Zt;const{el:un,props:Ft}=Ye,{bm:mt,m:Be,parent:ze}=ke,it=OT(Ye);if(A1(ke,!1),mt&&jP(mt),!it&&(Zt=Ft&&Ft.onVnodeBeforeMount)&&Tg(Zt,ze,Ye),A1(ke,!0),un&&Et){const bt=()=>{ke.subTree=yD(ke),Et(un,ke.subTree,ke,Tt,null)};it?Ye.type.__asyncLoader().then(()=>!ke.isUnmounted&&bt()):bt()}else{const bt=ke.subTree=yD(ke);x(null,bt,at,He,ke,Tt,Ut),Ye.el=bt.el}if(Be&&md(Be,Tt),!it&&(Zt=Ft&&Ft.onVnodeMounted)){const bt=Ye;md(()=>Tg(Zt,ze,bt),Tt)}(Ye.shapeFlag&256||ze&&OT(ze.vnode)&&ze.vnode.shapeFlag&256)&&ke.a&&md(ke.a,Tt),ke.isMounted=!0,Ye=at=He=null}},Ht=ke.effect=new T$(Bt,co,()=>k$(xt),ke.scope),xt=ke.update=()=>{Ht.dirty&&Ht.run()};xt.id=ke.uid,A1(ke,!0),xt()},ie=(ke,Ye,at)=>{Ye.component=ke;const He=ke.vnode.props;ke.vnode=Ye,ke.next=null,Bxe(ke,Ye.props,He,at),Rxe(ke,Ye.children,at),__(),_q(ke),b_()},pe=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht=!1)=>{const xt=ke&&ke.children,Zt=ke?ke.shapeFlag:0,un=Ye.children,{patchFlag:Ft,shapeFlag:mt}=Ye;if(Ft>0){if(Ft&128){me(xt,un,at,He,Tt,Ut,Rt,Bt,Ht);return}else if(Ft&256){ue(xt,un,at,He,Tt,Ut,Rt,Bt,Ht);return}}mt&8?(Zt&16&&Re(xt,Tt,Ut),un!==xt&&p(at,un)):Zt&16?mt&16?me(xt,un,at,He,Tt,Ut,Rt,Bt,Ht):Re(xt,Tt,Ut,!0):(Zt&8&&p(at,""),mt&16&&G(un,at,He,Tt,Ut,Rt,Bt,Ht))},ue=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht)=>{ke=ke||rC,Ye=Ye||rC;const xt=ke.length,Zt=Ye.length,un=Math.min(xt,Zt);let Ft;for(Ft=0;Ft<un;Ft++){const mt=Ye[Ft]=Ht?yy(Ye[Ft]):Ug(Ye[Ft]);x(ke[Ft],mt,at,null,Tt,Ut,Rt,Bt,Ht)}xt>Zt?Re(ke,Tt,Ut,!0,!1,un):G(Ye,at,He,Tt,Ut,Rt,Bt,Ht,un)},me=(ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht)=>{let xt=0;const Zt=Ye.length;let un=ke.length-1,Ft=Zt-1;for(;xt<=un&&xt<=Ft;){const mt=ke[xt],Be=Ye[xt]=Ht?yy(Ye[xt]):Ug(Ye[xt]);if(M1(mt,Be))x(mt,Be,at,null,Tt,Ut,Rt,Bt,Ht);else break;xt++}for(;xt<=un&&xt<=Ft;){const mt=ke[un],Be=Ye[Ft]=Ht?yy(Ye[Ft]):Ug(Ye[Ft]);if(M1(mt,Be))x(mt,Be,at,null,Tt,Ut,Rt,Bt,Ht);else break;un--,Ft--}if(xt>un){if(xt<=Ft){const mt=Ft+1,Be=mt<Zt?Ye[mt].el:He;for(;xt<=Ft;)x(null,Ye[xt]=Ht?yy(Ye[xt]):Ug(Ye[xt]),at,Be,Tt,Ut,Rt,Bt,Ht),xt++}}else if(xt>Ft)for(;xt<=un;)ae(ke[xt],Tt,Ut,!0),xt++;else{const mt=xt,Be=xt,ze=new Map;for(xt=Be;xt<=Ft;xt++){const Gt=Ye[xt]=Ht?yy(Ye[xt]):Ug(Ye[xt]);Gt.key!=null&&ze.set(Gt.key,xt)}let it,bt=0;const Qe=Ft-Be+1;let St=!1,yt=0;const Xe=new Array(Qe);for(xt=0;xt<Qe;xt++)Xe[xt]=0;for(xt=mt;xt<=un;xt++){const Gt=ke[xt];if(bt>=Qe){ae(Gt,Tt,Ut,!0);continue}let gt;if(Gt.key!=null)gt=ze.get(Gt.key);else for(it=Be;it<=Ft;it++)if(Xe[it-Be]===0&&M1(Gt,Ye[it])){gt=it;break}gt===void 0?ae(Gt,Tt,Ut,!0):(Xe[gt-Be]=xt+1,gt>=yt?yt=gt:St=!0,x(Gt,Ye[gt],at,null,Tt,Ut,Rt,Bt,Ht),bt++)}const _t=St?Nxe(Xe):rC;for(it=_t.length-1,xt=Qe-1;xt>=0;xt--){const Gt=Be+xt,gt=Ye[Gt],hn=Gt+1<Zt?Ye[Gt+1].el:He;Xe[xt]===0?x(null,gt,at,hn,Tt,Ut,Rt,Bt,Ht):St&&(it<0||xt!==_t[it]?Le(gt,at,hn,2):it--)}}},Le=(ke,Ye,at,He,Tt=null)=>{const{el:Ut,type:Rt,transition:Bt,children:Ht,shapeFlag:xt}=ke;if(xt&6){Le(ke.component.subTree,Ye,at,He);return}if(xt&128){ke.suspense.move(Ye,at,He);return}if(xt&64){Rt.move(ke,Ye,at,je);return}if(Rt===_r){r(Ut,Ye,at);for(let un=0;un<Ht.length;un++)Le(Ht[un],Ye,at,He);r(ke.anchor,Ye,at);return}if(Rt===xD){F(ke,Ye,at);return}if(He!==2&&xt&1&&Bt)if(He===0)Bt.beforeEnter(Ut),r(Ut,Ye,at),md(()=>Bt.enter(Ut),Tt);else{const{leave:un,delayLeave:Ft,afterLeave:mt}=Bt,Be=()=>r(Ut,Ye,at),ze=()=>{un(Ut,()=>{Be(),mt&&mt()})};Ft?Ft(Ut,Be,ze):ze()}else r(Ut,Ye,at)},ae=(ke,Ye,at,He=!1,Tt=!1)=>{const{type:Ut,props:Rt,ref:Bt,children:Ht,dynamicChildren:xt,shapeFlag:Zt,patchFlag:un,dirs:Ft}=ke;if(Bt!=null&&$U(Bt,null,at,ke,!0),Zt&256){Ye.ctx.deactivate(ke);return}const mt=Zt&1&&Ft,Be=!OT(ke);let ze;if(Be&&(ze=Rt&&Rt.onVnodeBeforeUnmount)&&Tg(ze,Ye,ke),Zt&6)$e(ke.component,at,He);else{if(Zt&128){ke.suspense.unmount(at,He);return}mt&&p1(ke,null,Ye,"beforeUnmount"),Zt&64?ke.type.remove(ke,Ye,at,Tt,je,He):xt&&(Ut!==_r||un>0&&un&64)?Re(xt,Ye,at,!1,!0):(Ut===_r&&un&384||!Tt&&Zt&16)&&Re(Ht,Ye,at),He&&be(ke)}(Be&&(ze=Rt&&Rt.onVnodeUnmounted)||mt)&&md(()=>{ze&&Tg(ze,Ye,ke),mt&&p1(ke,null,Ye,"unmounted")},at)},be=ke=>{const{type:Ye,el:at,anchor:He,transition:Tt}=ke;if(Ye===_r){_e(at,He);return}if(Ye===xD){D(ke);return}const Ut=()=>{i(at),Tt&&!Tt.persisted&&Tt.afterLeave&&Tt.afterLeave()};if(ke.shapeFlag&1&&Tt&&!Tt.persisted){const{leave:Rt,delayLeave:Bt}=Tt,Ht=()=>Rt(at,Ut);Bt?Bt(ke.el,Ut,Ht):Ht()}else Ut()},_e=(ke,Ye)=>{let at;for(;ke!==Ye;)at=v(ke),i(ke),ke=at;i(Ye)},$e=(ke,Ye,at)=>{const{bum:He,scope:Tt,update:Ut,subTree:Rt,um:Bt}=ke;He&&jP(He),Tt.stop(),Ut&&(Ut.active=!1,ae(Rt,ke,Ye,at)),Bt&&md(Bt,Ye),md(()=>{ke.isUnmounted=!0},Ye),Ye&&Ye.pendingBranch&&!Ye.isUnmounted&&ke.asyncDep&&!ke.asyncResolved&&ke.suspenseId===Ye.pendingId&&(Ye.deps--,Ye.deps===0&&Ye.resolve())},Re=(ke,Ye,at,He=!1,Tt=!1,Ut=0)=>{for(let Rt=Ut;Rt<ke.length;Rt++)ae(ke[Rt],Ye,at,He,Tt)},Ie=ke=>ke.shapeFlag&6?Ie(ke.component.subTree):ke.shapeFlag&128?ke.suspense.next():v(ke.anchor||ke.el);let Ne=!1;const Je=(ke,Ye,at)=>{ke==null?Ye._vnode&&ae(Ye._vnode,null,null,!0):x(Ye._vnode||null,ke,Ye,null,null,null,at),Ne||(Ne=!0,_q(),roe(),Ne=!1),Ye._vnode=ke},je={p:x,um:ae,m:Le,r:be,mt:ce,mc:G,pc:pe,pbc:te,n:Ie,o:t};let ft,Et;return{render:Je,hydrate:ft,createApp:Txe(Je,ft)}}function wD({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function A1({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Oxe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function G$(t,e,n=!1){const r=t.children,i=e.children;if(Jn(r)&&Jn(i))for(let s=0;s<r.length;s++){const a=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=yy(i[s]),l.el=a.el),n||G$(a,l)),l.type===_E&&(l.el=a.el)}}function Nxe(t){const e=t.slice(),n=[0];let r,i,s,a,l;const o=t.length;for(r=0;r<o;r++){const d=t[r];if(d!==0){if(i=n[n.length-1],t[i]<d){e[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)l=s+a>>1,t[n[l]]<d?s=l+1:a=l;d<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}function Soe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Soe(e)}const kxe=t=>t.__isTeleport,DT=t=>t&&(t.disabled||t.disabled===""),Lq=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Rq=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,VU=(t,e)=>{const n=t&&t.to;return Xr(n)?e?e(n):null:n},Dxe={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,a,l,o,d){const{mc:p,pc:A,pbc:v,o:{insert:y,querySelector:C,createText:x,createComment:M}}=d,I=DT(e.props);let{shapeFlag:P,children:F,dynamicChildren:D}=e;if(t==null){const V=e.el=x(""),H=e.anchor=x("");y(V,n,r),y(H,n,r);const Q=e.target=VU(e.props,C),G=e.targetAnchor=x("");Q&&(y(G,Q),a==="svg"||Lq(Q)?a="svg":(a==="mathml"||Rq(Q))&&(a="mathml"));const W=(te,q)=>{P&16&&p(F,te,q,i,s,a,l,o)};I?W(n,H):Q&&W(Q,G)}else{e.el=t.el;const V=e.anchor=t.anchor,H=e.target=t.target,Q=e.targetAnchor=t.targetAnchor,G=DT(t.props),W=G?n:H,te=G?V:Q;if(a==="svg"||Lq(H)?a="svg":(a==="mathml"||Rq(H))&&(a="mathml"),D?(v(t.dynamicChildren,D,W,i,s,a,l),G$(t,e,!0)):o||A(t,e,W,te,i,s,a,l,!1),I)G?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):YL(e,n,V,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const q=e.target=VU(e.props,C);q&&YL(e,q,null,d,0)}else G&&YL(e,H,Q,d,1)}Toe(e)},remove(t,e,n,r,{um:i,o:{remove:s}},a){const{shapeFlag:l,children:o,anchor:d,targetAnchor:p,target:A,props:v}=t;if(A&&s(p),a&&s(d),l&16){const y=a||!DT(v);for(let C=0;C<o.length;C++){const x=o[C];i(x,e,n,y,!!x.dynamicChildren)}}},move:YL,hydrate:Uxe};function YL(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:a,anchor:l,shapeFlag:o,children:d,props:p}=t,A=s===2;if(A&&r(a,e,n),(!A||DT(p))&&o&16)for(let v=0;v<d.length;v++)i(d[v],e,n,2);A&&r(l,e,n)}function Uxe(t,e,n,r,i,s,{o:{nextSibling:a,parentNode:l,querySelector:o}},d){const p=e.target=VU(e.props,o);if(p){const A=p._lpa||p.firstChild;if(e.shapeFlag&16)if(DT(e.props))e.anchor=d(a(t),e,l(t),n,r,i,s),e.targetAnchor=A;else{e.anchor=a(t);let v=A;for(;v;)if(v=a(v),v&&v.nodeType===8&&v.data==="teleport anchor"){e.targetAnchor=v,p._lpa=e.targetAnchor&&a(e.targetAnchor);break}d(A,e,p,n,r,i,s)}Toe(e)}return e.anchor&&a(e.anchor)}const yE=Dxe;function Toe(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const _r=Symbol.for("v-fgt"),_E=Symbol.for("v-txt"),gh=Symbol.for("v-cmt"),xD=Symbol.for("v-stc"),UT=[];let BA=null;function ve(t=!1){UT.push(BA=t?null:[])}function zxe(){UT.pop(),BA=UT[UT.length-1]||null}let II=1;function Pq(t){II+=t}function Ioe(t){return t.dynamicChildren=II>0?BA||rC:null,zxe(),II>0&&BA&&BA.push(t),t}function Ue(t,e,n,r,i,s){return Ioe(rt(t,e,n,r,i,s,!0))}function qt(t,e,n,r,i){return Ioe(pt(t,e,n,r,i,!0))}function ya(t){return t?t.__v_isVNode===!0:!1}function M1(t,e){return t.type===e.type&&t.key===e.key}const Boe=({key:t})=>t??null,KP=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xr(t)||Go(t)||Gr(t)?{i:Zc,r:t,k:e,f:!!n}:t:null);function rt(t,e=null,n=null,r=0,i=null,s=t===_r?0:1,a=!1,l=!1){const o={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Boe(e),ref:e&&KP(e),scopeId:H5,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Zc};return l?(Q$(o,n),s&128&&t.normalize(o)):n&&(o.shapeFlag|=Xr(n)?8:16),II>0&&!a&&BA&&(o.patchFlag>0||s&6)&&o.patchFlag!==32&&BA.push(o),o}const pt=$xe;function $xe(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===ooe)&&(t=gh),ya(t)){const l=Qv(t,e,!0);return n&&Q$(l,n),II>0&&!s&&BA&&(l.shapeFlag&6?BA[BA.indexOf(t)]=l:BA.push(l)),l.patchFlag|=-2,l}if(qxe(t)&&(t=t.__vccOpts),e){e=MC(e);let{class:l,style:o}=e;l&&!Xr(l)&&(e.class=xe(l)),xi(o)&&(qse(o)&&!Jn(o)&&(o=hc({},o)),e.style=vr(o))}const a=Xr(t)?1:oxe(t)?128:kxe(t)?64:xi(t)?4:Gr(t)?2:0;return rt(t,e,n,r,i,a,s,!0)}function MC(t){return t?qse(t)||_oe(t)?hc({},t):t:null}function Qv(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:l,transition:o}=t,d=e?Gi(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Boe(d),ref:e&&e.ref?n&&s?Jn(s)?s.concat(KP(e)):[s,KP(e)]:KP(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_r?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:o,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qv(t.ssContent),ssFallback:t.ssFallback&&Qv(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return o&&r&&(p.transition=o.clone(p)),p}function gs(t=" ",e=0){return pt(_E,null,t,e)}function wt(t="",e=!1){return e?(ve(),qt(gh,null,t)):pt(gh,null,t)}function Ug(t){return t==null||typeof t=="boolean"?pt(gh):Jn(t)?pt(_r,null,t.slice()):typeof t=="object"?yy(t):pt(_E,null,String(t))}function yy(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qv(t)}function Q$(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Jn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Q$(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!_oe(e)?e._ctx=Zc:i===3&&Zc&&(Zc.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Gr(e)?(e={default:e,_ctx:Zc},n=32):(e=String(e),r&64?(n=16,e=[gs(e)]):n=8);t.children=e,t.shapeFlag|=n}function Gi(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=xe([e.class,r.class]));else if(i==="style")e.style=vr([e.style,r.style]);else if(k5(i)){const s=e[i],a=r[i];a&&s!==a&&!(Jn(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function Tg(t,e,n,r=null){_p(t,e,7,[n,r])}const Vxe=moe();let Hxe=0;function Gxe(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Vxe,s={uid:Hxe++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ose(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:woe(r,i),emitsOptions:soe(r,i),emit:null,emitted:null,propsDefaults:sl,inheritAttrs:r.inheritAttrs,ctx:sl,data:sl,props:sl,attrs:sl,slots:sl,refs:sl,setupState:sl,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Zwe.bind(null,s),t.ce&&t.ce(s),s}let Du=null;const mi=()=>Du||Zc;let ZF,HU;{const t=Lse(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};ZF=e("__VUE_INSTANCE_SETTERS__",n=>Du=n),HU=e("__VUE_SSR_SETTERS__",n=>W5=n)}const OB=t=>{const e=Du;return ZF(t),t.scope.on(),()=>{t.scope.off(),ZF(e)}},Fq=()=>{Du&&Du.scope.off(),ZF(null)};function Moe(t){return t.vnode.shapeFlag&4}let W5=!1;function Qxe(t,e=!1){e&&HU(e);const{props:n,children:r}=t.vnode,i=Moe(t);Ixe(t,n,i,e),Lxe(t,r);const s=i?jxe(t,e):void 0;return e&&HU(!1),s}function jxe(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,_xe);const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?Roe(t):null,s=OB(t);__();const a=Vy(r,t,0,[t.props,i]);if(b_(),s(),bI(a)){if(a.then(Fq,Fq),e)return a.then(l=>{Oq(t,l,e)}).catch(l=>{$5(l,t,0)});t.asyncDep=a}else Oq(t,a,e)}else Loe(t,e)}function Oq(t,e,n){Gr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xi(e)&&(t.setupState=Jse(e)),Loe(t,n)}let Nq;function Loe(t,e,n){const r=t.type;if(!t.render){if(!e&&Nq&&!r.render){const i=r.template||V$(t).template;if(i){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:l,compilerOptions:o}=r,d=hc(hc({isCustomElement:s,delimiters:l},a),o);r.render=Nq(i,d)}}t.render=r.render||co}{const i=OB(t);__();try{bxe(t)}finally{b_(),i()}}}const Kxe={get(t,e){return Ld(t,"get",""),t[e]}};function Roe(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Kxe),slots:t.slots,emit:t.emit,expose:e}}function q5(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Jse(sC(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in NT)return NT[n](t)},has(e,n){return n in e||n in NT}}))}function Wxe(t,e=!0){return Gr(t)?t.displayName||t.name:t.name||e&&t.__name}function qxe(t){return Gr(t)&&"__vccOpts"in t}const oe=(t,e)=>Xse(t,e,W5);function Br(t,e,n){const r=arguments.length;return r===2?xi(e)&&!Jn(e)?ya(e)?pt(t,null,[e]):pt(t,e):pt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ya(n)&&(n=[n]),pt(t,e,n))}const Yxe="3.4.27",Xxe=co;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Zxe="http://www.w3.org/2000/svg",Jxe="http://www.w3.org/1998/Math/MathML",_y=typeof document<"u"?document:null,kq=_y&&_y.createElement("template"),eCe={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?_y.createElementNS(Zxe,t):e==="mathml"?_y.createElementNS(Jxe,t):_y.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>_y.createTextNode(t),createComment:t=>_y.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_y.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const a=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{kq.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const l=kq.content;if(r==="svg"||r==="mathml"){const o=l.firstChild;for(;o.firstChild;)l.appendChild(o.firstChild);l.removeChild(o)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},X0="transition",PS="animation",LC=Symbol("_vtc"),fc=(t,{slots:e})=>Br(dxe,Foe(t),e);fc.displayName="Transition";const Poe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},tCe=fc.props=hc({},coe,Poe),g1=(t,e=[])=>{Jn(t)?t.forEach(n=>n(...e)):t&&t(...e)},Dq=t=>t?Jn(t)?t.some(e=>e.length>1):t.length>1:!1;function Foe(t){const e={};for(const Y in t)Y in Poe||(e[Y]=t[Y]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:o=s,appearActiveClass:d=a,appearToClass:p=l,leaveFromClass:A=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=t,C=nCe(i),x=C&&C[0],M=C&&C[1],{onBeforeEnter:I,onEnter:P,onEnterCancelled:F,onLeave:D,onLeaveCancelled:V,onBeforeAppear:H=I,onAppear:Q=P,onAppearCancelled:G=F}=e,W=(Y,ee,ce)=>{uy(Y,ee?p:l),uy(Y,ee?d:a),ce&&ce()},te=(Y,ee)=>{Y._isLeaving=!1,uy(Y,A),uy(Y,y),uy(Y,v),ee&&ee()},q=Y=>(ee,ce)=>{const se=Y?Q:P,le=()=>W(ee,Y,ce);g1(se,[ee,le]),Uq(()=>{uy(ee,Y?o:s),_v(ee,Y?p:l),Dq(se)||zq(ee,r,x,le)})};return hc(e,{onBeforeEnter(Y){g1(I,[Y]),_v(Y,s),_v(Y,a)},onBeforeAppear(Y){g1(H,[Y]),_v(Y,o),_v(Y,d)},onEnter:q(!1),onAppear:q(!0),onLeave(Y,ee){Y._isLeaving=!0;const ce=()=>te(Y,ee);_v(Y,A),_v(Y,v),Noe(),Uq(()=>{Y._isLeaving&&(uy(Y,A),_v(Y,y),Dq(D)||zq(Y,r,M,ce))}),g1(D,[Y,ce])},onEnterCancelled(Y){W(Y,!1),g1(F,[Y])},onAppearCancelled(Y){W(Y,!0),g1(G,[Y])},onLeaveCancelled(Y){te(Y),g1(V,[Y])}})}function nCe(t){if(t==null)return null;if(xi(t))return[CD(t.enter),CD(t.leave)];{const e=CD(t);return[e,e]}}function CD(t){return hwe(t)}function _v(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[LC]||(t[LC]=new Set)).add(e)}function uy(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[LC];n&&(n.delete(e),n.size||(t[LC]=void 0))}function Uq(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let rCe=0;function zq(t,e,n,r){const i=t._endId=++rCe,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:l,propCount:o}=Ooe(t,e);if(!a)return r();const d=a+"end";let p=0;const A=()=>{t.removeEventListener(d,v),s()},v=y=>{y.target===t&&++p>=o&&A()};setTimeout(()=>{p<o&&A()},l+1),t.addEventListener(d,v)}function Ooe(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),i=r(`${X0}Delay`),s=r(`${X0}Duration`),a=$q(i,s),l=r(`${PS}Delay`),o=r(`${PS}Duration`),d=$q(l,o);let p=null,A=0,v=0;e===X0?a>0&&(p=X0,A=a,v=s.length):e===PS?d>0&&(p=PS,A=d,v=o.length):(A=Math.max(a,d),p=A>0?a>d?X0:PS:null,v=p?p===X0?s.length:o.length:0);const y=p===X0&&/\b(transform|all)(,|$)/.test(r(`${X0}Property`).toString());return{type:p,timeout:A,propCount:v,hasTransform:y}}function $q(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Vq(n)+Vq(t[r])))}function Vq(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Noe(){return document.body.offsetHeight}function iCe(t,e,n){const r=t[LC];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const JF=Symbol("_vod"),koe=Symbol("_vsh"),Hs={beforeMount(t,{value:e},{transition:n}){t[JF]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):FS(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),FS(t,!0),r.enter(t)):r.leave(t,()=>{FS(t,!1)}):FS(t,e))},beforeUnmount(t,{value:e}){FS(t,e)}};function FS(t,e){t.style.display=e?t[JF]:"none",t[koe]=!e}const sCe=Symbol(""),oCe=/(^|;)\s*display\s*:/;function aCe(t,e,n){const r=t.style,i=Xr(n);let s=!1;if(n&&!i){if(e)if(Xr(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&WP(r,l,"")}else for(const a in e)n[a]==null&&WP(r,a,"");for(const a in n)a==="display"&&(s=!0),WP(r,a,n[a])}else if(i){if(e!==n){const a=r[sCe];a&&(n+=";"+a),r.cssText=n,s=oCe.test(n)}}else e&&t.removeAttribute("style");JF in t&&(t[JF]=s?r.display:"",t[koe]&&(r.display="none"))}const Hq=/\s*!important$/;function WP(t,e,n){if(Jn(n))n.forEach(r=>WP(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=lCe(t,e);Hq.test(n)?t.setProperty(y_(r),n.replace(Hq,""),"important"):t[r]=n}}const Gq=["Webkit","Moz","ms"],ED={};function lCe(t,e){const n=ED[e];if(n)return n;let r=xp(e);if(r!=="filter"&&r in t)return ED[e]=r;r=FB(r);for(let i=0;i<Gq.length;i++){const s=Gq[i]+r;if(s in t)return ED[e]=s}return e}const Qq="http://www.w3.org/1999/xlink";function cCe(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Qq,e.slice(6,e.length)):t.setAttributeNS(Qq,e,n);else{const s=mwe(e);n==null||s&&!Rse(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function uCe(t,e,n,r,i,s,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,i,s),t[e]=n??"";return}const l=t.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const d=l==="OPTION"?t.getAttribute("value")||"":t.value,p=n??"";(d!==p||!("_value"in t))&&(t.value=p),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=Rse(n):n==null&&d==="string"?(n="",o=!0):d==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(e)}function Ey(t,e,n,r){t.addEventListener(e,n,r)}function hCe(t,e,n,r){t.removeEventListener(e,n,r)}const jq=Symbol("_vei");function dCe(t,e,n,r,i=null){const s=t[jq]||(t[jq]={}),a=s[e];if(r&&a)a.value=r;else{const[l,o]=fCe(e);if(r){const d=s[e]=gCe(r,i);Ey(t,l,d,o)}else a&&(hCe(t,l,a,o),s[e]=void 0)}}const Kq=/(?:Once|Passive|Capture)$/;function fCe(t){let e;if(Kq.test(t)){e={};let r;for(;r=t.match(Kq);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):y_(t.slice(2)),e]}let SD=0;const pCe=Promise.resolve(),ACe=()=>SD||(pCe.then(()=>SD=0),SD=Date.now());function gCe(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;_p(mCe(r,n.value),e,5,[r])};return n.value=t,n.attached=ACe(),n}function mCe(t,e){if(Jn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Wq=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,vCe=(t,e,n,r,i,s,a,l,o)=>{const d=i==="svg";e==="class"?iCe(t,r,d):e==="style"?aCe(t,n,r):k5(e)?C$(e)||dCe(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yCe(t,e,r,d))?uCe(t,e,r,s,a,l,o):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),cCe(t,e,r,d))};function yCe(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wq(e)&&Gr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Wq(e)&&Xr(n)?!1:e in t}const Doe=new WeakMap,Uoe=new WeakMap,eO=Symbol("_moveCb"),qq=Symbol("_enterCb"),zoe={name:"TransitionGroup",props:hc({},tCe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=mi(),r=loe();let i,s;return o0(()=>{if(!i.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!CCe(i[0].el,n.vnode.el,a))return;i.forEach(bCe),i.forEach(wCe);const l=i.filter(xCe);Noe(),l.forEach(o=>{const d=o.el,p=d.style;_v(d,a),p.transform=p.webkitTransform=p.transitionDuration="";const A=d[eO]=v=>{v&&v.target!==d||(!v||/transform$/.test(v.propertyName))&&(d.removeEventListener("transitionend",A),d[eO]=null,uy(d,a))};d.addEventListener("transitionend",A)})}),()=>{const a=fo(t),l=Foe(a);let o=a.tag||_r;if(i=[],s)for(let d=0;d<s.length;d++){const p=s[d];p.el&&p.el instanceof Element&&(i.push(p),TI(p,SI(p,l,r,n)),Doe.set(p,p.el.getBoundingClientRect()))}s=e.default?$$(e.default()):[];for(let d=0;d<s.length;d++){const p=s[d];p.key!=null&&TI(p,SI(p,l,r,n))}return pt(o,null,s)}}},_Ce=t=>delete t.mode;zoe.props;const $oe=zoe;function bCe(t){const e=t.el;e[eO]&&e[eO](),e[qq]&&e[qq]()}function wCe(t){Uoe.set(t,t.el.getBoundingClientRect())}function xCe(t){const e=Doe.get(t),n=Uoe.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function CCe(t,e,n){const r=t.cloneNode(),i=t[LC];i&&i.forEach(l=>{l.split(/\s+/).forEach(o=>o&&r.classList.remove(o))}),n.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:a}=Ooe(r);return s.removeChild(r),a}const RC=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Jn(e)?n=>jP(e,n):e};function ECe(t){t.target.composing=!0}function Yq(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Rv=Symbol("_assign"),j$={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Rv]=RC(i);const s=r||i.props&&i.props.type==="number";Ey(t,e?"change":"input",a=>{if(a.target.composing)return;let l=t.value;n&&(l=l.trim()),s&&(l=LU(l)),t[Rv](l)}),n&&Ey(t,"change",()=>{t.value=t.value.trim()}),e||(Ey(t,"compositionstart",ECe),Ey(t,"compositionend",Yq),Ey(t,"change",Yq))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[Rv]=RC(s),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?LU(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===l)||(t.value=l))}},tO={deep:!0,created(t,e,n){t[Rv]=RC(n),Ey(t,"change",()=>{const r=t._modelValue,i=Hoe(t),s=t.checked,a=t[Rv];if(Jn(r)){const l=Pse(r,i),o=l!==-1;if(s&&!o)a(r.concat(i));else if(!s&&o){const d=[...r];d.splice(l,1),a(d)}}else if(D5(r)){const l=new Set(r);s?l.add(i):l.delete(i),a(l)}else a(Goe(t,s))})},mounted:Xq,beforeUpdate(t,e,n){t[Rv]=RC(n),Xq(t,e,n)}};function Xq(t,{value:e,oldValue:n},r){t._modelValue=e,Jn(e)?t.checked=Pse(e,r.props.value)>-1:D5(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=BC(e,Goe(t,!0)))}const Voe={created(t,{value:e},n){t.checked=BC(e,n.props.value),t[Rv]=RC(n),Ey(t,"change",()=>{t[Rv](Hoe(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Rv]=RC(r),e!==n&&(t.checked=BC(e,r.props.value))}};function Hoe(t){return"_value"in t?t._value:t.value}function Goe(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const SCe=["ctrl","shift","alt","meta"],TCe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>SCe.some(n=>t[`${n}Key`]&&!e.includes(n))},qr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const l=TCe[e[a]];if(l&&l(i,e))return}return t(i,...s)})},ICe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},bo=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=y_(i.key);if(e.some(a=>a===s||ICe[a]===s))return t(i)})},BCe=hc({patchProp:vCe},eCe);let Zq;function Qoe(){return Zq||(Zq=Pxe(BCe))}const Yy=(...t)=>{Qoe().render(...t)},joe=(...t)=>{const e=Qoe().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LCe(r);if(!i)return;const s=e._component;!Gr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,MCe(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function MCe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LCe(t){return Xr(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const bx=typeof document<"u";function RCe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ma=Object.assign;function TD(t,e){const n={};for(const r in e){const i=e[r];n[r]=OA(i)?i.map(t):t(i)}return n}const zT=()=>{},OA=Array.isArray,Koe=/#/g,PCe=/&/g,FCe=/\//g,OCe=/=/g,NCe=/\?/g,Woe=/\+/g,kCe=/%5B/g,DCe=/%5D/g,qoe=/%5E/g,UCe=/%60/g,Yoe=/%7B/g,zCe=/%7C/g,Xoe=/%7D/g,$Ce=/%20/g;function K$(t){return encodeURI(""+t).replace(zCe,"|").replace(kCe,"[").replace(DCe,"]")}function VCe(t){return K$(t).replace(Yoe,"{").replace(Xoe,"}").replace(qoe,"^")}function GU(t){return K$(t).replace(Woe,"%2B").replace($Ce,"+").replace(Koe,"%23").replace(PCe,"%26").replace(UCe,"`").replace(Yoe,"{").replace(Xoe,"}").replace(qoe,"^")}function HCe(t){return GU(t).replace(OCe,"%3D")}function GCe(t){return K$(t).replace(Koe,"%23").replace(NCe,"%3F")}function QCe(t){return t==null?"":GCe(t).replace(FCe,"%2F")}function BI(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const jCe=/\/$/,KCe=t=>t.replace(jCe,"");function ID(t,e,n="/"){let r,i={},s="",a="";const l=e.indexOf("#");let o=e.indexOf("?");return l<o&&l>=0&&(o=-1),o>-1&&(r=e.slice(0,o),s=e.slice(o+1,l>-1?l:e.length),i=t(s)),l>-1&&(r=r||e.slice(0,l),a=e.slice(l,e.length)),r=XCe(r??e,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:BI(a)}}function WCe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Jq(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function qCe(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&PC(e.matched[r],n.matched[i])&&Zoe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function PC(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Zoe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!YCe(t[n],e[n]))return!1;return!0}function YCe(t,e){return OA(t)?eY(t,e):OA(e)?eY(e,t):t===e}function eY(t,e){return OA(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function XCe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a).join("/")}var MI;(function(t){t.pop="pop",t.push="push"})(MI||(MI={}));var $T;(function(t){t.back="back",t.forward="forward",t.unknown=""})($T||($T={}));function ZCe(t){if(!t)if(bx){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),KCe(t)}const JCe=/^[^#]+#/;function eEe(t,e){return t.replace(JCe,"#")+e}function tEe(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Y5=()=>({left:window.scrollX,top:window.scrollY});function nEe(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=tEe(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function tY(t,e){return(history.state?history.state.position-e:-1)+t}const QU=new Map;function rEe(t,e){QU.set(t,e)}function iEe(t){const e=QU.get(t);return QU.delete(t),e}let sEe=()=>location.protocol+"//"+location.host;function Joe(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let l=i.includes(t.slice(s))?t.slice(s).length:1,o=i.slice(l);return o[0]!=="/"&&(o="/"+o),Jq(o,"")}return Jq(n,t)+r+i}function oEe(t,e,n,r){let i=[],s=[],a=null;const l=({state:v})=>{const y=Joe(t,location),C=n.value,x=e.value;let M=0;if(v){if(n.value=y,e.value=v,a&&a===C){a=null;return}M=x?v.position-x.position:0}else r(y);i.forEach(I=>{I(n.value,C,{delta:M,type:MI.pop,direction:M?M>0?$T.forward:$T.back:$T.unknown})})};function o(){a=n.value}function d(v){i.push(v);const y=()=>{const C=i.indexOf(v);C>-1&&i.splice(C,1)};return s.push(y),y}function p(){const{history:v}=window;v.state&&v.replaceState(ma({},v.state,{scroll:Y5()}),"")}function A(){for(const v of s)v();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:o,listen:d,destroy:A}}function nY(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Y5():null}}function aEe(t){const{history:e,location:n}=window,r={value:Joe(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(o,d,p){const A=t.indexOf("#"),v=A>-1?(n.host&&document.querySelector("base")?t:t.slice(A))+o:sEe()+t+o;try{e[p?"replaceState":"pushState"](d,"",v),i.value=d}catch(y){console.error(y),n[p?"replace":"assign"](v)}}function a(o,d){const p=ma({},e.state,nY(i.value.back,o,i.value.forward,!0),d,{position:i.value.position});s(o,p,!0),r.value=o}function l(o,d){const p=ma({},i.value,e.state,{forward:o,scroll:Y5()});s(p.current,p,!0);const A=ma({},nY(r.value,o,null),{position:p.position+1},d);s(o,A,!1),r.value=o}return{location:r,state:i,push:l,replace:a}}function lEe(t){t=ZCe(t);const e=aEe(t),n=oEe(t,e.state,e.location,e.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=ma({location:"",base:t,go:r,createHref:eEe.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function cEe(t){return typeof t=="string"||t&&typeof t=="object"}function eae(t){return typeof t=="string"||typeof t=="symbol"}const Z0={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},tae=Symbol("");var rY;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(rY||(rY={}));function FC(t,e){return ma(new Error,{type:t,[tae]:!0},e)}function uv(t,e){return t instanceof Error&&tae in t&&(e==null||!!(t.type&e))}const iY="[^/]+?",uEe={sensitive:!1,strict:!1,start:!0,end:!0},hEe=/[.+*?^${}()[\]/\\]/g;function dEe(t,e){const n=ma({},uEe,e),r=[];let i=n.start?"^":"";const s=[];for(const d of t){const p=d.length?[]:[90];n.strict&&!d.length&&(i+="/");for(let A=0;A<d.length;A++){const v=d[A];let y=40+(n.sensitive?.25:0);if(v.type===0)A||(i+="/"),i+=v.value.replace(hEe,"\\$&"),y+=40;else if(v.type===1){const{value:C,repeatable:x,optional:M,regexp:I}=v;s.push({name:C,repeatable:x,optional:M});const P=I||iY;if(P!==iY){y+=10;try{new RegExp(`(${P})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${C}" (${P}): `+D.message)}}let F=x?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;A||(F=M&&d.length<2?`(?:/${F})`:"/"+F),M&&(F+="?"),i+=F,y+=20,M&&(y+=-8),x&&(y+=-20),P===".*"&&(y+=-50)}p.push(y)}r.push(p)}if(n.strict&&n.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function l(d){const p=d.match(a),A={};if(!p)return null;for(let v=1;v<p.length;v++){const y=p[v]||"",C=s[v-1];A[C.name]=y&&C.repeatable?y.split("/"):y}return A}function o(d){let p="",A=!1;for(const v of t){(!A||!p.endsWith("/"))&&(p+="/"),A=!1;for(const y of v)if(y.type===0)p+=y.value;else if(y.type===1){const{value:C,repeatable:x,optional:M}=y,I=C in d?d[C]:"";if(OA(I)&&!x)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const P=OA(I)?I.join("/"):I;if(!P)if(M)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):A=!0);else throw new Error(`Missing required param "${C}"`);p+=P}}return p||"/"}return{re:a,score:r,keys:s,parse:l,stringify:o}}function fEe(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function pEe(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=fEe(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(sY(r))return 1;if(sY(i))return-1}return i.length-r.length}function sY(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AEe={type:0,value:""},gEe=/[a-zA-Z0-9_]/;function mEe(t){if(!t)return[[]];if(t==="/")return[[AEe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${d}": ${y}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let l=0,o,d="",p="";function A(){d&&(n===0?s.push({type:0,value:d}):n===1||n===2||n===3?(s.length>1&&(o==="*"||o==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:p,repeatable:o==="*"||o==="+",optional:o==="*"||o==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=o}for(;l<t.length;){if(o=t[l++],o==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:o==="/"?(d&&A(),a()):o===":"?(A(),n=1):v();break;case 4:v(),n=r;break;case 1:o==="("?n=2:gEe.test(o)?v():(A(),n=0,o!=="*"&&o!=="?"&&o!=="+"&&l--);break;case 2:o===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+o:n=3:p+=o;break;case 3:A(),n=0,o!=="*"&&o!=="?"&&o!=="+"&&l--,p="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${d}"`),A(),a(),i}function vEe(t,e,n){const r=dEe(mEe(t.path),n),i=ma(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function yEe(t,e){const n=[],r=new Map;e=lY({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,A,v){const y=!v,C=_Ee(p);C.aliasOf=v&&v.record;const x=lY(e,p),M=[C];if("alias"in p){const F=typeof p.alias=="string"?[p.alias]:p.alias;for(const D of F)M.push(ma({},C,{components:v?v.record.components:C.components,path:D,aliasOf:v?v.record:C}))}let I,P;for(const F of M){const{path:D}=F;if(A&&D[0]!=="/"){const V=A.record.path,H=V[V.length-1]==="/"?"":"/";F.path=A.record.path+(D&&H+D)}if(I=vEe(F,A,x),v?v.alias.push(I):(P=P||I,P!==I&&P.alias.push(I),y&&p.name&&!aY(I)&&a(p.name)),C.children){const V=C.children;for(let H=0;H<V.length;H++)s(V[H],I,v&&v.children[H])}v=v||I,(I.record.components&&Object.keys(I.record.components).length||I.record.name||I.record.redirect)&&o(I)}return P?()=>{a(P)}:zT}function a(p){if(eae(p)){const A=r.get(p);A&&(r.delete(p),n.splice(n.indexOf(A),1),A.children.forEach(a),A.alias.forEach(a))}else{const A=n.indexOf(p);A>-1&&(n.splice(A,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function o(p){let A=0;for(;A<n.length&&pEe(p,n[A])>=0&&(p.record.path!==n[A].record.path||!nae(p,n[A]));)A++;n.splice(A,0,p),p.record.name&&!aY(p)&&r.set(p.record.name,p)}function d(p,A){let v,y={},C,x;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw FC(1,{location:p});x=v.record.name,y=ma(oY(A.params,v.keys.filter(P=>!P.optional).concat(v.parent?v.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),p.params&&oY(p.params,v.keys.map(P=>P.name))),C=v.stringify(y)}else if(p.path!=null)C=p.path,v=n.find(P=>P.re.test(C)),v&&(y=v.parse(C),x=v.record.name);else{if(v=A.name?r.get(A.name):n.find(P=>P.re.test(A.path)),!v)throw FC(1,{location:p,currentLocation:A});x=v.record.name,y=ma({},A.params,p.params),C=v.stringify(y)}const M=[];let I=v;for(;I;)M.unshift(I.record),I=I.parent;return{name:x,path:C,params:y,matched:M,meta:wEe(M)}}return t.forEach(p=>s(p)),{addRoute:s,resolve:d,removeRoute:a,getRoutes:l,getRecordMatcher:i}}function oY(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function _Ee(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:bEe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function bEe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function aY(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function wEe(t){return t.reduce((e,n)=>ma(e,n.meta),{})}function lY(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function nae(t,e){return e.children.some(n=>n===t||nae(t,n))}function xEe(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Woe," "),a=s.indexOf("="),l=BI(a<0?s:s.slice(0,a)),o=a<0?null:BI(s.slice(a+1));if(l in e){let d=e[l];OA(d)||(d=e[l]=[d]),d.push(o)}else e[l]=o}return e}function cY(t){let e="";for(let n in t){const r=t[n];if(n=HCe(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(OA(r)?r.map(s=>s&&GU(s)):[r&&GU(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function CEe(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=OA(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const EEe=Symbol(""),uY=Symbol(""),W$=Symbol(""),rae=Symbol(""),jU=Symbol("");function OS(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function by(t,e,n,r,i,s=a=>a()){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((l,o)=>{const d=v=>{v===!1?o(FC(4,{from:n,to:e})):v instanceof Error?o(v):cEe(v)?o(FC(2,{from:e,to:v})):(a&&r.enterCallbacks[i]===a&&typeof v=="function"&&a.push(v),l())},p=s(()=>t.call(r&&r.instances[i],e,n,d));let A=Promise.resolve(p);t.length<3&&(A=A.then(d)),A.catch(v=>o(v))})}function BD(t,e,n,r,i=s=>s()){const s=[];for(const a of t)for(const l in a.components){let o=a.components[l];if(!(e!=="beforeRouteEnter"&&!a.instances[l]))if(SEe(o)){const p=(o.__vccOpts||o)[e];p&&s.push(by(p,n,r,a,l,i))}else{let d=o();s.push(()=>d.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${a.path}"`));const A=RCe(p)?p.default:p;a.components[l]=A;const y=(A.__vccOpts||A)[e];return y&&by(y,n,r,a,l,i)()}))}}return s}function SEe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hY(t){const e=mn(W$),n=mn(rae),r=oe(()=>{const o=T(t.to);return e.resolve(o)}),i=oe(()=>{const{matched:o}=r.value,{length:d}=o,p=o[d-1],A=n.matched;if(!p||!A.length)return-1;const v=A.findIndex(PC.bind(null,p));if(v>-1)return v;const y=dY(o[d-2]);return d>1&&dY(p)===y&&A[A.length-1].path!==y?A.findIndex(PC.bind(null,o[d-2])):v}),s=oe(()=>i.value>-1&&MEe(n.params,r.value.params)),a=oe(()=>i.value>-1&&i.value===n.matched.length-1&&Zoe(n.params,r.value.params));function l(o={}){return BEe(o)?e[T(t.replace)?"replace":"push"](T(t.to)).catch(zT):Promise.resolve()}return{route:r,href:oe(()=>r.value.href),isActive:s,isExactActive:a,navigate:l}}const TEe=Ge({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:hY,setup(t,{slots:e}){const n=Xs(hY(t)),{options:r}=mn(W$),i=oe(()=>({[fY(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[fY(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Br("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),IEe=TEe;function BEe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function MEe(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!OA(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function dY(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const fY=(t,e,n)=>t??e??n,LEe=Ge({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=mn(jU),i=oe(()=>t.route||r.value),s=mn(uY,0),a=oe(()=>{let d=T(s);const{matched:p}=i.value;let A;for(;(A=p[d])&&!A.components;)d++;return d}),l=oe(()=>i.value.matched[a.value]);Rr(uY,oe(()=>a.value+1)),Rr(EEe,l),Rr(jU,i);const o=Me();return zt(()=>[o.value,l.value,t.name],([d,p,A],[v,y,C])=>{p&&(p.instances[A]=d,y&&y!==p&&d&&d===v&&(p.leaveGuards.size||(p.leaveGuards=y.leaveGuards),p.updateGuards.size||(p.updateGuards=y.updateGuards))),d&&p&&(!y||!PC(p,y)||!v)&&(p.enterCallbacks[A]||[]).forEach(x=>x(d))},{flush:"post"}),()=>{const d=i.value,p=t.name,A=l.value,v=A&&A.components[p];if(!v)return pY(n.default,{Component:v,route:d});const y=A.props[p],C=y?y===!0?d.params:typeof y=="function"?y(d):y:null,M=Br(v,ma({},C,e,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(A.instances[p]=null)},ref:o}));return pY(n.default,{Component:M,route:d})||M}}});function pY(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const REe=LEe;function PEe(t){const e=yEe(t.routes,t),n=t.parseQuery||xEe,r=t.stringifyQuery||cY,i=t.history,s=OS(),a=OS(),l=OS(),o=Ds(Z0);let d=Z0;bx&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=TD.bind(null,Ie=>""+Ie),A=TD.bind(null,QCe),v=TD.bind(null,BI);function y(Ie,Ne){let Je,je;return eae(Ie)?(Je=e.getRecordMatcher(Ie),je=Ne):je=Ie,e.addRoute(je,Je)}function C(Ie){const Ne=e.getRecordMatcher(Ie);Ne&&e.removeRoute(Ne)}function x(){return e.getRoutes().map(Ie=>Ie.record)}function M(Ie){return!!e.getRecordMatcher(Ie)}function I(Ie,Ne){if(Ne=ma({},Ne||o.value),typeof Ie=="string"){const Ye=ID(n,Ie,Ne.path),at=e.resolve({path:Ye.path},Ne),He=i.createHref(Ye.fullPath);return ma(Ye,at,{params:v(at.params),hash:BI(Ye.hash),redirectedFrom:void 0,href:He})}let Je;if(Ie.path!=null)Je=ma({},Ie,{path:ID(n,Ie.path,Ne.path).path});else{const Ye=ma({},Ie.params);for(const at in Ye)Ye[at]==null&&delete Ye[at];Je=ma({},Ie,{params:A(Ye)}),Ne.params=A(Ne.params)}const je=e.resolve(Je,Ne),ft=Ie.hash||"";je.params=p(v(je.params));const Et=WCe(r,ma({},Ie,{hash:VCe(ft),path:je.path})),ke=i.createHref(Et);return ma({fullPath:Et,hash:ft,query:r===cY?CEe(Ie.query):Ie.query||{}},je,{redirectedFrom:void 0,href:ke})}function P(Ie){return typeof Ie=="string"?ID(n,Ie,o.value.path):ma({},Ie)}function F(Ie,Ne){if(d!==Ie)return FC(8,{from:Ne,to:Ie})}function D(Ie){return Q(Ie)}function V(Ie){return D(ma(P(Ie),{replace:!0}))}function H(Ie){const Ne=Ie.matched[Ie.matched.length-1];if(Ne&&Ne.redirect){const{redirect:Je}=Ne;let je=typeof Je=="function"?Je(Ie):Je;return typeof je=="string"&&(je=je.includes("?")||je.includes("#")?je=P(je):{path:je},je.params={}),ma({query:Ie.query,hash:Ie.hash,params:je.path!=null?{}:Ie.params},je)}}function Q(Ie,Ne){const Je=d=I(Ie),je=o.value,ft=Ie.state,Et=Ie.force,ke=Ie.replace===!0,Ye=H(Je);if(Ye)return Q(ma(P(Ye),{state:typeof Ye=="object"?ma({},ft,Ye.state):ft,force:Et,replace:ke}),Ne||Je);const at=Je;at.redirectedFrom=Ne;let He;return!Et&&qCe(r,je,Je)&&(He=FC(16,{to:at,from:je}),Le(je,je,!0,!1)),(He?Promise.resolve(He):te(at,je)).catch(Tt=>uv(Tt)?uv(Tt,2)?Tt:me(Tt):pe(Tt,at,je)).then(Tt=>{if(Tt){if(uv(Tt,2))return Q(ma({replace:ke},P(Tt.to),{state:typeof Tt.to=="object"?ma({},ft,Tt.to.state):ft,force:Et}),Ne||at)}else Tt=Y(at,je,!0,ke,ft);return q(at,je,Tt),Tt})}function G(Ie,Ne){const Je=F(Ie,Ne);return Je?Promise.reject(Je):Promise.resolve()}function W(Ie){const Ne=_e.values().next().value;return Ne&&typeof Ne.runWithContext=="function"?Ne.runWithContext(Ie):Ie()}function te(Ie,Ne){let Je;const[je,ft,Et]=FEe(Ie,Ne);Je=BD(je.reverse(),"beforeRouteLeave",Ie,Ne);for(const Ye of je)Ye.leaveGuards.forEach(at=>{Je.push(by(at,Ie,Ne))});const ke=G.bind(null,Ie,Ne);return Je.push(ke),Re(Je).then(()=>{Je=[];for(const Ye of s.list())Je.push(by(Ye,Ie,Ne));return Je.push(ke),Re(Je)}).then(()=>{Je=BD(ft,"beforeRouteUpdate",Ie,Ne);for(const Ye of ft)Ye.updateGuards.forEach(at=>{Je.push(by(at,Ie,Ne))});return Je.push(ke),Re(Je)}).then(()=>{Je=[];for(const Ye of Et)if(Ye.beforeEnter)if(OA(Ye.beforeEnter))for(const at of Ye.beforeEnter)Je.push(by(at,Ie,Ne));else Je.push(by(Ye.beforeEnter,Ie,Ne));return Je.push(ke),Re(Je)}).then(()=>(Ie.matched.forEach(Ye=>Ye.enterCallbacks={}),Je=BD(Et,"beforeRouteEnter",Ie,Ne,W),Je.push(ke),Re(Je))).then(()=>{Je=[];for(const Ye of a.list())Je.push(by(Ye,Ie,Ne));return Je.push(ke),Re(Je)}).catch(Ye=>uv(Ye,8)?Ye:Promise.reject(Ye))}function q(Ie,Ne,Je){l.list().forEach(je=>W(()=>je(Ie,Ne,Je)))}function Y(Ie,Ne,Je,je,ft){const Et=F(Ie,Ne);if(Et)return Et;const ke=Ne===Z0,Ye=bx?history.state:{};Je&&(je||ke?i.replace(Ie.fullPath,ma({scroll:ke&&Ye&&Ye.scroll},ft)):i.push(Ie.fullPath,ft)),o.value=Ie,Le(Ie,Ne,Je,ke),me()}let ee;function ce(){ee||(ee=i.listen((Ie,Ne,Je)=>{if(!$e.listening)return;const je=I(Ie),ft=H(je);if(ft){Q(ma(ft,{replace:!0}),je).catch(zT);return}d=je;const Et=o.value;bx&&rEe(tY(Et.fullPath,Je.delta),Y5()),te(je,Et).catch(ke=>uv(ke,12)?ke:uv(ke,2)?(Q(ke.to,je).then(Ye=>{uv(Ye,20)&&!Je.delta&&Je.type===MI.pop&&i.go(-1,!1)}).catch(zT),Promise.reject()):(Je.delta&&i.go(-Je.delta,!1),pe(ke,je,Et))).then(ke=>{ke=ke||Y(je,Et,!1),ke&&(Je.delta&&!uv(ke,8)?i.go(-Je.delta,!1):Je.type===MI.pop&&uv(ke,20)&&i.go(-1,!1)),q(je,Et,ke)}).catch(zT)}))}let se=OS(),le=OS(),ie;function pe(Ie,Ne,Je){me(Ie);const je=le.list();return je.length?je.forEach(ft=>ft(Ie,Ne,Je)):console.error(Ie),Promise.reject(Ie)}function ue(){return ie&&o.value!==Z0?Promise.resolve():new Promise((Ie,Ne)=>{se.add([Ie,Ne])})}function me(Ie){return ie||(ie=!Ie,ce(),se.list().forEach(([Ne,Je])=>Ie?Je(Ie):Ne()),se.reset()),Ie}function Le(Ie,Ne,Je,je){const{scrollBehavior:ft}=t;if(!bx||!ft)return Promise.resolve();const Et=!Je&&iEe(tY(Ie.fullPath,0))||(je||!Je)&&history.state&&history.state.scroll||null;return Tr().then(()=>ft(Ie,Ne,Et)).then(ke=>ke&&nEe(ke)).catch(ke=>pe(ke,Ie,Ne))}const ae=Ie=>i.go(Ie);let be;const _e=new Set,$e={currentRoute:o,listening:!0,addRoute:y,removeRoute:C,hasRoute:M,getRoutes:x,resolve:I,options:t,push:D,replace:V,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:s.add,beforeResolve:a.add,afterEach:l.add,onError:le.add,isReady:ue,install(Ie){const Ne=this;Ie.component("RouterLink",IEe),Ie.component("RouterView",REe),Ie.config.globalProperties.$router=Ne,Object.defineProperty(Ie.config.globalProperties,"$route",{enumerable:!0,get:()=>T(o)}),bx&&!be&&o.value===Z0&&(be=!0,D(i.location).catch(ft=>{}));const Je={};for(const ft in Z0)Object.defineProperty(Je,ft,{get:()=>o.value[ft],enumerable:!0});Ie.provide(W$,Ne),Ie.provide(rae,R$(Je)),Ie.provide(jU,o);const je=Ie.unmount;_e.add(Ie),Ie.unmount=function(){_e.delete(Ie),_e.size<1&&(d=Z0,ee&&ee(),ee=null,o.value=Z0,be=!1,ie=!1),je()}}};function Re(Ie){return Ie.reduce((Ne,Je)=>Ne.then(()=>W(Je)),Promise.resolve())}return $e}function FEe(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let a=0;a<s;a++){const l=e.matched[a];l&&(t.matched.find(d=>PC(d,l))?r.push(l):n.push(l));const o=t.matched[a];o&&(e.matched.find(d=>PC(d,o))||i.push(o))}return[n,r,i]}const OEe=t=>(Jwe("data-v-98eed86a"),t=t(),exe(),t),NEe={class:"block"},kEe=OEe(()=>rt("span",{class:"demonstration"},"Pick ranges of data",-1)),DEe=Ge({__name:"DateTimePicker",setup(t){const e=Me(""),n=[{text:"Last day",value:()=>{const r=new Date,i=new Date;return i.setDate(i.getDate()-1),[i,r]}},{text:"Last week",value:()=>{const r=new Date,i=new Date;return i.setDate(i.getDate()-7),[i,r]}},{text:"Last month",value:()=>{const r=new Date,i=new Date;return i.setMonth(i.getMonth()-1),[i,r]}},{text:"Last 3 months",value:()=>{const r=new Date,i=new Date;return i.setMonth(i.getMonth()-3),[i,r]}}];return(r,i)=>{const s=ui("el-date-picker");return ve(),Ue("div",NEe,[kEe,pt(s,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=a=>e.value=a),type:"datetimerange",shortcuts:n,"range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])])}}}),iae=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},UEe=iae(DEe,[["__scopeId","data-v-98eed86a"]]),zEe={id:"MainPanel"},$Ee={class:"container"},VEe={__name:"MainPanel",setup(t){return oe(()=>"V1:Framework build,Map test"),(e,n)=>{const r=ui("el-col"),i=ui("el-button"),s=ui("el-row");return ve(),Ue("div",zEe,[rt("div",$Ee,[pt(s,null,{default:It(()=>[pt(r,{span:8,offset:8},{default:It(()=>[pt(UEe)]),_:1}),pt(r,{span:2,offset:6},{default:It(()=>[pt(i,{type:"primary"},{default:It(()=>[gs("Get Data")]),_:1})]),_:1})]),_:1})])])}}};function AY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AY(Object(n),!0).forEach(function(r){ru(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nO(t){"@babel/helpers - typeof";return nO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nO(t)}function HEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function QEe(t,e,n){return e&&GEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ru(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q$(t,e){return KEe(t)||qEe(t,e)||sae(t,e)||XEe()}function NB(t){return jEe(t)||WEe(t)||sae(t)||YEe()}function jEe(t){if(Array.isArray(t))return KU(t)}function KEe(t){if(Array.isArray(t))return t}function WEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,l;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(o){s=!0,l=o}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function sae(t,e){if(t){if(typeof t=="string")return KU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KU(t,e)}}function KU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gY=function(){},Y$={},oae={},aae=null,lae={mark:gY,measure:gY};try{typeof window<"u"&&(Y$=window),typeof document<"u"&&(oae=document),typeof MutationObserver<"u"&&(aae=MutationObserver),typeof performance<"u"&&(lae=performance)}catch{}var ZEe=Y$.navigator||{},mY=ZEe.userAgent,vY=mY===void 0?"":mY,Xy=Y$,ul=oae,yY=aae,XL=lae;Xy.document;var a0=!!ul.documentElement&&!!ul.head&&typeof ul.addEventListener=="function"&&typeof ul.createElement=="function",cae=~vY.indexOf("MSIE")||~vY.indexOf("Trident/"),ZL,JL,eR,tR,nR,jv="___FONT_AWESOME___",WU=16,uae="fa",hae="svg-inline--fa",vb="data-fa-i2svg",qU="data-fa-pseudo-element",JEe="data-fa-pseudo-element-pending",X$="data-prefix",Z$="data-icon",_Y="fontawesome-i2svg",eSe="async",tSe=["HTML","HEAD","STYLE","SCRIPT"],dae=function(){try{return!0}catch{return!1}}(),al="classic",Ul="sharp",J$=[al,Ul];function kB(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[al]}})}var LI=kB((ZL={},ru(ZL,al,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ru(ZL,Ul,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),ZL)),RI=kB((JL={},ru(JL,al,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ru(JL,Ul,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),JL)),PI=kB((eR={},ru(eR,al,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ru(eR,Ul,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),eR)),nSe=kB((tR={},ru(tR,al,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ru(tR,Ul,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),tR)),rSe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,fae="fa-layers-text",iSe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,sSe=kB((nR={},ru(nR,al,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ru(nR,Ul,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),nR)),pae=[1,2,3,4,5,6,7,8,9,10],oSe=pae.concat([11,12,13,14,15,16,17,18,19,20]),aSe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],k1={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},FI=new Set;Object.keys(RI[al]).map(FI.add.bind(FI));Object.keys(RI[Ul]).map(FI.add.bind(FI));var lSe=[].concat(J$,NB(FI),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",k1.GROUP,k1.SWAP_OPACITY,k1.PRIMARY,k1.SECONDARY]).concat(pae.map(function(t){return"".concat(t,"x")})).concat(oSe.map(function(t){return"w-".concat(t)})),VT=Xy.FontAwesomeConfig||{};function cSe(t){var e=ul.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function uSe(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(ul&&typeof ul.querySelector=="function"){var hSe=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];hSe.forEach(function(t){var e=q$(t,2),n=e[0],r=e[1],i=uSe(cSe(n));i!=null&&(VT[r]=i)})}var Aae={styleDefault:"solid",familyDefault:"classic",cssPrefix:uae,replacementClass:hae,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};VT.familyPrefix&&(VT.cssPrefix=VT.familyPrefix);var OC=yi(yi({},Aae),VT);OC.autoReplaceSvg||(OC.observeMutations=!1);var zi={};Object.keys(Aae).forEach(function(t){Object.defineProperty(zi,t,{enumerable:!0,set:function(n){OC[t]=n,HT.forEach(function(r){return r(zi)})},get:function(){return OC[t]}})});Object.defineProperty(zi,"familyPrefix",{enumerable:!0,set:function(e){OC.cssPrefix=e,HT.forEach(function(n){return n(zi)})},get:function(){return OC.cssPrefix}});Xy.FontAwesomeConfig=zi;var HT=[];function dSe(t){return HT.push(t),function(){HT.splice(HT.indexOf(t),1)}}var J0=WU,Hg={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function fSe(t){if(!(!t||!a0)){var e=ul.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=ul.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=s)}return ul.head.insertBefore(e,r),t}}var pSe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function OI(){for(var t=12,e="";t-- >0;)e+=pSe[Math.random()*62|0];return e}function bE(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function eV(t){return t.classList?bE(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function gae(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ASe(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(gae(t[n]),'" ')},"").trim()}function X5(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function tV(t){return t.size!==Hg.size||t.x!==Hg.x||t.y!==Hg.y||t.rotate!==Hg.rotate||t.flipX||t.flipY}function gSe(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),l="rotate(".concat(e.rotate," 0 0)"),o={transform:"".concat(s," ").concat(a," ").concat(l)},d={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:o,path:d}}function mSe(t){var e=t.transform,n=t.width,r=n===void 0?WU:n,i=t.height,s=i===void 0?WU:i,a=t.startCentered,l=a===void 0?!1:a,o="";return l&&cae?o+="translate(".concat(e.x/J0-r/2,"em, ").concat(e.y/J0-s/2,"em) "):l?o+="translate(calc(-50% + ".concat(e.x/J0,"em), calc(-50% + ").concat(e.y/J0,"em)) "):o+="translate(".concat(e.x/J0,"em, ").concat(e.y/J0,"em) "),o+="scale(".concat(e.size/J0*(e.flipX?-1:1),", ").concat(e.size/J0*(e.flipY?-1:1),") "),o+="rotate(".concat(e.rotate,"deg) "),o}var vSe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function mae(){var t=uae,e=hae,n=zi.cssPrefix,r=zi.replacementClass,i=vSe;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),a=new RegExp("\\--".concat(t,"\\-"),"g"),l=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(l,".".concat(r))}return i}var bY=!1;function MD(){zi.autoAddCss&&!bY&&(fSe(mae()),bY=!0)}var ySe={mixout:function(){return{dom:{css:mae,insertCss:MD}}},hooks:function(){return{beforeDOMElementCreation:function(){MD()},beforeI2svg:function(){MD()}}}},Kv=Xy||{};Kv[jv]||(Kv[jv]={});Kv[jv].styles||(Kv[jv].styles={});Kv[jv].hooks||(Kv[jv].hooks={});Kv[jv].shims||(Kv[jv].shims=[]);var MA=Kv[jv],vae=[],_Se=function t(){ul.removeEventListener("DOMContentLoaded",t),rO=1,vae.map(function(e){return e()})},rO=!1;a0&&(rO=(ul.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ul.readyState),rO||ul.addEventListener("DOMContentLoaded",_Se));function bSe(t){a0&&(rO?setTimeout(t,0):vae.push(t))}function DB(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?gae(t):"<".concat(e," ").concat(ASe(r),">").concat(s.map(DB).join(""),"</").concat(e,">")}function wY(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var LD=function(e,n,r,i){var s=Object.keys(e),a=s.length,l=n,o,d,p;for(r===void 0?(o=1,p=e[s[0]]):(o=0,p=r);o<a;o++)d=s[o],p=l(p,e[d],d,e);return p};function wSe(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function YU(t){var e=wSe(t);return e.length===1?e[0].toString(16):null}function xSe(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function xY(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function XU(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=xY(e);typeof MA.hooks.addPack=="function"&&!i?MA.hooks.addPack(t,xY(e)):MA.styles[t]=yi(yi({},MA.styles[t]||{}),s),t==="fas"&&XU("fa",e)}var rR,iR,sR,kx=MA.styles,CSe=MA.shims,ESe=(rR={},ru(rR,al,Object.values(PI[al])),ru(rR,Ul,Object.values(PI[Ul])),rR),nV=null,yae={},_ae={},bae={},wae={},xae={},SSe=(iR={},ru(iR,al,Object.keys(LI[al])),ru(iR,Ul,Object.keys(LI[Ul])),iR);function TSe(t){return~lSe.indexOf(t)}function ISe(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!TSe(i)?i:null}var Cae=function(){var e=function(s){return LD(kx,function(a,l,o){return a[o]=LD(l,s,{}),a},{})};yae=e(function(i,s,a){if(s[3]&&(i[s[3]]=a),s[2]){var l=s[2].filter(function(o){return typeof o=="number"});l.forEach(function(o){i[o.toString(16)]=a})}return i}),_ae=e(function(i,s,a){if(i[a]=a,s[2]){var l=s[2].filter(function(o){return typeof o=="string"});l.forEach(function(o){i[o]=a})}return i}),xae=e(function(i,s,a){var l=s[2];return i[a]=a,l.forEach(function(o){i[o]=a}),i});var n="far"in kx||zi.autoFetchSvg,r=LD(CSe,function(i,s){var a=s[0],l=s[1],o=s[2];return l==="far"&&!n&&(l="fas"),typeof a=="string"&&(i.names[a]={prefix:l,iconName:o}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:l,iconName:o}),i},{names:{},unicodes:{}});bae=r.names,wae=r.unicodes,nV=Z5(zi.styleDefault,{family:zi.familyDefault})};dSe(function(t){nV=Z5(t.styleDefault,{family:zi.familyDefault})});Cae();function rV(t,e){return(yae[t]||{})[e]}function BSe(t,e){return(_ae[t]||{})[e]}function D1(t,e){return(xae[t]||{})[e]}function Eae(t){return bae[t]||{prefix:null,iconName:null}}function MSe(t){var e=wae[t],n=rV("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Zy(){return nV}var iV=function(){return{prefix:null,iconName:null,rest:[]}};function Z5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?al:n,i=LI[r][t],s=RI[r][t]||RI[r][i],a=t in MA.styles?t:null;return s||a||null}var CY=(sR={},ru(sR,al,Object.keys(PI[al])),ru(sR,Ul,Object.keys(PI[Ul])),sR);function J5(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},ru(e,al,"".concat(zi.cssPrefix,"-").concat(al)),ru(e,Ul,"".concat(zi.cssPrefix,"-").concat(Ul)),e),a=null,l=al;(t.includes(s[al])||t.some(function(d){return CY[al].includes(d)}))&&(l=al),(t.includes(s[Ul])||t.some(function(d){return CY[Ul].includes(d)}))&&(l=Ul);var o=t.reduce(function(d,p){var A=ISe(zi.cssPrefix,p);if(kx[p]?(p=ESe[l].includes(p)?nSe[l][p]:p,a=p,d.prefix=p):SSe[l].indexOf(p)>-1?(a=p,d.prefix=Z5(p,{family:l})):A?d.iconName=A:p!==zi.replacementClass&&p!==s[al]&&p!==s[Ul]&&d.rest.push(p),!i&&d.prefix&&d.iconName){var v=a==="fa"?Eae(d.iconName):{},y=D1(d.prefix,d.iconName);v.prefix&&(a=null),d.iconName=v.iconName||y||d.iconName,d.prefix=v.prefix||d.prefix,d.prefix==="far"&&!kx.far&&kx.fas&&!zi.autoFetchSvg&&(d.prefix="fas")}return d},iV());return(t.includes("fa-brands")||t.includes("fab"))&&(o.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(o.prefix="fad"),!o.prefix&&l===Ul&&(kx.fass||zi.autoFetchSvg)&&(o.prefix="fass",o.iconName=D1(o.prefix,o.iconName)||o.iconName),(o.prefix==="fa"||a==="fa")&&(o.prefix=Zy()||"fas"),o}var LSe=function(){function t(){HEe(this,t),this.definitions={}}return QEe(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(l){n.definitions[l]=yi(yi({},n.definitions[l]||{}),a[l]),XU(l,a[l]);var o=PI[al][l];o&&XU(o,a[l]),Cae()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var a=i[s],l=a.prefix,o=a.iconName,d=a.icon,p=d[2];n[l]||(n[l]={}),p.length>0&&p.forEach(function(A){typeof A=="string"&&(n[l][A]=d)}),n[l][o]=d}),n}}]),t}(),EY=[],Dx={},aC={},RSe=Object.keys(aC);function PSe(t,e){var n=e.mixoutsTo;return EY=t,Dx={},Object.keys(aC).forEach(function(r){RSe.indexOf(r)===-1&&delete aC[r]}),EY.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),nO(i[a])==="object"&&Object.keys(i[a]).forEach(function(l){n[a]||(n[a]={}),n[a][l]=i[a][l]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(a){Dx[a]||(Dx[a]=[]),Dx[a].push(s[a])})}r.provides&&r.provides(aC)}),n}function ZU(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Dx[t]||[];return s.forEach(function(a){e=a.apply(null,[e].concat(r))}),e}function yb(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Dx[t]||[];i.forEach(function(s){s.apply(null,n)})}function Wv(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return aC[t]?aC[t].apply(null,e):void 0}function JU(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Zy();if(e)return e=D1(n,e)||e,wY(Sae.definitions,n,e)||wY(MA.styles,n,e)}var Sae=new LSe,FSe=function(){zi.autoReplaceSvg=!1,zi.observeMutations=!1,yb("noAuto")},OSe={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a0?(yb("beforeI2svg",e),Wv("pseudoElements2svg",e),Wv("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;zi.autoReplaceSvg===!1&&(zi.autoReplaceSvg=!0),zi.observeMutations=!0,bSe(function(){kSe({autoReplaceSvgRoot:n}),yb("watch",e)})}},NSe={icon:function(e){if(e===null)return null;if(nO(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:D1(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=Z5(e[0]);return{prefix:r,iconName:D1(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(zi.cssPrefix,"-"))>-1||e.match(rSe))){var i=J5(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Zy(),iconName:D1(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=Zy();return{prefix:s,iconName:D1(s,e)||e}}}},Nf={noAuto:FSe,config:zi,dom:OSe,parse:NSe,library:Sae,findIconDefinition:JU,toHtml:DB},kSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?ul:n;(Object.keys(MA.styles).length>0||zi.autoFetchSvg)&&a0&&zi.autoReplaceSvg&&Nf.dom.i2svg({node:r})};function e2(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return DB(r)})}}),Object.defineProperty(t,"node",{get:function(){if(a0){var r=ul.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function DSe(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,a=t.transform;if(tV(a)&&n.found&&!r.found){var l=n.width,o=n.height,d={x:l/o/2,y:.5};i.style=X5(yi(yi({},s),{},{"transform-origin":"".concat(d.x+a.x/16,"em ").concat(d.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function USe(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,a=s===!0?"".concat(e,"-").concat(zi.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:yi(yi({},i),{},{id:a}),children:r}]}]}function sV(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,a=t.transform,l=t.symbol,o=t.title,d=t.maskId,p=t.titleId,A=t.extra,v=t.watchable,y=v===void 0?!1:v,C=r.found?r:n,x=C.width,M=C.height,I=i==="fak",P=[zi.replacementClass,s?"".concat(zi.cssPrefix,"-").concat(s):""].filter(function(W){return A.classes.indexOf(W)===-1}).filter(function(W){return W!==""||!!W}).concat(A.classes).join(" "),F={children:[],attributes:yi(yi({},A.attributes),{},{"data-prefix":i,"data-icon":s,class:P,role:A.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(x," ").concat(M)})},D=I&&!~A.classes.indexOf("fa-fw")?{width:"".concat(x/M*16*.0625,"em")}:{};y&&(F.attributes[vb]=""),o&&(F.children.push({tag:"title",attributes:{id:F.attributes["aria-labelledby"]||"title-".concat(p||OI())},children:[o]}),delete F.attributes.title);var V=yi(yi({},F),{},{prefix:i,iconName:s,main:n,mask:r,maskId:d,transform:a,symbol:l,styles:yi(yi({},D),A.styles)}),H=r.found&&n.found?Wv("generateAbstractMask",V)||{children:[],attributes:{}}:Wv("generateAbstractIcon",V)||{children:[],attributes:{}},Q=H.children,G=H.attributes;return V.children=Q,V.attributes=G,l?USe(V):DSe(V)}function SY(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,a=t.extra,l=t.watchable,o=l===void 0?!1:l,d=yi(yi(yi({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});o&&(d[vb]="");var p=yi({},a.styles);tV(i)&&(p.transform=mSe({transform:i,startCentered:!0,width:n,height:r}),p["-webkit-transform"]=p.transform);var A=X5(p);A.length>0&&(d.style=A);var v=[];return v.push({tag:"span",attributes:d,children:[e]}),s&&v.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),v}function zSe(t){var e=t.content,n=t.title,r=t.extra,i=yi(yi(yi({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=X5(r.styles);s.length>0&&(i.style=s);var a=[];return a.push({tag:"span",attributes:i,children:[e]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var RD=MA.styles;function e3(t){var e=t[0],n=t[1],r=t.slice(4),i=q$(r,1),s=i[0],a=null;return Array.isArray(s)?a={tag:"g",attributes:{class:"".concat(zi.cssPrefix,"-").concat(k1.GROUP)},children:[{tag:"path",attributes:{class:"".concat(zi.cssPrefix,"-").concat(k1.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(zi.cssPrefix,"-").concat(k1.PRIMARY),fill:"currentColor",d:s[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:a}}var $Se={found:!1,width:512,height:512};function VSe(t,e){!dae&&!zi.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function t3(t,e){var n=e;return e==="fa"&&zi.styleDefault!==null&&(e=Zy()),new Promise(function(r,i){if(Wv("missingIconAbstract"),n==="fa"){var s=Eae(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&RD[e]&&RD[e][t]){var a=RD[e][t];return r(e3(a))}VSe(t,e),r(yi(yi({},$Se),{},{icon:zi.showMissingIcons&&t?Wv("missingIconAbstract")||{}:{}}))})}var TY=function(){},n3=zi.measurePerformance&&XL&&XL.mark&&XL.measure?XL:{mark:TY,measure:TY},uT='FA "6.5.2"',HSe=function(e){return n3.mark("".concat(uT," ").concat(e," begins")),function(){return Tae(e)}},Tae=function(e){n3.mark("".concat(uT," ").concat(e," ends")),n3.measure("".concat(uT," ").concat(e),"".concat(uT," ").concat(e," begins"),"".concat(uT," ").concat(e," ends"))},oV={begin:HSe,end:Tae},qP=function(){};function IY(t){var e=t.getAttribute?t.getAttribute(vb):null;return typeof e=="string"}function GSe(t){var e=t.getAttribute?t.getAttribute(X$):null,n=t.getAttribute?t.getAttribute(Z$):null;return e&&n}function QSe(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(zi.replacementClass)}function jSe(){if(zi.autoReplaceSvg===!0)return YP.replace;var t=YP[zi.autoReplaceSvg];return t||YP.replace}function KSe(t){return ul.createElementNS("http://www.w3.org/2000/svg",t)}function WSe(t){return ul.createElement(t)}function Iae(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?KSe:WSe:n;if(typeof t=="string")return ul.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(a){i.setAttribute(a,t.attributes[a])});var s=t.children||[];return s.forEach(function(a){i.appendChild(Iae(a,{ceFn:r}))}),i}function qSe(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var YP={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(Iae(i),n)}),n.getAttribute(vb)===null&&zi.keepOriginalSource){var r=ul.createComment(qSe(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~eV(n).indexOf(zi.replacementClass))return YP.replace(e);var i=new RegExp("".concat(zi.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(l,o){return o===zi.replacementClass||o.match(i)?l.toSvg.push(o):l.toNode.push(o),l},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var a=r.map(function(l){return DB(l)}).join(`
`);n.setAttribute(vb,""),n.innerHTML=a}};function BY(t){t()}function Bae(t,e){var n=typeof e=="function"?e:qP;if(t.length===0)n();else{var r=BY;zi.mutateApproach===eSe&&(r=Xy.requestAnimationFrame||BY),r(function(){var i=jSe(),s=oV.begin("mutate");t.map(i),s(),n()})}}var aV=!1;function Mae(){aV=!0}function r3(){aV=!1}var iO=null;function MY(t){if(yY&&zi.observeMutations){var e=t.treeCallback,n=e===void 0?qP:e,r=t.nodeCallback,i=r===void 0?qP:r,s=t.pseudoElementsCallback,a=s===void 0?qP:s,l=t.observeMutationsRoot,o=l===void 0?ul:l;iO=new yY(function(d){if(!aV){var p=Zy();bE(d).forEach(function(A){if(A.type==="childList"&&A.addedNodes.length>0&&!IY(A.addedNodes[0])&&(zi.searchPseudoElements&&a(A.target),n(A.target)),A.type==="attributes"&&A.target.parentNode&&zi.searchPseudoElements&&a(A.target.parentNode),A.type==="attributes"&&IY(A.target)&&~aSe.indexOf(A.attributeName))if(A.attributeName==="class"&&GSe(A.target)){var v=J5(eV(A.target)),y=v.prefix,C=v.iconName;A.target.setAttribute(X$,y||p),C&&A.target.setAttribute(Z$,C)}else QSe(A.target)&&i(A.target)})}}),a0&&iO.observe(o,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function YSe(){iO&&iO.disconnect()}function XSe(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),a=s[0],l=s.slice(1);return a&&l.length>0&&(r[a]=l.join(":").trim()),r},{})),n}function ZSe(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=J5(eV(t));return i.prefix||(i.prefix=Zy()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=BSe(i.prefix,t.innerText)||rV(i.prefix,YU(t.innerText))),!i.iconName&&zi.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function JSe(t){var e=bE(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return zi.autoA11y&&(n?e["aria-labelledby"]="".concat(zi.replacementClass,"-title-").concat(r||OI()):(e["aria-hidden"]="true",e.focusable="false")),e}function eTe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Hg,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function LY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=ZSe(t),r=n.iconName,i=n.prefix,s=n.rest,a=JSe(t),l=ZU("parseNodeAttributes",{},t),o=e.styleParser?XSe(t):[];return yi({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Hg,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:o,attributes:a}},l)}var tTe=MA.styles;function Lae(t){var e=zi.autoReplaceSvg==="nest"?LY(t,{styleParser:!1}):LY(t);return~e.extra.classes.indexOf(fae)?Wv("generateLayersText",t,e):Wv("generateSvgReplacementMutation",t,e)}var Jy=new Set;J$.map(function(t){Jy.add("fa-".concat(t))});Object.keys(LI[al]).map(Jy.add.bind(Jy));Object.keys(LI[Ul]).map(Jy.add.bind(Jy));Jy=NB(Jy);function RY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!a0)return Promise.resolve();var n=ul.documentElement.classList,r=function(A){return n.add("".concat(_Y,"-").concat(A))},i=function(A){return n.remove("".concat(_Y,"-").concat(A))},s=zi.autoFetchSvg?Jy:J$.map(function(p){return"fa-".concat(p)}).concat(Object.keys(tTe));s.includes("fa")||s.push("fa");var a=[".".concat(fae,":not([").concat(vb,"])")].concat(s.map(function(p){return".".concat(p,":not([").concat(vb,"])")})).join(", ");if(a.length===0)return Promise.resolve();var l=[];try{l=bE(t.querySelectorAll(a))}catch{}if(l.length>0)r("pending"),i("complete");else return Promise.resolve();var o=oV.begin("onTree"),d=l.reduce(function(p,A){try{var v=Lae(A);v&&p.push(v)}catch(y){dae||y.name==="MissingIcon"&&console.error(y)}return p},[]);return new Promise(function(p,A){Promise.all(d).then(function(v){Bae(v,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),o(),p()})}).catch(function(v){o(),A(v)})})}function nTe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Lae(t).then(function(n){n&&Bae([n],e)})}function rTe(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:JU(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:JU(i||{})),t(r,yi(yi({},n),{},{mask:i}))}}var iTe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Hg:r,s=n.symbol,a=s===void 0?!1:s,l=n.mask,o=l===void 0?null:l,d=n.maskId,p=d===void 0?null:d,A=n.title,v=A===void 0?null:A,y=n.titleId,C=y===void 0?null:y,x=n.classes,M=x===void 0?[]:x,I=n.attributes,P=I===void 0?{}:I,F=n.styles,D=F===void 0?{}:F;if(e){var V=e.prefix,H=e.iconName,Q=e.icon;return e2(yi({type:"icon"},e),function(){return yb("beforeDOMElementCreation",{iconDefinition:e,params:n}),zi.autoA11y&&(v?P["aria-labelledby"]="".concat(zi.replacementClass,"-title-").concat(C||OI()):(P["aria-hidden"]="true",P.focusable="false")),sV({icons:{main:e3(Q),mask:o?e3(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:V,iconName:H,transform:yi(yi({},Hg),i),symbol:a,title:v,maskId:p,titleId:C,extra:{attributes:P,styles:D,classes:M}})})}},sTe={mixout:function(){return{icon:rTe(iTe)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=RY,n.nodeCallback=nTe,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?ul:r,s=n.callback,a=s===void 0?function(){}:s;return RY(i,a)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,a=r.titleId,l=r.prefix,o=r.transform,d=r.symbol,p=r.mask,A=r.maskId,v=r.extra;return new Promise(function(y,C){Promise.all([t3(i,l),p.iconName?t3(p.iconName,p.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(x){var M=q$(x,2),I=M[0],P=M[1];y([n,sV({icons:{main:I,mask:P},prefix:l,iconName:i,transform:o,symbol:d,maskId:A,title:s,titleId:a,extra:v,watchable:!0})])}).catch(C)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,a=n.transform,l=n.styles,o=X5(l);o.length>0&&(i.style=o);var d;return tV(a)&&(d=Wv("generateAbstractTransformGrouping",{main:s,transform:a,containerWidth:s.width,iconWidth:s.width})),r.push(d||s.icon),{children:r,attributes:i}}}},oTe={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return e2({type:"layer"},function(){yb("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(l){Array.isArray(l)?l.map(function(o){a=a.concat(o.abstract)}):a=a.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(zi.cssPrefix,"-layers")].concat(NB(s)).join(" ")},children:a}]})}}}},aTe={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,a=r.classes,l=a===void 0?[]:a,o=r.attributes,d=o===void 0?{}:o,p=r.styles,A=p===void 0?{}:p;return e2({type:"counter",content:n},function(){return yb("beforeDOMElementCreation",{content:n,params:r}),zSe({content:n.toString(),title:s,extra:{attributes:d,styles:A,classes:["".concat(zi.cssPrefix,"-layers-counter")].concat(NB(l))}})})}}}},lTe={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?Hg:i,a=r.title,l=a===void 0?null:a,o=r.classes,d=o===void 0?[]:o,p=r.attributes,A=p===void 0?{}:p,v=r.styles,y=v===void 0?{}:v;return e2({type:"text",content:n},function(){return yb("beforeDOMElementCreation",{content:n,params:r}),SY({content:n,transform:yi(yi({},Hg),s),title:l,extra:{attributes:A,styles:y,classes:["".concat(zi.cssPrefix,"-layers-text")].concat(NB(d))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,a=r.extra,l=null,o=null;if(cae){var d=parseInt(getComputedStyle(n).fontSize,10),p=n.getBoundingClientRect();l=p.width/d,o=p.height/d}return zi.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,SY({content:n.innerHTML,width:l,height:o,transform:s,title:i,extra:a,watchable:!0})])}}},cTe=new RegExp('"',"ug"),PY=[1105920,1112319];function uTe(t){var e=t.replace(cTe,""),n=xSe(e,0),r=n>=PY[0]&&n<=PY[1],i=e.length===2?e[0]===e[1]:!1;return{value:YU(i?e[0]:e),isSecondary:r||i}}function FY(t,e){var n="".concat(JEe).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=bE(t.children),a=s.filter(function(Q){return Q.getAttribute(qU)===e})[0],l=Xy.getComputedStyle(t,e),o=l.getPropertyValue("font-family").match(iSe),d=l.getPropertyValue("font-weight"),p=l.getPropertyValue("content");if(a&&!o)return t.removeChild(a),r();if(o&&p!=="none"&&p!==""){var A=l.getPropertyValue("content"),v=~["Sharp"].indexOf(o[2])?Ul:al,y=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(o[2])?RI[v][o[2].toLowerCase()]:sSe[v][d],C=uTe(A),x=C.value,M=C.isSecondary,I=o[0].startsWith("FontAwesome"),P=rV(y,x),F=P;if(I){var D=MSe(x);D.iconName&&D.prefix&&(P=D.iconName,y=D.prefix)}if(P&&!M&&(!a||a.getAttribute(X$)!==y||a.getAttribute(Z$)!==F)){t.setAttribute(n,F),a&&t.removeChild(a);var V=eTe(),H=V.extra;H.attributes[qU]=e,t3(P,y).then(function(Q){var G=sV(yi(yi({},V),{},{icons:{main:Q,mask:iV()},prefix:y,iconName:F,extra:H,watchable:!0})),W=ul.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(W,t.firstChild):t.appendChild(W),W.outerHTML=G.map(function(te){return DB(te)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function hTe(t){return Promise.all([FY(t,"::before"),FY(t,"::after")])}function dTe(t){return t.parentNode!==document.head&&!~tSe.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(qU)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function OY(t){if(a0)return new Promise(function(e,n){var r=bE(t.querySelectorAll("*")).filter(dTe).map(hTe),i=oV.begin("searchPseudoElements");Mae(),Promise.all(r).then(function(){i(),r3(),e()}).catch(function(){i(),r3(),n()})})}var fTe={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=OY,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?ul:r;zi.searchPseudoElements&&OY(i)}}},NY=!1,pTe={mixout:function(){return{dom:{unwatch:function(){Mae(),NY=!0}}}},hooks:function(){return{bootstrap:function(){MY(ZU("mutationObserverCallbacks",{}))},noAuto:function(){YSe()},watch:function(n){var r=n.observeMutationsRoot;NY?r3():MY(ZU("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},kY=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),a=s[0],l=s.slice(1).join("-");if(a&&l==="h")return r.flipX=!0,r;if(a&&l==="v")return r.flipY=!0,r;if(l=parseFloat(l),isNaN(l))return r;switch(a){case"grow":r.size=r.size+l;break;case"shrink":r.size=r.size-l;break;case"left":r.x=r.x-l;break;case"right":r.x=r.x+l;break;case"up":r.y=r.y-l;break;case"down":r.y=r.y+l;break;case"rotate":r.rotate=r.rotate+l;break}return r},n)},ATe={mixout:function(){return{parse:{transform:function(n){return kY(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=kY(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,a=n.iconWidth,l={transform:"translate(".concat(s/2," 256)")},o="translate(".concat(i.x*32,", ").concat(i.y*32,") "),d="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),p="rotate(".concat(i.rotate," 0 0)"),A={transform:"".concat(o," ").concat(d," ").concat(p)},v={transform:"translate(".concat(a/2*-1," -256)")},y={outer:l,inner:A,path:v};return{tag:"g",attributes:yi({},y.outer),children:[{tag:"g",attributes:yi({},y.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:yi(yi({},r.icon.attributes),y.path)}]}]}}}},PD={x:0,y:0,width:"100%",height:"100%"};function DY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function gTe(t){return t.tag==="g"?t.children:[t]}var mTe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?J5(i.split(" ").map(function(a){return a.trim()})):iV();return s.prefix||(s.prefix=Zy()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,a=n.mask,l=n.maskId,o=n.transform,d=s.width,p=s.icon,A=a.width,v=a.icon,y=gSe({transform:o,containerWidth:A,iconWidth:d}),C={tag:"rect",attributes:yi(yi({},PD),{},{fill:"white"})},x=p.children?{children:p.children.map(DY)}:{},M={tag:"g",attributes:yi({},y.inner),children:[DY(yi({tag:p.tag,attributes:yi(yi({},p.attributes),y.path)},x))]},I={tag:"g",attributes:yi({},y.outer),children:[M]},P="mask-".concat(l||OI()),F="clip-".concat(l||OI()),D={tag:"mask",attributes:yi(yi({},PD),{},{id:P,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[C,I]},V={tag:"defs",children:[{tag:"clipPath",attributes:{id:F},children:gTe(v)},D]};return r.push(V,{tag:"rect",attributes:yi({fill:"currentColor","clip-path":"url(#".concat(F,")"),mask:"url(#".concat(P,")")},PD)}),{children:r,attributes:i}}}},vTe={provides:function(e){var n=!1;Xy.matchMedia&&(n=Xy.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:yi(yi({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=yi(yi({},s),{},{attributeName:"opacity"}),l={tag:"circle",attributes:yi(yi({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||l.children.push({tag:"animate",attributes:yi(yi({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:yi(yi({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(l),r.push({tag:"path",attributes:yi(yi({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:yi(yi({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:yi(yi({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:yi(yi({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},yTe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},_Te=[ySe,sTe,oTe,aTe,lTe,fTe,pTe,ATe,mTe,vTe,yTe];PSe(_Te,{mixoutsTo:Nf});Nf.noAuto;Nf.config;Nf.library;Nf.dom;Nf.parse;Nf.findIconDefinition;Nf.toHtml;Nf.icon;Nf.layer;Nf.text;Nf.counter;var bTe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wTe={exports:{}};(function(t){(function(e){var n=function(I,P,F){if(!d(P)||A(P)||v(P)||y(P)||o(P))return P;var D,V=0,H=0;if(p(P))for(D=[],H=P.length;V<H;V++)D.push(n(I,P[V],F));else{D={};for(var Q in P)Object.prototype.hasOwnProperty.call(P,Q)&&(D[I(Q,F)]=n(I,P[Q],F))}return D},r=function(I,P){P=P||{};var F=P.separator||"_",D=P.split||/(?=[A-Z])/;return I.split(D).join(F)},i=function(I){return C(I)?I:(I=I.replace(/[\-_\s]+(.)?/g,function(P,F){return F?F.toUpperCase():""}),I.substr(0,1).toLowerCase()+I.substr(1))},s=function(I){var P=i(I);return P.substr(0,1).toUpperCase()+P.substr(1)},a=function(I,P){return r(I,P).toLowerCase()},l=Object.prototype.toString,o=function(I){return typeof I=="function"},d=function(I){return I===Object(I)},p=function(I){return l.call(I)=="[object Array]"},A=function(I){return l.call(I)=="[object Date]"},v=function(I){return l.call(I)=="[object RegExp]"},y=function(I){return l.call(I)=="[object Boolean]"},C=function(I){return I=I-0,I===I},x=function(I,P){var F=P&&"process"in P?P.process:P;return typeof F!="function"?I:function(D,V){return F(D,I,V)}},M={camelize:i,decamelize:a,pascalize:s,depascalize:a,camelizeKeys:function(I,P){return n(x(i,P),I)},decamelizeKeys:function(I,P){return n(x(a,P),I,P)},pascalizeKeys:function(I,P){return n(x(s,P),I)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=M:e.humps=M})(bTe)})(wTe);var xTe=!1;try{xTe=!0}catch{}var hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rae={exports:{}};(function(t,e){var n={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoiZ2Vla2NhdCIsImEiOiJjbHc5ZTJ6dmIwMTEyMmpudGowMXk5Y3o2In0.HDxYFBSNCpbYan731GLJEw"};(function(r,i){t.exports=i()})(hm,function(){var r,i,s;function a(o,d){if(!r)r=d;else if(!i)i=d;else{var p="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",A={};r(A),s=d(A),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([p],{type:"text/javascript"})))}}a(["exports"],function(o){var d="3.3.0";let p;const A={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(p==null){const u=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{p=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):u}catch{p=u}}return p},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!A.API_URL)return null;try{const u=new URL(A.API_URL);return u.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":u.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"};function v(u){return A.API_URL_REGEX.test(u)}function y(u){return u.indexOf("mapbox:")===0}function C(u){return A.API_CDN_URL_REGEX.test(u)}function x(u){return A.API_SPRITE_REGEX.test(u)}function M(u){return A.API_STYLE_REGEX.test(u)&&!x(u)}const I={create:"create",load:"load",fullLoad:"fullLoad"};function P(u){const c=u.name.split("?")[0];return C(c)&&c.includes("mapbox-gl.js")?"javascript":C(c)&&c.includes("mapbox-gl.css")?"css":function(h){return A.API_FONTS_REGEX.test(h)}(c)?"fontRange":x(c)?"sprite":M(c)?"style":function(h){return A.API_TILEJSON_REGEX.test(h)}(c)?"tilejson":"other"}function F(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var D=V;function V(u,c,h,g){this.cx=3*u,this.bx=3*(h-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(g-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=h,this.p2y=g}V.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var h=u,g=0;g<8;g++){var _=this.sampleCurveX(h)-u;if(Math.abs(_)<c)return h;var b=this.sampleCurveDerivativeX(h);if(Math.abs(b)<1e-6)break;h-=_/b}var S=0,L=1;for(h=u,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-u)<c));g++)u>_?S=h:L=h,h=.5*(L-S)+S;return h},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}};var H=F(D),Q=G;function G(u,c){this.x=u,this.y=c}G.prototype={clone:function(){return new G(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,c){return this.clone()._rotateAround(u,c)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var c=u.x-this.x,h=u.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,c){return Math.atan2(this.x*c-this.y*u,this.x*u+this.y*c)},_matMult:function(u){var c=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=c,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var c=Math.cos(u),h=Math.sin(u),g=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=g,this},_rotateAround:function(u,c){var h=Math.cos(u),g=Math.sin(u),_=c.y+g*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-g*(this.y-c.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},G.convert=function(u){return u instanceof G?u:Array.isArray(u)?new G(u[0],u[1]):u};var W=F(Q);const te=Math.PI/180,q=180/Math.PI;function Y(u){return u*te}function ee(u){return u*q}const ce=[[0,0],[1,0],[1,1],[0,1]];function se(u){if(u<=0)return 0;if(u>=1)return 1;const c=u*u,h=c*u;return 4*(u<.5?h:3*(u-c)+h-.75)}function le(u,c,h,g){const _=new H(u,c,h,g);return function(b){return _.solve(b)}}const ie=le(.25,.1,.25,1);function pe(u,c,h){return Math.min(h,Math.max(c,u))}function ue(u,c,h){return(h=pe((h-u)/(c-u),0,1))*h*(3-2*h)}function me(u,c,h){const g=h-c,_=((u-c)%g+g)%g+c;return _===c?h:_}function Le(u,c,h){if(!u.length)return h(null,[]);let g=u.length;const _=new Array(u.length);let b=null;u.forEach((S,L)=>{c(S,(O,N)=>{O&&(b=O),_[L]=N,--g==0&&h(b,_)})})}function ae(u,...c){for(const h of c)for(const g in h)u[g]=h[g];return u}let be=1;function _e(){return be++}function $e(){return function u(c){return c?(c^Math.random()*(16>>c/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function Re(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))}function Ie(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function Ne(u,c){u.forEach(h=>{c[h]&&(c[h]=c[h].bind(c))})}function Je(u,c){return u.indexOf(c,u.length-c.length)!==-1}function je(u,c,h){const g={};for(const _ in u)g[_]=c.call(h||this,u[_],_,u);return g}function ft(u,c,h){const g={};for(const _ in u)c.call(h||this,u[_],_,u)&&(g[_]=u[_]);return g}function Et(u){return Array.isArray(u)?u.map(Et):typeof u=="object"&&u?je(u,Et):u}const ke={};function Ye(u){ke[u]||(typeof console<"u"&&console.warn(u),ke[u]=!0)}function at(u,c,h){return(h.y-u.y)*(c.x-u.x)>(c.y-u.y)*(h.x-u.x)}function He(u){let c=0;for(let h,g,_=0,b=u.length,S=b-1;_<b;S=_++)h=u[_],g=u[S],c+=(g.x-h.x)*(h.y+g.y);return c}function Tt([u,c,h]){const g=Y(c+90),_=Y(h);return{x:u*Math.cos(g)*Math.sin(_),y:u*Math.sin(g)*Math.sin(_),z:u*Math.cos(_),azimuthal:c,polar:h}}function Ut(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Rt(u){const c={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,g,_,b)=>{const S=_||b;return c[g]=!S||S.toLowerCase(),""}),c["max-age"]){const h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c}let Bt,Ht,xt,Zt,un,Ft,mt=null;function Be(u){try{const c=self[u];return c.setItem("_mapbox_test_",1),c.removeItem("_mapbox_test_"),!0}catch{return!1}}function ze(u,c){return[u[4*c],u[4*c+1],u[4*c+2],u[4*c+3]]}function it(u,c,h,g){for(;c<h;){const _=c+h>>1;u[_]<g?c=_+1:h=_}return c}function bt(u,c,h,g){for(;c<h;){const _=c+h>>1;u[_]<=g?c=_+1:h=_}return c}function Qe(){return Bt==null&&(Bt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Bt}const St={now:()=>Zt!==void 0?Zt:performance.now(),setNow(u){Zt=u},restoreNow(){Zt=void 0},frame(u){const c=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(c)}},getImageData(u,c=0){const{width:h,height:g}=u;un||(un=document.createElement("canvas"));const _=un.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return(h>un.width||g>un.height)&&(un.width=h,un.height=g),_.clearRect(-c,-c,h+2*c,g+2*c),_.drawImage(u,0,0,h,g),_.getImageData(-c,-c,h+2*c,g+2*c)},resolveURL:u=>(Ht||(Ht=document.createElement("a")),Ht.href=u,Ht.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(xt==null&&(xt=window.matchMedia("(prefers-reduced-motion: reduce)")),xt.matches)},hasCanvasFingerprintNoise(){if(Ft!==void 0)return Ft;if(!Qe())return Ft=!1,!1;const u=new OffscreenCanvas(85,1),c=u.getContext("2d",{willReadFrequently:!0});let h=0;for(let _=0;_<u.width;++_)c.fillStyle=`rgba(${h++},${h++},${h++}, 255)`,c.fillRect(_,0,1,1);const g=c.getImageData(0,0,u.width,u.height);h=0;for(let _=0;_<g.data.length;++_)if(_%4!=3&&h++!==g.data[_])return Ft=!0,!0;return Ft=!1,!1}},yt="mapbox-tiles";let Xe=500,_t=50,Gt,gt;function hn(){try{return caches}catch{}}function rr(){const u=hn();u&&!Gt&&(Gt=u.open(yt))}function br(u){const c=u.indexOf("?");if(c<0)return u;const h=["language","worldview"],g=new URLSearchParams,_=new URLSearchParams(u.slice(c));for(const b of h){const S=_.get(b);S&&g.set(b,S)}return`${u.slice(0,c)}?${g.toString()}`}function Qr(u,c){const h=u.indexOf("?");if(h<0)return`${u}?${new URLSearchParams(c).toString()}`;const g=new URLSearchParams(u.slice(h));for(const _ in c)g.set(_,c[_]);return`${u.slice(0,h)}?${g.toString()}`}let hr=1/0;const Kn={supported:!1,testSupport:function(u){!us&&ni&&(bi?Fs(u):ur=u)}};let ur,ni,us=!1,bi=!1;const is=typeof self<"u"?self:{};function Fs(u){const c=u.createTexture();u.bindTexture(u.TEXTURE_2D,c);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,ni),u.isContextLost())return;Kn.supported=!0}catch{}u.deleteTexture(c),us=!0}is.document&&(ni=is.document.createElement("img"),ni.onload=function(){ur&&Fs(ur),ur=null,bi=!0},ni.onerror=function(){us=!0,ur=null},ni.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const zr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(zr);class ss extends Error{constructor(c,h,g){h===401&&v(g)&&(c+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(c),this.status=h,this.url=g}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Zi=Ut()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,en=function(u,c){if(!(/^file:/.test(h=u.url)||/^file:/.test(Zi())&&!/^\w+:/.test(h))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(g,_){const b=new AbortController,S=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,referrer:Zi(),referrerPolicy:g.referrerPolicy,signal:b.signal});let L=!1,O=!1;const N=(U=S.url).indexOf("sku=")>0&&v(U);var U;g.type==="json"&&S.headers.set("Accept","application/json");const j=(re,fe,ge)=>{if(O)return;if(re&&re.message!=="SecurityError"&&Ye(re.toString()),fe&&ge)return X(fe);const Ce=Date.now();fetch(S).then(Te=>{if(Te.ok){const qe=N?Te.clone():null;return X(Te,qe,Ce)}return _(new ss(Te.statusText,Te.status,g.url))}).catch(Te=>{Te.name!=="AbortError"&&_(new Error(`${Te.message} ${g.url}`))})},X=(re,fe,ge)=>{(g.type==="arrayBuffer"?re.arrayBuffer():g.type==="json"?re.json():re.text()).then(Ce=>{O||(fe&&ge&&function(Te,qe,tt){if(rr(),!Gt)return;const et=Rt(qe.headers.get("Cache-Control")||"");if(et["no-store"])return;const vt={status:qe.status,statusText:qe.statusText,headers:new Headers};qe.headers.forEach((Qt,Xt)=>vt.headers.set(Xt,Qt)),et["max-age"]&&vt.headers.set("Expires",new Date(tt+1e3*et["max-age"]).toUTCString());const dt=vt.headers.get("Expires");if(!dt||new Date(dt).getTime()-tt<42e4)return;let Pt=br(Te.url);if(qe.status===206){const Qt=Te.headers.get("Range");if(!Qt)return;vt.status=200,Pt=Qr(Pt,{range:Qt})}(function(Qt,Xt){if(gt===void 0)try{new Response(new ReadableStream),gt=!0}catch{gt=!1}gt?Xt(Qt.body):Qt.blob().then(Xt)})(qe,Qt=>{const Xt=new Response(Qt,vt);rr(),Gt&&Gt.then(An=>An.put(Pt,Xt)).catch(An=>Ye(An.message))})}(S,fe,ge),L=!0,_(null,Ce,re.headers.get("Cache-Control"),re.headers.get("Expires")))}).catch(Ce=>{O||_(new Error(Ce.message))})};return N?function(re,fe){if(rr(),!Gt)return fe(null);Gt.then(ge=>{let Ce=br(re.url);const Te=re.headers.get("Range");Te&&(Ce=Qr(Ce,{range:Te})),ge.match(Ce).then(qe=>{const tt=function(et){if(!et)return!1;const vt=new Date(et.headers.get("Expires")||0),dt=Rt(et.headers.get("Cache-Control")||"");return vt>Date.now()&&!dt["no-cache"]}(qe);ge.delete(Ce),tt&&ge.put(Ce,qe.clone()),fe(null,qe,tt)}).catch(fe)}).catch(fe)}(S,j):j(null,null),{cancel:()=>{O=!0,L||b.abort()}}}(u,c);if(Ut()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,c,void 0,!0)}var h;return function(g,_){const b=new XMLHttpRequest;b.open(g.method||"GET",g.url,!0),g.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const S in g.headers)b.setRequestHeader(S,g.headers[S]);return g.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=g.credentials==="include",b.onerror=()=>{_(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let S=b.response;if(g.type==="json")try{S=JSON.parse(b.response)}catch(L){return _(L)}_(null,S,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else _(new ss(b.statusText,b.status,g.url))},b.send(g.body),{cancel:()=>b.abort()}}(u,c)},dn=function(u,c){return en(ae(u,{type:"arrayBuffer"}),c)};function En(u){const c=document.createElement("a");return c.href=u,c.protocol===location.protocol&&c.host===location.host}const Vn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Dt,sn;Dt=[],sn=0;const Mn=function(u,c){if(Kn.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),sn>=A.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:u,callback:c,cancelled:!1,cancel(){this.cancelled=!0}};return Dt.push(b),b}sn++;let h=!1;const g=()=>{if(!h)for(h=!0,sn--;Dt.length&&sn<A.MAX_PARALLEL_IMAGE_REQUESTS;){const b=Dt.shift(),{requestParameters:S,callback:L,cancelled:O}=b;O||(b.cancel=Mn(S,L).cancel)}},_=dn(u,(b,S,L,O)=>{g(),b?c(b):S&&(self.createImageBitmap?function(N,U){const j=new Blob([new Uint8Array(N)],{type:"image/png"});createImageBitmap(j).then(X=>{U(null,X)}).catch(X=>{U(new Error(`Could not load image because of ${X.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(S,(N,U)=>c(N,U,L,O)):function(N,U){const j=new Image;j.onload=()=>{U(null,j),URL.revokeObjectURL(j.src),j.onload=null,requestAnimationFrame(()=>{j.src=Vn})},j.onerror=()=>U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const X=new Blob([new Uint8Array(N)],{type:"image/png"});j.src=N.byteLength?URL.createObjectURL(X):Vn}(S,(N,U)=>c(N,U,L,O)))});return{cancel:()=>{_.cancel(),g()}}},Rn="01",er="NO_ACCESS_TOKEN",Qn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Nr(u){const c=u.match(Qn);if(!c)throw new Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("&"):[]}}function si(u){const c=u.params.length?`?${u.params.join("&")}`:"";return`${u.protocol}://${u.authority}${u.path}${c}`}const Tn="mapbox.eventData";function jt(u){if(!u)return null;const c=u.split(".");if(!c||c.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(c[1]).split("").map(h=>"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Zn{constructor(c){this.type=c,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(c){const h=jt(A.ACCESS_TOKEN);let g="";return g=h&&h.u?btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,(_,b)=>String.fromCharCode(+("0x"+b)))):A.ACCESS_TOKEN||"",c?`${Tn}.${c}:${g}`:`${Tn}:${g}`}fetchEventData(){const c=Be("localStorage"),h=this.getStorageKey(),g=this.getStorageKey("uuid");if(c)try{const _=localStorage.getItem(h);_&&(this.eventData=JSON.parse(_));const b=localStorage.getItem(g);b&&(this.anonId=b)}catch{Ye("Unable to read from LocalStorage")}}saveEventData(){const c=Be("localStorage"),h=this.getStorageKey(),g=this.getStorageKey("uuid"),_=this.anonId;if(c&&_)try{localStorage.setItem(g,_),Object.keys(this.eventData).length>=1&&localStorage.setItem(h,JSON.stringify(this.eventData))}catch{Ye("Unable to write to LocalStorage")}}processRequests(c){}postEvent(c,h,g,_){if(!A.EVENTS_URL)return;const b=Nr(A.EVENTS_URL);b.params.push(`access_token=${_||A.ACCESS_TOKEN||""}`);const S={event:this.type,created:new Date(c).toISOString()},L=h?ae(S,h):S,O={url:si(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=function(N,U){return en(ae(N,{method:"POST"}),U)}(O,N=>{this.pendingRequest=null,g(N),this.saveEventData(),this.processRequests(_)})}queueRequest(c,h){this.queue.push(c),this.processRequests(h)}}const Vt=new class extends Zn{constructor(u){super("appUserTurnstile"),this._customAccessToken=u}postTurnstileEvent(u,c){A.EVENTS_URL&&A.ACCESS_TOKEN&&Array.isArray(u)&&u.some(h=>y(h)||v(h))&&this.queueRequest(Date.now(),c)}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const c=jt(A.ACCESS_TOKEN),h=c?c.u:A.ACCESS_TOKEN;let g=h!==this.eventData.tokenU;Ie(this.anonId)||(this.anonId=$e(),g=!0);const _=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),S=new Date(_),L=(_-this.eventData.lastSuccess)/864e5;g=g||L>=1||L<-1||b.getDate()!==S.getDate()}else g=!0;g?this.postEvent(_,{sdkIdentifier:"mapbox-gl-js",sdkVersion:d,skuId:Rn,"enabled.telemetry":!1,userId:this.anonId},b=>{b||(this.eventData.lastSuccess=_,this.eventData.tokenU=h)},u):this.processRequests()}},Xn=Vt.postTurnstileEvent.bind(Vt),Ur=new class extends Zn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(u,c,h,g){this.skuToken=c,this.errorCb=g,A.EVENTS_URL&&(h||A.ACCESS_TOKEN?this.queueRequest({id:u,timestamp:Date.now()},h):this.errorCb(new Error(er)))}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{id:c,timestamp:h}=this.queue.shift();c&&this.success[c]||(this.anonId||this.fetchEventData(),Ie(this.anonId)||(this.anonId=$e()),this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:d,skuId:Rn,skuToken:this.skuToken,userId:this.anonId},g=>{g?this.errorCb(g):c&&(this.success[c]=!0)},u))}remove(){this.errorCb=null}},Cr=Ur.postMapLoadEvent.bind(Ur),Is=new class extends Zn{constructor(){super("gljs.performance")}postPerformanceEvent(u,c){A.EVENTS_URL&&(u||A.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:c},u)}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:c,performanceData:h}=this.queue.shift(),g=function(_){const b=performance.getEntriesByType("resource"),S=performance.getEntriesByType("mark"),L=function(re){const fe={};if(re){for(const ge in re)if(ge!=="other")for(const Ce of re[ge]){const Te=`${ge}ResolveRangeMin`,qe=`${ge}ResolveRangeMax`,tt=`${ge}RequestCount`,et=`${ge}RequestCachedCount`;fe[Te]=Math.min(fe[Te]||1/0,Ce.startTime),fe[qe]=Math.max(fe[qe]||-1/0,Ce.responseEnd);const vt=dt=>{fe[dt]===void 0&&(fe[dt]=0),++fe[dt]};Ce.transferSize!==void 0&&Ce.transferSize===0&&vt(et),vt(tt)}}return fe}(function(re,fe){const ge={};if(re)for(const Ce of re){const Te=fe(Ce);ge[Te]===void 0&&(ge[Te]=[]),ge[Te].push(Ce)}return ge}(b,P)),O=window.devicePixelRatio,N=navigator.connection||navigator.mozConnection||navigator.webkitConnection,U=N?N.effectiveType:void 0,j={counters:[],metadata:[],attributes:[]},X=(re,fe,ge)=>{ge!=null&&re.push({name:fe,value:ge.toString()})};for(const re in L)X(j.counters,re,L[re]);if(_.interactionRange[0]!==1/0&&_.interactionRange[1]!==-1/0&&(X(j.counters,"interactionRangeMin",_.interactionRange[0]),X(j.counters,"interactionRangeMax",_.interactionRange[1])),S)for(const re of Object.keys(I)){const fe=I[re],ge=S.find(Ce=>Ce.name===fe);ge&&X(j.counters,fe,ge.startTime)}return X(j.counters,"visibilityHidden",_.visibilityHidden),X(j.attributes,"style",function(re){if(re)for(const fe of re){const ge=fe.name.split("?")[0];if(M(ge)){const Ce=ge.split("/").slice(-2);if(Ce.length===2)return`mapbox://styles/${Ce[0]}/${Ce[1]}`}}}(b)),X(j.attributes,"terrainEnabled",_.terrainEnabled?"true":"false"),X(j.attributes,"fogEnabled",_.fogEnabled?"true":"false"),X(j.attributes,"projection",_.projection),X(j.attributes,"zoom",_.zoom),X(j.metadata,"devicePixelRatio",O),X(j.metadata,"connectionEffectiveType",U),X(j.metadata,"navigatorUserAgent",navigator.userAgent),X(j.metadata,"screenWidth",window.screen.width),X(j.metadata,"screenHeight",window.screen.height),X(j.metadata,"windowWidth",window.innerWidth),X(j.metadata,"windowHeight",window.innerHeight),X(j.metadata,"mapWidth",_.width/O),X(j.metadata,"mapHeight",_.height/O),X(j.metadata,"webglRenderer",_.renderer),X(j.metadata,"webglVendor",_.vendor),X(j.metadata,"sdkVersion",d),X(j.metadata,"sdkIdentifier","mapbox-gl-js"),j}(h);for(const _ of g.metadata);for(const _ of g.counters);for(const _ of g.attributes);this.postEvent(c,g,()=>{},u)}},Bo=Is.postPerformanceEvent.bind(Is),Qs=new class extends Zn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(u,c,h,g){if(!A.API_URL||!A.SESSION_PATH)return;const _=Nr(A.API_URL+A.SESSION_PATH);_.params.push(`sku=${c||""}`),_.params.push(`access_token=${g||A.ACCESS_TOKEN||""}`);const b={url:si(_),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(S,L){return en(ae(S,{method:"GET"}),L)}(b,S=>{this.pendingRequest=null,h(S),this.saveEventData(),this.processRequests(g)})}getSessionAPI(u,c,h,g){this.skuToken=c,this.errorCb=g,A.SESSION_PATH&&A.API_URL&&(h||A.ACCESS_TOKEN?this.queueRequest({id:u,timestamp:Date.now()},h):this.errorCb(new Error(er)))}processRequests(u){if(this.pendingRequest||this.queue.length===0)return;const{id:c,timestamp:h}=this.queue.shift();c&&this.success[c]||this.getSession(h,this.skuToken,g=>{g?this.errorCb(g):c&&(this.success[c]=!0)},u)}remove(){this.errorCb=null}},xh=Qs.getSessionAPI.bind(Qs),zc=new Set;function zd(u,c,h){h[u]&&h[u].indexOf(c)!==-1||(h[u]=h[u]||[],h[u].push(c))}function eg(u,c,h){if(h&&h[u]){const g=h[u].indexOf(c);g!==-1&&h[u].splice(g,1)}}class $d{constructor(c,h={}){ae(this,h),this.type=c}}class Df extends $d{constructor(c,h={}){super("error",ae({error:c},h))}}class Uf{on(c,h){return this._listeners=this._listeners||{},zd(c,h,this._listeners),this}off(c,h){return eg(c,h,this._listeners),eg(c,h,this._oneTimeListeners),this}once(c,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},zd(c,h,this._oneTimeListeners),this):new Promise(g=>this.once(c,g))}fire(c,h){typeof c=="string"&&(c=new $d(c,h||{}));const g=c.type;if(this.listens(g)){c.target=this;const _=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const L of _)L.call(this,c);const b=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const L of b)eg(g,L,this._oneTimeListeners),L.call(this,c);const S=this._eventedParent;S&&(ae(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(c))}else c instanceof Df&&console.error(c.error);return this}listens(c){return!!(this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c))}setEventedParent(c,h){return this._eventedParent=c,this._eventedParentData=h,this}}o.y=void 0;var za={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Rp(u){return(u=Math.round(u))<0?0:u>255?255:u}function tg(u){return Rp(u[u.length-1]==="%"?parseFloat(u)/100*255:parseInt(u))}function Pp(u){return(c=u[u.length-1]==="%"?parseFloat(u)/100:parseFloat(u))<0?0:c>1?1:c;var c}function Fp(u,c,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?u+(c-u)*h*6:2*h<1?c:3*h<2?u+(c-u)*(2/3-h)*6:u}try{o.y={}.parseCSSColor=function(u){var c,h=u.replace(/ /g,"").toLowerCase();if(h in za)return za[h].slice();if(h[0]==="#")return h.length===4?(c=parseInt(h.substr(1),16))>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null:h.length===7&&(c=parseInt(h.substr(1),16))>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null;var g=h.indexOf("("),_=h.indexOf(")");if(g!==-1&&_+1===h.length){var b=h.substr(0,g),S=h.substr(g+1,_-(g+1)).split(","),L=1;switch(b){case"rgba":if(S.length!==4)return null;L=Pp(S.pop());case"rgb":return S.length!==3?null:[tg(S[0]),tg(S[1]),tg(S[2]),L];case"hsla":if(S.length!==4)return null;L=Pp(S.pop());case"hsl":if(S.length!==3)return null;var O=(parseFloat(S[0])%360+360)%360/360,N=Pp(S[1]),U=Pp(S[2]),j=U<=.5?U*(N+1):U+N-U*N,X=2*U-j;return[Rp(255*Fp(X,j,O+1/3)),Rp(255*Fp(X,j,O)),Rp(255*Fp(X,j,O-1/3)),L];default:return null}}return null}}catch{}class _c{constructor(c,h,g,_=1){this.r=c,this.g=h,this.b=g,this.a=_}static parse(c){if(!c)return;if(c instanceof _c)return c;if(typeof c!="string")return;const h=o.y(c);return h?new _c(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[c,h,g,_]=this.toArray();return`rgba(${Math.round(c)},${Math.round(h)},${Math.round(g)},${_})`}toArray(){const{r:c,g:h,b:g,a:_}=this;return _===0?[0,0,0,0]:[255*c/_,255*h/_,255*g/_,_]}toArray01(){const{r:c,g:h,b:g,a:_}=this;return _===0?[0,0,0,0]:[c/_,h/_,g/_,_]}toArray01Scaled(c){const{r:h,g,b:_,a:b}=this;return b===0?[0,0,0]:[h/b*c,g/b*c,_/b*c]}toArray01PremultipliedAlpha(){const{r:c,g:h,b:g,a:_}=this;return[c,h,g,_]}toArray01Linear(){const{r:c,g:h,b:g,a:_}=this;return _===0?[0,0,0,0]:[Math.pow(c/_,2.2),Math.pow(h/_,2.2),Math.pow(g/_,2.2),_]}}_c.black=new _c(0,0,0,1),_c.white=new _c(1,1,1,1),_c.transparent=new _c(0,0,0,0),_c.red=new _c(1,0,0,1),_c.blue=new _c(0,0,1,1);var po=_c;function Qi(u,c,h){return u*(1-h)+c*h}function $c(u,c,h){return u.map((g,_)=>Qi(g,c[_],h))}var zf=Object.freeze({__proto__:null,array:$c,color:function(u,c,h){return new po(Qi(u.r,c.r,h),Qi(u.g,c.g,h),Qi(u.b,c.b,h),Qi(u.a,c.a,h))},number:Qi});function ng(u,...c){for(const h of c)for(const g in h)u[g]=h[g];return u}class N_ extends Error{constructor(c,h){super(h),this.message=h,this.key=c}}var Tu=N_;class Cm{constructor(c,h=[]){this.parent=c,this.bindings={};for(const[g,_]of h)this.bindings[g]=_}concat(c){return new Cm(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}var w0=Cm;const $f={kind:"null"},yr={kind:"number"},Bs={kind:"string"},Ms={kind:"boolean"},ou={kind:"color"},au={kind:"object"},es={kind:"value"},Vd={kind:"collator"},Hd={kind:"formatted"},fl={kind:"resolvedImage"};function bc(u,c){return{kind:"array",itemType:u,N:c}}function jo(u){if(u.kind==="array"){const c=jo(u.itemType);return typeof u.N=="number"?`array<${c}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${c}>`}return u.kind}const ir=[$f,yr,Bs,Ms,ou,Hd,au,bc(es),fl];function Gd(u,c){if(c.kind==="error")return null;if(u.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Gd(u.itemType,c.itemType))&&(typeof u.N!="number"||u.N===c.N))return null}else{if(u.kind===c.kind)return null;if(u.kind==="value"){for(const h of ir)if(!Gd(h,c))return null}}return`Expected ${jo(u)} but found ${jo(c)} instead.`}function di(u,c){return c.some(h=>h.kind===u.kind)}function Kl(u,c){return c.some(h=>h==="null"?u===null:h==="array"?Array.isArray(u):h==="object"?u&&!Array.isArray(u)&&typeof u=="object":h===typeof u)}class Ui{constructor(c,h,g){this.sensitivity=c?h?"variant":"case":h?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,h){return this.collator.compare(c,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Qd{constructor(c,h,g,_,b){this.text=c.normalize?c.normalize():c,this.image=h,this.scale=g,this.fontStack=_,this.textColor=b}}class Fa{constructor(c){this.sections=c}static fromString(c){return new Fa([new Qd(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.namePrimary.length!==0)}static factory(c){return c instanceof Fa?c:Fa.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}serialize(){const c=["format"];for(const h of this.sections){if(h.image){c.push(["image",h.image.namePrimary]);continue}c.push(h.text);const g={};h.fontStack&&(g["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(g["font-scale"]=h.scale),h.textColor&&(g["text-color"]=["rgba"].concat(h.textColor.toArray())),c.push(g)}return c}}class Yr{constructor(c){this.namePrimary=c.namePrimary,c.nameSecondary&&(this.nameSecondary=c.nameSecondary),this.available=c.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(c,h){return c?new Yr({namePrimary:c,nameSecondary:h,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function x0(u,c,h,g){return typeof u=="number"&&u>=0&&u<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof h=="number"&&h>=0&&h<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[u,c,h,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[u,c,h,g]:[u,c,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jd(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof po||u instanceof Ui||u instanceof Fa||u instanceof Yr)return!0;if(Array.isArray(u)){for(const c of u)if(!jd(c))return!1;return!0}if(typeof u=="object"){for(const c in u)if(!jd(u[c]))return!1;return!0}return!1}function _a(u){if(u===null)return $f;if(typeof u=="string")return Bs;if(typeof u=="boolean")return Ms;if(typeof u=="number")return yr;if(u instanceof po)return ou;if(u instanceof Ui)return Vd;if(u instanceof Fa)return Hd;if(u instanceof Yr)return fl;if(Array.isArray(u)){const c=u.length;let h;for(const g of u){const _=_a(g);if(h){if(h===_)continue;h=es;break}h=_}return bc(h||es,c)}return au}function wc(u){const c=typeof u;return u===null?"":c==="string"||c==="number"||c==="boolean"?String(u):u instanceof po||u instanceof Fa||u instanceof Yr?u.toString():JSON.stringify(u)}class lu{constructor(c,h){this.type=c,this.value=h}static parse(c,h){if(c.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!jd(c[1]))return h.error("invalid value");const g=c[1];let _=_a(g);const b=h.expectedType;return _.kind!=="array"||_.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(_=b),new lu(_,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof po?["rgba"].concat(this.value.toArray()):this.value instanceof Fa?this.value.serialize():this.value}}var xc=lu,ba=class{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}};const Kd={string:Bs,number:yr,boolean:Ms,object:au};class Op{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");let g,_=1;const b=c[0];if(b==="array"){let L,O;if(c.length>2){const N=c[1];if(typeof N!="string"||!(N in Kd)||N==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);L=Kd[N],_++}else L=es;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return h.error('The length argument to "array" must be a positive integer literal',2);O=c[2],_++}g=bc(L,O)}else g=Kd[b];const S=[];for(;_<c.length;_++){const L=h.parse(c[_],_,es);if(!L)return null;S.push(L)}return new Op(g,S)}evaluate(c){for(let h=0;h<this.args.length;h++){const g=this.args[h].evaluate(c);if(!Gd(this.type,_a(g)))return g;if(h===this.args.length-1)throw new ba(`Expected value to be of type ${jo(this.type)}, but found ${jo(_a(g))} instead.`)}return null}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}serialize(){const c=this.type,h=[c.kind];if(c.kind==="array"){const g=c.itemType;if(g.kind==="string"||g.kind==="number"||g.kind==="boolean"){h.push(g.kind);const _=c.N;(typeof _=="number"||this.args.length>1)&&h.push(_)}}return h.concat(this.args.map(g=>g.serialize()))}}var cu=Op;class Wd{constructor(c){this.type=Hd,this.sections=c}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const g=c[1];if(!Array.isArray(g)&&typeof g=="object")return h.error("First argument must be an image or text section.");const _=[];let b=!1;for(let S=1;S<=c.length-1;++S){const L=c[S];if(b&&typeof L=="object"&&!Array.isArray(L)){b=!1;let O=null;if(L["font-scale"]&&(O=h.parse(L["font-scale"],1,yr),!O))return null;let N=null;if(L["text-font"]&&(N=h.parse(L["text-font"],1,bc(Bs)),!N))return null;let U=null;if(L["text-color"]&&(U=h.parse(L["text-color"],1,ou),!U))return null;const j=_[_.length-1];j.scale=O,j.font=N,j.textColor=U}else{const O=h.parse(c[S],1,es);if(!O)return null;const N=O.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,_.push({content:O,scale:null,font:null,textColor:null})}}return new Wd(_)}evaluate(c){return new Fa(this.sections.map(h=>{const g=h.content.evaluate(c);return _a(g)===fl?new Qd("",g,null,null,null):new Qd(wc(g),null,h.scale?h.scale.evaluate(c):null,h.font?h.font.evaluate(c).join(","):null,h.textColor?h.textColor.evaluate(c):null)}))}eachChild(c){for(const h of this.sections)c(h.content),h.scale&&c(h.scale),h.font&&c(h.font),h.textColor&&c(h.textColor)}outputDefined(){return!1}serialize(){const c=["format"];for(const h of this.sections){c.push(h.content.serialize());const g={};h.scale&&(g["font-scale"]=h.scale.serialize()),h.font&&(g["text-font"]=h.font.serialize()),h.textColor&&(g["text-color"]=h.textColor.serialize()),c.push(g)}return c}}class Yh{constructor(c,h){this.type=fl,this.inputPrimary=c,this.inputSecondary=h}static parse(c,h){if(c.length<2)return h.error("Expected two or more arguments.");const g=h.parse(c[1],1,Bs);if(!g)return h.error("No image name provided.");if(c.length===2)return new Yh(g);const _=h.parse(c[2],1,Bs);return _?new Yh(g,_):h.error("Secondary image variant is not a string.")}evaluate(c){const h=Yr.fromString(this.inputPrimary.evaluate(c),this.inputSecondary?this.inputSecondary.evaluate(c):void 0);return h&&c.availableImages&&(h.available=c.availableImages.indexOf(h.namePrimary)>-1,h.nameSecondary&&h.available&&c.availableImages&&(h.available=c.availableImages.indexOf(h.nameSecondary)>-1)),h}eachChild(c){c(this.inputPrimary),this.inputSecondary&&c(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function qd(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}const uu={"to-boolean":Ms,"to-color":ou,"to-number":yr,"to-string":Bs};class qu{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const g=c[0],_=[];let b=$f;if(g==="to-array"){if(!Array.isArray(c[1]))return null;const S=c[1].length;if(h.expectedType){if(h.expectedType.kind!=="array")return h.error(`Expected ${h.expectedType.kind} but found array.`);b=bc(h.expectedType.itemType,S)}else{if(!(S>0&&jd(c[1][0])))return null;b=bc(_a(c[1][0]),S)}for(let L=0;L<S;L++){const O=c[1][L];let N;if(qd(O)==="array")N=h.parse(O,void 0,b.itemType);else{const U=qd(O);if(U!==b.itemType.kind)return h.error(`Expected ${b.itemType.kind} but found ${U}.`);N=h.registry.literal.parse(["literal",O===void 0?null:O],h)}if(!N)return null;_.push(N)}}else{if((g==="to-boolean"||g==="to-string")&&c.length!==2)return h.error("Expected one argument.");b=uu[g];for(let S=1;S<c.length;S++){const L=h.parse(c[S],S,es);if(!L)return null;_.push(L)}}return new qu(b,_)}evaluate(c){if(this.type.kind==="boolean")return!!this.args[0].evaluate(c);if(this.type.kind==="color"){let h,g;for(const _ of this.args){if(h=_.evaluate(c),g=null,h instanceof po)return h;if(typeof h=="string"){const b=c.parseColor(h);if(b)return b}else if(Array.isArray(h)&&(g=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:x0(h[0],h[1],h[2],h[3]),!g))return new po(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new ba(g||`Could not parse color from value '${typeof h=="string"?h:String(JSON.stringify(h))}'`)}if(this.type.kind==="number"){let h=null;for(const g of this.args){if(h=g.evaluate(c),h===null)return 0;const _=Number(h);if(!isNaN(_))return _}throw new ba(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?Fa.fromString(wc(this.args[0].evaluate(c))):this.type.kind==="resolvedImage"?Yr.fromString(wc(this.args[0].evaluate(c))):this.type.kind==="array"?this.args.map(h=>h.evaluate(c)):wc(this.args[0].evaluate(c))}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Wd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yh(this.args[0]).serialize();const c=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(h=>{c.push(h.serialize())}),c}}var Cc=qu;const Np=["Unknown","Point","LineString","Polygon"];var Yd=class{constructor(u,c){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=u,this.options=c}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Np[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(u){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const u=this.featureDistanceData.center,c=this.featureDistanceData.scale,{x:h,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*c-u[0])+this.featureDistanceData.bearing[1]*(g*c-u[1])}return 0}parseColor(u){let c=this._parseColorCache[u];return c||(c=this._parseColorCache[u]=po.parse(u)),c}getConfig(u){return this.options?this.options.get(u):null}};class Wl{constructor(c,h,g,_,b){this.name=c,this.type=h,this._evaluate=g,this.args=_,this._overloadIndex=b}evaluate(c){if(!this._evaluate){const h=Wl.definitions[this.name];this._evaluate=Array.isArray(h)?h[2]:h.overloads[this._overloadIndex][1]}return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(c=>c.serialize()))}static parse(c,h){const g=c[0],_=Wl.definitions[g];if(!_)return h.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(_)?_[0]:_.type,S=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,L=[];let O=null,N=-1;for(const[U,j]of S){if(Array.isArray(U)&&U.length!==c.length-1)continue;L.push(U),N++,O=new Qp(h.registry,h.path,null,h.scope,void 0,h._scope,h.options);const X=[];let re=!1;for(let fe=1;fe<c.length;fe++){const ge=c[fe],Ce=Array.isArray(U)?U[fe-1]:U.type,Te=O.parse(ge,1+X.length,Ce);if(!Te){re=!0;break}X.push(Te)}if(!re)if(Array.isArray(U)&&U.length!==X.length)O.error(`Expected ${U.length} arguments, but found ${X.length} instead.`);else{for(let fe=0;fe<X.length;fe++){const ge=Array.isArray(U)?U[fe]:U.type,Ce=X[fe];O.concat(fe+1).checkSubtype(ge,Ce.type)}if(O.errors.length===0)return new Wl(g,b,j,X,N)}}if(L.length===1)h.errors.push(...O.errors);else{const U=(L.length?L:S.map(([X])=>X)).map(rg).join(" | "),j=[];for(let X=1;X<c.length;X++){const re=h.parse(c[X],1+j.length);if(!re)return null;j.push(jo(re.type))}h.error(`Expected arguments of type ${U}, but found (${j.join(", ")}) instead.`)}return null}static register(c,h){Wl.definitions=h;for(const g in h)c[g]=Wl}}function rg(u){return Array.isArray(u)?`(${u.map(jo).join(", ")})`:`(${jo(u.type)}...)`}var ji=Wl;class kp{constructor(c,h,g){this.type=Vd,this.locale=g,this.caseSensitive=c,this.diacriticSensitive=h}static parse(c,h){if(c.length!==2)return h.error("Expected one argument.");const g=c[1];if(typeof g!="object"||Array.isArray(g))return h.error("Collator options argument must be an object.");const _=h.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Ms);if(!_)return null;const b=h.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Ms);if(!b)return null;let S=null;return g.locale&&(S=h.parse(g.locale,1,Bs),!S)?null:new kp(_,b,S)}evaluate(c){return new Ui(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}serialize(){const c={};return c["case-sensitive"]=this.caseSensitive.serialize(),c["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(c.locale=this.locale.serialize()),["collator",c]}}var Vf={exports:{}};Vf.exports=function(){function u(g,_,b,S,L){for(;S>b;){if(S-b>600){var O=S-b+1,N=_-b+1,U=Math.log(O),j=.5*Math.exp(2*U/3),X=.5*Math.sqrt(U*j*(O-j)/O)*(N-O/2<0?-1:1);u(g,_,Math.max(b,Math.floor(_-N*j/O+X)),Math.min(S,Math.floor(_+(O-N)*j/O+X)),L)}var re=g[_],fe=b,ge=S;for(c(g,b,_),L(g[S],re)>0&&c(g,b,S);fe<ge;){for(c(g,fe,ge),fe++,ge--;L(g[fe],re)<0;)fe++;for(;L(g[ge],re)>0;)ge--}L(g[b],re)===0?c(g,b,ge):c(g,++ge,S),ge<=_&&(b=ge+1),_<=ge&&(S=ge-1)}}function c(g,_,b){var S=g[_];g[_]=g[b],g[b]=S}function h(g,_){return g<_?-1:g>_?1:0}return function(g,_,b,S,L){u(g,_,b||0,S||g.length-1,L||h)}}();var k_=F(Vf.exports);function Em(u){let c=0;for(let h,g,_=0,b=u.length,S=b-1;_<b;S=_++)h=u[_],g=u[S],c+=(g.x-h.x)*(h.y+g.y);return c}function Yu(u,c){u[0]=Math.min(u[0],c[0]),u[1]=Math.min(u[1],c[1]),u[2]=Math.max(u[2],c[0]),u[3]=Math.max(u[3],c[1])}function Ch(u,c){return!(u[0]<=c[0]||u[2]>=c[2]||u[1]<=c[1]||u[3]>=c[3])}function Xd(u,c,h){const g=u[0]-c[0],_=u[1]-c[1],b=u[0]-h[0],S=u[1]-h[1];return g*S-b*_==0&&g*b<=0&&_*S<=0}function Xh(u,c,h=!1){let g=!1;for(let L=0,O=c.length;L<O;L++){const N=c[L];for(let U=0,j=N.length,X=j-1;U<j;X=U++){const re=N[X],fe=N[U];if(Xd(u,re,fe))return h;(b=re)[1]>(_=u)[1]!=(S=fe)[1]>_[1]&&_[0]<(S[0]-b[0])*(_[1]-b[1])/(S[1]-b[1])+b[0]&&(g=!g)}}var _,b,S;return g}function Dp(u,c,h,g){const _=g[0]-h[0],b=g[1]-h[1],S=(u[0]-h[0])*b-_*(u[1]-h[1]),L=(c[0]-h[0])*b-_*(c[1]-h[1]);return S>0&&L<0||S<0&&L>0}function Xu(u,c,h,g){return(_=[g[0]-h[0],g[1]-h[1]])[0]*(b=[c[0]-u[0],c[1]-u[1]])[1]-_[1]*b[0]!=0&&!(!Dp(u,c,h,g)||!Dp(h,g,u,c));var _,b}const Zh=8192;function Jh(u,c){const h=(180+u[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,_=Math.pow(2,c.z);return[Math.round(h*_*Zh),Math.round(g*_*Zh)]}function Zd(u,c){for(let h=0;h<c.length;h++)if(Xh(u,c[h]))return!0;return!1}function Up(u,c,h){for(const g of h)for(let _=0,b=g.length,S=b-1;_<b;S=_++)if(Xu(u,c,g[S],g[_]))return!0;return!1}function vl(u,c){for(let h=0;h<u.length;++h)if(!Xh(u[h],c))return!1;for(let h=0;h<u.length-1;++h)if(Up(u[h],u[h+1],c))return!1;return!0}function ig(u,c){for(let h=0;h<c.length;h++)if(vl(u,c[h]))return!0;return!1}function de(u,c,h){const g=[];for(let _=0;_<u.length;_++){const b=[];for(let S=0;S<u[_].length;S++){const L=Jh(u[_][S],h);Yu(c,L),b.push(L)}g.push(b)}return g}function We(u,c,h){const g=[];for(let _=0;_<u.length;_++){const b=de(u[_],c,h);g.push(b)}return g}function Ot(u,c,h,g){if(u[0]<h[0]||u[0]>h[2]){const _=.5*g;let b=u[0]-h[0]>_?-g:h[0]-u[0]>_?g:0;b===0&&(b=u[0]-h[2]>_?-g:h[2]-u[0]>_?g:0),u[0]+=b}Yu(c,u)}function Jt(u,c,h,g){const _=Math.pow(2,g.z)*Zh,b=[g.x*Zh,g.y*Zh],S=[];if(!u)return S;for(const L of u)for(const O of L){const N=[O.x+b[0],O.y+b[1]];Ot(N,c,h,_),S.push(N)}return S}function xn(u,c,h,g){const _=Math.pow(2,g.z)*Zh,b=[g.x*Zh,g.y*Zh],S=[];if(!u)return S;for(const O of u){const N=[];for(const U of O){const j=[U.x+b[0],U.y+b[1]];Yu(c,j),N.push(j)}S.push(N)}if(c[2]-c[0]<=_/2){(L=c)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(const O of S)for(const N of O)Ot(N,c,h,_)}var L;return S}class Wn{constructor(c,h){this.type=Ms,this.geojson=c,this.geometries=h}static parse(c,h){if(c.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(jd(c[1])){const g=c[1];if(g.type==="FeatureCollection")for(let _=0;_<g.features.length;++_){const b=g.features[_].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Wn(g,g.features[_].geometry)}else if(g.type==="Feature"){const _=g.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Wn(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Wn(g,g)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(h,g){const _=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],S=h.canonicalID();if(!S)return!1;if(g.type==="Polygon"){const L=de(g.coordinates,b,S),O=Jt(h.geometry(),_,b,S);if(!Ch(_,b))return!1;for(const N of O)if(!Xh(N,L))return!1}if(g.type==="MultiPolygon"){const L=We(g.coordinates,b,S),O=Jt(h.geometry(),_,b,S);if(!Ch(_,b))return!1;for(const N of O)if(!Zd(N,L))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(h,g){const _=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],S=h.canonicalID();if(!S)return!1;if(g.type==="Polygon"){const L=de(g.coordinates,b,S),O=xn(h.geometry(),_,b,S);if(!Ch(_,b))return!1;for(const N of O)if(!vl(N,L))return!1}if(g.type==="MultiPolygon"){const L=We(g.coordinates,b,S),O=xn(h.geometry(),_,b,S);if(!Ch(_,b))return!1;for(const N of O)if(!ig(N,L))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var xr=Wn,ei={exports:{}};ei.exports=function(){var u={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},c=1/298.257223563,h=c*(2-c),g=Math.PI/180,_=function(N,U){if(N===void 0)throw new Error("No latitude given.");if(U&&!u[U])throw new Error("Unknown unit "+U+". Use one of: "+Object.keys(u).join(", "));var j=6378.137*g*(U?u[U]:1),X=Math.cos(N*g),re=1/(1-h*(1-X*X)),fe=Math.sqrt(re);this.kx=j*fe*X,this.ky=j*fe*re*(1-h)},b={units:{configurable:!0}};function S(N,U){return N[0]===U[0]&&N[1]===U[1]}function L(N,U,j){var X=O(U[0]-N[0]);return[N[0]+X*j,N[1]+(U[1]-N[1])*j]}function O(N){for(;N<-180;)N+=360;for(;N>180;)N-=360;return N}return _.fromTile=function(N,U,j){var X=Math.PI*(1-2*(N+.5)/Math.pow(2,U)),re=Math.atan(.5*(Math.exp(X)-Math.exp(-X)))/g;return new _(re,j)},b.units.get=function(){return u},_.prototype.distance=function(N,U){var j=O(N[0]-U[0])*this.kx,X=(N[1]-U[1])*this.ky;return Math.sqrt(j*j+X*X)},_.prototype.bearing=function(N,U){var j=O(U[0]-N[0])*this.kx;return Math.atan2(j,(U[1]-N[1])*this.ky)/g},_.prototype.destination=function(N,U,j){var X=j*g;return this.offset(N,Math.sin(X)*U,Math.cos(X)*U)},_.prototype.offset=function(N,U,j){return[N[0]+U/this.kx,N[1]+j/this.ky]},_.prototype.lineDistance=function(N){for(var U=0,j=0;j<N.length-1;j++)U+=this.distance(N[j],N[j+1]);return U},_.prototype.area=function(N){for(var U=0,j=0;j<N.length;j++)for(var X=N[j],re=0,fe=X.length,ge=fe-1;re<fe;ge=re++)U+=O(X[re][0]-X[ge][0])*(X[re][1]+X[ge][1])*(j?-1:1);return Math.abs(U)/2*this.kx*this.ky},_.prototype.along=function(N,U){var j=0;if(U<=0)return N[0];for(var X=0;X<N.length-1;X++){var re=N[X],fe=N[X+1],ge=this.distance(re,fe);if((j+=ge)>U)return L(re,fe,(U-(j-ge))/ge)}return N[N.length-1]},_.prototype.pointToSegmentDistance=function(N,U,j){var X=U[0],re=U[1],fe=O(j[0]-X)*this.kx,ge=(j[1]-re)*this.ky,Ce=0;return fe===0&&ge===0||((Ce=(O(N[0]-X)*this.kx*fe+(N[1]-re)*this.ky*ge)/(fe*fe+ge*ge))>1?(X=j[0],re=j[1]):Ce>0&&(X+=fe/this.kx*Ce,re+=ge/this.ky*Ce)),fe=O(N[0]-X)*this.kx,ge=(N[1]-re)*this.ky,Math.sqrt(fe*fe+ge*ge)},_.prototype.pointOnLine=function(N,U){for(var j,X,re,fe,ge=1/0,Ce=0;Ce<N.length-1;Ce++){var Te=N[Ce][0],qe=N[Ce][1],tt=O(N[Ce+1][0]-Te)*this.kx,et=(N[Ce+1][1]-qe)*this.ky,vt=0;tt===0&&et===0||((vt=(O(U[0]-Te)*this.kx*tt+(U[1]-qe)*this.ky*et)/(tt*tt+et*et))>1?(Te=N[Ce+1][0],qe=N[Ce+1][1]):vt>0&&(Te+=tt/this.kx*vt,qe+=et/this.ky*vt));var dt=(tt=O(U[0]-Te)*this.kx)*tt+(et=(U[1]-qe)*this.ky)*et;dt<ge&&(ge=dt,j=Te,X=qe,re=Ce,fe=vt)}return{point:[j,X],index:re,t:Math.max(0,Math.min(1,fe))}},_.prototype.lineSlice=function(N,U,j){var X=this.pointOnLine(j,N),re=this.pointOnLine(j,U);if(X.index>re.index||X.index===re.index&&X.t>re.t){var fe=X;X=re,re=fe}var ge=[X.point],Ce=X.index+1,Te=re.index;!S(j[Ce],ge[0])&&Ce<=Te&&ge.push(j[Ce]);for(var qe=Ce+1;qe<=Te;qe++)ge.push(j[qe]);return S(j[Te],re.point)||ge.push(re.point),ge},_.prototype.lineSliceAlong=function(N,U,j){for(var X=0,re=[],fe=0;fe<j.length-1;fe++){var ge=j[fe],Ce=j[fe+1],Te=this.distance(ge,Ce);if((X+=Te)>N&&re.length===0&&re.push(L(ge,Ce,(N-(X-Te))/Te)),X>=U)return re.push(L(ge,Ce,(U-(X-Te))/Te)),re;X>N&&re.push(Ce)}return re},_.prototype.bufferPoint=function(N,U){var j=U/this.ky,X=U/this.kx;return[N[0]-X,N[1]-j,N[0]+X,N[1]+j]},_.prototype.bufferBBox=function(N,U){var j=U/this.ky,X=U/this.kx;return[N[0]-X,N[1]-j,N[2]+X,N[3]+j]},_.prototype.insideBBox=function(N,U){return O(N[0]-U[0])>=0&&O(N[0]-U[2])<=0&&N[1]>=U[1]&&N[1]<=U[3]},Object.defineProperties(_,b),_}();var Ci=F(ei.exports),_s={exports:{}};_s.exports=function(){var u=function(h,g){if(h===void 0&&(h=[]),g===void 0&&(g=c),this.data=h,this.length=this.data.length,this.compare=g,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function c(h,g){return h<g?-1:h>g?1:0}return u.prototype.push=function(h){this.data.push(h),this.length++,this._up(this.length-1)},u.prototype.pop=function(){if(this.length!==0){var h=this.data[0],g=this.data.pop();return this.length--,this.length>0&&(this.data[0]=g,this._down(0)),h}},u.prototype.peek=function(){return this.data[0]},u.prototype._up=function(h){for(var g=this.data,_=this.compare,b=g[h];h>0;){var S=h-1>>1,L=g[S];if(_(b,L)>=0)break;g[h]=L,h=S}g[h]=b},u.prototype._down=function(h){for(var g=this.data,_=this.compare,b=this.length>>1,S=g[h];h<b;){var L=1+(h<<1),O=g[L],N=L+1;if(N<this.length&&_(g[N],O)<0&&(L=N,O=g[N]),_(O,S)>=0)break;g[h]=O,h=L}g[h]=S},u}();var ts=F(_s.exports),zn=8192;function na(u,c){return c.dist-u.dist}const wa=100,xa=50;function Ml(u){const c=[1/0,1/0,-1/0,-1/0];if(c.length!==u.length)return!1;for(let h=0;h<c.length;h++)if(c[h]!==u[h])return!1;return!0}function fa(u){return u[1]-u[0]+1}function el(u,c){const h=u[1]>=u[0]&&u[1]<c;return h||console.warn("Distance Expression: Index is out of range"),h}function Vc(u,c){if(u[0]>u[1])return[null,null];const h=fa(u);if(c){if(h===2)return[u,null];const g=Math.floor(h/2);return[[u[0],u[0]+g],[u[0]+g,u[1]]]}{if(h===1)return[u,null];const g=Math.floor(h/2)-1;return[[u[0],u[0]+g],[u[0]+g+1,u[1]]]}}function Hc(u,c){const h=[1/0,1/0,-1/0,-1/0];if(!el(c,u.length))return h;for(let g=c[0];g<=c[1];++g)Yu(h,u[g]);return h}function zp(u){const c=[1/0,1/0,-1/0,-1/0];for(let h=0;h<u.length;++h)for(let g=0;g<u[h].length;++g)Yu(c,u[h][g]);return c}function Eh(u,c,h){if(Ml(u)||Ml(c))return NaN;let g=0,_=0;return u[2]<c[0]&&(g=c[0]-u[2]),u[0]>c[2]&&(g=u[0]-c[2]),u[1]>c[3]&&(_=u[1]-c[3]),u[3]<c[1]&&(_=c[1]-u[3]),h.distance([0,0],[g,_])}function $p(u){return 360*u-180}function sg(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function ed(u,c){const h=Math.pow(2,c.z),g=(u.y/zn+c.y)/h;return[$p((u.x/zn+c.x)/h),sg(g)]}function Sm(u,c){const h=[];for(let g=0;g<u.length;++g)h.push(ed(u[g],c));return h}function Vp(u,c,h){const g=h.pointOnLine(c,u).point;return h.distance(u,g)}function Gc(u,c,h,g,_){const b=h.slice(g[0],g[1]+1);let S=1/0;for(let L=c[0];L<=c[1];++L)if((S=Math.min(S,Vp(u[L],b,_)))===0)return 0;return S}function Hf(u,c,h,g,_){const b=Math.min(_.pointToSegmentDistance(u,h,g),_.pointToSegmentDistance(c,h,g)),S=Math.min(_.pointToSegmentDistance(h,u,c),_.pointToSegmentDistance(g,u,c));return Math.min(b,S)}function og(u,c,h,g,_){if(!el(c,u.length)||!el(g,h.length))return NaN;let b=1/0;for(let S=c[0];S<c[1];++S)for(let L=g[0];L<g[1];++L){if(Xu(u[S],u[S+1],h[L],h[L+1]))return 0;b=Math.min(b,Hf(u[S],u[S+1],h[L],h[L+1],_))}return b}function ag(u,c,h,g,_){if(!el(c,u.length)||!el(g,h.length))return NaN;let b=1/0;for(let S=c[0];S<=c[1];++S)for(let L=g[0];L<=g[1];++L)if((b=Math.min(b,_.distance(u[S],h[L])))===0)return b;return b}function Tm(u,c,h){if(Xh(u,c,!0))return 0;let g=1/0;for(const _ of c){const b=_.length;if(b<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(_[0]!==_[b-1]&&(g=Math.min(g,h.pointToSegmentDistance(u,_[b-1],_[0])))===0||(g=Math.min(g,Vp(u,_,h)))===0)return g}return g}function Qc(u,c,h,g){if(!el(c,u.length))return NaN;for(let b=c[0];b<=c[1];++b)if(Xh(u[b],h,!0))return 0;let _=1/0;for(let b=c[0];b<c[1];++b)for(const S of h)for(let L=0,O=S.length,N=O-1;L<O;N=L++){if(Xu(u[b],u[b+1],S[N],S[L]))return 0;_=Math.min(_,Hf(u[b],u[b+1],S[N],S[L],g))}return _}function Hp(u,c){for(const h of u)for(let g=0;g<=h.length-1;++g)if(Xh(h[g],c,!0))return!0;return!1}function Im(u,c,h,g=1/0){const _=zp(u),b=zp(c);if(g!==1/0&&Eh(_,b,h)>=g)return g;if(Ch(_,b)){if(Hp(u,c))return 0}else if(Hp(c,u))return 0;let S=g;for(const L of u)for(let O=0,N=L.length,U=N-1;O<N;U=O++)for(const j of c)for(let X=0,re=j.length,fe=re-1;X<re;fe=X++){if(Xu(L[U],L[O],j[fe],j[X]))return 0;S=Math.min(S,Hf(L[U],L[O],j[fe],j[X],h))}return S}function Gp(u,c,h,g,_,b,S){if(b===null||S===null)return;const L=Eh(Hc(g,b),Hc(_,S),h);L<c&&u.push({dist:L,range1:b,range2:S})}function Iu(u,c,h,g,_=1/0){let b=Math.min(g.distance(u[0],h[0][0]),_);if(b===0)return b;const S=new ts([{dist:0,range1:[0,u.length-1],range2:[0,0]}],na),L=c?xa:wa,O=zp(h);for(;S.length;){const N=S.pop();if(N.dist>=b)continue;const U=N.range1;if(fa(U)<=L){if(!el(U,u.length))return NaN;if(c){const j=Qc(u,U,h,g);if((b=Math.min(b,j))===0)return b}else for(let j=U[0];j<=U[1];++j){const X=Tm(u[j],h,g);if((b=Math.min(b,X))===0)return b}}else{const j=Vc(U,c);if(j[0]!==null){const X=Eh(Hc(u,j[0]),O,g);X<b&&S.push({dist:X,range1:j[0],range2:[0,0]})}if(j[1]!==null){const X=Eh(Hc(u,j[1]),O,g);X<b&&S.push({dist:X,range1:j[1],range2:[0,0]})}}}return b}function lg(u,c,h,g,_,b=1/0){let S=Math.min(b,_.distance(u[0],h[0]));if(S===0)return S;const L=new ts([{dist:0,range1:[0,u.length-1],range2:[0,h.length-1]}],na),O=c?xa:wa,N=g?xa:wa;for(;L.length;){const U=L.pop();if(U.dist>=S)continue;const j=U.range1,X=U.range2;if(fa(j)<=O&&fa(X)<=N){if(!el(j,u.length)||!el(X,h.length))return NaN;if(c&&g?S=Math.min(S,og(u,j,h,X,_)):c||g?c&&!g?S=Math.min(S,Gc(h,X,u,j,_)):!c&&g&&(S=Math.min(S,Gc(u,j,h,X,_))):S=Math.min(S,ag(u,j,h,X,_)),S===0)return S}else{const re=Vc(j,c),fe=Vc(X,g);Gp(L,S,_,u,h,re[0],fe[0]),Gp(L,S,_,u,h,re[0],fe[1]),Gp(L,S,_,u,h,re[1],fe[0]),Gp(L,S,_,u,h,re[1],fe[1])}}return S}function Bm(u,c,h,g,_=1/0){let b=_;const S=Hc(u,[0,u.length-1]);for(const L of h)if(!(b!==1/0&&Eh(S,Hc(L,[0,L.length-1]),g)>=b)&&(b=Math.min(b,lg(u,c,L,!0,g,b)),b===0))return b;return b}function cg(u,c,h,g,_=1/0){let b=_;const S=Hc(u,[0,u.length-1]);for(const L of h){if(b!==1/0&&Eh(S,zp(L),g)>=b)continue;const O=Iu(u,c,L,g,b);if(isNaN(O))return O;if((b=Math.min(b,O))===0)return b}return b}function td(u){return u==="Point"||u==="MultiPoint"||u==="LineString"||u==="MultiLineString"||u==="Polygon"||u==="MultiPolygon"}class Ll{constructor(c,h){this.type=yr,this.geojson=c,this.geometries=h}static parse(c,h){if(c.length!==2)return h.error(`'distance' expression requires either one argument, but found ' ${c.length-1} instead.`);if(jd(c[1])){const g=c[1];if(g.type==="FeatureCollection"){for(let _=0;_<g.features.length;++_)if(td(g.features[_].geometry.type))return new Ll(g,g.features[_].geometry)}else if(g.type==="Feature"){if(td(g.geometry.type))return new Ll(g,g.geometry)}else if(td(g.type))return new Ll(g,g)}return h.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(c){const h=c.geometry(),g=c.canonicalID();if(h!=null&&g!=null){if(c.geometryType()==="Point")return function(_,b,S){const L=[];for(const N of _)for(const U of N)L.push(ed(U,b));const O=new Ci(L[0][1],"meters");return S.type==="Point"||S.type==="MultiPoint"||S.type==="LineString"?lg(L,!1,S.type==="Point"?[S.coordinates]:S.coordinates,S.type==="LineString",O):S.type==="MultiLineString"?Bm(L,!1,S.coordinates,O):S.type==="Polygon"||S.type==="MultiPolygon"?cg(L,!1,S.type==="Polygon"?[S.coordinates]:S.coordinates,O):null}(h,g,this.geometries);if(c.geometryType()==="LineString")return function(_,b,S){const L=[];for(const N of _){const U=[];for(const j of N)U.push(ed(j,b));L.push(U)}const O=new Ci(L[0][0][1],"meters");if(S.type==="Point"||S.type==="MultiPoint"||S.type==="LineString")return Bm(S.type==="Point"?[S.coordinates]:S.coordinates,S.type==="LineString",L,O);if(S.type==="MultiLineString"){let N=1/0;for(let U=0;U<S.coordinates.length;U++){const j=Bm(S.coordinates[U],!0,L,O,N);if(isNaN(j))return j;if((N=Math.min(N,j))===0)return N}return N}if(S.type==="Polygon"||S.type==="MultiPolygon"){let N=1/0;for(let U=0;U<L.length;U++){const j=cg(L[U],!0,S.type==="Polygon"?[S.coordinates]:S.coordinates,O,N);if(isNaN(j))return j;if((N=Math.min(N,j))===0)return N}return N}return null}(h,g,this.geometries);if(c.geometryType()==="Polygon")return function(_,b,S){const L=[];for(const N of function(U,j){const X=U.length;if(X<=1)return[U];const re=[];let fe,ge;for(let Ce=0;Ce<X;Ce++){const Te=Em(U[Ce]);Te!==0&&(U[Ce].area=Math.abs(Te),ge===void 0&&(ge=Te<0),ge===Te<0?(fe&&re.push(fe),fe=[U[Ce]]):fe.push(U[Ce]))}return fe&&re.push(fe),re}(_)){const U=[];for(let j=0;j<N.length;++j)U.push(Sm(N[j],b));L.push(U)}const O=new Ci(L[0][0][0][1],"meters");if(S.type==="Point"||S.type==="MultiPoint"||S.type==="LineString")return cg(S.type==="Point"?[S.coordinates]:S.coordinates,S.type==="LineString",L,O);if(S.type==="MultiLineString"){let N=1/0;for(let U=0;U<S.coordinates.length;U++){const j=cg(S.coordinates[U],!0,L,O,N);if(isNaN(j))return j;if((N=Math.min(N,j))===0)return N}return N}return S.type==="Polygon"||S.type==="MultiPolygon"?function(N,U,j){let X=1/0;for(const re of N)for(const fe of U){const ge=Im(re,fe,j,X);if(isNaN(ge))return ge;if((X=Math.min(X,ge))===0)return X}return X}(S.type==="Polygon"?[S.coordinates]:S.coordinates,L,O):null}(h,g,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var hu=Ll;function Zu(u,c){switch(u){case"string":return wc(c);case"number":return+c;case"boolean":return!!c;case"color":return po.parse(c);case"formatted":return Fa.fromString(wc(c));case"resolvedImage":return Yr.fromString(wc(c))}return c}function Ju(u,c,h,g){return g!==void 0&&(u=g*Math.round(u/g)),c!==void 0&&u<c&&(u=c),h!==void 0&&u>h&&(u=h),u}class Bu{constructor(c,h,g){this.type=c,this.key=h,this.scope=g}static parse(c,h){let g=h.expectedType;if(g==null&&(g=es),c.length<2||c.length>3)return h.error("Invalid number of arguments for 'config' expression.");const _=h.parse(c[1],1);if(!(_ instanceof xc))return h.error("Key name of 'config' expression must be a string literal.");if(c.length>=3){const b=h.parse(c[2],2);return b instanceof xc?new Bu(g,wc(_.value),wc(b.value)):h.error("Scope of 'config' expression must be a string literal.")}return new Bu(g,wc(_.value))}evaluate(c){const h=[this.key,this.scope,c.scope].filter(Boolean).join(""),g=c.getConfig(h);if(!g)return null;const{type:_,value:b,values:S,minValue:L,maxValue:O,stepValue:N}=g,U=g.default.evaluate(c);let j=U;if(b){const X=c.scope;c.scope=(X||"").split("").slice(1).join(""),j=b.evaluate(c),c.scope=X}return _&&(j=Zu(_,j)),j===void 0||L===void 0&&O===void 0&&N===void 0||(typeof j=="number"?j=Ju(j,L,O,N):Array.isArray(j)&&(j=j.map(X=>typeof X=="number"?Ju(X,L,O,N):X))),b!==void 0&&j!==void 0&&S&&!S.includes(j)&&(j=U,_&&(j=Zu(_,j))),(_&&_!==this.type||j!==void 0&&_a(j)!==this.type)&&(j=Zu(this.type.kind,j)),j}eachChild(){}outputDefined(){return!1}serialize(){const c=["config",this.key];return this.scope&&c.concat(this.key),c}}var Sh=Bu;function Ec(u){if(u instanceof ji&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof xr||u instanceof hu)return!1;let c=!0;return u.eachChild(h=>{c&&!Ec(h)&&(c=!1)}),c}function nd(u){if(u instanceof ji&&u.name==="feature-state")return!1;let c=!0;return u.eachChild(h=>{c&&!nd(h)&&(c=!1)}),c}function Jd(u){if(u instanceof Sh)return!1;let c=!0;return u.eachChild(h=>{c&&!Jd(h)&&(c=!1)}),c}function pa(u,c){if(u instanceof ji&&c.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild(g=>{h&&!pa(g,c)&&(h=!1)}),h}class Rl{constructor(c,h){this.type=h.type,this.name=c,this.boundExpression=h}static parse(c,h){if(c.length!==2||typeof c[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const g=c[1];return h.scope.has(g)?new Rl(g,h.scope.get(g)):h.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Oa=Rl;class ef{constructor(c,h=[],g,_=new w0,b=[],S,L){this.registry=c,this.path=h,this.key=h.map(O=>`[${O}]`).join(""),this.scope=_,this.errors=b,this.expectedType=g,this._scope=S,this.options=L}parse(c,h,g,_,b={}){return h||g?this.concat(h,g,_)._parse(c,b):this._parse(c,b)}_parse(c,h){function g(_,b,S){return S==="assert"?new cu(b,[_]):S==="coerce"?new Cc(b,[_]):_}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=typeof c[0]=="string"?this.registry[c[0]]:void 0;if(_){let b=_.parse(c,this);if(!b)return null;if(this.expectedType){const S=this.expectedType,L=b.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||L.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string"){if(this.checkSubtype(S,L))return null}else b=g(b,S,h.typeAnnotation||"coerce");else b=g(b,S,h.typeAnnotation||"assert")}if(!(b instanceof xc)&&b.type.kind!=="resolvedImage"&&tf(b)){const S=new Yd(this._scope,this.options);try{b=new xc(b.type,b.evaluate(S))}catch(L){return this.error(L.message),null}}return b}return Cc.parse(["to-array",c],this)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,h,g){const _=typeof c=="number"?this.path.concat(c):this.path,b=g?this.scope.concat(g):this.scope;return new ef(this.registry,_,h||null,b,this.errors,this._scope,this.options)}error(c,...h){const g=`${this.key}${h.map(_=>`[${_}]`).join("")}`;this.errors.push(new Tu(g,c))}checkSubtype(c,h){const g=Gd(c,h);return g&&this.error(g),g}}var Qp=ef;function tf(u){if(u instanceof Oa)return tf(u.boundExpression);if(u instanceof ji&&u.name==="error"||u instanceof kp||u instanceof xr||u instanceof hu||u instanceof Sh)return!1;const c=u instanceof Cc||u instanceof cu;let h=!0;return u.eachChild(g=>{h=c?h&&tf(g):h&&g instanceof xc}),!!h&&Ec(u)&&pa(u,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function du(u,c){const h=u.length-1;let g,_,b=0,S=h,L=0;for(;b<=S;)if(L=Math.floor((b+S)/2),g=u[L],_=u[L+1],g<=c){if(L===h||c<_)return L;b=L+1}else{if(!(g>c))throw new ba("Input is not a number.");S=L-1}return 0}class Gf{constructor(c,h,g){this.type=c,this.input=h,this.labels=[],this.outputs=[];for(const[_,b]of g)this.labels.push(_),this.outputs.push(b)}static parse(c,h){if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");const g=h.parse(c[1],1,yr);if(!g)return null;const _=[];let b=null;h.expectedType&&h.expectedType.kind!=="value"&&(b=h.expectedType);for(let S=1;S<c.length;S+=2){const L=S===1?-1/0:c[S],O=c[S+1],N=S,U=S+1;if(typeof L!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(_.length&&_[_.length-1][0]>=L)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const j=h.parse(O,U,b);if(!j)return null;b=b||j.type,_.push([L,j])}return new Gf(b,g,_)}evaluate(c){const h=this.labels,g=this.outputs;if(h.length===1)return g[0].evaluate(c);const _=this.input.evaluate(c);if(_<=h[0])return g[0].evaluate(c);const b=h.length;return _>=h[b-1]?g[b-1].evaluate(c):g[du(h,_)].evaluate(c)}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}serialize(){const c=["step",this.input.serialize()];for(let h=0;h<this.labels.length;h++)h>0&&c.push(this.labels[h]),c.push(this.outputs[h].serialize());return c}}var Sc=Gf;const rd=.95047,Ao=1.08883,Ko=4/29,ra=6/29,tl=3*ra*ra,id=ra*ra*ra,Qf=Math.PI/180,Tc=180/Math.PI;function jp(u){return u>id?Math.pow(u,1/3):u/tl+Ko}function Mm(u){return u>ra?u*u*u:tl*(u-Ko)}function Lm(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Rm(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function C0(u){const c=Rm(u.r),h=Rm(u.g),g=Rm(u.b),_=jp((.4124564*c+.3575761*h+.1804375*g)/rd),b=jp((.2126729*c+.7151522*h+.072175*g)/1);return{l:116*b-16,a:500*(_-b),b:200*(b-jp((.0193339*c+.119192*h+.9503041*g)/Ao)),alpha:u.a}}function E0(u){let c=(u.l+16)/116,h=isNaN(u.a)?c:c+u.a/500,g=isNaN(u.b)?c:c-u.b/200;return c=1*Mm(c),h=rd*Mm(h),g=Ao*Mm(g),new po(Lm(3.2404542*h-1.5371385*c-.4985314*g),Lm(-.969266*h+1.8760108*c+.041556*g),Lm(.0556434*h-.2040259*c+1.0572252*g),u.alpha)}function D_(u,c,h){const g=c-u;return u+h*(g>180||g<-180?g-360*Math.round(g/360):g)}const jf={forward:C0,reverse:E0,interpolate:function(u,c,h){return{l:Qi(u.l,c.l,h),a:Qi(u.a,c.a,h),b:Qi(u.b,c.b,h),alpha:Qi(u.alpha,c.alpha,h)}}},nf={forward:function(u){const{l:c,a:h,b:g}=C0(u),_=Math.atan2(g,h)*Tc;return{h:_<0?_+360:_,c:Math.sqrt(h*h+g*g),l:c,alpha:u.a}},reverse:function(u){const c=u.h*Qf,h=u.c;return E0({l:u.l,a:Math.cos(c)*h,b:Math.sin(c)*h,alpha:u.alpha})},interpolate:function(u,c,h){return{h:D_(u.h,c.h,h),c:Qi(u.c,c.c,h),l:Qi(u.l,c.l,h),alpha:Qi(u.alpha,c.alpha,h)}}};var jc=Object.freeze({__proto__:null,hcl:nf,lab:jf});class Ic{constructor(c,h,g,_,b){this.type=c,this.operator=h,this.interpolation=g,this.input=_,this.labels=[],this.outputs=[];for(const[S,L]of b)this.labels.push(S),this.outputs.push(L)}static interpolationFactor(c,h,g,_){let b=0;if(c.name==="exponential")b=rf(h,c.base,g,_);else if(c.name==="linear")b=rf(h,1,g,_);else if(c.name==="cubic-bezier"){const S=c.controlPoints;b=new H(S[0],S[1],S[2],S[3]).solve(rf(h,1,g,_))}return b}static parse(c,h){let[g,_,b,...S]=c;if(!Array.isArray(_)||_.length===0)return h.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const N=_[1];if(typeof N!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:N}}else{if(_[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const N=_.slice(1);if(N.length!==4||N.some(U=>typeof U!="number"||U<0||U>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:N}}}if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(b=h.parse(b,2,yr),!b)return null;const L=[];let O=null;g==="interpolate-hcl"||g==="interpolate-lab"?O=ou:h.expectedType&&h.expectedType.kind!=="value"&&(O=h.expectedType);for(let N=0;N<S.length;N+=2){const U=S[N],j=S[N+1],X=N+3,re=N+4;if(typeof U!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(L.length&&L[L.length-1][0]>=U)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const fe=h.parse(j,re,O);if(!fe)return null;O=O||fe.type,L.push([U,fe])}return O.kind==="number"||O.kind==="color"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new Ic(O,g,_,b,L):h.error(`Type ${jo(O)} is not interpolatable.`)}evaluate(c){const h=this.labels,g=this.outputs;if(h.length===1)return g[0].evaluate(c);const _=this.input.evaluate(c);if(_<=h[0])return g[0].evaluate(c);const b=h.length;if(_>=h[b-1])return g[b-1].evaluate(c);const S=du(h,_),L=Ic.interpolationFactor(this.interpolation,_,h[S],h[S+1]),O=g[S].evaluate(c),N=g[S+1].evaluate(c);return this.operator==="interpolate"?zf[this.type.kind.toLowerCase()](O,N,L):this.operator==="interpolate-hcl"?nf.reverse(nf.interpolate(nf.forward(O),nf.forward(N),L)):jf.reverse(jf.interpolate(jf.forward(O),jf.forward(N),L))}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}serialize(){let c;c=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const h=[this.operator,c,this.input.serialize()];for(let g=0;g<this.labels.length;g++)h.push(this.labels[g],this.outputs[g].serialize());return h}}function rf(u,c,h,g){const _=g-h,b=u-h;return _===0?0:c===1?b/_:(Math.pow(c,b)-1)/(Math.pow(c,_)-1)}var Bc=Ic;class Kp{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expectected at least one argument.");let g=null;const _=h.expectedType;_&&_.kind!=="value"&&(g=_);const b=[];for(const L of c.slice(1)){const O=h.parse(L,1+b.length,g,void 0,{typeAnnotation:"omit"});if(!O)return null;g=g||O.type,b.push(O)}const S=_&&b.some(L=>Gd(_,L.type));return new Kp(S?es:g,b)}evaluate(c){let h,g=null,_=0;for(const b of this.args){if(_++,g=b.evaluate(c),g&&g instanceof Yr&&!g.available&&(h||(h=g),g=null,_===this.args.length))return h;if(g!==null)break}return g}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}serialize(){const c=["coalesce"];return this.eachChild(h=>{c.push(h.serialize())}),c}}var ug=Kp;class Wp{constructor(c,h){this.type=h.type,this.bindings=[].concat(c),this.result=h}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const h of this.bindings)c(h[1]);c(this.result)}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const g=[];for(let b=1;b<c.length-1;b+=2){const S=c[b];if(typeof S!="string")return h.error(`Expected string, but found ${typeof S} instead.`,b);if(/[^a-zA-Z0-9_]/.test(S))return h.error("Variable names must contain only alphanumeric characters or '_'.",b);const L=h.parse(c[b+1],b+1);if(!L)return null;g.push([S,L])}const _=h.parse(c[c.length-1],c.length-1,h.expectedType,g);return _?new Wp(g,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const c=["let"];for(const[h,g]of this.bindings)c.push(h,g.serialize());return c.push(this.result.serialize()),c}}var Pm=Wp;class sf{constructor(c,h,g){this.type=c,this.index=h,this.input=g}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const g=h.parse(c[1],1,yr),_=h.parse(c[2],2,bc(h.expectedType||es));return g&&_?new sf(_.type.itemType,g,_):null}evaluate(c){const h=this.index.evaluate(c),g=this.input.evaluate(c);if(h<0)throw new ba(`Array index out of bounds: ${h} < 0.`);if(h>=g.length)throw new ba(`Array index out of bounds: ${h} > ${g.length-1}.`);if(h!==Math.floor(h))throw new ba(`Array index must be an integer, but found ${h} instead.`);return g[h]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ds=sf;class Fm{constructor(c,h){this.type=Ms,this.needle=c,this.haystack=h}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const g=h.parse(c[1],1,es),_=h.parse(c[2],2,es);return g&&_?di(g.type,[Ms,Bs,yr,$f,es])?new Fm(g,_):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${jo(g.type)} instead`):null}evaluate(c){const h=this.needle.evaluate(c),g=this.haystack.evaluate(c);if(g==null)return!1;if(!Kl(h,["boolean","string","number","null"]))throw new ba(`Expected first argument to be of type boolean, string, number or null, but found ${jo(_a(h))} instead.`);if(!Kl(g,["string","array"]))throw new ba(`Expected second argument to be of type array or string, but found ${jo(_a(g))} instead.`);return g.indexOf(h)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var S0=Fm;class hg{constructor(c,h,g){this.type=yr,this.needle=c,this.haystack=h,this.fromIndex=g}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const g=h.parse(c[1],1,es),_=h.parse(c[2],2,es);if(!g||!_)return null;if(!di(g.type,[Ms,Bs,yr,$f,es]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${jo(g.type)} instead`);if(c.length===4){const b=h.parse(c[3],3,yr);return b?new hg(g,_,b):null}return new hg(g,_)}evaluate(c){const h=this.needle.evaluate(c),g=this.haystack.evaluate(c);if(!Kl(h,["boolean","string","number","null"]))throw new ba(`Expected first argument to be of type boolean, string, number or null, but found ${jo(_a(h))} instead.`);if(!Kl(g,["string","array"]))throw new ba(`Expected second argument to be of type array or string, but found ${jo(_a(g))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(c);return g.indexOf(h,_)}return g.indexOf(h)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const c=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),c]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var uw=hg;class U_{constructor(c,h,g,_,b,S){this.inputType=c,this.type=h,this.input=g,this.cases=_,this.outputs=b,this.otherwise=S}static parse(c,h){if(c.length<5)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return h.error("Expected an even number of arguments.");let g,_;h.expectedType&&h.expectedType.kind!=="value"&&(_=h.expectedType);const b={},S=[];for(let N=2;N<c.length-1;N+=2){let U=c[N];const j=c[N+1];Array.isArray(U)||(U=[U]);const X=h.concat(N);if(U.length===0)return X.error("Expected at least one branch label.");for(const fe of U){if(typeof fe!="number"&&typeof fe!="string")return X.error("Branch labels must be numbers or strings.");if(typeof fe=="number"&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof fe=="number"&&Math.floor(fe)!==fe)return X.error("Numeric branch labels must be integer values.");if(g){if(X.checkSubtype(g,_a(fe)))return null}else g=_a(fe);if(b[String(fe)]!==void 0)return X.error("Branch labels must be unique.");b[String(fe)]=S.length}const re=h.parse(j,N,_);if(!re)return null;_=_||re.type,S.push(re)}const L=h.parse(c[1],1,es);if(!L)return null;const O=h.parse(c[c.length-1],c.length-1,_);return O?L.type.kind!=="value"&&h.concat(1).checkSubtype(g,L.type)?null:new U_(g,_,L,b,S,O):null}evaluate(c){const h=this.input.evaluate(c);return(_a(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const c=["match",this.input.serialize()],h=Object.keys(this.cases).sort(),g=[],_={};for(const S of h){const L=_[this.cases[S]];L===void 0?(_[this.cases[S]]=g.length,g.push([this.cases[S],[S]])):g[L][1].push(S)}const b=S=>this.inputType.kind==="number"?Number(S):S;for(const[S,L]of g)c.push(L.length===1?b(L[0]):L.map(b)),c.push(this.outputs[S].serialize());return c.push(this.otherwise.serialize()),c}}var z_=U_;class T0{constructor(c,h,g){this.type=c,this.branches=h,this.otherwise=g}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return h.error("Expected an odd number of arguments.");let g;h.expectedType&&h.expectedType.kind!=="value"&&(g=h.expectedType);const _=[];for(let S=1;S<c.length-1;S+=2){const L=h.parse(c[S],S,Ms);if(!L)return null;const O=h.parse(c[S+1],S+1,g);if(!O)return null;_.push([L,O]),g=g||O.type}const b=h.parse(c[c.length-1],c.length-1,g);return b?new T0(g,_,b):null}evaluate(c){for(const[h,g]of this.branches)if(h.evaluate(c))return g.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[h,g]of this.branches)c(h),c(g);c(this.otherwise)}outputDefined(){return this.branches.every(([c,h])=>h.outputDefined())&&this.otherwise.outputDefined()}serialize(){const c=["case"];return this.eachChild(h=>{c.push(h.serialize())}),c}}var hw=T0;class Om{constructor(c,h,g,_){this.type=c,this.input=h,this.beginIndex=g,this.endIndex=_}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const g=h.parse(c[1],1,es),_=h.parse(c[2],2,yr);if(!g||!_)return null;if(!di(g.type,[bc(es),Bs,es]))return h.error(`Expected first argument to be of type array or string, but found ${jo(g.type)} instead`);if(c.length===4){const b=h.parse(c[3],3,yr);return b?new Om(g.type,g,_,b):null}return new Om(g.type,g,_)}evaluate(c){const h=this.input.evaluate(c),g=this.beginIndex.evaluate(c);if(!Kl(h,["string","array"]))throw new ba(`Expected first argument to be of type array or string, but found ${jo(_a(h))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(c);return h.slice(g,_)}return h.slice(g)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const c=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),c]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var dg=Om;function $_(u,c){return u==="=="||u==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Nm(u,c,h,g){return g.compare(c,h)===0}function Kf(u,c,h){const g=u!=="=="&&u!=="!=";return class Pae{constructor(b,S,L){this.type=Ms,this.lhs=b,this.rhs=S,this.collator=L,this.hasUntypedArgument=b.type.kind==="value"||S.type.kind==="value"}static parse(b,S){if(b.length!==3&&b.length!==4)return S.error("Expected two or three arguments.");const L=b[0];let O=S.parse(b[1],1,es);if(!O)return null;if(!$_(L,O.type))return S.concat(1).error(`"${L}" comparisons are not supported for type '${jo(O.type)}'.`);let N=S.parse(b[2],2,es);if(!N)return null;if(!$_(L,N.type))return S.concat(2).error(`"${L}" comparisons are not supported for type '${jo(N.type)}'.`);if(O.type.kind!==N.type.kind&&O.type.kind!=="value"&&N.type.kind!=="value")return S.error(`Cannot compare types '${jo(O.type)}' and '${jo(N.type)}'.`);g&&(O.type.kind==="value"&&N.type.kind!=="value"?O=new cu(N.type,[O]):O.type.kind!=="value"&&N.type.kind==="value"&&(N=new cu(O.type,[N])));let U=null;if(b.length===4){if(O.type.kind!=="string"&&N.type.kind!=="string"&&O.type.kind!=="value"&&N.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(U=S.parse(b[3],3,Vd),!U)return null}return new Pae(O,N,U)}evaluate(b){const S=this.lhs.evaluate(b),L=this.rhs.evaluate(b);if(g&&this.hasUntypedArgument){const O=_a(S),N=_a(L);if(O.kind!==N.kind||O.kind!=="string"&&O.kind!=="number")throw new ba(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${O.kind}, ${N.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const O=_a(S),N=_a(L);if(O.kind!=="string"||N.kind!=="string")return c(b,S,L)}return this.collator?h(b,S,L,this.collator.evaluate(b)):c(b,S,L)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[u];return this.eachChild(S=>{b.push(S.serialize())}),b}}}const qp=Kf("==",function(u,c,h){return c===h},Nm),V_=Kf("!=",function(u,c,h){return c!==h},function(u,c,h,g){return!Nm(0,c,h,g)}),YE=Kf("<",function(u,c,h){return c<h},function(u,c,h,g){return g.compare(c,h)<0}),dw=Kf(">",function(u,c,h){return c>h},function(u,c,h,g){return g.compare(c,h)>0}),fw=Kf("<=",function(u,c,h){return c<=h},function(u,c,h,g){return g.compare(c,h)<=0}),XE=Kf(">=",function(u,c,h){return c>=h},function(u,c,h,g){return g.compare(c,h)>=0});class H_{constructor(c,h,g,_,b,S){this.type=Bs,this.number=c,this.locale=h,this.currency=g,this.unit=_,this.minFractionDigits=b,this.maxFractionDigits=S}static parse(c,h){if(c.length!==3)return h.error("Expected two arguments.");const g=h.parse(c[1],1,yr);if(!g)return null;const _=c[2];if(typeof _!="object"||Array.isArray(_))return h.error("NumberFormat options argument must be an object.");let b=null;if(_.locale&&(b=h.parse(_.locale,1,Bs),!b))return null;let S=null;if(_.currency&&(S=h.parse(_.currency,1,Bs),!S))return null;let L=null;if(_.unit&&(L=h.parse(_.unit,1,Bs),!L))return null;let O=null;if(_["min-fraction-digits"]&&(O=h.parse(_["min-fraction-digits"],1,yr),!O))return null;let N=null;return _["max-fraction-digits"]&&(N=h.parse(_["max-fraction-digits"],1,yr),!N)?null:new H_(g,b,S,L,O,N)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(c):void 0,unit:this.unit?this.unit.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.unit&&c(this.unit),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const c={};return this.locale&&(c.locale=this.locale.serialize()),this.currency&&(c.currency=this.currency.serialize()),this.unit&&(c.unit=this.unit.serialize()),this.minFractionDigits&&(c["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(c["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),c]}}class G_{constructor(c){this.type=yr,this.input=c}static parse(c,h){if(c.length!==2)return h.error(`Expected 1 argument, but found ${c.length-1} instead.`);const g=h.parse(c[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${jo(g.type)} instead.`):new G_(g):null}evaluate(c){const h=this.input.evaluate(c);if(typeof h=="string"||Array.isArray(h))return h.length;throw new ba(`Expected value to be of type string or array, but found ${jo(_a(h))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}serialize(){const c=["length"];return this.eachChild(h=>{c.push(h.serialize())}),c}}function of(u){return function(){u=1831565813+(u|=0)|0;let c=Math.imul(u^u>>>15,1|u);return c=c+Math.imul(c^c>>>7,61|c)^c,((c^c>>>14)>>>0)/4294967296}}const Mu={"==":qp,"!=":V_,">":dw,"<":YE,">=":XE,"<=":fw,array:cu,at:ds,boolean:cu,case:hw,coalesce:ug,collator:kp,format:Wd,image:Yh,in:S0,"index-of":uw,interpolate:Bc,"interpolate-hcl":Bc,"interpolate-lab":Bc,length:G_,let:Pm,literal:xc,match:z_,number:cu,"number-format":H_,object:cu,slice:dg,step:Sc,string:cu,"to-boolean":Cc,"to-color":Cc,"to-number":Cc,"to-string":Cc,var:Oa,within:xr,distance:hu,config:Sh};function Th(u,[c,h,g,_]){c=c.evaluate(u),h=h.evaluate(u),g=g.evaluate(u);const b=_?_.evaluate(u):1,S=x0(c,h,g,b);if(S)throw new ba(S);return new po(c/255*b,h/255*b,g/255*b,b)}function pw(u,[c,h,g,_]){c=c.evaluate(u),h=h.evaluate(u),g=g.evaluate(u);const b=_?_.evaluate(u):1,S=function(N,U,j,X){return typeof N=="number"&&N>=0&&N<=360?typeof U=="number"&&U>=0&&U<=100&&typeof j=="number"&&j>=0&&j<=100?X===void 0||typeof X=="number"&&X>=0&&X<=1?null:`Invalid hsla value [${[N,U,j,X].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof X=="number"?[N,U,j,X]:[N,U,j]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof X=="number"?[N,U,j,X]:[N,U,j]).join(", ")}]: 'h' must be between 0 and 360.`}(c,h,g,b);if(S)throw new ba(S);const L=`hsla(${c}, ${h}%, ${g}%, ${b})`,O=po.parse(L);if(!O)throw new ba(`Failed to parse HSLA color: ${L}`);return O}function I0(u,c){return u in c}function sd(u,c){const h=c[u];return h===void 0?null:h}function Pl(u){return{type:u}}ji.register(Mu,{error:[{kind:"error"},[Bs],(u,[c])=>{throw new ba(c.evaluate(u))}],typeof:[Bs,[es],(u,[c])=>jo(_a(c.evaluate(u)))],"to-rgba":[bc(yr,4),[ou],(u,[c])=>c.evaluate(u).toArray()],rgb:[ou,[yr,yr,yr],Th],rgba:[ou,[yr,yr,yr,yr],Th],hsl:[ou,[yr,yr,yr],pw],hsla:[ou,[yr,yr,yr,yr],pw],has:{type:Ms,overloads:[[[Bs],(u,[c])=>I0(c.evaluate(u),u.properties())],[[Bs,au],(u,[c,h])=>I0(c.evaluate(u),h.evaluate(u))]]},get:{type:es,overloads:[[[Bs],(u,[c])=>sd(c.evaluate(u),u.properties())],[[Bs,au],(u,[c,h])=>sd(c.evaluate(u),h.evaluate(u))]]},"feature-state":[es,[Bs],(u,[c])=>sd(c.evaluate(u),u.featureState||{})],properties:[au,[],u=>u.properties()],"geometry-type":[Bs,[],u=>u.geometryType()],id:[es,[],u=>u.id()],zoom:[yr,[],u=>u.globals.zoom],pitch:[yr,[],u=>u.globals.pitch||0],"distance-from-center":[yr,[],u=>u.distanceFromCenter()],"measure-light":[yr,[Bs],(u,[c])=>u.measureLight(c.evaluate(u))],"heatmap-density":[yr,[],u=>u.globals.heatmapDensity||0],"line-progress":[yr,[],u=>u.globals.lineProgress||0],"raster-value":[yr,[],u=>u.globals.rasterValue||0],"raster-particle-speed":[yr,[],u=>u.globals.rasterParticleSpeed||0],"sky-radial-progress":[yr,[],u=>u.globals.skyRadialProgress||0],accumulated:[es,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[yr,Pl(yr),(u,c)=>{let h=0;for(const g of c)h+=g.evaluate(u);return h}],"*":[yr,Pl(yr),(u,c)=>{let h=1;for(const g of c)h*=g.evaluate(u);return h}],"-":{type:yr,overloads:[[[yr,yr],(u,[c,h])=>c.evaluate(u)-h.evaluate(u)],[[yr],(u,[c])=>-c.evaluate(u)]]},"/":[yr,[yr,yr],(u,[c,h])=>c.evaluate(u)/h.evaluate(u)],"%":[yr,[yr,yr],(u,[c,h])=>c.evaluate(u)%h.evaluate(u)],ln2:[yr,[],()=>Math.LN2],pi:[yr,[],()=>Math.PI],e:[yr,[],()=>Math.E],"^":[yr,[yr,yr],(u,[c,h])=>Math.pow(c.evaluate(u),h.evaluate(u))],sqrt:[yr,[yr],(u,[c])=>Math.sqrt(c.evaluate(u))],log10:[yr,[yr],(u,[c])=>Math.log(c.evaluate(u))/Math.LN10],ln:[yr,[yr],(u,[c])=>Math.log(c.evaluate(u))],log2:[yr,[yr],(u,[c])=>Math.log(c.evaluate(u))/Math.LN2],sin:[yr,[yr],(u,[c])=>Math.sin(c.evaluate(u))],cos:[yr,[yr],(u,[c])=>Math.cos(c.evaluate(u))],tan:[yr,[yr],(u,[c])=>Math.tan(c.evaluate(u))],asin:[yr,[yr],(u,[c])=>Math.asin(c.evaluate(u))],acos:[yr,[yr],(u,[c])=>Math.acos(c.evaluate(u))],atan:[yr,[yr],(u,[c])=>Math.atan(c.evaluate(u))],min:[yr,Pl(yr),(u,c)=>Math.min(...c.map(h=>h.evaluate(u)))],max:[yr,Pl(yr),(u,c)=>Math.max(...c.map(h=>h.evaluate(u)))],abs:[yr,[yr],(u,[c])=>Math.abs(c.evaluate(u))],round:[yr,[yr],(u,[c])=>{const h=c.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[yr,[yr],(u,[c])=>Math.floor(c.evaluate(u))],ceil:[yr,[yr],(u,[c])=>Math.ceil(c.evaluate(u))],"filter-==":[Ms,[Bs,es],(u,[c,h])=>u.properties()[c.value]===h.value],"filter-id-==":[Ms,[es],(u,[c])=>u.id()===c.value],"filter-type-==":[Ms,[Bs],(u,[c])=>u.geometryType()===c.value],"filter-<":[Ms,[Bs,es],(u,[c,h])=>{const g=u.properties()[c.value],_=h.value;return typeof g==typeof _&&g<_}],"filter-id-<":[Ms,[es],(u,[c])=>{const h=u.id(),g=c.value;return typeof h==typeof g&&h<g}],"filter->":[Ms,[Bs,es],(u,[c,h])=>{const g=u.properties()[c.value],_=h.value;return typeof g==typeof _&&g>_}],"filter-id->":[Ms,[es],(u,[c])=>{const h=u.id(),g=c.value;return typeof h==typeof g&&h>g}],"filter-<=":[Ms,[Bs,es],(u,[c,h])=>{const g=u.properties()[c.value],_=h.value;return typeof g==typeof _&&g<=_}],"filter-id-<=":[Ms,[es],(u,[c])=>{const h=u.id(),g=c.value;return typeof h==typeof g&&h<=g}],"filter->=":[Ms,[Bs,es],(u,[c,h])=>{const g=u.properties()[c.value],_=h.value;return typeof g==typeof _&&g>=_}],"filter-id->=":[Ms,[es],(u,[c])=>{const h=u.id(),g=c.value;return typeof h==typeof g&&h>=g}],"filter-has":[Ms,[es],(u,[c])=>c.value in u.properties()],"filter-has-id":[Ms,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Ms,[bc(Bs)],(u,[c])=>c.value.indexOf(u.geometryType())>=0],"filter-id-in":[Ms,[bc(es)],(u,[c])=>c.value.indexOf(u.id())>=0],"filter-in-small":[Ms,[Bs,bc(es)],(u,[c,h])=>h.value.indexOf(u.properties()[c.value])>=0],"filter-in-large":[Ms,[Bs,bc(es)],(u,[c,h])=>function(g,_,b,S){for(;b<=S;){const L=b+S>>1;if(_[L]===g)return!0;_[L]>g?S=L-1:b=L+1}return!1}(u.properties()[c.value],h.value,0,h.value.length-1)],all:{type:Ms,overloads:[[[Ms,Ms],(u,[c,h])=>c.evaluate(u)&&h.evaluate(u)],[Pl(Ms),(u,c)=>{for(const h of c)if(!h.evaluate(u))return!1;return!0}]]},any:{type:Ms,overloads:[[[Ms,Ms],(u,[c,h])=>c.evaluate(u)||h.evaluate(u)],[Pl(Ms),(u,c)=>{for(const h of c)if(h.evaluate(u))return!0;return!1}]]},"!":[Ms,[Ms],(u,[c])=>!c.evaluate(u)],"is-supported-script":[Ms,[Bs],(u,[c])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(c.evaluate(u))}],upcase:[Bs,[Bs],(u,[c])=>c.evaluate(u).toUpperCase()],downcase:[Bs,[Bs],(u,[c])=>c.evaluate(u).toLowerCase()],concat:[Bs,Pl(es),(u,c)=>c.map(h=>wc(h.evaluate(u))).join("")],"resolved-locale":[Bs,[Vd],(u,[c])=>c.evaluate(u).resolvedLocale()],random:[yr,[yr,yr,es],(u,c)=>{const[h,g,_]=c.map(S=>S.evaluate(u));if(h>g||h===g)return h;let b;if(typeof _=="string")b=function(S){let L=0;if(S.length===0)return L;for(let O=0;O<S.length;O++)L=(L<<5)-L+S.charCodeAt(O),L|=0;return L}(_);else{if(typeof _!="number")throw new ba(`Invalid seed input: ${_}`);b=_}return h+of(b)()*(g-h)}]});var fg=Mu;function Q_(u){return{result:"success",value:u}}function Wf(u){return{result:"error",value:u}}function j_(u,c){return!!u&&!!u.parameters&&u.parameters.indexOf(c)>-1}function km(u){return u["property-type"]==="data-driven"}function B0(u){return j_(u.expression,"measure-light")}function Aw(u){return j_(u.expression,"zoom")}function pg(u){return!!u.expression&&u.expression.interpolated}function Yp(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Ag(u){return u}function Dm(u,c){const h=c.type==="color",g=u.stops&&typeof u.stops[0][0]=="object",_=g||!(g||u.property!==void 0),b=u.type||(pg(c)?"exponential":"interval");if(h&&((u=ng({},u)).stops&&(u.stops=u.stops.map(N=>[N[0],po.parse(N[1])])),u.default=po.parse(u.default?u.default:c.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!jc[u.colorSpace])throw new Error(`Unknown color space: ${u.colorSpace}`);let S,L,O;if(b==="exponential")S=mw;else if(b==="interval")S=gw;else if(b==="categorical"){S=ZE,L=Object.create(null);for(const N of u.stops)L[N[0]]=N[1];O=typeof u.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);S=vw}if(g){const N={},U=[];for(let re=0;re<u.stops.length;re++){const fe=u.stops[re],ge=fe[0].zoom;N[ge]===void 0&&(N[ge]={zoom:ge,type:u.type,property:u.property,default:u.default,stops:[]},U.push(ge)),N[ge].stops.push([fe[0].value,fe[1]])}const j=[];for(const re of U)j.push([N[re].zoom,Dm(N[re],c)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Bc.interpolationFactor.bind(void 0,X),zoomStops:j.map(re=>re[0]),evaluate:({zoom:re},fe)=>mw({stops:j,base:u.base},c,re).evaluate(re,fe)}}if(_){const N=b==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Bc.interpolationFactor.bind(void 0,N),zoomStops:u.stops.map(U=>U[0]),evaluate:({zoom:U})=>S(u,c,U,L,O)}}return{kind:"source",evaluate(N,U){const j=U&&U.properties?U.properties[u.property]:void 0;return j===void 0?gg(u.default,c.default):S(u,c,j,L,O)}}}function gg(u,c,h){return u!==void 0?u:c!==void 0?c:h!==void 0?h:void 0}function ZE(u,c,h,g,_){return gg(typeof h===_?g[h]:void 0,u.default,c.default)}function gw(u,c,h){if(qd(h)!=="number")return gg(u.default,c.default);const g=u.stops.length;if(g===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[g-1][0])return u.stops[g-1][1];const _=du(u.stops.map(b=>b[0]),h);return u.stops[_][1]}function mw(u,c,h){const g=u.base!==void 0?u.base:1;if(qd(h)!=="number")return gg(u.default,c.default);const _=u.stops.length;if(_===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[_-1][0])return u.stops[_-1][1];const b=du(u.stops.map(U=>U[0]),h),S=function(U,j,X,re){const fe=re-X,ge=U-X;return fe===0?0:j===1?ge/fe:(Math.pow(j,ge)-1)/(Math.pow(j,fe)-1)}(h,g,u.stops[b][0],u.stops[b+1][0]),L=u.stops[b][1],O=u.stops[b+1][1];let N=zf[c.type]||Ag;if(u.colorSpace&&u.colorSpace!=="rgb"){const U=jc[u.colorSpace];N=(j,X)=>U.reverse(U.interpolate(U.forward(j),U.forward(X),S))}return typeof L.evaluate=="function"?{evaluate(...U){const j=L.evaluate.apply(void 0,U),X=O.evaluate.apply(void 0,U);if(j!==void 0&&X!==void 0)return N(j,X,S)}}:N(L,O,S)}function vw(u,c,h){return c.type==="color"?h=po.parse(h):c.type==="formatted"?h=Fa.fromString(h.toString()):c.type==="resolvedImage"?h=Yr.fromString(h.toString()):qd(h)===c.type||c.type==="enum"&&c.values[h]||(h=void 0),gg(h,u.default,c.default)}class M0{constructor(c,h,g,_){this.expression=c,this._warningHistory={},this._evaluator=new Yd(g,_),this._defaultValue=h?function(b){return b.type==="color"&&(Yp(b.default)||Array.isArray(b.default))?new po(0,0,0,0):b.type==="color"?po.parse(b.default)||null:b.default===void 0?null:b.default}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(c,h,g,_,b,S,L,O){return this._evaluator.globals=c,this._evaluator.feature=h,this._evaluator.featureState=g,this._evaluator.canonical=_||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=S,this._evaluator.featureTileCoord=L||null,this._evaluator.featureDistanceData=O||null,this.expression.evaluate(this._evaluator)}evaluate(c,h,g,_,b,S,L,O){this._evaluator.globals=c,this._evaluator.feature=h||null,this._evaluator.featureState=g||null,this._evaluator.canonical=_||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=S||null,this._evaluator.featureTileCoord=L||null,this._evaluator.featureDistanceData=O||null;try{const N=this.expression.evaluate(this._evaluator);if(N==null||typeof N=="number"&&N!=N)return this._defaultValue;if(this._enumValues&&!(N in this._enumValues))throw new ba(`Expected value to be one of ${Object.keys(this._enumValues).map(U=>JSON.stringify(U)).join(", ")}, but found ${JSON.stringify(N)} instead.`);return N}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}}}function Um(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in fg}function L0(u,c,h,g){const _=new Qp(fg,[],c?function(S){const L={color:ou,string:Bs,number:yr,enum:Bs,boolean:Ms,formatted:Hd,resolvedImage:fl};return S.type==="array"?bc(L[S.value]||es,S.length):L[S.type]}(c):void 0,void 0,void 0,h,g),b=_.parse(u,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?Q_(new M0(b,c,h,g)):Wf(_.errors)}class K_{constructor(c,h,g){this.kind=c,this._styleExpression=h,this.isLightConstant=g,this.isStateDependent=c!=="constant"&&!nd(h.expression),this.isConfigDependent=!Jd(h.expression)}evaluateWithoutErrorHandling(c,h,g,_,b,S){return this._styleExpression.evaluateWithoutErrorHandling(c,h,g,_,b,S)}evaluate(c,h,g,_,b,S){return this._styleExpression.evaluate(c,h,g,_,b,S)}}class mg{constructor(c,h,g,_,b){this.kind=c,this.zoomStops=g,this._styleExpression=h,this.isStateDependent=c!=="camera"&&!nd(h.expression),this.isLightConstant=b,this.isConfigDependent=!Jd(h.expression),this.interpolationType=_}evaluateWithoutErrorHandling(c,h,g,_,b,S){return this._styleExpression.evaluateWithoutErrorHandling(c,h,g,_,b,S)}evaluate(c,h,g,_,b,S){return this._styleExpression.evaluate(c,h,g,_,b,S)}interpolationFactor(c,h,g){return this.interpolationType?Bc.interpolationFactor(this.interpolationType,c,h,g):0}}function Xp(u,c,h,g){if((u=L0(u,c,h,g)).result==="error")return u;const _=u.value.expression,b=Ec(_);if(!b&&!km(c))return Wf([new Tu("","data expressions not supported")]);const S=pa(_,["zoom","pitch","distance-from-center"]);if(!S&&!Aw(c))return Wf([new Tu("","zoom expressions not supported")]);const L=pa(_,["measure-light"]);if(!L&&!B0(c))return Wf([new Tu("","measure-light expression not supported")]);const O=c.expression&&c.expression.relaxZoomRestriction,N=$m(_);return N||S||O?N instanceof Tu?Wf([N]):N instanceof Bc&&!pg(c)?Wf([new Tu("",'"interpolate" expressions cannot be used with this property')]):Q_(N?new mg(b?"camera":"composite",u.value,N.labels,N instanceof Bc?N.interpolation:void 0,L):new K_(b?"constant":"source",u.value,L)):Wf([new Tu("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class zm{constructor(c,h){this._parameters=c,this._specification=h,ng(this,Dm(this._parameters,this._specification))}static deserialize(c){return new zm(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function $m(u){let c=null;if(u instanceof Pm)c=$m(u.result);else if(u instanceof ug){for(const h of u.args)if(c=$m(h),c)break}else(u instanceof Sc||u instanceof Bc)&&u.input instanceof ji&&u.input.name==="zoom"&&(c=u);return c instanceof Tu||u.eachChild(h=>{const g=$m(h);g instanceof Tu?c=g:c&&g&&c!==g&&(c=new Tu("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}var yw=Z,$=3;function Z(u,c,h){var g=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(c=_[1])+2*(h=_[2]);for(var b=0;b<this.d*this.d;b++){var S=_[$+b],L=_[$+b+1];g.push(S===L?null:_.subarray(S,L))}var O=_[$+g.length+1];this.keys=_.subarray(_[$+g.length],O),this.bboxes=_.subarray(O),this.insert=this._insertReadonly}else{this.d=c+2*h;for(var N=0;N<this.d*this.d;N++)g.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=u,this.padding=h,this.scale=c/u,this.uid=0;var U=h/c*u;this.min=-U,this.max=u+U}Z.prototype.insert=function(u,c,h,g,_){this._forEachCell(c,h,g,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)},Z.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Z.prototype._insertCell=function(u,c,h,g,_,b){this.cells[_].push(b)},Z.prototype.query=function(u,c,h,g,_){var b=this.min,S=this.max;if(u<=b&&c<=b&&S<=h&&S<=g&&!_)return Array.prototype.slice.call(this.keys);var L=[];return this._forEachCell(u,c,h,g,this._queryCell,L,{},_),L},Z.prototype._queryCell=function(u,c,h,g,_,b,S,L){var O=this.cells[_];if(O!==null)for(var N=this.keys,U=this.bboxes,j=0;j<O.length;j++){var X=O[j];if(S[X]===void 0){var re=4*X;(L?L(U[re+0],U[re+1],U[re+2],U[re+3]):u<=U[re+2]&&c<=U[re+3]&&h>=U[re+0]&&g>=U[re+1])?(S[X]=!0,b.push(N[X])):S[X]=!1}}},Z.prototype._forEachCell=function(u,c,h,g,_,b,S,L){for(var O=this._convertToCellCoord(u),N=this._convertToCellCoord(c),U=this._convertToCellCoord(h),j=this._convertToCellCoord(g),X=O;X<=U;X++)for(var re=N;re<=j;re++){var fe=this.d*re+X;if((!L||L(this._convertFromCellCoord(X),this._convertFromCellCoord(re),this._convertFromCellCoord(X+1),this._convertFromCellCoord(re+1)))&&_.call(this,u,c,h,g,fe,b,S,L))return}},Z.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},Z.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},Z.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,c=$+this.cells.length+1+1,h=0,g=0;g<this.cells.length;g++)h+=this.cells[g].length;var _=new Int32Array(c+h+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=c,S=0;S<u.length;S++){var L=u[S];_[$+S]=b,_.set(L,b),b+=L.length}return _[$+u.length]=b,_.set(this.keys,b),_[$+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer};var Ae=F(yw);const Se={};function Pe(u,c,h={}){Object.defineProperty(u,"_classRegistryKey",{value:c,writeable:!1}),Se[c]={klass:u,omit:h.omit||[]}}Pe(Object,"Object"),Ae.serialize=function(u,c){const h=u.toArrayBuffer();return c&&c.add(h),{buffer:h}},Ae.deserialize=function(u){return new Ae(u.buffer)},Object.defineProperty(Ae,"name",{value:"Grid"}),Pe(Ae,"Grid"),Pe(po,"Color"),Pe(Error,"Error"),Pe(Fa,"Formatted"),Pe(Qd,"FormattedSection"),Pe(ss,"AJAXError"),Pe(Yr,"ResolvedImage"),Pe(zm,"StylePropertyFunction"),Pe(M0,"StyleExpression",{omit:["_evaluator"]}),Pe(mg,"ZoomDependentExpression"),Pe(K_,"ZoomConstantExpression"),Pe(ji,"CompoundExpression",{omit:["_evaluate"]});for(const u in fg)Se[fg[u]._classRegistryKey]||Pe(fg[u],`Expression${u}`);function nt(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function st(u){return self.ImageBitmap&&u instanceof ImageBitmap}function ht(u,c){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(nt(u)||st(u))return c&&c.add(u),u;if(ArrayBuffer.isView(u)){const h=u;return c&&c.add(h.buffer),h}if(u instanceof ImageData)return c&&c.add(u.data.buffer),u;if(Array.isArray(u)){const h=[];for(const g of u)h.push(ht(g,c));return h}if(u instanceof Map){const h={$name:"Map"};for(const[g,_]of u.entries())h[g]=ht(_);return h}if(typeof u=="object"){const h=u.constructor,g=h._classRegistryKey;if(!g)throw new Error(`can't serialize object of unregistered class ${g}`);const _=h.serialize?h.serialize(u,c):{};if(!h.serialize){for(const b in u)u.hasOwnProperty(b)&&(Se[g].omit.indexOf(b)>=0||(_[b]=ht(u[b],c)));u instanceof Error&&(_.message=u.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(_.$name=g),_}throw new Error("can't serialize object of type "+typeof u)}function At(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||nt(u)||st(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(At);if(typeof u=="object"){const c=u.$name||"Object";if(c==="Map"){const _=new Map;for(const b of Object.keys(u))b!=="$name"&&_.set(b,At(u[b]));return _}const{klass:h}=Se[c];if(!h)throw new Error(`can't deserialize unregistered class ${c}`);if(h.deserialize)return h.deserialize(u);const g=Object.create(h.prototype);for(const _ of Object.keys(u))_!=="$name"&&(g[_]=At(u[_]));return g}throw new Error("can't deserialize object of type "+typeof u)}const ot={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519,"CJK Unified Ideographs Extension B":u=>u>=131072&&u<=173791};function nn(u){for(const c of u)if(gn(c.charCodeAt(0)))return!0;return!1}function In(u){for(const c of u)if(!Bn(c.charCodeAt(0)))return!1;return!0}function Bn(u){return!(ot.Arabic(u)||ot["Arabic Supplement"](u)||ot["Arabic Extended-A"](u)||ot["Arabic Presentation Forms-A"](u)||ot["Arabic Presentation Forms-B"](u))}function gn(u){return!(u!==746&&u!==747&&(u<4352||!(ot["Bopomofo Extended"](u)||ot.Bopomofo(u)||ot["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||ot["CJK Compatibility Ideographs"](u)||ot["CJK Compatibility"](u)||ot["CJK Radicals Supplement"](u)||ot["CJK Strokes"](u)||!(!ot["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||ot["CJK Unified Ideographs Extension A"](u)||ot["CJK Unified Ideographs"](u)||ot["Enclosed CJK Letters and Months"](u)||ot["Hangul Compatibility Jamo"](u)||ot["Hangul Jamo Extended-A"](u)||ot["Hangul Jamo Extended-B"](u)||ot["Hangul Jamo"](u)||ot["Hangul Syllables"](u)||ot.Hiragana(u)||ot["Ideographic Description Characters"](u)||ot.Kanbun(u)||ot["Kangxi Radicals"](u)||ot["Katakana Phonetic Extensions"](u)||ot.Katakana(u)&&u!==12540||!(!ot["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!ot["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||ot["Unified Canadian Aboriginal Syllabics"](u)||ot["Unified Canadian Aboriginal Syllabics Extended"](u)||ot["Vertical Forms"](u)||ot["Yijing Hexagram Symbols"](u)||ot["Yi Syllables"](u)||ot["Yi Radicals"](u))))}function cr(u){return!(gn(u)||function(c){return!!(ot["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||ot["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||ot["Letterlike Symbols"](c)||ot["Number Forms"](c)||ot["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||ot["Control Pictures"](c)&&c!==9251||ot["Optical Character Recognition"](c)||ot["Enclosed Alphanumerics"](c)||ot["Geometric Shapes"](c)||ot["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||ot["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||ot["CJK Symbols and Punctuation"](c)||ot.Katakana(c)||ot["Private Use Area"](c)||ot["CJK Compatibility Forms"](c)||ot["Small Form Variants"](c)||ot["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(u))}function Hn(u){return u>=1424&&u<=2303||ot["Arabic Presentation Forms-A"](u)||ot["Arabic Presentation Forms-B"](u)}function cn(u,c){return!(!c&&Hn(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||ot.Khmer(u))}function fn(u){for(const c of u)if(Hn(c.charCodeAt(0)))return!0;return!1}const or="deferred",fr="loading",ar="loaded";let ri=null,Lr="unavailable",Ii=null;const Jr=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(Lr="error"),ri&&ri(u)};function go(){Mo.fire(new $d("pluginStateChange",{pluginStatus:Lr,pluginURL:Ii}))}const Mo=new Uf,js=function(){return Lr},ro=function(){if(Lr!==or||!Ii)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Lr=fr,go(),Ii&&dn({url:Ii},u=>{u?Jr(u):(Lr=ar,go())})},Zs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Lr===ar||Zs.applyArabicShaping!=null,isLoading:()=>Lr===fr,setState(u){Lr=u.pluginStatus,Ii=u.pluginURL},isParsed:()=>Zs.applyArabicShaping!=null&&Zs.processBidirectionalText!=null&&Zs.processStyledBidirectionalText!=null,getPluginURL:()=>Ii};class $i{constructor(c,h){this.zoom=c,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.transition=h.transition,this.pitch=h.pitch,this.brightness=h.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(c){return function(h,g){for(const _ of h)if(!cn(_.charCodeAt(0),g))return!1;return!0}(c,Zs.isLoaded())}}class bs{constructor(c,h,g,_){this.property=c,this.value=h,this.expression=function(b,S,L,O){if(Yp(b))return new zm(b,S);if(Um(b)||Array.isArray(b)&&b.length>0){const N=Xp(b,S,L,O);if(N.result==="error")throw new Error(N.value.map(U=>`${U.key}: ${U.message}`).join(", "));return N.value}{let N=b;return typeof b=="string"&&S.type==="color"&&(N=po.parse(b)),{kind:"constant",isConfigDependent:!1,evaluate:()=>N}}}(h===void 0?c.specification.default:h,c.specification,g,_)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,h,g){return this.property.possiblyEvaluate(this,c,h,g)}}class $a{constructor(c,h,g){this.property=c,this.value=new bs(c,void 0,h,g)}transitioned(c,h){return new Ha(this.property,this.value,h,ae({},c.transition,this.transition),c.now)}untransitioned(){return new Ha(this.property,this.value,null,{},0)}}class Va{constructor(c,h,g){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues),this._scope=h,this._options=g,this.isConfigDependent=!1}getValue(c){return Et(this._values[c].value.value)}setValue(c,h){this._values.hasOwnProperty(c)||(this._values[c]=new $a(this._values[c].property,this._scope,this._options)),this._values[c].value=new bs(this._values[c].property,h===null?void 0:Et(h),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[c].value.expression.isConfigDependent}setTransitionOrValue(c,h){h&&(this._options=h);const g=this._properties.properties;if(c)for(const _ in c){const b=c[_];if(Je(_,"-transition")){const S=_.slice(0,-11);g[S]&&this.setTransition(S,b)}else g[_]&&this.setValue(_,b)}}getTransition(c){return Et(this._values[c].transition)}setTransition(c,h){this._values.hasOwnProperty(c)||(this._values[c]=new $a(this._values[c].property)),this._values[c].transition=Et(h)||void 0}serialize(){const c={};for(const h of Object.keys(this._values)){const g=this.getValue(h);g!==void 0&&(c[h]=g);const _=this.getTransition(h);_!==void 0&&(c[`${h}-transition`]=_)}return c}transitioned(c,h){const g=new pl(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].transitioned(c,h._values[_]);return g}untransitioned(){const c=new pl(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].untransitioned();return c}}class Ha{constructor(c,h,g,_,b){const S=_.delay||0,L=_.duration||0;b=b||0,this.property=c,this.value=h,this.begin=b+S,this.end=this.begin+L,c.specification.transition&&(_.delay||_.duration)&&(this.prior=g)}possiblyEvaluate(c,h,g){const _=c.now||0,b=this.value.possiblyEvaluate(c,h,g),S=this.prior;if(S){if(_>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(_<this.begin)return S.possiblyEvaluate(c,h,g);{const L=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(c,h,g),b,se(L))}}return b}}class pl{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,h,g){const _=new ql(this._properties);for(const b of Object.keys(this._values))_._values[b]=this._values[b].possiblyEvaluate(c,h,g);return _}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Fo{constructor(c,h,g){this._properties=c,this._values=Object.create(c.defaultPropertyValues),this._scope=h,this._options=g,this.isConfigDependent=!1}getValue(c){return Et(this._values[c].value)}setValue(c,h){this._values[c]=new bs(this._values[c].property,h===null?void 0:Et(h),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[c].expression.isConfigDependent}serialize(){const c={};for(const h of Object.keys(this._values)){const g=this.getValue(h);g!==void 0&&(c[h]=g)}return c}possiblyEvaluate(c,h,g){const _=new ql(this._properties);for(const b of Object.keys(this._values))_._values[b]=this._values[b].possiblyEvaluate(c,h,g);return _}}class Fl{constructor(c,h,g){this.property=c,this.value=h,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,h,g,_){return this.property.evaluate(this.value,this.parameters,c,h,g,_)}}class ql{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class Gn{constructor(c){this.specification=c}possiblyEvaluate(c,h){return c.expression.evaluate(h)}interpolate(c,h,g){const _=zf[this.specification.type];return _?_(c,h,g):c}}class Mr{constructor(c,h){this.specification=c,this.overrides=h}possiblyEvaluate(c,h,g,_){return new Fl(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(h,null,{},g,_)}:c.expression,h)}interpolate(c,h,g){if(c.value.kind!=="constant"||h.value.kind!=="constant")return c;if(c.value.value===void 0||h.value.value===void 0)return new Fl(this,{kind:"constant",value:void 0},c.parameters);const _=zf[this.specification.type];return _?new Fl(this,{kind:"constant",value:_(c.value.value,h.value.value,g)},c.parameters):c}evaluate(c,h,g,_,b,S){return c.kind==="constant"?c.value:c.evaluate(h,g,_,b,S)}}class nl{constructor(c){this.specification=c}possiblyEvaluate(c,h,g,_){return!!c.expression.evaluate(h,null,{},g,_)}interpolate(){return!1}}class Js{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const h=new $i(0,{});for(const g in c){const _=c[g];_.specification.overridable&&this.overridableProperties.push(g);const b=this.defaultPropertyValues[g]=new bs(_,void 0),S=this.defaultTransitionablePropertyValues[g]=new $a(_);this.defaultTransitioningPropertyValues[g]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[g]=b.possiblyEvaluate(h)}}}function fu(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Ga(u){if(Array.isArray(u))return u.map(Ga);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const c={};for(const h in u)c[h]=Ga(u[h]);return c}return fu(u)}Pe(Mr,"DataDrivenProperty"),Pe(Gn,"DataConstantProperty"),Pe(nl,"ColorRampProperty");var rn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function af(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const c of u.slice(1))if(!af(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}function Ol(u,c="fill"){if(u==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};af(u)||(u=cf(u));const h=u;let g=!0;try{g=function(N){if(!qf(N))return N;let U=Ga(N);return Ca(U),U=lf(U),U}(h)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(h,null,2)}
        `)}const _=rn[`filter_${c}`],b=L0(g,_);let S=null;if(b.result==="error")throw new Error(b.value.map(N=>`${N.key}: ${N.message}`).join(", "));S=(N,U,j)=>b.value.evaluate(N,U,{},j);let L=null,O=null;if(g!==h){const N=L0(h,_);if(N.result==="error")throw new Error(N.value.map(U=>`${U.key}: ${U.message}`).join(", "));L=(U,j,X,re,fe)=>N.value.evaluate(U,j,{},X,void 0,void 0,re,fe),O=!Ec(N.value.expression)}return{filter:S,dynamicFilter:L||void 0,needGeometry:Vm(g),needFeature:!!O}}function lf(u){if(!Array.isArray(u))return u;const c=function(h){if(_w.has(h[0])){for(let g=1;g<h.length;g++)if(qf(h[g]))return!0}return h}(u);return c===!0?c:c.map(h=>lf(h))}function Ca(u){let c=!1;const h=[];if(u[0]==="case"){for(let g=1;g<u.length-1;g+=2)c=c||qf(u[g]),h.push(u[g+1]);h.push(u[u.length-1])}else if(u[0]==="match"){c=c||qf(u[1]);for(let g=2;g<u.length-1;g+=2)h.push(u[g+1]);h.push(u[u.length-1])}else if(u[0]==="step"){c=c||qf(u[1]);for(let g=1;g<u.length-1;g+=2)h.push(u[g+1])}c&&(u.length=0,u.push("any",...h));for(let g=1;g<u.length;g++)Ca(u[g])}function qf(u){if(!Array.isArray(u))return!1;if((c=u[0])==="pitch"||c==="distance-from-center")return!0;var c;for(let h=1;h<u.length;h++)if(qf(u[h]))return!0;return!1}const _w=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function bw(u,c){return u<c?-1:u>c?1:0}function Vm(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let c=1;c<u.length;c++)if(Vm(u[c]))return!0;return!1}function cf(u){if(!u)return!0;const c=u[0];return u.length<=1?c!=="any":c==="=="?Yf(u[1],u[2],"=="):c==="!="?od(Yf(u[1],u[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Yf(u[1],u[2],c):c==="any"?(h=u.slice(1),["any"].concat(h.map(cf))):c==="all"?["all"].concat(u.slice(1).map(cf)):c==="none"?["all"].concat(u.slice(1).map(cf).map(od)):c==="in"?Lu(u[1],u.slice(2)):c==="!in"?od(Lu(u[1],u.slice(2))):c==="has"?Zp(u[1]):c!=="!has"||od(Zp(u[1]));var h}function Yf(u,c,h){switch(u){case"$type":return[`filter-type-${h}`,c];case"$id":return[`filter-id-${h}`,c];default:return[`filter-${h}`,u,c]}}function Lu(u,c){if(c.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(h=>typeof h!=typeof c[0])?["filter-in-large",u,["literal",c.sort(bw)]]:["filter-in-small",u,["literal",c]]}}function Zp(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function od(u){return["!",u]}const Hm="";function vg(u,c){return c?`${u}${Hm}${c}`:u}const yg="-transition";class Yl extends Uf{constructor(c,h,g,_){if(super(),this.id=c.id,this.fqid=vg(this.id,g),this.type=c.type,this.scope=g,this.options=_,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&c.type!=="sky"&&c.type!=="slot"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),c.slot&&(this.slot=c.slot),h.layout&&(this._unevaluatedLayout=new Fo(h.layout,this.scope,_),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),h.paint)){this._transitionablePaint=new Va(h.paint,this.scope,_);for(const b in c.paint)this.setPaintProperty(b,c.paint[b]);for(const b in c.layout)this.setLayoutProperty(b,c.layout[b]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ql(h.paint)}}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,h){if(this.type==="custom"&&c==="visibility")return void(this.visibility=h);const g=this._unevaluatedLayout;g._properties.properties[c]&&(g.setValue(c,h),this.isConfigDependent=this.isConfigDependent||g.isConfigDependent,c==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(c){return Je(c,yg)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,h){const g=this._transitionablePaint,_=g._properties.properties;if(Je(c,yg)){const j=c.slice(0,-11);return _[j]&&g.setTransition(j,h||void 0),!1}if(!_[c])return!1;const b=g._values[c],S=b.value.isDataDriven(),L=b.value;g.setValue(c,h),this.isConfigDependent=this.isConfigDependent||g.isConfigDependent,this._handleSpecialPaintPropertyUpdate(c);const O=g._values[c].value,N=O.isDataDriven(),U=Je(c,"pattern")||c==="line-dasharray";return N||S||U||this._handleOverridablePaintPropertyUpdate(c,L,O)}_handleSpecialPaintPropertyUpdate(c){}getProgramIds(){return null}getDefaultProgramParams(c,h){return null}_handleOverridablePaintPropertyUpdate(c,h,g){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,h){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,h)}serialize(){return ft({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(c,h)=>!(c===void 0||h==="layout"&&!Object.keys(c).length||h==="paint"&&!Object.keys(c).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const c in this.paint._values){const h=this.paint.get(c);if(h instanceof Fl&&km(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ol(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(c){this._stats&&(c.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}}const W_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Jp{constructor(c,h){this._structArray=c,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ho{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,h){return c._trim(),h&&(c.isTransferred=!0,h.add(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const h=Object.create(this.prototype);return h.arrayBuffer=c.arrayBuffer,h.length=c.length,h.capacity=c.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...c){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...c){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ks(u,c=1){let h=0,g=0;return{members:u.map(_=>{const b=W_[_.type].BYTES_PER_ELEMENT,S=h=Gm(h,Math.max(c,b)),L=_.components||1;return g=Math.max(g,b),h+=b*L,{name:_.name,type:_.type,components:L,offset:S}}),size:Gm(h,Math.max(g,c)),alignment:c}}function Gm(u,c){return Math.ceil(u/c)*c}class Ru extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h){const g=this.length;return this.resize(g+1),this.emplace(g,c,h)}emplace(c,h,g){const _=2*c;return this.int16[_+0]=h,this.int16[_+1]=g,c}}Ru.prototype.bytesPerElement=4,Pe(Ru,"StructArrayLayout2i4");class Qa extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,h,g)}emplace(c,h,g,_){const b=3*c;return this.int16[b+0]=h,this.int16[b+1]=g,this.int16[b+2]=_,c}}Qa.prototype.bytesPerElement=6,Pe(Qa,"StructArrayLayout3i6");class uf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,g,_)}emplace(c,h,g,_,b){const S=4*c;return this.int16[S+0]=h,this.int16[S+1]=g,this.int16[S+2]=_,this.int16[S+3]=b,c}}uf.prototype.bytesPerElement=8,Pe(uf,"StructArrayLayout4i8");class q_ extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,g,_,b)}emplace(c,h,g,_,b,S){const L=5*c;return this.int16[L+0]=h,this.int16[L+1]=g,this.int16[L+2]=_,this.int16[L+3]=b,this.int16[L+4]=S,c}}q_.prototype.bytesPerElement=10,Pe(q_,"StructArrayLayout5i10");class Y_ extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L){const O=this.length;return this.resize(O+1),this.emplace(O,c,h,g,_,b,S,L)}emplace(c,h,g,_,b,S,L,O){const N=6*c,U=12*c,j=3*c;return this.int16[N+0]=h,this.int16[N+1]=g,this.uint8[U+4]=_,this.uint8[U+5]=b,this.uint8[U+6]=S,this.uint8[U+7]=L,this.float32[j+2]=O,c}}Y_.prototype.bytesPerElement=12,Pe(Y_,"StructArrayLayout2i4ub1f12");class hf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,g,_)}emplace(c,h,g,_,b){const S=4*c;return this.float32[S+0]=h,this.float32[S+1]=g,this.float32[S+2]=_,this.float32[S+3]=b,c}}hf.prototype.bytesPerElement=16,Pe(hf,"StructArrayLayout4f16");class Ih extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,g,_,b)}emplace(c,h,g,_,b,S){const L=6*c,O=3*c;return this.uint16[L+0]=h,this.uint16[L+1]=g,this.uint16[L+2]=_,this.uint16[L+3]=b,this.float32[O+2]=S,c}}Ih.prototype.bytesPerElement=12,Pe(Ih,"StructArrayLayout4ui1f12");class eA extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,g,_)}emplace(c,h,g,_,b){const S=4*c;return this.uint16[S+0]=h,this.uint16[S+1]=g,this.uint16[S+2]=_,this.uint16[S+3]=b,c}}eA.prototype.bytesPerElement=8,Pe(eA,"StructArrayLayout4ui8");class Qm extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S){const L=this.length;return this.resize(L+1),this.emplace(L,c,h,g,_,b,S)}emplace(c,h,g,_,b,S,L){const O=6*c;return this.int16[O+0]=h,this.int16[O+1]=g,this.int16[O+2]=_,this.int16[O+3]=b,this.int16[O+4]=S,this.int16[O+5]=L,c}}Qm.prototype.bytesPerElement=12,Pe(Qm,"StructArrayLayout6i12");class Xf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L,O,N,U,j,X){const re=this.length;return this.resize(re+1),this.emplace(re,c,h,g,_,b,S,L,O,N,U,j,X)}emplace(c,h,g,_,b,S,L,O,N,U,j,X,re){const fe=12*c;return this.int16[fe+0]=h,this.int16[fe+1]=g,this.int16[fe+2]=_,this.int16[fe+3]=b,this.uint16[fe+4]=S,this.uint16[fe+5]=L,this.uint16[fe+6]=O,this.uint16[fe+7]=N,this.int16[fe+8]=U,this.int16[fe+9]=j,this.int16[fe+10]=X,this.int16[fe+11]=re,c}}Xf.prototype.bytesPerElement=24,Pe(Xf,"StructArrayLayout4i4ui4i24");class jm extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S){const L=this.length;return this.resize(L+1),this.emplace(L,c,h,g,_,b,S)}emplace(c,h,g,_,b,S,L){const O=10*c,N=5*c;return this.int16[O+0]=h,this.int16[O+1]=g,this.int16[O+2]=_,this.float32[N+2]=b,this.float32[N+3]=S,this.float32[N+4]=L,c}}jm.prototype.bytesPerElement=20,Pe(jm,"StructArrayLayout3i3f20");class tA extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint32[1*c+0]=h,c}}tA.prototype.bytesPerElement=4,Pe(tA,"StructArrayLayout1ul4");class Bh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h){const g=this.length;return this.resize(g+1),this.emplace(g,c,h)}emplace(c,h,g){const _=2*c;return this.uint16[_+0]=h,this.uint16[_+1]=g,c}}Bh.prototype.bytesPerElement=4,Pe(Bh,"StructArrayLayout2ui4");class X_ extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L,O,N,U,j,X,re){const fe=this.length;return this.resize(fe+1),this.emplace(fe,c,h,g,_,b,S,L,O,N,U,j,X,re)}emplace(c,h,g,_,b,S,L,O,N,U,j,X,re,fe){const ge=20*c,Ce=10*c;return this.int16[ge+0]=h,this.int16[ge+1]=g,this.int16[ge+2]=_,this.int16[ge+3]=b,this.int16[ge+4]=S,this.float32[Ce+3]=L,this.float32[Ce+4]=O,this.float32[Ce+5]=N,this.float32[Ce+6]=U,this.int16[ge+14]=j,this.uint32[Ce+8]=X,this.uint16[ge+18]=re,this.uint16[ge+19]=fe,c}}X_.prototype.bytesPerElement=40,Pe(X_,"StructArrayLayout5i4f1i1ul2ui40");class Zf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L){const O=this.length;return this.resize(O+1),this.emplace(O,c,h,g,_,b,S,L)}emplace(c,h,g,_,b,S,L,O){const N=8*c;return this.int16[N+0]=h,this.int16[N+1]=g,this.int16[N+2]=_,this.int16[N+4]=b,this.int16[N+5]=S,this.int16[N+6]=L,this.int16[N+7]=O,c}}Zf.prototype.bytesPerElement=16,Pe(Zf,"StructArrayLayout3i2i2i16");class Km extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,g,_,b)}emplace(c,h,g,_,b,S){const L=4*c,O=8*c;return this.float32[L+0]=h,this.float32[L+1]=g,this.float32[L+2]=_,this.int16[O+6]=b,this.int16[O+7]=S,c}}Km.prototype.bytesPerElement=16,Pe(Km,"StructArrayLayout2f1f2i16");class Wm extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,g,_)}emplace(c,h,g,_,b){const S=12*c,L=3*c;return this.uint8[S+0]=h,this.uint8[S+1]=g,this.float32[L+1]=_,this.float32[L+2]=b,c}}Wm.prototype.bytesPerElement=12,Pe(Wm,"StructArrayLayout2ub2f12");class Wo extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,h,g)}emplace(c,h,g,_){const b=3*c;return this.uint16[b+0]=h,this.uint16[b+1]=g,this.uint16[b+2]=_,c}}Wo.prototype.bytesPerElement=6,Pe(Wo,"StructArrayLayout3ui6");class nA extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt)}emplace(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt,dt){const Pt=30*c,Qt=15*c,Xt=60*c;return this.int16[Pt+0]=h,this.int16[Pt+1]=g,this.int16[Pt+2]=_,this.float32[Qt+2]=b,this.float32[Qt+3]=S,this.uint16[Pt+8]=L,this.uint16[Pt+9]=O,this.uint32[Qt+5]=N,this.uint32[Qt+6]=U,this.uint32[Qt+7]=j,this.uint16[Pt+16]=X,this.uint16[Pt+17]=re,this.uint16[Pt+18]=fe,this.float32[Qt+10]=ge,this.float32[Qt+11]=Ce,this.uint8[Xt+48]=Te,this.uint8[Xt+49]=qe,this.uint8[Xt+50]=tt,this.uint32[Qt+13]=et,this.int16[Pt+28]=vt,this.uint8[Xt+58]=dt,c}}nA.prototype.bytesPerElement=60,Pe(nA,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class qm extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt,dt,Pt,Qt,Xt,An,tn,Sn,Dn,wn,kn,yn){const On=this.length;return this.resize(On+1),this.emplace(On,c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt,dt,Pt,Qt,Xt,An,tn,Sn,Dn,wn,kn,yn)}emplace(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt,dt,Pt,Qt,Xt,An,tn,Sn,Dn,wn,kn,yn,On){const lr=20*c,Un=40*c,Or=80*c;return this.float32[lr+0]=h,this.float32[lr+1]=g,this.int16[Un+4]=_,this.int16[Un+5]=b,this.int16[Un+6]=S,this.int16[Un+7]=L,this.int16[Un+8]=O,this.int16[Un+9]=N,this.int16[Un+10]=U,this.int16[Un+11]=j,this.int16[Un+12]=X,this.uint16[Un+13]=re,this.uint16[Un+14]=fe,this.uint16[Un+15]=ge,this.uint16[Un+16]=Ce,this.uint16[Un+17]=Te,this.uint16[Un+18]=qe,this.uint16[Un+19]=tt,this.uint16[Un+20]=et,this.uint16[Un+21]=vt,this.uint16[Un+22]=dt,this.uint16[Un+23]=Pt,this.uint16[Un+24]=Qt,this.uint16[Un+25]=Xt,this.uint16[Un+26]=An,this.uint16[Un+27]=tn,this.uint32[lr+14]=Sn,this.float32[lr+15]=Dn,this.float32[lr+16]=wn,this.float32[lr+17]=kn,this.float32[lr+18]=yn,this.uint8[Or+76]=On,c}}qm.prototype.bytesPerElement=80,Pe(qm,"StructArrayLayout2f9i15ui1ul4f1ub80");class Ym extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.float32[1*c+0]=h,c}}Ym.prototype.bytesPerElement=4,Pe(Ym,"StructArrayLayout1f4");class df extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,g,_,b)}emplace(c,h,g,_,b,S){const L=5*c;return this.float32[L+0]=h,this.float32[L+1]=g,this.float32[L+2]=_,this.float32[L+3]=b,this.float32[L+4]=S,c}}df.prototype.bytesPerElement=20,Pe(df,"StructArrayLayout5f20");class Jf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L){const O=this.length;return this.resize(O+1),this.emplace(O,c,h,g,_,b,S,L)}emplace(c,h,g,_,b,S,L,O){const N=7*c;return this.float32[N+0]=h,this.float32[N+1]=g,this.float32[N+2]=_,this.float32[N+3]=b,this.float32[N+4]=S,this.float32[N+5]=L,this.float32[N+6]=O,c}}Jf.prototype.bytesPerElement=28,Pe(Jf,"StructArrayLayout7f28");class Xm extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,g,_)}emplace(c,h,g,_,b){const S=6*c;return this.uint32[3*c+0]=h,this.uint16[S+2]=g,this.uint16[S+3]=_,this.uint16[S+4]=b,c}}Xm.prototype.bytesPerElement=12,Pe(Xm,"StructArrayLayout1ul3ui12");class R0 extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint16[1*c+0]=h,c}}R0.prototype.bytesPerElement=2,Pe(R0,"StructArrayLayout1ui2");class rA extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,c,h,g)}emplace(c,h,g,_){const b=3*c;return this.float32[b+0]=h,this.float32[b+1]=g,this.float32[b+2]=_,c}}rA.prototype.bytesPerElement=12,Pe(rA,"StructArrayLayout3f12");class _g extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h){const g=this.length;return this.resize(g+1),this.emplace(g,c,h)}emplace(c,h,g){const _=2*c;return this.float32[_+0]=h,this.float32[_+1]=g,c}}_g.prototype.bytesPerElement=8,Pe(_g,"StructArrayLayout2f8");class Z_ extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce){const Te=this.length;return this.resize(Te+1),this.emplace(Te,c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce)}emplace(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te){const qe=16*c;return this.float32[qe+0]=h,this.float32[qe+1]=g,this.float32[qe+2]=_,this.float32[qe+3]=b,this.float32[qe+4]=S,this.float32[qe+5]=L,this.float32[qe+6]=O,this.float32[qe+7]=N,this.float32[qe+8]=U,this.float32[qe+9]=j,this.float32[qe+10]=X,this.float32[qe+11]=re,this.float32[qe+12]=fe,this.float32[qe+13]=ge,this.float32[qe+14]=Ce,this.float32[qe+15]=Te,c}}Z_.prototype.bytesPerElement=64,Pe(Z_,"StructArrayLayout16f64");class ff extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,g,_,b,S,L){const O=this.length;return this.resize(O+1),this.emplace(O,c,h,g,_,b,S,L)}emplace(c,h,g,_,b,S,L,O){const N=10*c,U=5*c;return this.uint16[N+0]=h,this.uint16[N+1]=g,this.uint16[N+2]=_,this.uint16[N+3]=b,this.float32[U+2]=S,this.float32[U+3]=L,this.float32[U+4]=O,c}}ff.prototype.bytesPerElement=20,Pe(ff,"StructArrayLayout4ui3f20");class Zm extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint8[1*c+0]=h,c}}Zm.prototype.bytesPerElement=1,Pe(Zm,"StructArrayLayout1ub1");class Jm extends Jp{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Jm.prototype.size=40;class ad extends X_{get(c){return new Jm(this,c)}}Pe(ad,"CollisionBoxArray");class pf extends Jp{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(c){this._structArray.uint8[this._pos1+49]=c}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(c){this._structArray.uint8[this._pos1+50]=c}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(c){this._structArray.uint32[this._pos4+13]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(c){this._structArray.uint8[this._pos1+58]=c}}pf.prototype.size=60;class Af extends nA{get(c){return new pf(this,c)}}Pe(Af,"PlacedSymbolArray");class ev extends Jp{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(c){this._structArray.uint32[this._pos4+14]=c}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(c){this._structArray.float32[this._pos4+18]=c}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}ev.prototype.size=80;class P0 extends qm{get(c){return new ev(this,c)}}Pe(P0,"SymbolInstanceArray");class J_ extends Ym{getoffsetX(c){return this.float32[1*c+0]}}Pe(J_,"GlyphOffsetArray");class tv extends Ru{getx(c){return this.int16[2*c+0]}gety(c){return this.int16[2*c+1]}}Pe(tv,"SymbolLineVertexArray");class F0 extends Jp{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}F0.prototype.size=12;class O0 extends Xm{get(c){return new F0(this,c)}}Pe(O0,"FeatureIndexArray");class e1 extends Bh{geta_centroid_pos0(c){return this.uint16[2*c+0]}geta_centroid_pos1(c){return this.uint16[2*c+1]}}Pe(e1,"FillExtrusionCentroidArray");const ZN=Ks([{name:"a_pos",components:2,type:"Int16"}],4),zM=Ks([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ea{constructor(c=[]){this.segments=c}_prepareSegment(c,h,g,_){let b=this.segments[this.segments.length-1];return c>Ea.MAX_VERTEX_ARRAY_LENGTH&&Ye(`Max vertices per segment is ${Ea.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!b||b.vertexLength+c>Ea.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==_)&&(b={vertexOffset:h,primitiveOffset:g,vertexLength:0,primitiveLength:0},_!==void 0&&(b.sortKey=_),this.segments.push(b)),b}prepareSegment(c,h,g,_){return this._prepareSegment(c,h.length,g.length,_)}get(){return this.segments}destroy(){for(const c of this.segments)for(const h in c.vaos)c.vaos[h].destroy()}static simpleSegment(c,h,g,_){return new Ea([{vertexOffset:c,primitiveOffset:h,vertexLength:g,primitiveLength:_,vaos:{},sortKey:0}])}}function JE(u,c){return 256*(u=pe(Math.floor(u),0,255))+pe(Math.floor(c),0,255)}Ea.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pe(Ea,"SegmentVector");const $M=Ks([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),VM=Ks([{name:"a_dash",components:4,type:"Uint16"}]);var t1={exports:{}},ww={exports:{}};(function(u){u.exports=function(c,h){var g,_,b,S,L,O,N,U;for(_=c.length-(g=3&c.length),b=h,L=3432918353,O=461845907,U=0;U<_;)N=255&c.charCodeAt(U)|(255&c.charCodeAt(++U))<<8|(255&c.charCodeAt(++U))<<16|(255&c.charCodeAt(++U))<<24,++U,b=27492+(65535&(S=5*(65535&(b=(b^=N=(65535&(N=(N=(65535&N)*L+(((N>>>16)*L&65535)<<16)&4294967295)<<15|N>>>17))*O+(((N>>>16)*O&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(N=0,g){case 3:N^=(255&c.charCodeAt(U+2))<<16;case 2:N^=(255&c.charCodeAt(U+1))<<8;case 1:b^=N=(65535&(N=(N=(65535&(N^=255&c.charCodeAt(U)))*L+(((N>>>16)*L&65535)<<16)&4294967295)<<15|N>>>17))*O+(((N>>>16)*O&65535)<<16)&4294967295}return b^=c.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}})(ww);var eS=ww.exports,HM={exports:{}};(function(u){u.exports=function(c,h){for(var g,_=c.length,b=h^_,S=0;_>=4;)g=1540483477*(65535&(g=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(g>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),_-=4,++S;switch(_){case 3:b^=(255&c.charCodeAt(S+2))<<16;case 2:b^=(255&c.charCodeAt(S+1))<<8;case 1:b=1540483477*(65535&(b^=255&c.charCodeAt(S)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}})(HM);var GM=eS,QM=HM.exports;t1.exports=GM,t1.exports.murmur3=GM,t1.exports.murmur2=QM;var tS=F(t1.exports);class n1{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(c,h,g,_){this.ids.push(jM(c)),this.positions.push(h,g,_)}eachPosition(c,h){const g=jM(c);let _=0,b=this.ids.length-1;for(;_<b;){const S=_+b>>1;this.ids[S]>=g?b=S:_=S+1}for(;this.ids[_]===g;)h(this.positions[3*_],this.positions[3*_+1],this.positions[3*_+2]),_++}static serialize(c,h){const g=new Float64Array(c.ids),_=new Uint32Array(c.positions);return nS(g,_,0,g.length-1),h&&(h.add(g.buffer),h.add(_.buffer)),{ids:g,positions:_}}static deserialize(c){const h=new n1;let g;h.ids=c.ids,h.positions=c.positions;for(const _ of h.ids)_!==g&&h.uniqueIds.push(_),g=_;return h.indexed=!0,h}}function jM(u){const c=+u;return!isNaN(c)&&Number.MIN_SAFE_INTEGER<=c&&c<=Number.MAX_SAFE_INTEGER?c:tS(String(u))}function nS(u,c,h,g){for(;h<g;){const _=u[h+g>>1];let b=h-1,S=g+1;for(;;){do b++;while(u[b]<_);do S--;while(u[S]>_);if(b>=S)break;xw(u,b,S),xw(c,3*b,3*S),xw(c,3*b+1,3*S+1),xw(c,3*b+2,3*S+2)}S-h<g-S?(nS(u,c,h,S),h=S+1):(nS(u,c,S+1,g),g=S)}}function xw(u,c,h){const g=u[c];u[c]=u[h],u[h]=g}Pe(n1,"FeaturePositionMap");class iA{constructor(c){this.gl=c.gl,this.initialized=!1}fetchUniformLocation(c,h){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(c,h),this.initialized=!0),!!this.location}}class Cw extends iA{constructor(c){super(c),this.current=0}set(c,h,g){this.fetchUniformLocation(c,h)&&this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))}}class pu extends iA{constructor(c){super(c),this.current=0}set(c,h,g){this.fetchUniformLocation(c,h)&&this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))}}class bg extends iA{constructor(c){super(c),this.current=[0,0]}set(c,h,g){this.fetchUniformLocation(c,h)&&(g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1])))}}class KM extends iA{constructor(c){super(c),this.current=[0,0,0]}set(c,h,g){this.fetchUniformLocation(c,h)&&(g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2])))}}class w extends iA{constructor(c){super(c),this.current=[0,0,0,0]}set(c,h,g){this.fetchUniformLocation(c,h)&&(g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3])))}}class f extends iA{constructor(c){super(c),this.current=po.transparent}set(c,h,g){this.fetchUniformLocation(c,h)&&(g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a)))}}const m=new Float32Array(16);class E extends iA{constructor(c){super(c),this.current=m}set(c,h,g){if(this.fetchUniformLocation(c,h)){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(let _=1;_<16;_++)if(g[_]!==this.current[_]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}}}}const B=new Float32Array(9),R=new Float32Array(4);class k extends iA{constructor(c){super(c),this.current=R}set(c,h,g){if(this.fetchUniformLocation(c,h)){for(let _=0;_<4;_++)if(g[_]!==this.current[_]){this.current=g,this.gl.uniformMatrix2fv(this.location,!1,g);break}}}}function z(u){return[JE(255*u.r,255*u.g),JE(255*u.b,255*u.a)]}class K{constructor(c,h,g){this.value=c,this.uniformNames=h.map(_=>`u_${_}`),this.type=g}setUniform(c,h,g,_,b){h.set(c,b,_.constantOr(this.value))}getBinding(c,h){return this.type==="color"?new f(c):new pu(c)}}class J{constructor(c,h){this.uniformNames=h.map(g=>`u_${g}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(c){this.pixelRatio=c.pixelRatio||1,this.pattern=c.tl.concat(c.br)}setUniform(c,h,g,_,b){const S=b==="u_pattern"||b==="u_dash"?this.pattern:b==="u_pixel_ratio"?this.pixelRatio:null;S&&h.set(c,b,S)}getBinding(c,h){return h==="u_pattern"||h==="u_dash"?new w(c):new pu(c)}}class ne{constructor(c,h,g,_){this.expression=c,this.type=g,this.maxValue=0,this.paintVertexAttributes=h.map(b=>({name:`a_${b}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(c,h,g,_,b,S,L){const O=this.paintVertexArray.length,N=this.expression.evaluate(new $i(0,{brightness:S}),h,{},b,_,L);this.paintVertexArray.resize(c),this._setPaintValue(O,c,N)}updatePaintArray(c,h,g,_,b,S,L){const O=this.expression.evaluate({zoom:0,brightness:L},g,_,void 0,b);this._setPaintValue(c,h,O)}_setPaintValue(c,h,g){if(this.type==="color"){const _=z(g);for(let b=c;b<h;b++)this.paintVertexArray.emplace(b,_[0],_[1])}else{for(let _=c;_<h;_++)this.paintVertexArray.emplace(_,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class he{constructor(c,h,g,_,b,S){this.expression=c,this.uniformNames=h.map(L=>`u_${L}_t`),this.type=g,this.useIntegerZoom=_,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=h.map(L=>({name:`a_${L}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new S}populatePaintArray(c,h,g,_,b,S,L){const O=this.expression.evaluate(new $i(this.zoom,{brightness:S}),h,{},b,_,L),N=this.expression.evaluate(new $i(this.zoom+1,{brightness:S}),h,{},b,_,L),U=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(U,c,O,N)}updatePaintArray(c,h,g,_,b,S,L){const O=this.expression.evaluate({zoom:this.zoom,brightness:L},g,_,void 0,b),N=this.expression.evaluate({zoom:this.zoom+1,brightness:L},g,_,void 0,b);this._setPaintValue(c,h,O,N)}_setPaintValue(c,h,g,_){if(this.type==="color"){const b=z(g),S=z(_);for(let L=c;L<h;L++)this.paintVertexArray.emplace(L,b[0],b[1],S[0],S[1])}else{for(let b=c;b<h;b++)this.paintVertexArray.emplace(b,g,_);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(_))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,h,g,_,b){const S=this.useIntegerZoom?Math.floor(g.zoom):g.zoom,L=pe(this.expression.interpolationFactor(S,this.zoom,this.zoom+1),0,1);h.set(c,b,L)}getBinding(c,h){return new pu(c)}}class ye{constructor(c,h,g,_,b){this.expression=c,this.layerId=b,this.paintVertexAttributes=(g==="array"?VM:$M).members;for(let S=0;S<h.length;++S);this.paintVertexArray=new _}populatePaintArray(c,h,g){const _=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValues(_,c,h.patterns&&h.patterns[this.layerId],g)}updatePaintArray(c,h,g,_,b,S,L){this._setPaintValues(c,h,g.patterns&&g.patterns[this.layerId],S)}_setPaintValues(c,h,g,_){if(!_||!g)return;const b=_[g];if(!b)return;const{tl:S,br:L,pixelRatio:O}=b;for(let N=c;N<h;N++)this.paintVertexArray.emplace(N,S[0],S[1],L[0],L[1],O)}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class we{constructor(c,h,g=()=>!0){this.binders={},this._buffers=[];const _=[];for(const b in c.paint._values){const S=c.paint.get(b);if(!g(b)||!(S instanceof Fl&&km(S.property.specification)))continue;const L=De(b,c.type),O=S.value,N=S.property.specification.type,U=!!S.property.useIntegerZoom,j=b==="line-dasharray"||b.endsWith("pattern"),X=b==="line-dasharray"&&c.layout.get("line-cap").value.kind!=="constant";if(O.kind!=="constant"||X)if(O.kind==="source"||X||j){const re=lt(b,N,"source");this.binders[b]=j?new ye(O,L,N,re,c.id):new ne(O,L,N,re),_.push(`/a_${b}`)}else{const re=lt(b,N,"composite");this.binders[b]=new he(O,L,N,U,h,re),_.push(`/z_${b}`)}else this.binders[b]=j?new J(O.value,L):new K(O.value,L,N),_.push(`/u_${b}`)}this.cacheKey=_.sort().join("")}getMaxValue(c){const h=this.binders[c];return h instanceof ne||h instanceof he?h.maxValue:0}populatePaintArrays(c,h,g,_,b,S,L){for(const O in this.binders){const N=this.binders[O];(N instanceof ne||N instanceof he||N instanceof ye)&&N.populatePaintArray(c,h,g,_,b,S,L)}}setConstantPatternPositions(c){for(const h in this.binders){const g=this.binders[h];g instanceof J&&g.setConstantPatternPositions(c)}}updatePaintArrays(c,h,g,_,b,S,L,O){let N=!1;const U=Object.keys(c),j=U.length!==0,X=j?U:h.uniqueIds;for(const re in this.binders){const fe=this.binders[re];if((fe instanceof ne||fe instanceof he||fe instanceof ye)&&(fe.expression.isStateDependent===!0||fe.expression.isLightConstant===!1)){const ge=b.paint.get(re);fe.expression=ge.value;for(const Ce of X){const Te=c[Ce.toString()];h.eachPosition(Ce,(qe,tt,et)=>{const vt=_.feature(qe);fe.updatePaintArray(tt,et,vt,Te,S,L,O)})}if(!j)for(const Ce of g.uniqueIds){const Te=c[Ce.toString()];g.eachPosition(Ce,(qe,tt,et)=>{const vt=_.feature(qe);fe.updatePaintArray(tt,et,vt,Te,S,L,O)})}N=!0}}return N}defines(){const c=[];for(const h in this.binders){const g=this.binders[h];(g instanceof K||g instanceof J)&&c.push(...g.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return c}getBinderAttributes(){const c=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof ne||g instanceof he||g instanceof ye)for(let _=0;_<g.paintVertexAttributes.length;_++)c.push(g.paintVertexAttributes[_].name)}return c}getBinderUniforms(){const c=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof K||g instanceof J||g instanceof he)for(const _ of g.uniformNames)c.push(_)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof K||_ instanceof J||_ instanceof he)for(const b of _.uniformNames)h.push({name:b,property:g,binding:_.getBinding(c,b)})}return h}setUniforms(c,h,g,_,b){for(const{name:S,property:L,binding:O}of g)this.binders[L].setUniform(c,O,b,_.get(L),S)}updatePaintBuffers(){this._buffers=[];for(const c in this.binders){const h=this.binders[c];(h instanceof ne||h instanceof he||h instanceof ye)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(c){for(const h in this.binders){const g=this.binders[h];(g instanceof ne||g instanceof he||g instanceof ye)&&g.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const h=this.binders[c];(h instanceof ne||h instanceof he||h instanceof ye)&&h.destroy()}}}class Oe{constructor(c,h,g=()=>!0){this.programConfigurations={};for(const _ of c)this.programConfigurations[_.id]=new we(_,h,g);this.needsUpload=!1,this._featureMap=new n1,this._featureMapWithoutIds=new n1,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(c,h,g,_,b,S,L,O){for(const N in this.programConfigurations)this.programConfigurations[N].populatePaintArrays(c,h,_,b,S,L,O);h.id!==void 0?this._featureMap.add(h.id,g,this._bufferOffset,c):(this._featureMapWithoutIds.add(this._idlessCounter,g,this._bufferOffset,c),this._idlessCounter+=1),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,h,g,_,b,S){for(const L of g)this.needsUpload=this.programConfigurations[L.id].updatePaintArrays(c,this._featureMap,this._featureMapWithoutIds,h,L,_,b,S||0)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}const Fe={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function De(u,c){return Fe[u]||[u.replace(`${c}-`,"").replace(/-/g,"_")]}const Ee={"line-pattern":{source:Ih,composite:Ih},"fill-pattern":{source:Ih,composite:Ih},"fill-extrusion-pattern":{source:Ih,composite:Ih},"line-dasharray":{source:eA,composite:eA}},Ke={color:{source:_g,composite:hf},number:{source:Ym,composite:_g}};function lt(u,c,h){const g=Ee[u];return g&&g[h]||Ke[c][h]}Pe(K,"ConstantBinder"),Pe(J,"PatternConstantBinder"),Pe(ne,"SourceExpressionBinder"),Pe(ye,"PatternCompositeBinder"),Pe(he,"CompositeExpressionBinder"),Pe(we,"ProgramConfiguration",{omit:["_buffers"]}),Pe(Oe,"ProgramConfigurationSet");const Ze=zn/Math.PI/2,ct=5,Ve=6,ut=16383,Ct=64,Lt=[Ct,32,16],$t=-Ze,pn=Ze;function Kt(u,c,h,g=Ze){return h=Y(h),[u*Math.sin(h)*g,-c*g,u*Math.cos(h)*g]}function Cn(u,c,h){return Kt(Math.cos(Y(u)),Math.sin(Y(u)),c,h)}const bn=63710088e-1,$n=2*Math.PI*bn;class Yt{constructor(c,h){if(isNaN(c)||isNaN(h))throw new Error(`Invalid LngLat object: (${c}, ${h})`);if(this.lng=+c,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yt(me(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const h=Math.PI/180,g=this.lat*h,_=c.lat*h,b=Math.sin(g)*Math.sin(_)+Math.cos(g)*Math.cos(_)*Math.cos((c.lng-this.lng)*h);return bn*Math.acos(Math.min(b,1))}toBounds(c=0){const h=360*c/40075017,g=h/Math.cos(Math.PI/180*this.lat);return new vn({lng:this.lng-g,lat:this.lat-h},{lng:this.lng+g,lat:this.lat+h})}toEcef(c){return Cn(this.lat,this.lng,Ze+c*Ze/bn)}static convert(c){if(c instanceof Yt)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Yt(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Yt(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class vn{constructor(c,h){c&&(h?this.setSouthWest(c).setNorthEast(h):c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1]))}setNorthEast(c){return this._ne=c instanceof Yt?new Yt(c.lng,c.lat):Yt.convert(c),this}setSouthWest(c){return this._sw=c instanceof Yt?new Yt(c.lng,c.lat):Yt.convert(c),this}extend(c){const h=this._sw,g=this._ne;let _,b;if(c instanceof Yt)_=c,b=c;else{if(!(c instanceof vn))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(vn.convert(c)):this.extend(Yt.convert(c)):typeof c=="object"&&c!==null&&c.hasOwnProperty("lat")&&(c.hasOwnProperty("lon")||c.hasOwnProperty("lng"))?this.extend(Yt.convert(c)):this;if(_=c._sw,b=c._ne,!_||!b)return this}return h||g?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),g.lng=Math.max(b.lng,g.lng),g.lat=Math.max(b.lat,g.lat)):(this._sw=new Yt(_.lng,_.lat),this._ne=new Yt(b.lng,b.lat)),this}getCenter(){return new Yt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Yt(this.getWest(),this.getNorth())}getSouthEast(){return new Yt(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:h,lat:g}=Yt.convert(c);let _=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&_}static convert(c){return!c||c instanceof vn?c:new vn(c)}}var Nt={};(function(u,c){(function(h){function g(b,S,L){var O=_(256*b,256*(S=Math.pow(2,L)-S-1),L),N=_(256*(b+1),256*(S+1),L);return O[0]+","+O[1]+","+N[0]+","+N[1]}function _(b,S,L){var O=2*Math.PI*6378137/256/Math.pow(2,L);return[b*O-2*Math.PI*6378137/2,S*O-2*Math.PI*6378137/2]}h.getURL=function(b,S,L,O,N,U){return U=U||{},b+"?"+["bbox="+g(L,O,N),"format="+(U.format||"image/png"),"service="+(U.service||"WMS"),"version="+(U.version||"1.1.1"),"request="+(U.request||"GetMap"),"srs="+(U.srs||"EPSG:3857"),"width="+(U.width||256),"height="+(U.height||256),"layers="+S].join("&")},h.getTileBBox=g,h.getMercCoords=_,Object.defineProperty(h,"__esModule",{value:!0})})(c)})(0,Nt);var ln=Nt;class jn{constructor(c,h,g){this.z=c,this.x=h,this.y=g,this.key=pr(0,c,c,h,g)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,h){const g=ln.getTileBBox(this.x,this.y,this.z),_=function(b,S,L){let O,N="";for(let U=b;U>0;U--)O=1<<U-1,N+=(S&O?1:0)+(L&O?2:0);return N}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",g)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sr{constructor(c,h){this.wrap=c,this.canonical=h,this.key=pr(c,h.z,h.z,h.x,h.y)}}class tr{constructor(c,h,g,_,b){this.overscaledZ=c,this.wrap=h,this.canonical=new jn(g,+_,+b),this.key=h===0&&c===g?this.canonical.key:pr(h,c,g,_,b)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){const h=this.canonical.z-c;return c>this.canonical.z?new tr(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new tr(c,this.wrap,c,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(c,h=!0){if(this.overscaledZ===c&&h)return this.key;if(c>this.canonical.z)return pr(this.wrap*+h,c,this.canonical.z,this.canonical.x,this.canonical.y);{const g=this.canonical.z-c;return pr(this.wrap*+h,c,c,this.canonical.x>>g,this.canonical.y>>g)}}isChildOf(c){if(c.wrap!==this.wrap)return!1;const h=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.z<this.canonical.z&&c.canonical.x===this.canonical.x>>h&&c.canonical.y===this.canonical.y>>h}children(c){if(this.overscaledZ>=c)return[new tr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,g=2*this.canonical.x,_=2*this.canonical.y;return[new tr(h,this.wrap,h,g,_),new tr(h,this.wrap,h,g+1,_),new tr(h,this.wrap,h,g,_+1),new tr(h,this.wrap,h,g+1,_+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new tr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new tr(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sr(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function pr(u,c,h,g,_){const b=1<<Math.min(h,22);let S=b*(_%b)+g%b;return u&&h<22&&(S+=b*b*((u<0?-2*u-1:2*u)%(1<<2*(22-h)))),16*(32*S+h)+(c-h)}const kr=[u=>{let c=u.canonical.x-1,h=u.wrap;return c<0&&(c=(1<<u.canonical.z)-1,h--),new tr(u.overscaledZ,h,u.canonical.z,c,u.canonical.y)},u=>{let c=u.canonical.x+1,h=u.wrap;return c===1<<u.canonical.z&&(c=0,h++),new tr(u.overscaledZ,h,u.canonical.z,c,u.canonical.y)},u=>new tr(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,(u.canonical.y===0?1<<u.canonical.z:u.canonical.y)-1),u=>new tr(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y===(1<<u.canonical.z)-1?0:u.canonical.y+1)];Pe(jn,"CanonicalTileID"),Pe(tr,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Zr=0,jr=25.5;function Wr(u){return $n*Math.cos(u*Math.PI/180)}function Vi(u){return(180+u)/360}function vi(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Li(u,c){return u/Wr(c)}function Bi(u){return 360*u-180}function ms(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function Co(u,c){return u*Wr(ms(c))}const os=85.051129;function ia(u){return Math.cos(Y(pe(u,-os,os)))}function as(u,c){const h=pe(c,Zr,jr),g=Math.pow(2,h);return ia(u)*$n/(512*g)}function Os(u){return 1/Math.cos(u*Math.PI/180)}function ls(u,c=0){const h=Math.exp(Math.PI*(1-(u.y+c/zn)/(1<<u.z)*2));return 80150034*h/(h*h+1)/zn/(1<<u.z)}class Ls{constructor(c,h,g=0){this.x=+c,this.y=+h,this.z=+g}static fromLngLat(c,h=0){const g=Yt.convert(c);return new Ls(Vi(g.lng),vi(g.lat),Li(h,g.lat))}toLngLat(){return new Yt(Bi(this.x),ms(this.y))}toAltitude(){return Co(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$n*Os(ms(this.y))}}function Lo(u,c,h,g,_,b,S,L,O){const N=(c+g)/2,U=(h+_)/2,j=new W(N,U);L(j),function(X,re,fe,ge,Ce,Te){const qe=fe-Ce,tt=ge-Te;return Math.abs((ge-re)*qe-(fe-X)*tt)/Math.hypot(qe,tt)}(j.x,j.y,b.x,b.y,S.x,S.y)>=O?(Lo(u,c,h,N,U,b,j,L,O),Lo(u,N,U,g,_,j,S,L,O)):u.push(S)}function $s(u,c,h){let g=u[0],_=g.x,b=g.y;c(g);const S=[g];for(let L=1;L<u.length;L++){const O=u[L],{x:N,y:U}=O;c(O),Lo(S,_,b,N,U,g,O,c,h),_=N,b=U,g=O}return S}function Nl(u,c,h,g){if(g(c,h)){const _=c.add(h)._mult(.5);Nl(u,c,_,g),Nl(u,_,h,g)}else u.push(h)}function Mc(u,c){let h=u[0];const g=[h];for(let _=1;_<u.length;_++){const b=u[_];Nl(g,h,b,c),h=b}return g}const eh=Math.pow(2,14)-1,ep=-eh-1;function th(u,c){const h=Math.round(u.x*c),g=Math.round(u.y*c);return u.x=pe(h,ep,eh),u.y=pe(g,ep,eh),(h<u.x||h>u.x+1||g<u.y||g>u.y+1)&&Ye("Geometry exceeds allowed extent, reduce your vector tile buffer size"),u}function kl(u,c,h){const g=u.loadGeometry(),_=u.extent,b=zn/_;if(c&&h&&h.projection.isReprojectedInTileSpace){const S=1<<c.z,{scale:L,x:O,y:N,projection:U}=h,j=X=>{const re=Bi((c.x+X.x/_)/S),fe=ms((c.y+X.y/_)/S),ge=U.project(re,fe);X.x=(ge.x*L-O)*_,X.y=(ge.y*L-N)*_};for(let X=0;X<g.length;X++)if(u.type!==1)g[X]=$s(g[X],j,1);else{const re=[];for(const fe of g[X])fe.x<0||fe.x>=_||fe.y<0||fe.y>=_||(j(fe),re.push(fe));g[X]=re}}for(const S of g)for(const L of S)th(L,b);return g}function Al(u,c){return{type:u.type,id:u.id,properties:u.properties,geometry:c?kl(u):[]}}function Au(u,c,h,g,_){u.emplaceBack(2*c+(g+1)/2,2*h+(_+1)/2)}function Pu(u,c,h){u.emplaceBack(c.x,c.y,c.z,h[0]*16384,h[1]*16384,h[2]*16384)}class nh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=c.index,this.hasPattern=!1,this.projection=c.projection,this.layoutVertexArray=new Ru,this.indexArray=new Wo,this.segments=new Ea,this.programConfigurations=new Oe(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,g,_){const b=this.layers[0],S=[];let L=null;b.type==="circle"&&(L=b.layout.get("circle-sort-key"));for(const{feature:N,id:U,index:j,sourceLayerIndex:X}of c){const re=this.layers[0]._featureFilter.needGeometry,fe=Al(N,re);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),fe,g))continue;const ge=L?L.evaluate(fe,{},g):void 0,Ce={id:U,properties:N.properties,type:N.type,sourceLayerIndex:X,index:j,geometry:re?fe.geometry:kl(N,g,_),patterns:{},sortKey:ge};S.push(Ce)}L&&S.sort((N,U)=>N.sortKey-U.sortKey);let O=null;_.projection.name==="globe"&&(this.globeExtVertexArray=new Qm,O=_.projection);for(const N of S){const{geometry:U,index:j,sourceLayerIndex:X}=N,re=c[j].feature;this.addFeature(N,U,j,h.availableImages,g,O,h.brightness),h.featureIndex.insert(re,U,j,X,this.index)}}update(c,h,g,_,b){const S=Object.keys(c).length!==0;S&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(c,h,S?this.stateDependentLayers:this.layers,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,ZN.members),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=c.createVertexBuffer(this.globeExtVertexArray,zM.members))),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(c,h,g,_,b,S,L){for(const O of h)for(const N of O){const U=N.x,j=N.y;if(U<0||U>=zn||j<0||j>=zn)continue;if(S){const fe=S.projectTilePoint(U,j,b),ge=S.upVector(b,U,j),Ce=this.globeExtVertexArray;Pu(Ce,fe,ge),Pu(Ce,fe,ge),Pu(Ce,fe,ge),Pu(Ce,fe,ge)}const X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),re=X.vertexLength;Au(this.layoutVertexArray,U,j,-1,-1),Au(this.layoutVertexArray,U,j,1,-1),Au(this.layoutVertexArray,U,j,1,1),Au(this.layoutVertexArray,U,j,-1,1),this.indexArray.emplaceBack(re,re+1,re+2),this.indexArray.emplaceBack(re,re+2,re+3),X.vertexLength+=4,X.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,{},_,b,L)}}function tp(u,c){for(let h=0;h<u.length;h++)if(sA(c,u[h]))return!0;for(let h=0;h<c.length;h++)if(sA(u,c[h]))return!0;return!!i1(u,c)}function wg(u,c,h){return!!sA(u,c)||!!s1(c,u,h)}function nv(u,c){if(u.length===1)return Ew(c,u[0]);for(let h=0;h<c.length;h++){const g=c[h];for(let _=0;_<g.length;_++)if(sA(u,g[_]))return!0}for(let h=0;h<u.length;h++)if(Ew(c,u[h]))return!0;for(let h=0;h<c.length;h++)if(i1(u,c[h]))return!0;return!1}function r1(u,c,h){if(u.length>1){if(i1(u,c))return!0;for(let g=0;g<c.length;g++)if(s1(c[g],u,h))return!0}for(let g=0;g<u.length;g++)if(s1(u[g],c,h))return!0;return!1}function i1(u,c){if(u.length===0||c.length===0)return!1;for(let h=0;h<u.length-1;h++){const g=u[h],_=u[h+1];for(let b=0;b<c.length-1;b++)if(rS(g,_,c[b],c[b+1]))return!0}return!1}function rS(u,c,h,g){return at(u,h,g)!==at(c,h,g)&&at(u,c,h)!==at(u,c,g)}function s1(u,c,h){const g=h*h;if(c.length===1)return u.distSqr(c[0])<g;for(let _=1;_<c.length;_++)if(N0(u,c[_-1],c[_])<g)return!0;return!1}function N0(u,c,h){const g=c.distSqr(h);if(g===0)return u.distSqr(c);const _=((u.x-c.x)*(h.x-c.x)+(u.y-c.y)*(h.y-c.y))/g;return u.distSqr(_<0?c:_>1?h:h.sub(c)._mult(_)._add(c))}function Ew(u,c){let h,g,_,b=!1;for(let S=0;S<u.length;S++){h=u[S];for(let L=0,O=h.length-1;L<h.length;O=L++)g=h[L],_=h[O],g.y>c.y!=_.y>c.y&&c.x<(_.x-g.x)*(c.y-g.y)/(_.y-g.y)+g.x&&(b=!b)}return b}function sA(u,c){let h=!1;for(let g=0,_=u.length-1;g<u.length;_=g++){const b=u[g],S=u[_];b.y>c.y!=S.y>c.y&&c.x<(S.x-b.x)*(c.y-b.y)/(S.y-b.y)+b.x&&(h=!h)}return h}function ij(u,c,h,g,_){for(const S of u)if(c<=S.x&&h<=S.y&&g>=S.x&&_>=S.y)return!0;const b=[new W(c,h),new W(c,_),new W(g,_),new W(g,h)];if(u.length>2){for(const S of b)if(sA(u,S))return!0}for(let S=0;S<u.length-1;S++)if(Bye(u[S],u[S+1],b))return!0;return!1}function Bye(u,c,h){const g=h[0],_=h[2];if(u.x<g.x&&c.x<g.x||u.x>_.x&&c.x>_.x||u.y<g.y&&c.y<g.y||u.y>_.y&&c.y>_.y)return!1;const b=at(u,c,h[0]);return b!==at(u,c,h[1])||b!==at(u,c,h[2])||b!==at(u,c,h[3])}function Sw(u,c,h,g,_,b){let S=c.y-u.y,L=u.x-c.x;if(b=b||0){const O=S*S+L*L;if(O===0)return!0;const N=Math.sqrt(O);S/=N,L/=N}return!((h.x-u.x)*S+(h.y-u.y)*L-b<0||(g.x-u.x)*S+(g.y-u.y)*L-b<0||(_.x-u.x)*S+(_.y-u.y)*L-b<0)}function JN(u,c,h,g,_,b,S){return!(Sw(u,c,g,_,b,S)||Sw(c,h,g,_,b,S)||Sw(h,u,g,_,b,S)||Sw(g,_,u,c,h,S)||Sw(_,b,u,c,h,S)||Sw(b,g,u,c,h,S))}function Tw(u,c,h){const g=c.paint.get(u).value;return g.kind==="constant"?g.value:h.programConfigurations.get(c.id).getMaxValue(u)}function WM(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function sj(u,c,h,g,_){if(!c[0]&&!c[1])return u;const b=W.convert(c)._mult(_);h==="viewport"&&b._rotate(-g);const S=[];for(let L=0;L<u.length;L++)S.push(u[L].sub(b));return S}function oj(u,c,h,g){const _=W.convert(u)._mult(g);return c==="viewport"&&_._rotate(-h),_}Pe(nh,"CircleBucket",{omit:["layers"]});const Mye=new Js({"circle-sort-key":new Mr(rn.layout_circle["circle-sort-key"]),visibility:new Gn(rn.layout_circle.visibility)});var Lye={paint:new Js({"circle-radius":new Mr(rn.paint_circle["circle-radius"]),"circle-color":new Mr(rn.paint_circle["circle-color"]),"circle-blur":new Mr(rn.paint_circle["circle-blur"]),"circle-opacity":new Mr(rn.paint_circle["circle-opacity"]),"circle-translate":new Gn(rn.paint_circle["circle-translate"]),"circle-translate-anchor":new Gn(rn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gn(rn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gn(rn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mr(rn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mr(rn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mr(rn.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Gn(rn.paint_circle["circle-emissive-strength"])}),layout:Mye},Xl={},Zl={};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.setMatrixArrayType=function(u){Zl.ARRAY_TYPE=lj=u},Zl.toRadian=function(u){return u*Pye},Zl.equals=function(u,c){return Math.abs(u-c)<=aj*Math.max(1,Math.abs(u),Math.abs(c))},Zl.RANDOM=Zl.ARRAY_TYPE=Zl.EPSILON=void 0;var aj=1e-6;Zl.EPSILON=aj;var lj=typeof Float32Array<"u"?Float32Array:Array;Zl.ARRAY_TYPE=lj;var Rye=Math.random;Zl.RANDOM=Rye;var Pye=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var u=0,c=arguments.length;c--;)u+=arguments[c]*arguments[c];return Math.sqrt(u)});var sa={};function ek(u){return ek=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ek(u)}Object.defineProperty(sa,"__esModule",{value:!0}),sa.create=function(){var u=new k0.ARRAY_TYPE(4);return k0.ARRAY_TYPE!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},sa.clone=function(u){var c=new k0.ARRAY_TYPE(4);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c},sa.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u},sa.identity=function(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u},sa.fromValues=function(u,c,h,g){var _=new k0.ARRAY_TYPE(4);return _[0]=u,_[1]=c,_[2]=h,_[3]=g,_},sa.set=function(u,c,h,g,_){return u[0]=c,u[1]=h,u[2]=g,u[3]=_,u},sa.transpose=function(u,c){if(u===c){var h=c[1];u[1]=c[2],u[2]=h}else u[0]=c[0],u[1]=c[2],u[2]=c[1],u[3]=c[3];return u},sa.invert=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=h*b-_*g;return S?(u[0]=b*(S=1/S),u[1]=-g*S,u[2]=-_*S,u[3]=h*S,u):null},sa.adjoint=function(u,c){var h=c[0];return u[0]=c[3],u[1]=-c[1],u[2]=-c[2],u[3]=h,u},sa.determinant=function(u){return u[0]*u[3]-u[2]*u[1]},sa.multiply=uj,sa.rotate=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=Math.sin(h),O=Math.cos(h);return u[0]=g*O+b*L,u[1]=_*O+S*L,u[2]=g*-L+b*O,u[3]=_*-L+S*O,u},sa.scale=function(u,c,h){var g=c[1],_=c[2],b=c[3],S=h[0],L=h[1];return u[0]=c[0]*S,u[1]=g*S,u[2]=_*L,u[3]=b*L,u},sa.fromRotation=function(u,c){var h=Math.sin(c),g=Math.cos(c);return u[0]=g,u[1]=h,u[2]=-h,u[3]=g,u},sa.fromScaling=function(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=c[1],u},sa.str=function(u){return"mat2("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+")"},sa.frob=function(u){return Math.hypot(u[0],u[1],u[2],u[3])},sa.LDU=function(u,c,h,g){return u[2]=g[2]/g[0],h[0]=g[0],h[1]=g[1],h[3]=g[3]-u[2]*h[1],[u,c,h]},sa.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u[3]=c[3]+h[3],u},sa.subtract=hj,sa.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]},sa.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=u[3],S=c[0],L=c[1],O=c[2],N=c[3];return Math.abs(h-S)<=k0.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(g-L)<=k0.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(_-O)<=k0.EPSILON*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(b-N)<=k0.EPSILON*Math.max(1,Math.abs(b),Math.abs(N))},sa.multiplyScalar=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u},sa.multiplyScalarAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u[2]=c[2]+h[2]*g,u[3]=c[3]+h[3]*g,u},sa.sub=sa.mul=void 0;var k0=function(u,c){if(u&&u.__esModule)return u;if(u===null||ek(u)!=="object"&&typeof u!="function")return{default:u};var h=cj(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function cj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(cj=function(g){return g?h:c})(u)}function uj(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=h[0],O=h[1],N=h[2],U=h[3];return u[0]=g*L+b*O,u[1]=_*L+S*O,u[2]=g*N+b*U,u[3]=_*N+S*U,u}function hj(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u[3]=c[3]-h[3],u}sa.mul=uj,sa.sub=hj;var Aa={};function tk(u){return tk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},tk(u)}Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.create=function(){var u=new xg.ARRAY_TYPE(6);return xg.ARRAY_TYPE!=Float32Array&&(u[1]=0,u[2]=0,u[4]=0,u[5]=0),u[0]=1,u[3]=1,u},Aa.clone=function(u){var c=new xg.ARRAY_TYPE(6);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c},Aa.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u},Aa.identity=function(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,u},Aa.fromValues=function(u,c,h,g,_,b){var S=new xg.ARRAY_TYPE(6);return S[0]=u,S[1]=c,S[2]=h,S[3]=g,S[4]=_,S[5]=b,S},Aa.set=function(u,c,h,g,_,b,S){return u[0]=c,u[1]=h,u[2]=g,u[3]=_,u[4]=b,u[5]=S,u},Aa.invert=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=h*b-g*_;return O?(u[0]=b*(O=1/O),u[1]=-g*O,u[2]=-_*O,u[3]=h*O,u[4]=(_*L-b*S)*O,u[5]=(g*S-h*L)*O,u):null},Aa.determinant=function(u){return u[0]*u[3]-u[1]*u[2]},Aa.multiply=fj,Aa.rotate=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=Math.sin(h),U=Math.cos(h);return u[0]=g*U+b*N,u[1]=_*U+S*N,u[2]=g*-N+b*U,u[3]=_*-N+S*U,u[4]=L,u[5]=O,u},Aa.scale=function(u,c,h){var g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=h[0],N=h[1];return u[0]=c[0]*O,u[1]=g*O,u[2]=_*N,u[3]=b*N,u[4]=S,u[5]=L,u},Aa.translate=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=h[0],U=h[1];return u[0]=g,u[1]=_,u[2]=b,u[3]=S,u[4]=g*N+b*U+L,u[5]=_*N+S*U+O,u},Aa.fromRotation=function(u,c){var h=Math.sin(c),g=Math.cos(c);return u[0]=g,u[1]=h,u[2]=-h,u[3]=g,u[4]=0,u[5]=0,u},Aa.fromScaling=function(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=c[1],u[4]=0,u[5]=0,u},Aa.fromTranslation=function(u,c){return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=c[0],u[5]=c[1],u},Aa.str=function(u){return"mat2d("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+")"},Aa.frob=function(u){return Math.hypot(u[0],u[1],u[2],u[3],u[4],u[5],1)},Aa.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u[3]=c[3]+h[3],u[4]=c[4]+h[4],u[5]=c[5]+h[5],u},Aa.subtract=pj,Aa.multiplyScalar=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u[4]=c[4]*h,u[5]=c[5]*h,u},Aa.multiplyScalarAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u[2]=c[2]+h[2]*g,u[3]=c[3]+h[3]*g,u[4]=c[4]+h[4]*g,u[5]=c[5]+h[5]*g,u},Aa.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]},Aa.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=u[3],S=u[4],L=u[5],O=c[0],N=c[1],U=c[2],j=c[3],X=c[4],re=c[5];return Math.abs(h-O)<=xg.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(g-N)<=xg.EPSILON*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(_-U)<=xg.EPSILON*Math.max(1,Math.abs(_),Math.abs(U))&&Math.abs(b-j)<=xg.EPSILON*Math.max(1,Math.abs(b),Math.abs(j))&&Math.abs(S-X)<=xg.EPSILON*Math.max(1,Math.abs(S),Math.abs(X))&&Math.abs(L-re)<=xg.EPSILON*Math.max(1,Math.abs(L),Math.abs(re))},Aa.sub=Aa.mul=void 0;var xg=function(u,c){if(u&&u.__esModule)return u;if(u===null||tk(u)!=="object"&&typeof u!="function")return{default:u};var h=dj(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function dj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(dj=function(g){return g?h:c})(u)}function fj(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=h[0],U=h[1],j=h[2],X=h[3],re=h[4],fe=h[5];return u[0]=g*N+b*U,u[1]=_*N+S*U,u[2]=g*j+b*X,u[3]=_*j+S*X,u[4]=g*re+b*fe+L,u[5]=_*re+S*fe+O,u}function pj(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u[3]=c[3]-h[3],u[4]=c[4]-h[4],u[5]=c[5]-h[5],u}Aa.mul=fj,Aa.sub=pj;var mo={};function nk(u){return nk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},nk(u)}Object.defineProperty(mo,"__esModule",{value:!0}),mo.create=function(){var u=new gf.ARRAY_TYPE(9);return gf.ARRAY_TYPE!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},mo.fromMat4=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[4],u[4]=c[5],u[5]=c[6],u[6]=c[8],u[7]=c[9],u[8]=c[10],u},mo.clone=function(u){var c=new gf.ARRAY_TYPE(9);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c},mo.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u},mo.fromValues=function(u,c,h,g,_,b,S,L,O){var N=new gf.ARRAY_TYPE(9);return N[0]=u,N[1]=c,N[2]=h,N[3]=g,N[4]=_,N[5]=b,N[6]=S,N[7]=L,N[8]=O,N},mo.set=function(u,c,h,g,_,b,S,L,O,N){return u[0]=c,u[1]=h,u[2]=g,u[3]=_,u[4]=b,u[5]=S,u[6]=L,u[7]=O,u[8]=N,u},mo.identity=function(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},mo.transpose=function(u,c){if(u===c){var h=c[1],g=c[2],_=c[5];u[1]=c[3],u[2]=c[6],u[3]=h,u[5]=c[7],u[6]=g,u[7]=_}else u[0]=c[0],u[1]=c[3],u[2]=c[6],u[3]=c[1],u[4]=c[4],u[5]=c[7],u[6]=c[2],u[7]=c[5],u[8]=c[8];return u},mo.invert=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=c[6],N=c[7],U=c[8],j=U*S-L*N,X=-U*b+L*O,re=N*b-S*O,fe=h*j+g*X+_*re;return fe?(u[0]=j*(fe=1/fe),u[1]=(-U*g+_*N)*fe,u[2]=(L*g-_*S)*fe,u[3]=X*fe,u[4]=(U*h-_*O)*fe,u[5]=(-L*h+_*b)*fe,u[6]=re*fe,u[7]=(-N*h+g*O)*fe,u[8]=(S*h-g*b)*fe,u):null},mo.adjoint=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=c[6],N=c[7],U=c[8];return u[0]=S*U-L*N,u[1]=_*N-g*U,u[2]=g*L-_*S,u[3]=L*O-b*U,u[4]=h*U-_*O,u[5]=_*b-h*L,u[6]=b*N-S*O,u[7]=g*O-h*N,u[8]=h*S-g*b,u},mo.determinant=function(u){var c=u[3],h=u[4],g=u[5],_=u[6],b=u[7],S=u[8];return u[0]*(S*h-g*b)+u[1]*(-S*c+g*_)+u[2]*(b*c-h*_)},mo.multiply=gj,mo.translate=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=c[8],X=h[0],re=h[1];return u[0]=g,u[1]=_,u[2]=b,u[3]=S,u[4]=L,u[5]=O,u[6]=X*g+re*S+N,u[7]=X*_+re*L+U,u[8]=X*b+re*O+j,u},mo.rotate=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=c[8],X=Math.sin(h),re=Math.cos(h);return u[0]=re*g+X*S,u[1]=re*_+X*L,u[2]=re*b+X*O,u[3]=re*S-X*g,u[4]=re*L-X*_,u[5]=re*O-X*b,u[6]=N,u[7]=U,u[8]=j,u},mo.scale=function(u,c,h){var g=h[0],_=h[1];return u[0]=g*c[0],u[1]=g*c[1],u[2]=g*c[2],u[3]=_*c[3],u[4]=_*c[4],u[5]=_*c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u},mo.fromTranslation=function(u,c){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=c[0],u[7]=c[1],u[8]=1,u},mo.fromRotation=function(u,c){var h=Math.sin(c),g=Math.cos(c);return u[0]=g,u[1]=h,u[2]=0,u[3]=-h,u[4]=g,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},mo.fromScaling=function(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=0,u[4]=c[1],u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},mo.fromMat2d=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=0,u[3]=c[2],u[4]=c[3],u[5]=0,u[6]=c[4],u[7]=c[5],u[8]=1,u},mo.fromQuat=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=h+h,L=g+g,O=_+_,N=h*S,U=g*S,j=g*L,X=_*S,re=_*L,fe=_*O,ge=b*S,Ce=b*L,Te=b*O;return u[0]=1-j-fe,u[3]=U-Te,u[6]=X+Ce,u[1]=U+Te,u[4]=1-N-fe,u[7]=re-ge,u[2]=X-Ce,u[5]=re+ge,u[8]=1-N-j,u},mo.normalFromMat4=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=c[6],N=c[7],U=c[8],j=c[9],X=c[10],re=c[11],fe=c[12],ge=c[13],Ce=c[14],Te=c[15],qe=h*L-g*S,tt=h*O-_*S,et=h*N-b*S,vt=g*O-_*L,dt=g*N-b*L,Pt=_*N-b*O,Qt=U*ge-j*fe,Xt=U*Ce-X*fe,An=U*Te-re*fe,tn=j*Ce-X*ge,Sn=j*Te-re*ge,Dn=X*Te-re*Ce,wn=qe*Dn-tt*Sn+et*tn+vt*An-dt*Xt+Pt*Qt;return wn?(u[0]=(L*Dn-O*Sn+N*tn)*(wn=1/wn),u[1]=(O*An-S*Dn-N*Xt)*wn,u[2]=(S*Sn-L*An+N*Qt)*wn,u[3]=(_*Sn-g*Dn-b*tn)*wn,u[4]=(h*Dn-_*An+b*Xt)*wn,u[5]=(g*An-h*Sn-b*Qt)*wn,u[6]=(ge*Pt-Ce*dt+Te*vt)*wn,u[7]=(Ce*et-fe*Pt-Te*tt)*wn,u[8]=(fe*dt-ge*et+Te*qe)*wn,u):null},mo.projection=function(u,c,h){return u[0]=2/c,u[1]=0,u[2]=0,u[3]=0,u[4]=-2/h,u[5]=0,u[6]=-1,u[7]=1,u[8]=1,u},mo.str=function(u){return"mat3("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+", "+u[6]+", "+u[7]+", "+u[8]+")"},mo.frob=function(u){return Math.hypot(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8])},mo.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u[3]=c[3]+h[3],u[4]=c[4]+h[4],u[5]=c[5]+h[5],u[6]=c[6]+h[6],u[7]=c[7]+h[7],u[8]=c[8]+h[8],u},mo.subtract=mj,mo.multiplyScalar=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u[4]=c[4]*h,u[5]=c[5]*h,u[6]=c[6]*h,u[7]=c[7]*h,u[8]=c[8]*h,u},mo.multiplyScalarAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u[2]=c[2]+h[2]*g,u[3]=c[3]+h[3]*g,u[4]=c[4]+h[4]*g,u[5]=c[5]+h[5]*g,u[6]=c[6]+h[6]*g,u[7]=c[7]+h[7]*g,u[8]=c[8]+h[8]*g,u},mo.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]&&u[6]===c[6]&&u[7]===c[7]&&u[8]===c[8]},mo.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=u[3],S=u[4],L=u[5],O=u[6],N=u[7],U=u[8],j=c[0],X=c[1],re=c[2],fe=c[3],ge=c[4],Ce=c[5],Te=c[6],qe=c[7],tt=c[8];return Math.abs(h-j)<=gf.EPSILON*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(g-X)<=gf.EPSILON*Math.max(1,Math.abs(g),Math.abs(X))&&Math.abs(_-re)<=gf.EPSILON*Math.max(1,Math.abs(_),Math.abs(re))&&Math.abs(b-fe)<=gf.EPSILON*Math.max(1,Math.abs(b),Math.abs(fe))&&Math.abs(S-ge)<=gf.EPSILON*Math.max(1,Math.abs(S),Math.abs(ge))&&Math.abs(L-Ce)<=gf.EPSILON*Math.max(1,Math.abs(L),Math.abs(Ce))&&Math.abs(O-Te)<=gf.EPSILON*Math.max(1,Math.abs(O),Math.abs(Te))&&Math.abs(N-qe)<=gf.EPSILON*Math.max(1,Math.abs(N),Math.abs(qe))&&Math.abs(U-tt)<=gf.EPSILON*Math.max(1,Math.abs(U),Math.abs(tt))},mo.sub=mo.mul=void 0;var gf=function(u,c){if(u&&u.__esModule)return u;if(u===null||nk(u)!=="object"&&typeof u!="function")return{default:u};var h=Aj(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function Aj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(Aj=function(g){return g?h:c})(u)}function gj(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=c[8],X=h[0],re=h[1],fe=h[2],ge=h[3],Ce=h[4],Te=h[5],qe=h[6],tt=h[7],et=h[8];return u[0]=X*g+re*S+fe*N,u[1]=X*_+re*L+fe*U,u[2]=X*b+re*O+fe*j,u[3]=ge*g+Ce*S+Te*N,u[4]=ge*_+Ce*L+Te*U,u[5]=ge*b+Ce*O+Te*j,u[6]=qe*g+tt*S+et*N,u[7]=qe*_+tt*L+et*U,u[8]=qe*b+tt*O+et*j,u}function mj(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u[3]=c[3]-h[3],u[4]=c[4]-h[4],u[5]=c[5]-h[5],u[6]=c[6]-h[6],u[7]=c[7]-h[7],u[8]=c[8]-h[8],u}mo.mul=gj,mo.sub=mj;var Ki={};function rk(u){return rk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},rk(u)}Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.create=function(){var u=new Na.ARRAY_TYPE(16);return Na.ARRAY_TYPE!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},Ki.clone=function(u){var c=new Na.ARRAY_TYPE(16);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c},Ki.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},Ki.fromValues=function(u,c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge){var Ce=new Na.ARRAY_TYPE(16);return Ce[0]=u,Ce[1]=c,Ce[2]=h,Ce[3]=g,Ce[4]=_,Ce[5]=b,Ce[6]=S,Ce[7]=L,Ce[8]=O,Ce[9]=N,Ce[10]=U,Ce[11]=j,Ce[12]=X,Ce[13]=re,Ce[14]=fe,Ce[15]=ge,Ce},Ki.set=function(u,c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce){return u[0]=c,u[1]=h,u[2]=g,u[3]=_,u[4]=b,u[5]=S,u[6]=L,u[7]=O,u[8]=N,u[9]=U,u[10]=j,u[11]=X,u[12]=re,u[13]=fe,u[14]=ge,u[15]=Ce,u},Ki.identity=yj,Ki.transpose=function(u,c){if(u===c){var h=c[1],g=c[2],_=c[3],b=c[6],S=c[7],L=c[11];u[1]=c[4],u[2]=c[8],u[3]=c[12],u[4]=h,u[6]=c[9],u[7]=c[13],u[8]=g,u[9]=b,u[11]=c[14],u[12]=_,u[13]=S,u[14]=L}else u[0]=c[0],u[1]=c[4],u[2]=c[8],u[3]=c[12],u[4]=c[1],u[5]=c[5],u[6]=c[9],u[7]=c[13],u[8]=c[2],u[9]=c[6],u[10]=c[10],u[11]=c[14],u[12]=c[3],u[13]=c[7],u[14]=c[11],u[15]=c[15];return u},Ki.invert=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=c[6],N=c[7],U=c[8],j=c[9],X=c[10],re=c[11],fe=c[12],ge=c[13],Ce=c[14],Te=c[15],qe=h*L-g*S,tt=h*O-_*S,et=h*N-b*S,vt=g*O-_*L,dt=g*N-b*L,Pt=_*N-b*O,Qt=U*ge-j*fe,Xt=U*Ce-X*fe,An=U*Te-re*fe,tn=j*Ce-X*ge,Sn=j*Te-re*ge,Dn=X*Te-re*Ce,wn=qe*Dn-tt*Sn+et*tn+vt*An-dt*Xt+Pt*Qt;return wn?(u[0]=(L*Dn-O*Sn+N*tn)*(wn=1/wn),u[1]=(_*Sn-g*Dn-b*tn)*wn,u[2]=(ge*Pt-Ce*dt+Te*vt)*wn,u[3]=(X*dt-j*Pt-re*vt)*wn,u[4]=(O*An-S*Dn-N*Xt)*wn,u[5]=(h*Dn-_*An+b*Xt)*wn,u[6]=(Ce*et-fe*Pt-Te*tt)*wn,u[7]=(U*Pt-X*et+re*tt)*wn,u[8]=(S*Sn-L*An+N*Qt)*wn,u[9]=(g*An-h*Sn-b*Qt)*wn,u[10]=(fe*dt-ge*et+Te*qe)*wn,u[11]=(j*et-U*dt-re*qe)*wn,u[12]=(L*Xt-S*tn-O*Qt)*wn,u[13]=(h*tn-g*Xt+_*Qt)*wn,u[14]=(ge*tt-fe*vt-Ce*qe)*wn,u[15]=(U*vt-j*tt+X*qe)*wn,u):null},Ki.adjoint=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=c[4],L=c[5],O=c[6],N=c[7],U=c[8],j=c[9],X=c[10],re=c[11],fe=c[12],ge=c[13],Ce=c[14],Te=c[15];return u[0]=L*(X*Te-re*Ce)-j*(O*Te-N*Ce)+ge*(O*re-N*X),u[1]=-(g*(X*Te-re*Ce)-j*(_*Te-b*Ce)+ge*(_*re-b*X)),u[2]=g*(O*Te-N*Ce)-L*(_*Te-b*Ce)+ge*(_*N-b*O),u[3]=-(g*(O*re-N*X)-L*(_*re-b*X)+j*(_*N-b*O)),u[4]=-(S*(X*Te-re*Ce)-U*(O*Te-N*Ce)+fe*(O*re-N*X)),u[5]=h*(X*Te-re*Ce)-U*(_*Te-b*Ce)+fe*(_*re-b*X),u[6]=-(h*(O*Te-N*Ce)-S*(_*Te-b*Ce)+fe*(_*N-b*O)),u[7]=h*(O*re-N*X)-S*(_*re-b*X)+U*(_*N-b*O),u[8]=S*(j*Te-re*ge)-U*(L*Te-N*ge)+fe*(L*re-N*j),u[9]=-(h*(j*Te-re*ge)-U*(g*Te-b*ge)+fe*(g*re-b*j)),u[10]=h*(L*Te-N*ge)-S*(g*Te-b*ge)+fe*(g*N-b*L),u[11]=-(h*(L*re-N*j)-S*(g*re-b*j)+U*(g*N-b*L)),u[12]=-(S*(j*Ce-X*ge)-U*(L*Ce-O*ge)+fe*(L*X-O*j)),u[13]=h*(j*Ce-X*ge)-U*(g*Ce-_*ge)+fe*(g*X-_*j),u[14]=-(h*(L*Ce-O*ge)-S*(g*Ce-_*ge)+fe*(g*O-_*L)),u[15]=h*(L*X-O*j)-S*(g*X-_*j)+U*(g*O-_*L),u},Ki.determinant=function(u){var c=u[0],h=u[1],g=u[2],_=u[3],b=u[4],S=u[5],L=u[6],O=u[7],N=u[8],U=u[9],j=u[10],X=u[11],re=u[12],fe=u[13],ge=u[14],Ce=u[15];return(c*S-h*b)*(j*Ce-X*ge)-(c*L-g*b)*(U*Ce-X*fe)+(c*O-_*b)*(U*ge-j*fe)+(h*L-g*S)*(N*Ce-X*re)-(h*O-_*S)*(N*ge-j*re)+(g*O-_*L)*(N*fe-U*re)},Ki.multiply=_j,Ki.translate=function(u,c,h){var g,_,b,S,L,O,N,U,j,X,re,fe,ge=h[0],Ce=h[1],Te=h[2];return c===u?(u[12]=c[0]*ge+c[4]*Ce+c[8]*Te+c[12],u[13]=c[1]*ge+c[5]*Ce+c[9]*Te+c[13],u[14]=c[2]*ge+c[6]*Ce+c[10]*Te+c[14],u[15]=c[3]*ge+c[7]*Ce+c[11]*Te+c[15]):(_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=c[8],X=c[9],re=c[10],fe=c[11],u[0]=g=c[0],u[1]=_,u[2]=b,u[3]=S,u[4]=L,u[5]=O,u[6]=N,u[7]=U,u[8]=j,u[9]=X,u[10]=re,u[11]=fe,u[12]=g*ge+L*Ce+j*Te+c[12],u[13]=_*ge+O*Ce+X*Te+c[13],u[14]=b*ge+N*Ce+re*Te+c[14],u[15]=S*ge+U*Ce+fe*Te+c[15]),u},Ki.scale=function(u,c,h){var g=h[0],_=h[1],b=h[2];return u[0]=c[0]*g,u[1]=c[1]*g,u[2]=c[2]*g,u[3]=c[3]*g,u[4]=c[4]*_,u[5]=c[5]*_,u[6]=c[6]*_,u[7]=c[7]*_,u[8]=c[8]*b,u[9]=c[9]*b,u[10]=c[10]*b,u[11]=c[11]*b,u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},Ki.rotate=function(u,c,h,g){var _,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te,qe,tt,et,vt,dt,Pt,Qt,Xt,An,tn,Sn=g[0],Dn=g[1],wn=g[2],kn=Math.hypot(Sn,Dn,wn);return kn<Na.EPSILON?null:(Sn*=kn=1/kn,Dn*=kn,wn*=kn,_=Math.sin(h),b=Math.cos(h),O=c[1],N=c[2],U=c[3],X=c[5],re=c[6],fe=c[7],Ce=c[9],Te=c[10],qe=c[11],tt=Sn*Sn*(S=1-b)+b,dt=Sn*Dn*S-wn*_,Pt=Dn*Dn*S+b,Qt=wn*Dn*S+Sn*_,Xt=Sn*wn*S+Dn*_,An=Dn*wn*S-Sn*_,tn=wn*wn*S+b,u[0]=(L=c[0])*tt+(j=c[4])*(et=Dn*Sn*S+wn*_)+(ge=c[8])*(vt=wn*Sn*S-Dn*_),u[1]=O*tt+X*et+Ce*vt,u[2]=N*tt+re*et+Te*vt,u[3]=U*tt+fe*et+qe*vt,u[4]=L*dt+j*Pt+ge*Qt,u[5]=O*dt+X*Pt+Ce*Qt,u[6]=N*dt+re*Pt+Te*Qt,u[7]=U*dt+fe*Pt+qe*Qt,u[8]=L*Xt+j*An+ge*tn,u[9]=O*Xt+X*An+Ce*tn,u[10]=N*Xt+re*An+Te*tn,u[11]=U*Xt+fe*An+qe*tn,c!==u&&(u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u)},Ki.rotateX=function(u,c,h){var g=Math.sin(h),_=Math.cos(h),b=c[4],S=c[5],L=c[6],O=c[7],N=c[8],U=c[9],j=c[10],X=c[11];return c!==u&&(u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[4]=b*_+N*g,u[5]=S*_+U*g,u[6]=L*_+j*g,u[7]=O*_+X*g,u[8]=N*_-b*g,u[9]=U*_-S*g,u[10]=j*_-L*g,u[11]=X*_-O*g,u},Ki.rotateY=function(u,c,h){var g=Math.sin(h),_=Math.cos(h),b=c[0],S=c[1],L=c[2],O=c[3],N=c[8],U=c[9],j=c[10],X=c[11];return c!==u&&(u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=b*_-N*g,u[1]=S*_-U*g,u[2]=L*_-j*g,u[3]=O*_-X*g,u[8]=b*g+N*_,u[9]=S*g+U*_,u[10]=L*g+j*_,u[11]=O*g+X*_,u},Ki.rotateZ=function(u,c,h){var g=Math.sin(h),_=Math.cos(h),b=c[0],S=c[1],L=c[2],O=c[3],N=c[4],U=c[5],j=c[6],X=c[7];return c!==u&&(u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=b*_+N*g,u[1]=S*_+U*g,u[2]=L*_+j*g,u[3]=O*_+X*g,u[4]=N*_-b*g,u[5]=U*_-S*g,u[6]=j*_-L*g,u[7]=X*_-O*g,u},Ki.fromTranslation=function(u,c){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=c[0],u[13]=c[1],u[14]=c[2],u[15]=1,u},Ki.fromScaling=function(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=c[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=c[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},Ki.fromRotation=function(u,c,h){var g,_,b,S=h[0],L=h[1],O=h[2],N=Math.hypot(S,L,O);return N<Na.EPSILON?null:(S*=N=1/N,L*=N,O*=N,g=Math.sin(c),_=Math.cos(c),u[0]=S*S*(b=1-_)+_,u[1]=L*S*b+O*g,u[2]=O*S*b-L*g,u[3]=0,u[4]=S*L*b-O*g,u[5]=L*L*b+_,u[6]=O*L*b+S*g,u[7]=0,u[8]=S*O*b+L*g,u[9]=L*O*b-S*g,u[10]=O*O*b+_,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u)},Ki.fromXRotation=function(u,c){var h=Math.sin(c),g=Math.cos(c);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=g,u[6]=h,u[7]=0,u[8]=0,u[9]=-h,u[10]=g,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},Ki.fromYRotation=function(u,c){var h=Math.sin(c),g=Math.cos(c);return u[0]=g,u[1]=0,u[2]=-h,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=h,u[9]=0,u[10]=g,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},Ki.fromZRotation=function(u,c){var h=Math.sin(c),g=Math.cos(c);return u[0]=g,u[1]=h,u[2]=0,u[3]=0,u[4]=-h,u[5]=g,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},Ki.fromRotationTranslation=bj,Ki.fromQuat2=function(u,c){var h=new Na.ARRAY_TYPE(3),g=-c[0],_=-c[1],b=-c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=g*g+_*_+b*b+S*S;return j>0?(h[0]=2*(L*S+U*g+O*b-N*_)/j,h[1]=2*(O*S+U*_+N*g-L*b)/j,h[2]=2*(N*S+U*b+L*_-O*g)/j):(h[0]=2*(L*S+U*g+O*b-N*_),h[1]=2*(O*S+U*_+N*g-L*b),h[2]=2*(N*S+U*b+L*_-O*g)),bj(u,c,h),u},Ki.getTranslation=function(u,c){return u[0]=c[12],u[1]=c[13],u[2]=c[14],u},Ki.getScaling=wj,Ki.getRotation=function(u,c){var h=new Na.ARRAY_TYPE(3);wj(h,c);var g=1/h[0],_=1/h[1],b=1/h[2],S=c[0]*g,L=c[1]*_,O=c[2]*b,N=c[4]*g,U=c[5]*_,j=c[6]*b,X=c[8]*g,re=c[9]*_,fe=c[10]*b,ge=S+U+fe,Ce=0;return ge>0?(Ce=2*Math.sqrt(ge+1),u[3]=.25*Ce,u[0]=(j-re)/Ce,u[1]=(X-O)/Ce,u[2]=(L-N)/Ce):S>U&&S>fe?(Ce=2*Math.sqrt(1+S-U-fe),u[3]=(j-re)/Ce,u[0]=.25*Ce,u[1]=(L+N)/Ce,u[2]=(X+O)/Ce):U>fe?(Ce=2*Math.sqrt(1+U-S-fe),u[3]=(X-O)/Ce,u[0]=(L+N)/Ce,u[1]=.25*Ce,u[2]=(j+re)/Ce):(Ce=2*Math.sqrt(1+fe-S-U),u[3]=(L-N)/Ce,u[0]=(X+O)/Ce,u[1]=(j+re)/Ce,u[2]=.25*Ce),u},Ki.fromRotationTranslationScale=function(u,c,h,g){var _=c[0],b=c[1],S=c[2],L=c[3],O=_+_,N=b+b,U=S+S,j=_*O,X=_*N,re=_*U,fe=b*N,ge=b*U,Ce=S*U,Te=L*O,qe=L*N,tt=L*U,et=g[0],vt=g[1],dt=g[2];return u[0]=(1-(fe+Ce))*et,u[1]=(X+tt)*et,u[2]=(re-qe)*et,u[3]=0,u[4]=(X-tt)*vt,u[5]=(1-(j+Ce))*vt,u[6]=(ge+Te)*vt,u[7]=0,u[8]=(re+qe)*dt,u[9]=(ge-Te)*dt,u[10]=(1-(j+fe))*dt,u[11]=0,u[12]=h[0],u[13]=h[1],u[14]=h[2],u[15]=1,u},Ki.fromRotationTranslationScaleOrigin=function(u,c,h,g,_){var b=c[0],S=c[1],L=c[2],O=c[3],N=b+b,U=S+S,j=L+L,X=b*N,re=b*U,fe=b*j,ge=S*U,Ce=S*j,Te=L*j,qe=O*N,tt=O*U,et=O*j,vt=g[0],dt=g[1],Pt=g[2],Qt=_[0],Xt=_[1],An=_[2],tn=(1-(ge+Te))*vt,Sn=(re+et)*vt,Dn=(fe-tt)*vt,wn=(re-et)*dt,kn=(1-(X+Te))*dt,yn=(Ce+qe)*dt,On=(fe+tt)*Pt,lr=(Ce-qe)*Pt,Un=(1-(X+ge))*Pt;return u[0]=tn,u[1]=Sn,u[2]=Dn,u[3]=0,u[4]=wn,u[5]=kn,u[6]=yn,u[7]=0,u[8]=On,u[9]=lr,u[10]=Un,u[11]=0,u[12]=h[0]+Qt-(tn*Qt+wn*Xt+On*An),u[13]=h[1]+Xt-(Sn*Qt+kn*Xt+lr*An),u[14]=h[2]+An-(Dn*Qt+yn*Xt+Un*An),u[15]=1,u},Ki.fromQuat=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=h+h,L=g+g,O=_+_,N=h*S,U=g*S,j=g*L,X=_*S,re=_*L,fe=_*O,ge=b*S,Ce=b*L,Te=b*O;return u[0]=1-j-fe,u[1]=U+Te,u[2]=X-Ce,u[3]=0,u[4]=U-Te,u[5]=1-N-fe,u[6]=re+ge,u[7]=0,u[8]=X+Ce,u[9]=re-ge,u[10]=1-N-j,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},Ki.frustum=function(u,c,h,g,_,b,S){var L=1/(h-c),O=1/(_-g),N=1/(b-S);return u[0]=2*b*L,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*b*O,u[6]=0,u[7]=0,u[8]=(h+c)*L,u[9]=(_+g)*O,u[10]=(S+b)*N,u[11]=-1,u[12]=0,u[13]=0,u[14]=S*b*2*N,u[15]=0,u},Ki.perspectiveNO=xj,Ki.perspectiveZO=function(u,c,h,g,_){var b,S=1/Math.tan(c/2);return u[0]=S/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=S,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,_!=null&&_!==1/0?(u[10]=_*(b=1/(g-_)),u[14]=_*g*b):(u[10]=-1,u[14]=-g),u},Ki.perspectiveFromFieldOfView=function(u,c,h,g){var _=Math.tan(c.upDegrees*Math.PI/180),b=Math.tan(c.downDegrees*Math.PI/180),S=Math.tan(c.leftDegrees*Math.PI/180),L=Math.tan(c.rightDegrees*Math.PI/180),O=2/(S+L),N=2/(_+b);return u[0]=O,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=N,u[6]=0,u[7]=0,u[8]=-(S-L)*O*.5,u[9]=(_-b)*N*.5,u[10]=g/(h-g),u[11]=-1,u[12]=0,u[13]=0,u[14]=g*h/(h-g),u[15]=0,u},Ki.orthoNO=Cj,Ki.orthoZO=function(u,c,h,g,_,b,S){var L=1/(c-h),O=1/(g-_),N=1/(b-S);return u[0]=-2*L,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*O,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=N,u[11]=0,u[12]=(c+h)*L,u[13]=(_+g)*O,u[14]=b*N,u[15]=1,u},Ki.lookAt=function(u,c,h,g){var _,b,S,L,O,N,U,j,X,re,fe=c[0],ge=c[1],Ce=c[2],Te=g[0],qe=g[1],tt=g[2],et=h[0],vt=h[1],dt=h[2];return Math.abs(fe-et)<Na.EPSILON&&Math.abs(ge-vt)<Na.EPSILON&&Math.abs(Ce-dt)<Na.EPSILON?yj(u):(U=fe-et,j=ge-vt,X=Ce-dt,_=qe*(X*=re=1/Math.hypot(U,j,X))-tt*(j*=re),b=tt*(U*=re)-Te*X,S=Te*j-qe*U,(re=Math.hypot(_,b,S))?(_*=re=1/re,b*=re,S*=re):(_=0,b=0,S=0),L=j*S-X*b,O=X*_-U*S,N=U*b-j*_,(re=Math.hypot(L,O,N))?(L*=re=1/re,O*=re,N*=re):(L=0,O=0,N=0),u[0]=_,u[1]=L,u[2]=U,u[3]=0,u[4]=b,u[5]=O,u[6]=j,u[7]=0,u[8]=S,u[9]=N,u[10]=X,u[11]=0,u[12]=-(_*fe+b*ge+S*Ce),u[13]=-(L*fe+O*ge+N*Ce),u[14]=-(U*fe+j*ge+X*Ce),u[15]=1,u)},Ki.targetTo=function(u,c,h,g){var _=c[0],b=c[1],S=c[2],L=g[0],O=g[1],N=g[2],U=_-h[0],j=b-h[1],X=S-h[2],re=U*U+j*j+X*X;re>0&&(U*=re=1/Math.sqrt(re),j*=re,X*=re);var fe=O*X-N*j,ge=N*U-L*X,Ce=L*j-O*U;return(re=fe*fe+ge*ge+Ce*Ce)>0&&(fe*=re=1/Math.sqrt(re),ge*=re,Ce*=re),u[0]=fe,u[1]=ge,u[2]=Ce,u[3]=0,u[4]=j*Ce-X*ge,u[5]=X*fe-U*Ce,u[6]=U*ge-j*fe,u[7]=0,u[8]=U,u[9]=j,u[10]=X,u[11]=0,u[12]=_,u[13]=b,u[14]=S,u[15]=1,u},Ki.str=function(u){return"mat4("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+", "+u[6]+", "+u[7]+", "+u[8]+", "+u[9]+", "+u[10]+", "+u[11]+", "+u[12]+", "+u[13]+", "+u[14]+", "+u[15]+")"},Ki.frob=function(u){return Math.hypot(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])},Ki.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u[3]=c[3]+h[3],u[4]=c[4]+h[4],u[5]=c[5]+h[5],u[6]=c[6]+h[6],u[7]=c[7]+h[7],u[8]=c[8]+h[8],u[9]=c[9]+h[9],u[10]=c[10]+h[10],u[11]=c[11]+h[11],u[12]=c[12]+h[12],u[13]=c[13]+h[13],u[14]=c[14]+h[14],u[15]=c[15]+h[15],u},Ki.subtract=Ej,Ki.multiplyScalar=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u[4]=c[4]*h,u[5]=c[5]*h,u[6]=c[6]*h,u[7]=c[7]*h,u[8]=c[8]*h,u[9]=c[9]*h,u[10]=c[10]*h,u[11]=c[11]*h,u[12]=c[12]*h,u[13]=c[13]*h,u[14]=c[14]*h,u[15]=c[15]*h,u},Ki.multiplyScalarAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u[2]=c[2]+h[2]*g,u[3]=c[3]+h[3]*g,u[4]=c[4]+h[4]*g,u[5]=c[5]+h[5]*g,u[6]=c[6]+h[6]*g,u[7]=c[7]+h[7]*g,u[8]=c[8]+h[8]*g,u[9]=c[9]+h[9]*g,u[10]=c[10]+h[10]*g,u[11]=c[11]+h[11]*g,u[12]=c[12]+h[12]*g,u[13]=c[13]+h[13]*g,u[14]=c[14]+h[14]*g,u[15]=c[15]+h[15]*g,u},Ki.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]&&u[6]===c[6]&&u[7]===c[7]&&u[8]===c[8]&&u[9]===c[9]&&u[10]===c[10]&&u[11]===c[11]&&u[12]===c[12]&&u[13]===c[13]&&u[14]===c[14]&&u[15]===c[15]},Ki.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=u[3],S=u[4],L=u[5],O=u[6],N=u[7],U=u[8],j=u[9],X=u[10],re=u[11],fe=u[12],ge=u[13],Ce=u[14],Te=u[15],qe=c[0],tt=c[1],et=c[2],vt=c[3],dt=c[4],Pt=c[5],Qt=c[6],Xt=c[7],An=c[8],tn=c[9],Sn=c[10],Dn=c[11],wn=c[12],kn=c[13],yn=c[14],On=c[15];return Math.abs(h-qe)<=Na.EPSILON*Math.max(1,Math.abs(h),Math.abs(qe))&&Math.abs(g-tt)<=Na.EPSILON*Math.max(1,Math.abs(g),Math.abs(tt))&&Math.abs(_-et)<=Na.EPSILON*Math.max(1,Math.abs(_),Math.abs(et))&&Math.abs(b-vt)<=Na.EPSILON*Math.max(1,Math.abs(b),Math.abs(vt))&&Math.abs(S-dt)<=Na.EPSILON*Math.max(1,Math.abs(S),Math.abs(dt))&&Math.abs(L-Pt)<=Na.EPSILON*Math.max(1,Math.abs(L),Math.abs(Pt))&&Math.abs(O-Qt)<=Na.EPSILON*Math.max(1,Math.abs(O),Math.abs(Qt))&&Math.abs(N-Xt)<=Na.EPSILON*Math.max(1,Math.abs(N),Math.abs(Xt))&&Math.abs(U-An)<=Na.EPSILON*Math.max(1,Math.abs(U),Math.abs(An))&&Math.abs(j-tn)<=Na.EPSILON*Math.max(1,Math.abs(j),Math.abs(tn))&&Math.abs(X-Sn)<=Na.EPSILON*Math.max(1,Math.abs(X),Math.abs(Sn))&&Math.abs(re-Dn)<=Na.EPSILON*Math.max(1,Math.abs(re),Math.abs(Dn))&&Math.abs(fe-wn)<=Na.EPSILON*Math.max(1,Math.abs(fe),Math.abs(wn))&&Math.abs(ge-kn)<=Na.EPSILON*Math.max(1,Math.abs(ge),Math.abs(kn))&&Math.abs(Ce-yn)<=Na.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(yn))&&Math.abs(Te-On)<=Na.EPSILON*Math.max(1,Math.abs(Te),Math.abs(On))},Ki.sub=Ki.mul=Ki.ortho=Ki.perspective=void 0;var Na=function(u,c){if(u&&u.__esModule)return u;if(u===null||rk(u)!=="object"&&typeof u!="function")return{default:u};var h=vj(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function vj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(vj=function(g){return g?h:c})(u)}function yj(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function _j(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=c[8],X=c[9],re=c[10],fe=c[11],ge=c[12],Ce=c[13],Te=c[14],qe=c[15],tt=h[0],et=h[1],vt=h[2],dt=h[3];return u[0]=tt*g+et*L+vt*j+dt*ge,u[1]=tt*_+et*O+vt*X+dt*Ce,u[2]=tt*b+et*N+vt*re+dt*Te,u[3]=tt*S+et*U+vt*fe+dt*qe,u[4]=(tt=h[4])*g+(et=h[5])*L+(vt=h[6])*j+(dt=h[7])*ge,u[5]=tt*_+et*O+vt*X+dt*Ce,u[6]=tt*b+et*N+vt*re+dt*Te,u[7]=tt*S+et*U+vt*fe+dt*qe,u[8]=(tt=h[8])*g+(et=h[9])*L+(vt=h[10])*j+(dt=h[11])*ge,u[9]=tt*_+et*O+vt*X+dt*Ce,u[10]=tt*b+et*N+vt*re+dt*Te,u[11]=tt*S+et*U+vt*fe+dt*qe,u[12]=(tt=h[12])*g+(et=h[13])*L+(vt=h[14])*j+(dt=h[15])*ge,u[13]=tt*_+et*O+vt*X+dt*Ce,u[14]=tt*b+et*N+vt*re+dt*Te,u[15]=tt*S+et*U+vt*fe+dt*qe,u}function bj(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=g+g,O=_+_,N=b+b,U=g*L,j=g*O,X=g*N,re=_*O,fe=_*N,ge=b*N,Ce=S*L,Te=S*O,qe=S*N;return u[0]=1-(re+ge),u[1]=j+qe,u[2]=X-Te,u[3]=0,u[4]=j-qe,u[5]=1-(U+ge),u[6]=fe+Ce,u[7]=0,u[8]=X+Te,u[9]=fe-Ce,u[10]=1-(U+re),u[11]=0,u[12]=h[0],u[13]=h[1],u[14]=h[2],u[15]=1,u}function wj(u,c){var h=c[4],g=c[5],_=c[6],b=c[8],S=c[9],L=c[10];return u[0]=Math.hypot(c[0],c[1],c[2]),u[1]=Math.hypot(h,g,_),u[2]=Math.hypot(b,S,L),u}function xj(u,c,h,g,_){var b,S=1/Math.tan(c/2);return u[0]=S/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=S,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,_!=null&&_!==1/0?(u[10]=(_+g)*(b=1/(g-_)),u[14]=2*_*g*b):(u[10]=-1,u[14]=-2*g),u}function Cj(u,c,h,g,_,b,S){var L=1/(c-h),O=1/(g-_),N=1/(b-S);return u[0]=-2*L,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*O,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*N,u[11]=0,u[12]=(c+h)*L,u[13]=(_+g)*O,u[14]=(S+b)*N,u[15]=1,u}function Ej(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u[3]=c[3]-h[3],u[4]=c[4]-h[4],u[5]=c[5]-h[5],u[6]=c[6]-h[6],u[7]=c[7]-h[7],u[8]=c[8]-h[8],u[9]=c[9]-h[9],u[10]=c[10]-h[10],u[11]=c[11]-h[11],u[12]=c[12]-h[12],u[13]=c[13]-h[13],u[14]=c[14]-h[14],u[15]=c[15]-h[15],u}Ki.perspective=xj,Ki.ortho=Cj,Ki.mul=_j,Ki.sub=Ej;var Ni={},Hi={};function ik(u){return ik=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ik(u)}Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.create=Tj,Hi.clone=function(u){var c=new rv.ARRAY_TYPE(3);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c},Hi.length=Ij,Hi.fromValues=function(u,c,h){var g=new rv.ARRAY_TYPE(3);return g[0]=u,g[1]=c,g[2]=h,g},Hi.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u},Hi.set=function(u,c,h,g){return u[0]=c,u[1]=h,u[2]=g,u},Hi.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u},Hi.subtract=Bj,Hi.multiply=Mj,Hi.divide=Lj,Hi.ceil=function(u,c){return u[0]=Math.ceil(c[0]),u[1]=Math.ceil(c[1]),u[2]=Math.ceil(c[2]),u},Hi.floor=function(u,c){return u[0]=Math.floor(c[0]),u[1]=Math.floor(c[1]),u[2]=Math.floor(c[2]),u},Hi.min=function(u,c,h){return u[0]=Math.min(c[0],h[0]),u[1]=Math.min(c[1],h[1]),u[2]=Math.min(c[2],h[2]),u},Hi.max=function(u,c,h){return u[0]=Math.max(c[0],h[0]),u[1]=Math.max(c[1],h[1]),u[2]=Math.max(c[2],h[2]),u},Hi.round=function(u,c){return u[0]=Math.round(c[0]),u[1]=Math.round(c[1]),u[2]=Math.round(c[2]),u},Hi.scale=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u},Hi.scaleAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u[2]=c[2]+h[2]*g,u},Hi.distance=Rj,Hi.squaredDistance=Pj,Hi.squaredLength=Fj,Hi.negate=function(u,c){return u[0]=-c[0],u[1]=-c[1],u[2]=-c[2],u},Hi.inverse=function(u,c){return u[0]=1/c[0],u[1]=1/c[1],u[2]=1/c[2],u},Hi.normalize=function(u,c){var h=c[0],g=c[1],_=c[2],b=h*h+g*g+_*_;return b>0&&(b=1/Math.sqrt(b)),u[0]=c[0]*b,u[1]=c[1]*b,u[2]=c[2]*b,u},Hi.dot=Oj,Hi.cross=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=h[0],L=h[1],O=h[2];return u[0]=_*O-b*L,u[1]=b*S-g*O,u[2]=g*L-_*S,u},Hi.lerp=function(u,c,h,g){var _=c[0],b=c[1],S=c[2];return u[0]=_+g*(h[0]-_),u[1]=b+g*(h[1]-b),u[2]=S+g*(h[2]-S),u},Hi.hermite=function(u,c,h,g,_,b){var S=b*b,L=S*(2*b-3)+1,O=S*(b-2)+b,N=S*(b-1),U=S*(3-2*b);return u[0]=c[0]*L+h[0]*O+g[0]*N+_[0]*U,u[1]=c[1]*L+h[1]*O+g[1]*N+_[1]*U,u[2]=c[2]*L+h[2]*O+g[2]*N+_[2]*U,u},Hi.bezier=function(u,c,h,g,_,b){var S=1-b,L=S*S,O=b*b,N=L*S,U=3*b*L,j=3*O*S,X=O*b;return u[0]=c[0]*N+h[0]*U+g[0]*j+_[0]*X,u[1]=c[1]*N+h[1]*U+g[1]*j+_[1]*X,u[2]=c[2]*N+h[2]*U+g[2]*j+_[2]*X,u},Hi.random=function(u,c){c=c||1;var h=2*rv.RANDOM()*Math.PI,g=2*rv.RANDOM()-1,_=Math.sqrt(1-g*g)*c;return u[0]=Math.cos(h)*_,u[1]=Math.sin(h)*_,u[2]=g*c,u},Hi.transformMat4=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=h[3]*g+h[7]*_+h[11]*b+h[15];return u[0]=(h[0]*g+h[4]*_+h[8]*b+h[12])/(S=S||1),u[1]=(h[1]*g+h[5]*_+h[9]*b+h[13])/S,u[2]=(h[2]*g+h[6]*_+h[10]*b+h[14])/S,u},Hi.transformMat3=function(u,c,h){var g=c[0],_=c[1],b=c[2];return u[0]=g*h[0]+_*h[3]+b*h[6],u[1]=g*h[1]+_*h[4]+b*h[7],u[2]=g*h[2]+_*h[5]+b*h[8],u},Hi.transformQuat=function(u,c,h){var g=h[0],_=h[1],b=h[2],S=c[0],L=c[1],O=c[2],N=_*O-b*L,U=b*S-g*O,j=g*L-_*S,X=_*j-b*U,re=b*N-g*j,fe=g*U-_*N,ge=2*h[3];return U*=ge,j*=ge,re*=2,fe*=2,u[0]=S+(N*=ge)+(X*=2),u[1]=L+U+re,u[2]=O+j+fe,u},Hi.rotateX=function(u,c,h,g){var _=[],b=[];return _[0]=c[0]-h[0],_[1]=c[1]-h[1],_[2]=c[2]-h[2],b[0]=_[0],b[1]=_[1]*Math.cos(g)-_[2]*Math.sin(g),b[2]=_[1]*Math.sin(g)+_[2]*Math.cos(g),u[0]=b[0]+h[0],u[1]=b[1]+h[1],u[2]=b[2]+h[2],u},Hi.rotateY=function(u,c,h,g){var _=[],b=[];return _[0]=c[0]-h[0],_[1]=c[1]-h[1],_[2]=c[2]-h[2],b[0]=_[2]*Math.sin(g)+_[0]*Math.cos(g),b[1]=_[1],b[2]=_[2]*Math.cos(g)-_[0]*Math.sin(g),u[0]=b[0]+h[0],u[1]=b[1]+h[1],u[2]=b[2]+h[2],u},Hi.rotateZ=function(u,c,h,g){var _=[],b=[];return _[0]=c[0]-h[0],_[1]=c[1]-h[1],_[2]=c[2]-h[2],b[0]=_[0]*Math.cos(g)-_[1]*Math.sin(g),b[1]=_[0]*Math.sin(g)+_[1]*Math.cos(g),b[2]=_[2],u[0]=b[0]+h[0],u[1]=b[1]+h[1],u[2]=b[2]+h[2],u},Hi.angle=function(u,c){var h=u[0],g=u[1],_=u[2],b=c[0],S=c[1],L=c[2],O=Math.sqrt(h*h+g*g+_*_)*Math.sqrt(b*b+S*S+L*L),N=O&&Oj(u,c)/O;return Math.acos(Math.min(Math.max(N,-1),1))},Hi.zero=function(u){return u[0]=0,u[1]=0,u[2]=0,u},Hi.str=function(u){return"vec3("+u[0]+", "+u[1]+", "+u[2]+")"},Hi.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]},Hi.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=c[0],S=c[1],L=c[2];return Math.abs(h-b)<=rv.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(g-S)<=rv.EPSILON*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(_-L)<=rv.EPSILON*Math.max(1,Math.abs(_),Math.abs(L))},Hi.forEach=Hi.sqrLen=Hi.len=Hi.sqrDist=Hi.dist=Hi.div=Hi.mul=Hi.sub=void 0;var rv=function(u,c){if(u&&u.__esModule)return u;if(u===null||ik(u)!=="object"&&typeof u!="function")return{default:u};var h=Sj(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function Sj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(Sj=function(g){return g?h:c})(u)}function Tj(){var u=new rv.ARRAY_TYPE(3);return rv.ARRAY_TYPE!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function Ij(u){return Math.hypot(u[0],u[1],u[2])}function Bj(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u}function Mj(u,c,h){return u[0]=c[0]*h[0],u[1]=c[1]*h[1],u[2]=c[2]*h[2],u}function Lj(u,c,h){return u[0]=c[0]/h[0],u[1]=c[1]/h[1],u[2]=c[2]/h[2],u}function Rj(u,c){return Math.hypot(c[0]-u[0],c[1]-u[1],c[2]-u[2])}function Pj(u,c){var h=c[0]-u[0],g=c[1]-u[1],_=c[2]-u[2];return h*h+g*g+_*_}function Fj(u){var c=u[0],h=u[1],g=u[2];return c*c+h*h+g*g}function Oj(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]}Hi.sub=Bj,Hi.mul=Mj,Hi.div=Lj,Hi.dist=Rj,Hi.sqrDist=Pj,Hi.len=Ij,Hi.sqrLen=Fj;var iv,Fye=(iv=Tj(),function(u,c,h,g,_,b){var S,L;for(c||(c=3),h||(h=0),L=g?Math.min(g*c+h,u.length):u.length,S=h;S<L;S+=c)iv[0]=u[S],iv[1]=u[S+1],iv[2]=u[S+2],_(iv,iv,b),u[S]=iv[0],u[S+1]=iv[1],u[S+2]=iv[2];return u});Hi.forEach=Fye;var fs={};function sk(u){return sk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},sk(u)}Object.defineProperty(fs,"__esModule",{value:!0}),fs.create=kj,fs.clone=function(u){var c=new np.ARRAY_TYPE(4);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c},fs.fromValues=function(u,c,h,g){var _=new np.ARRAY_TYPE(4);return _[0]=u,_[1]=c,_[2]=h,_[3]=g,_},fs.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u},fs.set=function(u,c,h,g,_){return u[0]=c,u[1]=h,u[2]=g,u[3]=_,u},fs.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u[3]=c[3]+h[3],u},fs.subtract=Dj,fs.multiply=Uj,fs.divide=zj,fs.ceil=function(u,c){return u[0]=Math.ceil(c[0]),u[1]=Math.ceil(c[1]),u[2]=Math.ceil(c[2]),u[3]=Math.ceil(c[3]),u},fs.floor=function(u,c){return u[0]=Math.floor(c[0]),u[1]=Math.floor(c[1]),u[2]=Math.floor(c[2]),u[3]=Math.floor(c[3]),u},fs.min=function(u,c,h){return u[0]=Math.min(c[0],h[0]),u[1]=Math.min(c[1],h[1]),u[2]=Math.min(c[2],h[2]),u[3]=Math.min(c[3],h[3]),u},fs.max=function(u,c,h){return u[0]=Math.max(c[0],h[0]),u[1]=Math.max(c[1],h[1]),u[2]=Math.max(c[2],h[2]),u[3]=Math.max(c[3],h[3]),u},fs.round=function(u,c){return u[0]=Math.round(c[0]),u[1]=Math.round(c[1]),u[2]=Math.round(c[2]),u[3]=Math.round(c[3]),u},fs.scale=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u},fs.scaleAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u[2]=c[2]+h[2]*g,u[3]=c[3]+h[3]*g,u},fs.distance=$j,fs.squaredDistance=Vj,fs.length=Hj,fs.squaredLength=Gj,fs.negate=function(u,c){return u[0]=-c[0],u[1]=-c[1],u[2]=-c[2],u[3]=-c[3],u},fs.inverse=function(u,c){return u[0]=1/c[0],u[1]=1/c[1],u[2]=1/c[2],u[3]=1/c[3],u},fs.normalize=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=h*h+g*g+_*_+b*b;return S>0&&(S=1/Math.sqrt(S)),u[0]=h*S,u[1]=g*S,u[2]=_*S,u[3]=b*S,u},fs.dot=function(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3]},fs.cross=function(u,c,h,g){var _=h[0]*g[1]-h[1]*g[0],b=h[0]*g[2]-h[2]*g[0],S=h[0]*g[3]-h[3]*g[0],L=h[1]*g[2]-h[2]*g[1],O=h[1]*g[3]-h[3]*g[1],N=h[2]*g[3]-h[3]*g[2],U=c[0],j=c[1],X=c[2],re=c[3];return u[0]=j*N-X*O+re*L,u[1]=-U*N+X*S-re*b,u[2]=U*O-j*S+re*_,u[3]=-U*L+j*b-X*_,u},fs.lerp=function(u,c,h,g){var _=c[0],b=c[1],S=c[2],L=c[3];return u[0]=_+g*(h[0]-_),u[1]=b+g*(h[1]-b),u[2]=S+g*(h[2]-S),u[3]=L+g*(h[3]-L),u},fs.random=function(u,c){var h,g,_,b,S,L;c=c||1;do S=(h=2*np.RANDOM()-1)*h+(g=2*np.RANDOM()-1)*g;while(S>=1);do L=(_=2*np.RANDOM()-1)*_+(b=2*np.RANDOM()-1)*b;while(L>=1);var O=Math.sqrt((1-S)/L);return u[0]=c*h,u[1]=c*g,u[2]=c*_*O,u[3]=c*b*O,u},fs.transformMat4=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3];return u[0]=h[0]*g+h[4]*_+h[8]*b+h[12]*S,u[1]=h[1]*g+h[5]*_+h[9]*b+h[13]*S,u[2]=h[2]*g+h[6]*_+h[10]*b+h[14]*S,u[3]=h[3]*g+h[7]*_+h[11]*b+h[15]*S,u},fs.transformQuat=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=h[0],L=h[1],O=h[2],N=h[3],U=N*g+L*b-O*_,j=N*_+O*g-S*b,X=N*b+S*_-L*g,re=-S*g-L*_-O*b;return u[0]=U*N+re*-S+j*-O-X*-L,u[1]=j*N+re*-L+X*-S-U*-O,u[2]=X*N+re*-O+U*-L-j*-S,u[3]=c[3],u},fs.zero=function(u){return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u},fs.str=function(u){return"vec4("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+")"},fs.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]},fs.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=u[3],S=c[0],L=c[1],O=c[2],N=c[3];return Math.abs(h-S)<=np.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(g-L)<=np.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(_-O)<=np.EPSILON*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(b-N)<=np.EPSILON*Math.max(1,Math.abs(b),Math.abs(N))},fs.forEach=fs.sqrLen=fs.len=fs.sqrDist=fs.dist=fs.div=fs.mul=fs.sub=void 0;var np=function(u,c){if(u&&u.__esModule)return u;if(u===null||sk(u)!=="object"&&typeof u!="function")return{default:u};var h=Nj(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function Nj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(Nj=function(g){return g?h:c})(u)}function kj(){var u=new np.ARRAY_TYPE(4);return np.ARRAY_TYPE!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0),u}function Dj(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],u[3]=c[3]-h[3],u}function Uj(u,c,h){return u[0]=c[0]*h[0],u[1]=c[1]*h[1],u[2]=c[2]*h[2],u[3]=c[3]*h[3],u}function zj(u,c,h){return u[0]=c[0]/h[0],u[1]=c[1]/h[1],u[2]=c[2]/h[2],u[3]=c[3]/h[3],u}function $j(u,c){return Math.hypot(c[0]-u[0],c[1]-u[1],c[2]-u[2],c[3]-u[3])}function Vj(u,c){var h=c[0]-u[0],g=c[1]-u[1],_=c[2]-u[2],b=c[3]-u[3];return h*h+g*g+_*_+b*b}function Hj(u){return Math.hypot(u[0],u[1],u[2],u[3])}function Gj(u){var c=u[0],h=u[1],g=u[2],_=u[3];return c*c+h*h+g*g+_*_}fs.sub=Dj,fs.mul=Uj,fs.div=zj,fs.dist=$j,fs.sqrDist=Vj,fs.len=Hj,fs.sqrLen=Gj;var Oye=function(){var u=kj();return function(c,h,g,_,b,S){var L,O;for(h||(h=4),g||(g=0),O=_?Math.min(_*h+g,c.length):c.length,L=g;L<O;L+=h)u[0]=c[L],u[1]=c[L+1],u[2]=c[L+2],u[3]=c[L+3],b(u,u,S),c[L]=u[0],c[L+1]=u[1],c[L+2]=u[2],c[L+3]=u[3];return c}}();function ok(u){return ok=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ok(u)}fs.forEach=Oye,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.create=ak,Ni.identity=function(u){return u[0]=0,u[1]=0,u[2]=0,u[3]=1,u},Ni.setAxisAngle=jj,Ni.getAxisAngle=function(u,c){var h=2*Math.acos(c[3]),g=Math.sin(h/2);return g>o1.EPSILON?(u[0]=c[0]/g,u[1]=c[1]/g,u[2]=c[2]/g):(u[0]=1,u[1]=0,u[2]=0),h},Ni.getAngle=function(u,c){var h=Zj(u,c);return Math.acos(2*h*h-1)},Ni.multiply=Kj,Ni.rotateX=function(u,c,h){h*=.5;var g=c[0],_=c[1],b=c[2],S=c[3],L=Math.sin(h),O=Math.cos(h);return u[0]=g*O+S*L,u[1]=_*O+b*L,u[2]=b*O-_*L,u[3]=S*O-g*L,u},Ni.rotateY=function(u,c,h){h*=.5;var g=c[0],_=c[1],b=c[2],S=c[3],L=Math.sin(h),O=Math.cos(h);return u[0]=g*O-b*L,u[1]=_*O+S*L,u[2]=b*O+g*L,u[3]=S*O-_*L,u},Ni.rotateZ=function(u,c,h){h*=.5;var g=c[0],_=c[1],b=c[2],S=c[3],L=Math.sin(h),O=Math.cos(h);return u[0]=g*O+_*L,u[1]=_*O-g*L,u[2]=b*O+S*L,u[3]=S*O-b*L,u},Ni.calculateW=function(u,c){var h=c[0],g=c[1],_=c[2];return u[0]=h,u[1]=g,u[2]=_,u[3]=Math.sqrt(Math.abs(1-h*h-g*g-_*_)),u},Ni.exp=Wj,Ni.ln=qj,Ni.pow=function(u,c,h){return qj(u,c),Xj(u,u,h),Wj(u,u),u},Ni.slerp=YM,Ni.random=function(u){var c=o1.RANDOM(),h=o1.RANDOM(),g=o1.RANDOM(),_=Math.sqrt(1-c),b=Math.sqrt(c);return u[0]=_*Math.sin(2*Math.PI*h),u[1]=_*Math.cos(2*Math.PI*h),u[2]=b*Math.sin(2*Math.PI*g),u[3]=b*Math.cos(2*Math.PI*g),u},Ni.invert=function(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=h*h+g*g+_*_+b*b,L=S?1/S:0;return u[0]=-h*L,u[1]=-g*L,u[2]=-_*L,u[3]=b*L,u},Ni.conjugate=function(u,c){return u[0]=-c[0],u[1]=-c[1],u[2]=-c[2],u[3]=c[3],u},Ni.fromMat3=Yj,Ni.fromEuler=function(u,c,h,g){var _=.5*Math.PI/180;c*=_,h*=_,g*=_;var b=Math.sin(c),S=Math.cos(c),L=Math.sin(h),O=Math.cos(h),N=Math.sin(g),U=Math.cos(g);return u[0]=b*O*U-S*L*N,u[1]=S*L*U+b*O*N,u[2]=S*O*N-b*L*U,u[3]=S*O*U+b*L*N,u},Ni.str=function(u){return"quat("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+")"},Ni.setAxes=Ni.sqlerp=Ni.rotationTo=Ni.equals=Ni.exactEquals=Ni.normalize=Ni.sqrLen=Ni.squaredLength=Ni.len=Ni.length=Ni.lerp=Ni.dot=Ni.scale=Ni.mul=Ni.add=Ni.set=Ni.copy=Ni.fromValues=Ni.clone=void 0;var o1=qM(Zl),Nye=qM(mo),sv=qM(Hi),mf=qM(fs);function Qj(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(Qj=function(g){return g?h:c})(u)}function qM(u,c){if(u&&u.__esModule)return u;if(u===null||ok(u)!=="object"&&typeof u!="function")return{default:u};var h=Qj(c);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}function ak(){var u=new o1.ARRAY_TYPE(4);return o1.ARRAY_TYPE!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function jj(u,c,h){h*=.5;var g=Math.sin(h);return u[0]=g*c[0],u[1]=g*c[1],u[2]=g*c[2],u[3]=Math.cos(h),u}function Kj(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=h[0],O=h[1],N=h[2],U=h[3];return u[0]=g*U+S*L+_*N-b*O,u[1]=_*U+S*O+b*L-g*N,u[2]=b*U+S*N+g*O-_*L,u[3]=S*U-g*L-_*O-b*N,u}function Wj(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=Math.sqrt(h*h+g*g+_*_),L=Math.exp(b),O=S>0?L*Math.sin(S)/S:0;return u[0]=h*O,u[1]=g*O,u[2]=_*O,u[3]=L*Math.cos(S),u}function qj(u,c){var h=c[0],g=c[1],_=c[2],b=c[3],S=Math.sqrt(h*h+g*g+_*_),L=S>0?Math.atan2(S,b)/S:0;return u[0]=h*L,u[1]=g*L,u[2]=_*L,u[3]=.5*Math.log(h*h+g*g+_*_+b*b),u}function YM(u,c,h,g){var _,b,S,L,O,N=c[0],U=c[1],j=c[2],X=c[3],re=h[0],fe=h[1],ge=h[2],Ce=h[3];return(b=N*re+U*fe+j*ge+X*Ce)<0&&(b=-b,re=-re,fe=-fe,ge=-ge,Ce=-Ce),1-b>o1.EPSILON?(_=Math.acos(b),S=Math.sin(_),L=Math.sin((1-g)*_)/S,O=Math.sin(g*_)/S):(L=1-g,O=g),u[0]=L*N+O*re,u[1]=L*U+O*fe,u[2]=L*j+O*ge,u[3]=L*X+O*Ce,u}function Yj(u,c){var h,g=c[0]+c[4]+c[8];if(g>0)h=Math.sqrt(g+1),u[3]=.5*h,u[0]=(c[5]-c[7])*(h=.5/h),u[1]=(c[6]-c[2])*h,u[2]=(c[1]-c[3])*h;else{var _=0;c[4]>c[0]&&(_=1),c[8]>c[3*_+_]&&(_=2);var b=(_+1)%3,S=(_+2)%3;h=Math.sqrt(c[3*_+_]-c[3*b+b]-c[3*S+S]+1),u[_]=.5*h,u[3]=(c[3*b+S]-c[3*S+b])*(h=.5/h),u[b]=(c[3*b+_]+c[3*_+b])*h,u[S]=(c[3*S+_]+c[3*_+S])*h}return u}Ni.clone=mf.clone,Ni.fromValues=mf.fromValues,Ni.copy=mf.copy,Ni.set=mf.set,Ni.add=mf.add,Ni.mul=Kj;var Xj=mf.scale;Ni.scale=Xj;var Zj=mf.dot;Ni.dot=Zj,Ni.lerp=mf.lerp;var Jj=mf.length;Ni.length=Jj,Ni.len=Jj;var e9=mf.squaredLength;Ni.squaredLength=e9,Ni.sqrLen=e9;var lk=mf.normalize;Ni.normalize=lk,Ni.exactEquals=mf.exactEquals,Ni.equals=mf.equals;var oA,t9,n9,kye=(oA=sv.create(),t9=sv.fromValues(1,0,0),n9=sv.fromValues(0,1,0),function(u,c,h){var g=sv.dot(c,h);return g<-.999999?(sv.cross(oA,t9,c),sv.len(oA)<1e-6&&sv.cross(oA,n9,c),sv.normalize(oA,oA),jj(u,oA,Math.PI),u):g>.999999?(u[0]=0,u[1]=0,u[2]=0,u[3]=1,u):(sv.cross(oA,c,h),u[0]=oA[0],u[1]=oA[1],u[2]=oA[2],u[3]=1+g,lk(u,u))});Ni.rotationTo=kye;var ck,uk,Dye=(ck=ak(),uk=ak(),function(u,c,h,g,_,b){return YM(ck,c,_,b),YM(uk,h,g,b),YM(u,ck,uk,2*b*(1-b)),u});Ni.sqlerp=Dye;var aA,Uye=(aA=Nye.create(),function(u,c,h,g){return aA[0]=h[0],aA[3]=h[1],aA[6]=h[2],aA[1]=g[0],aA[4]=g[1],aA[7]=g[2],aA[2]=-c[0],aA[5]=-c[1],aA[8]=-c[2],lk(u,Yj(u,aA))});Ni.setAxes=Uye;var ws={};function hk(u){return hk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},hk(u)}Object.defineProperty(ws,"__esModule",{value:!0}),ws.create=function(){var u=new Mh.ARRAY_TYPE(8);return Mh.ARRAY_TYPE!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[4]=0,u[5]=0,u[6]=0,u[7]=0),u[3]=1,u},ws.clone=function(u){var c=new Mh.ARRAY_TYPE(8);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c},ws.fromValues=function(u,c,h,g,_,b,S,L){var O=new Mh.ARRAY_TYPE(8);return O[0]=u,O[1]=c,O[2]=h,O[3]=g,O[4]=_,O[5]=b,O[6]=S,O[7]=L,O},ws.fromRotationTranslationValues=function(u,c,h,g,_,b,S){var L=new Mh.ARRAY_TYPE(8);L[0]=u,L[1]=c,L[2]=h,L[3]=g;var O=.5*_,N=.5*b,U=.5*S;return L[4]=O*g+N*h-U*c,L[5]=N*g+U*u-O*h,L[6]=U*g+O*c-N*u,L[7]=-O*u-N*c-U*h,L},ws.fromRotationTranslation=s9,ws.fromTranslation=function(u,c){return u[0]=0,u[1]=0,u[2]=0,u[3]=1,u[4]=.5*c[0],u[5]=.5*c[1],u[6]=.5*c[2],u[7]=0,u},ws.fromRotation=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=0,u[5]=0,u[6]=0,u[7]=0,u},ws.fromMat4=function(u,c){var h=ov.create();r9.getRotation(h,c);var g=new Mh.ARRAY_TYPE(3);return r9.getTranslation(g,c),s9(u,h,g),u},ws.copy=o9,ws.identity=function(u){return u[0]=0,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,u[6]=0,u[7]=0,u},ws.set=function(u,c,h,g,_,b,S,L,O){return u[0]=c,u[1]=h,u[2]=g,u[3]=_,u[4]=b,u[5]=S,u[6]=L,u[7]=O,u},ws.getDual=function(u,c){return u[0]=c[4],u[1]=c[5],u[2]=c[6],u[3]=c[7],u},ws.setDual=function(u,c){return u[4]=c[0],u[5]=c[1],u[6]=c[2],u[7]=c[3],u},ws.getTranslation=function(u,c){var h=c[4],g=c[5],_=c[6],b=c[7],S=-c[0],L=-c[1],O=-c[2],N=c[3];return u[0]=2*(h*N+b*S+g*O-_*L),u[1]=2*(g*N+b*L+_*S-h*O),u[2]=2*(_*N+b*O+h*L-g*S),u},ws.translate=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=.5*h[0],O=.5*h[1],N=.5*h[2],U=c[4],j=c[5],X=c[6],re=c[7];return u[0]=g,u[1]=_,u[2]=b,u[3]=S,u[4]=S*L+_*N-b*O+U,u[5]=S*O+b*L-g*N+j,u[6]=S*N+g*O-_*L+X,u[7]=-g*L-_*O-b*N+re,u},ws.rotateX=function(u,c,h){var g=-c[0],_=-c[1],b=-c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=L*S+U*g+O*b-N*_,X=O*S+U*_+N*g-L*b,re=N*S+U*b+L*_-O*g,fe=U*S-L*g-O*_-N*b;return ov.rotateX(u,c,h),u[4]=j*(S=u[3])+fe*(g=u[0])+X*(b=u[2])-re*(_=u[1]),u[5]=X*S+fe*_+re*g-j*b,u[6]=re*S+fe*b+j*_-X*g,u[7]=fe*S-j*g-X*_-re*b,u},ws.rotateY=function(u,c,h){var g=-c[0],_=-c[1],b=-c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=L*S+U*g+O*b-N*_,X=O*S+U*_+N*g-L*b,re=N*S+U*b+L*_-O*g,fe=U*S-L*g-O*_-N*b;return ov.rotateY(u,c,h),u[4]=j*(S=u[3])+fe*(g=u[0])+X*(b=u[2])-re*(_=u[1]),u[5]=X*S+fe*_+re*g-j*b,u[6]=re*S+fe*b+j*_-X*g,u[7]=fe*S-j*g-X*_-re*b,u},ws.rotateZ=function(u,c,h){var g=-c[0],_=-c[1],b=-c[2],S=c[3],L=c[4],O=c[5],N=c[6],U=c[7],j=L*S+U*g+O*b-N*_,X=O*S+U*_+N*g-L*b,re=N*S+U*b+L*_-O*g,fe=U*S-L*g-O*_-N*b;return ov.rotateZ(u,c,h),u[4]=j*(S=u[3])+fe*(g=u[0])+X*(b=u[2])-re*(_=u[1]),u[5]=X*S+fe*_+re*g-j*b,u[6]=re*S+fe*b+j*_-X*g,u[7]=fe*S-j*g-X*_-re*b,u},ws.rotateByQuatAppend=function(u,c,h){var g=h[0],_=h[1],b=h[2],S=h[3],L=c[0],O=c[1],N=c[2],U=c[3];return u[0]=L*S+U*g+O*b-N*_,u[1]=O*S+U*_+N*g-L*b,u[2]=N*S+U*b+L*_-O*g,u[3]=U*S-L*g-O*_-N*b,u[4]=(L=c[4])*S+(U=c[7])*g+(O=c[5])*b-(N=c[6])*_,u[5]=O*S+U*_+N*g-L*b,u[6]=N*S+U*b+L*_-O*g,u[7]=U*S-L*g-O*_-N*b,u},ws.rotateByQuatPrepend=function(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=h[0],O=h[1],N=h[2],U=h[3];return u[0]=g*U+S*L+_*N-b*O,u[1]=_*U+S*O+b*L-g*N,u[2]=b*U+S*N+g*O-_*L,u[3]=S*U-g*L-_*O-b*N,u[4]=g*(U=h[7])+S*(L=h[4])+_*(N=h[6])-b*(O=h[5]),u[5]=_*U+S*O+b*L-g*N,u[6]=b*U+S*N+g*O-_*L,u[7]=S*U-g*L-_*O-b*N,u},ws.rotateAroundAxis=function(u,c,h,g){if(Math.abs(g)<Mh.EPSILON)return o9(u,c);var _=Math.hypot(h[0],h[1],h[2]);g*=.5;var b=Math.sin(g),S=b*h[0]/_,L=b*h[1]/_,O=b*h[2]/_,N=Math.cos(g),U=c[0],j=c[1],X=c[2],re=c[3];u[0]=U*N+re*S+j*O-X*L,u[1]=j*N+re*L+X*S-U*O,u[2]=X*N+re*O+U*L-j*S,u[3]=re*N-U*S-j*L-X*O;var fe=c[4],ge=c[5],Ce=c[6],Te=c[7];return u[4]=fe*N+Te*S+ge*O-Ce*L,u[5]=ge*N+Te*L+Ce*S-fe*O,u[6]=Ce*N+Te*O+fe*L-ge*S,u[7]=Te*N-fe*S-ge*L-Ce*O,u},ws.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u[2]=c[2]+h[2],u[3]=c[3]+h[3],u[4]=c[4]+h[4],u[5]=c[5]+h[5],u[6]=c[6]+h[6],u[7]=c[7]+h[7],u},ws.multiply=a9,ws.scale=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u[2]=c[2]*h,u[3]=c[3]*h,u[4]=c[4]*h,u[5]=c[5]*h,u[6]=c[6]*h,u[7]=c[7]*h,u},ws.lerp=function(u,c,h,g){var _=1-g;return l9(c,h)<0&&(g=-g),u[0]=c[0]*_+h[0]*g,u[1]=c[1]*_+h[1]*g,u[2]=c[2]*_+h[2]*g,u[3]=c[3]*_+h[3]*g,u[4]=c[4]*_+h[4]*g,u[5]=c[5]*_+h[5]*g,u[6]=c[6]*_+h[6]*g,u[7]=c[7]*_+h[7]*g,u},ws.invert=function(u,c){var h=XM(c);return u[0]=-c[0]/h,u[1]=-c[1]/h,u[2]=-c[2]/h,u[3]=c[3]/h,u[4]=-c[4]/h,u[5]=-c[5]/h,u[6]=-c[6]/h,u[7]=c[7]/h,u},ws.conjugate=function(u,c){return u[0]=-c[0],u[1]=-c[1],u[2]=-c[2],u[3]=c[3],u[4]=-c[4],u[5]=-c[5],u[6]=-c[6],u[7]=c[7],u},ws.normalize=function(u,c){var h=XM(c);if(h>0){h=Math.sqrt(h);var g=c[0]/h,_=c[1]/h,b=c[2]/h,S=c[3]/h,L=c[4],O=c[5],N=c[6],U=c[7],j=g*L+_*O+b*N+S*U;u[0]=g,u[1]=_,u[2]=b,u[3]=S,u[4]=(L-g*j)/h,u[5]=(O-_*j)/h,u[6]=(N-b*j)/h,u[7]=(U-S*j)/h}return u},ws.str=function(u){return"quat2("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+", "+u[6]+", "+u[7]+")"},ws.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]&&u[6]===c[6]&&u[7]===c[7]},ws.equals=function(u,c){var h=u[0],g=u[1],_=u[2],b=u[3],S=u[4],L=u[5],O=u[6],N=u[7],U=c[0],j=c[1],X=c[2],re=c[3],fe=c[4],ge=c[5],Ce=c[6],Te=c[7];return Math.abs(h-U)<=Mh.EPSILON*Math.max(1,Math.abs(h),Math.abs(U))&&Math.abs(g-j)<=Mh.EPSILON*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(_-X)<=Mh.EPSILON*Math.max(1,Math.abs(_),Math.abs(X))&&Math.abs(b-re)<=Mh.EPSILON*Math.max(1,Math.abs(b),Math.abs(re))&&Math.abs(S-fe)<=Mh.EPSILON*Math.max(1,Math.abs(S),Math.abs(fe))&&Math.abs(L-ge)<=Mh.EPSILON*Math.max(1,Math.abs(L),Math.abs(ge))&&Math.abs(O-Ce)<=Mh.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ce))&&Math.abs(N-Te)<=Mh.EPSILON*Math.max(1,Math.abs(N),Math.abs(Te))},ws.sqrLen=ws.squaredLength=ws.len=ws.length=ws.dot=ws.mul=ws.setReal=ws.getReal=void 0;var Mh=dk(Zl),ov=dk(Ni),r9=dk(Ki);function i9(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(i9=function(g){return g?h:c})(u)}function dk(u,c){if(u&&u.__esModule)return u;if(u===null||hk(u)!=="object"&&typeof u!="function")return{default:u};var h=i9(c);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}function s9(u,c,h){var g=.5*h[0],_=.5*h[1],b=.5*h[2],S=c[0],L=c[1],O=c[2],N=c[3];return u[0]=S,u[1]=L,u[2]=O,u[3]=N,u[4]=g*N+_*O-b*L,u[5]=_*N+b*S-g*O,u[6]=b*N+g*L-_*S,u[7]=-g*S-_*L-b*O,u}function o9(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u}function a9(u,c,h){var g=c[0],_=c[1],b=c[2],S=c[3],L=h[4],O=h[5],N=h[6],U=h[7],j=c[4],X=c[5],re=c[6],fe=c[7],ge=h[0],Ce=h[1],Te=h[2],qe=h[3];return u[0]=g*qe+S*ge+_*Te-b*Ce,u[1]=_*qe+S*Ce+b*ge-g*Te,u[2]=b*qe+S*Te+g*Ce-_*ge,u[3]=S*qe-g*ge-_*Ce-b*Te,u[4]=g*U+S*L+_*N-b*O+j*qe+fe*ge+X*Te-re*Ce,u[5]=_*U+S*O+b*L-g*N+X*qe+fe*Ce+re*ge-j*Te,u[6]=b*U+S*N+g*O-_*L+re*qe+fe*Te+j*Ce-X*ge,u[7]=S*U-g*L-_*O-b*N+fe*qe-j*ge-X*Ce-re*Te,u}ws.getReal=ov.copy,ws.setReal=ov.copy,ws.mul=a9;var l9=ov.dot;ws.dot=l9;var c9=ov.length;ws.length=c9,ws.len=c9;var XM=ov.squaredLength;ws.squaredLength=XM,ws.sqrLen=XM;var ns={};function fk(u){return fk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},fk(u)}Object.defineProperty(ns,"__esModule",{value:!0}),ns.create=h9,ns.clone=function(u){var c=new a1.ARRAY_TYPE(2);return c[0]=u[0],c[1]=u[1],c},ns.fromValues=function(u,c){var h=new a1.ARRAY_TYPE(2);return h[0]=u,h[1]=c,h},ns.copy=function(u,c){return u[0]=c[0],u[1]=c[1],u},ns.set=function(u,c,h){return u[0]=c,u[1]=h,u},ns.add=function(u,c,h){return u[0]=c[0]+h[0],u[1]=c[1]+h[1],u},ns.subtract=d9,ns.multiply=f9,ns.divide=p9,ns.ceil=function(u,c){return u[0]=Math.ceil(c[0]),u[1]=Math.ceil(c[1]),u},ns.floor=function(u,c){return u[0]=Math.floor(c[0]),u[1]=Math.floor(c[1]),u},ns.min=function(u,c,h){return u[0]=Math.min(c[0],h[0]),u[1]=Math.min(c[1],h[1]),u},ns.max=function(u,c,h){return u[0]=Math.max(c[0],h[0]),u[1]=Math.max(c[1],h[1]),u},ns.round=function(u,c){return u[0]=Math.round(c[0]),u[1]=Math.round(c[1]),u},ns.scale=function(u,c,h){return u[0]=c[0]*h,u[1]=c[1]*h,u},ns.scaleAndAdd=function(u,c,h,g){return u[0]=c[0]+h[0]*g,u[1]=c[1]+h[1]*g,u},ns.distance=A9,ns.squaredDistance=g9,ns.length=m9,ns.squaredLength=v9,ns.negate=function(u,c){return u[0]=-c[0],u[1]=-c[1],u},ns.inverse=function(u,c){return u[0]=1/c[0],u[1]=1/c[1],u},ns.normalize=function(u,c){var h=c[0],g=c[1],_=h*h+g*g;return _>0&&(_=1/Math.sqrt(_)),u[0]=c[0]*_,u[1]=c[1]*_,u},ns.dot=function(u,c){return u[0]*c[0]+u[1]*c[1]},ns.cross=function(u,c,h){var g=c[0]*h[1]-c[1]*h[0];return u[0]=u[1]=0,u[2]=g,u},ns.lerp=function(u,c,h,g){var _=c[0],b=c[1];return u[0]=_+g*(h[0]-_),u[1]=b+g*(h[1]-b),u},ns.random=function(u,c){c=c||1;var h=2*a1.RANDOM()*Math.PI;return u[0]=Math.cos(h)*c,u[1]=Math.sin(h)*c,u},ns.transformMat2=function(u,c,h){var g=c[0],_=c[1];return u[0]=h[0]*g+h[2]*_,u[1]=h[1]*g+h[3]*_,u},ns.transformMat2d=function(u,c,h){var g=c[0],_=c[1];return u[0]=h[0]*g+h[2]*_+h[4],u[1]=h[1]*g+h[3]*_+h[5],u},ns.transformMat3=function(u,c,h){var g=c[0],_=c[1];return u[0]=h[0]*g+h[3]*_+h[6],u[1]=h[1]*g+h[4]*_+h[7],u},ns.transformMat4=function(u,c,h){var g=c[0],_=c[1];return u[0]=h[0]*g+h[4]*_+h[12],u[1]=h[1]*g+h[5]*_+h[13],u},ns.rotate=function(u,c,h,g){var _=c[0]-h[0],b=c[1]-h[1],S=Math.sin(g),L=Math.cos(g);return u[0]=_*L-b*S+h[0],u[1]=_*S+b*L+h[1],u},ns.angle=function(u,c){var h=u[0],g=u[1],_=c[0],b=c[1],S=Math.sqrt(h*h+g*g)*Math.sqrt(_*_+b*b);return Math.acos(Math.min(Math.max(S&&(h*_+g*b)/S,-1),1))},ns.zero=function(u){return u[0]=0,u[1]=0,u},ns.str=function(u){return"vec2("+u[0]+", "+u[1]+")"},ns.exactEquals=function(u,c){return u[0]===c[0]&&u[1]===c[1]},ns.equals=function(u,c){var h=u[0],g=u[1],_=c[0],b=c[1];return Math.abs(h-_)<=a1.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(g-b)<=a1.EPSILON*Math.max(1,Math.abs(g),Math.abs(b))},ns.forEach=ns.sqrLen=ns.sqrDist=ns.dist=ns.div=ns.mul=ns.sub=ns.len=void 0;var a1=function(u,c){if(u&&u.__esModule)return u;if(u===null||fk(u)!=="object"&&typeof u!="function")return{default:u};var h=u9(void 0);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}(Zl);function u9(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(u9=function(g){return g?h:c})(u)}function h9(){var u=new a1.ARRAY_TYPE(2);return a1.ARRAY_TYPE!=Float32Array&&(u[0]=0,u[1]=0),u}function d9(u,c,h){return u[0]=c[0]-h[0],u[1]=c[1]-h[1],u}function f9(u,c,h){return u[0]=c[0]*h[0],u[1]=c[1]*h[1],u}function p9(u,c,h){return u[0]=c[0]/h[0],u[1]=c[1]/h[1],u}function A9(u,c){return Math.hypot(c[0]-u[0],c[1]-u[1])}function g9(u,c){var h=c[0]-u[0],g=c[1]-u[1];return h*h+g*g}function m9(u){return Math.hypot(u[0],u[1])}function v9(u){var c=u[0],h=u[1];return c*c+h*h}ns.len=m9,ns.sub=d9,ns.mul=f9,ns.div=p9,ns.dist=A9,ns.sqrDist=g9,ns.sqrLen=v9;var zye=function(){var u=h9();return function(c,h,g,_,b,S){var L,O;for(h||(h=2),g||(g=0),O=_?Math.min(_*h+g,c.length):c.length,L=g;L<O;L+=h)u[0]=c[L],u[1]=c[L+1],b(u,u,S),c[L]=u[0],c[L+1]=u[1];return c}}();function pk(u){return pk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},pk(u)}ns.forEach=zye,Object.defineProperty(Xl,"__esModule",{value:!0}),o.a7=Xl.vec4=o.N=Xl.vec3=Xl.vec2=Xl.quat2=o.bi=Xl.quat=o.a6=Xl.mat4=o.co=Xl.mat3=Xl.mat2d=o.b4=Xl.mat2=Xl.glMatrix=void 0;var $ye=Cg(Zl);Xl.glMatrix=$ye;var Vye=Cg(sa);o.b4=Xl.mat2=Vye;var Hye=Cg(Aa);Xl.mat2d=Hye;var Gye=Cg(mo);o.co=Xl.mat3=Gye;var Qye=Cg(Ki);o.a6=Xl.mat4=Qye;var jye=Cg(Ni);o.bi=Xl.quat=jye;var Kye=Cg(ws);Xl.quat2=Kye;var Wye=Cg(ns);Xl.vec2=Wye;var qye=Cg(Hi);o.N=Xl.vec3=qye;var Yye=Cg(fs);function y9(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(y9=function(g){return g?h:c})(u)}function Cg(u,c){if(u&&u.__esModule)return u;if(u===null||pk(u)!=="object"&&typeof u!="function")return{default:u};var h=y9(c);if(h&&h.has(u))return h.get(u);var g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in u)if(b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)){var S=_?Object.getOwnPropertyDescriptor(u,b):null;S&&(S.get||S.set)?Object.defineProperty(g,b,S):g[b]=u[b]}return g.default=u,h&&h.set(u,g),g}o.a7=Xl.vec4=Yye;class Ak{constructor(c,h){this.pos=c,this.dir=h}intersectsPlane(c,h,g){const _=o.N.dot(h,this.dir);if(Math.abs(_)<1e-6)return!1;const b=((c[0]-this.pos[0])*h[0]+(c[1]-this.pos[1])*h[1]+(c[2]-this.pos[2])*h[2])/_;return g[0]=this.pos[0]+this.dir[0]*b,g[1]=this.pos[1]+this.dir[1]*b,g[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(c,h,g){if(o.N.equals(this.pos,c)||h===0)return g[0]=g[1]=g[2]=0,!1;const[_,b,S]=this.dir,L=this.pos[0]-c[0],O=this.pos[1]-c[1],N=this.pos[2]-c[2],U=_*_+b*b+S*S,j=2*(L*_+O*b+N*S),X=j*j-4*U*(L*L+O*O+N*N-h*h);if(X<0){const re=Math.max(-j/2,0),fe=L+_*re,ge=O+b*re,Ce=N+S*re,Te=Math.hypot(fe,ge,Ce);return g[0]=fe*h/Te,g[1]=ge*h/Te,g[2]=Ce*h/Te,!1}{const re=(-j-Math.sqrt(X))/(2*U);if(re<0){const fe=Math.hypot(L,O,N);return g[0]=L*h/fe,g[1]=O*h/fe,g[2]=N*h/fe,!1}return g[0]=L+_*re,g[1]=O+b*re,g[2]=N+S*re,!0}}}class gk{constructor(c,h,g,_,b){this.TL=c,this.TR=h,this.BR=g,this.BL=_,this.horizon=b}static fromInvProjectionMatrix(c,h,g){const _=[-1,1,1],b=[1,1,1],S=[1,-1,1],L=[-1,-1,1],O=o.N.transformMat4(_,_,c),N=o.N.transformMat4(b,b,c),U=o.N.transformMat4(S,S,c),j=o.N.transformMat4(L,L,c);return new gk(O,N,U,j,h/g)}}function iS(u,c,h){let g=1/0,_=-1/0;const b=[];for(const S of u){o.N.sub(b,S,c);const L=o.N.dot(b,h);g=Math.min(g,L),_=Math.max(_,L)}return[g,_]}function _9(u,c){let h=!0;for(let g=0;g<u.planes.length;g++){const _=u.planes[g];let b=0;for(let S=0;S<c.length;S++)b+=o.N.dot(_,c[S])+_[3]>=0;if(b===0)return 0;b!==c.length&&(h=!1)}return h?2:1}function b9(u,c){for(const h of u.projections){const g=iS(c,u.points[0],h.axis);if(h.projection[1]<g[0]||h.projection[0]>g[1])return 0}return 1}function w9(u,c){let h=0;const g=[0,0,0,0];for(let _=0;_<u.length;_++)g[0]=u[_][0],g[1]=u[_][1],g[2]=u[_][2],g[3]=1,o.a7.dot(g,c)>=0&&h++;return h}class mk{constructor(c,h){this.points=c||new Array(8).fill([0,0,0]),this.planes=h||new Array(6).fill([0,0,0,0]),this.bounds=ga.fromPoints(this.points),this.projections=[],this.frustumEdges=[o.N.sub([],this.points[2],this.points[3]),o.N.sub([],this.points[0],this.points[3]),o.N.sub([],this.points[4],this.points[0]),o.N.sub([],this.points[5],this.points[1]),o.N.sub([],this.points[6],this.points[2]),o.N.sub([],this.points[7],this.points[3])];for(const g of this.frustumEdges){const _=[0,-g[2],g[1]],b=[g[2],0,-g[0]];this.projections.push({axis:_,projection:iS(this.points,this.points[0],_)}),this.projections.push({axis:b,projection:iS(this.points,this.points[0],b)})}}static fromInvProjectionMatrix(c,h,g,_){const b=Math.pow(2,g),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(N=>{const U=o.a7.transformMat4([],N,c),j=1/U[3]/h*b;return o.a7.mul(U,U,[j,j,_?1/U[3]:j,j])}),L=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(N=>{const U=o.N.sub([],S[N[0]],S[N[1]]),j=o.N.sub([],S[N[2]],S[N[1]]),X=o.N.normalize([],o.N.cross([],U,j)),re=-o.N.dot(X,S[N[1]]);return X.concat(re)}),O=[];for(let N=0;N<S.length;N++)O.push([S[N][0],S[N][1],S[N][2]]);return new mk(O,L)}intersectsPrecise(c,h,g){for(let _=0;_<h.length;_++)if(!w9(c,h[_]))return 0;for(let _=0;_<this.planes.length;_++)if(!w9(c,this.planes[_]))return 0;for(const _ of g)for(const b of this.frustumEdges){const S=o.N.cross([],_,b),L=o.N.length(S);if(L===0)continue;o.N.scale(S,S,1/L);const O=iS(this.points,this.points[0],S),N=iS(c,this.points[0],S);if(O[0]>N[1]||N[0]>O[1])return 0}return 1}}class ga{static fromPoints(c){const h=[1/0,1/0,1/0],g=[-1/0,-1/0,-1/0];for(const _ of c)o.N.min(h,h,_),o.N.max(g,g,_);return new ga(h,g)}static fromTileIdAndHeight(c,h,g){const _=1<<c.canonical.z,b=c.canonical.x,S=c.canonical.y;return new ga([b/_,S/_,h],[(b+1)/_,(S+1)/_,g])}static applyTransform(c,h){const g=c.getCorners();for(let _=0;_<g.length;++_)o.N.transformMat4(g[_],g[_],h);return ga.fromPoints(g)}static projectAabbCorners(c,h){const g=c.getCorners();for(let _=0;_<g.length;++_)o.N.transformMat4(g[_],g[_],h);return g}constructor(c,h){this.min=c,this.max=h,this.center=o.N.scale([],o.N.add([],this.min,this.max),.5)}quadrant(c){const h=[c%2==0,c<2],g=o.N.clone(this.min),_=o.N.clone(this.max);for(let b=0;b<h.length;b++)g[b]=h[b]?this.min[b]:this.center[b],_[b]=h[b]?this.center[b]:this.max[b];return _[2]=this.max[2],new ga(g,_)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}distanceZ(c){return Math.max(Math.min(this.max[2],c[2]),this.min[2])-c[2]}getCorners(){const c=this.min,h=this.max;return[[c[0],c[1],c[2]],[h[0],c[1],c[2]],[h[0],h[1],c[2]],[c[0],h[1],c[2]],[c[0],c[1],h[2]],[h[0],c[1],h[2]],[h[0],h[1],h[2]],[c[0],h[1],h[2]]]}intersects(c){return this.intersectsAabb(c.bounds)?_9(c,this.getCorners()):0}intersectsFlat(c){return this.intersectsAabb(c.bounds)?_9(c,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(c,h){return h||this.intersects(c)?b9(c,this.getCorners()):0}intersectsPreciseFlat(c,h){return h||this.intersectsFlat(c)?b9(c,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(c){for(let h=0;h<3;++h)if(this.min[h]>c.max[h]||c.min[h]>this.max[h])return!1;return!0}intersectsAabbXY(c){return!(this.min[0]>c.max[0]||c.min[0]>this.max[0]||this.min[1]>c.max[1]||c.min[1]>this.max[1])}encapsulate(c){for(let h=0;h<3;h++)this.min[h]=Math.min(this.min[h],c.min[h]),this.max[h]=Math.max(this.max[h],c.max[h])}encapsulatePoint(c){for(let h=0;h<3;h++)this.min[h]=Math.min(this.min[h],c[h]),this.max[h]=Math.max(this.max[h],c[h])}closestPoint(c){return[Math.max(Math.min(this.max[0],c[0]),this.min[0]),Math.max(Math.min(this.max[1],c[1]),this.min[1]),Math.max(Math.min(this.max[2],c[2]),this.min[2])]}}Pe(ga,"Aabb");const Xye=Ks([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:ZM}=Xye,Zye=Ks([{name:"a_pos_3",components:3,type:"Int16"}]);var x9=Ks([{name:"a_pos",type:"Int16",components:2}]);function JM(u){return u*Ze/bn}const Jye=[new ga([$t,$t,$t],[pn,pn,pn]),new ga([$t,$t,$t],[0,0,pn]),new ga([0,$t,$t],[pn,0,pn]),new ga([$t,0,$t],[0,pn,pn]),new ga([0,0,$t],[pn,pn,pn])];function C9(u,c,h,g=!0){const _=o.N.scale([],u._camera.position,u.worldSize),b=[c,h,1,1];o.a7.transformMat4(b,b,u.pixelMatrixInverse),o.a7.scale(b,b,1/b[3]);const S=o.N.sub([],b,_),L=o.N.normalize([],S),O=u.globeMatrix,N=[O[12],O[13],O[14]],U=o.N.sub([],N,_),j=o.N.length(U),X=o.N.normalize([],U),re=u.worldSize/(2*Math.PI),fe=o.N.dot(X,L),ge=Math.asin(re/j);if(ge<Math.acos(fe)){if(!g)return null;const tn=[],Sn=[];o.N.scale(tn,L,j/fe),o.N.normalize(Sn,o.N.sub(Sn,tn,U)),o.N.normalize(L,o.N.add(L,U,o.N.scale(L,Sn,Math.tan(ge)*j)))}const Ce=[];new Ak(_,L).closestPointOnSphere(N,re,Ce);const Te=o.N.normalize([],ze(O,0)),qe=o.N.normalize([],ze(O,1)),tt=o.N.normalize([],ze(O,2)),et=o.N.dot(Te,Ce),vt=o.N.dot(qe,Ce),dt=o.N.dot(tt,Ce),Pt=ee(Math.asin(-vt/re));let Qt=ee(Math.atan2(et,dt));Qt=u.center.lng+function(tn,Sn){const Dn=(Sn-tn+180)%360-180;return Dn<-180?Dn+360:Dn}(u.center.lng,Qt);const Xt=Vi(Qt),An=pe(vi(Pt),0,1);return new Ls(Xt,An)}class e_e{constructor(c,h,g){this.a=o.N.sub([],c,g),this.b=o.N.sub([],h,g),this.center=g;const _=o.N.normalize([],this.a),b=o.N.normalize([],this.b);this.angle=Math.acos(o.N.dot(_,b))}}function vk(u,c){if(u.angle===0)return null;let h;return h=u.a[c]===0?1/u.angle*.5*Math.PI:1/u.angle*Math.atan(u.b[c]/u.a[c]/Math.sin(u.angle)-1/Math.tan(u.angle)),h<0||h>1?null:function(g,_,b,S){const L=Math.sin(b);return g*(Math.sin((1-S)*b)/L)+_*(Math.sin(S*b)/L)}(u.a[c],u.b[c],u.angle,pe(h,0,1))+u.center[c]}function Eg(u){if(u.z<=1)return Jye[u.z+2*u.y+u.x];const c=yk(eL(u));return ga.fromPoints(c)}function av(u,c,h){return o.N.scale(u,u,1-h),o.N.scaleAndAdd(u,u,c,h)}function E9(u,c,h){for(const g of u)o.N.transformMat4(g,g,c),o.N.scale(g,g,h)}function S9(u,c,h,g){const _=c/u.worldSize,b=u.globeMatrix;if(h.z<=1){const Xt=Eg(h).getCorners();return E9(Xt,b,_),ga.fromPoints(Xt)}const S=eL(h,g),L=yk(S,Ze+JM(u._tileCoverLift));E9(L,b,_);const O=Number.MAX_VALUE,N=[-O,-O,-O],U=[O,O,O];if(S.contains(u.center)){for(const tn of L)o.N.min(U,U,tn),o.N.max(N,N,tn);N[2]=0;const Xt=u.point,An=[Xt.x*_,Xt.y*_,0];return o.N.min(U,U,An),o.N.max(N,N,An),new ga(U,N)}if(u._tileCoverLift>0){for(const Xt of L)o.N.min(U,U,Xt),o.N.max(N,N,Xt);return new ga(U,N)}const j=[b[12]*_,b[13]*_,b[14]*_],X=S.getCenter(),re=pe(u.center.lat,-os,os),fe=pe(X.lat,-os,os),ge=Vi(u.center.lng),Ce=vi(re);let Te=ge-Vi(X.lng);const qe=Ce-vi(fe);Te>.5?Te-=1:Te<-.5&&(Te+=1);let tt=0;if(Math.abs(Te)>Math.abs(qe))tt=Te>=0?1:3;else{tt=qe>=0?0:2;const Xt=[b[4]*_,b[5]*_,b[6]*_],An=-Math.sin(Y(qe>=0?S.getSouth():S.getNorth()))*Ze;o.N.scaleAndAdd(j,j,Xt,An)}const et=L[tt],vt=L[(tt+1)%4],dt=new e_e(et,vt,j),Pt=[vk(dt,0)||et[0],vk(dt,1)||et[1],vk(dt,2)||et[2]],Qt=D0(u.zoom);if(Qt>0){const Xt=function({x:tn,y:Sn,z:Dn},wn,kn,yn,On){const lr=1/(1<<Dn);let Un=tn*lr,Or=Un+lr,Er=Sn*lr,qn=Er+lr,oi=0;const Kr=(Un+Or)/2-yn;return Kr>.5?oi=-1:Kr<-.5&&(oi=1),Un=((Un+oi)*wn-(yn*=wn))*kn+yn,Or=((Or+oi)*wn-yn)*kn+yn,Er=(Er*wn-(On*=wn))*kn+On,qn=(qn*wn-On)*kn+On,[[Un,qn,0],[Or,qn,0],[Or,Er,0],[Un,Er,0]]}(h,c,u._pixelsPerMercatorPixel,ge,Ce);for(let tn=0;tn<L.length;tn++)av(L[tn],Xt[tn],Qt);const An=o.N.add([],Xt[tt],Xt[(tt+1)%4]);o.N.scale(An,An,.5),av(Pt,An,Qt)}for(const Xt of L)o.N.min(U,U,Xt),o.N.max(N,N,Xt);return U[2]=Math.min(et[2],vt[2]),o.N.min(U,U,Pt),o.N.max(N,N,Pt),new ga(U,N)}function eL({x:u,y:c,z:h},g=!1){const _=1/(1<<h),b=new Yt(Bi(u*_),c===(1<<h)-1&&g?-90:ms((c+1)*_)),S=new Yt(Bi((u+1)*_),c===0&&g?90:ms(c*_));return new vn(b,S)}function yk(u,c=Ze){const h=Y(u.getNorth()),g=Y(u.getSouth()),_=Math.cos(h),b=Math.cos(g),S=Math.sin(h),L=Math.sin(g),O=u.getWest(),N=u.getEast();return[Kt(b,L,O,c),Kt(b,L,N,c),Kt(_,S,N,c),Kt(_,S,O,c)]}function sS(u,c,h,g){const _=1<<h.z,b=(u/zn+h.x)/_;return Cn(ms((c/zn+h.y)/_),Bi(b),g)}function tL({min:u,max:c}){return ut/Math.max(c[0]-u[0],c[1]-u[1],c[2]-u[2])}const T9=new Float64Array(16);function nL(u){const c=tL(u),h=o.a6.fromScaling(T9,[c,c,c]);return o.a6.translate(h,h,o.N.negate([],u.min))}function _k(u){const c=o.a6.fromTranslation(T9,u.min),h=1/tL(u);return o.a6.scale(c,c,[h,h,h])}function bk(u){const c=zn/(2*Math.PI);return u/(2*Math.PI)/c}function I9(u,c){return zn/(512*Math.pow(2,u))*tL(Eg(c))}function B9(u,c,h,g,_){const b=bk(h),S=[u,c,-h/(2*Math.PI)],L=o.a6.identity(new Float64Array(16));return o.a6.translate(L,L,S),o.a6.scale(L,L,[b,b,b]),o.a6.rotateX(L,L,Y(-_)),o.a6.rotateY(L,L,Y(-g)),L}function D0(u){return ue(ct,Ve,u)}function M9(u,c){const h=Cn(c.lat,c.lng),g=function(b){const S=Cn(b._center.lat,b._center.lng),L=o.N.fromValues(0,1,0);let O=o.N.cross([],L,S);const N=o.a6.fromRotation([],-b.angle,S);O=o.N.transformMat4(O,O,N),o.a6.fromRotation(N,-b._pitch,O);const U=o.N.normalize([],S);return o.N.scale(U,U,JM(b.cameraToCenterDistance/b.pixelsPerMeter)),o.N.transformMat4(U,U,N),o.N.add([],S,U)}(u),_=o.N.subtract([],g,h);return o.N.angle(_,h)}function wk(u,c){return M9(u,c)>Math.PI/2*1.01}const L9=Y(85),t_e=Math.cos(L9),n_e=Math.sin(L9),r_e=o.a6.create(),R9=u=>{const c=[];return u.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),u.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c};function P9(u,c,h,g,_,b,S,L,O){if(b&&u.queryGeometry.isAboveHorizon)return!1;b&&(O*=u.pixelToTileUnitsFactor);const N=u.tileID.canonical,U=h.projection.upVectorScale(N,h.center.lat,h.worldSize).metersToTile;for(const j of c)for(const X of j){const re=X.add(L),fe=_&&h.elevation?h.elevation.exaggeration()*_.getElevationAt(re.x,re.y,!0):0,ge=h.projection.projectTilePoint(re.x,re.y,N);if(fe>0){const tt=h.projection.upVector(N,re.x,re.y);ge.x+=tt[0]*U*fe,ge.y+=tt[1]*U*fe,ge.z+=tt[2]*U*fe}const Ce=b?re:i_e(ge.x,ge.y,ge.z,g),Te=b?u.tilespaceRays.map(tt=>o_e(tt,fe)):u.queryGeometry.screenGeometry,qe=o.a7.transformMat4([],[ge.x,ge.y,ge.z,1],g);if(!S&&b?O*=qe[3]/h.cameraToCenterDistance:S&&!b&&(O*=h.cameraToCenterDistance/qe[3]),b){const tt=ms((X.y/zn+N.y)/(1<<N.z));O/=h.projection.pixelsPerMeter(tt,1)/Li(1,tt)}if(wg(Te,Ce,O))return!0}return!1}function i_e(u,c,h,g){const _=o.a7.transformMat4([],[u,c,h,1],g);return new W(_[0]/_[3],_[1]/_[3])}const F9=o.N.fromValues(0,0,0),s_e=o.N.fromValues(0,0,1);function o_e(u,c){const h=o.N.create();return F9[2]=c,u.intersectsPlane(F9,s_e,h),new W(h[0],h[1])}class O9 extends nh{}function N9(u,{width:c,height:h},g,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==c*h*g)throw new RangeError("mismatched image size")}else _=new Uint8Array(c*h*g);return u.width=c,u.height=h,u.data=_,u}function k9(u,c,h){const{width:g,height:_}=c;g===u.width&&_===u.height||(xk(u,c,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,g),height:Math.min(u.height,_)},h),u.width=g,u.height=_,u.data=c.data)}function xk(u,c,h,g,_,b,S){if(_.width===0||_.height===0)return c;if(_.width>u.width||_.height>u.height||h.x>u.width-_.width||h.y>u.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>c.width||_.height>c.height||g.x>c.width-_.width||g.y>c.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const L=u.data,O=c.data,N=b===4&&S;for(let U=0;U<_.height;U++){const j=((h.y+U)*u.width+h.x)*b,X=((g.y+U)*c.width+g.x)*b;if(N)for(let re=0;re<_.width;re++){const fe=j+re*b+3,ge=X+re*b;O[ge+0]=255,O[ge+1]=255,O[ge+2]=255,O[ge+3]=L[fe]}else for(let re=0;re<_.width*b;re++)O[X+re]=L[j+re]}return c}Pe(O9,"HeatmapBucket",{omit:["layers"]});class U0{constructor(c,h){N9(this,c,1,h)}resize(c){k9(this,new U0(c),1)}clone(){return new U0({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,g,_,b){xk(c,h,g,_,b,1)}}class vf{constructor(c,h){N9(this,c,4,h)}resize(c){k9(this,new vf(c),4)}replace(c,h){h?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new vf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,g,_,b,S){xk(c,h,g,_,b,4,S)}}class D9{constructor(c,h){this.width=c.width,this.height=c.height,this.data=h instanceof Uint8Array?new Float32Array(h.buffer):h}}Pe(U0,"AlphaImage"),Pe(vf,"RGBAImage");const a_e=new Js({visibility:new Gn(rn.layout_heatmap.visibility)});var l_e={paint:new Js({"heatmap-radius":new Mr(rn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mr(rn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gn(rn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nl(rn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gn(rn.paint_heatmap["heatmap-opacity"])}),layout:a_e};function oS(u){const c={},h=u.resolution||256,g=u.clips?u.clips.length:1,_=u.image||new vf({width:h,height:g}),b=(S,L,O)=>{c[u.evaluationKey]=O;const N=u.expression.evaluate(c);N&&(_.data[S+L+0]=Math.floor(255*N.r/N.a),_.data[S+L+1]=Math.floor(255*N.g/N.a),_.data[S+L+2]=Math.floor(255*N.b/N.a),_.data[S+L+3]=Math.floor(255*N.a))};if(u.clips)for(let S=0,L=0;S<g;++S,L+=4*h)for(let O=0,N=0;O<h;O++,N+=4){const U=O/(h-1),{start:j,end:X}=u.clips[S];b(L,N,j*(1-U)+X*U)}else for(let S=0,L=0;S<h;S++,L+=4)b(0,L,S/(h-1));return _}const c_e=new Js({visibility:new Gn(rn.layout_hillshade.visibility)});var u_e={paint:new Js({"hillshade-illumination-direction":new Gn(rn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Gn(rn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gn(rn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gn(rn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gn(rn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gn(rn.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Gn(rn.paint_hillshade["hillshade-emissive-strength"])}),layout:c_e};const h_e=Ks([{name:"a_pos",components:2,type:"Int16"}],4),{members:d_e}=h_e;var Ck={exports:{}};function rL(u,c,h){h=h||2;var g,_,b,S,L,O,N,U=c&&c.length,j=U?c[0]*h:u.length,X=U9(u,0,j,h,!0),re=[];if(!X||X.next===X.prev)return re;if(U&&(X=function(ge,Ce,Te,qe){var tt,et,vt,dt=[];for(tt=0,et=Ce.length;tt<et;tt++)(vt=U9(ge,Ce[tt]*qe,tt<et-1?Ce[tt+1]*qe:ge.length,qe,!1))===vt.next&&(vt.steiner=!0),dt.push(__e(vt));for(dt.sort(m_e),tt=0;tt<dt.length;tt++)Te=v_e(dt[tt],Te);return Te}(u,c,X,h)),u.length>80*h){g=b=u[0],_=S=u[1];for(var fe=h;fe<j;fe+=h)(L=u[fe])<g&&(g=L),(O=u[fe+1])<_&&(_=O),L>b&&(b=L),O>S&&(S=O);N=(N=Math.max(b-g,S-_))!==0?32767/N:0}return aS(X,re,h,g,_,N,0),re}function U9(u,c,h,g,_){var b,S;if(_===Tk(u,c,h,g)>0)for(b=c;b<h;b+=g)S=V9(b,u[b],u[b+1],S);else for(b=h-g;b>=c;b-=g)S=V9(b,u[b],u[b+1],S);return S&&iL(S,S.next)&&(cS(S),S=S.next),S}function l1(u,c){if(!u)return u;c||(c=u);var h,g=u;do if(h=!1,g.steiner||!iL(g,g.next)&&yl(g.prev,g,g.next)!==0)g=g.next;else{if(cS(g),(g=c=g.prev)===g.next)break;h=!0}while(h||g!==c);return c}function aS(u,c,h,g,_,b,S){if(u){!S&&b&&function(U,j,X,re){var fe=U;do fe.z===0&&(fe.z=Ek(fe.x,fe.y,j,X,re)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==U);fe.prevZ.nextZ=null,fe.prevZ=null,function(ge){var Ce,Te,qe,tt,et,vt,dt,Pt,Qt=1;do{for(Te=ge,ge=null,et=null,vt=0;Te;){for(vt++,qe=Te,dt=0,Ce=0;Ce<Qt&&(dt++,qe=qe.nextZ);Ce++);for(Pt=Qt;dt>0||Pt>0&&qe;)dt!==0&&(Pt===0||!qe||Te.z<=qe.z)?(tt=Te,Te=Te.nextZ,dt--):(tt=qe,qe=qe.nextZ,Pt--),et?et.nextZ=tt:ge=tt,tt.prevZ=et,et=tt;Te=qe}et.nextZ=null,Qt*=2}while(vt>1)}(fe)}(u,g,_,b);for(var L,O,N=u;u.prev!==u.next;)if(L=u.prev,O=u.next,b?p_e(u,g,_,b):f_e(u))c.push(L.i/h|0),c.push(u.i/h|0),c.push(O.i/h|0),cS(u),u=O.next,N=O.next;else if((u=O)===N){S?S===1?aS(u=A_e(l1(u),c,h),c,h,g,_,b,2):S===2&&g_e(u,c,h,g,_,b):aS(l1(u),c,h,g,_,b,1);break}}}function f_e(u){var c=u.prev,h=u,g=u.next;if(yl(c,h,g)>=0)return!1;for(var _=c.x,b=h.x,S=g.x,L=c.y,O=h.y,N=g.y,U=_<b?_<S?_:S:b<S?b:S,j=L<O?L<N?L:N:O<N?O:N,X=_>b?_>S?_:S:b>S?b:S,re=L>O?L>N?L:N:O>N?O:N,fe=g.next;fe!==c;){if(fe.x>=U&&fe.x<=X&&fe.y>=j&&fe.y<=re&&Iw(_,L,b,O,S,N,fe.x,fe.y)&&yl(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function p_e(u,c,h,g){var _=u.prev,b=u,S=u.next;if(yl(_,b,S)>=0)return!1;for(var L=_.x,O=b.x,N=S.x,U=_.y,j=b.y,X=S.y,re=L<O?L<N?L:N:O<N?O:N,fe=U<j?U<X?U:X:j<X?j:X,ge=L>O?L>N?L:N:O>N?O:N,Ce=U>j?U>X?U:X:j>X?j:X,Te=Ek(re,fe,c,h,g),qe=Ek(ge,Ce,c,h,g),tt=u.prevZ,et=u.nextZ;tt&&tt.z>=Te&&et&&et.z<=qe;){if(tt.x>=re&&tt.x<=ge&&tt.y>=fe&&tt.y<=Ce&&tt!==_&&tt!==S&&Iw(L,U,O,j,N,X,tt.x,tt.y)&&yl(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,et.x>=re&&et.x<=ge&&et.y>=fe&&et.y<=Ce&&et!==_&&et!==S&&Iw(L,U,O,j,N,X,et.x,et.y)&&yl(et.prev,et,et.next)>=0))return!1;et=et.nextZ}for(;tt&&tt.z>=Te;){if(tt.x>=re&&tt.x<=ge&&tt.y>=fe&&tt.y<=Ce&&tt!==_&&tt!==S&&Iw(L,U,O,j,N,X,tt.x,tt.y)&&yl(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;et&&et.z<=qe;){if(et.x>=re&&et.x<=ge&&et.y>=fe&&et.y<=Ce&&et!==_&&et!==S&&Iw(L,U,O,j,N,X,et.x,et.y)&&yl(et.prev,et,et.next)>=0)return!1;et=et.nextZ}return!0}function A_e(u,c,h){var g=u;do{var _=g.prev,b=g.next.next;!iL(_,b)&&z9(_,g,g.next,b)&&lS(_,b)&&lS(b,_)&&(c.push(_.i/h|0),c.push(g.i/h|0),c.push(b.i/h|0),cS(g),cS(g.next),g=u=b),g=g.next}while(g!==u);return l1(g)}function g_e(u,c,h,g,_,b){var S=u;do{for(var L=S.next.next;L!==S.prev;){if(S.i!==L.i&&b_e(S,L)){var O=$9(S,L);return S=l1(S,S.next),O=l1(O,O.next),aS(S,c,h,g,_,b,0),void aS(O,c,h,g,_,b,0)}L=L.next}S=S.next}while(S!==u)}function m_e(u,c){return u.x-c.x}function v_e(u,c){var h=function(_,b){var S,L=b,O=_.x,N=_.y,U=-1/0;do{if(N<=L.y&&N>=L.next.y&&L.next.y!==L.y){var j=L.x+(N-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(j<=O&&j>U&&(U=j,S=L.x<L.next.x?L:L.next,j===O))return S}L=L.next}while(L!==b);if(!S)return null;var X,re=S,fe=S.x,ge=S.y,Ce=1/0;L=S;do O>=L.x&&L.x>=fe&&O!==L.x&&Iw(N<ge?O:U,N,fe,ge,N<ge?U:O,N,L.x,L.y)&&(X=Math.abs(N-L.y)/(O-L.x),lS(L,_)&&(X<Ce||X===Ce&&(L.x>S.x||L.x===S.x&&y_e(S,L)))&&(S=L,Ce=X)),L=L.next;while(L!==re);return S}(u,c);if(!h)return c;var g=$9(h,u);return l1(g,g.next),l1(h,h.next)}function y_e(u,c){return yl(u.prev,u,c.prev)<0&&yl(c.next,u,u.next)<0}function Ek(u,c,h,g,_){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*_|0)|u<<8))|u<<4))|u<<2))|u<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-g)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function __e(u){var c=u,h=u;do(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next;while(c!==u);return h}function Iw(u,c,h,g,_,b,S,L){return(_-S)*(c-L)>=(u-S)*(b-L)&&(u-S)*(g-L)>=(h-S)*(c-L)&&(h-S)*(b-L)>=(_-S)*(g-L)}function b_e(u,c){return u.next.i!==c.i&&u.prev.i!==c.i&&!function(h,g){var _=h;do{if(_.i!==h.i&&_.next.i!==h.i&&_.i!==g.i&&_.next.i!==g.i&&z9(_,_.next,h,g))return!0;_=_.next}while(_!==h);return!1}(u,c)&&(lS(u,c)&&lS(c,u)&&function(h,g){var _=h,b=!1,S=(h.x+g.x)/2,L=(h.y+g.y)/2;do _.y>L!=_.next.y>L&&_.next.y!==_.y&&S<(_.next.x-_.x)*(L-_.y)/(_.next.y-_.y)+_.x&&(b=!b),_=_.next;while(_!==h);return b}(u,c)&&(yl(u.prev,u,c.prev)||yl(u,c.prev,c))||iL(u,c)&&yl(u.prev,u,u.next)>0&&yl(c.prev,c,c.next)>0)}function yl(u,c,h){return(c.y-u.y)*(h.x-c.x)-(c.x-u.x)*(h.y-c.y)}function iL(u,c){return u.x===c.x&&u.y===c.y}function z9(u,c,h,g){var _=oL(yl(u,c,h)),b=oL(yl(u,c,g)),S=oL(yl(h,g,u)),L=oL(yl(h,g,c));return _!==b&&S!==L||!(_!==0||!sL(u,h,c))||!(b!==0||!sL(u,g,c))||!(S!==0||!sL(h,u,g))||!(L!==0||!sL(h,c,g))}function sL(u,c,h){return c.x<=Math.max(u.x,h.x)&&c.x>=Math.min(u.x,h.x)&&c.y<=Math.max(u.y,h.y)&&c.y>=Math.min(u.y,h.y)}function oL(u){return u>0?1:u<0?-1:0}function lS(u,c){return yl(u.prev,u,u.next)<0?yl(u,c,u.next)>=0&&yl(u,u.prev,c)>=0:yl(u,c,u.prev)<0||yl(u,u.next,c)<0}function $9(u,c){var h=new Sk(u.i,u.x,u.y),g=new Sk(c.i,c.x,c.y),_=u.next,b=c.prev;return u.next=c,c.prev=u,h.next=_,_.prev=h,g.next=h,h.prev=g,b.next=g,g.prev=b,g}function V9(u,c,h,g){var _=new Sk(u,c,h);return g?(_.next=g.next,_.prev=g,g.next.prev=_,g.next=_):(_.prev=_,_.next=_),_}function cS(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Sk(u,c,h){this.i=u,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tk(u,c,h,g){for(var _=0,b=c,S=h-g;b<h;b+=g)_+=(u[S]-u[b])*(u[b+1]+u[S+1]),S=b;return _}Ck.exports=rL,Ck.exports.default=rL,rL.deviation=function(u,c,h,g){var _=c&&c.length,b=Math.abs(Tk(u,0,_?c[0]*h:u.length,h));if(_)for(var S=0,L=c.length;S<L;S++)b-=Math.abs(Tk(u,c[S]*h,S<L-1?c[S+1]*h:u.length,h));var O=0;for(S=0;S<g.length;S+=3){var N=g[S]*h,U=g[S+1]*h,j=g[S+2]*h;O+=Math.abs((u[N]-u[j])*(u[U+1]-u[N+1])-(u[N]-u[U])*(u[j+1]-u[N+1]))}return b===0&&O===0?0:Math.abs((O-b)/b)},rL.flatten=function(u){for(var c=u[0][0].length,h={vertices:[],holes:[],dimensions:c},g=0,_=0;_<u.length;_++){for(var b=0;b<u[_].length;b++)for(var S=0;S<c;S++)h.vertices.push(u[_][b][S]);_>0&&h.holes.push(g+=u[_-1].length)}return h};var aL=F(Ck.exports);function Ik(u,c){const h=u.length;if(h<=1)return[u];const g=[];let _,b;for(let S=0;S<h;S++){const L=He(u[S]);L!==0&&(u[S].area=Math.abs(L),b===void 0&&(b=L<0),b===L<0?(_&&g.push(_),_=[u[S]]):_.push(u[S]))}if(_&&g.push(_),c>1)for(let S=0;S<g.length;S++)g[S].length<=c||(k_(g[S],c,1,g[S].length-1,w_e),g[S]=g[S].slice(0,c));return g}function w_e(u,c){return c.area-u.area}function Bk(u,c,h){const g=h.patternDependencies;let _=!1;for(const b of c){const S=b.paint.get(`${u}-pattern`);S.isConstant()||(_=!0);const L=S.constantOr(null);L&&(_=!0,g[L]=!0)}return _}function Mk(u,c,h,g,_){const b=_.patternDependencies;for(const S of c){const L=S.paint.get(`${u}-pattern`).value;if(L.kind!=="constant"){let O=L.evaluate({zoom:g},h,{},_.availableImages);O=O&&O.name?O.name:O,b[O]=!0,h.patterns[S.id]=O}}return h}class Lk{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ru,this.indexArray=new Wo,this.indexArray2=new Bh,this.programConfigurations=new Oe(c.layers,c.zoom),this.segments=new Ea,this.segments2=new Ea,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.projection=c.projection}populate(c,h,g,_){this.hasPattern=Bk("fill",this.layers,h);const b=this.layers[0].layout.get("fill-sort-key"),S=[];for(const{feature:L,id:O,index:N,sourceLayerIndex:U}of c){const j=this.layers[0]._featureFilter.needGeometry,X=Al(L,j);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),X,g))continue;const re=b?b.evaluate(X,{},g,h.availableImages):void 0,fe={id:O,properties:L.properties,type:L.type,sourceLayerIndex:U,index:N,geometry:j?X.geometry:kl(L,g,_),patterns:{},sortKey:re};S.push(fe)}b&&S.sort((L,O)=>L.sortKey-O.sortKey);for(const L of S){const{geometry:O,index:N,sourceLayerIndex:U}=L;if(this.hasPattern){const j=Mk("fill",this.layers,L,this.zoom,h);this.patternFeatures.push(j)}else this.addFeature(L,O,N,g,{},h.availableImages,h.brightness);h.featureIndex.insert(c[N].feature,O,N,U,this.index)}}update(c,h,g,_,b){const S=Object.keys(c).length!==0;S&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(c,h,S?this.stateDependentLayers:this.layers,g,_,b)}addFeatures(c,h,g,_,b,S){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,h,g,_,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,d_e),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,h,g,_,b,S=[],L){for(const O of Ik(h,500)){let N=0;for(const ge of O)N+=ge.length;const U=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray),j=U.vertexLength,X=[],re=[];for(const ge of O){if(ge.length===0)continue;ge!==O[0]&&re.push(X.length/2);const Ce=this.segments2.prepareSegment(ge.length,this.layoutVertexArray,this.indexArray2),Te=Ce.vertexLength;this.layoutVertexArray.emplaceBack(ge[0].x,ge[0].y),this.indexArray2.emplaceBack(Te+ge.length-1,Te),X.push(ge[0].x),X.push(ge[0].y);for(let qe=1;qe<ge.length;qe++)this.layoutVertexArray.emplaceBack(ge[qe].x,ge[qe].y),this.indexArray2.emplaceBack(Te+qe-1,Te+qe),X.push(ge[qe].x),X.push(ge[qe].y);Ce.vertexLength+=ge.length,Ce.primitiveLength+=ge.length}const fe=aL(X,re);for(let ge=0;ge<fe.length;ge+=3)this.indexArray.emplaceBack(j+fe[ge],j+fe[ge+1],j+fe[ge+2]);U.vertexLength+=N,U.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,b,S,_,L)}}Pe(Lk,"FillBucket",{omit:["layers","patternFeatures"]});const x_e=new Js({"fill-sort-key":new Mr(rn.layout_fill["fill-sort-key"]),visibility:new Gn(rn.layout_fill.visibility)});var C_e={paint:new Js({"fill-antialias":new Gn(rn.paint_fill["fill-antialias"]),"fill-opacity":new Mr(rn.paint_fill["fill-opacity"]),"fill-color":new Mr(rn.paint_fill["fill-color"]),"fill-outline-color":new Mr(rn.paint_fill["fill-outline-color"]),"fill-translate":new Gn(rn.paint_fill["fill-translate"]),"fill-translate-anchor":new Gn(rn.paint_fill["fill-translate-anchor"]),"fill-pattern":new Mr(rn.paint_fill["fill-pattern"]),"fill-emissive-strength":new Gn(rn.paint_fill["fill-emissive-strength"])}),layout:x_e};const E_e=Ks([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),S_e=Ks([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),T_e=Ks([{name:"a_centroid_pos",components:2,type:"Uint16"}]),I_e=Ks([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),B_e=Ks([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:M_e}=E_e;var lL={},L_e=Q,H9=Bw;function Bw(u,c,h,g,_){this.properties={},this.extent=h,this.type=0,this._pbf=u,this._geometry=-1,this._keys=g,this._values=_,u.readFields(R_e,this,c)}function R_e(u,c,h){u==1?c.id=h.readVarint():u==2?function(g,_){for(var b=g.readVarint()+g.pos;g.pos<b;){var S=_._keys[g.readVarint()],L=_._values[g.readVarint()];_.properties[S]=L}}(h,c):u==3?c.type=h.readVarint():u==4&&(c._geometry=h.pos)}function P_e(u){for(var c,h,g=0,_=0,b=u.length,S=b-1;_<b;S=_++)g+=((h=u[S]).x-(c=u[_]).x)*(c.y+h.y);return g}Bw.types=["Unknown","Point","LineString","Polygon"],Bw.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var c,h=u.readVarint()+u.pos,g=1,_=0,b=0,S=0,L=[];u.pos<h;){if(_<=0){var O=u.readVarint();g=7&O,_=O>>3}if(_--,g===1||g===2)b+=u.readSVarint(),S+=u.readSVarint(),g===1&&(c&&L.push(c),c=[]),c.push(new L_e(b,S));else{if(g!==7)throw new Error("unknown command "+g);c&&c.push(c[0].clone())}}return c&&L.push(c),L},Bw.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var c=u.readVarint()+u.pos,h=1,g=0,_=0,b=0,S=1/0,L=-1/0,O=1/0,N=-1/0;u.pos<c;){if(g<=0){var U=u.readVarint();h=7&U,g=U>>3}if(g--,h===1||h===2)(_+=u.readSVarint())<S&&(S=_),_>L&&(L=_),(b+=u.readSVarint())<O&&(O=b),b>N&&(N=b);else if(h!==7)throw new Error("unknown command "+h)}return[S,O,L,N]},Bw.prototype.toGeoJSON=function(u,c,h){var g,_,b=this.extent*Math.pow(2,h),S=this.extent*u,L=this.extent*c,O=this.loadGeometry(),N=Bw.types[this.type];function U(re){for(var fe=0;fe<re.length;fe++){var ge=re[fe];re[fe]=[360*(ge.x+S)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(ge.y+L)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(g=0;g<O.length;g++)j[g]=O[g][0];U(O=j);break;case 2:for(g=0;g<O.length;g++)U(O[g]);break;case 3:for(O=function(re){var fe=re.length;if(fe<=1)return[re];for(var ge,Ce,Te=[],qe=0;qe<fe;qe++){var tt=P_e(re[qe]);tt!==0&&(Ce===void 0&&(Ce=tt<0),Ce===tt<0?(ge&&Te.push(ge),ge=[re[qe]]):ge.push(re[qe]))}return ge&&Te.push(ge),Te}(O),g=0;g<O.length;g++)for(_=0;_<O[g].length;_++)U(O[g][_])}O.length===1?O=O[0]:N="Multi"+N;var X={type:"Feature",geometry:{type:N,coordinates:O},properties:this.properties};return"id"in this&&(X.id=this.id),X};var F_e=H9,G9=Q9;function Q9(u,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(O_e,this,c),this.length=this._features.length}function O_e(u,c,h){u===15?c.version=h.readVarint():u===1?c.name=h.readString():u===5?c.extent=h.readVarint():u===2?c._features.push(h.pos):u===3?c._keys.push(h.readString()):u===4&&c._values.push(function(g){for(var _=null,b=g.readVarint()+g.pos;g.pos<b;){var S=g.readVarint()>>3;_=S===1?g.readString():S===2?g.readFloat():S===3?g.readDouble():S===4?g.readVarint64():S===5?g.readVarint():S===6?g.readSVarint():S===7?g.readBoolean():null}return _}(h))}Q9.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var c=this._pbf.readVarint()+this._pbf.pos;return new F_e(this._pbf,c,this.extent,this._keys,this._values)};var N_e=G9;function k_e(u,c,h){if(u===3){var g=new N_e(h,h.readVarint()+h.pos);g.length&&(c[g.name]=g)}}var Rk=lL.VectorTile=function(u,c){this.layers=u.readFields(k_e,{},c)},cL=lL.VectorTileFeature=H9;function uL(u,c,h,g){const _=[],b=g===0?(S,L,O,N,U,j)=>{S.push(new W(j,O+(j-L)/(N-L)*(U-O)))}:(S,L,O,N,U,j)=>{S.push(new W(L+(j-O)/(U-O)*(N-L),j))};for(const S of u){const L=[];for(const O of S){if(O.length<=2)continue;const N=[];for(let X=0;X<O.length-1;X++){const re=O[X].x,fe=O[X].y,ge=O[X+1].x,Ce=O[X+1].y,Te=g===0?re:fe,qe=g===0?ge:Ce;Te<c?qe>c&&b(N,re,fe,ge,Ce,c):Te>h?qe<h&&b(N,re,fe,ge,Ce,h):N.push(O[X]),qe<c&&Te>=c&&b(N,re,fe,ge,Ce,c),qe>h&&Te<=h&&b(N,re,fe,ge,Ce,h)}let U=O[O.length-1];const j=g===0?U.x:U.y;j>=c&&j<=h&&N.push(U),N.length&&(U=N[N.length-1],N[0].x===U.x&&N[0].y===U.y||N.push(N[0]),L.push(N))}L.length&&_.push(L)}return _}function hL(u,c){return u.x-c.x||u.y-c.y}function j9(u,c){return hL(u.min,c.min)===0&&hL(u.max,c.max)===0}function K9(u,c){return!(u.min.x>c.max.x||u.max.x<c.min.x||u.min.y>c.max.y||u.max.y<c.min.y)}function W9(u,c,h){const g=1/zn,_=1/(1<<h.canonical.z),b=(c.x*g+h.canonical.x)*_+h.wrap,S=(c.y*g+h.canonical.y)*_;return{min:new W((u.x*g+h.canonical.x)*_+h.wrap,(u.y*g+h.canonical.y)*_),max:new W(b,S)}}function D_e(u,c,h){const g=1<<h.canonical.z,_=((c.x-h.wrap)*g-h.canonical.x)*zn,b=(c.y*g-h.canonical.y)*zn;return{min:new W(((u.x-h.wrap)*g-h.canonical.x)*zn,(u.y*g-h.canonical.y)*zn),max:new W(_,b)}}function q9(u,c,h,g,_,b,S){const L=u.indices,O=u.vertices,N=[];for(let U=g;U<g+_;U+=3){const j=c[h[U+0]+b],X=c[h[U+1]+b],re=c[h[U+2]+b],fe=Math.min(j.x,X.x,re.x),ge=Math.max(j.x,X.x,re.x),Ce=Math.min(j.y,X.y,re.y),Te=Math.max(j.y,X.y,re.y);N.length=0,u.grid.query(new W(fe,Ce),new W(ge,Te),N);for(let qe=0;qe<N.length;qe++){const tt=N[qe];if(JN(O[L[3*tt+0]],O[L[3*tt+1]],O[L[3*tt+2]],j,X,re,S))return!0}}return!1}function Y9(u,c,h,g){if(!u||!h)return!1;let _=u.vertices;if(!c.canonical.equals(g.canonical)||c.wrap!==g.wrap){if(h.vertices.length<u.vertices.length)return Y9(h,g,u,c);const b=c.canonical,S=g.canonical,L=Math.pow(2,S.z-b.z);_=u.vertices.map(O=>new W(O.x*b.x*zn*L-S.x*zn,O.y*b.y*zn*L-S.y*zn))}return q9(h,_,u.indices,0,u.indices.length,0,0)}lL.VectorTileLayer=G9;class X9{constructor(c){this.size=c,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(c,h){const g=this.toIdx(c,h);return{min:this.minimums[g],max:this.maximums[g]}}isLeaf(c,h){return this.leaves[this.toIdx(c,h)]}toIdx(c,h){return h*this.size+c}}function Z9(u,c,h,g){let _=0,b=Number.MAX_VALUE;for(let S=0;S<3;S++)if(Math.abs(g[S])<1e-15){if(h[S]<u[S]||h[S]>c[S])return null}else{const L=1/g[S];let O=(u[S]-h[S])*L,N=(c[S]-h[S])*L;if(O>N){const U=O;O=N,N=U}if(O>_&&(_=O),N<b&&(b=N),_>b)return null}return _}function J9(u,c,h,g,_,b,S,L,O,N,U){const j=g-u,X=_-c,re=b-h,fe=S-u,ge=L-c,Ce=O-h,Te=U[1]*Ce-U[2]*ge,qe=U[2]*fe-U[0]*Ce,tt=U[0]*ge-U[1]*fe,et=j*Te+X*qe+re*tt;if(Math.abs(et)<1e-15)return null;const vt=1/et,dt=N[0]-u,Pt=N[1]-c,Qt=N[2]-h,Xt=(dt*Te+Pt*qe+Qt*tt)*vt;if(Xt<0||Xt>1)return null;const An=Pt*re-Qt*X,tn=Qt*j-dt*re,Sn=dt*X-Pt*j,Dn=(U[0]*An+U[1]*tn+U[2]*Sn)*vt;return Dn<0||Xt+Dn>1?null:(fe*An+ge*tn+Ce*Sn)*vt}function eK(u,c,h){return(u-c)/(h-c)}function tK(u,c,h,g,_,b,S,L,O){const N=1<<h,U=b-g,j=S-_,X=(u+1)/N*U+g,re=(c+0)/N*j+_,fe=(c+1)/N*j+_;L[0]=(u+0)/N*U+g,L[1]=re,O[0]=X,O[1]=fe}class nK{constructor(c){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=c,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const h=function(b){const S=Math.ceil(Math.log2(b.dim/8)),L=[];let O=Math.ceil(Math.pow(2,S));const N=1/O,U=(re,fe,ge,Ce,Te)=>{const qe=Ce?1:0,tt=(re+1)*ge-qe,et=fe*ge,vt=(fe+1)*ge-qe;Te[0]=re*ge,Te[1]=et,Te[2]=tt,Te[3]=vt};let j=new X9(O);const X=[];for(let re=0;re<O*O;re++){U(re%O,Math.floor(re/O),N,!1,X);const fe=z0(X[0],X[1],b),ge=z0(X[2],X[1],b),Ce=z0(X[2],X[3],b),Te=z0(X[0],X[3],b);j.minimums.push(Math.min(fe,ge,Ce,Te)),j.maximums.push(Math.max(fe,ge,Ce,Te)),j.leaves.push(1)}for(L.push(j),O/=2;O>=1;O/=2){const re=L[L.length-1];j=new X9(O);for(let fe=0;fe<O*O;fe++){U(fe%O,Math.floor(fe/O),2,!0,X);const ge=re.getElevation(X[0],X[1]),Ce=re.getElevation(X[2],X[1]),Te=re.getElevation(X[2],X[3]),qe=re.getElevation(X[0],X[3]),tt=re.isLeaf(X[0],X[1]),et=re.isLeaf(X[2],X[1]),vt=re.isLeaf(X[2],X[3]),dt=re.isLeaf(X[0],X[3]),Pt=Math.min(ge.min,Ce.min,Te.min,qe.min),Qt=Math.max(ge.max,Ce.max,Te.max,qe.max),Xt=tt&&et&&vt&&dt;j.maximums.push(Qt),j.minimums.push(Pt),j.leaves.push(Qt-Pt<=5&&Xt?1:0)}L.push(j)}return L}(this.dem),g=h.length-1,_=h[g];this._addNode(_.minimums[0],_.maximums[0],_.leaves[0]),this._construct(h,0,0,g,0)}raycastRoot(c,h,g,_,b,S,L=1){return Z9([c,h,-100],[g,_,this.maximums[0]*L],b,S)}raycast(c,h,g,_,b,S,L=1){if(!this.nodeCount)return null;const O=this.raycastRoot(c,h,g,_,b,S,L);if(O==null)return null;const N=[],U=[],j=[],X=[],re=[{idx:0,t:O,nodex:0,nodey:0,depth:0}];for(;re.length>0;){const{idx:fe,t:ge,nodex:Ce,nodey:Te,depth:qe}=re.pop();if(this.leaves[fe]){tK(Ce,Te,qe,c,h,g,_,j,X);const et=1<<qe,vt=(Ce+0)/et,dt=(Ce+1)/et,Pt=(Te+0)/et,Qt=(Te+1)/et,Xt=z0(vt,Pt,this.dem)*L,An=z0(dt,Pt,this.dem)*L,tn=z0(dt,Qt,this.dem)*L,Sn=z0(vt,Qt,this.dem)*L,Dn=J9(j[0],j[1],Xt,X[0],j[1],An,X[0],X[1],tn,b,S),wn=J9(X[0],X[1],tn,j[0],X[1],Sn,j[0],j[1],Xt,b,S),kn=Math.min(Dn!==null?Dn:Number.MAX_VALUE,wn!==null?wn:Number.MAX_VALUE);if(kn!==Number.MAX_VALUE)return kn;{const yn=o.N.scaleAndAdd([],b,S,ge);if(rK(Xt,An,Sn,tn,eK(yn[0],j[0],X[0]),eK(yn[1],j[1],X[1]))>=yn[2])return ge}continue}let tt=0;for(let et=0;et<this._siblingOffset.length;et++){tK((Ce<<1)+this._siblingOffset[et][0],(Te<<1)+this._siblingOffset[et][1],qe+1,c,h,g,_,j,X),j[2]=-100,X[2]=this.maximums[this.childOffsets[fe]+et]*L;const vt=Z9(j,X,b,S);if(vt!=null){const dt=vt;N[et]=dt;let Pt=!1;for(let Qt=0;Qt<tt&&!Pt;Qt++)dt>=N[U[Qt]]&&(U.splice(Qt,0,et),Pt=!0);Pt||(U[tt]=et),tt++}}for(let et=0;et<tt;et++){const vt=U[et];re.push({idx:this.childOffsets[fe]+vt,t:N[vt],nodex:(Ce<<1)+this._siblingOffset[vt][0],nodey:(Te<<1)+this._siblingOffset[vt][1],depth:qe+1})}}return null}_addNode(c,h,g){return this.minimums.push(c),this.maximums.push(h),this.leaves.push(g),this.childOffsets.push(0),this.nodeCount++}_construct(c,h,g,_,b){if(c[_].isLeaf(h,g)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const S=_-1,L=c[S];let O=0,N=0;for(let U=0;U<this._siblingOffset.length;U++){const j=2*h+this._siblingOffset[U][0],X=2*g+this._siblingOffset[U][1],re=L.getElevation(j,X),fe=L.isLeaf(j,X),ge=this._addNode(re.min,re.max,fe);fe&&(O|=1<<U),N||(N=ge)}for(let U=0;U<this._siblingOffset.length;U++)O&1<<U||this._construct(c,2*h+this._siblingOffset[U][0],2*g+this._siblingOffset[U][1],S,N+U)}}function rK(u,c,h,g,_,b){return Qi(Qi(u,h,b),Qi(c,g,b),_)}function z0(u,c,h){const g=h.dim,_=pe(u*g-.5,0,g-1),b=pe(c*g-.5,0,g-1),S=Math.floor(_),L=Math.floor(b),O=Math.min(S+1,g-1),N=Math.min(L+1,g-1);return rK(h.get(S,L),h.get(O,L),h.get(S,N),h.get(O,N),_-S,b-L)}const U_e={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function z_e(u,c,h){return(256*u*256+256*c+h)/10-1e4}function $_e(u,c,h){return 256*u+c+h/256-32768}class dL{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(c,h,g,_=!1){if(this.uid=c,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return Ye(`"${g}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const b=this.dim=h.height-2,S=new Uint32Array(h.data.buffer);if(this.pixels=new Uint8Array(h.data.buffer),this.floatView=new Float32Array(h.data.buffer),this.borderReady=_,this._modifiedForSources={},!_){for(let O=0;O<b;O++)S[this._idx(-1,O)]=S[this._idx(0,O)],S[this._idx(b,O)]=S[this._idx(b-1,O)],S[this._idx(O,-1)]=S[this._idx(O,0)],S[this._idx(O,b)]=S[this._idx(O,b-1)];S[this._idx(-1,-1)]=S[this._idx(0,0)],S[this._idx(b,-1)]=S[this._idx(b-1,0)],S[this._idx(-1,b)]=S[this._idx(0,b-1)],S[this._idx(b,b)]=S[this._idx(b-1,b-1)]}const L=g==="terrarium"?$_e:z_e;for(let O=0;O<S.length;++O){const N=4*O;this.floatView[O]=L(this.pixels[N],this.pixels[N+1],this.pixels[N+2])}this._timestamp=St.now()}_buildQuadTree(){this._tree=new nK(this)}get(c,h,g=!1){g&&(c=pe(c,-1,this.dim),h=pe(h,-1,this.dim));const _=this._idx(c,h);return this.floatView[_]}set(c,h,g){const _=this._idx(c,h),b=this.floatView[_];return this.floatView[_]=g,g-b}static getUnpackVector(c){return U_e[c]}_idx(c,h){if(c<-1||c>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(c+1)}static pack(c,h){const g=[0,0,0,0],_=dL.getUnpackVector(h);let b=Math.floor((c+_[3])/_[2]);return g[2]=b%256,b=Math.floor(b/256),g[1]=b%256,b=Math.floor(b/256),g[0]=b,g}getPixels(){return new D9({width:this.stride,height:this.stride},this.pixels)}backfillBorder(c,h,g){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let _=h*this.dim,b=h*this.dim+this.dim,S=g*this.dim,L=g*this.dim+this.dim;switch(h){case-1:_=b-1;break;case 1:b=_+1}switch(g){case-1:S=L-1;break;case 1:L=S+1}const O=-h*this.dim,N=-g*this.dim;for(let U=S;U<L;U++)for(let j=_;j<b;j++){const X=4*this._idx(j,U),re=4*this._idx(j+O,U+N);this.pixels[X+0]=c.pixels[re+0],this.pixels[X+1]=c.pixels[re+1],this.pixels[X+2]=c.pixels[re+2],this.pixels[X+3]=c.pixels[re+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Pe(dL,"DEMData"),Pe(nK,"DemMinMaxQuadTree",{omit:["dem"]});class Mw{constructor(c,h,g){this._demTile=c,this._dem=this._demTile.dem,this._scale=h,this._offset=g}static create(c,h,g){const _=g||c.findDEMTileFor(h);if(!_||!_.dem)return;const b=_.dem,S=_.tileID,L=1<<h.canonical.z-S.canonical.z;return new Mw(_,b.dim/zn/L,[(h.canonical.x/L-S.canonical.x)*b.dim,(h.canonical.y/L-S.canonical.y)*b.dim])}tileCoordToPixel(c,h){const g=h*this._scale+this._offset[1],_=Math.floor(c*this._scale+this._offset[0]),b=Math.floor(g);return new W(_,b)}getElevationAt(c,h,g,_){const b=c*this._scale+this._offset[0],S=h*this._scale+this._offset[1],L=Math.floor(b),O=Math.floor(S),N=this._dem;return _=!!_,g?Qi(Qi(N.get(L,O,_),N.get(L,O+1,_),S-O),Qi(N.get(L+1,O,_),N.get(L+1,O+1,_),S-O),b-L):N.get(L,O,_)}getElevationAtPixel(c,h,g){return this._dem.get(c,h,!!g)}getMeterToDEM(c){return(1<<this._demTile.tileID.canonical.z)*Li(1,c)*this._dem.stride}}const V_e=cL.types,H_e=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],G_e=["fill-extrusion-flood-light-ground-radius"],Q_e=Math.pow(2,13),j_e=Math.pow(2,15)-1,iK=new W(0,1),$0=2147483648;function uS(u,c,h,g,_,b,S,L){u.emplaceBack((c<<1)+S,(h<<1)+b,(Math.floor(g*Q_e)<<1)+_,Math.round(L))}function fL(u,c,h,g,_,b){u.emplaceBack(c.x,c.y,(h.x<<1)+g,(h.y<<1)+_,b)}function hS(u,c,h){u.emplaceBack(c.x,c.y,c.z,h[0]*16384,h[1]*16384,h[2]*16384)}class sK{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class oK{constructor(){this.centroidXY=new W(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new W(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new W(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new W(this.max.x-this.min.x,this.max.y-this.min.y)}}class aK{constructor(){this.acc=new W(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(c,h){c.min.x===Number.MAX_VALUE&&(c.min.x=c.max.x=h.x,c.min.y=c.max.y=h.y)}appendEdge(c,h,g){this.accCount++,this.acc._add(h);let _=!!this.borders;h.x<c.min.x?(c.min.x=h.x,_=!0):h.x>c.max.x&&(c.max.x=h.x,_=!0),h.y<c.min.y?(c.min.y=h.y,_=!0):h.y>c.max.y&&(c.max.y=h.y,_=!0),((h.x===0||h.x===zn)&&h.x===g.x)!=((h.y===0||h.y===zn)&&h.y===g.y)&&this.processBorderOverlap(h,g),_&&this.checkBorderIntersection(h,g)}checkBorderIntersection(c,h){h.x<0!=c.x<0&&this.addBorderIntersection(0,Qi(h.y,c.y,(0-h.x)/(c.x-h.x))),h.x>zn!=c.x>zn&&this.addBorderIntersection(1,Qi(h.y,c.y,(zn-h.x)/(c.x-h.x))),h.y<0!=c.y<0&&this.addBorderIntersection(2,Qi(h.x,c.x,(0-h.y)/(c.y-h.y))),h.y>zn!=c.y>zn&&this.addBorderIntersection(3,Qi(h.x,c.x,(zn-h.y)/(c.y-h.y)))}addBorderIntersection(c,h){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const g=this.borders[c];h<g[0]&&(g[0]=h),h>g[1]&&(g[1]=h)}processBorderOverlap(c,h){if(c.x===h.x){if(c.y===h.y)return;const g=c.x===0?0:1;this.addBorderIntersection(g,h.y),this.addBorderIntersection(g,c.y)}else{const g=c.y===0?2:3;this.addBorderIntersection(g,h.x),this.addBorderIntersection(g,c.x)}}centroid(){return this.accCount===0?new W(0,0):new W(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((c,h)=>c+ +(h[0]!==Number.MAX_VALUE),0):0}}function lK(u,c){const h=u.add(c)._unit(),g=pe(u.x*h.x+u.y*h.y,-1,1);var _,b,S;return _=Math.acos(g),Math.min(4,Math.max(-4,Math.tan(_)))/4*j_e*((b=u).x*(S=c).y-b.y*S.x<0?-1:1)}const K_e=[u=>u.x<0,u=>u.x>zn,u=>u.y<0,u=>u.y>zn];function W_e(u,c,h,g){const _=[4];if(g===0)return _;h._mult(g);const b=u.sub(h),S=c.sub(h),L=[u,c,b,S];for(let O=0;O<4;O++)for(const N of L)if(K_e[O](N)){_.push(O);break}return _}class cK{constructor(c){this.vertexArray=new q_,this.indexArray=new Wo,this.programConfigurations=new Oe(c.layers,c.zoom,h=>G_e.includes(h)),this._segments=new Ea,this.hiddenByLandmarkVertexArray=new Zm,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ea}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(c,h,g,_=!1){const b=c.length;if(b>2){let S=Math.max(0,this._segments.get().length-1);const L=this._segments._prepareSegment(4*b,this.vertexArray.length,2*this._segmentToGroundQuads[S].length);let O;S!==this._segments.get().length-1&&(S++,this._segmentToGroundQuads[S]=[],this._segmentToRegionTriCounts[S]=[0,0,0,0,0]);{const N=c[0],U=c[1];O=lK(N.sub(c[b-1])._perp()._unit(),U.sub(N)._perp()._unit())}for(let N=0;N<b;N++){const U=N===b-1?0:N+1,j=c[N],X=c[U],re=c[U===b-1?0:U+1],fe=X.sub(j)._perp()._unit(),ge=lK(fe,re.sub(X)._perp()._unit()),Ce=O,Te=ge;if(Pk(j,X,h)||_&&dK(j,h)&&dK(X,h)){O=ge;continue}const qe=L.vertexLength;fL(this.vertexArray,j,X,1,1,Ce),fL(this.vertexArray,j,X,1,0,Ce),fL(this.vertexArray,j,X,0,1,Te),fL(this.vertexArray,j,X,0,0,Te),L.vertexLength+=4;const tt=W_e(j,X,fe,g);for(const et of tt)this._segmentToGroundQuads[S].push({id:qe,region:et}),this._segmentToRegionTriCounts[S][et]+=2,L.primitiveLength+=2;O=ge}}}prepareBorderSegments(){if(!this.hasData())return;const c=this._segments.get(),h=c.length;for(let g=0;g<h;g++)this._segmentToGroundQuads[g].sort((_,b)=>_.region-b.region);for(let g=0;g<h;g++){const _=this._segmentToGroundQuads[g],b=c[g],S=this._segmentToRegionTriCounts[g];S.reduce((O,N)=>O+N,0);let L=0;for(let O=0;O<=4;O++){const N=S[O];if(N!==0){let U=this.regionSegments[O];U||(U=this.regionSegments[O]=new Ea);const j={vertexOffset:b.vertexOffset,primitiveOffset:b.primitiveOffset+L,vertexLength:b.vertexLength,primitiveLength:N};U.get().push(j)}L+=N}for(let O=0;O<_.length;O++){const N=_[O].id;this.indexArray.emplaceBack(N,N+1,N+3),this.indexArray.emplaceBack(N,N+3,N+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(c,h,g,_,b,S){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,c,h,g,_,b,S)}upload(c){this.hasData()&&(this.vertexBuffer=c.createVertexBuffer(this.vertexArray,S_e.members),this.indexBuffer=c.createIndexBuffer(this.indexArray))}uploadPaintProperties(c){this.hasData()&&this.programConfigurations.upload(c)}update(c,h,g,_,b,S){this.hasData()&&this.programConfigurations.updatePaintArrays(c,h,g,_,b,S)}updateHiddenByLandmark(c){if(!this.hasData())return;const h=c.groundVertexCount+c.groundVertexArrayOffset;if(c.groundVertexCount===0)return;const g=c.flags&$0?1:0;for(let _=c.groundVertexArrayOffset;_<h;++_)this.hiddenByLandmarkVertexArray.emplace(_,g);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(c){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=c.createVertexBuffer(this.hiddenByLandmarkVertexArray,I_e.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let c=0;c<=4;c++){const h=this.regionSegments[c];h&&h.destroy()}}}}class pL{constructor(c){this.zoom=c.zoom,this.canonical=c.canonical,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=c.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=c.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Wo,this.footprintVertices=new Ru,this.footprintSegments=[],this.layoutVertexArray=new uf,this.centroidVertexArray=new e1,this.indexArray=new Wo,this.programConfigurations=new Oe(c.layers,c.zoom,h=>H_e.includes(h)),this.segments=new Ea,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.groundEffect=new cK(c),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(c,h,g,_){this.features=[],this.hasPattern=Bk("fill-extrusion",this.layers,h),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=ls(g),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:b,id:S,index:L,sourceLayerIndex:O}of c){const N=this.layers[0]._featureFilter.needGeometry,U=Al(b,N);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),U,g))continue;const j={id:S,sourceLayerIndex:O,index:L,geometry:N?U.geometry:kl(b,g,_),properties:b.properties,type:b.type,patterns:{}},X=this.layoutVertexArray.length;this.hasPattern?this.features.push(Mk("fill-extrusion",this.layers,j,this.zoom,h)):this.addFeature(j,j.geometry,L,g,{},h.availableImages,_,h.brightness),h.featureIndex.insert(b,j.geometry,L,O,this.index,X)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(c,h,g,_,b,S){for(const L of this.features){const{geometry:O}=L;this.addFeature(L,O,L.index,h,g,_,b,S)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(c,h,g,_,b){const S=Object.keys(c).length!==0;if(S&&!this.stateDependentLayers.length)return;const L=S?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(c,h,L,g,_,b),this.groundEffect.update(c,h,L,g,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,M_e),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=c.createVertexBuffer(this.layoutVertexExtArray,B_e.members,!0)),this.groundEffect.upload(c)),this.groundEffect.uploadPaintProperties(c),this.programConfigurations.upload(c),this.uploaded=!0}uploadCentroid(c){this.groundEffect.uploadHiddenByLandmark(c),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,T_e.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,h,g,_,b,S,L,O){const N=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(c,{})/this.tileToMeter,U=[new W(0,0),new W(zn,zn)],j=L.projection,X=j.name==="globe",re=V_e[c.type]==="Polygon",fe=new aK;fe.centroidDataIndex=this.centroidData.length;const ge=new oK,Ce=this.layers[0].paint.get("fill-extrusion-base").evaluate(c,{},_)<=0,Te=this.layers[0].paint.get("fill-extrusion-height").evaluate(c,{},_);ge.height=Te,ge.vertexArrayOffset=this.layoutVertexArray.length,ge.groundVertexArrayOffset=this.groundEffect.vertexArray.length,X&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Qm);const qe=Ik(h,500);for(let Qt=qe.length-1;Qt>=0;Qt--){const Xt=qe[Qt];(Xt.length===0||(tt=Xt[0]).every(An=>An.x<=0)||tt.every(An=>An.x>=zn)||tt.every(An=>An.y<=0)||tt.every(An=>An.y>=zn))&&qe.splice(Qt,1)}var tt;let et;if(X)et=gK(qe,U,_);else{et=[];for(const Qt of qe)et.push({polygon:Qt,bounds:U})}const vt=re?this.edgeRadius:0,dt=vt>0&&this.zoom<17,Pt=(Qt,Xt)=>{if(Qt.length===0)return!1;const An=Qt[Qt.length-1];return Xt.x===An.x&&Xt.y===An.y};for(const{polygon:Qt,bounds:Xt}of et){let An=0,tn=0;for(const kn of Qt)re&&!kn[0].equals(kn[kn.length-1])&&kn.push(kn[0]),tn+=re?kn.length-1:kn.length;const Sn=this.segments.prepareSegment((re?5:4)*tn,this.layoutVertexArray,this.indexArray);ge.footprintSegIdx<0&&(ge.footprintSegIdx=this.footprintSegments.length),ge.polygonSegIdx<0&&(ge.polygonSegIdx=this.polygonSegments.length);const Dn={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},wn=new sK;if(wn.vertexOffset=this.footprintVertices.length,wn.indexOffset=3*this.footprintIndices.length,wn.ringIndices=[],re){const kn=[],yn=[];An=Sn.vertexLength;for(let lr=0;lr<Qt.length;lr++){const Un=Qt[lr];Un.length&&lr!==0&&yn.push(kn.length/2);const Or=[];let Er,qn;Er=Un[1].sub(Un[0])._perp()._unit(),wn.ringIndices.push(Un.length-1);for(let oi=1;oi<Un.length;oi++){const Kr=Un[oi],Pr=Un[oi===Un.length-1?1:oi+1],Yn=Kr.clone();if(vt){qn=Pr.sub(Kr)._perp()._unit();const ti=Er.add(qn)._unit(),Wi=vt*Math.min(4,1/(Er.x*ti.x+Er.y*ti.y));Yn.x+=Wi*ti.x,Yn.y+=Wi*ti.y,Yn.x=Math.round(Yn.x),Yn.y=Math.round(Yn.y),Er=qn}!Ce||vt!==0&&!dt||Pt(Or,Yn)||Or.push(Yn),uS(this.layoutVertexArray,Yn.x,Yn.y,0,0,1,1,0),Sn.vertexLength++,this.footprintVertices.emplaceBack(Kr.x,Kr.y),kn.push(Kr.x,Kr.y),X&&hS(this.layoutVertexExtArray,j.projectTilePoint(Yn.x,Yn.y,_),j.upVector(_,Yn.x,Yn.y))}Ce&&(vt===0||dt)&&(Or.length!==0&&Pt(Or,Or[0])&&Or.pop(),this.groundEffect.addData(Or,Xt,N))}const On=aL(kn,yn);for(let lr=0;lr<On.length;lr+=3)this.footprintIndices.emplaceBack(wn.vertexOffset+On[lr+0],wn.vertexOffset+On[lr+1],wn.vertexOffset+On[lr+2]),this.indexArray.emplaceBack(An+On[lr],An+On[lr+2],An+On[lr+1]),Sn.primitiveLength++;wn.indexCount+=On.length,wn.vertexCount+=this.footprintVertices.length-wn.vertexOffset}for(let kn=0;kn<Qt.length;kn++){const yn=Qt[kn];fe.startRing(ge,yn[0]);let On=yn.length>4&&fK(yn[yn.length-2],yn[0],yn[1]),lr=vt?q_e(yn[yn.length-2],yn[0],yn[1],vt):0;const Un=[];let Or,Er,qn;Er=yn[1].sub(yn[0])._perp()._unit();let oi=!0;for(let Kr=1,Pr=0;Kr<yn.length;Kr++){let Yn=yn[Kr-1],ti=yn[Kr];const Wi=yn[Kr===yn.length-1?1:Kr+1];if(fe.appendEdge(ge,ti,Yn),Pk(ti,Yn,Xt)){vt&&(Er=Wi.sub(ti)._perp()._unit(),oi=!oi);continue}const ai=ti.sub(Yn)._perp(),qi=ai.x/(Math.abs(ai.x)+Math.abs(ai.y)),Ei=ai.y>0?1:0,ps=Yn.dist(ti);if(Pr+ps>32768&&(Pr=0),vt){qn=Wi.sub(ti)._perp()._unit();let Us=hK(Yn,ti,Wi,uK(Er,qn),vt);isNaN(Us)&&(Us=0);const Ws=ti.sub(Yn)._unit();Yn=Yn.add(Ws.mult(lr))._round(),ti=ti.add(Ws.mult(-Us))._round(),lr=Us,Er=qn,Ce&&this.zoom>=17&&(Pt(Un,Yn)||Un.push(Yn),Pt(Un,ti)||Un.push(ti))}const Ri=Sn.vertexLength,vo=yn.length>4&&fK(Yn,ti,Wi);let Ns=pK(Pr,On,oi);if(uS(this.layoutVertexArray,Yn.x,Yn.y,qi,Ei,0,0,Ns),uS(this.layoutVertexArray,Yn.x,Yn.y,qi,Ei,0,1,Ns),Pr+=ps,Ns=pK(Pr,vo,!oi),On=vo,uS(this.layoutVertexArray,ti.x,ti.y,qi,Ei,0,0,Ns),uS(this.layoutVertexArray,ti.x,ti.y,qi,Ei,0,1,Ns),Sn.vertexLength+=4,this.indexArray.emplaceBack(Ri+0,Ri+1,Ri+2),this.indexArray.emplaceBack(Ri+1,Ri+3,Ri+2),Sn.primitiveLength+=2,vt){const Us=An+(Kr===1?yn.length-2:Kr-2),Ws=Kr===1?An:Us+1;if(this.indexArray.emplaceBack(Ri+1,Us,Ri+3),this.indexArray.emplaceBack(Us,Ws,Ri+3),Sn.primitiveLength+=2,Or===void 0&&(Or=Ri),!Pk(Wi,yn[Kr],Xt)){const ks=Kr===yn.length-1?Or:Sn.vertexLength;this.indexArray.emplaceBack(Ri+2,Ri+3,ks),this.indexArray.emplaceBack(Ri+3,ks+1,ks),this.indexArray.emplaceBack(Ri+3,Ws,ks+1),Sn.primitiveLength+=3}oi=!oi}if(X){const Us=this.layoutVertexExtArray,Ws=j.projectTilePoint(Yn.x,Yn.y,_),ks=j.projectTilePoint(ti.x,ti.y,_),Yo=j.upVector(_,Yn.x,Yn.y),so=j.upVector(_,ti.x,ti.y);hS(Us,Ws,Yo),hS(Us,Ws,Yo),hS(Us,ks,so),hS(Us,ks,so)}}re&&(An+=yn.length-1),Ce&&vt&&this.zoom>=17&&(Un.length!==0&&Pt(Un,Un[0])&&Un.pop(),this.groundEffect.addData(Un,Xt,N,vt>0))}this.footprintSegments.push(wn),Dn.triangleCount=this.indexArray.length-Dn.triangleArrayOffset,this.polygonSegments.push(Dn),++ge.footprintSegLen,++ge.polygonSegLen}if(ge.vertexCount=this.layoutVertexArray.length-ge.vertexArrayOffset,ge.groundVertexCount=this.groundEffect.vertexArray.length-ge.groundVertexArrayOffset,ge.vertexCount!==0){if(ge.centroidXY=fe.borders?iK:this.encodeCentroid(fe,ge),this.centroidData.push(ge),fe.borders){this.featuresOnBorder.push(fe);const Qt=this.featuresOnBorder.length-1;for(let Xt=0;Xt<fe.borders.length;Xt++)fe.borders[Xt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Xt].push(Qt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,b,S,_,O),this.groundEffect.addPaintPropertiesData(c,g,b,S,_,O),this.maxHeight=Math.max(this.maxHeight,Te)}}sortBorders(){for(let c=0;c<this.borderFeatureIndices.length;c++)this.borderFeatureIndices[c].sort((h,g)=>this.featuresOnBorder[h].borders[c][0]-this.featuresOnBorder[g].borders[c][0])}splitToSubtiles(){const c=[];for(let L=0;L<this.centroidData.length;L++){const O=this.centroidData[L],N=+(O.min.y+O.max.y>zn),U=2*N+(+(O.min.x+O.max.x>zn)^N);for(let j=0;j<O.polygonSegLen;j++){const X=O.polygonSegIdx+j;c.push({centroidIdx:L,subtile:U,polygonSegmentIdx:X,triangleSegmentIdx:this.polygonSegments[X].triangleSegIdx})}}const h=new Wo;c.sort((L,O)=>L.triangleSegmentIdx===O.triangleSegmentIdx?L.subtile-O.subtile:L.triangleSegmentIdx-O.triangleSegmentIdx);let g=0,_=0,b=0;for(const L of c){if(L.triangleSegmentIdx!==g)break;b++}const S=c.length;for(;_!==c.length;){g=c[_].triangleSegmentIdx;let L=0,O=_,N=_;for(let U=O;U<b&&c[U].subtile===L;U++)N++;for(;O!==b;){const U=c[O];L=U.subtile;const j=this.centroidData[U.centroidIdx].min.clone(),X=this.centroidData[U.centroidIdx].max.clone(),re={vertexOffset:this.segments.segments[g].vertexOffset,primitiveOffset:h.length,vertexLength:this.segments.segments[g].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let fe=O;fe<N;fe++){const ge=c[fe],Ce=this.polygonSegments[ge.polygonSegmentIdx],Te=this.centroidData[ge.centroidIdx].min,qe=this.centroidData[ge.centroidIdx].max,tt=this.indexArray.uint16;for(let et=Ce.triangleArrayOffset;et<Ce.triangleArrayOffset+Ce.triangleCount;et++)h.emplaceBack(tt[3*et],tt[3*et+1],tt[3*et+2]);re.primitiveLength+=Ce.triangleCount,j.x=Math.min(j.x,Te.x),j.y=Math.min(j.y,Te.y),X.x=Math.max(X.x,qe.x),X.y=Math.max(X.y,qe.y)}re.primitiveLength>0&&this.triangleSubSegments.push({segment:re,min:j,max:X}),O=N;for(let fe=O;fe<b&&c[fe].subtile===c[O].subtile;fe++)N++}_=b;for(let U=_;U<S&&c[U].triangleSegmentIdx===c[_].triangleSegmentIdx;U++)b++}h._trim(),this.indexArray=h}getVisibleSegments(c,h,g){let _=0,b=0;const S=1<<c.canonical.z;if(h){const ge=h.getMinMaxForTile(c);ge&&(_=ge.min,b=ge.max)}b+=this.maxHeight;const L=c.toUnwrapped();let O;const N=[L.canonical.x/S+L.wrap,L.canonical.y/S],U=[(L.canonical.x+1)/S+L.wrap,(L.canonical.y+1)/S],j=new Ea,X=(ge,Ce,Te)=>[ge[0]*(1-Te[0])+Ce[0]*Te[0],ge[1]*(1-Te[1])+Ce[1]*Te[1]],re=[],fe=[];for(const ge of this.triangleSubSegments){re[0]=ge.min.x/zn,re[1]=ge.min.y/zn,fe[0]=ge.max.x/zn,fe[1]=ge.max.y/zn;const Ce=X(N,U,re),Te=X(N,U,fe);if(new ga([Ce[0],Ce[1],_],[Te[0],Te[1],b]).intersectsPrecise(g)===0){O&&(j.segments.push(O),O=void 0);continue}const qe=ge.segment;O&&O.vertexOffset!==qe.vertexOffset&&(j.segments.push(O),O=void 0),O?(O.vertexLength+=qe.vertexLength,O.primitiveLength+=qe.primitiveLength):O={vertexOffset:qe.vertexOffset,primitiveLength:qe.primitiveLength,vertexLength:qe.vertexLength,primitiveOffset:qe.primitiveOffset,sortKey:void 0,vaos:{}}}return O&&j.segments.push(O),j}encodeCentroid(c,h){const g=c.centroid(),_=h.span(),b=Math.min(7,Math.round(_.x*this.tileToMeter/10)),S=Math.min(7,Math.round(_.y*this.tileToMeter/10));return new W(pe(g.x,1,zn-1)<<3|b,pe(g.y,1,zn-1)<<3|S)}encodeBorderCentroid(c){if(!c.borders)return new W(0,0);const h=c.borders,g=Number.MAX_VALUE;if(h[0][0]!==g||h[1][0]!==g){const _=h[0][0]!==g?0:1;return new W(6|(h[0][0]!==g?0:65528),(h[_][0]+h[_][1])/2<<3|6)}{const _=h[2][0]!==g?2:3;return new W((h[_][0]+h[_][1])/2<<3|6,6|(h[2][0]!==g?0:65528))}}showCentroid(c){const h=this.centroidData[c.centroidDataIndex];h.flags&=$0,h.centroidXY.x=0,h.centroidXY.y=0,this.writeCentroidToBuffer(h)}writeCentroidToBuffer(c){this.groundEffect.updateHiddenByLandmark(c);const h=c.vertexArrayOffset,g=c.vertexCount+c.vertexArrayOffset,_=c.flags&$0?iK:c.centroidXY,b=this.centroidVertexArray.geta_centroid_pos0(h);if(this.centroidVertexArray.geta_centroid_pos1(h)!==_.y||b!==_.x){for(let S=h;S<g;++S)this.centroidVertexArray.emplace(S,_.x,_.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const c of this.centroidData)this.writeCentroidToBuffer(c)}updateReplacement(c,h){if(h.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=h.updateTime;const g=h.getReplacementRegionsForTile(c.toUnwrapped());if(function(b,S){if(b.length!==S.length)return!1;for(let L=0;L<b.length;L++)if(b[L].sourceId!==S[L].sourceId||!j9(b[L],S[L]))return!1;return!0}(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const b of this.centroidData)b.flags&=2147483647;const _=[];for(const b of this.activeReplacements){const S=Math.pow(2,b.footprintTileId.canonical.z-c.canonical.z);for(const L of this.centroidData)if(!(L.flags&$0||b.min.x>L.max.x||L.min.x>b.max.x||b.min.y>L.max.y||L.min.y>b.max.y))for(let O=0;O<L.footprintSegLen;O++){const N=this.footprintSegments[L.footprintSegIdx+O];if(_.length=0,Y_e(this.footprintVertices,N.vertexOffset,N.vertexCount,b.footprintTileId.canonical,c.canonical,_),q9(b.footprint,_,this.footprintIndices.uint16,N.indexOffset,N.indexCount,-N.vertexOffset,-S)){L.flags|=$0;break}}}for(const b of this.centroidData)this.writeCentroidToBuffer(b);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(c,h,g){let _=!1;for(let b=0;b<g.footprintSegLen;b++){const S=this.footprintSegments[g.footprintSegIdx+b];let L=0;for(const O of S.ringIndices){for(let N=L,U=O+L-1;N<O+L;U=N++){const j=this.footprintVertices.int16[2*(N+S.vertexOffset)+0],X=this.footprintVertices.int16[2*(N+S.vertexOffset)+1],re=this.footprintVertices.int16[2*(U+S.vertexOffset)+1];X>h!=re>h&&c<(this.footprintVertices.int16[2*(U+S.vertexOffset)+0]-j)*(h-X)/(re-X)+j&&(_=!_)}L=O}}return _}getHeightAtTileCoord(c,h){let g=Number.NEGATIVE_INFINITY,_=!0;const b=4*(c+zn)*zn+(h+zn);if(this.partLookup.hasOwnProperty(b)){const S=this.partLookup[b];return S?{height:S.height,hidden:!!(S.flags&$0)}:void 0}for(const S of this.centroidData)c>S.max.x||S.min.x>c||h>S.max.y||S.min.y>h||this.footprintContainsPoint(c,h,S)&&S&&S.height>g&&(g=S.height,this.partLookup[b]=S,_=!!(S.flags&$0));if(g!==Number.NEGATIVE_INFINITY)return{height:g,hidden:_};this.partLookup[b]=void 0}}function uK(u,c){const h=u.add(c)._unit();return u.x*h.x+u.y*h.y}function q_e(u,c,h,g){const _=c.sub(u)._perp()._unit(),b=h.sub(c)._perp()._unit();return hK(u,c,h,uK(_,b),g)}function hK(u,c,h,g,_){const b=Math.sqrt(1-g*g);return Math.min(u.dist(c)/3,c.dist(h)/3,_*b/g)}function Pk(u,c,h){return u.x<h[0].x&&c.x<h[0].x||u.x>h[1].x&&c.x>h[1].x||u.y<h[0].y&&c.y<h[0].y||u.y>h[1].y&&c.y>h[1].y}function dK(u,c){return u.x<c[0].x||u.x>c[1].x||u.y<c[0].y||u.y>c[1].y}function fK(u,c,h){if(u.x<0||u.x>=zn||c.x<0||c.x>=zn||h.x<0||h.x>=zn)return!1;const g=h.sub(c),_=g.perp(),b=u.sub(c);return(g.x*b.x+g.y*b.y)/Math.sqrt((g.x*g.x+g.y*g.y)*(b.x*b.x+b.y*b.y))>-.866&&_.x*b.x+_.y*b.y<0}function pK(u,c,h){const g=c?2|u:-3&u;return h?1|g:-2&g}function AK(){const u=Math.PI/32,c=Math.tan(u),h=bn;return h*Math.sqrt(1+2*c*c)-h}function gK(u,c,h){const g=1<<h.z,_=Bi(h.x/g),b=Bi((h.x+1)/g),S=ms(h.y/g),L=ms((h.y+1)/g);return function(O,N,U,j,X=0,re){const fe=[];if(!O.length||!U||!j)return fe;const ge=(dt,Pt)=>{for(const Qt of dt)fe.push({polygon:Qt,bounds:Pt})},Ce=Math.ceil(Math.log2(U)),Te=Math.ceil(Math.log2(j)),qe=Ce-Te,tt=[];for(let dt=0;dt<Math.abs(qe);dt++)tt.push(qe>0?0:1);for(let dt=0;dt<Math.min(Ce,Te);dt++)tt.push(0),tt.push(1);let et=O;if(et=uL(et,N[0].y-X,N[1].y+X,1),et=uL(et,N[0].x-X,N[1].x+X,0),!et.length)return fe;const vt=[];for(tt.length?vt.push({polygons:et,bounds:N,depth:0}):ge(et,N);vt.length;){const dt=vt.pop(),Pt=dt.depth,Qt=tt[Pt],Xt=dt.bounds[0],An=dt.bounds[1],tn=Qt===0?Xt.x:Xt.y,Sn=Qt===0?An.x:An.y,Dn=re?re(Qt,tn,Sn):.5*(tn+Sn),wn=uL(dt.polygons,tn-X,Dn+X,Qt),kn=uL(dt.polygons,Dn-X,Sn+X,Qt);if(wn.length){const yn=[Xt,new W(Qt===0?Dn:An.x,Qt===1?Dn:An.y)];tt.length>Pt+1?vt.push({polygons:wn,bounds:yn,depth:Pt+1}):ge(wn,yn)}if(kn.length){const yn=[new W(Qt===0?Dn:Xt.x,Qt===1?Dn:Xt.y),An];tt.length>Pt+1?vt.push({polygons:kn,bounds:yn,depth:Pt+1}):ge(kn,yn)}}return fe}(u,c,Math.ceil((b-_)/11.25),Math.ceil((S-L)/11.25),1,(O,N,U)=>{if(O===0)return .5*(N+U);{const j=ms((h.y+N/zn)/g);return(vi(.5*(ms((h.y+U/zn)/g)+j))*g-h.y)*zn}})}function Y_e(u,c,h,g,_,b){const S=Math.pow(2,g.z-_.z);for(let L=0;L<h;L++){let O=u.int16[2*(L+c)+0],N=u.int16[2*(L+c)+1];O=(O+_.x*zn)*S-g.x*zn,N=(N+_.y*zn)*S-g.y*zn,b.push(new W(O,N))}}Pe(pL,"FillExtrusionBucket",{omit:["layers","features"]}),Pe(oK,"PartData"),Pe(sK,"FootprintSegment"),Pe(aK,"BorderCentroidData"),Pe(cK,"GroundEffect");const X_e=new Js({visibility:new Gn(rn["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Gn(rn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Z_e={paint:new Js({"fill-extrusion-opacity":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mr(rn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Mr(rn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mr(rn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mr(rn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Mr(rn["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Mr(rn["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Gn(rn["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:X_e};class Lw extends W{constructor(c,h,g){super(c,h),this.z=g}}function dS(u,c){return u.x*c.x+u.y*c.y}function mK(u,c){if(u.length===1){let h=0;const g=c[h++];let _;for(;!_||g.equals(_);)if(_=c[h++],!_)return 1/0;for(;h<c.length;h++){const b=c[h],S=u[0],L=_.sub(g),O=b.sub(g),N=S.sub(g),U=dS(L,L),j=dS(L,O),X=dS(O,O),re=dS(N,L),fe=dS(N,O),ge=U*X-j*j,Ce=(X*re-j*fe)/ge,Te=(U*fe-j*re)/ge,qe=g.z*(1-Ce-Te)+_.z*Ce+b.z*Te;if(isFinite(qe))return qe}return 1/0}{let h=1/0;for(const g of c)h=Math.min(h,g.z);return h}}function vK(u,c,h,g,_,b,S,L){const O=S*_.getElevationAt(u,c,!0,!0),N=b[0]!==0,U=N?b[1]===0?S*(b[0]/7-450):S*function(j,X,re){const fe=Math.floor(X[0]/8),ge=Math.floor(X[1]/8),Ce=10*(X[0]-8*fe),Te=10*(X[1]-8*ge),qe=j.getElevationAt(fe,ge,!0,!0),tt=j.getMeterToDEM(re),et=Math.floor(.5*(Ce*tt-1)),vt=Math.floor(.5*(Te*tt-1)),dt=j.tileCoordToPixel(fe,ge),Pt=2*et+1,Qt=2*vt+1,Xt=function(kn,yn,On,lr,Un){return[kn.getElevationAtPixel(yn,On,!0),kn.getElevationAtPixel(yn+Un,On,!0),kn.getElevationAtPixel(yn,On+Un,!0),kn.getElevationAtPixel(yn+lr,On+Un,!0)]}(j,dt.x-et,dt.y-vt,Pt,Qt),An=Math.abs(Xt[0]-Xt[1]),tn=Math.abs(Xt[2]-Xt[3]),Sn=Math.abs(Xt[0]-Xt[2])+Math.abs(Xt[1]-Xt[3]),Dn=Math.min(.25,.5*tt*(An+tn)/Pt),wn=Math.min(.25,.5*tt*Sn/Qt);return qe+Math.max(Dn*Ce,wn*Te)}(_,b,L):O;return{base:O+(h===0)?-1:h,top:N?Math.max(U+g,O+h+2):O+g}}const J_e=Ks([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:e1e}=J_e,t1e=Ks([{name:"a_packed",components:4,type:"Float32"}]),{members:n1e}=t1e;class yK{constructor(c,h){this.width=c,this.height=h,this.nextRow=0,this.image=new U0({width:c,height:h}),this.positions={},this.uploaded=!1}getDash(c,h){const g=this.getKey(c,h);return this.positions[g]}trim(){const c=this.width,h=this.height=Re(this.nextRow);this.image.resize({width:c,height:h})}getKey(c,h){return c.join(",")+h}getDashRanges(c,h,g){const _=[];let b=c.length%2==1?-c[c.length-1]*g:0,S=c[0]*g,L=!0;_.push({left:b,right:S,isDash:L,zeroLength:c[0]===0});let O=c[0];for(let N=1;N<c.length;N++){L=!L;const U=c[N];b=O*g,O+=U,S=O*g,_.push({left:b,right:S,isDash:L,zeroLength:U===0})}return _}addRoundDash(c,h,g){const _=h/2;for(let b=-g;b<=g;b++){const S=this.width*(this.nextRow+g+b);let L=0,O=c[L];for(let N=0;N<this.width;N++){N/O.right>1&&(O=c[++L]);const U=Math.abs(N-O.left),j=Math.abs(N-O.right),X=Math.min(U,j);let re;const fe=b/g*(_+1);if(O.isDash){const ge=_-Math.abs(fe);re=Math.sqrt(X*X+ge*ge)}else re=_-Math.sqrt(X*X+fe*fe);this.image.data[S+N]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(c,h){for(let O=c.length-1;O>=0;--O){const N=c[O],U=c[O+1];N.zeroLength?c.splice(O,1):U&&U.isDash===N.isDash&&(U.left=N.left,c.splice(O,1))}const g=c[0],_=c[c.length-1];g.isDash===_.isDash&&(g.left=_.left-this.width,_.right=g.right+this.width);const b=this.width*this.nextRow;let S=0,L=c[S];for(let O=0;O<this.width;O++){O/L.right>1&&(L=c[++S]);const N=Math.abs(O-L.left),U=Math.abs(O-L.right),j=Math.min(N,U);this.image.data[b+O]=Math.max(0,Math.min(255,(L.isDash?j:-j)+h+128))}}addDash(c,h){const g=this.getKey(c,h);if(this.positions[g])return this.positions[g];const _=h==="round",b=_?7:0,S=2*b+1;if(this.nextRow+S>this.height)return Ye("LineAtlas out of space"),null;c.length===0&&c.push(1);let L=0;for(let U=0;U<c.length;U++)c[U]<0&&(Ye("Negative value is found in line dasharray, replacing values with 0"),c[U]=0),L+=c[U];if(L!==0){const U=this.width/L,j=this.getDashRanges(c,this.width,U);_?this.addRoundDash(j,U,b):this.addRegularDash(j,h==="square"?.5*U:0)}const O=this.nextRow+b;this.nextRow+=S;const N={tl:[O,b],br:[L,0]};return this.positions[g]=N,N}}Pe(yK,"LineAtlas");const r1e=cL.types,i1e=Math.cos(Math.PI/180*37.5);class Fk{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=c.index,this.projection=c.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Y_,this.layoutVertexArray2=new hf,this.indexArray=new Wo,this.programConfigurations=new Oe(c.layers,c.zoom),this.segments=new Ea,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,g,_){this.hasPattern=Bk("line",this.layers,h);const b=this.layers[0].layout.get("line-sort-key"),S=[];for(const{feature:U,id:j,index:X,sourceLayerIndex:re}of c){const fe=this.layers[0]._featureFilter.needGeometry,ge=Al(U,fe);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),ge,g))continue;const Ce=b?b.evaluate(ge,{},g):void 0,Te={id:j,properties:U.properties,type:U.type,sourceLayerIndex:re,index:X,geometry:fe?ge.geometry:kl(U,g,_),patterns:{},sortKey:Ce};S.push(Te)}b&&S.sort((U,j)=>U.sortKey-j.sortKey);const{lineAtlas:L,featureIndex:O}=h,N=this.addConstantDashes(L);for(const U of S){const{geometry:j,index:X,sourceLayerIndex:re}=U;if(N&&this.addFeatureDashes(U,L),this.hasPattern){const fe=Mk("line",this.layers,U,this.zoom,h);this.patternFeatures.push(fe)}else this.addFeature(U,j,X,g,L.positions,h.availableImages,h.brightness);O.insert(c[X].feature,j,X,re,this.index)}}addConstantDashes(c){let h=!1;for(const g of this.layers){const _=g.paint.get("line-dasharray").value,b=g.layout.get("line-cap").value;if(_.kind!=="constant"||b.kind!=="constant")h=!0;else{const S=b.value,L=_.value;if(!L)continue;c.addDash(L,S)}}return h}addFeatureDashes(c,h){const g=this.zoom;for(const _ of this.layers){const b=_.paint.get("line-dasharray").value,S=_.layout.get("line-cap").value;if(b.kind==="constant"&&S.kind==="constant")continue;let L,O;if(b.kind==="constant"){if(L=b.value,!L)continue}else L=b.evaluate({zoom:g},c);O=S.kind==="constant"?S.value:S.evaluate({zoom:g},c),h.addDash(L,O),c.patterns[_.id]=h.getKey(L,O)}}update(c,h,g,_,b){const S=Object.keys(c).length!==0;S&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(c,h,S?this.stateDependentLayers:this.layers,g,_,b)}addFeatures(c,h,g,_,b,S){for(const L of this.patternFeatures)this.addFeature(L,L.geometry,L.index,h,g,_,S)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,n1e)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,e1e),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&c.properties.hasOwnProperty("mapbox_clip_start")&&c.properties.hasOwnProperty("mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,h,g,_,b,S,L){const O=this.layers[0].layout,N=O.get("line-join").evaluate(c,{}),U=O.get("line-cap").evaluate(c,{}),j=O.get("line-miter-limit"),X=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const re of h)this.addLine(re,c,N,U,j,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,g,b,S,_,L)}addLine(c,h,g,_,b,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<c.length-1;Te++)this.totalDistance+=c[Te].dist(c[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const L=r1e[h.type]==="Polygon";let O=c.length;for(;O>=2&&c[O-1].equals(c[O-2]);)O--;let N=0;for(;N<O-1&&c[N].equals(c[N+1]);)N++;if(O<(L?3:2))return;g==="bevel"&&(b=1.05);const U=this.overscaling<=16?15*zn/(512*this.overscaling):0,j=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let X,re,fe,ge,Ce;this.e1=this.e2=-1,L&&(X=c[O-2],Ce=c[N].sub(X)._unit()._perp());for(let Te=N;Te<O;Te++){if(fe=Te===O-1?L?c[N+1]:void 0:c[Te+1],fe&&c[Te].equals(fe))continue;Ce&&(ge=Ce),X&&(re=X),X=c[Te],Ce=fe?fe.sub(X)._unit()._perp():ge,ge=ge||Ce;let qe=ge.add(Ce);qe.x===0&&qe.y===0||qe._unit();const tt=ge.x*Ce.x+ge.y*Ce.y,et=qe.x*Ce.x+qe.y*Ce.y,vt=et!==0?1/et:1/0,dt=2*Math.sqrt(2-2*et),Pt=et<i1e&&re&&fe,Qt=ge.x*Ce.y-ge.y*Ce.x>0;if(Pt&&Te>N){const tn=X.dist(re);if(tn>2*U){const Sn=X.sub(X.sub(re)._mult(U/tn)._round());this.updateDistance(re,Sn),this.addCurrentVertex(Sn,ge,0,0,j),re=Sn}}const Xt=re&&fe;let An=Xt?g:L?"butt":_;if(Xt&&An==="round"&&(vt<S?An="miter":vt<=2&&(An="fakeround")),An==="miter"&&vt>b&&(An="bevel"),An==="bevel"&&(vt>2&&(An="flipbevel"),vt<b&&(An="miter")),re&&this.updateDistance(re,X),An==="miter")qe._mult(vt),this.addCurrentVertex(X,qe,0,0,j);else if(An==="flipbevel"){if(vt>100)qe=Ce.mult(-1);else{const tn=vt*ge.add(Ce).mag()/ge.sub(Ce).mag();qe._perp()._mult(tn*(Qt?-1:1))}this.addCurrentVertex(X,qe,0,0,j),this.addCurrentVertex(X,qe.mult(-1),0,0,j)}else if(An==="bevel"||An==="fakeround"){const tn=-Math.sqrt(vt*vt-1),Sn=Qt?tn:0,Dn=Qt?0:tn;if(re&&this.addCurrentVertex(X,ge,Sn,Dn,j),An==="fakeround"){const wn=Math.round(180*dt/Math.PI/20);for(let kn=1;kn<wn;kn++){let yn=kn/wn;if(yn!==.5){const lr=yn-.5;yn+=yn*lr*(yn-1)*((1.0904+tt*(tt*(3.55645-1.43519*tt)-3.2452))*lr*lr+(.848013+tt*(.215638*tt-1.06021)))}const On=Ce.sub(ge)._mult(yn)._add(ge)._unit()._mult(Qt?-1:1);this.addHalfVertex(X,On.x,On.y,!1,Qt,0,j)}}fe&&this.addCurrentVertex(X,Ce,-Sn,-Dn,j)}else if(An==="butt")this.addCurrentVertex(X,qe,0,0,j);else if(An==="square"){const tn=re?1:-1;re||this.addCurrentVertex(X,qe,tn,tn,j),this.addCurrentVertex(X,qe,0,0,j),re&&this.addCurrentVertex(X,qe,tn,tn,j)}else An==="round"&&(re&&(this.addCurrentVertex(X,ge,0,0,j),this.addCurrentVertex(X,ge,1,1,j,!0)),fe&&(this.addCurrentVertex(X,Ce,-1,-1,j,!0),this.addCurrentVertex(X,Ce,0,0,j)));if(Pt&&Te<O-1){const tn=X.dist(fe);if(tn>2*U){const Sn=X.add(fe.sub(X)._mult(U/tn)._round());this.updateDistance(X,Sn),this.addCurrentVertex(Sn,Ce,0,0,j),X=Sn}}}}addCurrentVertex(c,h,g,_,b,S=!1){const L=h.y*_-h.x,O=-h.y-h.x*_;this.addHalfVertex(c,h.x+h.y*g,h.y-h.x*g,S,!1,g,b),this.addHalfVertex(c,L,O,S,!0,-_,b)}addHalfVertex({x:c,y:h},g,_,b,S,L,O){this.layoutVertexArray.emplaceBack((c<<1)+(b?1:0),(h<<1)+(S?1:0),Math.round(63*g)+128,Math.round(63*_)+128,1+(L===0?0:L<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const N=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,N),O.primitiveLength++),S?this.e2=N:this.e1=N}updateScaledDistance(){if(this.lineClips){const c=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=c*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(c,h){this.distance+=c.dist(h),this.updateScaledDistance()}}Pe(Fk,"LineBucket",{omit:["layers","patternFeatures"]});const s1e=new Js({"line-cap":new Mr(rn.layout_line["line-cap"]),"line-join":new Mr(rn.layout_line["line-join"]),"line-miter-limit":new Gn(rn.layout_line["line-miter-limit"]),"line-round-limit":new Gn(rn.layout_line["line-round-limit"]),"line-sort-key":new Mr(rn.layout_line["line-sort-key"]),visibility:new Gn(rn.layout_line.visibility)});var _K={paint:new Js({"line-opacity":new Mr(rn.paint_line["line-opacity"]),"line-color":new Mr(rn.paint_line["line-color"]),"line-translate":new Gn(rn.paint_line["line-translate"]),"line-translate-anchor":new Gn(rn.paint_line["line-translate-anchor"]),"line-width":new Mr(rn.paint_line["line-width"]),"line-gap-width":new Mr(rn.paint_line["line-gap-width"]),"line-offset":new Mr(rn.paint_line["line-offset"]),"line-blur":new Mr(rn.paint_line["line-blur"]),"line-dasharray":new Mr(rn.paint_line["line-dasharray"]),"line-pattern":new Mr(rn.paint_line["line-pattern"]),"line-gradient":new nl(rn.paint_line["line-gradient"]),"line-trim-offset":new Gn(rn.paint_line["line-trim-offset"]),"line-emissive-strength":new Gn(rn.paint_line["line-emissive-strength"]),"line-border-width":new Mr(rn.paint_line["line-border-width"]),"line-border-color":new Mr(rn.paint_line["line-border-color"])}),layout:s1e};function bK(u,c,h){return c*(zn/(u.tileSize*Math.pow(2,h-u.tileID.overscaledZ)))}function wK(u,c){return 1/bK(u,1,c.tileZoom)}function xK(u,c,h,g){return u.translatePosMatrix(g||c.tileID.projMatrix,c,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const CK=u=>{const c=[];EK(u)&&c.push("RENDER_LINE_DASH"),u.paint.get("line-gradient")&&c.push("RENDER_LINE_GRADIENT");const h=u.paint.get("line-trim-offset");return h[0]===0&&h[1]===0||c.push("RENDER_LINE_TRIM_OFFSET"),u.paint.get("line-border-width").constantOr(1)!==0&&c.push("RENDER_LINE_BORDER"),c};function EK(u){const c=u.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const SK=new class extends Mr{possiblyEvaluate(u,c){return c=new $i(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,transition:c.transition}),super.possiblyEvaluate(u,c)}evaluate(u,c,h,g){return c=ae({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(u,c,h,g)}}(_K.paint.properties["line-width"].specification);function TK(u,c){return c>0?c+2*u:u}SK.useIntegerZoom=!0;const o1e=Ks([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),a1e=Ks([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),l1e=Ks([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ks([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const c1e=Ks([{name:"a_z_offset",components:1,type:"Float32"}],4),u1e=Ks([{name:"a_texb",components:2,type:"Uint16"}]),h1e=Ks([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),d1e=Ks([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);Ks([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const IK=Ks([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),f1e=Ks([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ks([{name:"triangle",components:3,type:"Uint16"}]),Ks([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ks([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Ks([{type:"Float32",name:"offsetX"}]),Ks([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Kc=24;const lA=128;function Ok(u,c){const{expression:h}=c;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new $i(u+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:_}=h;let b=0;for(;b<g.length&&g[b]<=u;)b++;b=Math.max(0,b-1);let S=b;for(;S<g.length&&g[S]<u+1;)S++;S=Math.min(g.length-1,S);const L=g[b],O=g[S];return h.kind==="composite"?{kind:"composite",minZoom:L,maxZoom:O,interpolationType:_}:{kind:"camera",minZoom:L,maxZoom:O,minSize:h.evaluate(new $i(L)),maxSize:h.evaluate(new $i(O)),interpolationType:_}}}function AL(u,{uSize:c,uSizeT:h},{lowerSize:g,upperSize:_}){return u.kind==="source"?g/lA:u.kind==="composite"?Qi(g/lA,_/lA,h):c}function Rw(u,c){let h=0,g=0;if(u.kind==="constant")g=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:_,minZoom:b,maxZoom:S}=u,L=_?pe(Bc.interpolationFactor(_,c,b,S),0,1):0;u.kind==="camera"?g=Qi(u.minSize,u.maxSize,L):h=L}return{uSizeT:h,uSize:g}}var p1e=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:lA,evaluateSizeForFeature:AL,evaluateSizeForZoom:Rw,getSizeData:Ok});function A1e(u,c,h){return u.sections.forEach(g=>{g.text=function(_,b,S){const L=b.layout.get("text-transform").evaluate(S,{});return L==="uppercase"?_=_.toLocaleUpperCase():L==="lowercase"&&(_=_.toLocaleLowerCase()),Zs.applyArabicShaping&&(_=Zs.applyArabicShaping(_)),_}(g.text,c,h)}),u}const fS={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function g1e(u){return u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""}function m1e(u){return u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""||u===""}var v1e={read:function(u,c,h,g,_){var b,S,L=8*_-g-1,O=(1<<L)-1,N=O>>1,U=-7,j=h?_-1:0,X=h?-1:1,re=u[c+j];for(j+=X,b=re&(1<<-U)-1,re>>=-U,U+=L;U>0;b=256*b+u[c+j],j+=X,U-=8);for(S=b&(1<<-U)-1,b>>=-U,U+=g;U>0;S=256*S+u[c+j],j+=X,U-=8);if(b===0)b=1-N;else{if(b===O)return S?NaN:1/0*(re?-1:1);S+=Math.pow(2,g),b-=N}return(re?-1:1)*S*Math.pow(2,b-g)},write:function(u,c,h,g,_,b){var S,L,O,N=8*b-_-1,U=(1<<N)-1,j=U>>1,X=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=g?0:b-1,fe=g?1:-1,ge=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(L=isNaN(c)?1:0,S=U):(S=Math.floor(Math.log(c)/Math.LN2),c*(O=Math.pow(2,-S))<1&&(S--,O*=2),(c+=S+j>=1?X/O:X*Math.pow(2,1-j))*O>=2&&(S++,O/=2),S+j>=U?(L=0,S=U):S+j>=1?(L=(c*O-1)*Math.pow(2,_),S+=j):(L=c*Math.pow(2,j-1)*Math.pow(2,_),S=0));_>=8;u[h+re]=255&L,re+=fe,L/=256,_-=8);for(S=S<<_|L,N+=_;N>0;u[h+re]=255&S,re+=fe,S/=256,N-=8);u[h+re-fe]|=128*ge}},BK=qo,gL=v1e;function qo(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}qo.Varint=0,qo.Fixed64=1,qo.Bytes=2,qo.Fixed32=5;var Nk=4294967296,MK=1/Nk,LK=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function lv(u){return u.type===qo.Bytes?u.readVarint()+u.pos:u.pos+1}function Pw(u,c,h){return h?4294967296*c+(u>>>0):4294967296*(c>>>0)+(u>>>0)}function RK(u,c,h){var g=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(g);for(var _=h.pos-1;_>=u;_--)h.buf[_+g]=h.buf[_]}function y1e(u,c){for(var h=0;h<u.length;h++)c.writeVarint(u[h])}function _1e(u,c){for(var h=0;h<u.length;h++)c.writeSVarint(u[h])}function b1e(u,c){for(var h=0;h<u.length;h++)c.writeFloat(u[h])}function w1e(u,c){for(var h=0;h<u.length;h++)c.writeDouble(u[h])}function x1e(u,c){for(var h=0;h<u.length;h++)c.writeBoolean(u[h])}function C1e(u,c){for(var h=0;h<u.length;h++)c.writeFixed32(u[h])}function E1e(u,c){for(var h=0;h<u.length;h++)c.writeSFixed32(u[h])}function S1e(u,c){for(var h=0;h<u.length;h++)c.writeFixed64(u[h])}function T1e(u,c){for(var h=0;h<u.length;h++)c.writeSFixed64(u[h])}function mL(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+16777216*u[c+3]}function Fw(u,c,h){u[h]=c,u[h+1]=c>>>8,u[h+2]=c>>>16,u[h+3]=c>>>24}function PK(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+(u[c+3]<<24)}qo.prototype={destroy:function(){this.buf=null},readFields:function(u,c,h){for(h=h||this.length;this.pos<h;){var g=this.readVarint(),_=g>>3,b=this.pos;this.type=7&g,u(_,c,this),this.pos===b&&this.skip(g)}return c},readMessage:function(u,c){return this.readFields(u,c,this.readVarint()+this.pos)},readFixed32:function(){var u=mL(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=PK(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=mL(this.buf,this.pos)+mL(this.buf,this.pos+4)*Nk;return this.pos+=8,u},readSFixed64:function(){var u=mL(this.buf,this.pos)+PK(this.buf,this.pos+4)*Nk;return this.pos+=8,u},readFloat:function(){var u=gL.read(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=gL.read(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var c,h,g=this.buf;return c=127&(h=g[this.pos++]),h<128?c:(c|=(127&(h=g[this.pos++]))<<7,h<128?c:(c|=(127&(h=g[this.pos++]))<<14,h<128?c:(c|=(127&(h=g[this.pos++]))<<21,h<128?c:function(_,b,S){var L,O,N=S.buf;if(L=(112&(O=N[S.pos++]))>>4,O<128||(L|=(127&(O=N[S.pos++]))<<3,O<128)||(L|=(127&(O=N[S.pos++]))<<10,O<128)||(L|=(127&(O=N[S.pos++]))<<17,O<128)||(L|=(127&(O=N[S.pos++]))<<24,O<128)||(L|=(1&(O=N[S.pos++]))<<31,O<128))return Pw(_,L,b);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=g[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,c=this.pos;return this.pos=u,u-c>=12&&LK?function(h,g,_){return LK.decode(h.subarray(g,_))}(this.buf,c,u):function(h,g,_){for(var b="",S=g;S<_;){var L,O,N,U=h[S],j=null,X=U>239?4:U>223?3:U>191?2:1;if(S+X>_)break;X===1?U<128&&(j=U):X===2?(192&(L=h[S+1]))==128&&(j=(31&U)<<6|63&L)<=127&&(j=null):X===3?(O=h[S+2],(192&(L=h[S+1]))==128&&(192&O)==128&&((j=(15&U)<<12|(63&L)<<6|63&O)<=2047||j>=55296&&j<=57343)&&(j=null)):X===4&&(O=h[S+2],N=h[S+3],(192&(L=h[S+1]))==128&&(192&O)==128&&(192&N)==128&&((j=(15&U)<<18|(63&L)<<12|(63&O)<<6|63&N)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,X=1):j>65535&&(j-=65536,b+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),b+=String.fromCharCode(j),S+=X}return b}(this.buf,c,u)},readBytes:function(){var u=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,u);return this.pos=u,c},readPackedVarint:function(u,c){if(this.type!==qo.Bytes)return u.push(this.readVarint(c));var h=lv(this);for(u=u||[];this.pos<h;)u.push(this.readVarint(c));return u},readPackedSVarint:function(u){if(this.type!==qo.Bytes)return u.push(this.readSVarint());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==qo.Bytes)return u.push(this.readBoolean());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==qo.Bytes)return u.push(this.readFloat());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==qo.Bytes)return u.push(this.readDouble());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==qo.Bytes)return u.push(this.readFixed32());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==qo.Bytes)return u.push(this.readSFixed32());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==qo.Bytes)return u.push(this.readFixed64());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==qo.Bytes)return u.push(this.readSFixed64());var c=lv(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed64());return u},skip:function(u){var c=7&u;if(c===qo.Varint)for(;this.buf[this.pos++]>127;);else if(c===qo.Bytes)this.pos=this.readVarint()+this.pos;else if(c===qo.Fixed32)this.pos+=4;else{if(c!==qo.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(u,c){this.writeVarint(u<<3|c)},realloc:function(u){for(var c=this.length||16;c<this.pos+u;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Fw(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Fw(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Fw(this.buf,-1&u,this.pos),Fw(this.buf,Math.floor(u*MK),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Fw(this.buf,-1&u,this.pos),Fw(this.buf,Math.floor(u*MK),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(c,h){var g,_;if(c>=0?(g=c%4294967296|0,_=c/4294967296|0):(_=~(-c/4294967296),4294967295^(g=~(-c%4294967296))?g=g+1|0:(g=0,_=_+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(b,S,L){L.buf[L.pos++]=127&b|128,b>>>=7,L.buf[L.pos++]=127&b|128,b>>>=7,L.buf[L.pos++]=127&b|128,b>>>=7,L.buf[L.pos++]=127&b|128,L.buf[L.pos]=127&(b>>>=7)}(g,0,h),function(b,S){var L=(7&b)<<4;S.buf[S.pos++]|=L|((b>>>=3)?128:0),b&&(S.buf[S.pos++]=127&b|((b>>>=7)?128:0),b&&(S.buf[S.pos++]=127&b|((b>>>=7)?128:0),b&&(S.buf[S.pos++]=127&b|((b>>>=7)?128:0),b&&(S.buf[S.pos++]=127&b|((b>>>=7)?128:0),b&&(S.buf[S.pos++]=127&b)))))}(_,h)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var c=this.pos;this.pos=function(g,_,b){for(var S,L,O=0;O<_.length;O++){if((S=_.charCodeAt(O))>55295&&S<57344){if(!L){S>56319||O+1===_.length?(g[b++]=239,g[b++]=191,g[b++]=189):L=S;continue}if(S<56320){g[b++]=239,g[b++]=191,g[b++]=189,L=S;continue}S=L-55296<<10|S-56320|65536,L=null}else L&&(g[b++]=239,g[b++]=191,g[b++]=189,L=null);S<128?g[b++]=S:(S<2048?g[b++]=S>>6|192:(S<65536?g[b++]=S>>12|224:(g[b++]=S>>18|240,g[b++]=S>>12&63|128),g[b++]=S>>6&63|128),g[b++]=63&S|128)}return b}(this.buf,u,this.pos);var h=this.pos-c;h>=128&&RK(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(u){this.realloc(4),gL.write(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),gL.write(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var c=u.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=u[h]},writeRawMessage:function(u,c){this.pos++;var h=this.pos;u(c,this);var g=this.pos-h;g>=128&&RK(h,g,this),this.pos=h-1,this.writeVarint(g),this.pos+=g},writeMessage:function(u,c,h){this.writeTag(u,qo.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(u,c){c.length&&this.writeMessage(u,y1e,c)},writePackedSVarint:function(u,c){c.length&&this.writeMessage(u,_1e,c)},writePackedBoolean:function(u,c){c.length&&this.writeMessage(u,x1e,c)},writePackedFloat:function(u,c){c.length&&this.writeMessage(u,b1e,c)},writePackedDouble:function(u,c){c.length&&this.writeMessage(u,w1e,c)},writePackedFixed32:function(u,c){c.length&&this.writeMessage(u,C1e,c)},writePackedSFixed32:function(u,c){c.length&&this.writeMessage(u,E1e,c)},writePackedFixed64:function(u,c){c.length&&this.writeMessage(u,S1e,c)},writePackedSFixed64:function(u,c){c.length&&this.writeMessage(u,T1e,c)},writeBytesField:function(u,c){this.writeTag(u,qo.Bytes),this.writeBytes(c)},writeFixed32Field:function(u,c){this.writeTag(u,qo.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(u,c){this.writeTag(u,qo.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(u,c){this.writeTag(u,qo.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(u,c){this.writeTag(u,qo.Fixed64),this.writeSFixed64(c)},writeVarintField:function(u,c){this.writeTag(u,qo.Varint),this.writeVarint(c)},writeSVarintField:function(u,c){this.writeTag(u,qo.Varint),this.writeSVarint(c)},writeStringField:function(u,c){this.writeTag(u,qo.Bytes),this.writeString(c)},writeFloatField:function(u,c){this.writeTag(u,qo.Fixed32),this.writeFloat(c)},writeDoubleField:function(u,c){this.writeTag(u,qo.Fixed64),this.writeDouble(c)},writeBooleanField:function(u,c){this.writeVarintField(u,!!c)}};var Ow=F(BK);const kk=3;function I1e(u,c,h){c.glyphs=[],u===1&&h.readMessage(B1e,c)}function B1e(u,c,h){if(u===3){const{id:g,bitmap:_,width:b,height:S,left:L,top:O,advance:N}=h.readMessage(M1e,{});c.glyphs.push({id:g,bitmap:new U0({width:b+2*kk,height:S+2*kk},_),metrics:{width:b,height:S,left:L,top:O,advance:N}})}else u===4?c.ascender=h.readSVarint():u===5&&(c.descender=h.readSVarint())}function M1e(u,c,h){u===1?c.id=h.readVarint():u===2?c.bitmap=h.readBytes():u===3?c.width=h.readVarint():u===4?c.height=h.readVarint():u===5?c.left=h.readSVarint():u===6?c.top=h.readSVarint():u===7&&(c.advance=h.readVarint())}const FK=kk,yf={horizontal:1,vertical:2,horizontalOnly:3};class pS{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,h){const g=new pS;return g.scale=c||1,g.fontStack=h,g}static forImage(c){const h=new pS;return h.imageName=c,h}}class Nw{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,h){const g=new Nw;for(let _=0;_<c.sections.length;_++){const b=c.sections[_];b.image?g.addImageSection(b):g.addTextSection(b,h)}return g}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSections(){return this.sections}getSectionIndex(c){return this.sectionIndex[c]}getCodePoint(c){return this.text.codePointAt(c)}verticalizePunctuation(c){this.text=function(h,g){let _="";for(let b=0;b<h.length;b++){const S=h.charCodeAt(b+1)||null,L=h.charCodeAt(b-1)||null;_+=!g&&(S&&cr(S)&&!fS[h[b+1]]||L&&cr(L)&&!fS[h[b-1]])||!fS[h[b]]?h[b]:fS[h[b]]}return _}(this.text,c)}trim(){let c=0;for(let g=0;g<this.text.length&&vL[this.text.charCodeAt(g)];g++)c++;let h=this.text.length;for(let g=this.text.length-1;g>=0&&g>=c&&vL[this.text.charCodeAt(g)];g--)h--;this.text=this.text.substring(c,h),this.sectionIndex=this.sectionIndex.slice(c,h)}substring(c,h){const g=new Nw;return g.text=this.text.substring(c,h),g.sectionIndex=this.sectionIndex.slice(c,h),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,h)=>Math.max(c,this.sections[h].scale),0)}addTextSection(c,h){this.text+=c.text,this.sections.push(pS.forText(c.scale,c.fontStack||h));const g=this.sections.length-1;for(let _=0;_<c.text.length;++_)this.sectionIndex.push(g)}addImageSection(c){const h=c.image?c.image.namePrimary:"";if(h.length===0)return void Ye("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCodePoint(g),this.sections.push(pS.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Dk(u,c,h,g,_,b,S,L,O,N,U,j,X,re,fe){const ge=Nw.fromFeature(u,_);j===yf.vertical&&ge.verticalizePunctuation(X);let Ce=[];const Te=function(dt,Pt,Qt,Xt,An,tn){if(!dt)return[];const Sn=[],Dn=function(On,lr,Un,Or,Er,qn){let oi=0;for(let Kr=0;Kr<On.length();Kr++){const Pr=On.getSection(Kr);oi+=OK(On.getCodePoint(Kr),Pr,Or,Er,lr,qn)}return oi/Math.max(1,Math.ceil(oi/Un))}(dt,Pt,Qt,Xt,An,tn),wn=dt.text.indexOf("")>=0;let kn=0;for(let On=0;On<dt.length();On++){const lr=dt.getSection(On),Un=dt.getCodePoint(On);if(vL[Un]||(kn+=OK(Un,lr,Xt,An,Pt,tn)),On<dt.length()-1){const Or=!((yn=Un)<11904||!(ot["Bopomofo Extended"](yn)||ot.Bopomofo(yn)||ot["CJK Compatibility Forms"](yn)||ot["CJK Compatibility Ideographs"](yn)||ot["CJK Compatibility"](yn)||ot["CJK Radicals Supplement"](yn)||ot["CJK Strokes"](yn)||ot["CJK Symbols and Punctuation"](yn)||ot["CJK Unified Ideographs Extension A"](yn)||ot["CJK Unified Ideographs"](yn)||ot["Enclosed CJK Letters and Months"](yn)||ot["Halfwidth and Fullwidth Forms"](yn)||ot.Hiragana(yn)||ot["Ideographic Description Characters"](yn)||ot["Kangxi Radicals"](yn)||ot["Katakana Phonetic Extensions"](yn)||ot.Katakana(yn)||ot["Vertical Forms"](yn)||ot["Yi Radicals"](yn)||ot["Yi Syllables"](yn)));(L1e[Un]||Or||lr.imageName)&&Sn.push(kK(On+1,kn,Dn,Sn,R1e(Un,dt.getCodePoint(On+1),Or&&wn),!1))}}var yn;return DK(kK(dt.length(),kn,Dn,Sn,0,!0))}(ge,N,b,c,g,re),{processBidirectionalText:qe,processStyledBidirectionalText:tt}=Zs;if(qe&&ge.sections.length===1){const dt=qe(ge.toString(),Te);for(const Pt of dt){const Qt=new Nw;Qt.text=Pt,Qt.sections=ge.sections;for(let Xt=0;Xt<Pt.length;Xt++)Qt.sectionIndex.push(0);Ce.push(Qt)}}else if(tt){const dt=tt(ge.text,ge.sectionIndex,Te);for(const Pt of dt){const Qt=new Nw;Qt.text=Pt[0],Qt.sectionIndex=Pt[1],Qt.sections=ge.sections,Ce.push(Qt)}}else Ce=function(dt,Pt){const Qt=[],Xt=dt.text;let An=0;for(const tn of Pt)Qt.push(dt.substring(An,tn)),An=tn;return An<Xt.length&&Qt.push(dt.substring(An,Xt.length)),Qt}(ge,Te);const et=[],vt={positionedLines:et,text:ge.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(dt,Pt,Qt,Xt,An,tn,Sn,Dn,wn,kn,yn,On){let lr=0,Un=0,Or=0;const Er=Dn==="right"?1:Dn==="left"?0:.5;let qn=!1;for(const Wi of An){const ai=Wi.getSections();for(const qi of ai){if(qi.imageName)continue;const Ei=Pt[qi.fontStack];if(Ei&&(qn=Ei.ascender!==void 0&&Ei.descender!==void 0,!qn))break}if(!qn)break}let oi=0;for(const Wi of An){Wi.trim();const ai=Wi.getMaxScale(),qi=(ai-1)*Kc,Ei={positionedGlyphs:[],lineOffset:0};dt.positionedLines[oi]=Ei;const ps=Ei.positionedGlyphs;let Ri=0;if(!Wi.length()){Un+=tn,++oi;continue}let vo=0,Ns=0;for(let Ws=0;Ws<Wi.length();Ws++){const ks=Wi.getSection(Ws),Yo=Wi.getSectionIndex(Ws),so=Wi.getCodePoint(Ws);let Sa=ks.scale,_l=null,Lc=null,zo=null,oa=Kc,Jl=0;const ec=!(wn===yf.horizontal||!yn&&!gn(so)||yn&&(vL[so]||(Kr=so,ot.Arabic(Kr)||ot["Arabic Supplement"](Kr)||ot["Arabic Extended-A"](Kr)||ot["Arabic Presentation Forms-A"](Kr)||ot["Arabic Presentation Forms-B"](Kr))));if(ks.imageName){const tc=Xt[ks.imageName];if(!tc)continue;zo=ks.imageName,dt.iconsInText=dt.iconsInText||!0,Lc=tc.paddedRect;const Ro=tc.displaySize;Sa=Sa*Kc/On,_l={width:Ro[0],height:Ro[1],left:0,top:-FK,advance:ec?Ro[1]:Ro[0],localGlyph:!1},Jl=qn?-_l.height*Sa:ai*Kc-17-Ro[1]*Sa,oa=_l.advance;const cd=(ec?Ro[0]:Ro[1])*Sa-Kc*ai;cd>0&&cd>Ri&&(Ri=cd)}else{const tc=Qt[ks.fontStack];if(!tc)continue;tc[so]&&(Lc=tc[so]);const Ro=Pt[ks.fontStack];if(!Ro)continue;const cd=Ro.glyphs[so];if(!cd)continue;if(_l=cd.metrics,oa=so!==8203?Kc:0,qn){const W0=Ro.ascender!==void 0?Math.abs(Ro.ascender):0,rh=Ro.descender!==void 0?Math.abs(Ro.descender):0,ud=(W0+rh)*Sa;vo<ud&&(vo=ud,Ns=(W0-rh)/2*Sa),Jl=-W0*Sa}else Jl=(ai-Sa)*Kc-17}ec?(dt.verticalizable=!0,ps.push({glyph:so,imageName:zo,x:lr,y:Un+Jl,vertical:ec,scale:Sa,localGlyph:_l.localGlyph,fontStack:ks.fontStack,sectionIndex:Yo,metrics:_l,rect:Lc}),lr+=oa*Sa+kn):(ps.push({glyph:so,imageName:zo,x:lr,y:Un+Jl,vertical:ec,scale:Sa,localGlyph:_l.localGlyph,fontStack:ks.fontStack,sectionIndex:Yo,metrics:_l,rect:Lc}),lr+=_l.advance*Sa+kn)}ps.length!==0&&(Or=Math.max(lr-kn,Or),qn?UK(ps,Er,Ri,Ns,tn*ai/2):UK(ps,Er,Ri,0,tn/2)),lr=0;const Us=tn*ai+Ri;Ei.lineOffset=Math.max(Ri,qi),Un+=Us,++oi}var Kr;const Pr=Un,{horizontalAlign:Yn,verticalAlign:ti}=Uk(Sn);(function(Wi,ai,qi,Ei,ps,Ri){const vo=(ai-qi)*ps,Ns=-Ri*Ei;for(const Us of Wi)for(const Ws of Us.positionedGlyphs)Ws.x+=vo,Ws.y+=Ns})(dt.positionedLines,Er,Yn,ti,Or,Pr),dt.top+=-ti*Pr,dt.bottom=dt.top+Pr,dt.left+=-Yn*Or,dt.right=dt.left+Or,dt.hasBaseline=qn}(vt,c,h,g,Ce,S,L,O,j,N,X,fe),!function(dt){for(const Pt of dt)if(Pt.positionedGlyphs.length!==0)return!1;return!0}(et)&&vt}const vL={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},L1e={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function OK(u,c,h,g,_,b){if(c.imageName){const S=g[c.imageName];return S?S.displaySize[0]*c.scale*Kc/b+_:0}{const S=h[c.fontStack],L=S&&S.glyphs[u];return L?L.metrics.advance*c.scale+_:0}}function NK(u,c,h,g){const _=Math.pow(u-c,2);return g?u<c?_/2:2*_:_+Math.abs(h)*h}function R1e(u,c,h){let g=0;return u===10&&(g-=1e4),h&&(g+=150),u!==40&&u!==65288||(g+=50),c!==41&&c!==65289||(g+=50),g}function kK(u,c,h,g,_,b){let S=null,L=NK(c,h,_,b);for(const O of g){const N=NK(c-O.x,h,_,b)+O.badness;N<=L&&(S=O,L=N)}return{index:u,x:c,priorBreak:S,badness:L}}function DK(u){return u?DK(u.priorBreak).concat(u.index):[]}function Uk(u){let c=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function UK(u,c,h,g,_){if(!(c||h||g||_))return;const b=u.length-1,S=u[b],L=(S.x+S.metrics.advance*S.scale)*c;for(let O=0;O<=b;O++)u[O].x-=L,u[O].y+=h+g+_}function P1e(u,c,h,g){const{horizontalAlign:_,verticalAlign:b}=Uk(g),S=h[0]-u.displaySize[0]*_,L=h[1]-u.displaySize[1]*b;return{imagePrimary:u,imageSecondary:c,top:L,bottom:L+u.displaySize[1],left:S,right:S+u.displaySize[0]}}function zK(u,c,h,g,_,b){const S=u.imagePrimary;let L;if(S.content){const Ce=S.content,Te=S.pixelRatio||1;L=[Ce[0]/Te,Ce[1]/Te,S.displaySize[0]-Ce[2]/Te,S.displaySize[1]-Ce[3]/Te]}const O=c.left*b,N=c.right*b;let U,j,X,re;h==="width"||h==="both"?(re=_[0]+O-g[3],j=_[0]+N+g[1]):(re=_[0]+(O+N-S.displaySize[0])/2,j=re+S.displaySize[0]);const fe=c.top*b,ge=c.bottom*b;return h==="height"||h==="both"?(U=_[1]+fe-g[0],X=_[1]+ge+g[2]):(U=_[1]+(fe+ge-S.displaySize[1])/2,X=U+S.displaySize[1]),{imagePrimary:S,imageSecondary:void 0,top:U,right:j,bottom:X,left:re,collisionPadding:L}}class cv extends W{constructor(c,h,g,_,b){super(c,h),this.angle=_,this.z=g,b!==void 0&&(this.segment=b)}clone(){return new cv(this.x,this.y,this.z,this.angle,this.segment)}}function $K(u,c,h,g,_){if(c.segment===void 0)return!0;let b=c,S=c.segment+1,L=0;for(;L>-h/2;){if(S--,S<0)return!1;L-=u[S].dist(b),b=u[S]}L+=u[S].dist(u[S+1]),S++;const O=[];let N=0;for(;L<h/2;){const U=u[S],j=u[S+1];if(!j)return!1;let X=u[S-1].angleTo(U)-U.angleTo(j);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:L,angleDelta:X}),N+=X;L-O[0].distance>g;)N-=O.shift().angleDelta;if(N>_)return!1;S++,L+=U.dist(j)}return!0}function VK(u){let c=0;for(let h=0;h<u.length-1;h++)c+=u[h].dist(u[h+1]);return c}function HK(u,c,h){return u?.6*c*h:0}function GK(u,c){return Math.max(u?u.right-u.left:0,c?c.right-c.left:0)}function F1e(u,c,h,g,_,b){const S=HK(h,_,b),L=GK(h,g)*b;let O=0;const N=VK(u)/2;for(let U=0;U<u.length-1;U++){const j=u[U],X=u[U+1],re=j.dist(X);if(O+re>N){const fe=(N-O)/re,ge=Qi(j.x,X.x,fe),Ce=Qi(j.y,X.y,fe),Te=new cv(ge,Ce,0,X.angleTo(j),U);return!S||$K(u,Te,L,S,c)?Te:void 0}O+=re}}function O1e(u,c,h,g,_,b,S,L,O){const N=HK(g,b,S),U=GK(g,_),j=U*S,X=u[0].x===0||u[0].x===O||u[0].y===0||u[0].y===O;return c-j<c/4&&(c=j+c/4),QK(u,X?c/2*L%c:(U/2+2*b)*S*L%c,c,N,h,j,X,!1,O)}function QK(u,c,h,g,_,b,S,L,O){const N=b/2,U=VK(u);let j=0,X=c-h,re=[];for(let fe=0;fe<u.length-1;fe++){const ge=u[fe],Ce=u[fe+1],Te=ge.dist(Ce),qe=Ce.angleTo(ge);for(;X+h<j+Te;){X+=h;const tt=(X-j)/Te,et=Qi(ge.x,Ce.x,tt),vt=Qi(ge.y,Ce.y,tt);if(et>=0&&et<O&&vt>=0&&vt<O&&X-N>=0&&X+N<=U){const dt=new cv(et,vt,0,qe,fe);g&&!$K(u,dt,b,g,_)||re.push(dt)}}j+=Te}return L||re.length||S||(re=QK(u,j/2,h,g,_,b,S,!0,O)),re}function jK(u,c,h,g,_){const b=[];for(let S=0;S<u.length;S++){const L=u[S];let O;for(let N=0;N<L.length-1;N++){let U=L[N],j=L[N+1];U.x<c&&j.x<c||(U.x<c?U=new W(c,U.y+(c-U.x)/(j.x-U.x)*(j.y-U.y))._round():j.x<c&&(j=new W(c,U.y+(c-U.x)/(j.x-U.x)*(j.y-U.y))._round()),U.y<h&&j.y<h||(U.y<h?U=new W(U.x+(h-U.y)/(j.y-U.y)*(j.x-U.x),h)._round():j.y<h&&(j=new W(U.x+(h-U.y)/(j.y-U.y)*(j.x-U.x),h)._round()),U.x>=g&&j.x>=g||(U.x>=g?U=new W(g,U.y+(g-U.x)/(j.x-U.x)*(j.y-U.y))._round():j.x>=g&&(j=new W(g,U.y+(g-U.x)/(j.x-U.x)*(j.y-U.y))._round()),U.y>=_&&j.y>=_||(U.y>=_?U=new W(U.x+(_-U.y)/(j.y-U.y)*(j.x-U.x),_)._round():j.y>=_&&(j=new W(U.x+(_-U.y)/(j.y-U.y)*(j.x-U.x),_)._round()),O&&U.equals(O[O.length-1])||(O=[U],b.push(O)),O.push(j)))))}}return b}function KK(u){let c=0,h=0;for(const S of u)c+=S.w*S.h,h=Math.max(h,S.w);u.sort((S,L)=>L.h-S.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}];let _=0,b=0;for(const S of u)for(let L=g.length-1;L>=0;L--){const O=g[L];if(!(S.w>O.w||S.h>O.h)){if(S.x=O.x,S.y=O.y,b=Math.max(b,S.y+S.h),_=Math.max(_,S.x+S.w),S.w===O.w&&S.h===O.h){const N=g.pop();L<g.length&&(g[L]=N)}else S.h===O.h?(O.x+=S.w,O.w-=S.w):S.w===O.w?(O.y+=S.h,O.h-=S.h):(g.push({x:O.x+S.w,y:O.y,w:O.w-S.w,h:S.h}),O.y+=S.h,O.h-=S.h);break}}return{w:_,h:b,fill:c/(_*b)||0}}Pe(cv,"Anchor");const ld=1;class zk{constructor(c,{pixelRatio:h,version:g,stretchX:_,stretchY:b,content:S}){this.paddedRect=c,this.pixelRatio=h,this.stretchX=_,this.stretchY=b,this.content=S,this.version=g}get tl(){return[this.paddedRect.x+ld,this.paddedRect.y+ld]}get br(){return[this.paddedRect.x+this.paddedRect.w-ld,this.paddedRect.y+this.paddedRect.h-ld]}get displaySize(){return[(this.paddedRect.w-2*ld)/this.pixelRatio,(this.paddedRect.h-2*ld)/this.pixelRatio]}}class WK{constructor(c,h){const g={},_={};this.haveRenderCallbacks=[];const b=[];this.addImages(c,g,b),this.addImages(h,_,b);const{w:S,h:L}=KK(b),O=new vf({width:S||1,height:L||1});for(const N in c){const U=c[N],j=g[N].paddedRect;vf.copy(U.data,O,{x:0,y:0},{x:j.x+ld,y:j.y+ld},U.data,U.sdf)}for(const N in h){const U=h[N],j=_[N].paddedRect,X=j.x+ld,re=j.y+ld,fe=U.data.width,ge=U.data.height;vf.copy(U.data,O,{x:0,y:0},{x:X,y:re},U.data),vf.copy(U.data,O,{x:0,y:ge-1},{x:X,y:re-1},{width:fe,height:1}),vf.copy(U.data,O,{x:0,y:0},{x:X,y:re+ge},{width:fe,height:1}),vf.copy(U.data,O,{x:fe-1,y:0},{x:X-1,y:re},{width:1,height:ge}),vf.copy(U.data,O,{x:0,y:0},{x:X+fe,y:re},{width:1,height:ge})}this.image=O,this.iconPositions=g,this.patternPositions=_}addImages(c,h,g){for(const _ in c){const b=c[_],S={x:0,y:0,w:b.data.width+2*ld,h:b.data.height+2*ld};g.push(S),h[_]=new zk(S,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(c,h,g){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(_=>c.hasImage(_,g)),c.dispatchRenderCallbacks(this.haveRenderCallbacks,g);for(const _ in c.getUpdatedImages(g))this.patchUpdatedImage(this.iconPositions[_],c.getImage(_,g),h),this.patchUpdatedImage(this.patternPositions[_],c.getImage(_,g),h)}patchUpdatedImage(c,h,g){if(!c||!h||c.version===h.version)return;c.version=h.version;const[_,b]=c.tl,S=!!Object.keys(this.patternPositions).length;g.update(h.data,{useMipmap:S},{x:_,y:b})}}Pe(zk,"ImagePosition"),Pe(WK,"ImageAtlas");const AS=1e20;function qK(u,c,h,g,_,b,S,L,O){for(let N=c;N<c+g;N++)YK(u,h*b+N,b,_,S,L,O);for(let N=h;N<h+_;N++)YK(u,N*b+c,1,g,S,L,O)}function YK(u,c,h,g,_,b,S){b[0]=0,S[0]=-AS,S[1]=AS,_[0]=u[c];for(let L=1,O=0,N=0;L<g;L++){_[L]=u[c+L*h];const U=L*L;do{const j=b[O];N=(_[L]-_[j]+U-j*j)/(L-j)/2}while(N<=S[O]&&--O>-1);O++,b[O]=L,S[O]=N,S[O+1]=AS}for(let L=0,O=0;L<g;L++){for(;S[O+1]<L;)O++;const N=b[O],U=L-N;u[c+L*h]=_[N]+U*U}}const cA=2,$k={none:0,ideographs:1,all:2};class kw{constructor(c,h,g){this.requestManager=c,this.localGlyphMode=h,this.localFontFamily=g,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(c,h){this.urls[h]=c}getGlyphs(c,h,g){const _=[],b=this.urls[h]||A.GLYPHS_URL;for(const S in c)for(const L of c[S])_.push({stack:S,id:L});Le(_,({stack:S,id:L},O)=>{let N=this.entries[S];N||(N=this.entries[S]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let U=N.glyphs[L];if(U!==void 0)return void O(null,{stack:S,id:L,glyph:U});if(U=this._tinySDF(N,S,L),U)return N.glyphs[L]=U,void O(null,{stack:S,id:L,glyph:U});const j=Math.floor(L/256);if(256*j>65535)return void O(new Error("glyphs > 65535 not supported"));if(N.ranges[j])return void O(null,{stack:S,id:L,glyph:U});let X=N.requests[j];X||(X=N.requests[j]=[],kw.loadGlyphRange(S,j,b,this.requestManager,(re,fe)=>{if(fe){N.ascender=fe.ascender,N.descender=fe.descender;for(const ge in fe.glyphs)this._doesCharSupportLocalGlyph(+ge)||(N.glyphs[+ge]=fe.glyphs[+ge]);N.ranges[j]=!0}for(const ge of X)ge(re,fe);delete N.requests[j]})),X.push((re,fe)=>{re?O(re):fe&&O(null,{stack:S,id:L,glyph:fe.glyphs[L]||null})})},(S,L)=>{if(S)g(S);else if(L){const O={};for(const{stack:N,id:U,glyph:j}of L)O[N]===void 0&&(O[N]={}),O[N].glyphs===void 0&&(O[N].glyphs={}),O[N].glyphs[U]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics},O[N].ascender=this.entries[N].ascender,O[N].descender=this.entries[N].descender;g(null,O)}})}_doesCharSupportLocalGlyph(c){return this.localGlyphMode!==$k.none&&(this.localGlyphMode===$k.all?!!this.localFontFamily:!!this.localFontFamily&&(ot["CJK Unified Ideographs"](c)||ot["Hangul Syllables"](c)||ot.Hiragana(c)||ot.Katakana(c)||ot["CJK Symbols and Punctuation"](c)||ot["CJK Unified Ideographs Extension A"](c)||ot["CJK Unified Ideographs Extension B"](c)))}_tinySDF(c,h,g){const _=this.localFontFamily;if(!_||!this._doesCharSupportLocalGlyph(g))return;let b=c.tinySDF;if(!b){let ge="400";/bold/i.test(h)?ge="900":/medium/i.test(h)?ge="500":/light/i.test(h)&&(ge="200"),b=c.tinySDF=new kw.TinySDF({fontFamily:_,fontWeight:ge,fontSize:24*cA,buffer:3*cA,radius:8*cA}),b.fontWeight=ge}if(this.localGlyphs[b.fontWeight][g])return this.localGlyphs[b.fontWeight][g];const S=String.fromCodePoint(g),{data:L,width:O,height:N,glyphWidth:U,glyphHeight:j,glyphLeft:X,glyphTop:re,glyphAdvance:fe}=b.draw(S);return this.localGlyphs[b.fontWeight][g]={id:g,bitmap:new U0({width:O,height:N},L),metrics:{width:U/cA,height:j/cA,left:X/cA,top:re/cA-27,advance:fe/cA,localGlyph:!0}}}}kw.loadGlyphRange=function(u,c,h,g,_){const b=256*c,S=b+255,L=g.transformRequest(g.normalizeGlyphsURL(h).replace("{fontstack}",u).replace("{range}",`${b}-${S}`),zr.Glyphs);dn(L,(O,N)=>{if(O)_(O);else if(N){const U={},j=function(X){return new Ow(X).readFields(I1e,{})}(N);for(const X of j.glyphs)U[X.id]=X;_(null,{glyphs:U,ascender:j.ascender,descender:j.descender})}})},kw.TinySDF=class{constructor({fontSize:u=24,buffer:c=3,radius:h=8,cutoff:g=.25,fontFamily:_="sans-serif",fontWeight:b="normal",fontStyle:S="normal"}={}){this.buffer=c,this.cutoff=g,this.radius=h;const L=this.size=u+4*c,O=this._createCanvas(L),N=this.ctx=O.getContext("2d",{willReadFrequently:!0});N.font=`${S} ${b} ${u}px ${_}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(u){const c=document.createElement("canvas");return c.width=c.height=u,c}draw(u){const{width:c,actualBoundingBoxAscent:h,actualBoundingBoxDescent:g,actualBoundingBoxLeft:_,actualBoundingBoxRight:b}=this.ctx.measureText(u),S=Math.ceil(h),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-_))),O=Math.min(this.size-this.buffer,S+Math.ceil(g)),N=L+2*this.buffer,U=O+2*this.buffer,j=Math.max(N*U,0),X=new Uint8ClampedArray(j),re={data:X,width:N,height:U,glyphWidth:L,glyphHeight:O,glyphTop:S,glyphLeft:0,glyphAdvance:c};if(L===0||O===0)return re;const{ctx:fe,buffer:ge,gridInner:Ce,gridOuter:Te}=this;fe.clearRect(ge,ge,L,O),fe.fillText(u,ge,ge+S);const qe=fe.getImageData(ge,ge,L,O);Te.fill(AS,0,j),Ce.fill(0,0,j);for(let tt=0;tt<O;tt++)for(let et=0;et<L;et++){const vt=qe.data[4*(tt*L+et)+3]/255;if(vt===0)continue;const dt=(tt+ge)*N+et+ge;if(vt===1)Te[dt]=0,Ce[dt]=AS;else{const Pt=.5-vt;Te[dt]=Pt>0?Pt*Pt:0,Ce[dt]=Pt<0?Pt*Pt:0}}qK(Te,0,0,N,U,N,this.f,this.v,this.z),qK(Ce,ge,ge,L,O,N,this.f,this.v,this.z);for(let tt=0;tt<j;tt++){const et=Math.sqrt(Te[tt])-Math.sqrt(Ce[tt]);X[tt]=Math.round(255-255*(et/this.radius+this.cutoff))}return re}};const V0=ld;function XK(u,c,h,g){const _=[],b=u.imagePrimary,S=b.pixelRatio,L=b.paddedRect.w-2*V0,O=b.paddedRect.h-2*V0,N=u.right-u.left,U=u.bottom-u.top,j=b.stretchX||[[0,L]],X=b.stretchY||[[0,O]],re=(tn,Sn)=>tn+Sn[1]-Sn[0],fe=j.reduce(re,0),ge=X.reduce(re,0),Ce=L-fe,Te=O-ge;let qe=0,tt=fe,et=0,vt=ge,dt=0,Pt=Ce,Qt=0,Xt=Te;if(b.content&&g){const tn=b.content;qe=yL(j,0,tn[0]),et=yL(X,0,tn[1]),tt=yL(j,tn[0],tn[2]),vt=yL(X,tn[1],tn[3]),dt=tn[0]-qe,Qt=tn[1]-et,Pt=tn[2]-tn[0]-tt,Xt=tn[3]-tn[1]-vt}const An=(tn,Sn,Dn,wn)=>{const kn=_L(tn.stretch-qe,tt,N,u.left),yn=bL(tn.fixed-dt,Pt,tn.stretch,fe),On=_L(Sn.stretch-et,vt,U,u.top),lr=bL(Sn.fixed-Qt,Xt,Sn.stretch,ge),Un=_L(Dn.stretch-qe,tt,N,u.left),Or=bL(Dn.fixed-dt,Pt,Dn.stretch,fe),Er=_L(wn.stretch-et,vt,U,u.top),qn=bL(wn.fixed-Qt,Xt,wn.stretch,ge),oi=new W(kn,On),Kr=new W(Un,On),Pr=new W(Un,Er),Yn=new W(kn,Er),ti=new W(yn/S,lr/S),Wi=new W(Or/S,qn/S),ai=c*Math.PI/180;if(ai){const Ns=Math.sin(ai),Us=Math.cos(ai),Ws=[Us,-Ns,Ns,Us];oi._matMult(Ws),Kr._matMult(Ws),Yn._matMult(Ws),Pr._matMult(Ws)}const qi=tn.stretch+tn.fixed,Ei=Dn.stretch+Dn.fixed,ps=Sn.stretch+Sn.fixed,Ri=wn.stretch+wn.fixed,vo=u.imageSecondary;return{tl:oi,tr:Kr,bl:Yn,br:Pr,texPrimary:{x:b.paddedRect.x+V0+qi,y:b.paddedRect.y+V0+ps,w:Ei-qi,h:Ri-ps},texSecondary:vo?{x:vo.paddedRect.x+V0+qi,y:vo.paddedRect.y+V0+ps,w:Ei-qi,h:Ri-ps}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ti,pixelOffsetBR:Wi,minFontScaleX:Pt/S/N,minFontScaleY:Xt/S/U,isSDF:h}};if(g&&(b.stretchX||b.stretchY)){const tn=ZK(j,Ce,fe),Sn=ZK(X,Te,ge);for(let Dn=0;Dn<tn.length-1;Dn++){const wn=tn[Dn],kn=tn[Dn+1];for(let yn=0;yn<Sn.length-1;yn++)_.push(An(wn,Sn[yn],kn,Sn[yn+1]))}}else _.push(An({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:L+1},{fixed:0,stretch:O+1}));return _}function yL(u,c,h){let g=0;for(const _ of u)g+=Math.max(c,Math.min(h,_[1]))-Math.max(c,Math.min(h,_[0]));return g}function ZK(u,c,h){const g=[{fixed:-V0,stretch:0}];for(const[_,b]of u){const S=g[g.length-1];g.push({fixed:_-S.stretch,stretch:S.stretch}),g.push({fixed:_-S.stretch,stretch:S.stretch+(b-_)})}return g.push({fixed:c+V0,stretch:h}),g}function _L(u,c,h,g){return u/c*h+g}function bL(u,c,h,g){return u-c*h/g}function N1e(u,c,h,g){const _=c+u.positionedLines[g].lineOffset;return g===0?h+_/2:h+(_+(c+u.positionedLines[g-1].lineOffset))/2}function k1e(u,c=1,h=!1){let g=1/0,_=1/0,b=-1/0,S=-1/0;const L=u[0];for(let re=0;re<L.length;re++){const fe=L[re];(!re||fe.x<g)&&(g=fe.x),(!re||fe.y<_)&&(_=fe.y),(!re||fe.x>b)&&(b=fe.x),(!re||fe.y>S)&&(S=fe.y)}const O=Math.min(b-g,S-_);let N=O/2;const U=new ts([],D1e);if(O===0)return new W(g,_);for(let re=g;re<b;re+=O)for(let fe=_;fe<S;fe+=O)U.push(new Dw(re+N,fe+N,N,u));let j=function(re){let fe=0,ge=0,Ce=0;const Te=re[0];for(let qe=0,tt=Te.length,et=tt-1;qe<tt;et=qe++){const vt=Te[qe],dt=Te[et],Pt=vt.x*dt.y-dt.x*vt.y;ge+=(vt.x+dt.x)*Pt,Ce+=(vt.y+dt.y)*Pt,fe+=3*Pt}return new Dw(ge/fe,Ce/fe,0,re)}(u),X=U.length;for(;U.length;){const re=U.pop();(re.d>j.d||!j.d)&&(j=re,h&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,X)),re.max-j.d<=c||(N=re.h/2,U.push(new Dw(re.p.x-N,re.p.y-N,N,u)),U.push(new Dw(re.p.x+N,re.p.y-N,N,u)),U.push(new Dw(re.p.x-N,re.p.y+N,N,u)),U.push(new Dw(re.p.x+N,re.p.y+N,N,u)),X+=4)}return h&&(console.log(`num probes: ${X}`),console.log(`best distance: ${j.d}`)),j.p}function D1e(u,c){return c.max-u.max}class Dw{constructor(c,h,g,_){this.p=new W(c,h),this.h=g,this.d=function(b,S){let L=!1,O=1/0;for(let N=0;N<S.length;N++){const U=S[N];for(let j=0,X=U.length,re=X-1;j<X;re=j++){const fe=U[j],ge=U[re];fe.y>b.y!=ge.y>b.y&&b.x<(ge.x-fe.x)*(b.y-fe.y)/(ge.y-fe.y)+fe.x&&(L=!L),O=Math.min(O,N0(b,fe,ge))}}return(L?1:-1)*Math.sqrt(O)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}}const Vk=Number.POSITIVE_INFINITY,U1e=Math.sqrt(2);function JK(u,[c,h]){let g=0,_=0;if(h===Vk){c<0&&(c=0);const b=c/U1e;switch(u){case"top-right":case"top-left":_=b-7;break;case"bottom-right":case"bottom-left":_=7-b;break;case"bottom":_=7-c;break;case"top":_=c-7}switch(u){case"top-right":case"bottom-right":g=-b;break;case"top-left":case"bottom-left":g=b;break;case"left":g=c;break;case"right":g=-c}}else{switch(c=Math.abs(c),h=Math.abs(h),u){case"top-right":case"top-left":case"top":_=h-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-h}switch(u){case"top-right":case"bottom-right":case"right":g=-c;break;case"top-left":case"bottom-left":case"left":g=c}}return[g,_]}function Hk(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function z1e(u,c,h,g,_,b,S,L,O,N,U,j,X,re,fe){let ge=b.textMaxSize.evaluate(c,{},j);ge===void 0&&(ge=S);const Ce=u.layers[0].layout,Te=Ce.get("icon-offset").evaluate(c,{},j),qe=tW(h.horizontal)||h.vertical,tt=X.name==="globe",et=Kc,vt=S/et,dt=u.tilePixelRatio*ge/et,Pt=(kn=u.overscaling,u.zoom>18&&kn>2&&(kn>>=1),Math.max(zn/(512*kn),1)*Ce.get("symbol-spacing")),Qt=Ce.get("text-padding")*u.tilePixelRatio,Xt=Ce.get("icon-padding")*u.tilePixelRatio,An=Y(Ce.get("text-max-angle")),tn=Ce.get("text-rotation-alignment")==="map"&&Ce.get("symbol-placement")!=="point",Sn=Ce.get("icon-rotation-alignment")==="map"&&Ce.get("symbol-placement")!=="point",Dn=Ce.get("symbol-placement"),wn=Pt/2;var kn;const yn=Ce.get("icon-text-fit").evaluate(c,{},j),On=Ce.get("icon-text-fit-padding").evaluate(c,{},j),lr=yn!=="none";let Un;u.hasAnyIconTextFit===!1&&lr&&(u.hasAnyIconTextFit=!0),g&&lr&&(u.allowVerticalPlacement&&h.vertical&&(Un=zK(g,h.vertical,yn,On,Te,vt)),qe&&(g=zK(g,qe,yn,On,Te,vt)));const Or=(Er,qn,oi)=>{if(qn.x<0||qn.x>=zn||qn.y<0||qn.y>=zn)return;let Kr=null;if(tt){const{x:Pr,y:Yn,z:ti}=X.projectTilePoint(qn.x,qn.y,oi);Kr={anchor:new cv(Pr,Yn,ti,0,void 0),up:X.upVector(oi,qn.x,qn.y)}}(function(Pr,Yn,ti,Wi,ai,qi,Ei,ps,Ri,vo,Ns,Us,Ws,ks,Yo,so,Sa,_l,Lc,zo,oa,Jl,ec,tc,Ro,cd,W0){const rh=Pr.addToLineVertexArray(Yn,Wi);let ud,bf,RS,VL,nq,rq,iq,sq=0,oq=0,aq=0,lq=0,dD=-1,fD=-1;const Sg={};let cq=tS("");const d1=ti?ti.anchor:Yn,pD=Ri.layout.get("icon-text-fit").evaluate(oa,{},Ro)!=="none";let AD=0,gD=0;if(Ri._unevaluatedLayout.getValue("text-radial-offset")===void 0?[AD,gD]=Ri.layout.get("text-offset").evaluate(oa,{},Ro).map(hd=>hd*Kc):(AD=Ri.layout.get("text-radial-offset").evaluate(oa,{},Ro)*Kc,gD=Vk),Pr.allowVerticalPlacement&&ai.vertical){const hd=ai.vertical;if(Yo)rq=Gk(hd),ps&&(iq=Gk(ps));else{const dd=Ri.layout.get("text-rotate").evaluate(oa,{},Ro)+90;RS=wL(vo,d1,Yn,Ns,Us,Ws,hd,ks,dd,so),ps&&(VL=wL(vo,d1,Yn,Ns,Us,Ws,ps,_l,dd))}}if(qi){const hd=Ri.layout.get("icon-rotate").evaluate(oa,{},Ro),dd=XK(qi,hd,ec,pD),Qw=ps?XK(ps,hd,ec,pD):void 0;bf=wL(vo,d1,Yn,Ns,Us,Ws,qi,_l,hd),sq=4*dd.length;const uq=Pr.iconSizeData;let f1=null;uq.kind==="source"?(f1=[lA*Ri.layout.get("icon-size").evaluate(oa,{},Ro)],f1[0]>H0&&Ye(`${Pr.layerIds[0]}: Value for "icon-size" is >= ${gS}. Reduce your "icon-size".`)):uq.kind==="composite"&&(f1=[lA*Jl.compositeIconSizes[0].evaluate(oa,{},Ro),lA*Jl.compositeIconSizes[1].evaluate(oa,{},Ro)],(f1[0]>H0||f1[1]>H0)&&Ye(`${Pr.layerIds[0]}: Value for "icon-size" is >= ${gS}. Reduce your "icon-size".`)),Pr.addSymbols(Pr.icon,dd,f1,zo,Lc,oa,!1,ti,Yn,rh.lineStartIndex,rh.lineLength,-1,tc,Ro,cd,W0),dD=Pr.icon.placedSymbolArray.length-1,Qw&&(oq=4*Qw.length,Pr.addSymbols(Pr.icon,Qw,f1,zo,Lc,oa,yf.vertical,ti,Yn,rh.lineStartIndex,rh.lineLength,-1,tc,Ro,cd,W0),fD=Pr.icon.placedSymbolArray.length-1)}for(const hd in ai.horizontal){const dd=ai.horizontal[hd];ud||(cq=tS(dd.text),Yo?nq=Gk(dd):ud=wL(vo,d1,Yn,Ns,Us,Ws,dd,ks,Ri.layout.get("text-rotate").evaluate(oa,{},Ro),so));const Qw=dd.positionedLines.length===1;if(aq+=eW(Pr,ti,Yn,dd,Ei,Ri,Yo,oa,so,rh,ai.vertical?yf.horizontal:yf.horizontalOnly,Qw?Object.keys(ai.horizontal):[hd],Sg,dD,Jl,tc,Ro,cd),Qw)break}ai.vertical&&(lq+=eW(Pr,ti,Yn,ai.vertical,Ei,Ri,Yo,oa,so,rh,yf.vertical,["vertical"],Sg,fD,Jl,tc,Ro,cd));let q0=-1;const mD=(hd,dd)=>hd?Math.max(hd,dd):dd;q0=mD(nq,q0),q0=mD(rq,q0),q0=mD(iq,q0);const iwe=q0>-1?1:0;Pr.glyphOffsetArray.length>=65535&&Ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),oa.sortKey!==void 0&&Pr.addToSortKeyRanges(Pr.symbolInstances.length,oa.sortKey),Pr.symbolInstances.emplaceBack(Yn.x,Yn.y,d1.x,d1.y,d1.z,Sg.right>=0?Sg.right:-1,Sg.center>=0?Sg.center:-1,Sg.left>=0?Sg.left:-1,Sg.vertical>=0?Sg.vertical:-1,dD,fD,cq,ud!==void 0?ud:Pr.collisionBoxArray.length,ud!==void 0?ud+1:Pr.collisionBoxArray.length,RS!==void 0?RS:Pr.collisionBoxArray.length,RS!==void 0?RS+1:Pr.collisionBoxArray.length,bf!==void 0?bf:Pr.collisionBoxArray.length,bf!==void 0?bf+1:Pr.collisionBoxArray.length,VL||Pr.collisionBoxArray.length,VL?VL+1:Pr.collisionBoxArray.length,Ns,aq,lq,sq,oq,iwe,0,AD,gD,q0,0,pD?1:0)})(u,qn,Kr,Er,h,g,_,Un,u.layers[0],u.collisionBoxArray,c.index,c.sourceLayerIndex,u.index,Qt,tn,O,0,Xt,Sn,Te,c,b,N,U,j,re,fe)};if(Dn==="line")for(const Er of jK(c.geometry,0,0,zn,zn)){const qn=O1e(Er,Pt,An,h.vertical||qe,g,et,dt,u.overscaling,zn);for(const oi of qn)qe&&$1e(u,qe.text,wn,oi)||Or(Er,oi,j)}else if(Dn==="line-center"){for(const Er of c.geometry)if(Er.length>1){const qn=F1e(Er,An,h.vertical||qe,g,et,dt);qn&&Or(Er,qn,j)}}else if(c.type==="Polygon")for(const Er of Ik(c.geometry,0)){const qn=k1e(Er,16);Or(Er[0],new cv(qn.x,qn.y,0,0,void 0),j)}else if(c.type==="LineString")for(const Er of c.geometry)Or(Er,new cv(Er[0].x,Er[0].y,0,0,void 0),j);else if(c.type==="Point")for(const Er of c.geometry)for(const qn of Er)Or([qn],new cv(qn.x,qn.y,0,0,void 0),j)}const gS=255,H0=gS*lA;function eW(u,c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce,Te){const qe=function(vt,dt,Pt,Qt,Xt,An,tn,Sn){const Dn=[];if(dt.positionedLines.length===0)return Dn;const wn=Qt.layout.get("text-rotate").evaluate(An,{})*Math.PI/180,kn=function(Or){const Er=Or[0],qn=Or[1],oi=Er*qn;return oi>0?[Er,-qn]:oi<0?[-Er,qn]:Er===0?[qn,Er]:[qn,-Er]}(Pt);let yn=Math.abs(dt.top-dt.bottom);for(const Or of dt.positionedLines)yn-=Or.lineOffset;const On=dt.positionedLines.length,lr=yn/On;let Un=dt.top-Pt[1];for(let Or=0;Or<On;++Or){const Er=dt.positionedLines[Or];Un=N1e(dt,lr,Un,Or);for(const qn of Er.positionedGlyphs){if(!qn.rect)continue;const oi=qn.rect||{};let Kr=FK+1,Pr=!0,Yn=1,ti=0;if(qn.imageName){const zo=tn[qn.imageName];if(!zo)continue;if(zo.sdf){Ye("SDF images are not supported in formatted text and will be ignored.");continue}Pr=!1,Yn=zo.pixelRatio,Kr=ld/Yn}const Wi=(Xt||Sn)&&qn.vertical,ai=qn.metrics.advance*qn.scale/2,qi=qn.metrics,Ei=qn.rect;if(Ei===null)continue;Sn&&dt.verticalizable&&(ti=qn.imageName?ai-qn.metrics.width*qn.scale/2:0);const ps=Xt?[qn.x+ai,qn.y]:[0,0];let Ri=[0,0],vo=[0,0],Ns=!1;Xt||(Wi?(vo=[qn.x+ai+kn[0],qn.y+kn[1]-ti],Ns=!0):Ri=[qn.x+ai+Pt[0],qn.y+Pt[1]-ti]);const Us=Ei.w*qn.scale/(Yn*(qn.localGlyph?cA:1)),Ws=Ei.h*qn.scale/(Yn*(qn.localGlyph?cA:1));let ks,Yo,so,Sa;if(Wi){const zo=qn.y-Un,oa=new W(-ai,ai-zo),Jl=-Math.PI/2,ec=new W(...vo);ks=new W(-ai+Ri[0],Ri[1]),ks._rotateAround(Jl,oa)._add(ec),ks.x+=-zo+ai,ks.y-=(qi.left-Kr)*qn.scale;const tc=qn.imageName?qi.advance*qn.scale:Kc*qn.scale,Ro=String.fromCodePoint(qn.glyph);g1e(Ro)?ks.x+=(1-Kr)*qn.scale:m1e(Ro)?ks.x+=tc-qi.height*qn.scale+(-Kr-1)*qn.scale:ks.x+=qn.imageName||qi.width+2*Kr===Ei.w&&qi.height+2*Kr===Ei.h?(tc-Ws)/2:(tc-(qi.height+2*Kr)*qn.scale)/2,Yo=new W(ks.x,ks.y-Us),so=new W(ks.x+Ws,ks.y),Sa=new W(ks.x+Ws,ks.y-Us)}else{const zo=(qi.left-Kr)*qn.scale-ai+Ri[0],oa=(-qi.top-Kr)*qn.scale+Ri[1],Jl=zo+Us,ec=oa+Ws;ks=new W(zo,oa),Yo=new W(Jl,oa),so=new W(zo,ec),Sa=new W(Jl,ec)}if(wn){let zo;zo=Xt?new W(0,0):Ns?new W(kn[0],kn[1]):new W(Pt[0],Pt[1]),ks._rotateAround(wn,zo),Yo._rotateAround(wn,zo),so._rotateAround(wn,zo),Sa._rotateAround(wn,zo)}const _l=new W(0,0),Lc=new W(0,0);Dn.push({tl:ks,tr:Yo,bl:so,br:Sa,texPrimary:oi,texSecondary:void 0,writingMode:dt.writingMode,glyphOffset:ps,sectionIndex:qn.sectionIndex,isSDF:Pr,pixelOffsetTL:_l,pixelOffsetBR:Lc,minFontScaleX:0,minFontScaleY:0})}}return Dn}(0,g,O,b,S,L,_,u.allowVerticalPlacement),tt=u.textSizeData;let et=null;tt.kind==="source"?(et=[lA*b.layout.get("text-size").evaluate(L,{},Ce)],et[0]>H0&&Ye(`${u.layerIds[0]}: Value for "text-size" is >= ${gS}. Reduce your "text-size".`)):tt.kind==="composite"&&(et=[lA*fe.compositeTextSizes[0].evaluate(L,{},Ce),lA*fe.compositeTextSizes[1].evaluate(L,{},Ce)],(et[0]>H0||et[1]>H0)&&Ye(`${u.layerIds[0]}: Value for "text-size" is >= ${gS}. Reduce your "text-size".`)),u.addSymbols(u.text,qe,et,O,S,L,U,c,h,N.lineStartIndex,N.lineLength,re,ge,Ce,Te,!1);for(const vt of j)X[vt]=u.text.placedSymbolArray.length-1;return 4*qe.length}function tW(u){for(const c in u)return u[c];return null}function wL(u,c,h,g,_,b,S,L,O,N){let U=S.top,j=S.bottom,X=S.left,re=S.right;const fe=S.collisionPadding;if(fe&&(X-=fe[0],U-=fe[1],re+=fe[2],j+=fe[3]),O){const ge=new W(X,U),Ce=new W(re,U),Te=new W(X,j),qe=new W(re,j),tt=Y(O);let et=new W(0,0);N&&(et=new W(N[0],N[1])),ge._rotateAround(tt,et),Ce._rotateAround(tt,et),Te._rotateAround(tt,et),qe._rotateAround(tt,et),X=Math.min(ge.x,Ce.x,Te.x,qe.x),re=Math.max(ge.x,Ce.x,Te.x,qe.x),U=Math.min(ge.y,Ce.y,Te.y,qe.y),j=Math.max(ge.y,Ce.y,Te.y,qe.y)}return u.emplaceBack(c.x,c.y,c.z,h.x,h.y,X,U,re,j,L,g,_,b),u.length-1}function Gk(u){u.collisionPadding&&(u.top-=u.collisionPadding[1],u.bottom+=u.collisionPadding[3]);const c=u.bottom-u.top;return c>0?Math.max(10,c):null}function $1e(u,c,h,g){const _=u.compareText;if(c in _){const b=_[c];for(let S=b.length-1;S>=0;S--)if(g.dist(b[S])<h)return!0}else _[c]=[];return _[c].push(g),!1}function nW(u,c){const h=u.fovAboveCenter,g=u.elevation?u.elevation.getMinElevationBelowMSL()*c:0,_=(u._camera.position[2]*u.worldSize-g)/Math.cos(u._pitch),b=Math.sin(h)*_/Math.sin(Math.max(Math.PI/2-u._pitch-h,.01)),S=Math.sin(u._pitch)*b+_;return Math.min(1.01*S,_*(1/u._horizonShift))}function mS(u,c){if(!c.isReprojectedInTileSpace)return{scale:1<<u.z,x:u.x,y:u.y,x2:u.x+1,y2:u.y+1,projection:c};const h=Math.pow(2,-u.z),g=u.x*h,_=(u.x+1)*h,b=u.y*h,S=(u.y+1)*h,L=Bi(g),O=Bi(_),N=ms(b),U=ms(S),j=c.project(L,N),X=c.project(O,N),re=c.project(O,U),fe=c.project(L,U);let ge=Math.min(j.x,X.x,re.x,fe.x),Ce=Math.min(j.y,X.y,re.y,fe.y),Te=Math.max(j.x,X.x,re.x,fe.x),qe=Math.max(j.y,X.y,re.y,fe.y);const tt=h/16;function et(dt,Pt,Qt,Xt,An,tn){const Sn=(Qt+An)/2,Dn=(Xt+tn)/2,wn=c.project(Bi(Sn),ms(Dn)),kn=Math.max(0,ge-wn.x,Ce-wn.y,wn.x-Te,wn.y-qe);ge=Math.min(ge,wn.x),Te=Math.max(Te,wn.x),Ce=Math.min(Ce,wn.y),qe=Math.max(qe,wn.y),kn>tt&&(et(dt,wn,Qt,Xt,Sn,Dn),et(wn,Pt,Sn,Dn,An,tn))}et(j,X,g,b,_,b),et(X,re,_,b,_,S),et(re,fe,_,S,g,S),et(fe,j,g,S,g,b),ge-=tt,Ce-=tt,Te+=tt,qe+=tt;const vt=1/Math.max(Te-ge,qe-Ce);return{scale:vt,x:ge*vt,y:Ce*vt,x2:Te*vt,y2:qe*vt,projection:c}}function rW(u,{x:c,y:h},g=0){return new W(((c-g)*u.scale-u.x)*zn,(h*u.scale-u.y)*zn)}const V1e=o.a6.identity(new Float32Array(16));class G0{constructor(c){this.spec=c,this.name=c.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(c,h){return{x:0,y:0,z:0}}unproject(c,h){return new Yt(0,0)}projectTilePoint(c,h,g){return{x:c,y:h,z:0}}locationPoint(c,h,g=!0){return c._coordinatePoint(c.locationCoordinate(h),g)}pixelsPerMeter(c,h){return Li(1,c)*h}pixelSpaceConversion(c,h,g){return 1}farthestPixelDistance(c){return nW(c,c.pixelsPerMeter)}pointCoordinate(c,h,g,_){const b=c.horizonLineFromTop(!1),S=new W(h,Math.max(b,g));return c.rayIntersectionCoordinate(c.pointRayIntersection(S,_))}pointCoordinate3D(c,h,g){const _=new W(h,g);if(c.elevation)return c.elevation.pointCoordinate(_);{const b=this.pointCoordinate(c,_.x,_.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(c,h){if(c.elevation)return!this.pointCoordinate3D(c,h.x,h.y);const g=c.horizonLineFromTop();return h.y<g}createInversionMatrix(c,h){return V1e}createTileMatrix(c,h,g){let _,b,S;const L=g.canonical,O=o.a6.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const N=mS(L,this);_=1,b=N.x+g.wrap*N.scale,S=N.y,o.a6.scale(O,O,[_/N.scale,_/N.scale,c.pixelsPerMeter/h])}else _=h/c.zoomScale(L.z),b=(L.x+Math.pow(2,L.z)*g.wrap)*_,S=L.y*_;return o.a6.translate(O,O,[b,S,0]),o.a6.scale(O,O,[_/zn,_/zn,1]),O}upVector(c,h,g){return[0,0,1]}upVectorScale(c,h,g){return{metersToTile:1}}}class H1e extends G0{constructor(c){super(c),this.range=[4,7],this.center=c.center||[-96,37.5];const[h,g]=this.parallels=c.parallels||[29.5,45.5],_=Math.sin(Y(h));this.n=(_+Math.sin(Y(g)))/2,this.c=1+_*(2*this.n-_),this.r0=Math.sqrt(this.c)/this.n}project(c,h){const{n:g,c:_,r0:b}=this,S=Y(c-this.center[0]),L=Y(h),O=Math.sqrt(_-2*g*Math.sin(L))/g;return{x:O*Math.sin(S*g),y:O*Math.cos(S*g)-b,z:0}}unproject(c,h){const{n:g,c:_,r0:b}=this,S=b+h;let L=Math.atan2(c,Math.abs(S))*Math.sign(S);S*g<0&&(L-=Math.PI*Math.sign(c)*Math.sign(S));const O=Y(this.center[0])*g;L=me(L,-Math.PI-O,Math.PI-O);const N=pe(ee(L/g)+this.center[0],-180,180),U=Math.asin(pe((_-(c*c+S*S)*g*g)/(2*g),-1,1)),j=pe(ee(U),-os,os);return new Yt(N,j)}}const vS=1.340264,yS=-.081106,_S=893e-6,bS=.003796,xL=Math.sqrt(3)/2;class G1e extends G0{project(c,h){h=h/180*Math.PI,c=c/180*Math.PI;const g=Math.asin(xL*Math.sin(h)),_=g*g,b=_*_*_;return{x:.5*(c*Math.cos(g)/(xL*(vS+3*yS*_+b*(7*_S+9*bS*_)))/Math.PI+.5),y:1-.5*(g*(vS+yS*_+b*(_S+bS*_))/Math.PI+1),z:0}}unproject(c,h){c=(2*c-.5)*Math.PI;let g=h=(2*(1-h)-1)*Math.PI,_=g*g,b=_*_*_;for(let U,j,X,re=0;re<12&&(j=g*(vS+yS*_+b*(_S+bS*_))-h,X=vS+3*yS*_+b*(7*_S+9*bS*_),U=j/X,g=pe(g-U,-Math.PI/3,Math.PI/3),_=g*g,b=_*_*_,!(Math.abs(U)<1e-12));++re);const S=xL*c*(vS+3*yS*_+b*(7*_S+9*bS*_))/Math.cos(g),L=Math.asin(Math.sin(g)/xL),O=pe(180*S/Math.PI,-180,180),N=pe(180*L/Math.PI,-os,os);return new Yt(O,N)}}class Q1e extends G0{constructor(c){super(c),this.wrap=!0,this.supportsWorldCopies=!0}project(c,h){return{x:.5+c/360,y:.5-h/360,z:0}}unproject(c,h){const g=360*(c-.5),_=pe(360*(.5-h),-os,os);return new Yt(g,_)}}const Uw=Math.PI/2;function CL(u){return Math.tan((Uw+u)/2)}class j1e extends G0{constructor(c){super(c),this.center=c.center||[0,30];const[h,g]=this.parallels=c.parallels||[30,30];let _=Y(h),b=Y(g);this.southernCenter=_+b<0,this.southernCenter&&(_=-_,b=-b);const S=Math.cos(_),L=CL(_);this.n=_===b?Math.sin(_):Math.log(S/Math.cos(b))/Math.log(CL(b)/L),this.f=S*Math.pow(CL(_),this.n)/this.n}project(c,h){h=Y(h),this.southernCenter&&(h=-h),c=Y(c-this.center[0]);const g=1e-6,{n:_,f:b}=this;b>0?h<-Uw+g&&(h=-Uw+g):h>Uw-g&&(h=Uw-g);const S=b/Math.pow(CL(h),_);let L=S*Math.sin(_*c),O=b-S*Math.cos(_*c);return L=.5*(L/Math.PI+.5),O=.5*(O/Math.PI+.5),{x:L,y:this.southernCenter?O:1-O,z:0}}unproject(c,h){c=(2*c-.5)*Math.PI,this.southernCenter&&(h=1-h),h=(2*(1-h)-.5)*Math.PI;const{n:g,f:_}=this,b=_-h,S=Math.sign(b),L=Math.sign(g)*Math.sqrt(c*c+b*b);let O=Math.atan2(c,Math.abs(b))*S;b*g<0&&(O-=Math.PI*Math.sign(c)*S);const N=pe(ee(O/g)+this.center[0],-180,180),U=pe(ee(2*Math.atan(Math.pow(_/L,1/g))-Uw),-os,os);return new Yt(N,this.southernCenter?-U:U)}}class iW extends G0{constructor(c){super(c),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(c,h){return{x:Vi(c),y:vi(h),z:0}}unproject(c,h){const g=Bi(c),_=ms(h);return new Yt(g,_)}}const sW=Y(os);class K1e extends G0{project(c,h){const g=(h=Y(h))*h,_=g*g;return{x:.5*((c=Y(c))*(.8707-.131979*g+_*(_*(.003971*g-.001529*_)-.013791))/Math.PI+.5),y:1-.5*(h*(1.007226+g*(.015085+_*(.028874*g-.044475-.005916*_)))/Math.PI+1),z:0}}unproject(c,h){c=(2*c-.5)*Math.PI;let g=h=(2*(1-h)-1)*Math.PI,_=25,b=0,S=g*g;do{S=g*g;const N=S*S;b=(g*(1.007226+S*(.015085+N*(.028874*S-.044475-.005916*N)))-h)/(1.007226+S*(.045255+N*(.259866*S-.311325-.005916*11*N))),g=pe(g-b,-sW,sW)}while(Math.abs(b)>1e-6&&--_>0);S=g*g;const L=pe(ee(c/(.8707+S*(S*(S*S*S*(.003971-.001529*S)-.013791)-.131979))),-180,180),O=ee(g);return new Yt(L,O)}}const oW=Y(os);class W1e extends G0{project(c,h){h=Y(h),c=Y(c);const g=Math.cos(h),_=2/Math.PI,b=Math.acos(g*Math.cos(c/2)),S=Math.sin(b)/b,L=.5*(c*_+2*g*Math.sin(c/2)/S)||0,O=.5*(h+Math.sin(h)/S)||0;return{x:.5*(L/Math.PI+.5),y:1-.5*(O/Math.PI+1),z:0}}unproject(c,h){let g=c=(2*c-.5)*Math.PI,_=h=(2*(1-h)-1)*Math.PI,b=25;const S=1e-6;let L=0,O=0;do{const N=Math.cos(_),U=Math.sin(_),j=2*U*N,X=U*U,re=N*N,fe=Math.cos(g/2),ge=Math.sin(g/2),Ce=2*fe*ge,Te=ge*ge,qe=1-re*fe*fe,tt=qe?1/qe:0,et=qe?Math.acos(N*fe)*Math.sqrt(1/qe):0,vt=.5*(2*et*N*ge+2*g/Math.PI)-c,dt=.5*(et*U+_)-h,Pt=.5*tt*(re*Te+et*N*fe*X)+1/Math.PI,Qt=tt*(Ce*j/4-et*U*ge),Xt=.125*tt*(j*ge-et*U*re*Ce),An=.5*tt*(X*fe+et*Te*N)+.5,tn=Qt*Xt-An*Pt;L=(dt*Qt-vt*An)/tn,O=(vt*Xt-dt*Pt)/tn,g=pe(g-L,-Math.PI,Math.PI),_=pe(_-O,-oW,oW)}while((Math.abs(L)>S||Math.abs(O)>S)&&--b>0);return new Yt(ee(g),ee(_))}}class aW extends G0{constructor(c){super(c),this.center=c.center||[0,0],this.parallels=c.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Y(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(c,h){const{scale:g,cosPhi:_}=this;return{x:Y(c)*_*g+.5,y:-Math.sin(Y(h))/_*g+.5,z:0}}unproject(c,h){const{scale:g,cosPhi:_}=this,b=-(h-.5)/g,S=pe(ee((c-.5)/g)/_,-180,180),L=Math.asin(pe(b*_,-1,1)),O=pe(ee(L),-os,os);return new Yt(S,O)}}class q1e extends iW{constructor(c){super(c),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(c,h,g){const _=sS(c,h,g),b=nL(Eg(g));return o.N.transformMat4(_,_,b),{x:_[0],y:_[1],z:_[2]}}locationPoint(c,h){const g=Cn(h.lat,h.lng),_=o.N.normalize([],g),b=c.elevation?c.elevation.getAtPointOrZero(c.locationCoordinate(h),c._centerAltitude):c._centerAltitude,S=Li(1,0)*zn*b;o.N.scaleAndAdd(g,g,_,S);const L=o.a6.identity(new Float64Array(16));return o.a6.multiply(L,c.pixelMatrix,c.globeMatrix),o.N.transformMat4(g,g,L),new W(g[0],g[1])}pixelsPerMeter(c,h){return Li(1,0)*h}pixelSpaceConversion(c,h,g){const _=Li(1,c)*h,b=Qi(Li(1,45)*h,_,g);return this.pixelsPerMeter(c,h)/b}createTileMatrix(c,h,g){const _=_k(Eg(g.canonical));return o.a6.multiply(new Float64Array(16),c.globeMatrix,_)}createInversionMatrix(c,h){const{center:g}=c,_=nL(Eg(h));return o.a6.rotateY(_,_,Y(g.lng)),o.a6.rotateX(_,_,Y(g.lat)),o.a6.scale(_,_,[c._pixelsPerMercatorPixel,c._pixelsPerMercatorPixel,1]),Float32Array.from(_)}pointCoordinate(c,h,g,_){return C9(c,h,g,!0)||new Ls(0,0)}pointCoordinate3D(c,h,g){const _=this.pointCoordinate(c,h,g,0);return[_.x,_.y,_.z]}isPointAboveHorizon(c,h){return!C9(c,h.x,h.y,!1)}farthestPixelDistance(c){const h=function(_,b){const S=_.cameraToCenterDistance,L=_._centerAltitude*b,O=_._camera,N=_._camera.forward(),U=o.N.add([],o.N.scale([],N,-S),[0,0,L]),j=_.worldSize/(2*Math.PI),X=[0,0,-j],re=_.width/_.height,fe=Math.tan(_.fovAboveCenter),ge=o.N.scale([],O.up(),fe),Ce=o.N.scale([],O.right(),fe*re),Te=o.N.normalize([],o.N.add([],o.N.add([],N,ge),Ce)),qe=[];let tt;if(new Ak(U,Te).closestPointOnSphere(X,j,qe)){const et=o.N.add([],qe,X),vt=o.N.sub([],et,U);tt=Math.cos(_.fovAboveCenter)*o.N.length(vt)}else{const et=o.N.sub([],U,X),vt=o.N.sub([],X,U);o.N.normalize(vt,vt);const dt=o.N.length(et)-j;tt=Math.sqrt(dt*(dt+2*j));const Pt=Math.acos(tt/(j+dt))-Math.acos(o.N.dot(N,vt));tt*=Math.cos(Pt)}return 1.01*tt}(c,this.pixelsPerMeter(c.center.lat,c.worldSize)),g=D0(c.zoom);if(g>0){const _=nW(c,Li(1,c.center.lat)*c.worldSize),b=c.worldSize/(2*Math.PI),S=Math.max(c.width,c.height)/c.worldSize*Math.PI;return Qi(h,_+b*(1-Math.cos(S)),Math.pow(g,10))}return h}upVector(c,h,g){return sS(h,g,c,1)}upVectorScale(c){return{metersToTile:JM(tL(Eg(c)))}}}function lW(u){const c=u.parallels,h=!!c&&Math.abs(c[0]+c[1])<.01;switch(u.name){case"mercator":return new iW(u);case"equirectangular":return new Q1e(u);case"naturalEarth":return new K1e(u);case"equalEarth":return new G1e(u);case"winkelTripel":return new W1e(u);case"albers":return h?new aW(u):new H1e(u);case"lambertConformalConic":return h?new aW(u):new j1e(u);case"globe":return new q1e(u)}throw new Error(`Invalid projection name: ${u.name}`)}const Y1e=cL.types,X1e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function EL(u,c,h,g,_,b,S,L,O,N,U,j,X){const re=L?Math.min(H0,Math.round(L[0])):0,fe=L?Math.min(H0,Math.round(L[1])):0;u.emplaceBack(c,h,Math.round(32*g),Math.round(32*_),b,S,(re<<1)+(O?1:0),fe,16*N,16*U,256*j,256*X)}function SL(u,c,h){u.emplaceBack(c,h)}function TL(u,c,h,g,_,b,S){u.emplaceBack(c,h,g,_,b,S)}function IL(u,c,h,g,_){u.emplaceBack(c,h,g,_),u.emplaceBack(c,h,g,_),u.emplaceBack(c,h,g,_),u.emplaceBack(c,h,g,_)}function Z1e(u){for(const c of u.sections)if(fn(c.text))return!0;return!1}class Qk{constructor(c){this.layoutVertexArray=new Xf,this.indexArray=new Wo,this.programConfigurations=c,this.segments=new Ea,this.dynamicLayoutVertexArray=new hf,this.opacityVertexArray=new tA,this.placedSymbolArray=new Af,this.iconTransitioningVertexArray=new Bh,this.globeExtVertexArray=new jm,this.zOffsetVertexArray=new Ym}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(c,h,g,_,b){this.isEmpty()||(g&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,o1e.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,l1e.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,X1e,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=c.createVertexBuffer(this.iconTransitioningVertexArray,u1e.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=c.createVertexBuffer(this.globeExtVertexArray,a1e.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||b)&&(this.zOffsetVertexBuffer=c.createVertexBuffer(this.zOffsetVertexArray,c1e.members,!0)),this.opacityVertexBuffer.itemSize=1),(g||_)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pe(Qk,"SymbolBuffers");class jk{constructor(c,h,g){this.layoutVertexArray=new c,this.layoutAttributes=h,this.indexArray=new g,this.segments=new Ea,this.collisionVertexArray=new Wm,this.collisionVertexArrayExt=new hf}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,h1e.members,!0),this.collisionVertexBufferExt=c.createVertexBuffer(this.collisionVertexArrayExt,d1e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pe(jk,"CollisionBuffers");class BL{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(S=>S.fqid),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=o.a6.identity([]),this.placementViewportMatrix=o.a6.identity([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ok(this.zoom,h["text-size"]),this.iconSizeData=Ok(this.zoom,h["icon-size"]);const g=this.layers[0].layout,_=g.get("symbol-sort-key"),b=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=g.get("text-writing-mode").map(S=>yf[S]),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id),this.sourceID=c.sourceID,this.projection=c.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=g.get("symbol-z-elevate")}createArrays(){this.text=new Qk(new Oe(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new Qk(new Oe(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new J_,this.lineVertexArray=new tv,this.symbolInstances=new P0}calculateGlyphDependencies(c,h,g,_,b){for(let S=0;S<c.length;S++){const L=c.codePointAt(S);if(L===void 0)break;if(h[L]=!0,_&&b&&L<=65535){const O=fS[c.charAt(S)];O&&(h[O.charCodeAt(0)]=!0)}}}populate(c,h,g,_){const b=this.layers[0],S=b.layout,L=this.projection.name==="globe",O=S.get("text-font"),N=S.get("text-field"),U=S.get("icon-image"),j=(N.value.kind!=="constant"||N.value.value instanceof Fa&&!N.value.value.isEmpty()||N.value.value.toString().length>0)&&(O.value.kind!=="constant"||O.value.value.length>0),X=U.value.kind!=="constant"||!!U.value.value||Object.keys(U.parameters).length>0,re=S.get("symbol-sort-key");if(this.features=[],!j&&!X)return;const fe=h.iconDependencies,ge=h.glyphDependencies,Ce=h.availableImages,Te=new $i(this.zoom);for(const{feature:qe,id:tt,index:et,sourceLayerIndex:vt}of c){const dt=b._featureFilter.needGeometry,Pt=Al(qe,dt);if(!b._featureFilter.filter(Te,Pt,g))continue;if(dt||(Pt.geometry=kl(qe,g,_)),L&&qe.type!==1&&g.z<=5){const tn=Pt.geometry,Sn=.98078528056,Dn=(wn,kn)=>{const yn=sS(wn.x,wn.y,g,1),On=sS(kn.x,kn.y,g,1);return o.N.dot(yn,On)<Sn};for(let wn=0;wn<tn.length;wn++)tn[wn]=Mc(tn[wn],Dn)}let Qt,Xt;if(j){const tn=b.getValueAndResolveTokens("text-field",Pt,g,Ce),Sn=Fa.factory(tn);Z1e(Sn)&&(this.hasRTLText=!0),(!this.hasRTLText||js()==="unavailable"||this.hasRTLText&&Zs.isParsed())&&(Qt=A1e(Sn,b,Pt))}if(X){const tn=b.getValueAndResolveTokens("icon-image",Pt,g,Ce);Xt=tn instanceof Yr?tn:Yr.fromString(tn)}if(!Qt&&!Xt)continue;const An=this.sortFeaturesByKey?re.evaluate(Pt,{},g):void 0;if(this.features.push({id:tt,text:Qt,icon:Xt,index:et,sourceLayerIndex:vt,geometry:Pt.geometry,properties:qe.properties,type:Y1e[qe.type],sortKey:An}),Xt&&(fe[Xt.namePrimary]=!0,Xt.nameSecondary&&(fe[Xt.nameSecondary]=!0)),Qt){const tn=O.evaluate(Pt,{},g).join(","),Sn=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yf.vertical)>=0;for(const Dn of Qt.sections)if(Dn.image)fe[Dn.image.namePrimary]=!0;else{const wn=nn(Qt.toString()),kn=Dn.fontStack||tn,yn=ge[kn]=ge[kn]||{};this.calculateGlyphDependencies(Dn.text,yn,Sn,this.allowVerticalPlacement,wn)}}}S.get("symbol-placement")==="line"&&(this.features=function(qe){const tt={},et={},vt=[];let dt=0;function Pt(tn){vt.push(qe[tn]),dt++}function Qt(tn,Sn,Dn){const wn=et[tn];return delete et[tn],et[Sn]=wn,vt[wn].geometry[0].pop(),vt[wn].geometry[0]=vt[wn].geometry[0].concat(Dn[0]),wn}function Xt(tn,Sn,Dn){const wn=tt[Sn];return delete tt[Sn],tt[tn]=wn,vt[wn].geometry[0].shift(),vt[wn].geometry[0]=Dn[0].concat(vt[wn].geometry[0]),wn}function An(tn,Sn,Dn){const wn=Dn?Sn[0][Sn[0].length-1]:Sn[0][0];return`${tn}:${wn.x}:${wn.y}`}for(let tn=0;tn<qe.length;tn++){const Sn=qe[tn],Dn=Sn.geometry,wn=Sn.text?Sn.text.toString():null;if(!wn){Pt(tn);continue}const kn=An(wn,Dn),yn=An(wn,Dn,!0);if(kn in et&&yn in tt&&et[kn]!==tt[yn]){const On=Xt(kn,yn,Dn),lr=Qt(kn,yn,vt[On].geometry);delete tt[kn],delete et[yn],et[An(wn,vt[lr].geometry,!0)]=lr,vt[On].geometry=null}else kn in et?Qt(kn,yn,Dn):yn in tt?Xt(kn,yn,Dn):(Pt(tn),tt[kn]=dt-1,et[yn]=dt-1)}return vt.filter(tn=>tn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qe,tt)=>qe.sortKey-tt.sortKey)}update(c,h,g,_,b){const S=Object.keys(c).length!==0;if(S&&!this.stateDependentLayers.length)return;const L=S?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(c,h,L,g,_,b),this.icon.programConfigurations.updatePaintArrays(c,h,L,g,_,b)}updateZOffset(){const c=(b,S,L)=>{g+=S,g>b.length&&b.resize(g);for(let O=-S;O<0;O++)b.emplace(O+g,L)},h=(b,S,L)=>{_+=S,_>b.length&&b.resize(_);for(let O=-S;O<0;O++)b.emplace(O+_,L)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let g=0,_=0;for(let b=0;b<this.symbolInstances.length;b++){const S=this.symbolInstances.get(b),{numHorizontalGlyphVertices:L,numVerticalGlyphVertices:O,numIconVertices:N}=S,U=S.zOffset,j=N>0;if((L>0||O>0)&&(c(this.text.zOffsetVertexArray,L,U),c(this.text.zOffsetVertexArray,O,U)),j){const{placedIconSymbolIndex:X,verticalPlacedIconSymbolIndex:re}=S;X>=0&&h(this.icon.zOffsetVertexArray,N,U),re>=0&&h(this.icon.zOffsetVertexArray,S.numVerticalIconVertices,U)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=lW(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,h){const g=this.lineVertexArray.length;if(c.segment!==void 0)for(const{x:_,y:b}of h)this.lineVertexArray.emplaceBack(_,b);return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(c,h,g,_,b,S,L,O,N,U,j,X,re,fe,ge,Ce){const Te=c.indexArray,qe=c.layoutVertexArray,tt=c.globeExtVertexArray,et=c.segments.prepareSegment(4*h.length,qe,Te,this.canOverlap?S.sortKey:void 0),vt=this.glyphOffsetArray.length,dt=et.vertexLength,Pt=this.allowVerticalPlacement&&L===yf.vertical?Math.PI/2:0,Qt=S.text&&S.text.sections;for(let An=0;An<h.length;An++){const{tl:tn,tr:Sn,bl:Dn,br:wn,texPrimary:kn,texSecondary:yn,pixelOffsetTL:On,pixelOffsetBR:lr,minFontScaleX:Un,minFontScaleY:Or,glyphOffset:Er,isSDF:qn,sectionIndex:oi}=h[An],Kr=et.vertexLength,Pr=Er[1];if(EL(qe,N.x,N.y,tn.x,Pr+tn.y,kn.x,kn.y,g,qn,On.x,On.y,Un,Or),EL(qe,N.x,N.y,Sn.x,Pr+Sn.y,kn.x+kn.w,kn.y,g,qn,lr.x,On.y,Un,Or),EL(qe,N.x,N.y,Dn.x,Pr+Dn.y,kn.x,kn.y+kn.h,g,qn,On.x,lr.y,Un,Or),EL(qe,N.x,N.y,wn.x,Pr+wn.y,kn.x+kn.w,kn.y+kn.h,g,qn,lr.x,lr.y,Un,Or),O){const{x:Yn,y:ti,z:Wi}=O.anchor,[ai,qi,Ei]=O.up;TL(tt,Yn,ti,Wi,ai,qi,Ei),TL(tt,Yn,ti,Wi,ai,qi,Ei),TL(tt,Yn,ti,Wi,ai,qi,Ei),TL(tt,Yn,ti,Wi,ai,qi,Ei),IL(c.dynamicLayoutVertexArray,Yn,ti,Wi,Pt)}else IL(c.dynamicLayoutVertexArray,N.x,N.y,N.z,Pt);if(Ce){const Yn=yn||kn;SL(c.iconTransitioningVertexArray,Yn.x,Yn.y),SL(c.iconTransitioningVertexArray,Yn.x+Yn.w,Yn.y),SL(c.iconTransitioningVertexArray,Yn.x,Yn.y+Yn.h),SL(c.iconTransitioningVertexArray,Yn.x+Yn.w,Yn.y+Yn.h)}Te.emplaceBack(Kr,Kr+1,Kr+2),Te.emplaceBack(Kr+1,Kr+2,Kr+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Er[0]),An!==h.length-1&&oi===h[An+1].sectionIndex||c.programConfigurations.populatePaintArrays(qe.length,S,S.index,{},re,fe,ge,Qt&&Qt[oi])}const Xt=O?O.anchor:N;c.placedSymbolArray.emplaceBack(Xt.x,Xt.y,Xt.z,N.x,N.y,vt,this.glyphOffsetArray.length-vt,dt,U,j,N.segment,g?g[0]:0,g?g[1]:0,_[0],_[1],L,0,!1,0,X,0)}_commitLayoutVertex(c,h,g,_,b,S,L){c.emplaceBack(h,g,_,b,S,Math.round(L.x),Math.round(L.y))}_addCollisionDebugVertices(c,h,g,_,b,S,L){const O=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),N=O.vertexLength,U=L.tileAnchorX,j=L.tileAnchorY;for(let re=0;re<4;re++)g.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(g.collisionVertexArrayExt,h,c.padding,L.zOffset),this._commitLayoutVertex(g.layoutVertexArray,_,b,S,U,j,new W(c.x1,c.y1)),this._commitLayoutVertex(g.layoutVertexArray,_,b,S,U,j,new W(c.x2,c.y1)),this._commitLayoutVertex(g.layoutVertexArray,_,b,S,U,j,new W(c.x2,c.y2)),this._commitLayoutVertex(g.layoutVertexArray,_,b,S,U,j,new W(c.x1,c.y2)),O.vertexLength+=4;const X=g.indexArray;X.emplaceBack(N,N+1),X.emplaceBack(N+1,N+2),X.emplaceBack(N+2,N+3),X.emplaceBack(N+3,N),O.primitiveLength+=4}_addTextDebugCollisionBoxes(c,h,g,_,b,S){for(let L=_;L<b;L++){const O=g.get(L),N=this.getSymbolInstanceTextSize(c,S,h,L);this._addCollisionDebugVertices(O,N,this.textCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,S)}}_addIconDebugCollisionBoxes(c,h,g,_,b,S){for(let L=_;L<b;L++){const O=g.get(L),N=this.getSymbolInstanceIconSize(c,h,S.placedIconSymbolIndex);this._addCollisionDebugVertices(O,N,this.iconCollisionBox,O.projectedAnchorX,O.projectedAnchorY,O.projectedAnchorZ,S)}}generateCollisionDebugBuffers(c,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jk(Zf,IK.members,Bh),this.iconCollisionBox=new jk(Zf,IK.members,Bh);const g=Rw(this.iconSizeData,c),_=Rw(this.textSizeData,c);for(let b=0;b<this.symbolInstances.length;b++){const S=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(_,c,h,S.textBoxStartIndex,S.textBoxEndIndex,S),this._addTextDebugCollisionBoxes(_,c,h,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S),this._addIconDebugCollisionBoxes(g,c,h,S.iconBoxStartIndex,S.iconBoxEndIndex,S),this._addIconDebugCollisionBoxes(g,c,h,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S)}}getSymbolInstanceTextSize(c,h,g,_){const b=this.text.placedSymbolArray.get(h.rightJustifiedTextSymbolIndex>=0?h.rightJustifiedTextSymbolIndex:h.centerJustifiedTextSymbolIndex>=0?h.centerJustifiedTextSymbolIndex:h.leftJustifiedTextSymbolIndex>=0?h.leftJustifiedTextSymbolIndex:h.verticalPlacedTextSymbolIndex>=0?h.verticalPlacedTextSymbolIndex:_),S=AL(this.textSizeData,c,b)/Kc;return this.tilePixelRatio*S}getSymbolInstanceIconSize(c,h,g){const _=this.icon.placedSymbolArray.get(g),b=AL(this.iconSizeData,c,_);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(c,h,g,_){c.emplaceBack(h,-g,-g,_),c.emplaceBack(h,g,-g,_),c.emplaceBack(h,g,g,_),c.emplaceBack(h,-g,g,_)}_updateTextDebugCollisionBoxes(c,h,g,_,b,S){for(let L=_;L<b;L++){const O=g.get(L),N=this.getSymbolInstanceTextSize(c,S,h,L);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,N,O.padding,S.zOffset)}}_updateIconDebugCollisionBoxes(c,h,g,_,b,S){for(let L=_;L<b;L++){const O=g.get(L),N=this.getSymbolInstanceIconSize(c,h,S.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,N,O.padding,S.zOffset)}}updateCollisionDebugBuffers(c,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const g=Rw(this.iconSizeData,c),_=Rw(this.textSizeData,c);for(let b=0;b<this.symbolInstances.length;b++){const S=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,c,h,S.textBoxStartIndex,S.textBoxEndIndex,S),this._updateTextDebugCollisionBoxes(_,c,h,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S),this._updateIconDebugCollisionBoxes(g,c,h,S.iconBoxStartIndex,S.iconBoxEndIndex,S),this._updateIconDebugCollisionBoxes(g,c,h,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex,S)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(c,h,g,_,b,S,L,O,N){const U={};if(h<g){const{x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et,featureIndex:vt}=c.get(h);U.textBox={x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et},U.textFeatureIndex=vt}if(_<b){const{x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et,featureIndex:vt}=c.get(_);U.verticalTextBox={x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et},U.verticalTextFeatureIndex=vt}if(S<L){const{x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et,featureIndex:vt}=c.get(S);U.iconBox={x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et},U.iconFeatureIndex=vt}if(O<N){const{x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et,featureIndex:vt}=c.get(O);U.verticalIconBox={x1:j,y1:X,x2:re,y2:fe,padding:ge,projectedAnchorX:Ce,projectedAnchorY:Te,projectedAnchorZ:qe,tileAnchorX:tt,tileAnchorY:et},U.verticalIconFeatureIndex=vt}return U}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const g=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(c,h){const g=c.placedSymbolArray.get(h),_=g.vertexStartIndex+4*g.numGlyphs;for(let b=g.vertexStartIndex;b<_;b+=4)c.indexArray.emplaceBack(b,b+1,b+2),c.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(c),g=Math.cos(c),_=[],b=[],S=[];for(let L=0;L<this.symbolInstances.length;++L){S.push(L);const O=this.symbolInstances.get(L);_.push(0|Math.round(h*O.tileAnchorX+g*O.tileAnchorY)),b.push(O.featureIndex)}return S.sort((L,O)=>_[L]-_[O]||b[O]-b[L]),S}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let c=0;c<this.symbolInstances.length;++c)this.symbolInstanceIndexesSortedZOffset.push(c)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((c,h)=>this.symbolInstances.get(h).zOffset-this.symbolInstances.get(c).zOffset)}addToSortKeyRanges(c,h){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===h?g.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const g=this.symbolInstances.get(h);this.featureSortOrder.push(g.featureIndex);const{rightJustifiedTextSymbolIndex:_,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:S,verticalPlacedTextSymbolIndex:L,placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:N}=g;_>=0&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&b!==_&&this.addIndicesForPlacedSymbol(this.text,b),S>=0&&S!==b&&S!==_&&this.addIndicesForPlacedSymbol(this.text,S),L>=0&&this.addIndicesForPlacedSymbol(this.text,L),O>=0&&this.addIndicesForPlacedSymbol(this.icon,O),N>=0&&this.addIndicesForPlacedSymbol(this.icon,N)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pe(BL,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),BL.addDynamicAttributes=IL;const J1e=new Js({"symbol-placement":new Gn(rn.layout_symbol["symbol-placement"]),"symbol-spacing":new Gn(rn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gn(rn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mr(rn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gn(rn.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Gn(rn.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Gn(rn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Gn(rn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gn(rn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gn(rn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mr(rn.layout_symbol["icon-size"]),"icon-text-fit":new Mr(rn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mr(rn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mr(rn.layout_symbol["icon-image"]),"icon-rotate":new Mr(rn.layout_symbol["icon-rotate"]),"icon-padding":new Gn(rn.layout_symbol["icon-padding"]),"icon-keep-upright":new Gn(rn.layout_symbol["icon-keep-upright"]),"icon-offset":new Mr(rn.layout_symbol["icon-offset"]),"icon-anchor":new Mr(rn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gn(rn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gn(rn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gn(rn.layout_symbol["text-rotation-alignment"]),"text-field":new Mr(rn.layout_symbol["text-field"]),"text-font":new Mr(rn.layout_symbol["text-font"]),"text-size":new Mr(rn.layout_symbol["text-size"]),"text-max-width":new Mr(rn.layout_symbol["text-max-width"]),"text-line-height":new Mr(rn.layout_symbol["text-line-height"]),"text-letter-spacing":new Mr(rn.layout_symbol["text-letter-spacing"]),"text-justify":new Mr(rn.layout_symbol["text-justify"]),"text-radial-offset":new Mr(rn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gn(rn.layout_symbol["text-variable-anchor"]),"text-anchor":new Mr(rn.layout_symbol["text-anchor"]),"text-max-angle":new Gn(rn.layout_symbol["text-max-angle"]),"text-writing-mode":new Gn(rn.layout_symbol["text-writing-mode"]),"text-rotate":new Mr(rn.layout_symbol["text-rotate"]),"text-padding":new Gn(rn.layout_symbol["text-padding"]),"text-keep-upright":new Gn(rn.layout_symbol["text-keep-upright"]),"text-transform":new Mr(rn.layout_symbol["text-transform"]),"text-offset":new Mr(rn.layout_symbol["text-offset"]),"text-allow-overlap":new Gn(rn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Gn(rn.layout_symbol["text-ignore-placement"]),"text-optional":new Gn(rn.layout_symbol["text-optional"]),visibility:new Gn(rn.layout_symbol.visibility)});var Kk={paint:new Js({"icon-opacity":new Mr(rn.paint_symbol["icon-opacity"]),"icon-emissive-strength":new Mr(rn.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Mr(rn.paint_symbol["text-emissive-strength"]),"icon-color":new Mr(rn.paint_symbol["icon-color"]),"icon-halo-color":new Mr(rn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mr(rn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mr(rn.paint_symbol["icon-halo-blur"]),"icon-translate":new Gn(rn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gn(rn.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Mr(rn.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Mr(rn.paint_symbol["text-opacity"]),"text-color":new Mr(rn.paint_symbol["text-color"],{runtimeType:ou,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Mr(rn.paint_symbol["text-halo-color"]),"text-halo-width":new Mr(rn.paint_symbol["text-halo-width"]),"text-halo-blur":new Mr(rn.paint_symbol["text-halo-blur"]),"text-translate":new Gn(rn.paint_symbol["text-translate"]),"text-translate-anchor":new Gn(rn.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Gn(rn.paint_symbol["icon-color-saturation"])}),layout:J1e};class cW{constructor(c){this.type=c.property.overrides?c.property.overrides.runtimeType:$f,this.defaultValue=c}evaluate(c){if(c.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(c.formattedSection))return h.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pe(cW,"FormatSectionOverride",{omit:["defaultValue"]});class ML extends Yl{constructor(c,h,g){super(c,Kk,h,g)}recalculate(c,h){super.recalculate(c,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const g=this.layout.get("text-writing-mode");if(g){const _=[];for(const b of g)_.indexOf(b)<0&&_.push(b);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(c,h,g,_){const b=this.layout.get(c).evaluate(h,{},g,_),S=this._unevaluatedLayout._values[c];return S.isDataDriven()||Um(S.value)||!b?b:function(L,O){return O.replace(/{([^{}]+)}/g,(N,U)=>U in L?String(L[U]):"")}(h.properties,b)}createBucket(c){return new BL(c)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const c of Kk.paint.overridableProperties){if(!ML.hasPaintOverride(this.layout,c))continue;const h=this.paint.get(c),g=new cW(h),_=new M0(g,h.property.specification,this.scope,this.options);let b=null;b=h.value.kind==="constant"||h.value.kind==="source"?new K_("source",_):new mg("composite",_,h.value.zoomStops,h.value._interpolationType),this.paint._values[c]=new Fl(h.property,b,h.parameters)}}_handleOverridablePaintPropertyUpdate(c,h,g){return!(!this.layout||h.isDataDriven()||g.isDataDriven())&&ML.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,h){const g=c.get("text-field"),_=Kk.paint.properties[h];let b=!1;const S=L=>{for(const O of L)if(_.overrides&&_.overrides.hasOverride(O))return void(b=!0)};if(g.value.kind==="constant"&&g.value.value instanceof Fa)S(g.value.value.sections);else if(g.value.kind==="source"){const L=N=>{b||(N instanceof xc&&_a(N.value)===Hd?S(N.value.sections):N instanceof Wd?S(N.sections):N.eachChild(L))},O=g.value;O._styleExpression&&L(O._styleExpression.expression)}return b}getProgramIds(){const c=this.paint.get("icon-opacity").constantOr(1)!==0,h=this.paint.get("text-opacity").constantOr(1)!==0,g=[];return c&&g.push("symbolIcon"),h&&g.push("symbolSDF"),g}getDefaultProgramParams(c,h){return{config:new we(this,h),overrideFog:!1}}}const ebe=new Js({visibility:new Gn(rn.layout_background.visibility)});var tbe={paint:new Js({"background-color":new Gn(rn.paint_background["background-color"]),"background-pattern":new Gn(rn.paint_background["background-pattern"]),"background-opacity":new Gn(rn.paint_background["background-opacity"]),"background-emissive-strength":new Gn(rn.paint_background["background-emissive-strength"])}),layout:ebe};const nbe=new Js({visibility:new Gn(rn.layout_raster.visibility)});var rbe={paint:new Js({"raster-opacity":new Gn(rn.paint_raster["raster-opacity"]),"raster-color":new nl(rn.paint_raster["raster-color"]),"raster-color-mix":new Gn(rn.paint_raster["raster-color-mix"]),"raster-color-range":new Gn(rn.paint_raster["raster-color-range"]),"raster-hue-rotate":new Gn(rn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gn(rn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gn(rn.paint_raster["raster-brightness-max"]),"raster-saturation":new Gn(rn.paint_raster["raster-saturation"]),"raster-contrast":new Gn(rn.paint_raster["raster-contrast"]),"raster-resampling":new Gn(rn.paint_raster["raster-resampling"]),"raster-fade-duration":new Gn(rn.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Gn(rn.paint_raster["raster-emissive-strength"]),"raster-array-band":new Gn(rn.paint_raster["raster-array-band"]),"raster-elevation":new Gn(rn.paint_raster["raster-elevation"])}),layout:nbe},Wk=Ks([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class qk{constructor(c,h,g,_){this.context=c,this.format=g,this.texture=c.gl.createTexture(),this.update(h,_)}update(c,h,g){const{width:_,height:b}=c,{context:S}=this,{gl:L}=S;if(L.bindTexture(L.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!h||h.premultiply!==!1)),g||this.size&&this.size[0]===_&&this.size[1]===b){const{x:O,y:N}=g||{x:0,y:0};if(c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||ImageBitmap&&c instanceof ImageBitmap)L.texSubImage2D(L.TEXTURE_2D,0,O,N,L.RGBA,L.UNSIGNED_BYTE,c);else{let U=this.format,j=L.UNSIGNED_BYTE;this.format===L.R32F&&(U=L.RED,j=L.FLOAT),L.texSubImage2D(L.TEXTURE_2D,0,O,N,_,b,U,j,c.data)}}else if(this.size=[_,b],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||ImageBitmap&&c instanceof ImageBitmap){let O=this.format;this.format===L.R8&&(O=L.RED),L.texImage2D(L.TEXTURE_2D,0,this.format,O,L.UNSIGNED_BYTE,c)}else{let O=this.format,N=this.format,U=L.UNSIGNED_BYTE;this.format===L.DEPTH_COMPONENT&&(O=L.DEPTH_COMPONENT16,U=L.UNSIGNED_SHORT),this.format===L.R8&&(N=L.RED),this.format===L.R32F&&(U=L.FLOAT,N=L.RED),L.texImage2D(L.TEXTURE_2D,0,O,_,b,0,N,U,c.data)}this.useMipmap=!!(h&&h.useMipmap),this.useMipmap&&L.generateMipmap(L.TEXTURE_2D)}bind(c,h,g=!1){const{context:_}=this,{gl:b}=_;b.bindTexture(b.TEXTURE_2D,this.texture),c!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap&&!g?c===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:c),this.minFilter=c),h!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,h),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,h),this.wrapS=h)}bindExtraParam(c,h,g,_){const{context:b}=this,{gl:S}=b;S.bindTexture(S.TEXTURE_2D,this.texture),h!==this.magFilter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,h),this.magFilter=h),c!==this.minFilter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.useMipmap?c===S.NEAREST?S.NEAREST_MIPMAP_NEAREST:S.LINEAR_MIPMAP_LINEAR:c),this.minFilter=c),g!==this.wrapS&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,g),this.wrapS=g),_!==this.wrapT&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,_),this.wrapT=_)}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}}class LL{constructor(c,h){this.context=c,this.texture=h}bind(c,h){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),c!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,c),this.minFilter=c),h!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,h),this.wrapS=h)}}function RL(u,c,h,g,_,b,S,L){const O=[u,c,1,h,g,1,_,b,1],N=[S,L,1],U=o.co.adjoint([],O),[j,X,re]=o.N.transformMat3(N,N,U);return o.co.multiply(O,O,[j,0,0,0,X,0,0,0,re])}function uW(u,c,h,g,_,b,S,L){const O=function(N,U,j,X,re,fe,ge,Ce){const Te=RL(0,0,1,0,1,1,0,1),qe=RL(N,U,j,X,re,fe,ge,Ce),tt=o.co.adjoint([],Te);return o.co.multiply(qe,qe,tt)}(u,c,h,g,_,b,S,L);return[O[2]/O[8]/zn,O[5]/O[8]/zn]}function PL(u){return[u[0],Math.min(Math.max(u[1],-os),os)]}class hW extends Uf{constructor(c,h,g,_){super(),this.id=c,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(_),this.options=h,this._dirty=!1}load(c,h){if(this._loaded=h||!1,this.fire(new $d("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return c&&(this.coordinates=c),this._loaded=!0,void this._finishLoading();this._imageRequest=Mn(this.map._requestManager.transformRequest(this.url,zr.Image),(g,_)=>{this._imageRequest=null,this._loaded=!0,g?this.fire(new Df(g)):_&&(this.image=_ instanceof HTMLImageElement?St.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading())})}loaded(){return this._loaded}updateImage(c){return c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}setTexture(c){if(!(c.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new LL(this.map.painter.context,c.handle),this.width=c.dimensions[0],this.height=c.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new $d("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof LL||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(c){if(this.coordinates=c,this._boundsArray=void 0,this._unsupportedCoords=!1,!c.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let h=c[0][1],g=c[0][1];for(const b of c)b[1]>g&&(g=b[1]),b[1]<h&&(h=b[1]);const _=(g+h)/2;if(_>os?this.onNorthPole=!0:_<-os&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const b=c.map(Ls.fromLngLat);this.tileID=function(S){let L=1/0,O=1/0,N=-1/0,U=-1/0;for(const ge of S)L=Math.min(L,ge.x),O=Math.min(O,ge.y),N=Math.max(N,ge.x),U=Math.max(U,ge.y);const j=Math.max(N-L,U-O),X=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),re=Math.pow(2,X);let fe=Math.floor((L+N)/2*re);return fe>1&&(fe-=1),new jn(X,fe,Math.floor((O+U)/2*re))}(b),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new $d("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(c){for(const Te in this.tiles){const qe=this.tiles[Te];qe.state!=="loaded"&&(qe.state="loaded",qe.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const h=mS(new jn(0,0,0),this.map.transform.projection),g=[h.projection.project(this.coordinates[0][0],this.coordinates[0][1]),h.projection.project(this.coordinates[1][0],this.coordinates[1][1]),h.projection.project(this.coordinates[2][0],this.coordinates[2][1]),h.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(Te){const qe=Te[1].x-Te[0].x,tt=Te[1].y-Te[0].y,et=Te[2].x-Te[1].x,vt=Te[2].y-Te[1].y,dt=Te[3].x-Te[2].x,Pt=Te[3].y-Te[2].y,Qt=Te[0].x-Te[3].x,Xt=Te[0].y-Te[3].y,An=qe*vt-et*tt,tn=et*Pt-dt*vt,Sn=dt*Xt-Qt*Pt,Dn=Qt*tt-qe*Xt;return An>0&&tn>0&&Sn>0&&Dn>0||An<0&&tn<0&&Sn<0&&Dn<0}(g))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const _=mS(this.tileID,this.map.transform.projection),[b,S,L,O]=this.coordinates.map(Te=>{const qe=_.projection.project(Te[0],Te[1]);return rW(_,qe)._round()});this.perspectiveTransform=uW(b.x,b.y,S.x,S.y,L.x,L.y,O.x,O.y);const N=this._boundsArray=new uf;N.emplaceBack(b.x,b.y,0,0),N.emplaceBack(S.x,S.y,zn,0),N.emplaceBack(O.x,O.y,0,zn),N.emplaceBack(L.x,L.y,zn,zn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=c.createVertexBuffer(N,Wk.members),this.boundsSegments=Ea.simpleSegment(0,0,4,2);const U=[],j=[PL((X=this.coordinates)[0]),PL(X[1]),PL(X[2]),PL(X[3])];var X;const[re,fe,ge,Ce]=function(Te){let qe=Te[0][0],tt=qe,et=Te[0][1],vt=et;for(let dt=1;dt<Te.length;dt++)Te[dt][0]<qe?qe=Te[dt][0]:Te[dt][0]>tt&&(tt=Te[dt][0]),Te[dt][1]<et?et=Te[dt][1]:Te[dt][1]>vt&&(vt=Te[dt][1]);return[qe,et,tt-qe,vt-et]}(j);{const Te=new uf,[qe,tt,et,vt]=function(On){let lr=On[0].x,Un=lr,Or=On[0].y,Er=Or;for(let qn=1;qn<On.length;qn++)On[qn].x<lr?lr=On[qn].x:On[qn].x>Un&&(Un=On[qn].x),On[qn].y<Or?Or=On[qn].y:On[qn].y>Er&&(Er=On[qn].y);return[lr,Or,Un-lr,Er-Or]}(g),dt=On=>[(On.x-qe)/et,(On.y-tt)/vt],[Pt,Qt,Xt,An]=g.map(dt),tn=function(On,lr,Un,Or,Er,qn,oi,Kr){const Pr=RL(0,0,1,0,1,1,0,1),Yn=RL(On,lr,Un,Or,Er,qn,oi,Kr),ti=o.co.adjoint([],Yn);return o.co.multiply(Pr,Pr,ti)}(Pt[0],Pt[1],Qt[0],Qt[1],Xt[0],Xt[1],An[0],An[1]);this.elevatedGlobePerspectiveTransform=uW(Pt[0],Pt[1],Qt[0],Qt[1],Xt[0],Xt[1],An[0],An[1]);const Sn=(On,lr)=>{U.push(On.lng);const Un=Math.round((On.lng-re)/ge*zn),Or=Math.round((On.lat-fe)/Ce*zn),Er=dt(lr),qn=o.N.transformMat3([],[Er[0],Er[1],1],tn),oi=Math.round(qn[0]/qn[2]*zn),Kr=Math.round(qn[1]/qn[2]*zn);Te.emplaceBack(Un,Or,oi,Kr)},Dn=g[3].x-g[0].x,wn=g[3].y-g[0].y,kn=g[2].x-g[1].x,yn=g[2].y-g[1].y;for(let On=0;On<65;On++){const lr=On/64,Un=[g[0].x+lr*Dn,g[0].y+lr*wn],Or=[g[1].x+lr*kn,g[1].y+lr*yn],Er=Or[0]-Un[0],qn=Or[1]-Un[1];for(let oi=0;oi<65;oi++){const Kr=oi/64,Pr={x:Un[0]+Er*Kr,y:Un[1]+qn*Kr,z:0};Sn(h.projection.unproject(Pr.x,Pr.y),Pr)}}this.elevatedGlobeVertexBuffer=c.createVertexBuffer(Te,Wk.members)}{this.maxLongitudeTriangleSize=0;let Te=[],qe=new Wo;const tt=(et,vt,dt)=>{qe.emplaceBack(et,vt,dt);const Pt=U[et],Qt=U[vt],Xt=U[dt],An=Math.min(Math.min(Pt,Qt),Xt),tn=Math.max(Math.max(Pt,Qt),Xt)-An;tn>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=tn),Te.push(An+tn/2)};for(let et=0;et<64;et++)for(let vt=0;vt<64;vt++){const dt=65*et+vt,Pt=dt+1,Qt=dt+65,Xt=Qt+1;tt(dt,Qt,Pt),tt(Pt,Qt,Xt)}[Te,qe]=function(et,vt){const dt=Array.from({length:et.length},(Xt,An)=>An);dt.sort((Xt,An)=>et[Xt]-et[An]);const Pt=[],Qt=new Wo;for(let Xt=0;Xt<dt.length;Xt++){const An=dt[Xt];Pt.push(et[An]);const tn=3*An,Sn=tn+1;Qt.emplaceBack(vt.uint16[tn],vt.uint16[Sn],vt.uint16[Sn+1])}return[Pt,Qt]}(Te,qe),this.elevatedGlobeTrianglesCenterLongitudes=Te,this.elevatedGlobeIndexBuffer=c.createIndexBuffer(qe)}this.elevatedGlobeSegments=Ea.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,ge/zn,0,Ce/zn,0,0,fe,re,0])}prepare(){const c=Object.keys(this.tiles).length!==0;if(this.tileID&&!c)return;const h=this.map.painter.context,g=h.gl;!this._dirty||this.texture instanceof LL||(this.texture?this.texture.update(this.image):(this.texture=new qk(h,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this._dirty=!1),c&&this._prepareData(h)}loadTile(c,h){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},h(null)):(c.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(c){const h=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!h)return null;const g=this.elevatedGlobeTrianglesCenterLongitudes;let _=((U,j)=>U+360*Math.round((j-U)/360))(c+180,g[0]);const b=new Ea,S=(U,j)=>{b.segments.push({vertexOffset:0,primitiveOffset:U,vertexLength:h.segments[0].vertexLength,primitiveLength:j,sortKey:void 0,vaos:{}})},L=.51*this.maxLongitudeTriangleSize;if(Math.abs(g[0]-_)<=L){const U=bt(g,0,g.length,_+L);return U===g.length||S(U,it(g,U+1,g.length,_+360-L)-U),b}_<g[0]&&(_+=360);const O=it(g,0,g.length,_-L);if(O===g.length)return S(0,g.length),b;S(0,O-0);const N=bt(g,O+1,g.length,_+L);return N!==g.length&&S(N,g.length-N),b}}const ibe=(Math.pow(256,2)-1)/16907520;class dW extends Yl{constructor(c,h,g){super(c,rbe,h,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isLayerDraped(c){return!(c&&c._source instanceof hW&&(c._source.onNorthPole||c._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(c){c!=="raster-color"&&c!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(c){if(!this.hasColorMap()||!this._curRampRange)return;const h=this._transitionablePaint._values["raster-color"].value.expression,[g,_]=c||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(g)&&isNaN(_)||g===this._curRampRange[0]&&_===this._curRampRange[1]||(this.colorRamp=oS({expression:h,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:g,end:_}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[g,_])}}const sbe=new Js({visibility:new Gn(rn["layout_raster-particle"].visibility)});var obe={paint:new Js({"raster-particle-array-band":new Gn(rn["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Gn(rn["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new nl(rn["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Gn(rn["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Gn(rn["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Gn(rn["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Gn(rn["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:sbe};class fW extends Yl{constructor(c,h,g){super(c,obe,h,g),this._updateColorRamp(),this.onRemove=_=>{this.colorRampTexture&&this.colorRampTexture.destroy(),this.transformFeedbackObject&&_.painter.context.gl.deleteTransformFeedback(this.transformFeedbackObject),this.tileFramebuffer&&this.tileFramebuffer.destroy()},this.lastInvalidatedAt=St.now()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isLayerDraped(c){return!1}_handleSpecialPaintPropertyUpdate(c){c!=="raster-particle-color"&&c!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),c==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const c=this._transitionablePaint._values["raster-particle-color"].value.expression,h=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=oS({expression:c,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:h}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=St.now()}}class abe extends Yl{constructor(c,h){super(c,{},h),this.implementation=c,c.slot&&(this.slot=c.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(c){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(c){this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)}onRemove(c){this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)}}const lbe=new Js({visibility:new Gn(rn.layout_sky.visibility)});var cbe={paint:new Js({"sky-type":new Gn(rn.paint_sky["sky-type"]),"sky-atmosphere-sun":new Gn(rn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Gn(rn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Gn(rn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Gn(rn.paint_sky["sky-gradient-radius"]),"sky-gradient":new nl(rn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Gn(rn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Gn(rn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Gn(rn.paint_sky["sky-opacity"])}),layout:lbe};function Yk(u,c,h){const g=[0,0,1],_=o.bi.identity([]);return o.bi.rotateY(_,_,h?-Y(u)+Math.PI:Y(u)),o.bi.rotateX(_,_,-Y(c)),o.N.transformQuat(g,g,_),o.N.normalize(g,g)}var ube={paint:new Js({})};function pW(u,c){const h=FL(u.projection,u.zoom,u.width,u.height),g=function(b,S,L,O,N){const U=new Yt(L.lng-180*Q0,L.lat),j=new Yt(L.lng+180*Q0,L.lat),X=b.project(U.lng,U.lat),re=b.project(j.lng,j.lat),fe=-Math.atan2(re.y-X.y,re.x-X.x),ge=Ls.fromLngLat(L);ge.y=pe(ge.y,-1+Q0,1-Q0);const Ce=ge.toLngLat(),Te=b.project(Ce.lng,Ce.lat),qe=Ls.fromLngLat(Ce);qe.x+=Q0;const tt=qe.toLngLat(),et=b.project(tt.lng,tt.lat),vt=mW(et.x-Te.x,et.y-Te.y,fe),dt=Ls.fromLngLat(Ce);dt.y+=Q0;const Pt=dt.toLngLat(),Qt=b.project(Pt.lng,Pt.lat),Xt=mW(Qt.x-Te.x,Qt.y-Te.y,fe),An=Math.abs(vt.x)/Math.abs(Xt.y),tn=o.a6.identity([]);o.a6.rotateZ(tn,tn,-fe*(1-(N?0:O)));const Sn=o.a6.identity([]);return o.a6.scale(Sn,Sn,[1,1-(1-An)*O,1]),Sn[4]=-Xt.x/Xt.y*O,o.a6.rotateZ(Sn,Sn,fe),o.a6.multiply(Sn,tn,Sn),Sn}(u.projection,0,u.center,h,c),_=AW(u);return o.a6.scale(g,g,[_,_,1]),g}function AW(u){const c=u.projection,h=FL(u.projection,u.zoom,u.width,u.height),g=gW(c,u.center),_=gW(c,Yt.convert(c.center));return Math.pow(2,g*h+(1-h)*_)}function FL(u,c,h,g,_=1/0){const b=u.range;if(!b)return 0;const S=Math.min(_,Math.max(h,g)),L=Math.log(S/1024)/Math.LN2;return ue(b[0]+L,b[1]+L,c)}const Q0=1/4e4;function gW(u,c){const h=pe(c.lat,-os,os),g=new Yt(c.lng-180*Q0,h),_=new Yt(c.lng+180*Q0,h),b=u.project(g.lng,h),S=u.project(_.lng,h),L=Ls.fromLngLat(g),O=Ls.fromLngLat(_),N=S.x-b.x,U=S.y-b.y,j=O.x-L.x,X=O.y-L.y,re=Math.sqrt((j*j+X*X)/(N*N+U*U));return Math.log(re)/Math.LN2}function mW(u,c,h){const g=Math.cos(h),_=Math.sin(h);return{x:u*g-c*_,y:u*_+c*g}}function vW(u,c,h){o.a6.identity(u),o.a6.rotateZ(u,u,Y(c[2])),o.a6.rotateX(u,u,Y(c[0])),o.a6.rotateY(u,u,Y(c[1])),o.a6.scale(u,u,h),o.a6.multiply(u,u,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function OL(u,c,h,g,_,b,S,L){const O=[h[0]-c[0],h[1]-c[1],0],N=[g[0]-c[0],g[1]-c[1],0];if(o.N.length(O)<1e-12||o.N.length(N)<1e-12)return o.bi.identity(u);const U=o.N.cross([],O,N);o.N.normalize(U,U),o.N.subtract(N,g,c),O[2]=(b-_)*L,N[2]=(S-_)*L;const j=O;return o.N.cross(j,O,N),o.N.normalize(j,j),o.bi.rotationTo(u,U,j)}function Xk(u,c,h=!1){const g=D0(c.zoom),_=function(b,S,L){const O=S.worldSize,N=[b[12],b[13],b[14]],U=ms(N[1]/O),j=Bi(N[0]/O),X=o.a6.identity([]),re=Li(1,U)*O,fe=Li(1,0)*O*as(U,S.zoom),ge=1/bk(O);let Ce=fe*ge;if(L){const et=FL(S.projection,S.zoom,S.width,S.height,1024);Ce=ge*S.projection.pixelSpaceConversion(S.center.lat,O,et)}const Te=Cn(U,j);o.N.add(Te,Te,o.N.scale([],o.N.normalize([],Te),re*Ce*N[2]));const qe=function(et){const vt=[et[0],et[1],et[2]];let dt=[0,1,0];const Pt=o.N.cross([],dt,vt);return o.N.cross(dt,vt,Pt),o.N.squaredLength(dt)===0&&(dt=[0,1,0],o.N.cross(Pt,vt,dt)),o.N.normalize(Pt,Pt),o.N.normalize(dt,dt),o.N.normalize(vt,vt),[Pt[0],Pt[1],Pt[2],0,dt[0],dt[1],dt[2],0,vt[0],vt[1],vt[2],0,et[0],et[1],et[2],1]}(Te);o.a6.scale(X,X,[Ce,Ce,Ce*re]),o.a6.translate(X,X,[-N[0],-N[1],-N[2]]);const tt=o.a6.multiply([],S.globeMatrix,qe);return o.a6.multiply(tt,tt,X),o.a6.multiply(tt,tt,b),tt}(u,c,h);if(g>0){const b=function(S,L){const O=L.worldSize,N=Li(1,0)*O*as(L.center.lat,L.zoom)/bk(O),U=Li(1,L.center.lat)*O,j=o.a6.identity([]);return o.a6.rotateY(j,j,Y(L.center.lng)),o.a6.rotateX(j,j,Y(L.center.lat)),o.a6.translate(j,j,[0,0,Ze]),o.a6.scale(j,j,[N,N,N*U]),o.a6.translate(j,j,[L.point.x-.5*O,L.point.y-.5*O,0]),o.a6.multiply(j,j,S),o.a6.multiply(j,L.globeMatrix,j)}(u,c);return function(S,L,O){const N=(fe,ge,Ce)=>{const Te=o.N.length(fe),qe=o.N.length(ge),tt=av(fe,ge,Ce);return o.N.scale(tt,tt,1/o.N.length(tt)*Qi(Te,qe,Ce))},U=N([S[0],S[1],S[2]],[L[0],L[1],L[2]],O),j=N([S[4],S[5],S[6]],[L[4],L[5],L[6]],O),X=N([S[8],S[9],S[10]],[L[8],L[9],L[10]],O),re=av([S[12],S[13],S[14]],[L[12],L[13],L[14]],O);return[U[0],U[1],U[2],0,j[0],j[1],j[2],0,X[0],X[1],X[2],0,re[0],re[1],re[2],1]}(_,b,g)}return _}function yW(u,c,h,g){const _=ga.projectAabbCorners(g,h);let b=Number.MAX_VALUE,S=-1;for(let N=0;N<_.length;++N){const U=_[N];U[0]=(.5*U[0]+.5)*c.width,U[1]=(.5-.5*U[1])*c.height,U[2]<b&&(S=N,b=U[2])}const L=N=>new W(_[N][0],_[N][1]);let O;switch(S){case 0:case 6:O=[L(1),L(5),L(4),L(7),L(3),L(2),L(1)];break;case 1:case 7:O=[L(0),L(4),L(5),L(6),L(2),L(3),L(0)];break;case 3:case 5:O=[L(1),L(0),L(4),L(7),L(6),L(2),L(1)];break;default:O=[L(1),L(5),L(6),L(7),L(3),L(0),L(1)]}if(tp(u,O))return b}const hbe=Ks([{name:"a_pos_3f",components:3,type:"Float32"}]),dbe=Ks([{name:"a_color_3f",components:3,type:"Float32"}]),fbe=Ks([{name:"a_color_4f",components:4,type:"Float32"}]),pbe=Ks([{name:"a_uv_2f",components:2,type:"Float32"}]),Abe=Ks([{name:"a_normal_3f",components:3,type:"Float32"}]),gbe=Ks([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),mbe=Ks([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class _W{constructor(c,h){this.feature=c,this.instancedDataOffset=h,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class bW{constructor(){this.instancedDataArray=new Z_,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class Zk{constructor(c){this.zoom=c.zoom,this.canonical=c.canonical,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.fqid),this.projection=c.projection,this.index=c.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(c,h,g,_){this.tileToMeter=ls(g);const b=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:S,id:L,index:O,sourceLayerIndex:N}of c){const U=Al(S,b);if(!this.layers[0]._featureFilter.filter(new $i(this.zoom),U,g))continue;const j={id:L,sourceLayerIndex:N,index:O,geometry:b?U.geometry:kl(S,g,_),properties:S.properties,type:S.type,patterns:{}},X=this.addFeature(j,j.geometry,U);X&&h.featureIndex.insert(S,j.geometry,O,N,this.index,this.instancesPerModel[X].instancedDataArray.length,zn/32)}this.lookup=null}update(c,h,g,_){for(const b in this.instancesPerModel){const S=this.instancesPerModel[b];for(const L in c)S.idToFeaturesIndex.hasOwnProperty(L)&&this.evaluate(S.features[S.idToFeaturesIndex[L]],c[L],S,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let c=!1;for(const h in this.instancesPerModel){const g=this.instancesPerModel[h];for(const _ of g.features){const b=this.layers[0],S=_.feature,L=this.canonical,O=b.paint.get("model-rotation").evaluate(S,{},L),N=b.paint.get("model-scale").evaluate(S,{},L),U=b.paint.get("model-translation").evaluate(S,{},L);o.N.exactEquals(_.rotation,O)&&o.N.exactEquals(_.scale,N)&&o.N.exactEquals(_.translation,U)||(this.evaluate(_,_.featureStates,g,!0),c=!0)}}return c}isEmpty(){for(const c in this.instancesPerModel)if(this.instancesPerModel[c].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(c){if(!this.uploaded)for(const h in this.instancesPerModel){const g=this.instancesPerModel[h];g.instancedDataArray.length<0||g.instancedDataArray.length===0||(g.instancedDataBuffer?g.instancedDataBuffer.updateData(g.instancedDataArray):g.instancedDataBuffer=c.createVertexBuffer(g.instancedDataArray,gbe.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const c in this.instancesPerModel){const h=this.instancesPerModel[c];h.instancedDataArray.length!==0&&h.instancedDataBuffer&&h.instancedDataBuffer.destroy()}}addFeature(c,h,g){const _=this.layers[0],b=_.layout.get("model-id").evaluate(g,{},this.canonical);if(!b)return Ye(`modelId is not evaluated for layer ${_.id} and it is not going to get rendered.`),b;this.instancesPerModel[b]||(this.instancesPerModel[b]=new bW);const S=this.instancesPerModel[b],L=S.instancedDataArray,O=new _W(g,L.length);for(const N of h)for(const U of N){if(U.x<0||U.x>=zn||U.y<0||U.y>=zn)continue;const j=(this.lookupDim-1)/zn,X=this.lookupDim*(U.y*j|0)+U.x*j|0;if(this.lookup){if(this.lookup[X]!==0)continue;this.lookup[X]=1}this.instanceCount++;const re=L.length;L.resize(re+1),S.instancesEvaluatedElevation.push(0),L.float32[16*re]=U.x,L.float32[16*re+1]=U.y}return O.instancedDataCount=S.instancedDataArray.length-O.instancedDataOffset,O.instancedDataCount>0&&(c.id&&(S.idToFeaturesIndex[c.id]=S.features.length),S.features.push(O),this.evaluate(O,{},S,!1)),b}evaluate(c,h,g,_){const b=this.layers[0],S=c.feature,L=this.canonical,O=c.rotation=b.paint.get("model-rotation").evaluate(S,h,L),N=c.scale=b.paint.get("model-scale").evaluate(S,h,L),U=c.translation=b.paint.get("model-translation").evaluate(S,h,L),j=b.paint.get("model-color").evaluate(S,h,L);j.a=b.paint.get("model-color-mix-intensity").evaluate(S,h,L);const X=[];this.maxVerticalOffset<U[2]&&(this.maxVerticalOffset=U[2]),this.maxScale=Math.max(Math.max(this.maxScale,N[0]),Math.max(N[1],N[2])),vW(X,O,N);const re=Math.round(100*j.a)+j.b/1.05;for(let fe=0;fe<c.instancedDataCount;++fe){const ge=c.instancedDataOffset+fe,Ce=16*ge,Te=g.instancedDataArray.float32;let qe=0;_&&(qe=Te[Ce+6]-g.instancesEvaluatedElevation[ge]);const tt=0|Te[Ce+1];Te[Ce]=(0|Te[Ce])+j.r/1.05,Te[Ce+1]=tt+j.g/1.05,Te[Ce+2]=re,Te[Ce+3]=1/(L.z>10?this.tileToMeter:ls(L,tt)),Te[Ce+4]=U[0],Te[Ce+5]=U[1],Te[Ce+6]=U[2]+qe,Te[Ce+7]=X[0],Te[Ce+8]=X[1],Te[Ce+9]=X[2],Te[Ce+10]=X[4],Te[Ce+11]=X[5],Te[Ce+12]=X[6],Te[Ce+13]=X[8],Te[Ce+14]=X[9],Te[Ce+15]=X[10],g.instancesEvaluatedElevation[ge]=U[2]}}}Pe(Zk,"ModelBucket",{omit:["layers"]}),Pe(bW,"PerModelAttributes"),Pe(_W,"ModelFeature");const vbe=new Js({visibility:new Gn(rn.layout_model.visibility),"model-id":new Mr(rn.layout_model["model-id"])});var ybe={paint:new Js({"model-opacity":new Gn(rn.paint_model["model-opacity"]),"model-rotation":new Mr(rn.paint_model["model-rotation"]),"model-scale":new Mr(rn.paint_model["model-scale"]),"model-translation":new Mr(rn.paint_model["model-translation"]),"model-color":new Mr(rn.paint_model["model-color"]),"model-color-mix-intensity":new Mr(rn.paint_model["model-color-mix-intensity"]),"model-type":new Gn(rn.paint_model["model-type"]),"model-cast-shadows":new Gn(rn.paint_model["model-cast-shadows"]),"model-receive-shadows":new Gn(rn.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Gn(rn.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Mr(rn.paint_model["model-emissive-strength"]),"model-roughness":new Mr(rn.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Mr(rn.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Gn(rn.paint_model["model-cutoff-fade-range"])}),layout:vbe};const c1=64,zw={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function wW(u,c,h,g,_,b,S,L,O,N=!1){const U=h.zoom,j=h.project(g),X=as(g.lat,U),re=1/X;o.a6.identity(u),o.a6.translate(u,u,[j.x+S[0]*re,j.y+S[1]*re,S[2]]);let fe=1,ge=1;const Ce=h.worldSize;if(N){if(h.projection.name==="mercator"){let et=0;h.elevation&&(et=h.elevation.getAtPointOrZero(new Ls(j.x/Ce,j.y/Ce),0));const vt=o.a7.transformMat4([],[j.x,j.y,et,1],h.projMatrix)[3]/h.cameraToCenterDistance;fe=vt,ge=vt*as(h.center.lat,U)}else if(h.projection.name==="globe"){const et=Xk(u,h),vt=o.a6.multiply([],h.projMatrix,et),dt=[0,0,0,1];o.a7.transformMat4(dt,dt,vt);const Pt=dt[3]/h.cameraToCenterDistance,Qt=D0(U),Xt=h.projection.pixelsPerMeter(g.lat,Ce)*as(g.lat,U),An=h.projection.pixelsPerMeter(h.center.lat,Ce)*as(h.center.lat,U);fe=Pt/Qi(Xt,ia(h.center.lat),Qt),ge=Pt*X/Xt,fe*=An,ge*=An}}else fe=re;o.a6.scale(u,u,[fe,fe,ge]);const Te=[...u],qe=c.orientation,tt=[];if(vW(tt,[qe[0]+_[0],qe[1]+_[1],qe[2]+_[2]],b),o.a6.multiply(u,Te,tt),L&&h.elevation){let et=0;const vt=[];if(O&&h.elevation){et=function(Qt,Xt,An,tn,Sn){const Dn=Xt.elevation;if(!Dn)return 0;const wn=ga.projectAabbCorners(An,tn),kn=Li(1,Sn.lat)*Xt.worldSize,yn=function(ti,Wi){const ai=[0,0,1],qi=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Ei of qi){const ps=ti[Ei.corners[0]],Ri=ti[Ei.corners[1]],vo=ti[Ei.corners[2]],Ns=[Ri[0]-ps[0],Ri[1]-ps[1],Wi*(Ri[2]-ps[2])],Us=o.N.cross(Ns,Ns,[vo[0]-ps[0],vo[1]-ps[1],Wi*(vo[2]-ps[2])]);o.N.normalize(Us,Us),Ei.dotProductWithUp=o.N.dot(Us,ai)}return qi.sort((Ei,ps)=>Ei.dotProductWithUp-ps.dotProductWithUp),qi[0].corners}(wn,kn),On=wn[yn[0]],lr=wn[yn[1]],Un=wn[yn[2]],Or=wn[yn[3]],Er=Dn.getAtPointOrZero(new Ls(On[0]/Xt.worldSize,On[1]/Xt.worldSize),0),qn=Dn.getAtPointOrZero(new Ls(lr[0]/Xt.worldSize,lr[1]/Xt.worldSize),0),oi=Dn.getAtPointOrZero(new Ls(Un[0]/Xt.worldSize,Un[1]/Xt.worldSize),0),Kr=Dn.getAtPointOrZero(new Ls(Or[0]/Xt.worldSize,Or[1]/Xt.worldSize),0),Pr=(Er+Kr)/2,Yn=(qn+oi)/2;return Pr>Yn?qn<oi?OL(Qt,lr,Or,On,qn,Kr,Er,kn):OL(Qt,Un,On,Or,oi,Er,Kr,kn):Er<Kr?OL(Qt,On,lr,Un,Er,qn,oi,kn):OL(Qt,Or,Un,lr,Kr,oi,qn,kn),Math.max(Pr,Yn)}(vt,h,c.aabb,u,g);const dt=o.a6.fromQuat([],vt),Pt=o.a6.multiply([],dt,tt);o.a6.multiply(u,Te,Pt)}else et=h.elevation.getAtPointOrZero(new Ls(j.x/Ce,j.y/Ce),0);et!==0&&(u[14]+=et)}}function wS(u,c,h=!1){u.uploaded||(u.gfxTexture=new qk(c,u.image,h?c.gl.R8:c.gl.RGBA,{useMipmap:u.sampler.minFilter>=c.gl.NEAREST_MIPMAP_NEAREST}),u.uploaded=!0,u.image=null)}function _be(u,c,h){u.indexBuffer=c.createIndexBuffer(u.indexArray,!1,!0),u.vertexBuffer=c.createVertexBuffer(u.vertexArray,hbe.members,!1,!0),u.normalArray&&(u.normalBuffer=c.createVertexBuffer(u.normalArray,Abe.members,!1,!0)),u.texcoordArray&&(u.texcoordBuffer=c.createVertexBuffer(u.texcoordArray,pbe.members,!1,!0)),u.colorArray&&(u.colorBuffer=c.createVertexBuffer(u.colorArray,(u.colorArray.bytesPerElement===12?dbe:fbe).members,!1,!0)),u.featureArray&&(u.pbrBuffer=c.createVertexBuffer(u.featureArray,mbe.members,!0)),u.segments=Ea.simpleSegment(0,0,u.vertexArray.length,u.indexArray.length);const g=u.material;g.pbrMetallicRoughness.baseColorTexture&&wS(g.pbrMetallicRoughness.baseColorTexture,c),g.pbrMetallicRoughness.metallicRoughnessTexture&&wS(g.pbrMetallicRoughness.metallicRoughnessTexture,c),g.normalTexture&&wS(g.normalTexture,c),g.occlusionTexture&&wS(g.occlusionTexture,c,h),g.emissionTexture&&wS(g.emissionTexture,c)}function Jk(u,c,h){if(u.meshes)for(const g of u.meshes)_be(g,c,h);if(u.children)for(const g of u.children)Jk(g,c,h)}function NL(u){if(u.meshes)for(const c of u.meshes)c.indexArray.destroy(),c.vertexArray.destroy(),c.colorArray&&c.colorArray.destroy(),c.normalArray&&c.normalArray.destroy(),c.texcoordArray&&c.texcoordArray.destroy(),c.featureArray&&c.featureArray.destroy();if(u.children)for(const c of u.children)NL(c)}function eD(u){if(u.meshes)for(const h of u.meshes)h.vertexBuffer&&(h.vertexBuffer.destroy(),h.indexBuffer.destroy(),h.normalBuffer&&h.normalBuffer.destroy(),h.texcoordBuffer&&h.texcoordBuffer.destroy(),h.colorBuffer&&h.colorBuffer.destroy(),h.pbrBuffer&&h.pbrBuffer.destroy(),h.segments.destroy(),h.material&&((c=h.material).pbrMetallicRoughness.baseColorTexture&&c.pbrMetallicRoughness.baseColorTexture.gfxTexture&&c.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),c.pbrMetallicRoughness.metallicRoughnessTexture&&c.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&c.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),c.normalTexture&&c.normalTexture.gfxTexture&&c.normalTexture.gfxTexture.destroy(),c.emissionTexture&&c.emissionTexture.gfxTexture&&c.emissionTexture.gfxTexture.destroy(),c.occlusionTexture&&c.occlusionTexture.gfxTexture&&c.occlusionTexture.gfxTexture.destroy()));var c;if(u.children)for(const h of u.children)eD(h)}class bbe{constructor(c){this._callback=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class wbe{constructor(){this.tasks={},this.taskQueue=[],Ne(["process"],this),this.invoker=new bbe(this.process),this.nextId=0}add(c,h){const g=this.nextId++,_=function({type:b,isSymbolTile:S,zoom:L}){return L=L||0,b==="message"?0:b!=="maybePrepare"||S?b!=="parseTile"||S?b==="parseTile"&&S?300-L:b==="maybePrepare"&&S?400-L:500:200-L:100-L}(h);if(_===0){Ut();try{c()}finally{}return null}return this.tasks[g]={fn:c,metadata:h,priority:_,id:g},this.taskQueue.push(g),this.invoker.trigger(),{cancel:()=>{delete this.tasks[g]}}}process(){Ut();try{if(this.taskQueue=this.taskQueue.filter(g=>!!this.tasks[g]),!this.taskQueue.length)return;const c=this.pick();if(c===null)return;const h=this.tasks[c];if(delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),!h)return;h.fn()}finally{}}pick(){let c=null,h=1/0;for(let _=0;_<this.taskQueue.length;_++){const b=this.tasks[this.taskQueue[_]];b.priority<h&&(h=b.priority,c=_)}if(c===null)return null;const g=this.taskQueue[c];return this.taskQueue.splice(c,1),g}remove(){this.invoker.remove()}}class xW{constructor(c,h,g){this.target=c,this.parent=h,this.mapId=g,this.callbacks={},this.cancelCallbacks={},Ne(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new wbe}send(c,h,g,_,b=!1,S){const L=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(g.metadata=S,this.callbacks[L]=g);const O=new Set;return this.target.postMessage({id:L,type:c,hasCallback:!!g,targetMapId:_,mustQueue:b,sourceMapId:this.mapId,data:ht(h,O)},O),{cancel:()=>{g&&delete this.callbacks[L],this.target.postMessage({id:L,type:"<cancel>",targetMapId:_,sourceMapId:this.mapId})}}}receive(c){const h=c.data,g=h.id;if(g&&(!h.targetMapId||this.mapId===h.targetMapId))if(h.type==="<cancel>"){const _=this.cancelCallbacks[g];delete this.cancelCallbacks[g],_&&_.cancel()}else if(h.mustQueue||Ut()){const _=this.callbacks[g],b=this.scheduler.add(()=>this.processTask(g,h),_&&_.metadata||{type:"message"});b&&(this.cancelCallbacks[g]=b)}else this.processTask(g,h)}processTask(c,h){if(delete this.cancelCallbacks[c],h.type==="<response>"){const g=this.callbacks[c];delete this.callbacks[c],g&&(h.error?g(At(h.error)):g(null,At(h.data)))}else{const g=new Set,_=h.hasCallback?(S,L)=>{this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:S?ht(S):null,data:ht(L,g)},g)}:S=>{},b=At(h.data);if(this.parent[h.type])this.parent[h.type](h.sourceMapId,b,_);else if(this.parent.getWorkerSource){const S=h.type.split(".");this.parent.getWorkerSource(h.sourceMapId,S[0],b.source,b.scope)[S[1]](b,_)}else _(new Error(`Could not find function ${h.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class $w{constructor(c,h){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=_e();const g=this.workerPool.acquire(this.id);for(let _=0;_<g.length;_++){const b=new $w.Actor(g[_],h,this.id);b.name=`Worker ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,h,g){Le(this.actors,(_,b)=>{_.send(c,h,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}$w.Actor=xW;var xS={workerUrl:"",workerClass:null,workerParams:void 0};function xbe(){return xS.workerClass!=null?new xS.workerClass:new self.Worker(xS.workerUrl,xS.workerParams)}const tD="mapboxgl_preloaded_worker_pool";class CS{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<CS.workerCount;)this.workers.push(new xbe);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.workers&&this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[tD]}numActive(){return Object.keys(this.active).length}}let ES;function kL(){return ES||(ES=new CS),ES}CS.workerCount=2;let DL,nD,uA,Vw,rD,Hw=null;function CW(){return Ut()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:nD||A.DRACO_URL}function EW(){if(Ut()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Vw)return Vw;const u=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Vw=WebAssembly.validate(u)?A.MESHOPT_SIMD_URL:A.MESHOPT_URL,Vw}const UL={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Cbe={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},SS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function SW(u,c,h){const g=h.json.bufferViews.length,_=h.buffers.length;c.bufferView=g,h.json.bufferViews[g]={buffer:_,byteLength:u.byteLength},h.buffers[_]=u}const iD="KHR_draco_mesh_compression";function Ebe(u,c){const h=u.extensions&&u.extensions[iD];if(!h)return;const g=new uA.Decoder,_=MW(c,h.bufferView),b=new uA.Mesh;if(!g.DecodeArrayToMesh(_,_.byteLength,b))throw new Error("Failed to decode Draco mesh");const S=c.json.accessors[u.indices],L=UL[S.componentType],O=S.count*L.BYTES_PER_ELEMENT,N=uA._malloc(O);L===Uint16Array?g.GetTrianglesUInt16Array(b,O,N):g.GetTrianglesUInt32Array(b,O,N),SW(uA.memory.buffer.slice(N,N+O),S,c),uA._free(N);for(const U of Object.keys(h.attributes)){const j=g.GetAttributeByUniqueId(b,h.attributes[U]),X=c.json.accessors[u.attributes[U]],re=Cbe[X.componentType],fe=X.count*SS[X.type]*UL[X.componentType].BYTES_PER_ELEMENT,ge=uA._malloc(fe);g.GetAttributeDataArrayForAllPoints(b,j,uA[re],fe,ge),SW(uA.memory.buffer.slice(ge,ge+fe),X,c),uA._free(ge)}g.destroy(),b.destroy(),delete u.extensions[iD]}const zL="EXT_meshopt_compression";function Sbe(u,c){if(!u.extensions||!u.extensions[zL])return;const h=u.extensions[zL],g=new Uint8Array(c.buffers[h.buffer],h.byteOffset||0,h.byteLength||0),_=new Uint8Array(h.count*h.byteStride);rD.decodeGltfBuffer(_,h.count,h.byteStride,g,h.mode,h.filter),u.buffer=c.buffers.length,u.byteOffset=0,c.buffers[u.buffer]=_.buffer,delete u.extensions[zL]}const TW=1179937895,IW=new TextDecoder("utf8");function BW(u,c){return new URL(u,c).href}function Tbe(u,c,h,g){return fetch(BW(u.uri,g)).then(_=>_.arrayBuffer()).then(_=>{c.buffers[h]=_})}function MW(u,c){const h=u.json.bufferViews[c];return new Uint8Array(u.buffers[h.buffer],h.byteOffset||0,h.byteLength)}function Ibe(u,c,h,g){if(u.uri){const _=BW(u.uri,g);return fetch(_).then(b=>b.blob()).then(b=>createImageBitmap(b)).then(b=>{c.images[h]=b})}if(u.bufferView!==void 0){const _=MW(c,u.bufferView),b=new Blob([_],{type:u.mimeType});return createImageBitmap(b).then(S=>{c.images[h]=S})}}function LW(u,c=0,h){const g={json:null,images:[],buffers:[]};if(new Uint32Array(u,c,1)[0]===TW){const U=new Uint32Array(u,c);let j=2;const X=(U[j++]>>2)-3,re=U[j++]>>2;if(j++,g.json=JSON.parse(IW.decode(U.subarray(j,j+re))),j+=re,j<X){const fe=U[j++];j++;const ge=c+(j<<2);g.buffers[0]=u.slice(ge,ge+fe)}}else g.json=JSON.parse(IW.decode(new Uint8Array(u,c)));const{buffers:_,images:b,meshes:S,extensionsUsed:L,bufferViews:O}=g.json;let N=Promise.resolve();if(_){const U=[];for(let j=0;j<_.length;j++){const X=_[j];X.uri?U.push(Tbe(X,g,j,h)):g.buffers[j]||(g.buffers[j]=null)}N=Promise.all(U)}return N.then(()=>{const U=[],j=L&&L.includes(iD),X=L&&L.includes(zL);if(j&&U.push(function(){if(!uA)return DL||(DL=function(re){let fe,ge=null;function Ce(){fe=new Uint8Array(ge.buffer)}function Te(){throw new Error("Unexpected Draco error.")}const qe={a:{a:Te,d:function(tt,et,vt){return fe.copyWithin(tt,et,et+vt)},c:function(tt){const et=fe.length,vt=Math.max(tt>>>0,Math.ceil(1.2*et)),dt=Math.ceil((vt-et)/65536);try{return ge.grow(dt),Ce(),!0}catch{return!1}},b:Te}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(re,qe):re.then(tt=>tt.arrayBuffer()).then(tt=>WebAssembly.instantiate(tt,qe))).then(tt=>{const{Rb:et,Qb:vt,P:dt,T:Pt,X:Qt,Ja:Xt,La:An,Qa:tn,Va:Sn,Wa:Dn,eb:wn,jb:kn,f:yn,e:On,yb:lr,zb:Un,Ab:Or,Bb:Er,Db:qn,Gb:oi}=tt.instance.exports;ge=On;const Kr=(()=>{let Pr=0,Yn=0,ti=0,Wi=0;return ai=>{ti&&(et(Wi),et(Pr),Yn+=ti,ti=Pr=0),Pr||(Yn+=128,Pr=vt(Yn));const qi=ai.length+7&-8;let Ei=Pr;qi>=Yn&&(ti=qi,Ei=Wi=vt(qi));for(let ps=0;ps<ai.length;ps++)fe[Ei+ps]=ai[ps];return Ei}})();return Ce(),yn(),{memory:On,_free:et,_malloc:vt,Mesh:class{constructor(){this.ptr=dt()}destroy(){Pt(this.ptr)}},Decoder:class{constructor(){this.ptr=Xt()}destroy(){kn(this.ptr)}DecodeArrayToMesh(Pr,Yn,ti){const Wi=Kr(Pr),ai=An(this.ptr,Wi,Yn,ti.ptr);return!!Qt(ai)}GetAttributeByUniqueId(Pr,Yn){return{ptr:tn(this.ptr,Pr.ptr,Yn)}}GetTrianglesUInt16Array(Pr,Yn,ti){Sn(this.ptr,Pr.ptr,Yn,ti)}GetTrianglesUInt32Array(Pr,Yn,ti){Dn(this.ptr,Pr.ptr,Yn,ti)}GetAttributeDataArrayForAllPoints(Pr,Yn,ti,Wi,ai){wn(this.ptr,Pr.ptr,Yn.ptr,ti,Wi,ai)}},DT_INT8:lr(),DT_UINT8:Un(),DT_INT16:Or(),DT_UINT16:Er(),DT_UINT32:qn(),DT_FLOAT32:oi()}})}(fetch(CW())),DL.then(re=>{uA=re,DL=void 0}))}()),X&&U.push(function(){if(rD)return;const re=function(fe){let ge;const Ce=WebAssembly.instantiateStreaming(fe,{}).then(tt=>{ge=tt.instance,ge.exports.__wasm_call_ctors()}),Te={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},qe={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:Ce,supported:!0,decodeGltfBuffer(tt,et,vt,dt,Pt,Qt){(function(Xt,An,tn,Sn,Dn,wn,kn){const yn=Xt.exports.sbrk,On=Sn+3&-4,lr=yn(On*Dn),Un=yn(wn.length),Or=new Uint8Array(Xt.exports.memory.buffer);Or.set(wn,Un);const Er=An(lr,Sn,Dn,Un,wn.length);if(Er===0&&kn&&kn(lr,On,Dn),tn.set(Or.subarray(lr,lr+Sn*Dn)),yn(lr-yn(0)),Er!==0)throw new Error(`Malformed buffer data: ${Er}`)})(ge,ge.exports[qe[Pt]],tt,et,vt,dt,ge.exports[Te[Qt]])}}}(fetch(EW()));return re.ready.then(()=>{rD=re})}()),b)for(let re=0;re<b.length;re++)U.push(Ibe(b[re],g,re,h));return(U.length?Promise.all(U):Promise.resolve()).then(()=>{if(j&&S)for(const{primitives:re}of S)for(const fe of re)Ebe(fe,g);if(X&&S&&O)for(const re of O)Sbe(re,g);return g})})}class RW{constructor(c,h,g){if(this.triangleCount=h.length/3,this.min=new W(0,0),this.max=new W(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||c.length===0||g===0)return;const _=c.map(U=>U.x),b=c.map(U=>U.y);this.min=new W(Math.min(..._),Math.min(...b)),this.max=new W(Math.max(..._),Math.max(...b));const S=this.max.sub(this.min);S.x=Math.max(S.x,1),S.y=Math.max(S.y,1);const L=Math.max(S.x,S.y)/g;this.cellsX=Math.max(1,Math.ceil(S.x/L)),this.cellsY=Math.max(1,Math.ceil(S.y/L)),this.xScale=1/L,this.yScale=1/L;const O=[];for(let U=0;U<this.triangleCount;U++){const j=c[h[3*U+0]].sub(this.min),X=c[h[3*U+1]].sub(this.min),re=c[h[3*U+2]].sub(this.min),fe=j0(Math.floor(Math.min(j.x,X.x,re.x)),this.xScale,this.cellsX),ge=j0(Math.floor(Math.max(j.x,X.x,re.x)),this.xScale,this.cellsX),Ce=j0(Math.floor(Math.min(j.y,X.y,re.y)),this.yScale,this.cellsY),Te=j0(Math.floor(Math.max(j.y,X.y,re.y)),this.yScale,this.cellsY),qe=new W(0,0),tt=new W(0,0),et=new W(0,0),vt=new W(0,0);for(let dt=Ce;dt<=Te;++dt){qe.y=tt.y=dt*L,et.y=vt.y=(dt+1)*L;for(let Pt=fe;Pt<=ge;++Pt)qe.x=et.x=Pt*L,tt.x=vt.x=(Pt+1)*L,(JN(j,X,re,qe,tt,vt)||JN(j,X,re,qe,vt,et))&&O.push({cellIdx:dt*this.cellsX+Pt,triIdx:U})}}if(O.length===0)return;O.sort((U,j)=>U.cellIdx-j.cellIdx||U.triIdx-j.triIdx);let N=0;for(;N<O.length;){const U=O[N].cellIdx,j={start:this.payload.length,len:0};for(;N<O.length&&O[N].cellIdx===U;)++j.len,this.payload.push(O[N++].triIdx);this.cells[U]=j}}query(c,h,g){if(this.triangleCount===0||this.cells.length===0||c.x>this.max.x||this.min.x>h.x||c.y>this.max.y||this.min.y>h.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let O=0;O<this.lookup.length;O++)this.lookup[O]=0;const _=j0(c.x-this.min.x,this.xScale,this.cellsX),b=j0(h.x-this.min.x,this.xScale,this.cellsX),S=j0(c.y-this.min.y,this.yScale,this.cellsY),L=j0(h.y-this.min.y,this.yScale,this.cellsY);for(let O=S;O<=L;O++)for(let N=_;N<=b;N++){const U=this.cells[O*this.cellsX+N];if(U)for(let j=0;j<U.len;j++){const X=this.payload[U.start+j],re=Math.floor(X/8),fe=1<<X%8;if(!(this.lookup[re]&fe)&&(this.lookup[re]|=fe,g.push(X),g.length===this.triangleCount))return}}}}function j0(u,c,h){return Math.max(0,Math.min(h-1,Math.floor(u*c)))}function u1(u,c){const h=u.json.bufferViews[c.bufferView],g=UL[c.componentType];return new g(u.buffers[h.buffer],(c.byteOffset||0)+(h.byteOffset||0),c.count*(h.byteStride&&h.byteStride!==SS[c.type]*g.BYTES_PER_ELEMENT?h.byteStride/g.BYTES_PER_ELEMENT:SS[c.type]))}function sD(u,c,h,g){const _=UL[c.componentType],b=function(U){switch(U){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(_),S=u.json.bufferViews[c.bufferView],L=S.byteStride?S.byteStride/_.BYTES_PER_ELEMENT:SS[c.type],O=h.float32,N=O.length/h.capacity;for(let U=0,j=0;U<c.count*L;U+=L,j+=N)for(let X=0;X<N;X++)O[j+X]=g[U+X]*b;h._trim()}function Bbe(u,c,h){const g=u.indices,_=u.attributes,b={};b.indexArray=new Wo;const S=c.json.accessors[g],L=S.count/3;b.indexArray.reserve(L);const O=u1(c,S);for(let X=0;X<L;X++)b.indexArray.emplaceBack(O[3*X],O[3*X+1],O[3*X+2]);b.indexArray._trim(),b.vertexArray=new rA;const N=c.json.accessors[_.POSITION];b.vertexArray.reserve(N.count);const U=u1(c,N);for(let X=0;X<N.count;X++)b.vertexArray.emplaceBack(U[3*X],U[3*X+1],U[3*X+2]);if(b.vertexArray._trim(),b.aabb=new ga(N.min,N.max),b.centroid=function(X,re){const fe=[0,0,0],ge=X.length;if(ge>0){for(let Ce=0;Ce<ge;Ce++){const Te=3*X[Ce];fe[0]+=re[Te],fe[1]+=re[Te+1],fe[2]+=re[Te+2]}fe[0]/=ge,fe[1]/=ge,fe[2]/=ge}return fe}(O,U),_.COLOR_0!==void 0){const X=c.json.accessors[_.COLOR_0],re=SS[X.type],fe=u1(c,X);b.colorArray=re===3?new rA:new hf,b.colorArray.resize(X.count),sD(c,X,b.colorArray,fe)}if(_.NORMAL!==void 0){b.normalArray=new rA;const X=c.json.accessors[_.NORMAL];b.normalArray.resize(X.count);const re=u1(c,X);sD(c,X,b.normalArray,re)}if(_.TEXCOORD_0!==void 0&&h.length>0){b.texcoordArray=new _g;const X=c.json.accessors[_.TEXCOORD_0];b.texcoordArray.resize(X.count);const re=u1(c,X);sD(c,X,b.texcoordArray,re)}if(_._FEATURE_ID_RGBA4444!==void 0){const X=c.json.accessors[_._FEATURE_ID_RGBA4444];c.json.extensionsUsed&&c.json.extensionsUsed.includes("EXT_meshopt_compression")&&(b.featureData=u1(c,X))}_._FEATURE_RGBA4444!==void 0&&(b.featureData=new Uint32Array(u1(c,c.json.accessors[_._FEATURE_RGBA4444]).buffer));const j=u.material;return b.material=function(X,re){const{emissiveFactor:fe=[0,0,0],alphaMode:ge="OPAQUE",alphaCutoff:Ce=.5,normalTexture:Te,occlusionTexture:qe,emissiveTexture:tt,doubleSided:et}=X,{baseColorFactor:vt=[1,1,1,1],metallicFactor:dt=1,roughnessFactor:Pt=1,baseColorTexture:Qt,metallicRoughnessTexture:Xt}=X.pbrMetallicRoughness||{},An=qe?re[qe.index]:void 0;if(qe&&qe.extensions&&qe.extensions.KHR_texture_transform&&An){const tn=qe.extensions.KHR_texture_transform;An.offsetScale=[tn.offset[0],tn.offset[1],tn.scale[0],tn.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new po(...vt),metallicFactor:dt,roughnessFactor:Pt,baseColorTexture:Qt?re[Qt.index]:void 0,metallicRoughnessTexture:Xt?re[Xt.index]:void 0},doubleSided:et,emissiveFactor:fe,alphaMode:ge,alphaCutoff:Ce,normalTexture:Te?re[Te.index]:void 0,occlusionTexture:An,emissionTexture:tt?re[tt.index]:void 0,defined:X.defined===void 0}}(j!==void 0?c.json.materials[j]:{defined:!1},h),b}function PW(u,c,h){const{matrix:g,rotation:_,translation:b,scale:S,mesh:L,extras:O,children:N}=u,U={};if(U.matrix=g||o.a6.fromRotationTranslationScale([],_||[0,0,0,1],b||[0,0,0],S||[1,1,1]),L!==void 0){U.meshes=h[L];const j=U.anchor=[0,0];for(const X of U.meshes){const{min:re,max:fe}=X.aabb;j[0]+=re[0]+fe[0],j[1]+=re[1]+fe[1]}j[0]=Math.floor(j[0]/U.meshes.length/2),j[1]=Math.floor(j[1]/U.meshes.length/2)}if(O&&(O.id&&(U.id=O.id),O.lights&&(U.lights=function(j){if(!j.length)return[];const X=function(Te){const qe=atob(Te),tt=new Uint8Array(qe.length);for(let et=0;et<qe.length;et++)tt[et]=qe.codePointAt(et);return tt}(j),re=[],fe=X.length/24,ge=new Uint16Array(X.buffer),Ce=new Float32Array(X.buffer);for(let Te=0;Te<fe;Te++){const qe=ge[2*Te*6]/30,tt=ge[2*Te*6+1]/30,et=ge[2*Te*6+10]/100,vt=Ce[6*Te+1],dt=Ce[6*Te+2],Pt=Ce[6*Te+3],Qt=Ce[6*Te+4],Xt=Pt-vt,An=Qt-dt,tn=Math.hypot(Xt,An);re.push({pos:[vt+.5*Xt,dt+.5*An,tt],normal:[An/tn,-Xt/tn,0],width:tn,height:qe,depth:et,points:[vt,dt,Pt,Qt]})}return re}(O.lights))),N){const j=[];for(const X of N)j.push(PW(c.json.nodes[X],c,h));U.children=j}return U}function Mbe(u){if(u.vertices.length===0||u.indices.length===0)return null;const[c,h]=[u.vertices[0].clone(),u.vertices[0].clone()];for(let S=1;S<u.vertices.length;++S){const L=u.vertices[S];c.x=Math.min(c.x,L.x),c.y=Math.min(c.y,L.y),h.x=Math.max(h.x,L.x),h.y=Math.max(h.y,L.y)}const g=Math.ceil(Math.max(h.x-c.x,h.y-c.y)/256),_=Math.max(8,g),b=new RW(u.vertices,u.indices,_);return{vertices:u.vertices,indices:u.indices,grid:b,min:c,max:h}}function Lbe(u){if(!u.extras||!u.extras.ground)return null;const c=u.extras.ground;if(!c||!Array.isArray(c)||c.length===0)return null;const h=c[0];if(!h||!Array.isArray(h)||h.length===0)return null;const g=[];for(const S of h){if(!Array.isArray(S)||S.length!==2)continue;const L=S[0],O=S[1];typeof L=="number"&&typeof O=="number"&&g.push(new W(L,O))}if(g.length<3)return null;g.length>1&&g[g.length-1].equals(g[0])&&g.pop();let _=0;for(let S=0;S<g.length;S++){const L=g[S],O=g[(S+1)%g.length],N=g[(S+2)%g.length];_+=(L.x-O.x)*(N.y-O.y)-(N.x-O.x)*(L.y-O.y)}_>0&&g.reverse();const b=aL(g.flatMap(S=>[S.x,S.y]),[]);return b.length===0?null:{vertices:g,indices:b}}function Rbe(u){const c=[],h=[];let g=0;for(const _ of u){g=c.length;const b=_.vertexArray.float32,S=_.indexArray.uint16;for(let L=0;L<_.vertexArray.length;L++)c.push(new W(b[3*L+0],b[3*L+1]));for(let L=0;L<3*_.indexArray.length;L++)h.push(S[L]+g)}if(h.length%3!=0)return null;for(let _=0;_<h.length;_+=3){const b=c[h[_+0]],S=c[h[_+1]],L=c[h[_+2]];(b.x-S.x)*(L.y-S.y)-(L.x-S.x)*(b.y-S.y)>0&&([h[_+1],h[_+2]]=[h[_+2],h[_+1]])}return{vertices:c,indices:h}}function FW(u){const c=function(O,N){const U=[],j=WebGL2RenderingContext;if(O.json.textures)for(const X of O.json.textures){const re={magFilter:j.LINEAR,minFilter:j.NEAREST,wrapS:j.REPEAT,wrapT:j.REPEAT};X.sampler!==void 0&&Object.assign(re,O.json.samplers[X.sampler]),U.push({image:N[X.source],sampler:re,uploaded:!1})}return U}(u,u.images),h=function(O,N){const U=[];for(const j of O.json.meshes){const X=[];for(const re of j.primitives)X.push(Bbe(re,O,N));U.push(X)}return U}(u,c),{scenes:g,scene:_,nodes:b}=u.json,S=g?g[_||0].nodes:b,L=[];for(const O of S)L.push(PW(b[O],u,h));return function(O,N,U){const j={},X=new Set;for(let re=0;re<O.length;re++){const fe=U[N[re]];if(!fe.extras)continue;const ge=fe.extras["mapbox:footprint:version"],Ce=fe.extras["mapbox:footprint:id"];(ge||Ce)&&X.add(re),ge==="1.0.0"&&Ce&&(j[Ce]=re)}for(let re=0;re<O.length;re++){if(X.has(re))continue;const fe=O[re],ge=U[N[re]];if(!ge.extras)continue;let Ce=null;fe.id in j&&(Ce=Rbe(O[j[fe.id]].meshes)),Ce||(Ce=Lbe(ge)),Ce&&(fe.footprint=Mbe(Ce))}if(X.size>0){const re=Array.from(X.values()).sort((fe,ge)=>fe-ge);for(let fe=re.length-1;fe>=0;fe--)O.splice(re[fe],1)}}(L,S,u.json.nodes),L}function Pbe(u){u.heightmap=new Float32Array(4096),u.heightmap.fill(-1);const c=u.vertexArray.float32,h=u.aabb.min[0]-1,g=u.aabb.min[1]-1,_=c1/(u.aabb.max[0]-h+2),b=c1/(u.aabb.max[1]-g+2);for(let S=0;S<c.length;S+=3){const L=c[S+2],O=(c[S+0]-h)*_|0,N=(c[S+1]-g)*b|0;L>u.heightmap[N*c1+O]&&(u.heightmap[N*c1+O]=L)}}function Fbe(u,c){const h={};h.indexArray=new Wo,h.indexArray.reserve(4*u.length),h.vertexArray=new rA,h.vertexArray.reserve(10*u.length),h.colorArray=new hf,h.vertexArray.reserve(10*u.length);let g=0;for(const S of u){const L=Math.min(10,Math.max(4,1.3*S.height))*c,O=[-S.normal[1],S.normal[0],0],N=Math.min(.29,.1*S.width/S.depth),U=S.width-2*S.depth*c*(N+.01),j=o.N.scaleAndAdd([],S.pos,O,U/2),X=o.N.scaleAndAdd([],S.pos,O,-U/2),re=[j[0],j[1],j[2]+S.height],fe=[X[0],X[1],X[2]+S.height],ge=o.N.scaleAndAdd([],S.normal,O,N);o.N.scale(ge,ge,L);const Ce=o.N.scaleAndAdd([],S.normal,O,-N);o.N.scale(Ce,Ce,L),o.N.add(ge,j,ge),o.N.add(Ce,X,Ce),j[2]+=.1,X[2]+=.1,h.vertexArray.emplaceBack(ge[0],ge[1],ge[2]),h.vertexArray.emplaceBack(Ce[0],Ce[1],Ce[2]),h.vertexArray.emplaceBack(j[0],j[1],j[2]),h.vertexArray.emplaceBack(X[0],X[1],X[2]),h.vertexArray.emplaceBack(re[0],re[1],re[2]),h.vertexArray.emplaceBack(fe[0],fe[1],fe[2]),h.vertexArray.emplaceBack(j[0],j[1],j[2]),h.vertexArray.emplaceBack(X[0],X[1],X[2]),h.vertexArray.emplaceBack(ge[0],ge[1],ge[2]),h.vertexArray.emplaceBack(Ce[0],Ce[1],Ce[2]);const Te=U/L/2;h.colorArray.emplaceBack(-Te-N,-1,Te,.8),h.colorArray.emplaceBack(Te+N,-1,Te,.8),h.colorArray.emplaceBack(-Te,0,Te,1.3),h.colorArray.emplaceBack(Te,0,Te,1.3),h.colorArray.emplaceBack(Te+N,-.8,Te,.7),h.colorArray.emplaceBack(Te+N,-.8,Te,.7),h.colorArray.emplaceBack(0,0,Te,1.3),h.colorArray.emplaceBack(0,0,Te,1.3),h.colorArray.emplaceBack(Te+N,-1.2,Te,.8),h.colorArray.emplaceBack(Te+N,-1.2,Te,.8),h.indexArray.emplaceBack(6+g,4+g,8+g),h.indexArray.emplaceBack(7+g,9+g,5+g),h.indexArray.emplaceBack(0+g,1+g,2+g),h.indexArray.emplaceBack(1+g,3+g,2+g),g+=10}const _={defined:!0,emissiveFactor:[0,0,0]},b={};return b.baseColorFactor=po.white,_.pbrMetallicRoughness=b,h.material=_,h.aabb=new ga([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),h}Pe(RW,"TriangleGridIndex");class OW{constructor(c){this._stringToNumber={},this._numberToString=[];for(let h=0;h<c.length;h++){const g=c[h];this._stringToNumber[g]=h,this._numberToString[h]=g}}encode(c){return this._stringToNumber[c]}decode(c){return this._numberToString[c]}}const Obe=["tile","layer","source","sourceLayer","state"];class NW{constructor(c,h,g,_,b){this.type="Feature",this._vectorTileFeature=c,this._z=h,this._x=g,this._y=_,this.properties=c.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(c.id=this.id);for(const h of Obe)this[h]!==void 0&&(c[h]=this[h]);return c}}class kW{constructor(c,h){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new Ae(zn,16,0),this.featureIndexArray=new O0,this.promoteId=h,this.is3DTile=!1}insert(c,h,g,_,b,S=0,L=0){const O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,_,b,S);const N=this.grid;for(let U=0;U<h.length;U++){const j=h[U],X=[1/0,1/0,-1/0,-1/0];for(let re=0;re<j.length;re++){const fe=j[re];X[0]=Math.min(X[0],fe.x),X[1]=Math.min(X[1],fe.y),X[2]=Math.max(X[2],fe.x),X[3]=Math.max(X[3],fe.y)}L!==0&&(X[0]-=L,X[1]-=L,X[2]+=L,X[3]+=L),X[0]<zn&&X[1]<zn&&X[2]>=0&&X[3]>=0&&N.insert(O,X[0],X[1],X[2],X[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Rk(new Ow(this.rawTileData)).layers,this.sourceLayerCoder=new OW(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const c in this.vtLayers)this.vtFeatures[c]=[]}return this.vtLayers}query(c,h,g,_){this.loadVTLayers();const b=c.params||{},S=Ol(b.filter),L=c.tileResult,O=c.transform,N=L.bufferedTilespaceBounds,U=this.grid.query(N.min.x,N.min.y,N.max.x,N.max.y,(fe,ge,Ce,Te)=>ij(L.bufferedTilespaceGeometry,fe,ge,Ce,Te));U.sort(Nbe);let j=null;O.elevation&&U.length>0&&(j=Mw.create(O.elevation,this.tileID));const X={};let re;for(let fe=0;fe<U.length;fe++){const ge=U[fe];if(ge===re)continue;re=ge;const Ce=this.featureIndexArray.get(ge);let Te=null;if(this.is3DTile){const qe=this.bucketLayerIDs[0][0],tt=h[qe];if(tt.type!=="model")continue;const{queryFeature:et,intersectionZ:vt}=tt.queryIntersectsMatchingFeature(L,Ce.featureIndex,S,O);et&&this.appendToResult(X,qe,Ce.featureIndex,et,vt)}else this.loadMatchingFeature(X,Ce,S,b.layers,b.availableImages,h,g,_,(qe,tt,et,vt=0)=>(Te||(Te=kl(qe,this.tileID.canonical,c.tileTransform)),tt.queryIntersectsFeature(L,qe,et,Te,this.z,c.transform,c.pixelPosMatrix,j,vt)))}return X}loadMatchingFeature(c,h,g,_,b,S,L,O,N){const{featureIndex:U,bucketIndex:j,sourceLayerIndex:X,layoutVertexArrayOffset:re}=h,fe=this.bucketLayerIDs[j];if(_&&!function(qe,tt){for(let et=0;et<qe.length;et++)if(tt.indexOf(qe[et])>=0)return!0;return!1}(_,fe))return;const ge=this.sourceLayerCoder.decode(X),Ce=this.vtLayers[ge].feature(U);if(g.needGeometry){const qe=Al(Ce,!0);if(!g.filter(new $i(this.tileID.overscaledZ),qe,this.tileID.canonical))return}else if(!g.filter(new $i(this.tileID.overscaledZ),Ce))return;const Te=this.getId(Ce,ge);for(let qe=0;qe<fe.length;qe++){const tt=fe[qe];if(_&&_.indexOf(tt)<0)continue;const et=S[tt];if(!et)continue;let vt={};Te!==void 0&&O&&(vt=O.getState(et.sourceLayer||"_geojsonTileLayer",Te));const dt=!N||N(Ce,et,vt,re);if(!dt)continue;const Pt=new NW(Ce,this.z,this.x,this.y,Te),Qt=ae({},L[tt]);Qt.paint=DW(Qt.paint,et.paint,Ce,vt,b),Qt.layout=DW(Qt.layout,et.layout,Ce,vt,b),Pt.layer=Qt,this.appendToResult(c,tt,U,Pt,dt)}}appendToResult(c,h,g,_,b){let S=c[h];S===void 0&&(S=c[h]=[]),S.push({featureIndex:g,feature:_,intersectionZ:b})}lookupSymbolFeatures(c,h,g,_,b,S,L,O){const N={};this.loadVTLayers();const U=Ol(b);for(const j of c)this.loadMatchingFeature(N,{bucketIndex:g,sourceLayerIndex:_,featureIndex:j,layoutVertexArrayOffset:0},U,S,L,O,h);return N}loadFeature(c){const{featureIndex:h,sourceLayerIndex:g}=c;this.loadVTLayers();const _=this.sourceLayerCoder.decode(g),b=this.vtFeatures[_];if(b[h])return b[h];const S=this.vtLayers[_].feature(h);return b[h]=S,S}hasLayer(c){for(const h of this.bucketLayerIDs)for(const g of h)if(c===g)return!0;return!1}getId(c,h){let g=c.id;if(this.promoteId){const _=typeof this.promoteId=="string"?this.promoteId:this.promoteId[h];_!=null&&(g=c.properties[_]),typeof g=="boolean"&&(g=Number(g))}return g}}function DW(u,c,h,g,_){return je(u,(b,S)=>{const L=c instanceof ql?c.get(S):null;return L&&L.evaluate?L.evaluate(h,g,_):L})}function Nbe(u,c){return c-u}Pe(kW,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const oD=new Float32Array(262144),h1=new Uint8Array(262144);function UW(u){let c=0;if(u.meshes)for(const h of u.meshes)c=Math.max(c,h.aabb.max[2]);if(u.children)for(const h of u.children)c=Math.max(c,UW(h));return c}function zW(u,c,h){if(u.meshes)for(const g of u.meshes)g.aabb.min[0]!==1/0&&h.insert(c,g.aabb.min[0],g.aabb.min[1],g.aabb.max[0],g.aabb.max[1]);if(u.children)for(const g of u.children)zW(g,c,h)}const $W=["","wall","door","roof","window","lamp","logo"];class VW{constructor(c){this.node=c,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:c.id,geometry:[],properties:{height:UW(c)}}}getLocalBounds(){if(!this.node.meshes)return new ga([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let c=0;const h=new ga([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const g of this.node.meshes)this.node.lightMeshIndex!==c&&h.encapsulate(g.aabb),c++;this.aabb=h}return this.aabb}}class $L{constructor(c,h,g,_,b,S){this.id=h,this.modelTraits|=zw.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=zw.HasMapboxMeshFeatures),_&&(this.modelTraits|=zw.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=b,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const L of c)this.nodesInfo.push(new VW(L)),zW(L,S.featureIndexArray.length,S.grid),S.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,S.bucketLayerIDs.length-1,0)}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(c){if(!this.needsUpload)return;const h=this.getNodesInfo();for(const g of h){const _=g.node;this.uploaded?this.updatePbrBuffer(_):Jk(_,c,!0)}for(const g of h)NL(g.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(c){let h=!1;if(!c.meshes)return h;for(const g of c.meshes)g.pbrBuffer&&(g.pbrBuffer.updateData(g.featureArray),h=!0);return h}needsReEvaluation(c,h,g){const _=c.transform.projectionOptions,b=c.style.getBrightness(),S=this.brightness!==b;return!!(!this.uploaded||this.dirty||_.name!==this.projection.name||TS(g.paint.get("model-color").value,S)||TS(g.paint.get("model-color-mix-intensity").value,S)||TS(g.paint.get("model-roughness").value,S)||TS(g.paint.get("model-emissive-strength").value,S)||TS(g.paint.get("model-height-based-emissive-strength-multiplier").value,S))&&(this.projection=_,this.brightness=b,!0)}evaluateScale(c,h){if(c.transform.zoom===this.zoom)return;this.zoom=c.transform.zoom;const g=this.getNodesInfo(),_=this.id.canonical;for(const b of g){const S=b.feature;b.evaluatedScale=h.paint.get("model-scale").evaluate(S,{},_)}}evaluate(c){const h=this.getNodesInfo();for(const g of h){if(!g.node.meshes)continue;const _=g.feature,b=g.node.meshes&&g.node.meshes[0].featureData,S=g.evaluatedColor[2],L=g.evaluatedRMEA[2],O=this.id.canonical;if(g.hasTranslucentParts=!1,b){for(let N=0;N<$W.length;N++){const U=$W[N];U.length&&(_.properties.part=U);const j=c.paint.get("model-color").evaluate(_,{},O),X=c.paint.get("model-color-mix-intensity").evaluate(_,{},O);g.evaluatedColor[N]=[j.r,j.g,j.b,X],g.evaluatedRMEA[N][0]=c.paint.get("model-roughness").evaluate(_,{},O),g.evaluatedRMEA[N][2]=c.paint.get("model-emissive-strength").evaluate(_,{},O),g.evaluatedRMEA[N][3]=j.a,g.emissionHeightBasedParams[N]=c.paint.get("model-height-based-emissive-strength-multiplier").evaluate(_,{},O),!g.hasTranslucentParts&&j.a<1&&(g.hasTranslucentParts=!0)}delete _.properties.part,Dbe(g,S!==g.evaluatedColor[2]||L!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=c.paint.get("model-emissive-strength").evaluate(_,{},O);g.evaluatedScale=c.paint.get("model-scale").evaluate(_,{},O),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(c,h,g,_){const b=c.findDEMTileFor(g);if(b&&(b.tileID.canonical!==this.terrainTile||h!==this.terrainExaggeration)){if(b.dem&&b.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=b.tileID.overscaledZ;const S=Mw.create(c,g,b);if(!S)return;this.modelTraits&zw.HasMapboxMeshFeatures&&this.updateDEM(c,S,g,_);for(const L of this.getNodesInfo()){const O=L.node;if(!O.footprint||!O.footprint.vertices||!O.footprint.vertices.length)continue;const N=O.footprint.vertices;let U=S.getElevationAt(N[0].x,N[0].y,!0,!0);for(let j=1;j<N.length;j++)U=Math.min(U,S.getElevationAt(N[j].x,N[j].y,!0,!0));O.elevation=U}}this.terrainTile=b.tileID.canonical,this.terrainExaggeration=h}}updateDEM(c,h,g,_){let b=h._dem._modifiedForSources[_];if(b===void 0&&(h._dem._modifiedForSources[_]=[],b=h._dem._modifiedForSources[_]),b.includes(g.canonical))return;const S=h._dem.dim;b.push(g.canonical);let L=!1;for(const O of this.getNodesInfo()){const N=O.node;if(!N.footprint||!N.footprint.grid)continue;const U=N.footprint.grid,j=h.tileCoordToPixel(U.min.x,U.min.y),X=h.tileCoordToPixel(U.max.x,U.max.y),re=Math.min(Math.min(S-X.y,j.x),Math.min(j.y,S-X.x));if(re<0)continue;const fe=pe(re,2,5);let ge=Math.max(0,j.x-fe),Ce=Math.max(0,j.y-fe),Te=Math.min(X.x+fe,S-1),qe=Math.min(X.y+fe,S-1);for(let dt=Ce;dt<=qe;++dt)for(let Pt=ge;Pt<=Te;++Pt)h1[dt*S+Pt]=255;let tt=0,et=0;for(let dt=0;dt<U.cellsY;++dt)for(let Pt=0;Pt<U.cellsX;++Pt){if(!U.cells[dt*U.cellsX+Pt])continue;const Qt=h.tileCoordToPixel(U.min.x+Pt/U.xScale,U.min.y+dt/U.yScale),Xt=h.tileCoordToPixel(U.min.x+(Pt+1)/U.xScale,U.min.y+(dt+1)/U.yScale);for(let An=Qt.y;An<=Math.min(Xt.y+1,S-1);++An)for(let tn=Qt.x;tn<=Math.min(Xt.x+1,S-1);++tn)h1[An*S+tn]===255&&(h1[An*S+tn]=0,tt+=h.getElevationAtPixel(tn,An),et++)}const vt=tt/et;ge=Math.max(1,j.x-fe),Ce=Math.max(1,j.y-fe),Te=Math.min(X.x+fe,S-2),qe=Math.min(X.y+fe,S-2),L=!0;for(let dt=Ce;dt<=qe;++dt)for(let Pt=ge;Pt<=Te;++Pt)h1[dt*S+Pt]===0&&(oD[dt*S+Pt]=h._dem.set(Pt,dt,vt));for(let dt=1;dt<fe;++dt){ge=Math.max(1,j.x-dt),Ce=Math.max(1,j.y-dt),Te=Math.min(X.x+dt,S-2),qe=Math.min(X.y+dt,S-2);for(let Pt=Ce;Pt<=qe;++Pt)for(let Qt=ge;Qt<=Te;++Qt){const Xt=Pt*S+Qt;if(h1[Xt]===255){let An=0,tn=0,Sn=-1,Dn=-1;for(let wn=-1;wn<=1;++wn)for(let kn=-1;kn<=1;++kn){const yn=(Pt+wn)*S+Qt+kn;if(h1[yn]>=dt)continue;const On=oD[yn],lr=Math.abs(On);lr>tn&&(An=On,tn=lr,Sn=kn,Dn=wn)}if(tn>.1){const wn=1-(dt+.5*Math.abs(Sn*Dn))/fe;let kn=h._dem.get(Qt,Pt)+An*wn;const yn=h._dem.get(Qt+Sn,Pt+Dn),On=h._dem.get(Qt-Sn,Pt-Dn,!0);(kn-yn)*(kn-On)>0&&(kn=(yn+On)/2),oD[Xt]=h._dem.set(Qt,Pt,kn),h1[Xt]=dt}}}}}L&&(h._demTile.needsDEMTextureUpload=!0,h._dem._timestamp=St.now())}getNodesInfo(){return this.nodesInfo}destroy(){const c=this.getNodesInfo();for(const h of c)NL(h.node),eD(h.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(c,h){if(h.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=h.updateTime;const g=h.getReplacementRegionsForTile(c.toUnwrapped()),_=this.getNodesInfo();for(let b=0;b<this.nodesInfo.length;b++){const S=_[b].node;_[b].hiddenByReplacement=!!S.footprint&&!g.find(L=>L.footprint===S.footprint)}}getHeightAtTileCoord(c,h){const g=this.getNodesInfo(),_=[];for(let b=0;b<this.nodesInfo.length;b++){const S=g[b],L=S.node.meshes[0];if(c<L.aabb.min[0]||h<L.aabb.min[1]||c>L.aabb.max[0]||h>L.aabb.max[1])continue;const O=(c-L.aabb.min[0])/(L.aabb.max[0]-L.aabb.min[0])*c1|0,N=Math.min(63,(h-L.aabb.min[1])/(L.aabb.max[1]-L.aabb.min[1])*c1|0)*c1+Math.min(63,O);if(!(L.heightmap[N]<0&&S.node.footprint))return S.hiddenByReplacement?void 0:{height:L.heightmap[N],maxHeight:S.feature.properties.height,hidden:!1,verticalScale:S.evaluatedScale[2]};if(S.node.footprint.grid.query(new W(c,h),new W(c,h),_),_.length>0)return{height:void 0,maxHeight:S.feature.properties.height,hidden:S.hiddenByReplacement,verticalScale:S.evaluatedScale[2]}}}}function TS(u,c){return!u.isLightConstant&&c}function kbe(u,c,h,g,_,b,S,L){let O=(61440&c|(61440&c)>>4)>>8,N=(3840&c|(3840&c)>>4)>>4,U=240&c|(240&c)>>4;h[3]>0&&(O=Qi(O,255*h[0],h[3]),N=Qi(N,255*h[1],h[3]),U=Qi(U,255*h[2],h[3]));const j=O<<8|N,X=U<<8|Math.floor(255*g[3]),re=function(dt){const Pt=pe(dt,0,2);return Math.min(Math.round(.5*Pt*255),255)}(g[2])<<8|15*g[0]<<4|15*g[1],fe=pe(_[0],0,1),ge=pe(_[1],0,1),Ce=pe(_[2],0,1),Te=pe(_[3],0,1);let qe,tt,et,vt;if(fe!==ge&&S!==b&&ge!==fe){const dt=S-b;tt=1/(dt*(ge-fe)),et=-(b+dt*fe)/(dt*(ge-fe));const Pt=pe(_[4],-1,1);vt=Math.pow(10,Pt),qe=255*Ce<<8|255*Te}else qe=65535,tt=0,et=1,vt=1;if(u.emplaceBack(j,X,re,qe,tt,et,vt),L){const dt=L.length;L.clear();for(let Pt=0;Pt<dt;Pt++)L.emplaceBack(j,X,re,qe,tt,et,vt)}}function Dbe(u,c,h){const g=u.node;let _=0;const b=h&zw.HasMeshoptCompression;for(const S of g.meshes){if(g.lights&&g.lightMeshIndex===_||!S.featureData)continue;S.featureArray=new ff,S.featureArray.reserve(S.featureData.length);let L=c;for(const O of S.featureData){const N=b?65535&O:O>>16&65535,U=b?O>>16&65535:65535&O,j=(15&U)<8?15&U:0,X=u.evaluatedRMEA[j],re=u.evaluatedColor[j],fe=u.emissionHeightBasedParams[j];let ge;if(L&&j===2&&g.lights&&(ge=new ff,ge.resize(10*g.lights.length)),kbe(S.featureArray,N,re,X,fe,S.aabb.min[2],S.aabb.max[2],ge),ge&&L){L=!1;const Ce=g.meshes[g.lightMeshIndex];Ce.featureArray=ge,Ce.featureArray._trim()}}S.featureArray._trim(),_++}}function HW(u,c,h,g){const _=1<<u.z;c.lat=ms((g/zn+u.y)/_),c.lng=Bi((h/zn+u.x)/_)}Pe($L,"Tiled3dModelBucket",{omit:["layers"]}),Pe(VW,"Tiled3dModelFeature");const Ube={circle:class extends Yl{constructor(u,c,h){super(u,Lye,c,h)}createBucket(u){return new nh(u)}queryRadius(u){const c=u;return Tw("circle-radius",this,c)+Tw("circle-stroke-width",this,c)+WM(this.paint.get("circle-translate"))}queryIntersectsFeature(u,c,h,g,_,b,S,L){const O=oj(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),N=this.paint.get("circle-radius").evaluate(c,h)+this.paint.get("circle-stroke-width").evaluate(c,h);return P9(u,g,b,S,L,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",O,N)}getProgramIds(){return["circle"]}getDefaultProgramParams(u,c){const h=R9(this);return{config:new we(this,c),defines:h,overrideFog:!1}}},heatmap:class extends Yl{createBucket(u){return new O9(u)}constructor(u,c,h){super(u,l_e,c,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=oS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(u){return Tw("heatmap-radius",this,u)}queryIntersectsFeature(u,c,h,g,_,b,S,L){const O=this.paint.get("heatmap-radius").evaluate(c,h);return P9(u,g,b,S,L,!0,!0,new W(0,0),O)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(u,c){return u==="heatmap"?{config:new we(this,c),overrideFog:!1}:{}}},hillshade:class extends Yl{constructor(u,c,h){super(u,u_e,c,h)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(u,c){return{overrideFog:!1}}},fill:class extends Yl{constructor(u,c,h){super(u,C_e,c,h)}getProgramIds(){const u=this.paint.get("fill-pattern"),c=u&&u.constantOr(1),h=[c?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&h.push(c&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),h}getDefaultProgramParams(u,c){return{config:new we(this,c),overrideFog:!1}}recalculate(u,c){super.recalculate(u,c);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Lk(u)}queryRadius(){return WM(this.paint.get("fill-translate"))}queryIntersectsFeature(u,c,h,g,_,b){return!u.queryGeometry.isAboveHorizon&&nv(sj(u.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),g)}isTileClipped(){return!0}},"fill-extrusion":class extends Yl{constructor(u,c,h){super(u,Z_e,c,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new pL(u)}queryRadius(){return WM(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(u,c,h,g,_,b,S,L,O){const N=oj(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),U=this.paint.get("fill-extrusion-height").evaluate(c,h),j=this.paint.get("fill-extrusion-base").evaluate(c,h),X=[0,0],re=L&&b.elevation,fe=b.elevation?b.elevation.exaggeration():1,ge=u.tile.getBucket(this);if(re&&ge instanceof pL){const et=ge.centroidVertexArray,vt=O+1;vt<et.length&&(X[0]=et.geta_centroid_pos0(vt),X[1]=et.geta_centroid_pos1(vt))}if(X[0]===0&&X[1]===1)return!1;b.projection.name==="globe"&&(g=gK([g],[new W(0,0),new W(zn,zn)],u.tileID.canonical).map(et=>et.polygon).flat());const Ce=re?L:null,[Te,qe]=function(et,vt,dt,Pt,Qt,Xt,An,tn,Sn,Dn,wn){return et.projection.name==="globe"?function(kn,yn,On,lr,Un,Or,Er,qn,oi,Kr,Pr){const Yn=[],ti=[],Wi=kn.projection.upVectorScale(Pr,kn.center.lat,kn.worldSize).metersToTile,ai=[0,0,0,1],qi=[0,0,0,1],Ei=(Ri,vo,Ns,Us)=>{Ri[0]=vo,Ri[1]=Ns,Ri[2]=Us,Ri[3]=1},ps=AK();On>0&&(On+=ps),lr+=ps;for(const Ri of yn){const vo=[],Ns=[];for(const Us of Ri){const Ws=Us.x+Un.x,ks=Us.y+Un.y,Yo=kn.projection.projectTilePoint(Ws,ks,Pr),so=kn.projection.upVector(Pr,Us.x,Us.y);let Sa=On,_l=lr;if(Er){const Lc=vK(Ws,ks,On,lr,Er,qn,oi,Kr);Sa+=Lc.base,_l+=Lc.top}On!==0?Ei(ai,Yo.x+so[0]*Wi*Sa,Yo.y+so[1]*Wi*Sa,Yo.z+so[2]*Wi*Sa):Ei(ai,Yo.x,Yo.y,Yo.z),Ei(qi,Yo.x+so[0]*Wi*_l,Yo.y+so[1]*Wi*_l,Yo.z+so[2]*Wi*_l),o.N.transformMat4(ai,ai,Or),o.N.transformMat4(qi,qi,Or),vo.push(new Lw(ai[0],ai[1],ai[2])),Ns.push(new Lw(qi[0],qi[1],qi[2]))}Yn.push(vo),ti.push(Ns)}return[Yn,ti]}(et,vt,dt,Pt,Qt,Xt,An,tn,Sn,Dn,wn):An?function(kn,yn,On,lr,Un,Or,Er,qn,oi){const Kr=[],Pr=[],Yn=[0,0,0,1];for(const ti of kn){const Wi=[],ai=[];for(const qi of ti){const Ei=qi.x+lr.x,ps=qi.y+lr.y,Ri=vK(Ei,ps,yn,On,Or,Er,qn,oi);Yn[0]=Ei,Yn[1]=ps,Yn[2]=Ri.base,Yn[3]=1,o.a7.transformMat4(Yn,Yn,Un),Yn[3]=Math.max(Yn[3],1e-5);const vo=new Lw(Yn[0]/Yn[3],Yn[1]/Yn[3],Yn[2]/Yn[3]);Yn[0]=Ei,Yn[1]=ps,Yn[2]=Ri.top,Yn[3]=1,o.a7.transformMat4(Yn,Yn,Un),Yn[3]=Math.max(Yn[3],1e-5);const Ns=new Lw(Yn[0]/Yn[3],Yn[1]/Yn[3],Yn[2]/Yn[3]);Wi.push(vo),ai.push(Ns)}Kr.push(Wi),Pr.push(ai)}return[Kr,Pr]}(vt,dt,Pt,Qt,Xt,An,tn,Sn,Dn):function(kn,yn,On,lr,Un){const Or=[],Er=[],qn=Un[8]*yn,oi=Un[9]*yn,Kr=Un[10]*yn,Pr=Un[11]*yn,Yn=Un[8]*On,ti=Un[9]*On,Wi=Un[10]*On,ai=Un[11]*On;for(const qi of kn){const Ei=[],ps=[];for(const Ri of qi){const vo=Ri.x+lr.x,Ns=Ri.y+lr.y,Us=Un[0]*vo+Un[4]*Ns+Un[12],Ws=Un[1]*vo+Un[5]*Ns+Un[13],ks=Un[2]*vo+Un[6]*Ns+Un[14],Yo=Un[3]*vo+Un[7]*Ns+Un[15],so=Us+qn,Sa=Ws+oi,_l=ks+Kr,Lc=Math.max(Yo+Pr,1e-5),zo=Us+Yn,oa=Ws+ti,Jl=ks+Wi,ec=Math.max(Yo+ai,1e-5);Ei.push(new Lw(so/Lc,Sa/Lc,_l/Lc)),ps.push(new Lw(zo/ec,oa/ec,Jl/ec))}Or.push(Ei),Er.push(ps)}return[Or,Er]}(vt,dt,Pt,Qt,Xt)}(b,g,j,U,N,S,Ce,X,fe,b.center.lat,u.tileID.canonical),tt=u.queryGeometry;return function(et,vt,dt){let Pt=1/0;nv(dt,vt)&&(Pt=mK(dt,vt[0]));for(let Qt=0;Qt<vt.length;Qt++){const Xt=vt[Qt],An=et[Qt];for(let tn=0;tn<Xt.length-1;tn++){const Sn=Xt[tn],Dn=[Sn,Xt[tn+1],An[tn+1],An[tn],Sn];tp(dt,Dn)&&(Pt=Math.min(Pt,mK(dt,Dn)))}}return Pt!==1/0&&Pt}(Te,qe,tt.isPointQuery()?tt.screenBounds:tt.screenGeometry)}},line:class extends Yl{constructor(u,c,h){super(u,_K,c,h),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const c=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=c._styleExpression&&c._styleExpression.expression instanceof Sc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(u,c){super.recalculate(u,c),this.paint._values["line-floorwidth"]=SK.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Fk(u)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(u,c){const h=CK(this);return{config:new we(this,c),defines:h,overrideFog:!1}}queryRadius(u){const c=u,h=TK(Tw("line-width",this,c),Tw("line-gap-width",this,c)),g=Tw("line-offset",this,c);return h/2+Math.abs(g)+WM(this.paint.get("line-translate"))}queryIntersectsFeature(u,c,h,g,_,b){if(u.queryGeometry.isAboveHorizon)return!1;const S=sj(u.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,u.pixelToTileUnitsFactor),L=u.pixelToTileUnitsFactor/2*TK(this.paint.get("line-width").evaluate(c,h),this.paint.get("line-gap-width").evaluate(c,h)),O=this.paint.get("line-offset").evaluate(c,h);return O&&(g=function(N,U){const j=[],X=new W(0,0);for(let re=0;re<N.length;re++){const fe=N[re],ge=[];for(let Ce=0;Ce<fe.length;Ce++){const Te=fe[Ce],qe=fe[Ce+1],tt=Ce===0?X:Te.sub(fe[Ce-1])._unit()._perp(),et=Ce===fe.length-1?X:qe.sub(Te)._unit()._perp(),vt=tt._add(et)._unit();vt._mult(1/(vt.x*et.x+vt.y*et.y)),ge.push(vt._mult(U)._add(Te))}j.push(ge)}return j}(g,O*u.pixelToTileUnitsFactor)),function(N,U,j){for(let X=0;X<U.length;X++){const re=U[X];if(N.length>=3){for(let fe=0;fe<re.length;fe++)if(sA(N,re[fe]))return!0}if(r1(N,re,j))return!0}return!1}(S,g,L)}isTileClipped(){return!0}},symbol:ML,background:class extends Yl{constructor(u,c,h){super(u,tbe,c,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(u,c){return{overrideFog:!1}}},raster:dW,"raster-particle":fW,sky:class extends Yl{constructor(u,c,h){super(u,cbe,c,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="sky-gradient"?this._updateColorRamp():u!=="sky-atmosphere-sun"&&u!=="sky-atmosphere-halo-color"&&u!=="sky-atmosphere-color"&&u!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=oS({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(u){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const c=u.style.light.properties.get("position");return this._lightPosition.azimuthal!==c.azimuthal||this._lightPosition.polar!==c.polar}return!1}getCenter(u,c){if(this.paint.get("sky-type")==="atmosphere"){const g=this.paint.get("sky-atmosphere-sun"),_=!g,b=u.style.light,S=b.properties.get("position");return _&&b.properties.get("anchor")==="viewport"&&Ye("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),_?Yk(S.azimuthal,90-S.polar,c):Yk(g[0],90-g[1],c)}const h=this.paint.get("sky-gradient-center");return Yk(h[0],90-h[1],c)}isSky(){return!0}markSkyboxValid(u){this._skyboxInvalidated=!1,this._lightPosition=u.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const u=this.paint.get("sky-type");return u==="atmosphere"?["skyboxCapture","skybox"]:u==="gradient"?["skyboxGradient"]:null}},slot:class extends Yl{constructor(u,c,h){super(u,ube,c)}},model:class extends Yl{constructor(u,c,h){super(u,ybe,c,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(u){return new Zk(u)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(u){return u instanceof $L?zn-1:0}queryIntersectsFeature(u,c,h,g,_,b){if(!this.modelManager)return!1;const S=this.modelManager,L=u.tile.getBucket(this);if(!(L&&L instanceof Zk))return!1;const O=L;for(const N in O.instancesPerModel){const U=O.instancesPerModel[N];if(U.idToFeaturesIndex.hasOwnProperty(c.id)){const j=U.features[U.idToFeaturesIndex[c.id]],X=S.getModel(N,this.scope);if(!X)return!1;let re=o.a6.create();const fe=new Yt(0,0),ge=O.canonical;let Ce=Number.MAX_VALUE;for(let Te=0;Te<j.instancedDataCount;++Te){const qe=16*(j.instancedDataOffset+Te),tt=U.instancedDataArray.float32,et=[tt[qe+4],tt[qe+5],tt[qe+6]];HW(ge,fe,tt[qe],0|tt[qe+1]),wW(re,X,b,fe,j.rotation,j.scale,et,!1,!1,!1),b.projection.name==="globe"&&(re=Xk(re,b));const vt=o.a6.multiply([],b.projMatrix,re),dt=u.queryGeometry,Pt=yW(dt.isPointQuery()?dt.screenBounds:dt.screenGeometry,b,vt,X.aabb);Pt!=null&&(Ce=Math.min(Pt,Ce))}return Ce!==Number.MAX_VALUE&&Ce}}return!1}_handleOverridablePaintPropertyUpdate(u,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven()||u!=="model-color"&&u!=="model-color-mix-intensity"&&u!=="model-rotation"&&u!=="model-scale"&&u!=="model-translation"&&u!=="model-emissive-strength")}_isPropertyZoomDependent(u){const c=this._transitionablePaint._values[u];return c!=null&&c.value!=null&&c.value.expression!=null&&c.value.expression instanceof mg}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(u,c,h,g){const _=u.tile,b=_.getBucket(this);let S=null,L=Number.MAX_VALUE;if(!(b&&b instanceof $L))return{queryFeature:S,intersectionZ:L};const O=b.getNodesInfo()[c];if(O.hiddenByReplacement||!O.node.meshes||!h.filter(new $i(_.tileID.overscaledZ),O.feature,_.tileID.canonical))return{queryFeature:S,intersectionZ:L};const N=O.node,U=g.calculatePosMatrix(_.tileID.toUnwrapped(),g.worldSize),j=O.evaluatedScale;let X=0;g.elevation&&N.elevation&&(X=N.elevation*g.elevation.exaggeration()),o.a6.translate(U,U,[(N.anchor?N.anchor[0]:0)*(j[0]-1),(N.anchor?N.anchor[1]:0)*(j[1]-1),X]),o.a6.scale(U,U,j),o.a6.multiply(U,U,N.matrix);const re=u.queryGeometry,fe=re.isPointQuery()?re.screenBounds:re.screenGeometry,ge=function(Te){const qe=o.a6.multiply([],U,Te.matrix),tt=o.a6.multiply(qe,g.expandedFarZProjMatrix,qe);for(let et=0;et<Te.meshes.length;++et){const vt=Te.meshes[et];if(et===Te.lightMeshIndex)continue;const dt=yW(fe,g,tt,vt.aabb);dt!=null&&(L=Math.min(dt,L))}if(Te.children)for(const et of Te.children)ge(et)};if(ge(N),L===Number.MAX_VALUE)return{queryFeature:S,intersectionZ:L};const Ce=new Yt(0,0);return HW(_.tileID.canonical,Ce,O.node.anchor[0],O.node.anchor[1]),S={type:"Feature",geometry:{type:"Point",coordinates:[Ce.lng,Ce.lat]},properties:O.feature.properties,id:O.feature.id,state:{},layer:this.serialize()},{queryFeature:S,intersectionZ:L}}}},ki={read:function(u,c){return u.readFields(ki._readField,{header_length:0,x:0,y:0,z:0,layers:[]},c)},_readField:function(u,c,h){u===1?c.header_length=h.readFixed32():u===2?c.x=h.readVarint():u===3?c.y=h.readVarint():u===4?c.z=h.readVarint():u===5&&c.layers.push(ki.Layer.read(h,h.readVarint()+h.pos))},PixelFormat:{PIXEL_FORMAT_UNKNOWN:{value:0,options:{}},PIXEL_FORMAT_UINT32:{value:1,options:{}},PIXEL_FORMAT_UINT16:{value:2,options:{}},PIXEL_FORMAT_UINT8:{value:3,options:{}}},Filter:{}};ki.Filter.read=function(u,c){return u.readFields(ki.Filter._readField,{delta_filter:null,filter:null,zigzag_filter:null,bitshuffle_filter:null,byteshuffle_filter:null},c)},ki.Filter._readField=function(u,c,h){u===1?(c.delta_filter=ki.Filter.Delta.read(h,h.readVarint()+h.pos),c.filter="delta_filter"):u===2?(c.zigzag_filter=ki.Filter.Zigzag.read(h,h.readVarint()+h.pos),c.filter="zigzag_filter"):u===3?(c.bitshuffle_filter=ki.Filter.BitShuffle.read(h,h.readVarint()+h.pos),c.filter="bitshuffle_filter"):u===4&&(c.byteshuffle_filter=ki.Filter.ByteShuffle.read(h,h.readVarint()+h.pos),c.filter="byteshuffle_filter")},ki.Filter.Delta={},ki.Filter.Delta.read=function(u,c){return u.readFields(ki.Filter.Delta._readField,{block_size:0},c)},ki.Filter.Delta._readField=function(u,c,h){u===1&&(c.block_size=h.readVarint())},ki.Filter.Zigzag={},ki.Filter.Zigzag.read=function(u,c){return u.readFields(ki.Filter.Zigzag._readField,{},c)},ki.Filter.Zigzag._readField=function(u,c,h){},ki.Filter.BitShuffle={},ki.Filter.BitShuffle.read=function(u,c){return u.readFields(ki.Filter.BitShuffle._readField,{},c)},ki.Filter.BitShuffle._readField=function(u,c,h){},ki.Filter.ByteShuffle={},ki.Filter.ByteShuffle.read=function(u,c){return u.readFields(ki.Filter.ByteShuffle._readField,{},c)},ki.Filter.ByteShuffle._readField=function(u,c,h){},ki.Codec={},ki.Codec.read=function(u,c){return u.readFields(ki.Codec._readField,{gzip_data:null,codec:null,jpeg_image:null,webp_image:null,png_image:null},c)},ki.Codec._readField=function(u,c,h){u===1?(c.gzip_data=ki.Codec.GzipData.read(h,h.readVarint()+h.pos),c.codec="gzip_data"):u===2?(c.jpeg_image=ki.Codec.JpegImage.read(h,h.readVarint()+h.pos),c.codec="jpeg_image"):u===3?(c.webp_image=ki.Codec.WebpImage.read(h,h.readVarint()+h.pos),c.codec="webp_image"):u===4&&(c.png_image=ki.Codec.PngImage.read(h,h.readVarint()+h.pos),c.codec="png_image")},ki.Codec.GzipData={},ki.Codec.GzipData.read=function(u,c){return u.readFields(ki.Codec.GzipData._readField,{},c)},ki.Codec.GzipData._readField=function(u,c,h){},ki.Codec.JpegImage={},ki.Codec.JpegImage.read=function(u,c){return u.readFields(ki.Codec.JpegImage._readField,{},c)},ki.Codec.JpegImage._readField=function(u,c,h){},ki.Codec.WebpImage={},ki.Codec.WebpImage.read=function(u,c){return u.readFields(ki.Codec.WebpImage._readField,{},c)},ki.Codec.WebpImage._readField=function(u,c,h){},ki.Codec.PngImage={},ki.Codec.PngImage.read=function(u,c){return u.readFields(ki.Codec.PngImage._readField,{},c)},ki.Codec.PngImage._readField=function(u,c,h){},ki.DataIndexEntry={},ki.DataIndexEntry.read=function(u,c){return u.readFields(ki.DataIndexEntry._readField,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},c)},ki.DataIndexEntry._readField=function(u,c,h){u===1?c.first_byte=h.readFixed64():u===2?c.last_byte=h.readFixed64():u===3?c.filters.push(ki.Filter.read(h,h.readVarint()+h.pos)):u===4?c.codec=ki.Codec.read(h,h.readVarint()+h.pos):u===5?c.offset=h.readFloat():u===6?c.scale=h.readFloat():u===7&&c.bands.push(h.readString())},ki.Layer={},ki.Layer.read=function(u,c){return u.readFields(ki.Layer._readField,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},c)},ki.Layer._readField=function(u,c,h){u===1?c.version=h.readVarint():u===2?c.name=h.readString():u===3?c.units=h.readString():u===4?c.tilesize=h.readVarint():u===5?c.buffer=h.readVarint():u===6?c.pixel_format=h.readVarint():u===7&&c.data_index.push(ki.DataIndexEntry.read(h,h.readVarint()+h.pos))};const hA={read:function(u,c){return u.readFields(hA._readField,{uint32_values:null,values:null,fixed32_values:null},c)},_readField:function(u,c,h){u===2?(c.uint32_values=hA.Uint32Values.read(h,h.readVarint()+h.pos),c.values="uint32_values"):u===3&&(c.fixed32_values=hA.Fixed32Values.read(h,h.readVarint()+h.pos),c.values="fixed32_values")},Uint32Values:{}};hA.Uint32Values.read=function(u,c){return u.readFields(hA.Uint32Values._readField,{values:[]},c)},hA.Uint32Values._readField=function(u,c,h){u===1&&(c.readValuesInto=function(g){if(g.type!==2)throw new Error(`Unsupported pbf type "${g.type}"`);const _=function(S){return S.type===2?S.readVarint()+S.pos:S.pos+1}(g),b=g.pos;return g.pos=_,function(S){g.pos=b;let L=0;for(;g.pos<_;){const O=g.readVarint();S[L++]=O}return S}}(h))},hA.Fixed32Values={},hA.Fixed32Values.read=function(u,c){return u.readFields(hA.Fixed32Values._readField,{values:[]},c)},hA.Fixed32Values._readField=function(u,c,h){throw new Error("Not implemented")};/**
 * tiny-lru
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.2.5
 */class zbe{constructor(c=0,h=0,g=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=c,this.resetTtl=g,this.size=0,this.ttl=h}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(c){if(this.has(c)){const h=this.items[c];delete this.items[c],this.size--,h.prev!==null&&(h.prev.next=h.next),h.next!==null&&(h.next.prev=h.prev),this.first===h&&(this.first=h.next),this.last===h&&(this.last=h.prev)}return this}entries(c=this.keys()){return c.map(h=>[h,this.get(h)])}evict(c=!1){if(c||this.size>0){const h=this.first;delete this.items[h.key],--this.size==0?(this.first=null,this.last=null):(this.first=h.next,this.first.prev=null)}return this}expiresAt(c){let h;return this.has(c)&&(h=this.items[c].expiry),h}get(c){let h;if(this.has(c)){const g=this.items[c];this.ttl>0&&g.expiry<=Date.now()?this.delete(c):(h=g.value,this.set(c,h,!0))}return h}has(c){return c in this.items}keys(){const c=[];let h=this.first;for(;h!==null;)c.push(h.key),h=h.next;return c}set(c,h,g=!1,_=this.resetTtl){let b;if(g||this.has(c)){if(b=this.items[c],b.value=h,g===!1&&_&&(b.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==b){const S=this.last,L=b.next,O=b.prev;this.first===b&&(this.first=b.next),b.next=null,b.prev=this.last,S.next=b,O!==null&&(O.next=L),L!==null&&(L.prev=O)}}else this.max>0&&this.size===this.max&&this.evict(!0),b=this.items[c]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:c,prev:this.last,next:null,value:h},++this.size==1?this.first=b:this.last.next=b;return this.last=b,this}values(c=this.keys()){return c.map(h=>this.get(h))}}function $be(u,c){if(c.length!==4)throw new Error(`Expected data of dimension 4 but got ${c.length}.`);let h=c[3];for(let g=2;g>=1;g--){const _=g===1?1:0,b=g===2?1:0;for(let S=0;S<c[0];S++){const L=c[1]*S;for(let O=_;O<c[1];O++){const N=c[2]*(O+L);for(let U=b;U<c[2];U++){const j=c[3]*(U+N);for(let X=0;X<c[3];X++){const re=j+X;u[re]+=u[re-h]}}}}h*=c[g]}return u}function Vbe(u){for(let c=0,h=u.length;c<h;c++)u[c]=u[c]>>>1^-(1&u[c]);return u}function Hbe(u,c){switch(c){case"uint32":return u;case"uint16":for(let h=0;h<u.length;h+=2){const g=u[h],_=u[h+1];u[h]=(240&g)>>4|(61440&g)>>8|(240&_)<<4|61440&_,u[h+1]=15&g|(3840&g)>>4|(15&_)<<8|(3840&_)<<4}return u;case"uint8":for(let h=0;h<u.length;h+=4){const g=u[h],_=u[h+1],b=u[h+2],S=u[h+3];u[h+0]=(192&g)>>6|(192&_)>>4|(192&b)>>2|192&S,u[h+1]=(48&g)>>4|(48&_)>>2|48&b|(48&S)<<2,u[h+2]=(12&g)>>2|12&_|(12&b)<<2|(12&S)<<4,u[h+3]=3&g|(3&_)<<2|(3&b)<<4|(3&S)<<6}return u;default:throw new Error(`Invalid pixel format, "${c}"`)}}class K0 extends Error{constructor(c){super(c),this.name="MRTError"}}var _f=Uint8Array,IS=Uint16Array,Gbe=Int32Array,GW=new _f([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),QW=new _f([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Qbe=new _f([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jW=function(u,c){for(var h=new IS(31),g=0;g<31;++g)h[g]=c+=1<<u[g-1];var _=new Gbe(h[30]);for(g=1;g<30;++g)for(var b=h[g];b<h[g+1];++b)_[b]=b-h[g]<<5|g;return{b:h,r:_}},KW=jW(GW,2),WW=KW.b,jbe=KW.r;WW[28]=258,jbe[258]=28;for(var Kbe=jW(QW,0).b,qW=new IS(32768),rl=0;rl<32768;++rl){var Gw=(43690&rl)>>1|(21845&rl)<<1;qW[rl]=((65280&(Gw=(61680&(Gw=(52428&Gw)>>2|(13107&Gw)<<2))>>4|(3855&Gw)<<4))>>8|(255&Gw)<<8)>>1}var BS=function(u,c,h){for(var g=u.length,_=0,b=new IS(c);_<g;++_)u[_]&&++b[u[_]-1];var S,L=new IS(c);for(_=1;_<c;++_)L[_]=L[_-1]+b[_-1]<<1;{S=new IS(1<<c);var O=15-c;for(_=0;_<g;++_)if(u[_])for(var N=_<<4|u[_],U=c-u[_],j=L[u[_]-1]++<<U,X=j|(1<<U)-1;j<=X;++j)S[qW[j]>>O]=N}return S},MS=new _f(288);for(rl=0;rl<144;++rl)MS[rl]=8;for(rl=144;rl<256;++rl)MS[rl]=9;for(rl=256;rl<280;++rl)MS[rl]=7;for(rl=280;rl<288;++rl)MS[rl]=8;var YW=new _f(32);for(rl=0;rl<32;++rl)YW[rl]=5;var Wbe=BS(MS,9),qbe=BS(YW,5),aD=function(u){for(var c=u[0],h=1;h<u.length;++h)u[h]>c&&(c=u[h]);return c},dA=function(u,c,h){var g=c/8|0;return(u[g]|u[g+1]<<8)>>(7&c)&h},lD=function(u,c){var h=c/8|0;return(u[h]|u[h+1]<<8|u[h+2]<<16)>>(7&c)},Ybe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fA=function(u,c,h){var g=new Error(c||Ybe[u]);if(g.code=u,Error.captureStackTrace&&Error.captureStackTrace(g,fA),!h)throw g;return g},Xbe=new _f(0),Zbe=typeof TextDecoder<"u"&&new TextDecoder;try{Zbe.decode(Xbe,{stream:!0})}catch{}const Jbe={gzip_data:"gzip"},ewe={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},twe={uint32:1,uint16:2,uint8:4},nwe={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class XW{constructor(c=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=c}getLayer(c){return this.layers[c]}getHeaderLength(c){const h=new Uint8Array(c),g=new DataView(c);if(h[0]!==13)throw new K0("File is not a valid MRT.");return g.getUint32(1,!0)}parseHeader(c){const h=new Uint8Array(c),g=this.getHeaderLength(c);if(h.length<g)throw new K0(`Expected header with length >= ${g} but got buffer of length ${h.length}`);const _=new Ow(h.subarray(0,g)),b=ki.read(_);if(!isNaN(this.x)&&(this.x!==b.x||this.y!==b.y||this.z!==b.z))throw new K0(`Invalid attempt to parse header ${b.z}/${b.x}/${b.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=b.x,this.y=b.y,this.z=b.z;for(const S of b.layers)this.layers[S.name]=new rwe(S,{cacheSize:this._cacheSize});return this}createDecodingTask(c){const h=[],g=this.getLayer(c.layerName);for(let _=0;_<g.dataIndex.length;_++){const b=g.dataIndex[_],S=b.first_byte-c.firstByte,L=b.last_byte+1-c.firstByte;if(_<c.firstBlock||_>c.lastBlock||g._blocksInProgress.has(_))continue;const O={layerName:g.name,firstByte:S,lastByte:L,pixelFormat:g.pixelFormat,blockIndex:_,blockShape:[b.bands.length].concat(g.bandShape),buffer:g.buffer,codec:b.codec.codec,filters:b.filters.map(N=>N.filter)};g._blocksInProgress.add(_),h.push(O)}return new ZW(h,()=>{h.forEach(_=>g._blocksInProgress.delete(_.blockIndex))},(_,b)=>{if(h.forEach(S=>g._blocksInProgress.delete(S.blockIndex)),_)throw _;b.forEach(S=>{this.getLayer(S.layerName).processDecodedData(S)})})}}class rwe{constructor({version:c,name:h,units:g,tilesize:_,pixel_format:b,buffer:S,data_index:L},O){if(this.version=c,this.version!==1)throw new K0(`Cannot parse raster layer encoded with MRT version ${c}`);this.name=h,this.units=g,this.tileSize=_,this.buffer=S,this.pixelFormat=ewe[b],this.dataIndex=L,this.bandShape=[_+2*S,_+2*S,twe[this.pixelFormat]],this._decodedBlocks=function(N=1e3,U=0,j=!1){if(isNaN(N)||N<0)throw new TypeError("Invalid max value");if(isNaN(U)||U<0)throw new TypeError("Invalid ttl value");if(typeof j!="boolean")throw new TypeError("Invalid resetTtl value");return new zbe(N,U,j)}(O?O.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(c){const h=c.blockIndex.toString();this._decodedBlocks.get(h)||this._decodedBlocks.set(h,c.data)}getBlockForBand(c){let h=0;switch(typeof c){case"string":for(const[g,_]of this.dataIndex.entries()){for(const[b,S]of _.bands.entries())if(S===c)return{bandIndex:h+b,blockIndex:g,blockBandIndex:b};h+=_.bands.length}break;case"number":for(const[g,_]of this.dataIndex.entries()){if(c>=h&&c<h+_.bands.length)return{bandIndex:c,blockIndex:g,blockBandIndex:c-h};h+=_.bands.length}break;default:throw new K0(`Invalid band \`${JSON.stringify(c)}\`. Expected string or integer.`)}throw new K0(`Band not found: ${JSON.stringify(c)}`)}getDataRange(c){let h=1/0,g=-1/0,_=1/0,b=-1/0;for(const S of c){const{blockIndex:L}=this.getBlockForBand(S);if(L<0)throw new K0(`Invalid band: ${JSON.stringify(S)}`);const O=this.dataIndex[L];_=Math.min(_,L),b=Math.max(b,L),h=Math.min(h,O.first_byte),g=Math.max(g,O.last_byte)}return{layerName:this.name,firstByte:h,lastByte:g,firstBlock:_,lastBlock:b}}hasBand(c){const{blockIndex:h}=this.getBlockForBand(c);return h>=0}hasDataForBand(c){const{blockIndex:h}=this.getBlockForBand(c);return h>=0&&!!this._decodedBlocks.get(h.toString())}getBandView(c){const{blockIndex:h,blockBandIndex:g}=this.getBlockForBand(c),_=this._decodedBlocks.get(h.toString());if(!_)throw new K0(`Data for band ${JSON.stringify(c)} of layer "${this.name}" not decoded.`);const b=this.dataIndex[h],S=this.bandShape.reduce((N,U)=>N*U,1),L=g*S,O=_.subarray(L,L+S);return{data:O,bytes:new Uint8Array(O.buffer).subarray(O.byteOffset,O.byteOffset+O.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:b.offset,scale:b.scale}}}class ZW{constructor(c,h,g){this.tasks=c,this._onCancel=h,this._onComplete=g,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(c,h){this._finalized||(this._onComplete(c,h),this._finalized=!0)}}XW.performDecoding=function(u,c){return Promise.all(c.tasks.map(h=>{const{layerName:g,firstByte:_,lastByte:b,pixelFormat:S,blockShape:L,blockIndex:O,filters:N,codec:U}=h,j=new Uint8Array(u).subarray(_,b+1),X=new Uint32Array(L[0]*L[1]*L[2]);let re;if(U!=="gzip_data")throw new Error(`Unhandled codec: ${U}`);return re=function(fe,ge){if(!globalThis.DecompressionStream&&ge==="gzip_data")return Promise.resolve(((tt=function(dt){dt[0]==31&&dt[1]==139&&dt[2]==8||fA(6,"invalid gzip data");var Pt=dt[3],Qt=10;4&Pt&&(Qt+=2+(dt[10]|dt[11]<<8));for(var Xt=(Pt>>3&1)+(Pt>>4&1);Xt>0;Xt-=!dt[Qt++]);return Qt+(2&Pt)}(qe=fe))+8>qe.length&&fA(6,"invalid gzip data"),function(dt,Pt,Qt,Xt){var An=dt.length;if(!An||Pt.f&&!Pt.l)return Qt||new _f(0);var tn=!Qt,Sn=tn||Pt.i!=2,Dn=Pt.i;tn&&(Qt=new _f(3*An));var wn=function(rh){var ud=Qt.length;if(rh>ud){var bf=new _f(Math.max(2*ud,rh));bf.set(Qt),Qt=bf}},kn=Pt.f||0,yn=Pt.p||0,On=Pt.b||0,lr=Pt.l,Un=Pt.d,Or=Pt.m,Er=Pt.n,qn=8*An;do{if(!lr){kn=dA(dt,yn,1);var oi=dA(dt,yn+1,3);if(yn+=3,!oi){var Kr=dt[(Ns=4+((yn+7)/8|0))-4]|dt[Ns-3]<<8,Pr=Ns+Kr;if(Pr>An){Dn&&fA(0);break}Sn&&wn(On+Kr),Qt.set(dt.subarray(Ns,Pr),On),Pt.b=On+=Kr,Pt.p=yn=8*Pr,Pt.f=kn;continue}if(oi==1)lr=Wbe,Un=qbe,Or=9,Er=5;else if(oi==2){var Yn=dA(dt,yn,31)+257,ti=dA(dt,yn+10,15)+4,Wi=Yn+dA(dt,yn+5,31)+1;yn+=14;for(var ai=new _f(Wi),qi=new _f(19),Ei=0;Ei<ti;++Ei)qi[Qbe[Ei]]=dA(dt,yn+3*Ei,7);yn+=3*ti;var ps=aD(qi),Ri=(1<<ps)-1,vo=BS(qi,ps);for(Ei=0;Ei<Wi;){var Ns,Us=vo[dA(dt,yn,Ri)];if(yn+=15&Us,(Ns=Us>>4)<16)ai[Ei++]=Ns;else{var Ws=0,ks=0;for(Ns==16?(ks=3+dA(dt,yn,3),yn+=2,Ws=ai[Ei-1]):Ns==17?(ks=3+dA(dt,yn,7),yn+=3):Ns==18&&(ks=11+dA(dt,yn,127),yn+=7);ks--;)ai[Ei++]=Ws}}var Yo=ai.subarray(0,Yn),so=ai.subarray(Yn);Or=aD(Yo),Er=aD(so),lr=BS(Yo,Or),Un=BS(so,Er)}else fA(1);if(yn>qn){Dn&&fA(0);break}}Sn&&wn(On+131072);for(var Sa=(1<<Or)-1,_l=(1<<Er)-1,Lc=yn;;Lc=yn){var zo=(Ws=lr[lD(dt,yn)&Sa])>>4;if((yn+=15&Ws)>qn){Dn&&fA(0);break}if(Ws||fA(2),zo<256)Qt[On++]=zo;else{if(zo==256){Lc=yn,lr=null;break}var oa=zo-254;zo>264&&(oa=dA(dt,yn,(1<<(tc=GW[Ei=zo-257]))-1)+WW[Ei],yn+=tc);var Jl=Un[lD(dt,yn)&_l],ec=Jl>>4;if(Jl||fA(3),yn+=15&Jl,so=Kbe[ec],ec>3){var tc=QW[ec];so+=lD(dt,yn)&(1<<tc)-1,yn+=tc}if(yn>qn){Dn&&fA(0);break}Sn&&wn(On+131072);var Ro=On+oa;if(On<so){var cd=0-so,W0=Math.min(so,Ro);for(cd+On<0&&fA(3);On<W0;++On)Qt[On]=Xt[cd+On]}for(;On<Ro;++On)Qt[On]=Qt[On-so]}}Pt.l=lr,Pt.p=Lc,Pt.b=On,Pt.f=kn,lr&&(kn=1,Pt.m=Or,Pt.d=Un,Pt.n=Er)}while(!kn);return On!=Qt.length&&tn?function(rh,ud,bf){return(bf==null||bf>rh.length)&&(bf=rh.length),new _f(rh.subarray(ud,bf))}(Qt,0,On):Qt.subarray(0,On)}(qe.subarray(tt,-8),{i:2},new _f(((Ce=qe)[(Te=Ce.length)-4]|Ce[Te-3]<<8|Ce[Te-2]<<16|Ce[Te-1]<<24)>>>0),void 0)));var Ce,Te,qe,tt;const et=Jbe[ge];if(!et)throw new Error(`Unhandled codec: ${ge}`);const vt=new globalThis.DecompressionStream(et);return new Response(new Blob([fe]).stream().pipeThrough(vt)).arrayBuffer().then(dt=>new Uint8Array(dt))}(j,U).then(fe=>{const ge=hA.read(new Ow(fe));if(ge.values==="uint32_values")return ge.uint32_values.readValuesInto(X),new nwe[S](X.buffer);throw new Error(`Unhandled numeric data "${ge.values}"`)}),re.then(fe=>{for(let ge=N.length-1;ge>=0;ge--)switch(N[ge]){case"delta_filter":$be(fe,L);break;case"zigzag_filter":Vbe(fe);break;case"bitshuffle_filter":Hbe(fe,S);break;default:throw new Error(`Unhandled filter "${N[ge]}"`)}return{layerName:g,blockIndex:O,data:fe}}).catch(fe=>{throw fe})}))},Pe(ZW,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const JW=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class cD{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,g]=new Uint8Array(c,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=g>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const b=JW[15&g];if(!b)throw new Error("Unrecognized array type.");const[S]=new Uint16Array(c,2,1),[L]=new Uint32Array(c,4,1);return new cD(L,S,b,c)}constructor(c,h=64,g=Float64Array,_){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=g,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const b=JW.indexOf(this.ArrayType),S=2*c*this.ArrayType.BYTES_PER_ELEMENT,L=c*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-L%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${g}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+L+O,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+S+L+O),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+L+O,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=c)}add(c,h){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=c,this.coords[this._pos++]=h,g}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return uD(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,h,g,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:S,nodeSize:L}=this,O=[0,b.length-1,0],N=[];for(;O.length;){const U=O.pop()||0,j=O.pop()||0,X=O.pop()||0;if(j-X<=L){for(let Ce=X;Ce<=j;Ce++){const Te=S[2*Ce],qe=S[2*Ce+1];Te>=c&&Te<=g&&qe>=h&&qe<=_&&N.push(b[Ce])}continue}const re=X+j>>1,fe=S[2*re],ge=S[2*re+1];fe>=c&&fe<=g&&ge>=h&&ge<=_&&N.push(b[re]),(U===0?c<=fe:h<=ge)&&(O.push(X),O.push(re-1),O.push(1-U)),(U===0?g>=fe:_>=ge)&&(O.push(re+1),O.push(j),O.push(1-U))}return N}within(c,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:b,nodeSize:S}=this,L=[0,_.length-1,0],O=[],N=g*g;for(;L.length;){const U=L.pop()||0,j=L.pop()||0,X=L.pop()||0;if(j-X<=S){for(let Ce=X;Ce<=j;Ce++)tq(b[2*Ce],b[2*Ce+1],c,h)<=N&&O.push(_[Ce]);continue}const re=X+j>>1,fe=b[2*re],ge=b[2*re+1];tq(fe,ge,c,h)<=N&&O.push(_[re]),(U===0?c-g<=fe:h-g<=ge)&&(L.push(X),L.push(re-1),L.push(1-U)),(U===0?c+g>=fe:h+g>=ge)&&(L.push(re+1),L.push(j),L.push(1-U))}return O}}function uD(u,c,h,g,_,b){if(_-g<=h)return;const S=g+_>>1;eq(u,c,S,g,_,b),uD(u,c,h,g,S-1,1-b),uD(u,c,h,S+1,_,1-b)}function eq(u,c,h,g,_,b){for(;_>g;){if(_-g>600){const N=_-g+1,U=h-g+1,j=Math.log(N),X=.5*Math.exp(2*j/3),re=.5*Math.sqrt(j*X*(N-X)/N)*(U-N/2<0?-1:1);eq(u,c,h,Math.max(g,Math.floor(h-U*X/N+re)),Math.min(_,Math.floor(h+(N-U)*X/N+re)),b)}const S=c[2*h+b];let L=g,O=_;for(LS(u,c,g,h),c[2*_+b]>S&&LS(u,c,g,_);L<O;){for(LS(u,c,L,O),L++,O--;c[2*L+b]<S;)L++;for(;c[2*O+b]>S;)O--}c[2*g+b]===S?LS(u,c,g,O):(O++,LS(u,c,O,_)),O<=h&&(g=O+1),h<=O&&(_=O-1)}}function LS(u,c,h,g){hD(u,h,g),hD(c,2*h,2*g),hD(c,2*h+1,2*g+1)}function hD(u,c,h){const g=u[c];u[c]=u[h],u[h]=g}function tq(u,c,h,g){const _=u-h,b=c-g;return _*_+b*b}o.$=rW,o.A=Yp,o.B=B0,o.C=ji,o.D=rn,o.E=Uf,o.F=Js,o.G=Gn,o.H=class{constructor(u){this.specification=u}possiblyEvaluate(u,c){return Tt(u.expression.evaluate(c))}interpolate(u,c,h){return{x:Qi(u.x,c.x,h),y:Qi(u.y,c.y,h),z:Qi(u.z,c.z,h),azimuthal:Qi(u.azimuthal,c.azimuthal,h),polar:Qi(u.polar,c.polar,h)}}},o.I=zk,o.J=Va,o.K=$i,o.L=Ls,o.M=class{constructor(u,c,h,g){this.id=u,this.position=c!=null?new Yt(c[0],c[1]):new Yt(0,0),this.orientation=h??[0,0,0],this.nodes=g,this.uploaded=!1,this.aabb=new ga([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(u,c){if(o.a6.multiply(u.matrix,c,u.matrix),u.meshes)for(const h of u.meshes){const g=ga.applyTransform(h.aabb,u.matrix);this.aabb.encapsulate(g)}if(u.children)for(const h of u.children)this._applyTransformations(h,u.matrix)}computeBoundsAndApplyParent(){const u=o.a6.identity([]);for(const c of this.nodes)this._applyTransformations(c,u)}computeModelMatrix(u,c,h,g,_,b,S=!1){wW(this.matrix,this,u.transform,this.position,c,h,g,_,b,S)}upload(u){if(!this.uploaded){for(const c of this.nodes)Jk(c,u);for(const c of this.nodes)NL(c);this.uploaded=!0}}destroy(){for(const u of this.nodes)eD(u)}},o.O=ue,o.P=W,o.Q=ql,o.R=zr,o.S=D0,o.T=qk,o.U=Qi,o.V=zn,o.W=$c,o.X=class{constructor(u){this.specification=u}possiblyEvaluate(u,c){return function([h,g]){const _=Tt([1,h,g]);return{x:_.x,y:_.y,z:_.z}}(u.expression.evaluate(c))}interpolate(u,c,h){return{x:Qi(u.x,c.x,h),y:Qi(u.y,c.y,h),z:Qi(u.z,c.z,h)}}},o.Y=function(u,c,h=0,g=!0){const _=new W(h,h),b=u.sub(_),S=c.add(_),L=[b,new W(S.x,b.y),S,new W(b.x,S.y)];return g&&L.push(b.clone()),L},o.Z=mg,o._=function(u,c){const h=[];for(let g=0;g<u.length;g++){const _=me(g-1,-1,u.length-1),b=me(g+1,-1,u.length-1),S=u[g],L=u[b],O=u[_].sub(S).unit(),N=L.sub(S).unit(),U=N.angleWithSep(O.x,O.y),j=O.add(N).unit().mult(-1*c/Math.sin(U/2));h.push(S.add(j))}return h},o.a=Df,o.a$=function(u){const c=[];for(const h in u)c.push(u[h]);return c},o.a0=ij,o.a1=function(u,c,h=0){return o.N.fromValues(((c.x-h)*u.scale-u.x)*zn,(c.y*u.scale-u.y)*zn,Co(c.z,c.y))},o.a2=Ak,o.a3=bK,o.a4=function(u){let c=1/0,h=1/0,g=-1/0,_=-1/0;for(const b of u)c=Math.min(c,b.x),h=Math.min(h,b.y),g=Math.max(g,b.x),_=Math.max(_,b.y);return{min:new W(c,h),max:new W(g,_)}},o.a5=Vi,o.a8=sA,o.a9=$s,o.aA=of,o.aB=Ea,o.aC=_e,o.aD=ad,o.aE=BL,o.aF=function(){Zs.isLoading()||Zs.isLoaded()||js()!=="deferred"||ro()},o.aG=Ol,o.aH=Al,o.aI=NW,o.aJ=Rt,o.aK=Fk,o.aL=Lk,o.aM=kl,o.aN=Ru,o.aO=R0,o.aP=x9,o.aQ=aL,o.aR=Wk,o.aS=function(u,c){const h=D0(c.zoom);if(h===0)return Eg(u);const g=eL(u),_=yk(g),b=Vi(g.getWest())*c.worldSize,S=Vi(g.getEast())*c.worldSize,L=vi(g.getNorth())*c.worldSize,O=vi(g.getSouth())*c.worldSize,N=[b,L,0],U=[S,L,0],j=[b,O,0],X=[S,O,0],re=o.a6.invert([],c.globeMatrix);return o.N.transformMat4(N,N,re),o.N.transformMat4(U,U,re),o.N.transformMat4(j,j,re),o.N.transformMat4(X,X,re),_[0]=av(_[0],j,h),_[1]=av(_[1],X,h),_[2]=av(_[2],U,h),_[3]=av(_[3],N,h),ga.fromPoints(_)},o.aT=nL,o.aU=sS,o.aV=av,o.aW=Qa,o.aX=Zye,o.aY=Ne,o.aZ=XW,o.a_=dn,o.aa=pe,o.ab=Ze,o.ac=function(u,c){const h={};for(let g=0;g<c.length;g++){const _=c[g];_ in u&&(h[_]=u[_])}return h},o.ad=vn,o.ae=vi,o.af=class{constructor(u){this.entries={},this.scheduler=u}request(u,c,h,g){const _=this.entries[u]=this.entries[u]||{callbacks:[]};if(_.result){const[b,S]=_.result;return this.scheduler?this.scheduler.add(()=>{g(b,S)},c):g(b,S),()=>{}}return _.callbacks.push(g),_.cancel||(_.cancel=h((b,S)=>{_.result=[b,S];for(const L of _.callbacks)this.scheduler?this.scheduler.add(()=>{L(b,S)},c):L(b,S);setTimeout(()=>delete this.entries[u],3e3)})),()=>{_.result||(_.callbacks=_.callbacks.filter(b=>b!==g),_.callbacks.length||(_.cancel(),delete this.entries[u]))}}},o.ag=vg,o.ah=function(u,c,h){const g=JSON.stringify(u.request);return u.data&&(this.deduped.entries[g]={result:[null,u.data]}),this.deduped.request(g,{type:"parseTile",isSymbolTile:u.isSymbolTile,zoom:u.tileZoom},_=>{const b=dn(u.request,(S,L,O,N)=>{S?_(S):L&&_(null,{vectorTile:h?void 0:new Rk(new Ow(L)),rawData:L,cacheControl:O,expires:N})});return()=>{b.cancel(),_()}},c)},o.ai=function(u){hr++,hr>_t&&(u.getActor().send("enforceCacheSizeLimit",Xe),hr=0)},o.aj=Xn,o.ak=Qe,o.al=function(u){return u<=1?1:Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},o.am=tr,o.an=dW,o.ao=fW,o.ap=hW,o.aq=function(u,c){const h=document.createElement("video");h.muted=!0,h.onloadstart=function(){c(null,h)};for(let g=0;g<u.length;g++){const _=document.createElement("source");En(u[g])||(h.crossOrigin="Anonymous"),_.src=u[g],h.appendChild(_)}return{cancel:()=>{}}},o.ar=LL,o.as=mS,o.at=Bi,o.au=ms,o.av=uf,o.aw=Wo,o.ax=po,o.ay=Ks,o.az=rA,o.b=$d,o.b$=Jr,o.b0=function(u,c){const h=[];for(const g in u)g in c||h.push(g);return h},o.b1=Le,o.b2=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.b3=function(u,c){const{x:h,y:g}=u.point,_=B9(h,g,u.worldSize/u._pixelsPerMercatorPixel,0,0);return o.a6.multiply(_,_,_k(Eg(c)))},o.b5=Rw,o.b6=yf,o.b7=AL,o.b8=function(u,c,h,g,_){const b=5*c+2;u.float32[b+0]=h,u.float32[b+1]=g,u.float32[b+2]=_},o.b9=IL,o.bA=FL,o.bB=pW,o.bC=function(u){const c=pW(u,!0);return o.b4.invert([],[c[0],c[1],c[4],c[5]])},o.bD=gk,o.bE=function(u){const{x:c,y:h}=u.point,{lng:g,lat:_}=u._center;return B9(c,h,u.worldSize,g,_)},o.bF=ee,o.bG=ct,o.bH=function(u){const c=Math.round((u+45+360)%360/90)%4;return ce[c]},o.bI=45,o.bJ=Wr,o.bK=E,o.bL=bg,o.bM=KM,o.bN=pu,o.bO=Cw,o.bP=w,o.bQ=function(u,c,h){const g=Math.sqrt(u*u+c*c+h*h),_=g>0?Math.acos(h/g)*q:0;let b=u!==0||c!==0?Math.atan2(-c,-u)*q+90:0;return b<0&&(b+=360),[g,b,_]},o.bR=ls,o.bS=ga,o.bT=Tt,o.bU=function(u){return[Math.pow(u[0],1/2.2),Math.pow(u[1],1/2.2),Math.pow(u[2],1/2.2)]},o.bV=function(u){return u({pluginStatus:Lr,pluginURL:Ii}),Mo.on("pluginStateChange",u),u},o.bW=$w,o.bX=kL,o.bY=kw,o.bZ=$k,o.b_=Zi,o.ba=jK,o.bb=tp,o.bc=Kc,o.bd=JK,o.be=Hk,o.bf=Uk,o.bg=cD,o.bh=me,o.bj=Y,o.bk=ze,o.bl=Li,o.bm=function(u,c,h){u[4*c+0]=h[0],u[4*c+1]=h[1],u[4*c+2]=h[2],u[4*c+3]=h[3]},o.bn=Yt,o.bo=lW,o.bp=sr,o.bq=mk,o.br=AW,o.bs=jn,o.bt=S9,o.bu=function(u,c,h,g,_,b,S,L,O){if(O.name==="globe")return S9(u,c,new jn(h,g,_),!1);const N=mS({z:h,x:g,y:_},O);return new ga([(b+N.x/N.scale)*c,c*(N.y/N.scale),S],[(b+N.x2/N.scale)*c,c*(N.y2/N.scale),L])},o.bv=function(u,c,h){let g=0;for(let _=0;_<2;++_){const b=h?h[_]:0;u[_]>b&&(g+=(u[_]-b)*(u[_]-b)),c[_]<b&&(g+=(b-c[_])*(b-c[_]))}return g},o.bw=os,o.bx=Ve,o.by=function(u){const c=o.a6.identity(new Float64Array(16));o.a6.multiply(c,u.pixelMatrix,u.globeMatrix);const h=[0,$t,0],g=[0,pn,0];return o.N.transformMat4(h,h,c),o.N.transformMat4(g,g,c),[h[0]>0&&h[0]<=u.width&&h[1]>0&&h[1]<=u.height&&!wk(u,new Yt(u.center.lat,90)),g[0]>0&&g[0]<=u.width&&g[1]>0&&g[1]<=u.height&&!wk(u,new Yt(u.center.lat,-90))]},o.bz=function(u,c){const{scale:h}=u.tileTransform,g=h*zn/(u.tileSize*Math.pow(2,c.zoom-u.tileID.overscaledZ+u.tileID.canonical.z));return o.b4.scale(new Float32Array(4),c.inverseAdjustmentMatrix,[g,g])},o.c=FW,o.c$=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},o.c0=y,o.c1=Et,o.c2=function(u,c,h){return u.type==="custom"?new abe(u,c):new Ube[u.type](u,c,h)},o.c3=function(u){const c=u.indexOf(Hm);return c>=0?u.slice(0,c):u},o.c4=function(u){return u.indexOf(Hm)>=0},o.c5=function(u){const c=u.indexOf(Hm);return c>=0?u.slice(c+1):""},o.c6=function(u){const c=[],h=u.id;return h===void 0&&c.push({message:`layers.${h}: missing required property "id"`}),u.render===void 0&&c.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&c.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),c},o.c7=ft,o.c8=Mo,o.c9=en,o.cA=CK,o.cB=(u,c,h,g,_,b)=>{const S=u.transform;return{u_matrix:xK(u,c,h,g),u_texsize:c.imageAtlasTexture?c.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:S.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:wK(c,S),u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b}},o.cC=(u,c,h,g,_,b,S)=>{const L=u.transform,O=L.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:xK(u,c,h,g),u_pixels_to_tile_units:O,u_device_pixel_ratio:b,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:EK(h)&&c.lineAtlasTexture?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:wK(c,u.transform),u_alpha_discard_threshold:0,u_trim_offset:S,u_emissive_strength:h.paint.get("line-emissive-strength")}},o.cD=Re,o.cE=oS,o.cF=AK,o.cG=kr,o.cH=pL,o.cI=$0,o.cJ=450,o.cK=7,o.cL=ibe,o.cM=256,o.cN=_k,o.cO=df,o.cP=Jf,o.cQ=function(u,c,h,g,_){return pe((u-c)/(h-c)*(_-g)+g,g,_)},o.cR=as,o.cS=Xk,o.cT=[1,1,1],o.cU=Mw,o.cV=zw,o.cW=Bh,o.cX=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(u){const c=W9(new W(0,0),new W(zn,zn),u),h=[];for(const g of this._activeRegions){if(g.hiddenByOverlap||!K9(c,g))continue;const _=D_e(g.min,g.max,u);h.push({min:_.min,max:_.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId})}return h}setSources(u){this._setSources(u.map(c=>({getSourceId:()=>c.cache.id,getFootprints:()=>{const h=[];for(const g of c.cache.getVisibleCoordinates()){const _=c.cache.getTile(g).buckets[c.layer];if(_)for(const b of _.getNodesInfo()){const S=b.node;S.footprint&&h.push({footprint:S.footprint,id:g.toUnwrapped()})}}return h}})))}_addSource(u){const c=u.getFootprints();if(c.length!==0){for(const h of c){if(!h.footprint)continue;const g=W9(h.footprint.min,h.footprint.max,h.id);this._activeRegions.push({min:g.min,max:g.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:h.id,footprint:h.footprint})}this._sourceIds.push(u.getSourceId())}}_computeReplacement(){this._activeRegions.sort((c,h)=>c.priority-h.priority||hL(c.min,h.min)||hL(c.max,h.max));let u=this._activeRegions.length!==this._prevRegions.length;if(!u){let c=0,h=0;for(;!u&&c!==this._activeRegions.length;){const g=this._activeRegions[c],_=this._prevRegions[h];u=g.priority!==_.priority||!j9(g,_),++c,++h}}if(u){++this._updateTime;const c=h=>{const g=this._activeRegions;if(h>=g.length)return h;const _=g[h].priority;for(;h<g.length&&g[h].priority===_;)++h;return h};if(this._sourceIds.length>1){let h=0,g=c(h);for(;h!==g;){let _=h;const b=h;for(;_!==g;){const S=this._activeRegions[_];S.hiddenByOverlap=!1;for(let L=0;L<b;L++){const O=this._activeRegions[L];if(!O.hiddenByOverlap&&K9(S,O)&&(S.hiddenByOverlap=Y9(S.footprint,S.tileId,O.footprint,O.tileId),S.hiddenByOverlap))break}++_}h=g,g=c(h)}}}}_setSources(u){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let c=u.length-1;c>=0;c--)this._addSource(u[c]);this._computeReplacement()}},o.cY=class{constructor(u){this._createGrid(u),this._createPoles(u)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const u of this._poleSegments)u.destroy();for(const u of this._gridSegments)u.withSkirts.destroy(),u.withoutSkirts.destroy()}_fillGridMeshWithLods(u,c){const h=new Ru,g=new Wo,_=[],b=u+1+2,S=c[0]+1,L=c[0]+1+(1+c.length),O=(N,U,j)=>{let X=N===b-1?N-2:N===0?N:N-1;return X+=j?24575:0,[X,U]};for(let N=0;N<b;++N)h.emplaceBack(...O(N,0,!0));for(let N=0;N<S;++N)for(let U=0;U<b;++U)h.emplaceBack(...O(U,N,(U===0||U===b-1)&&!0));for(let N=0;N<c.length;++N){const U=c[N];for(let j=0;j<b;++j)h.emplaceBack(...O(j,U,!0))}for(let N=0;N<c.length;++N){const U=g.length,j=c[N]+1+2,X=new Wo;for(let ge=0;ge<j-1;ge++){const Ce=ge===j-2,Te=Ce?b*(L-c.length+N-ge):b;for(let qe=0;qe<b-1;qe++){const tt=ge*b+qe;ge===0||Ce||qe===0||qe===b-2?(X.emplaceBack(tt+1,tt,tt+Te),X.emplaceBack(tt+Te,tt+Te+1,tt+1)):(g.emplaceBack(tt+1,tt,tt+Te),g.emplaceBack(tt+Te,tt+Te+1,tt+1))}}const re=Ea.simpleSegment(0,U,h.length,g.length-U);for(let ge=0;ge<X.uint16.length;ge+=3)g.emplaceBack(X.uint16[ge],X.uint16[ge+1],X.uint16[ge+2]);const fe=Ea.simpleSegment(0,U,h.length,g.length-U);_.push({withoutSkirts:re,withSkirts:fe})}return{vertices:h,indices:g,segments:_}}_createGrid(u){const c=this._fillGridMeshWithLods(Ct,Lt);this._gridSegments=c.segments,this._gridBuffer=u.createVertexBuffer(c.vertices,x9.members),this._gridIndexBuffer=u.createIndexBuffer(c.indices,!0)}_createPoles(u){const c=new Wo;for(let S=0;S<=Ct;S++)c.emplaceBack(0,S+1,S+2);this._poleIndexBuffer=u.createIndexBuffer(c,!0);const h=new df,g=new df,_=new df,b=new df;this._poleSegments=[];for(let S=0,L=0;S<ct;S++){const O=360/(1<<S);h.emplaceBack(0,-Ze,0,.5,0),g.emplaceBack(0,-Ze,0,.5,1),_.emplaceBack(0,-Ze,0,.5,.5),b.emplaceBack(0,-Ze,0,.5,.5);for(let N=0;N<=Ct;N++){let U=N/Ct,j=0;const X=Qi(0,O,U),[re,fe,ge]=Kt(t_e,n_e,X,Ze);h.emplaceBack(re,fe,ge,U,j),g.emplaceBack(re,fe,ge,U,1-j);const Ce=Y(X);U=.5+.5*Math.sin(Ce),j=.5+.5*Math.cos(Ce),_.emplaceBack(re,fe,ge,U,j),b.emplaceBack(re,fe,ge,U,1-j)}this._poleSegments.push(Ea.simpleSegment(L,0,66,64)),L+=66}this._poleNorthVertexBuffer=u.createVertexBuffer(h,ZM,!1),this._poleSouthVertexBuffer=u.createVertexBuffer(g,ZM,!1),this._texturedPoleNorthVertexBuffer=u.createVertexBuffer(_,ZM,!1),this._texturedPoleSouthVertexBuffer=u.createVertexBuffer(b,ZM,!1)}getGridBuffers(u,c){return[this._gridBuffer,this._gridIndexBuffer,c?this._gridSegments[u].withSkirts:this._gridSegments[u].withoutSkirts]}getPoleBuffers(u,c){return[c?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,c?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[u]]}},o.cZ=function(u){return zc.has(u)},o.c_=le,o.ca=f,o.cb=class extends iA{constructor(u){super(u),this.current=B}set(u,c,h){if(this.fetchUniformLocation(u,c)){for(let g=0;g<9;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix3fv(this.location,!1,h);break}}}},o.cc=se,o.cd=function(u,c,h){const g=D0(h.zoom),_=u.style.map._antialias,b=c.options.extStandardDerivativesForceOff||u.terrain&&u.terrain.exaggeration()>0;return g===0&&!_&&!b},o.ce=function(u){const c=u.pixelsPerMeter,h=c/Li(1,u.center.lat),g=o.a6.identity(new Float64Array(16));return o.a6.translate(g,g,[u.point.x,u.point.y,0]),o.a6.scale(g,g,[h,h,c]),Float32Array.from(g)},o.cf=eL,o.cg=function(u){const c=os-5;u=pe(u,-c,c)/c*90;const h=Math.pow(Math.abs(Math.sin(Y(u))),3);return Math.round(h*(Lt.length-1))},o.ch=function(u,c,h,g){const _=c.getNorth(),b=c.getSouth(),S=c.getWest(),L=c.getEast(),O=1<<u.z,N=L-S,U=_-b,j=N/Ct,X=-U/Lt[h],re=[0,j,0,X,0,0,_,S,0];if(u.z>0){const fe=180/g;o.co.multiply(re,re,[fe/N+1,0,0,0,fe/U+1,0,-.5*fe/j,.5*fe/X,1])}return re[2]=O,re[5]=u.x,re[8]=u.y,re},o.ci=Eg,o.cj=function(u,c,h){const g=o.a6.identity(new Float64Array(16)),_=(c/(1<<u)-.5)*Math.PI*2;return o.a6.rotateY(g,h.globeMatrix,_),Float32Array.from(g)},o.ck=class{isDataAvailableAtPoint(u){const c=this._source();if(this.isUsingMockSource()||!c||u.y<0||u.y>1)return!1;const h=c.getSource().maxzoom,g=1<<h,_=Math.floor(u.x),b=Math.floor((u.x-_)*g),S=Math.floor(u.y*g),L=this.findDEMTileFor(new tr(h,_,h,b,S));return!(!L||!L.dem)}getAtPointOrZero(u,c=0){return this.getAtPoint(u,c)||0}getAtPoint(u,c,h=!0){if(this.isUsingMockSource())return null;c==null&&(c=null);const g=this._source();if(!g||u.y<0||u.y>1)return c;const _=g.getSource().maxzoom,b=1<<_,S=Math.floor(u.x),L=u.x-S,O=new tr(_,S,_,Math.floor(L*b),Math.floor(u.y*b)),N=this.findDEMTileFor(O);if(!N||!N.dem)return c;const U=N.dem,j=1<<N.tileID.canonical.z,X=(L*j-N.tileID.canonical.x)*U.dim,re=(u.y*j-N.tileID.canonical.y)*U.dim,fe=Math.floor(X),ge=Math.floor(re);return(h?this.exaggeration():1)*Qi(Qi(U.get(fe,ge),U.get(fe,ge+1),re-ge),Qi(U.get(fe+1,ge),U.get(fe+1,ge+1),re-ge),X-fe)}getAtTileOffset(u,c,h){const g=1<<u.canonical.z;return this.getAtPointOrZero(new Ls(u.wrap+(u.canonical.x+c/zn)/g,(u.canonical.y+h/zn)/g))}getAtTileOffsetFunc(u,c,h,g){return _=>{const b=this.getAtTileOffset(u,_.x,_.y),S=g.upVector(u.canonical,_.x,_.y),L=g.upVectorScale(u.canonical,c,h).metersToTile;return o.N.scale(S,S,b*L),S}}getForTilePoints(u,c,h,g){if(this.isUsingMockSource())return!1;const _=Mw.create(this,u,g);return!!_&&(c.forEach(b=>{b[2]=this.exaggeration()*_.getElevationAt(b[0],b[1],h)}),!0)}getMinMaxForTile(u){if(this.isUsingMockSource())return null;const c=this.findDEMTileFor(u);if(!c||!c.dem)return null;const h=c.dem.tree,g=c.tileID,_=1<<u.canonical.z-g.canonical.z;let b=u.canonical.x/_-g.canonical.x,S=u.canonical.y/_-g.canonical.y,L=0;for(let O=0;O<u.canonical.z-g.canonical.z&&!h.leaves[L];O++){b*=2,S*=2;const N=2*Math.floor(S)+Math.floor(b);L=h.childOffsets[L]+N,b%=1,S%=1}return{min:this.exaggeration()*h.minimums[L],max:this.exaggeration()*h.maximums[L]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(u,c,h){throw new Error("Pure virtual method called.")}pointCoordinate(u){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(u){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const u=this.visibleDemTiles;if(u.length===0)return null;let c=!1,h=Number.MAX_VALUE,g=Number.MIN_VALUE;for(const _ of u){const b=this.getMinMaxForTile(_.tileID);b&&(h=Math.min(h,b.min),g=Math.max(g,b.max),c=!0)}return c?{min:h,max:g}:null}},o.cl=JM,o.cm=D9,o.cn=function(u,c){return[Math.pow(u[0],2.2)*c,Math.pow(u[1],2.2)*c,Math.pow(u[2],2.2)*c]},o.cp=I9,o.cq=256,o.cr=function(u,c){const h=[0,0,0],g=nL(Eg(c.canonical));return o.N.transformMat4(h,h,g),o.N.transformMat4(h,h,u),h},o.cs=u=>({u_camera_to_center_distance:new pu(u),u_extrude_scale:new k(u),u_device_pixel_ratio:new pu(u),u_matrix:new E(u),u_inv_rot_matrix:new E(u),u_merc_center:new bg(u),u_tile_id:new KM(u),u_zoom_transition:new pu(u),u_up_dir:new KM(u),u_emissive_strength:new pu(u)}),o.ct=u=>({u_matrix:new E(u),u_pixels_to_tile_units:new k(u),u_device_pixel_ratio:new pu(u),u_units_to_pixels:new bg(u),u_dash_image:new Cw(u),u_gradient_image:new Cw(u),u_image_height:new pu(u),u_texsize:new bg(u),u_tile_units_to_pixels:new pu(u),u_alpha_discard_threshold:new pu(u),u_trim_offset:new bg(u),u_emissive_strength:new pu(u)}),o.cu=u=>({u_matrix:new E(u),u_texsize:new bg(u),u_pixels_to_tile_units:new k(u),u_device_pixel_ratio:new pu(u),u_image:new Cw(u),u_units_to_pixels:new bg(u),u_tile_units_to_pixels:new pu(u),u_alpha_discard_threshold:new pu(u),u_trim_offset:new bg(u)}),o.cv=Km,o.cw=f1e,o.cx=p1e,o.cy=R9,o.cz=(u,c,h,g,_,b)=>{const S=u.transform,L=S.projection.name==="globe";let O;if(b.paint.get("circle-pitch-alignment")==="map")if(L){const U=I9(S.zoom,c.canonical)*S._pixelsPerMercatorPixel;O=Float32Array.from([U,0,0,U])}else O=S.calculatePixelsToTileUnitsMatrix(h);else O=new Float32Array([S.pixelsToGLUnits[0],0,0,S.pixelsToGLUnits[1]]);const N={u_camera_to_center_distance:u.transform.getCameraToCenterDistance(S.projection),u_matrix:u.translatePosMatrix(c.projMatrix,h,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:St.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:r_e,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:b.paint.get("circle-emissive-strength")};if(L){N.u_inv_rot_matrix=g,N.u_merc_center=_,N.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],N.u_zoom_transition=D0(S.zoom);const U=_[0]*zn,j=_[1]*zn;N.u_up_dir=S.projection.upVector(new jn(0,0,0),U,j)}return N},o.d=Mn,o.d0=ie,o.d1=Os,o.d2=Cn,o.d3=function([u,c,h]){const g=Math.hypot(u,c,h),_=Math.atan2(u,h),b=.5*Math.PI-Math.acos(-c/g);return new Yt(ee(_),ee(b))},o.d4=bn,o.d5=A,o.d6=wk,o.d7=M9,o.d8=function(u){const c=[0,0,0],h=o.a6.identity(new Float64Array(16));return o.a6.multiply(h,u.pixelMatrix,u.globeMatrix),o.N.transformMat4(c,c,h),new W(c[0],c[1])},o.d9=function(u){const c=u.navigator?u.navigator.userAgent:null;return!!function(h){if(mt==null){const g=h.navigator?h.navigator.userAgent:null;mt=!!h.safari||!(!g||!(/\b(iPad|iPhone|iPod)\b/.test(g)||g.match("Safari")&&!g.match("Chrome")))}return mt}(u)&&c&&(c.match("Version/15.4")||c.match("Version/15.5")||c.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.dA=cA,o.dB=OW,o.dC=kW,o.dD=yK,o.dE=je,o.dF=WK,o.dG=function(u,c,h,g,_,b,S,L,O,N,U){u.createArrays(),u.tilePixelRatio=zn/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;const j=u.layers[0].layout,X=u.layers[0]._unevaluatedLayout._values,re={};if(u.textSizeData.kind==="composite"){const{minZoom:Te,maxZoom:qe}=u.textSizeData;re.compositeTextSizes=[X["text-size"].possiblyEvaluate(new $i(Te),L),X["text-size"].possiblyEvaluate(new $i(qe),L)]}if(u.iconSizeData.kind==="composite"){const{minZoom:Te,maxZoom:qe}=u.iconSizeData;re.compositeIconSizes=[X["icon-size"].possiblyEvaluate(new $i(Te),L),X["icon-size"].possiblyEvaluate(new $i(qe),L)]}re.layoutTextSize=X["text-size"].possiblyEvaluate(new $i(O+1),L),re.layoutIconSize=X["icon-size"].possiblyEvaluate(new $i(O+1),L),re.textMaxSize=X["text-size"].possiblyEvaluate(new $i(18),L);const fe=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",ge=j.get("text-size");let Ce=!1;for(const Te of u.features)if(Te.icon&&Te.icon.nameSecondary){Ce=!0;break}for(const Te of u.features){const qe=j.get("text-font").evaluate(Te,{},L).join(","),tt=ge.evaluate(Te,{},L),et=re.layoutTextSize.evaluate(Te,{},L),vt=(re.layoutIconSize.evaluate(Te,{},L),{horizontal:{},vertical:void 0}),dt=Te.text;let Pt,Qt=[0,0];if(dt){const tn=dt.toString(),Sn=j.get("text-letter-spacing").evaluate(Te,{},L)*Kc,Dn=j.get("text-line-height").evaluate(Te,{},L)*Kc,wn=In(tn)?Sn:0,kn=j.get("text-anchor").evaluate(Te,{},L),yn=j.get("text-variable-anchor");if(!yn){const Er=j.get("text-radial-offset").evaluate(Te,{},L);Qt=Er?JK(kn,[Er*Kc,Vk]):j.get("text-offset").evaluate(Te,{},L).map(qn=>qn*Kc)}let On=fe?"center":j.get("text-justify").evaluate(Te,{},L);const lr=j.get("symbol-placement")==="point",Un=lr?j.get("text-max-width").evaluate(Te,{},L)*Kc:1/0,Or=Er=>{u.allowVerticalPlacement&&nn(tn)&&(vt.vertical=Dk(dt,c,h,_,qe,Un,Dn,kn,Er,wn,Qt,yf.vertical,!0,et,tt))};if(!fe&&yn){const Er=On==="auto"?yn.map(oi=>Hk(oi)):[On];let qn=!1;for(let oi=0;oi<Er.length;oi++){const Kr=Er[oi];if(!vt.horizontal[Kr])if(qn)vt.horizontal[Kr]=vt.horizontal[0];else{const Pr=Dk(dt,c,h,_,qe,Un,Dn,"center",Kr,wn,Qt,yf.horizontal,!1,et,tt);Pr&&(vt.horizontal[Kr]=Pr,qn=Pr.positionedLines.length===1)}}Or("left")}else{if(On==="auto"&&(On=Hk(kn)),lr||j.get("text-writing-mode").indexOf("horizontal")>=0||!nn(tn)){const Er=Dk(dt,c,h,_,qe,Un,Dn,kn,On,wn,Qt,yf.horizontal,!1,et,tt);Er&&(vt.horizontal[On]=Er)}Or(lr?"left":On)}}let Xt=!1;if(Te.icon&&Te.icon.namePrimary){const tn=g[Te.icon.namePrimary];tn&&(Pt=P1e(_[Te.icon.namePrimary],Te.icon.nameSecondary?_[Te.icon.nameSecondary]:void 0,j.get("icon-offset").evaluate(Te,{},L),j.get("icon-anchor").evaluate(Te,{},L)),Xt=tn.sdf,u.sdfIcons===void 0?u.sdfIcons=tn.sdf:u.sdfIcons!==tn.sdf&&Ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tn.pixelRatio!==u.pixelRatio||j.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}const An=tW(vt.horizontal)||vt.vertical;u.iconsInText||(u.iconsInText=!!An&&An.iconsInText),(An||Pt)&&z1e(u,Te,vt,Pt,g,re,et,0,Qt,Xt,S,L,N,U,Ce)}b&&u.generateCollisionDebugBuffers(O,u.collisionBoxArray)},o.dH=Rk,o.dI=Ow,o.dJ=dL,o.dK=F,o.dL=cL,o.dM=lL,o.dN=Q,o.dO=BK,o.dP=function(u){let c=0;if(new Uint32Array(u,0,1)[0]!==TW){const h=new Uint32Array(u,0,7),[,,g,_,b,S]=h;c=h.byteLength+_+b+S+b,(g!==u.byteLength||c>=u.byteLength)&&Ye("Invalid b3dm header information.")}return LW(u,c)},o.dQ=function(u,c){const h=FW(u);for(const g of h){for(const _ of g.meshes)Pbe(_);g.lights&&(g.lightMeshIndex=g.meshes.length,g.meshes.push(Fbe(g.lights,c)))}return h},o.dR=$L,o.dS=xW,o.dT=Zs,o.dU=function(u){rr(),Gt&&Gt.then(c=>{c.keys().then(h=>{for(let g=0;g<h.length-u;g++)c.delete(h[g])})})},o.da=class{constructor(u,c,h){this._transformRequestFn=u,this._customAccessToken=c,this._silenceAuthErrors=!!h,this._createSkuToken()}_createSkuToken(){const u=function(){let c="";for(let h=0;h<10;h++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Rn,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(u,c){return this._transformRequestFn&&this._transformRequestFn(u,c)||{url:u}}normalizeStyleURL(u,c){if(!y(u))return u;const h=Nr(u);return h.params.push(`sdk=js-${d}`),h.path=`/styles/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||c)}normalizeGlyphsURL(u,c){if(!y(u))return u;const h=Nr(u);return h.path=`/fonts/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||c)}normalizeModelURL(u,c){if(!y(u))return u;const h=Nr(u);return h.path=`/models/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||c)}normalizeSourceURL(u,c,h,g){if(!y(u))return u;const _=Nr(u);return _.path=`/v4/${_.authority}.json`,_.params.push("secure"),h&&_.params.push(`language=${h}`),g&&_.params.push(`worldview=${g}`),this._makeAPIURL(_,this._customAccessToken||c)}normalizeSpriteURL(u,c,h,g){const _=Nr(u);return y(u)?(_.path=`/styles/v1${_.path}/sprite${c}${h}`,this._makeAPIURL(_,this._customAccessToken||g)):(_.path+=`${c}${h}`,si(_))}normalizeTileURL(u,c,h){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!y(u))return u;const g=Nr(u);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||h&&g.authority!=="raster"&&h===512?"@2x":""}${Kn.supported?".webp":"$1"}`),g.authority==="raster"?g.path=`/${A.RASTER_URL_PREFIX}${g.path}`:g.authority==="rasterarrays"?g.path=`/${A.RASTERARRAYS_URL_PREFIX}${g.path}`:(g.path=g.path.replace(/^.+\/v4\//,"/"),g.path=`/${A.TILE_URL_VERSION}${g.path}`);const _=this._customAccessToken||function(b){for(const S of b){const L=S.match(/^access_token=(.*)$/);if(L)return L[1]}return null}(g.params)||A.ACCESS_TOKEN;return A.REQUIRE_ACCESS_TOKEN&&_&&this._skuToken&&g.params.push(`sku=${this._skuToken}`),this._makeAPIURL(g,_)}canonicalizeTileURL(u,c){const h=Nr(u);if(!h.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!h.path.match(/\.[\w]+$/))return u;let g="mapbox://";h.path.match(/^\/raster\/v1\//)?g+=`raster/${h.path.replace(`/${A.RASTER_URL_PREFIX}/`,"")}`:h.path.match(/^\/rasterarrays\/v1\//)?g+=`rasterarrays/${h.path.replace(`/${A.RASTERARRAYS_URL_PREFIX}/`,"")}`:g+=`tiles/${h.path.replace(`/${A.TILE_URL_VERSION}/`,"")}`;let _=h.params;return c&&(_=_.filter(b=>!b.match(/^access_token=/))),_.length&&(g+=`?${_.join("&")}`),g}canonicalizeTileset(u,c){const h=!!c&&y(c),g=[];for(const _ of u.tiles||[])v(_)?g.push(this.canonicalizeTileURL(_,h)):g.push(_);return g}_makeAPIURL(u,c){const h="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",g=Nr(A.API_URL);if(u.protocol=g.protocol,u.authority=g.authority,u.protocol==="http"){const _=u.params.indexOf("secure");_>=0&&u.params.splice(_,1)}if(g.path!=="/"&&(u.path=`${g.path}${u.path}`),!A.REQUIRE_ACCESS_TOKEN)return si(u);if(c=c||A.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${h}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${h}`)}return u.params=u.params.filter(_=>_.indexOf("access_token")===-1),u.params.push(`access_token=${c||""}`),si(u)}},o.db=function(u,c){c?zc.add(u):zc.delete(u)},o.dc=Kn,o.dd=Bo,o.de=xh,o.df=er,o.dg=Cr,o.dh=function(u){zc.delete(u)},o.di=Qs,o.dj=Ur,o.dk=d,o.dl=function(u,c){Xe=u,_t=c},o.dm=function(u,c,h=!1){if(Lr===or||Lr===fr||Lr===ar)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ii=St.resolveURL(u),Lr=or,ri=c,go(),h||ro()},o.dn=js,o.dp=function(){kL().acquire(tD)},o.dq=function(){const u=ES;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(tD),ES=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.dr=CS,o.ds=function(u){const c=hn();if(!c)return;const h=c.delete(yt);u&&h.catch(u).then(()=>u())},o.dt=xS,o.du=CW,o.dv=function(u){nD=St.resolveURL(u),Hw||(Hw=new $w(kL(),new Uf)),Hw.broadcast("setDracoUrl",nD)},o.dw=EW,o.dx=function(u){Vw=St.resolveURL(u),Hw||(Hw=new $w(kL(),new Uf)),Hw.broadcast("setMeshoptUrl",Vw)},o.dy=Pe,o.dz=U0,o.e=ae,o.f=St,o.g=function(u,c){return en(ae(u,{type:"json"}),c)},o.h=vf,o.i=qd,o.j=ng,o.k=km,o.l=function(u){return fetch(u).then(c=>c.arrayBuffer()).then(c=>LW(c,0,u))},o.m=Aw,o.n=Um,o.o=Ga,o.p=KK,o.q=Xp,o.r=L0,o.s=pg,o.t=nd,o.u=fu,o.v=pa,o.w=Ye,o.x=Ec,o.z=af}),a(["./shared"],function(o){function d(mt){const Be=mt?mt.url.toString():void 0;return Be?performance.getEntriesByName(Be):[]}function p(mt){if(typeof mt=="number"||typeof mt=="boolean"||typeof mt=="string"||mt==null)return JSON.stringify(mt);if(Array.isArray(mt)){let ze="[";for(const it of mt)ze+=`${p(it)},`;return`${ze}]`}let Be="{";for(const ze of Object.keys(mt).sort())Be+=`${ze}:${p(mt[ze])},`;return`${Be}}`}function A(mt){let Be="";for(const ze of o.b2)Be+=`/${p(mt[ze])}`;return Be}class v{constructor(Be){this.keyCache={},this._layers={},this._layerConfigs={},Be&&this.replace(Be)}replace(Be,ze){this._layerConfigs={},this._layers={},this.update(Be,[],ze)}update(Be,ze,it){this._options=it;for(const Qe of Be)this._layerConfigs[Qe.id]=Qe,(this._layers[Qe.id]=o.c2(Qe,this.scope,this._options)).compileFilter(),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id];for(const Qe of ze)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const bt=function(Qe,St){const yt={};for(let _t=0;_t<Qe.length;_t++){const Gt=St&&St[Qe[_t].id]||A(Qe[_t]);St&&(St[Qe[_t].id]=Gt);let gt=yt[Gt];gt||(gt=yt[Gt]=[]),gt.push(Qe[_t])}const Xe=[];for(const _t in yt)Xe.push(yt[_t]);return Xe}(o.a$(this._layerConfigs),this.keyCache);for(const Qe of bt){const St=Qe.map(hn=>this._layers[hn.id]),yt=St[0];if(yt.visibility==="none")continue;const Xe=yt.source||"";let _t=this.familiesBySource[Xe];_t||(_t=this.familiesBySource[Xe]={});const Gt=yt.sourceLayer||"_geojsonTileLayer";let gt=_t[Gt];gt||(gt=_t[Gt]=[]),gt.push(St)}}}const y=1*o.dA;class C{constructor(Be){const ze={},it=[];for(const yt in Be){const Xe=Be[yt],_t=ze[yt]={};for(const Gt in Xe.glyphs){const gt=Xe.glyphs[+Gt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;const hn=gt.metrics.localGlyph?y:1,rr={x:0,y:0,w:gt.bitmap.width+2*hn,h:gt.bitmap.height+2*hn};it.push(rr),_t[Gt]=rr}}const{w:bt,h:Qe}=o.p(it),St=new o.dz({width:bt||1,height:Qe||1});for(const yt in Be){const Xe=Be[yt];for(const _t in Xe.glyphs){const Gt=Xe.glyphs[+_t];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const gt=ze[yt][_t],hn=Gt.metrics.localGlyph?y:1;o.dz.copy(Gt.bitmap,St,{x:0,y:0},{x:gt.x+hn,y:gt.y+hn},Gt.bitmap)}}this.image=St,this.positions=ze}}o.dy(C,"GlyphAtlas");class x{constructor(Be){this.tileID=new o.am(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),this.tileZoom=Be.tileZoom,this.uid=Be.uid,this.zoom=Be.zoom,this.canonical=Be.tileID.canonical,this.pixelRatio=Be.pixelRatio,this.tileSize=Be.tileSize,this.source=Be.source,this.scope=Be.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Be.showCollisionBoxes,this.collectResourceTiming=!!Be.collectResourceTiming,this.promoteId=Be.promoteId,this.isSymbolTile=Be.isSymbolTile,this.tileTransform=o.as(Be.tileID.canonical,Be.projection),this.projection=Be.projection,this.brightness=Be.brightness,this.extraShadowCaster=!!Be.extraShadowCaster}parse(Be,ze,it,bt,Qe){this.status="parsing",this.data=Be,this.collisionBoxArray=new o.aD;const St=new o.dB(Object.keys(Be.layers).sort()),yt=new o.dC(this.tileID,this.promoteId);yt.bucketLayerIDs=[];const Xe={},_t=new o.dD(256,256),Gt={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:_t,availableImages:it,brightness:this.brightness},gt=ze.familiesBySource[this.source];for(const ur in gt){const ni=Be.layers[ur];if(!ni)continue;let us=!1,bi=!1,is=!1;for(const ss of gt[ur])ss[0].type==="symbol"?us=!0:bi=!0,ss[0].is3D()&&ss[0].type!=="model"&&(is=!0);if(this.extraShadowCaster&&!is||this.isSymbolTile===!0&&!us||this.isSymbolTile===!1&&!bi)continue;ni.version===1&&o.w(`Vector tile source "${this.source}" layer "${ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fs=St.encode(ur),zr=[];for(let ss=0;ss<ni.length;ss++){const Zi=ni.feature(ss),en=yt.getId(Zi,ur);zr.push({feature:Zi,id:en,index:ss,sourceLayerIndex:Fs})}for(const ss of gt[ur]){const Zi=ss[0];(!this.extraShadowCaster||Zi.is3D()&&Zi.type!=="model")&&(this.isSymbolTile!==void 0&&Zi.type==="symbol"!==this.isSymbolTile||Zi.minzoom&&this.zoom<Math.floor(Zi.minzoom)||Zi.maxzoom&&this.zoom>=Zi.maxzoom||Zi.visibility!=="none"&&(M(ss,this.zoom,Gt.brightness,it),(Xe[Zi.id]=Zi.createBucket({index:yt.bucketLayerIDs.length,layers:ss,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fs,sourceID:this.source,projection:this.projection.spec})).populate(zr,Gt,this.tileID.canonical,this.tileTransform),yt.bucketLayerIDs.push(ss.map(en=>en.id))))}}let hn,rr,br,Qr;_t.trim();const hr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Kn=()=>{if(hn)return this.status="done",Qe(hn);if(this.extraShadowCaster)this.status="done",Qe(null,{buckets:o.a$(Xe).filter(ur=>!ur.isEmpty()),featureIndex:yt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Gt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(rr&&br&&Qr){const ur=new C(rr),ni=new o.dF(br,Qr);for(const us in Xe){const bi=Xe[us];bi instanceof o.aE?(M(bi.layers,this.zoom,Gt.brightness,it),o.dG(bi,rr,ur.positions,br,ni.iconPositions,this.showCollisionBoxes,it,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):bi.hasPattern&&(bi instanceof o.aK||bi instanceof o.aL||bi instanceof o.cH)&&(M(bi.layers,this.zoom,Gt.brightness,it),bi.addFeatures(Gt,this.tileID.canonical,ni.patternPositions,it,this.tileTransform,this.brightness))}this.status="done",Qe(null,{buckets:o.a$(Xe).filter(us=>!us.isEmpty()),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ur.image,lineAtlas:_t,imageAtlas:ni,brightness:Gt.brightness})}};if(!this.extraShadowCaster){const ur=o.dE(Gt.glyphDependencies,bi=>Object.keys(bi).map(Number));Object.keys(ur).length?bt.send("getGlyphs",{uid:this.uid,stacks:ur,scope:this.scope},(bi,is)=>{hn||(hn=bi,rr=is,Kn())},void 0,!1,hr):rr={};const ni=Object.keys(Gt.iconDependencies);ni.length?bt.send("getImages",{icons:ni,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(bi,is)=>{hn||(hn=bi,br=is,Kn())},void 0,!1,hr):br={};const us=Object.keys(Gt.patternDependencies);us.length?bt.send("getImages",{icons:us,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(bi,is)=>{hn||(hn=bi,Qr=is,Kn())},void 0,!1,hr):Qr={}}Kn()}}function M(mt,Be,ze,it){const bt=new o.K(Be,{brightness:ze});for(const Qe of mt)Qe.recalculate(bt,it)}class I extends o.E{constructor(Be,ze,it,bt,Qe,St){super(),this.actor=Be,this.layerIndex=ze,this.availableImages=it,this.loadVectorData=Qe||o.ah,this.loading={},this.loaded={},this.deduped=new o.af(Be.scheduler),this.isSpriteLoaded=bt,this.scheduler=Be.scheduler,this.brightness=St}loadTile(Be,ze){const it=Be.uid,bt=Be&&Be.request,Qe=bt&&bt.collectResourceTiming,St=this.loading[it]=new x(Be);St.abort=this.loadVectorData(Be,(yt,Xe)=>{const _t=!this.loading[it];if(delete this.loading[it],_t||yt||!Xe)return St.status="done",_t||(this.loaded[it]=St),ze(yt);const Gt=Xe.rawData,gt={};Xe.expires&&(gt.expires=Xe.expires),Xe.cacheControl&&(gt.cacheControl=Xe.cacheControl),St.vectorTile=Xe.vectorTile||new o.dH(new o.dI(Gt));const hn=()=>{St.parse(St.vectorTile,this.layerIndex,this.availableImages,this.actor,(rr,br)=>{if(rr||!br)return ze(rr);const Qr={};if(Qe){const hr=d(bt);hr.length>0&&(Qr.resourceTiming=JSON.parse(JSON.stringify(hr)))}ze(null,o.e({rawTileData:Gt.slice(0)},br,gt,Qr))})};this.isSpriteLoaded?hn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(hn,{type:"parseTile",isSymbolTile:Be.isSymbolTile,zoom:Be.tileZoom}):hn()}),this.loaded=this.loaded||{},this.loaded[it]=St})}reloadTile(Be,ze){const it=this.loaded,bt=Be.uid,Qe=this;if(it&&it[bt]){const St=it[bt];St.showCollisionBoxes=Be.showCollisionBoxes,St.projection=Be.projection,St.brightness=Be.brightness,St.tileTransform=o.as(Be.tileID.canonical,Be.projection),St.extraShadowCaster=Be.extraShadowCaster;const yt=(Xe,_t)=>{const Gt=St.reloadCallback;Gt&&(delete St.reloadCallback,St.parse(St.vectorTile,Qe.layerIndex,this.availableImages,Qe.actor,Gt)),ze(Xe,_t)};St.status==="parsing"?St.reloadCallback=yt:St.status==="done"&&(St.vectorTile?St.parse(St.vectorTile,this.layerIndex,this.availableImages,this.actor,yt):yt())}else ze(null,void 0)}abortTile(Be,ze){const it=Be.uid,bt=this.loading[it];bt&&(bt.abort&&bt.abort(),delete this.loading[it]),ze()}removeTile(Be,ze){const it=this.loaded,bt=Be.uid;it&&it[bt]&&delete it[bt],ze()}}class P{loadTile(Be,ze){const{uid:it,encoding:bt,rawImageData:Qe,padding:St}=Be,yt=ImageBitmap&&Qe instanceof ImageBitmap?this.getImageData(Qe,St):Qe;ze(null,new o.dJ(it,yt,bt,St<1))}getImageData(Be,ze){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Be.width,Be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Be.width,this.offscreenCanvas.height=Be.height,this.offscreenCanvasContext.drawImage(Be,0,0,Be.width,Be.height);const it=this.offscreenCanvasContext.getImageData(-ze,-ze,Be.width+2*ze,Be.height+2*ze);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),it}}class F{decodeRasterArray({task:Be,buffer:ze},it){o.aZ.performDecoding(ze,Be).then(bt=>{it(null,bt)},bt=>{it(bt)})}}function D(mt,Be){if(mt.length!==0){V(mt[0],Be);for(var ze=1;ze<mt.length;ze++)V(mt[ze],!Be)}}function V(mt,Be){for(var ze=0,it=0,bt=0,Qe=mt.length,St=Qe-1;bt<Qe;St=bt++){var yt=(mt[bt][0]-mt[St][0])*(mt[St][1]+mt[bt][1]),Xe=ze+yt;it+=Math.abs(ze)>=Math.abs(yt)?ze-Xe+yt:yt-Xe+ze,ze=Xe}ze+it>=0!=!!Be&&mt.reverse()}var H=o.dK(function mt(Be,ze){var it,bt=Be&&Be.type;if(bt==="FeatureCollection")for(it=0;it<Be.features.length;it++)mt(Be.features[it],ze);else if(bt==="GeometryCollection")for(it=0;it<Be.geometries.length;it++)mt(Be.geometries[it],ze);else if(bt==="Feature")mt(Be.geometry,ze);else if(bt==="Polygon")D(Be.coordinates,ze);else if(bt==="MultiPolygon")for(it=0;it<Be.coordinates.length;it++)D(Be.coordinates[it],ze);return Be});const Q=o.dL.prototype.toGeoJSON;let G=class{constructor(mt){this._feature=mt,this.extent=o.V,this.type=mt.type,this.properties=mt.tags,"id"in mt&&!isNaN(mt.id)&&(this.id=parseInt(mt.id,10))}loadGeometry(){if(this._feature.type===1){const mt=[];for(const Be of this._feature.geometry)mt.push([new o.P(Be[0],Be[1])]);return mt}{const mt=[];for(const Be of this._feature.geometry){const ze=[];for(const it of Be)ze.push(new o.P(it[0],it[1]));mt.push(ze)}return mt}}toGeoJSON(mt,Be,ze){return Q.call(this,mt,Be,ze)}},W=class{constructor(mt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.V,this.length=mt.length,this._features=mt}feature(mt){return new G(this._features[mt])}};var te={exports:{}},q=o.dN,Y=o.dM.VectorTileFeature,ee=ce;function ce(mt,Be){this.options=Be||{},this.features=mt,this.length=mt.length}function se(mt,Be){this.id=typeof mt.id=="number"?mt.id:void 0,this.type=mt.type,this.rawGeometry=mt.type===1?[mt.geometry]:mt.geometry,this.properties=mt.tags,this.extent=Be||4096}ce.prototype.feature=function(mt){return new se(this.features[mt],this.options.extent)},se.prototype.loadGeometry=function(){var mt=this.rawGeometry;this.geometry=[];for(var Be=0;Be<mt.length;Be++){for(var ze=mt[Be],it=[],bt=0;bt<ze.length;bt++)it.push(new q(ze[bt][0],ze[bt][1]));this.geometry.push(it)}return this.geometry},se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var mt=this.geometry,Be=1/0,ze=-1/0,it=1/0,bt=-1/0,Qe=0;Qe<mt.length;Qe++)for(var St=mt[Qe],yt=0;yt<St.length;yt++){var Xe=St[yt];Be=Math.min(Be,Xe.x),ze=Math.max(ze,Xe.x),it=Math.min(it,Xe.y),bt=Math.max(bt,Xe.y)}return[Be,it,ze,bt]},se.prototype.toGeoJSON=Y.prototype.toGeoJSON;var le=o.dO,ie=ee;function pe(mt){var Be=new le;return function(ze,it){for(var bt in ze.layers)it.writeMessage(3,ue,ze.layers[bt])}(mt,Be),Be.finish()}function ue(mt,Be){var ze;Be.writeVarintField(15,mt.version||1),Be.writeStringField(1,mt.name||""),Be.writeVarintField(5,mt.extent||4096);var it={keys:[],values:[],keycache:{},valuecache:{}};for(ze=0;ze<mt.length;ze++)it.feature=mt.feature(ze),Be.writeMessage(2,me,it);var bt=it.keys;for(ze=0;ze<bt.length;ze++)Be.writeStringField(3,bt[ze]);var Qe=it.values;for(ze=0;ze<Qe.length;ze++)Be.writeMessage(4,$e,Qe[ze])}function me(mt,Be){var ze=mt.feature;ze.id!==void 0&&Be.writeVarintField(1,ze.id),Be.writeMessage(2,Le,mt),Be.writeVarintField(3,ze.type),Be.writeMessage(4,_e,ze)}function Le(mt,Be){var ze=mt.feature,it=mt.keys,bt=mt.values,Qe=mt.keycache,St=mt.valuecache;for(var yt in ze.properties){var Xe=ze.properties[yt],_t=Qe[yt];if(Xe!==null){_t===void 0&&(it.push(yt),Qe[yt]=_t=it.length-1),Be.writeVarint(_t);var Gt=typeof Xe;Gt!=="string"&&Gt!=="boolean"&&Gt!=="number"&&(Xe=JSON.stringify(Xe));var gt=Gt+":"+Xe,hn=St[gt];hn===void 0&&(bt.push(Xe),St[gt]=hn=bt.length-1),Be.writeVarint(hn)}}}function ae(mt,Be){return(Be<<3)+(7&mt)}function be(mt){return mt<<1^mt>>31}function _e(mt,Be){for(var ze=mt.loadGeometry(),it=mt.type,bt=0,Qe=0,St=ze.length,yt=0;yt<St;yt++){var Xe=ze[yt],_t=1;it===1&&(_t=Xe.length),Be.writeVarint(ae(1,_t));for(var Gt=it===3?Xe.length-1:Xe.length,gt=0;gt<Gt;gt++){gt===1&&it!==1&&Be.writeVarint(ae(2,Gt-1));var hn=Xe[gt].x-bt,rr=Xe[gt].y-Qe;Be.writeVarint(be(hn)),Be.writeVarint(be(rr)),bt+=hn,Qe+=rr}it===3&&Be.writeVarint(ae(7,1))}}function $e(mt,Be){var ze=typeof mt;ze==="string"?Be.writeStringField(1,mt):ze==="boolean"?Be.writeBooleanField(7,mt):ze==="number"&&(mt%1!=0?Be.writeDoubleField(3,mt):mt<0?Be.writeSVarintField(6,mt):Be.writeVarintField(5,mt))}te.exports=pe,te.exports.fromVectorTileJs=pe,te.exports.fromGeojsonVt=function(mt,Be){Be=Be||{};var ze={};for(var it in mt)ze[it]=new ie(mt[it].features,Be),ze[it].name=it,ze[it].version=Be.version,ze[it].extent=Be.extent;return pe({layers:ze})},te.exports.GeoJSONWrapper=ie;var Re=o.dK(te.exports);const Ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:mt=>mt},Ne=Math.fround||(Je=new Float32Array(1),mt=>(Je[0]=+mt,Je[0]));var Je;const je=3,ft=5,Et=6;class ke{constructor(Be){this.options=Object.assign(Object.create(Ie),Be),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Be){const{log:ze,minZoom:it,maxZoom:bt}=this.options;ze&&console.time("total time");const Qe=`prepare ${Be.length} points`;ze&&console.time(Qe),this.points=Be;const St=[];for(let Xe=0;Xe<Be.length;Xe++){const _t=Be[Xe];if(!_t.geometry)continue;const[Gt,gt]=_t.geometry.coordinates,hn=Ne(He(Gt)),rr=Ne(Tt(gt));St.push(hn,rr,1/0,Xe,-1,1),this.options.reduce&&St.push(0)}let yt=this.trees[bt+1]=this._createTree(St);ze&&console.timeEnd(Qe);for(let Xe=bt;Xe>=it;Xe--){const _t=+Date.now();yt=this.trees[Xe]=this._createTree(this._cluster(yt,Xe)),ze&&console.log("z%d: %d clusters in %dms",Xe,yt.numItems,+Date.now()-_t)}return ze&&console.timeEnd("total time"),this}getClusters(Be,ze){let it=((Be[0]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,Be[1]));let Qe=Be[2]===180?180:((Be[2]+180)%360+360)%360-180;const St=Math.max(-90,Math.min(90,Be[3]));if(Be[2]-Be[0]>=360)it=-180,Qe=180;else if(it>Qe){const gt=this.getClusters([it,bt,180,St],ze),hn=this.getClusters([-180,bt,Qe,St],ze);return gt.concat(hn)}const yt=this.trees[this._limitZoom(ze)],Xe=yt.range(He(it),Tt(St),He(Qe),Tt(bt)),_t=yt.data,Gt=[];for(const gt of Xe){const hn=this.stride*gt;Gt.push(_t[hn+ft]>1?Ye(_t,hn,this.clusterProps):this.points[_t[hn+je]])}return Gt}getChildren(Be){const ze=this._getOriginId(Be),it=this._getOriginZoom(Be),bt="No cluster with the specified id.",Qe=this.trees[it];if(!Qe)throw new Error(bt);const St=Qe.data;if(ze*this.stride>=St.length)throw new Error(bt);const yt=this.options.radius/(this.options.extent*Math.pow(2,it-1)),Xe=Qe.within(St[ze*this.stride],St[ze*this.stride+1],yt),_t=[];for(const Gt of Xe){const gt=Gt*this.stride;St[gt+4]===Be&&_t.push(St[gt+ft]>1?Ye(St,gt,this.clusterProps):this.points[St[gt+je]])}if(_t.length===0)throw new Error(bt);return _t}getLeaves(Be,ze,it){const bt=[];return this._appendLeaves(bt,Be,ze=ze||10,it=it||0,0),bt}getTile(Be,ze,it){const bt=this.trees[this._limitZoom(Be)],Qe=Math.pow(2,Be),{extent:St,radius:yt}=this.options,Xe=yt/St,_t=(it-Xe)/Qe,Gt=(it+1+Xe)/Qe,gt={features:[]};return this._addTileFeatures(bt.range((ze-Xe)/Qe,_t,(ze+1+Xe)/Qe,Gt),bt.data,ze,it,Qe,gt),ze===0&&this._addTileFeatures(bt.range(1-Xe/Qe,_t,1,Gt),bt.data,Qe,it,Qe,gt),ze===Qe-1&&this._addTileFeatures(bt.range(0,_t,Xe/Qe,Gt),bt.data,-1,it,Qe,gt),gt.features.length?gt:null}getClusterExpansionZoom(Be){let ze=this._getOriginZoom(Be)-1;for(;ze<=this.options.maxZoom;){const it=this.getChildren(Be);if(ze++,it.length!==1)break;Be=it[0].properties.cluster_id}return ze}_appendLeaves(Be,ze,it,bt,Qe){const St=this.getChildren(ze);for(const yt of St){const Xe=yt.properties;if(Xe&&Xe.cluster?Qe+Xe.point_count<=bt?Qe+=Xe.point_count:Qe=this._appendLeaves(Be,Xe.cluster_id,it,bt,Qe):Qe<bt?Qe++:Be.push(yt),Be.length===it)break}return Qe}_createTree(Be){const ze=new o.bg(Be.length/this.stride|0,this.options.nodeSize,Float32Array);for(let it=0;it<Be.length;it+=this.stride)ze.add(Be[it],Be[it+1]);return ze.finish(),ze.data=Be,ze}_addTileFeatures(Be,ze,it,bt,Qe,St){for(const yt of Be){const Xe=yt*this.stride,_t=ze[Xe+ft]>1;let Gt,gt,hn;if(_t)Gt=at(ze,Xe,this.clusterProps),gt=ze[Xe],hn=ze[Xe+1];else{const Qr=this.points[ze[Xe+je]];Gt=Qr.properties;const[hr,Kn]=Qr.geometry.coordinates;gt=He(hr),hn=Tt(Kn)}const rr={type:1,geometry:[[Math.round(this.options.extent*(gt*Qe-it)),Math.round(this.options.extent*(hn*Qe-bt))]],tags:Gt};let br;br=_t||this.options.generateId?ze[Xe+je]:this.points[ze[Xe+je]].id,br!==void 0&&(rr.id=br),St.features.push(rr)}}_limitZoom(Be){return Math.max(this.options.minZoom,Math.min(Math.floor(+Be),this.options.maxZoom+1))}_cluster(Be,ze){const{radius:it,extent:bt,reduce:Qe,minPoints:St}=this.options,yt=it/(bt*Math.pow(2,ze)),Xe=Be.data,_t=[],Gt=this.stride;for(let gt=0;gt<Xe.length;gt+=Gt){if(Xe[gt+2]<=ze)continue;Xe[gt+2]=ze;const hn=Xe[gt],rr=Xe[gt+1],br=Be.within(Xe[gt],Xe[gt+1],yt),Qr=Xe[gt+ft];let hr=Qr;for(const Kn of br){const ur=Kn*Gt;Xe[ur+2]>ze&&(hr+=Xe[ur+ft])}if(hr>Qr&&hr>=St){let Kn,ur=hn*Qr,ni=rr*Qr,us=-1;const bi=(gt/Gt<<5)+(ze+1)+this.points.length;for(const is of br){const Fs=is*Gt;if(Xe[Fs+2]<=ze)continue;Xe[Fs+2]=ze;const zr=Xe[Fs+ft];ur+=Xe[Fs]*zr,ni+=Xe[Fs+1]*zr,Xe[Fs+4]=bi,Qe&&(Kn||(Kn=this._map(Xe,gt,!0),us=this.clusterProps.length,this.clusterProps.push(Kn)),Qe(Kn,this._map(Xe,Fs)))}Xe[gt+4]=bi,_t.push(ur/hr,ni/hr,1/0,bi,-1,hr),Qe&&_t.push(us)}else{for(let Kn=0;Kn<Gt;Kn++)_t.push(Xe[gt+Kn]);if(hr>1)for(const Kn of br){const ur=Kn*Gt;if(!(Xe[ur+2]<=ze)){Xe[ur+2]=ze;for(let ni=0;ni<Gt;ni++)_t.push(Xe[ur+ni])}}}}return _t}_getOriginId(Be){return Be-this.points.length>>5}_getOriginZoom(Be){return(Be-this.points.length)%32}_map(Be,ze,it){if(Be[ze+ft]>1){const St=this.clusterProps[Be[ze+Et]];return it?Object.assign({},St):St}const bt=this.points[Be[ze+je]].properties,Qe=this.options.map(bt);return it&&Qe===bt?Object.assign({},Qe):Qe}}function Ye(mt,Be,ze){return{type:"Feature",id:mt[Be+je],properties:at(mt,Be,ze),geometry:{type:"Point",coordinates:[(it=mt[Be],360*(it-.5)),Ut(mt[Be+1])]}};var it}function at(mt,Be,ze){const it=mt[Be+ft],bt=it>=1e4?`${Math.round(it/1e3)}k`:it>=1e3?Math.round(it/100)/10+"k":it,Qe=mt[Be+Et],St=Qe===-1?{}:Object.assign({},ze[Qe]);return Object.assign(St,{cluster:!0,cluster_id:mt[Be+je],point_count:it,point_count_abbreviated:bt})}function He(mt){return mt/360+.5}function Tt(mt){const Be=Math.sin(mt*Math.PI/180),ze=.5-.25*Math.log((1+Be)/(1-Be))/Math.PI;return ze<0?0:ze>1?1:ze}function Ut(mt){const Be=(180-360*mt)*Math.PI/180;return 360*Math.atan(Math.exp(Be))/Math.PI-90}var Rt={exports:{}};Rt.exports=function(){function mt(en,dn,En,Vn){for(var Dt,sn=Vn,Mn=En-dn>>1,Rn=En-dn,er=en[dn],Qn=en[dn+1],Nr=en[En],si=en[En+1],Tn=dn+3;Tn<En;Tn+=3){var jt=Be(en[Tn],en[Tn+1],er,Qn,Nr,si);if(jt>sn)Dt=Tn,sn=jt;else if(jt===sn){var Zn=Math.abs(Tn-Mn);Zn<Rn&&(Dt=Tn,Rn=Zn)}}sn>Vn&&(Dt-dn>3&&mt(en,dn,Dt,Vn),en[Dt+2]=sn,En-Dt>3&&mt(en,Dt,En,Vn))}function Be(en,dn,En,Vn,Dt,sn){var Mn=Dt-En,Rn=sn-Vn;if(Mn!==0||Rn!==0){var er=((en-En)*Mn+(dn-Vn)*Rn)/(Mn*Mn+Rn*Rn);er>1?(En=Dt,Vn=sn):er>0&&(En+=Mn*er,Vn+=Rn*er)}return(Mn=en-En)*Mn+(Rn=dn-Vn)*Rn}function ze(en,dn,En,Vn){var Dt={id:en===void 0?null:en,type:dn,geometry:En,tags:Vn,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(sn){var Mn=sn.geometry,Rn=sn.type;if(Rn==="Point"||Rn==="MultiPoint"||Rn==="LineString")it(sn,Mn);else if(Rn==="Polygon"||Rn==="MultiLineString")for(var er=0;er<Mn.length;er++)it(sn,Mn[er]);else if(Rn==="MultiPolygon")for(er=0;er<Mn.length;er++)for(var Qn=0;Qn<Mn[er].length;Qn++)it(sn,Mn[er][Qn])}(Dt),Dt}function it(en,dn){for(var En=0;En<dn.length;En+=3)en.minX=Math.min(en.minX,dn[En]),en.minY=Math.min(en.minY,dn[En+1]),en.maxX=Math.max(en.maxX,dn[En]),en.maxY=Math.max(en.maxY,dn[En+1])}function bt(en,dn,En,Vn){if(dn.geometry){var Dt=dn.geometry.coordinates,sn=dn.geometry.type,Mn=Math.pow(En.tolerance/((1<<En.maxZoom)*En.extent),2),Rn=[],er=dn.id;if(En.promoteId?er=dn.properties[En.promoteId]:En.generateId&&(er=Vn||0),sn==="Point")Qe(Dt,Rn);else if(sn==="MultiPoint")for(var Qn=0;Qn<Dt.length;Qn++)Qe(Dt[Qn],Rn);else if(sn==="LineString")St(Dt,Rn,Mn,!1);else if(sn==="MultiLineString"){if(En.lineMetrics){for(Qn=0;Qn<Dt.length;Qn++)St(Dt[Qn],Rn=[],Mn,!1),en.push(ze(er,"LineString",Rn,dn.properties));return}yt(Dt,Rn,Mn,!1)}else if(sn==="Polygon")yt(Dt,Rn,Mn,!0);else{if(sn!=="MultiPolygon"){if(sn==="GeometryCollection"){for(Qn=0;Qn<dn.geometry.geometries.length;Qn++)bt(en,{id:er,geometry:dn.geometry.geometries[Qn],properties:dn.properties},En,Vn);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qn=0;Qn<Dt.length;Qn++){var Nr=[];yt(Dt[Qn],Nr,Mn,!0),Rn.push(Nr)}}en.push(ze(er,sn,Rn,dn.properties))}}function Qe(en,dn){dn.push(Xe(en[0])),dn.push(_t(en[1])),dn.push(0)}function St(en,dn,En,Vn){for(var Dt,sn,Mn=0,Rn=0;Rn<en.length;Rn++){var er=Xe(en[Rn][0]),Qn=_t(en[Rn][1]);dn.push(er),dn.push(Qn),dn.push(0),Rn>0&&(Mn+=Vn?(Dt*Qn-er*sn)/2:Math.sqrt(Math.pow(er-Dt,2)+Math.pow(Qn-sn,2))),Dt=er,sn=Qn}var Nr=dn.length-3;dn[2]=1,mt(dn,0,Nr,En),dn[Nr+2]=1,dn.size=Math.abs(Mn),dn.start=0,dn.end=dn.size}function yt(en,dn,En,Vn){for(var Dt=0;Dt<en.length;Dt++){var sn=[];St(en[Dt],sn,En,Vn),dn.push(sn)}}function Xe(en){return en/360+.5}function _t(en){var dn=Math.sin(en*Math.PI/180),En=.5-.25*Math.log((1+dn)/(1-dn))/Math.PI;return En<0?0:En>1?1:En}function Gt(en,dn,En,Vn,Dt,sn,Mn,Rn){if(Vn/=dn,sn>=(En/=dn)&&Mn<Vn)return en;if(Mn<En||sn>=Vn)return null;for(var er=[],Qn=0;Qn<en.length;Qn++){var Nr=en[Qn],si=Nr.geometry,Tn=Nr.type,jt=Dt===0?Nr.minX:Nr.minY,Zn=Dt===0?Nr.maxX:Nr.maxY;if(jt>=En&&Zn<Vn)er.push(Nr);else if(!(Zn<En||jt>=Vn)){var Vt=[];if(Tn==="Point"||Tn==="MultiPoint")gt(si,Vt,En,Vn,Dt);else if(Tn==="LineString")hn(si,Vt,En,Vn,Dt,!1,Rn.lineMetrics);else if(Tn==="MultiLineString")br(si,Vt,En,Vn,Dt,!1);else if(Tn==="Polygon")br(si,Vt,En,Vn,Dt,!0);else if(Tn==="MultiPolygon")for(var Xn=0;Xn<si.length;Xn++){var Ur=[];br(si[Xn],Ur,En,Vn,Dt,!0),Ur.length&&Vt.push(Ur)}if(Vt.length){if(Rn.lineMetrics&&Tn==="LineString"){for(Xn=0;Xn<Vt.length;Xn++)er.push(ze(Nr.id,Tn,Vt[Xn],Nr.tags));continue}Tn!=="LineString"&&Tn!=="MultiLineString"||(Vt.length===1?(Tn="LineString",Vt=Vt[0]):Tn="MultiLineString"),Tn!=="Point"&&Tn!=="MultiPoint"||(Tn=Vt.length===3?"Point":"MultiPoint"),er.push(ze(Nr.id,Tn,Vt,Nr.tags))}}}return er.length?er:null}function gt(en,dn,En,Vn,Dt){for(var sn=0;sn<en.length;sn+=3){var Mn=en[sn+Dt];Mn>=En&&Mn<=Vn&&(dn.push(en[sn]),dn.push(en[sn+1]),dn.push(en[sn+2]))}}function hn(en,dn,En,Vn,Dt,sn,Mn){for(var Rn,er,Qn=rr(en),Nr=Dt===0?hr:Kn,si=en.start,Tn=0;Tn<en.length-3;Tn+=3){var jt=en[Tn],Zn=en[Tn+1],Vt=en[Tn+2],Xn=en[Tn+3],Ur=en[Tn+4],Cr=Dt===0?jt:Zn,Is=Dt===0?Xn:Ur,Bo=!1;Mn&&(Rn=Math.sqrt(Math.pow(jt-Xn,2)+Math.pow(Zn-Ur,2))),Cr<En?Is>En&&(er=Nr(Qn,jt,Zn,Xn,Ur,En),Mn&&(Qn.start=si+Rn*er)):Cr>Vn?Is<Vn&&(er=Nr(Qn,jt,Zn,Xn,Ur,Vn),Mn&&(Qn.start=si+Rn*er)):Qr(Qn,jt,Zn,Vt),Is<En&&Cr>=En&&(er=Nr(Qn,jt,Zn,Xn,Ur,En),Bo=!0),Is>Vn&&Cr<=Vn&&(er=Nr(Qn,jt,Zn,Xn,Ur,Vn),Bo=!0),!sn&&Bo&&(Mn&&(Qn.end=si+Rn*er),dn.push(Qn),Qn=rr(en)),Mn&&(si+=Rn)}var Qs=en.length-3;jt=en[Qs],Zn=en[Qs+1],Vt=en[Qs+2],(Cr=Dt===0?jt:Zn)>=En&&Cr<=Vn&&Qr(Qn,jt,Zn,Vt),Qs=Qn.length-3,sn&&Qs>=3&&(Qn[Qs]!==Qn[0]||Qn[Qs+1]!==Qn[1])&&Qr(Qn,Qn[0],Qn[1],Qn[2]),Qn.length&&dn.push(Qn)}function rr(en){var dn=[];return dn.size=en.size,dn.start=en.start,dn.end=en.end,dn}function br(en,dn,En,Vn,Dt,sn){for(var Mn=0;Mn<en.length;Mn++)hn(en[Mn],dn,En,Vn,Dt,sn,!1)}function Qr(en,dn,En,Vn){en.push(dn),en.push(En),en.push(Vn)}function hr(en,dn,En,Vn,Dt,sn){var Mn=(sn-dn)/(Vn-dn);return en.push(sn),en.push(En+(Dt-En)*Mn),en.push(1),Mn}function Kn(en,dn,En,Vn,Dt,sn){var Mn=(sn-En)/(Dt-En);return en.push(dn+(Vn-dn)*Mn),en.push(sn),en.push(1),Mn}function ur(en,dn){for(var En=[],Vn=0;Vn<en.length;Vn++){var Dt,sn=en[Vn],Mn=sn.type;if(Mn==="Point"||Mn==="MultiPoint"||Mn==="LineString")Dt=ni(sn.geometry,dn);else if(Mn==="MultiLineString"||Mn==="Polygon"){Dt=[];for(var Rn=0;Rn<sn.geometry.length;Rn++)Dt.push(ni(sn.geometry[Rn],dn))}else if(Mn==="MultiPolygon")for(Dt=[],Rn=0;Rn<sn.geometry.length;Rn++){for(var er=[],Qn=0;Qn<sn.geometry[Rn].length;Qn++)er.push(ni(sn.geometry[Rn][Qn],dn));Dt.push(er)}En.push(ze(sn.id,Mn,Dt,sn.tags))}return En}function ni(en,dn){var En=[];En.size=en.size,en.start!==void 0&&(En.start=en.start,En.end=en.end);for(var Vn=0;Vn<en.length;Vn+=3)En.push(en[Vn]+dn,en[Vn+1],en[Vn+2]);return En}function us(en,dn){if(en.transformed)return en;var En,Vn,Dt,sn=1<<en.z,Mn=en.x,Rn=en.y;for(En=0;En<en.features.length;En++){var er=en.features[En],Qn=er.geometry,Nr=er.type;if(er.geometry=[],Nr===1)for(Vn=0;Vn<Qn.length;Vn+=2)er.geometry.push(bi(Qn[Vn],Qn[Vn+1],dn,sn,Mn,Rn));else for(Vn=0;Vn<Qn.length;Vn++){var si=[];for(Dt=0;Dt<Qn[Vn].length;Dt+=2)si.push(bi(Qn[Vn][Dt],Qn[Vn][Dt+1],dn,sn,Mn,Rn));er.geometry.push(si)}}return en.transformed=!0,en}function bi(en,dn,En,Vn,Dt,sn){return[Math.round(En*(en*Vn-Dt)),Math.round(En*(dn*Vn-sn))]}function is(en,dn,En,Vn,Dt){for(var sn=dn===Dt.maxZoom?0:Dt.tolerance/((1<<dn)*Dt.extent),Mn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:En,y:Vn,z:dn,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Rn=0;Rn<en.length;Rn++){Mn.numFeatures++,Fs(Mn,en[Rn],sn,Dt);var er=en[Rn].minX,Qn=en[Rn].minY,Nr=en[Rn].maxX,si=en[Rn].maxY;er<Mn.minX&&(Mn.minX=er),Qn<Mn.minY&&(Mn.minY=Qn),Nr>Mn.maxX&&(Mn.maxX=Nr),si>Mn.maxY&&(Mn.maxY=si)}return Mn}function Fs(en,dn,En,Vn){var Dt=dn.geometry,sn=dn.type,Mn=[];if(sn==="Point"||sn==="MultiPoint")for(var Rn=0;Rn<Dt.length;Rn+=3)Mn.push(Dt[Rn]),Mn.push(Dt[Rn+1]),en.numPoints++,en.numSimplified++;else if(sn==="LineString")zr(Mn,Dt,en,En,!1,!1);else if(sn==="MultiLineString"||sn==="Polygon")for(Rn=0;Rn<Dt.length;Rn++)zr(Mn,Dt[Rn],en,En,sn==="Polygon",Rn===0);else if(sn==="MultiPolygon")for(var er=0;er<Dt.length;er++){var Qn=Dt[er];for(Rn=0;Rn<Qn.length;Rn++)zr(Mn,Qn[Rn],en,En,!0,Rn===0)}if(Mn.length){var Nr=dn.tags||null;if(sn==="LineString"&&Vn.lineMetrics){for(var si in Nr={},dn.tags)Nr[si]=dn.tags[si];Nr.mapbox_clip_start=Dt.start/Dt.size,Nr.mapbox_clip_end=Dt.end/Dt.size}var Tn={geometry:Mn,type:sn==="Polygon"||sn==="MultiPolygon"?3:sn==="LineString"||sn==="MultiLineString"?2:1,tags:Nr};dn.id!==null&&(Tn.id=dn.id),en.features.push(Tn)}}function zr(en,dn,En,Vn,Dt,sn){var Mn=Vn*Vn;if(Vn>0&&dn.size<(Dt?Mn:Vn))En.numPoints+=dn.length/3;else{for(var Rn=[],er=0;er<dn.length;er+=3)(Vn===0||dn[er+2]>Mn)&&(En.numSimplified++,Rn.push(dn[er]),Rn.push(dn[er+1])),En.numPoints++;Dt&&function(Qn,Nr){for(var si=0,Tn=0,jt=Qn.length,Zn=jt-2;Tn<jt;Zn=Tn,Tn+=2)si+=(Qn[Tn]-Qn[Zn])*(Qn[Tn+1]+Qn[Zn+1]);if(si>0===Nr)for(Tn=0,jt=Qn.length;Tn<jt/2;Tn+=2){var Vt=Qn[Tn],Xn=Qn[Tn+1];Qn[Tn]=Qn[jt-2-Tn],Qn[Tn+1]=Qn[jt-1-Tn],Qn[jt-2-Tn]=Vt,Qn[jt-1-Tn]=Xn}}(Rn,sn),en.push(Rn)}}function ss(en,dn){var En=(dn=this.options=function(Dt,sn){for(var Mn in sn)Dt[Mn]=sn[Mn];return Dt}(Object.create(this.options),dn)).debug;if(En&&console.time("preprocess data"),dn.maxZoom<0||dn.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(dn.promoteId&&dn.generateId)throw new Error("promoteId and generateId cannot be used together.");var Vn=function(Dt,sn){var Mn=[];if(Dt.type==="FeatureCollection")for(var Rn=0;Rn<Dt.features.length;Rn++)bt(Mn,Dt.features[Rn],sn,Rn);else bt(Mn,Dt.type==="Feature"?Dt:{geometry:Dt},sn);return Mn}(en,dn);this.tiles={},this.tileCoords=[],En&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",dn.indexMaxZoom,dn.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Vn=function(Dt,sn){var Mn=sn.buffer/sn.extent,Rn=Dt,er=Gt(Dt,1,-1-Mn,Mn,0,-1,2,sn),Qn=Gt(Dt,1,1-Mn,2+Mn,0,-1,2,sn);return(er||Qn)&&(Rn=Gt(Dt,1,-Mn,1+Mn,0,-1,2,sn)||[],er&&(Rn=ur(er,1).concat(Rn)),Qn&&(Rn=Rn.concat(ur(Qn,-1)))),Rn}(Vn,dn)).length&&this.splitTile(Vn,0,0,0),En&&(Vn.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zi(en,dn,En){return 32*((1<<en)*En+dn)+en}return ss.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ss.prototype.splitTile=function(en,dn,En,Vn,Dt,sn,Mn){for(var Rn=[en,dn,En,Vn],er=this.options,Qn=er.debug;Rn.length;){Vn=Rn.pop(),En=Rn.pop(),dn=Rn.pop(),en=Rn.pop();var Nr=1<<dn,si=Zi(dn,En,Vn),Tn=this.tiles[si];if(!Tn&&(Qn>1&&console.time("creation"),Tn=this.tiles[si]=is(en,dn,En,Vn,er),this.tileCoords.push({z:dn,x:En,y:Vn}),Qn)){Qn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",dn,En,Vn,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));var jt="z"+dn;this.stats[jt]=(this.stats[jt]||0)+1,this.total++}if(Tn.source=en,Dt){if(dn===er.maxZoom||dn===Dt)continue;var Zn=1<<Dt-dn;if(En!==Math.floor(sn/Zn)||Vn!==Math.floor(Mn/Zn))continue}else if(dn===er.indexMaxZoom||Tn.numPoints<=er.indexMaxPoints)continue;if(Tn.source=null,en.length!==0){Qn>1&&console.time("clipping");var Vt,Xn,Ur,Cr,Is,Bo,Qs=.5*er.buffer/er.extent,xh=.5-Qs,zc=.5+Qs,zd=1+Qs;Vt=Xn=Ur=Cr=null,Is=Gt(en,Nr,En-Qs,En+zc,0,Tn.minX,Tn.maxX,er),Bo=Gt(en,Nr,En+xh,En+zd,0,Tn.minX,Tn.maxX,er),en=null,Is&&(Vt=Gt(Is,Nr,Vn-Qs,Vn+zc,1,Tn.minY,Tn.maxY,er),Xn=Gt(Is,Nr,Vn+xh,Vn+zd,1,Tn.minY,Tn.maxY,er),Is=null),Bo&&(Ur=Gt(Bo,Nr,Vn-Qs,Vn+zc,1,Tn.minY,Tn.maxY,er),Cr=Gt(Bo,Nr,Vn+xh,Vn+zd,1,Tn.minY,Tn.maxY,er),Bo=null),Qn>1&&console.timeEnd("clipping"),Rn.push(Vt||[],dn+1,2*En,2*Vn),Rn.push(Xn||[],dn+1,2*En,2*Vn+1),Rn.push(Ur||[],dn+1,2*En+1,2*Vn),Rn.push(Cr||[],dn+1,2*En+1,2*Vn+1)}}},ss.prototype.getTile=function(en,dn,En){var Vn=this.options,Dt=Vn.extent,sn=Vn.debug;if(en<0||en>24)return null;var Mn=1<<en,Rn=Zi(en,dn=(dn%Mn+Mn)%Mn,En);if(this.tiles[Rn])return us(this.tiles[Rn],Dt);sn>1&&console.log("drilling down to z%d-%d-%d",en,dn,En);for(var er,Qn=en,Nr=dn,si=En;!er&&Qn>0;)Qn--,Nr=Math.floor(Nr/2),si=Math.floor(si/2),er=this.tiles[Zi(Qn,Nr,si)];return er&&er.source?(sn>1&&console.log("found parent tile z%d-%d-%d",Qn,Nr,si),sn>1&&console.time("drilling down"),this.splitTile(er.source,Qn,Nr,si,en,dn,En),sn>1&&console.timeEnd("drilling down"),this.tiles[Rn]?us(this.tiles[Rn],Dt):null):null},function(en,dn){return new ss(en,dn)}}();var Bt=o.dK(Rt.exports);function Ht(mt,Be){const ze=mt.tileID.canonical;if(!this._geoJSONIndex)return Be(null,null);const it=this._geoJSONIndex.getTile(ze.z,ze.x,ze.y);if(!it)return Be(null,null);const bt=new W(it.features);let Qe=Re(bt);Qe.byteOffset===0&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),Be(null,{vectorTile:bt,rawData:Qe.buffer})}class xt extends I{constructor(Be,ze,it,bt,Qe,St){super(Be,ze,it,bt,Ht,St),Qe&&(this.loadGeoJSON=Qe)}loadData(Be,ze){const it=Be&&Be.request,bt=it&&it.collectResourceTiming;this.loadGeoJSON(Be,(Qe,St)=>{if(Qe||!St)return ze(Qe);if(typeof St!="object")return ze(new Error(`Input data given to '${Be.source}' is not a valid GeoJSON object.`));{H(St,!0);try{if(Be.filter){const Xe=o.r(Be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Xe.result==="error")throw new Error(Xe.value.map(Gt=>`${Gt.key}: ${Gt.message}`).join(", "));St={type:"FeatureCollection",features:St.features.filter(Gt=>Xe.value.evaluate({zoom:0},Gt))}}this._geoJSONIndex=Be.cluster?new ke(function({superclusterOptions:Xe,clusterProperties:_t}){if(!_t||!Xe)return Xe;const Gt={},gt={},hn={accumulated:null,zoom:0},rr={properties:null},br=Object.keys(_t);for(const Qr of br){const[hr,Kn]=_t[Qr],ur=o.r(Kn),ni=o.r(typeof hr=="string"?[hr,["accumulated"],["get",Qr]]:hr);Gt[Qr]=ur.value,gt[Qr]=ni.value}return Xe.map=Qr=>{rr.properties=Qr;const hr={};for(const Kn of br)hr[Kn]=Gt[Kn].evaluate(hn,rr);return hr},Xe.reduce=(Qr,hr)=>{rr.properties=hr;for(const Kn of br)hn.accumulated=Qr[Kn],Qr[Kn]=gt[Kn].evaluate(hn,rr)},Xe}(Be)).load(St.features):Bt(St,Be.geojsonVtOptions)}catch(Xe){return ze(Xe)}this.loaded={};const yt={};if(bt){const Xe=d(it);Xe&&(yt.resourceTiming={},yt.resourceTiming[Be.source]=JSON.parse(JSON.stringify(Xe)))}ze(null,yt)}})}reloadTile(Be,ze){const it=this.loaded;return it&&it[Be.uid]?super.reloadTile(Be,ze):this.loadTile(Be,ze)}loadGeoJSON(Be,ze){if(Be.request)o.g(Be.request,ze);else{if(typeof Be.data!="string")return ze(new Error(`Input data given to '${Be.source}' is not a valid GeoJSON object.`));try{return ze(null,JSON.parse(Be.data))}catch{return ze(new Error(`Input data given to '${Be.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Be,ze){try{ze(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(it){ze(it)}}getClusterChildren(Be,ze){try{ze(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(it){ze(it)}}getClusterLeaves(Be,ze){try{ze(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(it){ze(it)}}}class Zt{constructor(Be,ze){this.tileID=new o.am(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),this.tileZoom=Be.tileZoom,this.uid=Be.uid,this.zoom=Be.zoom,this.canonical=Be.tileID.canonical,this.pixelRatio=Be.pixelRatio,this.tileSize=Be.tileSize,this.source=Be.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Be.projection,this.brightness=ze}parse(Be,ze,it,bt){this.status="parsing";const Qe=new o.am(it.tileID.overscaledZ,it.tileID.wrap,it.tileID.canonical.z,it.tileID.canonical.x,it.tileID.canonical.y),St={},yt=ze.familiesBySource[it.source],Xe=new o.dC(Qe,it.promoteId);return Xe.bucketLayerIDs=[],Xe.is3DTile=!0,o.dP(Be).then(_t=>{if(!_t)return bt(new Error("Could not parse tile"));const Gt=o.dQ(_t,1/o.bR(it.tileID.canonical)),gt=_t.json.extensionsUsed&&_t.json.extensionsUsed.includes("MAPBOX_mesh_features")||_t.json.asset.extras&&_t.json.asset.extras.MAPBOX_mesh_features,hn=_t.json.extensionsUsed&&_t.json.extensionsUsed.includes("EXT_meshopt_compression"),rr=new o.K(this.zoom,{brightness:this.brightness});for(const br in yt)for(const Qr of yt[br]){const hr=Qr[0];Xe.bucketLayerIDs.push(Qr.map(ur=>ur.id)),hr.recalculate(rr,[]);const Kn=new o.dR(Gt,Qe,gt,hn,this.brightness,Xe);gt||(Kn.needsUpload=!0),St[hr.fqid]=Kn,Kn.evaluate(hr)}this.status="done",bt(null,{buckets:St,featureIndex:Xe})}).catch(_t=>bt(new Error(_t.message)))}}class un{constructor(Be,ze,it,bt,Qe,St){this.actor=Be,this.layerIndex=ze,this.brightness=St,this.loading={},this.loaded={}}loadTile(Be,ze){const it=Be.uid,bt=this.loading[it]=new Zt(Be,this.brightness);o.a_(Be.request,(Qe,St)=>{const yt=!this.loading[it];return delete this.loading[it],yt||Qe?(bt.status="done",yt||(this.loaded[it]=bt),ze(Qe)):St&&St.byteLength!==0?void bt.parse(St,this.layerIndex,Be,(Xe,_t)=>{bt.status="done",this.loaded=this.loaded||{},this.loaded[it]=bt,Xe||!_t?ze(Xe):ze(null,_t)}):(bt.status="done",this.loaded[it]=bt,ze())})}reloadTile(Be,ze){const it=this.loaded,bt=Be.uid;if(it&&it[bt]){const Qe=it[bt];Qe.projection=Be.projection,Qe.brightness=Be.brightness;const St=(yt,Xe)=>{Qe.reloadCallback&&(delete Qe.reloadCallback,this.loadTile(Be,ze)),ze(yt,Xe)};Qe.status==="parsing"?Qe.reloadCallback=St:Qe.status==="done"&&this.loadTile(Be,ze)}}abortTile(Be,ze){const it=Be.uid;this.loading[it]&&delete this.loading[it],ze()}removeTile(Be,ze){const it=this.loaded,bt=Be.uid;it&&it[bt]&&delete it[bt],ze()}}class Ft{constructor(Be){this.self=Be,this.actor=new o.dS(Be,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.bo({name:"mercator"}),this.workerSourceTypes={vector:I,geojson:xt,"batched-model":un},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ze,it)=>{if(this.workerSourceTypes[ze])throw new Error(`Worker source with name "${ze}" already registered.`);this.workerSourceTypes[ze]=it},this.self.registerRTLTextPlugin=ze=>{if(o.dT.isParsed())throw new Error("RTL text plugin already registered.");o.dT.applyArabicShaping=ze.applyArabicShaping,o.dT.processBidirectionalText=ze.processBidirectionalText,o.dT.processStyledBidirectionalText=ze.processStyledBidirectionalText}}clearCaches(Be,ze,it){delete this.layerIndexes[Be],delete this.availableImages[Be],delete this.workerSources[Be],delete this.demWorkerSources[Be],delete this.rasterArrayWorkerSource,it()}checkIfReady(Be,ze,it){it()}setReferrer(Be,ze){this.referrer=ze}spriteLoaded(Be,{scope:ze,isLoaded:it}){if(this.isSpriteLoaded[Be]||(this.isSpriteLoaded[Be]={}),this.isSpriteLoaded[Be][ze]=it,this.workerSources[Be]&&this.workerSources[Be][ze])for(const bt in this.workerSources[Be][ze]){const Qe=this.workerSources[Be][ze][bt];for(const St in Qe)Qe[St]instanceof I&&(Qe[St].isSpriteLoaded=it,Qe[St].fire(new o.b("isSpriteLoaded")))}}setImages(Be,{scope:ze,images:it},bt){if(this.availableImages[Be]||(this.availableImages[Be]={}),this.availableImages[Be][ze]=it,this.workerSources[Be]&&this.workerSources[Be][ze]){for(const Qe in this.workerSources[Be][ze]){const St=this.workerSources[Be][ze][Qe];for(const yt in St)St[yt].availableImages=it}bt()}else bt()}setProjection(Be,ze){this.projections[Be]=o.bo(ze)}setBrightness(Be,ze,it){this.brightness=ze,it()}setLayers(Be,ze,it){this.getLayerIndex(Be,ze.scope).replace(ze.layers,ze.options),it()}updateLayers(Be,ze,it){this.getLayerIndex(Be,ze.scope).update(ze.layers,ze.removedIds,ze.options),it()}loadTile(Be,ze,it){ze.projection=this.projections[Be]||this.defaultProjection,this.getWorkerSource(Be,ze.type,ze.source,ze.scope).loadTile(ze,it)}loadDEMTile(Be,ze,it){this.getDEMWorkerSource(Be,ze.source,ze.scope).loadTile(ze,it)}decodeRasterArray(Be,ze,it){this.getRasterArrayWorkerSource().decodeRasterArray(ze,it)}reloadTile(Be,ze,it){ze.projection=this.projections[Be]||this.defaultProjection,this.getWorkerSource(Be,ze.type,ze.source,ze.scope).reloadTile(ze,it)}abortTile(Be,ze,it){this.getWorkerSource(Be,ze.type,ze.source,ze.scope).abortTile(ze,it)}removeTile(Be,ze,it){this.getWorkerSource(Be,ze.type,ze.source,ze.scope).removeTile(ze,it)}removeSource(Be,ze,it){if(!(this.workerSources[Be]&&this.workerSources[Be][ze.scope]&&this.workerSources[Be][ze.scope][ze.type]&&this.workerSources[Be][ze.scope][ze.type][ze.source]))return;const bt=this.workerSources[Be][ze.scope][ze.type][ze.source];delete this.workerSources[Be][ze.scope][ze.type][ze.source],bt.removeSource!==void 0?bt.removeSource(ze,it):it()}loadWorkerSource(Be,ze,it){try{this.self.importScripts(ze.url),it()}catch(bt){it(bt.toString())}}syncRTLPluginState(Be,ze,it){try{o.dT.setState(ze);const bt=o.dT.getPluginURL();if(o.dT.isLoaded()&&!o.dT.isParsed()&&bt!=null){this.self.importScripts(bt);const Qe=o.dT.isParsed();it(Qe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${bt}`),Qe)}}catch(bt){it(bt.toString())}}setDracoUrl(Be,ze){this.dracoUrl=ze}getAvailableImages(Be,ze){this.availableImages[Be]||(this.availableImages[Be]={});let it=this.availableImages[Be][ze];return it||(it=[]),it}getLayerIndex(Be,ze){this.layerIndexes[Be]||(this.layerIndexes[Be]={});let it=this.layerIndexes[Be][ze];return it||(it=this.layerIndexes[Be][ze]=new v,it.scope=ze),it}getWorkerSource(Be,ze,it,bt){if(this.workerSources[Be]||(this.workerSources[Be]={}),this.workerSources[Be][bt]||(this.workerSources[Be][bt]={}),this.workerSources[Be][bt][ze]||(this.workerSources[Be][bt][ze]={}),this.isSpriteLoaded[Be]||(this.isSpriteLoaded[Be]={}),!this.workerSources[Be][bt][ze][it]){const Qe={send:(St,yt,Xe,_t,Gt,gt)=>{this.actor.send(St,yt,Xe,Be,Gt,gt)},scheduler:this.actor.scheduler};this.workerSources[Be][bt][ze][it]=new this.workerSourceTypes[ze](Qe,this.getLayerIndex(Be,bt),this.getAvailableImages(Be,bt),this.isSpriteLoaded[Be][bt],void 0,this.brightness)}return this.workerSources[Be][bt][ze][it]}getDEMWorkerSource(Be,ze,it){return this.demWorkerSources[Be]||(this.demWorkerSources[Be]={}),this.demWorkerSources[Be][it]||(this.demWorkerSources[Be][it]={}),this.demWorkerSources[Be][it][ze]||(this.demWorkerSources[Be][it][ze]=new P),this.demWorkerSources[Be][it][ze]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new F),this.rasterArrayWorkerSource}enforceCacheSizeLimit(Be,ze){o.dU(ze)}getWorkerPerformanceMetrics(Be,ze,it){it(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ft(self)),Ft}),a(["./shared"],function(o){function d(w,f){if(Array.isArray(w)){if(!Array.isArray(f)||w.length!==f.length)return!1;for(let m=0;m<w.length;m++)if(!d(w[m],f[m]))return!1;return!0}if(typeof w=="object"&&w!==null&&f!==null){if(typeof f!="object"||Object.keys(w).length!==Object.keys(f).length)return!1;for(const m in w)if(!d(w[m],f[m]))return!1;return!0}return w===f}var p=A;function A(w){return!function(f){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,B,R=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(R);try{B=new Worker(k),E=!0}catch{E=!1}return B&&B.terminate(),URL.revokeObjectURL(k),E}()?function(){var E=document.createElement("canvas");E.width=E.height=1;var B=E.getContext("2d");if(!B)return!1;var R=B.getImageData(0,0,1,1);return R&&R.width===E.width}()?(v[m=f&&f.failIfMajorPerformanceCaveat]===void 0&&(v[m]=function(E){var B,R=function(k){var z=document.createElement("canvas"),K=Object.create(A.webGLContextAttributes);return K.failIfMajorPerformanceCaveat=k,z.getContext("webgl2",K)}(E);if(!R)return!1;try{B=R.createShader(R.VERTEX_SHADER)}catch{return!1}return!(!B||R.isContextLost())&&(R.shaderSource(B,"void main() {}"),R.compileShader(B),R.getShaderParameter(B,R.COMPILE_STATUS)===!0)}(m)),v[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var m}(w)}var v={};function y(w,f,m){const E=document.createElement(w);return f!=null&&(E.className=f),m&&m.appendChild(E),E}function C(w,f,m){const E=document.createElementNS("http://www.w3.org/2000/svg",w);for(const B of Object.keys(f))E.setAttributeNS(null,B,String(f[B]));return m&&m.appendChild(E),E}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const x=typeof document<"u"?document.documentElement&&document.documentElement.style:null,M=x&&x.userSelect!==void 0?"userSelect":"WebkitUserSelect";let I;function P(){x&&M&&(I=x[M],x[M]="none")}function F(){x&&M&&(x[M]=I)}function D(w){w.preventDefault(),w.stopPropagation(),window.removeEventListener("click",D,!0)}function V(){window.addEventListener("click",D,!0),window.setTimeout(()=>{window.removeEventListener("click",D,!0)},0)}function H(w,f){const m=w.getBoundingClientRect();return W(w,m,f)}function Q(w,f){const m=w.getBoundingClientRect(),E=[];for(let B=0;B<f.length;B++)E.push(W(w,m,f[B]));return E}function G(w){return window.InstallTrigger!==void 0&&w.button===2&&w.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:w.button}function W(w,f,m){const E=w.offsetWidth===f.width?1:w.offsetWidth/f.width;return new o.P((m.clientX-f.left)*E,(m.clientY-f.top)*E)}class te{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(f,m){this._updatedSourceCaches[f]=m,this.setDirty()}discardSourceCacheUpdate(f){delete this._updatedSourceCaches[f]}updateLayer(f){const m=f.scope;this._updatedLayers[m]=this._updatedLayers[m]||new Set,this._updatedLayers[m].add(f.id),this.setDirty()}removeLayer(f){const m=f.scope;this._removedLayers[m]=this._removedLayers[m]||{},this._updatedLayers[m]=this._updatedLayers[m]||new Set,this._removedLayers[m][f.id]=f,this._updatedLayers[m].delete(f.id),this._updatedPaintProps.delete(f.fqid),this.setDirty()}getRemovedLayer(f){return this._removedLayers[f.scope]?this._removedLayers[f.scope][f.id]:null}discardLayerRemoval(f){this._removedLayers[f.scope]&&delete this._removedLayers[f.scope][f.id]}getLayerUpdatesByScope(){const f={};for(const m in this._updatedLayers)f[m]=f[m]||{},f[m].updatedIds=Array.from(this._updatedLayers[m].values());for(const m in this._removedLayers)f[m]=f[m]||{},f[m].removedIds=Object.keys(this._removedLayers[m]);return f}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(f){this._updatedPaintProps.add(f.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(f){this._updatedImages.add(f),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}class q extends o.E{constructor(f){super(),this.requestManager=f,this.models={"":{}},this.numModelsLoading={}}loadModel(f,m){return o.l(this.requestManager.transformRequest(m,o.R.Model).url).then(E=>{if(!E)return;const B=o.c(E),R=new o.M(f,void 0,void 0,B);return R.computeBoundsAndApplyParent(),R}).catch(E=>{this.fire(new o.a(new Error(`Could not load model ${f} from ${m}: ${E.message}`)))})}load(f,m){this.models[m]||(this.models[m]={});const E=Object.keys(f);this.numModelsLoading[m]=(this.numModelsLoading[m]||0)+E.length;const B=[];for(const R of E)B.push(this.loadModel(R,f[R]));Promise.allSettled(B).then(R=>{for(let k=0;k<R.length;k++){const{status:z,value:K}=R[k];z==="fulfilled"&&K&&(this.models[m][E[k]]=K)}this.numModelsLoading[m]-=E.length,this.fire(new o.b("data",{dataType:"style"}))}).catch(R=>{this.fire(new o.a(new Error(`Could not load models: ${R.message}`)))})}isLoaded(){for(const f in this.numModelsLoading)if(this.numModelsLoading[f]>0)return!1;return!0}hasModel(f,m){return!!this.getModel(f,m)}getModel(f,m){return this.models[m]||(this.models[m]={}),this.models[m][f]}addModel(f,m,E){this.models[E]||(this.models[E]={}),this.hasModel(f,E)&&this.removeModel(f,E),this.load({[f]:this.requestManager.normalizeModelURL(m)},E)}addModels(f,m){const E={};for(const B in f)E[B]=this.requestManager.normalizeModelURL(f[B]);this.load(E,m)}removeModel(f,m){this.models[m]||(this.models[m]={});const E=this.models[m][f];delete this.models[m][f],E.destroy()}listModels(f){return this.models[f]||(this.models[f]={}),Object.keys(this.models[f])}upload(f,m){this.models[m]||(this.models[m]={});for(const E in this.models[m])this.models[m][E].upload(f.context)}}class Y{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(f,m,E){const B=String(m);if(this.stateChanges[f]=this.stateChanges[f]||{},this.stateChanges[f][B]=this.stateChanges[f][B]||{},o.e(this.stateChanges[f][B],E),this.deletedStates[f]===null){this.deletedStates[f]={};for(const R in this.state[f])R!==B&&(this.deletedStates[f][R]=null)}else if(this.deletedStates[f]&&this.deletedStates[f][B]===null){this.deletedStates[f][B]={};for(const R in this.state[f][B])E[R]||(this.deletedStates[f][B][R]=null)}else for(const R in E)this.deletedStates[f]&&this.deletedStates[f][B]&&this.deletedStates[f][B][R]===null&&delete this.deletedStates[f][B][R]}removeFeatureState(f,m,E){if(this.deletedStates[f]===null)return;const B=String(m);if(this.deletedStates[f]=this.deletedStates[f]||{},E&&m!==void 0)this.deletedStates[f][B]!==null&&(this.deletedStates[f][B]=this.deletedStates[f][B]||{},this.deletedStates[f][B][E]=null);else if(m!==void 0)if(this.stateChanges[f]&&this.stateChanges[f][B])for(E in this.deletedStates[f][B]={},this.stateChanges[f][B])this.deletedStates[f][B][E]=null;else this.deletedStates[f][B]=null;else this.deletedStates[f]=null}getState(f,m){const E=String(m),B=o.e({},(this.state[f]||{})[E],(this.stateChanges[f]||{})[E]);if(this.deletedStates[f]===null)return{};if(this.deletedStates[f]){const R=this.deletedStates[f][m];if(R===null)return{};for(const k in R)delete B[k]}return B}initializeTileState(f,m){f.setFeatureState(this.state,m)}coalesceChanges(f,m){const E={};for(const B in this.stateChanges){this.state[B]=this.state[B]||{};const R={};for(const k in this.stateChanges[B])this.state[B][k]||(this.state[B][k]={}),o.e(this.state[B][k],this.stateChanges[B][k]),R[k]=this.state[B][k];E[B]=R}for(const B in this.deletedStates){this.state[B]=this.state[B]||{};const R={};if(this.deletedStates[B]===null)for(const k in this.state[B])R[k]={},this.state[B][k]={};else for(const k in this.deletedStates[B]){if(this.deletedStates[B][k]===null)this.state[B][k]={};else if(this.state[B][k])for(const z of Object.keys(this.deletedStates[B][k]))delete this.state[B][k][z];R[k]=this.state[B][k]}E[B]=E[B]||{},o.e(E[B],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(E).length!==0)for(const B in f)f[B].setFeatureState(E,m)}}function ee(w){const{userImage:f}=w;return!!(f&&f.render&&f.render())&&(w.data.replace(new Uint8Array(f.data.buffer)),!0)}class ce extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(f){this.images[f]={},this.loaded[f]=!1,this.updatedImages[f]={},this.patterns[f]={},this.callbackDispatchedThisFrame[f]={},this.atlasImage[f]=new o.h({width:1,height:1})}isLoaded(){for(const f in this.loaded)if(!this.loaded[f])return!1;return!0}setLoaded(f,m){if(this.loaded[m]!==f&&(this.loaded[m]=f,f)){for(const{ids:E,callback:B}of this.requestors)this._notify(E,m,B);this.requestors=[]}}hasImage(f,m){return!!this.getImage(f,m)}getImage(f,m){return this.images[m][f]}addImage(f,m,E){this._validate(f,E)&&(this.images[m][f]=E)}_validate(f,m){let E=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new o.a(new Error(`Image "${f}" has invalid "stretchX" value`))),E=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new o.a(new Error(`Image "${f}" has invalid "stretchY" value`))),E=!1),this._validateContent(m.content,m)||(this.fire(new o.a(new Error(`Image "${f}" has invalid "content" value`))),E=!1),E}_validateStretch(f,m){if(!f)return!0;let E=0;for(const B of f){if(B[0]<E||B[1]<B[0]||m<B[1])return!1;E=B[1]}return!0}_validateContent(f,m){return!(f&&(f.length!==4||f[0]<0||m.data.width<f[0]||f[1]<0||m.data.height<f[1]||f[2]<0||m.data.width<f[2]||f[3]<0||m.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))}updateImage(f,m,E){E.version=this.images[m][f].version+1,this.images[m][f]=E,this.updatedImages[m][f]=!0}removeImage(f,m){const E=this.images[m][f];delete this.images[m][f],delete this.patterns[m][f],E.userImage&&E.userImage.onRemove&&E.userImage.onRemove()}listImages(f){return Object.keys(this.images[f])}getImages(f,m,E){let B=!0;const R=!!this.loaded[m];if(!R)for(const k of f)this.images[m][k]||(B=!1);R||B?this._notify(f,m,E):this.requestors.push({ids:f,scope:m,callback:E})}getUpdatedImages(f){return this.updatedImages[f]}_notify(f,m,E){const B={};for(const R of f){this.images[m][R]||this.fire(new o.b("styleimagemissing",{id:R}));const k=this.images[m][R];k?B[R]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:!!(k.userImage&&k.userImage.render)}:o.w(`Image "${R}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}E(null,B)}getPixelSize(f){const{width:m,height:E}=this.atlasImage[f];return{width:m,height:E}}getPattern(f,m){const E=this.patterns[m][f],B=this.getImage(f,m);if(!B)return null;if(E&&E.position.version===B.version)return E.position;if(E)E.position.version=B.version;else{const R={w:B.data.width+2,h:B.data.height+2,x:0,y:0},k=new o.I(R,B);this.patterns[m][f]={bin:R,position:k}}return this._updatePatternAtlas(m),this.patterns[m][f].position}bind(f,m){const E=f.gl;let B=this.atlasTexture[m];B?this.dirty&&(B.update(this.atlasImage[m]),this.dirty=!1):(B=new o.T(f,this.atlasImage[m],E.RGBA),this.atlasTexture[m]=B),B.bind(E.LINEAR,E.CLAMP_TO_EDGE)}_updatePatternAtlas(f){const m=[];for(const k in this.patterns[f])m.push(this.patterns[f][k].bin);const{w:E,h:B}=o.p(m),R=this.atlasImage[f];R.resize({width:E||1,height:B||1});for(const k in this.patterns[f]){const{bin:z}=this.patterns[f][k],K=z.x+1,J=z.y+1,ne=this.images[f][k].data,he=ne.width,ye=ne.height;o.h.copy(ne,R,{x:0,y:0},{x:K,y:J},{width:he,height:ye}),o.h.copy(ne,R,{x:0,y:ye-1},{x:K,y:J-1},{width:he,height:1}),o.h.copy(ne,R,{x:0,y:0},{x:K,y:J+ye},{width:he,height:1}),o.h.copy(ne,R,{x:he-1,y:0},{x:K-1,y:J},{width:1,height:ye}),o.h.copy(ne,R,{x:0,y:0},{x:K+he,y:J},{width:1,height:ye})}this.dirty=!0}beginFrame(){for(const f in this.images)this.callbackDispatchedThisFrame[f]={}}dispatchRenderCallbacks(f,m){for(const E of f){if(this.callbackDispatchedThisFrame[m][E])continue;this.callbackDispatchedThisFrame[m][E]=!0;const B=this.images[m][E];ee(B)&&this.updateImage(E,m,B)}}}class se{constructor(f,m,E,B){this.message=(f?`${f}: `:"")+E,B&&(this.identifier=B),m!=null&&m.__line__&&(this.line=m.__line__)}}class le extends se{}function ie(w){const f=w.key,m=w.value,E=w.valueSpec||{},B=w.objectElementValidators||{},R=w.style,k=w.styleSpec;let z=[];const K=o.i(m);if(K!=="object")return[new se(f,m,`object expected, ${K} found`)];for(const J in m){const ne=J.split(".")[0];let he;B[ne]?he=B[ne]:E[ne]?he=Bt:B["*"]?he=B["*"]:E["*"]&&(he=Bt),he?z=z.concat(he({key:(f&&`${f}.`)+J,value:m[J],valueSpec:E[ne]||E["*"],style:R,styleSpec:k,object:m,objectKey:J},m)):z.push(new le(f,m[J],`unknown property "${J}"`))}for(const J in E)B[J]||E[J].required&&E[J].default===void 0&&m[J]===void 0&&z.push(new se(f,m,`missing required property "${J}"`));return z}function pe(w){const f=w.value,m=w.valueSpec,E=w.style,B=w.styleSpec,R=w.key,k=w.arrayElementValidator||Bt;if(o.i(f)!=="array")return[new se(R,f,`array expected, ${o.i(f)} found`)];if(m.length&&f.length!==m.length)return[new se(R,f,`array length ${m.length} expected, length ${f.length} found`)];if(m["min-length"]&&f.length<m["min-length"])return[new se(R,f,`array length at least ${m["min-length"]} expected, length ${f.length} found`)];let z={type:m.value,values:m.values,minimum:m.minimum,maximum:m.maximum,function:void 0};B.$version<7&&(z.function=m.function),o.i(m.value)==="object"&&(z=m.value);let K=[];for(let J=0;J<f.length;J++)K=K.concat(k({array:f,arrayIndex:J,value:f[J],valueSpec:z,style:E,styleSpec:B,key:`${R}[${J}]`},!0));return K}function ue(w){const f=w.key,m=w.value,E=w.valueSpec;let B=o.i(m);if(B==="number"&&m!=m&&(B="NaN"),B!=="number")return[new se(f,m,`number expected, ${B} found`)];if("minimum"in E){let R=E.minimum;if(o.i(E.minimum)==="array"&&(R=E.minimum[w.arrayIndex]),m<R)return[new se(f,m,`${m} is less than the minimum value ${R}`)]}if("maximum"in E){let R=E.maximum;if(o.i(E.maximum)==="array"&&(R=E.maximum[w.arrayIndex]),m>R)return[new se(f,m,`${m} is greater than the maximum value ${R}`)]}return[]}function me(w){const f=w.valueSpec,m=o.u(w.value.type);let E,B,R,k={};const z=m!=="categorical"&&w.value.property===void 0,K=!z,J=o.i(w.value.stops)==="array"&&o.i(w.value.stops[0])==="array"&&o.i(w.value.stops[0][0])==="object",ne=ie({key:w.key,value:w.value,valueSpec:w.styleSpec.function,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{stops:function(we){if(m==="identity")return[new se(we.key,we.value,'identity function may not have a "stops" property')];let Oe=[];const Fe=we.value;return Oe=Oe.concat(pe({key:we.key,value:Fe,valueSpec:we.valueSpec,style:we.style,styleSpec:we.styleSpec,arrayElementValidator:he})),o.i(Fe)==="array"&&Fe.length===0&&Oe.push(new se(we.key,Fe,"array must have at least one stop")),Oe},default:function(we){return Bt({key:we.key,value:we.value,valueSpec:f,style:we.style,styleSpec:we.styleSpec})}}});return m==="identity"&&z&&ne.push(new se(w.key,w.value,'missing required property "property"')),m==="identity"||w.value.stops||ne.push(new se(w.key,w.value,'missing required property "stops"')),m==="exponential"&&w.valueSpec.expression&&!o.s(w.valueSpec)&&ne.push(new se(w.key,w.value,"exponential functions not supported")),w.styleSpec.$version>=8&&(K&&!o.k(w.valueSpec)?ne.push(new se(w.key,w.value,"property functions not supported")):z&&!o.m(w.valueSpec)&&ne.push(new se(w.key,w.value,"zoom functions not supported"))),m!=="categorical"&&!J||w.value.property!==void 0||ne.push(new se(w.key,w.value,'"property" property is required')),ne;function he(we){let Oe=[];const Fe=we.value,De=we.key;if(o.i(Fe)!=="array")return[new se(De,Fe,`array expected, ${o.i(Fe)} found`)];if(Fe.length!==2)return[new se(De,Fe,`array length 2 expected, length ${Fe.length} found`)];if(J){if(o.i(Fe[0])!=="object")return[new se(De,Fe,`object expected, ${o.i(Fe[0])} found`)];if(Fe[0].zoom===void 0)return[new se(De,Fe,"object stop key must have zoom")];if(Fe[0].value===void 0)return[new se(De,Fe,"object stop key must have value")];const Ee=o.u(Fe[0].zoom);if(typeof Ee!="number")return[new se(De,Fe[0].zoom,"stop zoom values must be numbers")];if(R&&R>Ee)return[new se(De,Fe[0].zoom,"stop zoom values must appear in ascending order")];Ee!==R&&(R=Ee,B=void 0,k={}),Oe=Oe.concat(ie({key:`${De}[0]`,value:Fe[0],valueSpec:{zoom:{}},style:we.style,styleSpec:we.styleSpec,objectElementValidators:{zoom:ue,value:ye}}))}else Oe=Oe.concat(ye({key:`${De}[0]`,value:Fe[0],valueSpec:{},style:we.style,styleSpec:we.styleSpec},Fe));return o.n(o.o(Fe[1]))?Oe.concat([new se(`${De}[1]`,Fe[1],"expressions are not allowed in function stops.")]):Oe.concat(Bt({key:`${De}[1]`,value:Fe[1],valueSpec:f,style:we.style,styleSpec:we.styleSpec}))}function ye(we,Oe){const Fe=o.i(we.value),De=o.u(we.value),Ee=we.value!==null?we.value:Oe;if(E){if(Fe!==E)return[new se(we.key,Ee,`${Fe} stop domain type must match previous stop domain type ${E}`)]}else E=Fe;if(Fe!=="number"&&Fe!=="string"&&Fe!=="boolean"&&typeof De!="number"&&typeof De!="string"&&typeof De!="boolean")return[new se(we.key,Ee,"stop domain value must be a number, string, or boolean")];if(Fe!=="number"&&m!=="categorical"){let Ke=`number expected, ${Fe} found`;return o.k(f)&&m===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new se(we.key,Ee,Ke)]}return m!=="categorical"||Fe!=="number"||typeof De=="number"&&isFinite(De)&&Math.floor(De)===De?m!=="categorical"&&Fe==="number"&&typeof De=="number"&&typeof B=="number"&&B!==void 0&&De<B?[new se(we.key,Ee,"stop domain values must appear in ascending order")]:(B=De,m==="categorical"&&De in k?[new se(we.key,Ee,"stop domain values must be unique")]:(k[De]=!0,[])):[new se(we.key,Ee,`integer expected, found ${String(De)}`)]}}function Le(w){const f=(w.expressionContext==="property"?o.q:o.r)(o.o(w.value),w.valueSpec);if(f.result==="error")return f.value.map(E=>new se(`${w.key}${E.key}`,w.value,E.message));const m=f.value.expression||f.value._styleExpression.expression;if(w.expressionContext==="property"&&w.propertyKey==="text-font"&&!m.outputDefined())return[new se(w.key,w.value,`Invalid data expression for "${w.propertyKey}". Output values must be contained as literals within the expression.`)];if(w.expressionContext==="property"&&w.propertyType==="layout"&&!o.t(m))return[new se(w.key,w.value,'"feature-state" data expressions are not supported with layout properties.')];if(w.expressionContext==="filter")return ae(m,w);if(w.expressionContext&&w.expressionContext.indexOf("cluster")===0){if(!o.v(m,["zoom","feature-state"]))return[new se(w.key,w.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(w.expressionContext==="cluster-initial"&&!o.x(m))return[new se(w.key,w.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ae(w,f){const m=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(f.valueSpec&&f.valueSpec.expression)for(const B of f.valueSpec.expression.parameters)m.delete(B);if(m.size===0)return[];const E=[];return w instanceof o.C&&m.has(w.name)?[new se(f.key,f.value,`["${w.name}"] expression is not supported in a filter for a ${f.object.type} layer with id: ${f.object.id}`)]:(w.eachChild(B=>{E.push(...ae(B,f))}),E)}function be(w){const f=w.key,m=w.value,E=w.valueSpec,B=[];return Array.isArray(E.values)?E.values.indexOf(o.u(m))===-1&&B.push(new se(f,m,`expected one of [${E.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(E.values).indexOf(o.u(m))===-1&&B.push(new se(f,m,`expected one of [${Object.keys(E.values).join(", ")}], ${JSON.stringify(m)} found`)),B}function _e(w){return o.z(o.o(w.value))?Le(o.j({},w,{expressionContext:"filter",valueSpec:w.styleSpec[`filter_${w.layerType||"fill"}`]})):$e(w)}function $e(w){const f=w.value,m=w.key;if(o.i(f)!=="array")return[new se(m,f,`array expected, ${o.i(f)} found`)];const E=w.styleSpec;let B,R=[];if(f.length<1)return[new se(m,f,"filter array must have at least 1 element")];switch(R=R.concat(be({key:`${m}[0]`,value:f[0],valueSpec:E.filter_operator,style:w.style,styleSpec:w.styleSpec})),o.u(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&o.u(f[1])==="$type"&&R.push(new se(m,f,`"$type" cannot be use with operator "${f[0]}"`));case"==":case"!=":f.length!==3&&R.push(new se(m,f,`filter array for operator "${f[0]}" must have 3 elements`));case"in":case"!in":f.length>=2&&(B=o.i(f[1]),B!=="string"&&R.push(new se(`${m}[1]`,f[1],`string expected, ${B} found`)));for(let k=2;k<f.length;k++)B=o.i(f[k]),o.u(f[1])==="$type"?R=R.concat(be({key:`${m}[${k}]`,value:f[k],valueSpec:E.geometry_type,style:w.style,styleSpec:w.styleSpec})):B!=="string"&&B!=="number"&&B!=="boolean"&&R.push(new se(`${m}[${k}]`,f[k],`string, number, or boolean expected, ${B} found`));break;case"any":case"all":case"none":for(let k=1;k<f.length;k++)R=R.concat($e({key:`${m}[${k}]`,value:f[k],style:w.style,styleSpec:w.styleSpec}));break;case"has":case"!has":B=o.i(f[1]),f.length!==2?R.push(new se(m,f,`filter array for "${f[0]}" operator must have 2 elements`)):B!=="string"&&R.push(new se(`${m}[1]`,f[1],`string expected, ${B} found`))}return R}function Re(w,f){const m=w.key,E=w.style,B=w.layer,R=w.styleSpec,k=w.value,z=w.objectKey,K=R[`${f}_${w.layerType}`];if(!K)return[];const J=z.match(/^(.*)-transition$/);if(f==="paint"&&J&&K[J[1]]&&K[J[1]].transition)return Bt({key:m,value:k,valueSpec:R.transition,style:E,styleSpec:R});const ne=w.valueSpec||K[z];if(!ne)return[new le(m,k,`unknown property "${z}"`)];let he;if(o.i(k)==="string"&&o.k(ne)&&!ne.tokens&&(he=/^{([^}]+)}$/.exec(k))){const we=`\`{ "type": "identity", "property": ${he?JSON.stringify(he[1]):'"_"'} }\``;return[new se(m,k,`"${z}" does not support interpolation syntax
Use an identity property function instead: ${we}.`)]}const ye=[];if(w.layerType==="symbol")z!=="text-field"||!E||E.glyphs||E.imports||ye.push(new se(m,k,'use of "text-field" requires a style "glyphs" property')),z==="text-font"&&o.A(o.o(k))&&o.u(k.type)==="identity"&&ye.push(new se(m,k,'"text-font" does not support identity functions'));else if(w.layerType==="model"&&f==="paint"&&B&&B.layout&&B.layout.hasOwnProperty("model-id")&&o.k(ne)&&(o.B(ne)||o.m(ne))){const we=o.q(o.o(k),ne),Oe=we.value.expression||we.value._styleExpression.expression;Oe&&!o.v(Oe,["measure-light"])&&(z==="model-emissive-strength"&&o.x(Oe)&&o.t(Oe)||ye.push(new se(m,k,`${z} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ye.concat(Bt({key:w.key,value:k,valueSpec:ne,style:E,styleSpec:R,expressionContext:"property",propertyType:f,propertyKey:z}))}function Ie(w){return Re(w,"paint")}function Ne(w){return Re(w,"layout")}function Je(w){let f=[];const m=w.value,E=w.key,B=w.style,R=w.styleSpec;m.type||m.ref||f.push(new se(E,m,'either "type" or "ref" is required'));let k=o.u(m.type);const z=o.u(m.ref);if(m.id){const K=o.u(m.id);for(let J=0;J<w.arrayIndex;J++){const ne=B.layers[J];o.u(ne.id)===K&&f.push(new se(E,m.id,`duplicate layer id "${m.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in m){let K;["type","source","source-layer","filter","layout"].forEach(J=>{J in m&&f.push(new se(E,m[J],`"${J}" is prohibited for ref layers`))}),B.layers.forEach(J=>{o.u(J.id)===z&&(K=J)}),K?K.ref?f.push(new se(E,m.ref,"ref cannot reference another ref layer")):k=o.u(K.type):typeof z=="string"&&f.push(new se(E,m.ref,`ref layer "${z}" not found`))}else if(k!=="background"&&k!=="sky"&&k!=="slot")if(m.source){const K=B.sources&&B.sources[m.source],J=K&&o.u(K.type);K?J==="vector"&&k==="raster"?f.push(new se(E,m.source,`layer "${m.id}" requires a raster source`)):J==="raster"&&k!=="raster"?f.push(new se(E,m.source,`layer "${m.id}" requires a vector source`)):J!=="vector"||m["source-layer"]?J==="raster-dem"&&k!=="hillshade"?f.push(new se(E,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):J!=="raster-array"||["raster","raster-particle"].includes(k)?k!=="line"||!m.paint||!m.paint["line-gradient"]&&!m.paint["line-trim-offset"]||J==="geojson"&&K.lineMetrics?k==="raster-particle"&&J!=="raster-array"&&f.push(new se(E,m.source,`layer "${m.id}" requires a 'raster-array' source.`)):f.push(new se(E,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):f.push(new se(E,m.source,"raster-array source can only be used with layer type 'raster'.")):f.push(new se(E,m,`layer "${m.id}" must specify a "source-layer"`)):f.push(new se(E,m.source,`source "${m.source}" not found`))}else f.push(new se(E,m,'missing required property "source"'));return f=f.concat(ie({key:E,value:m,valueSpec:R.layer,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Bt({key:`${E}.type`,value:m.type,valueSpec:R.layer.type,style:w.style,styleSpec:w.styleSpec,object:m,objectKey:"type"}),filter:K=>_e(o.j({layerType:k},K)),layout:K=>ie({layer:m,key:K.key,value:K.value,valueSpec:{},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{"*":J=>Ne(o.j({layerType:k},J))}}),paint:K=>ie({layer:m,key:K.key,value:K.value,valueSpec:{},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{"*":J=>Ie(o.j({layerType:k,layer:m},J))}})}})),f}function je(w){const f=w.value,m=w.key,E=o.i(f);return E!=="string"?[new se(m,f,`string expected, ${E} found`)]:[]}const ft={promoteId:function({key:w,value:f}){if(o.i(f)==="string")return je({key:w,value:f});{const m=[];for(const E in f)m.push(...je({key:`${w}.${E}`,value:f[E]}));return m}}};function Et(w){const f=w.value,m=w.key,E=w.styleSpec,B=w.style;if(!f.type)return[new se(m,f,'"type" is required')];const R=o.u(f.type);let k=[];switch(["vector","raster","raster-dem","raster-array"].includes(R)&&(f.url||f.tiles||k.push(new le(m,f,'Either "url" or "tiles" is required.'))),R){case"vector":case"raster":case"raster-dem":case"raster-array":return k=k.concat(ie({key:m,value:f,valueSpec:E[`source_${R.replace("-","_")}`],style:w.style,styleSpec:E,objectElementValidators:ft})),k;case"geojson":if(k=ie({key:m,value:f,valueSpec:E.source_geojson,style:B,styleSpec:E,objectElementValidators:ft}),f.cluster)for(const z in f.clusterProperties){const[K,J]=f.clusterProperties[z],ne=typeof K=="string"?[K,["accumulated"],["get",z]]:K;k.push(...Le({key:`${m}.${z}.map`,value:J,expressionContext:"cluster-map"})),k.push(...Le({key:`${m}.${z}.reduce`,value:ne,expressionContext:"cluster-reduce"}))}return k;case"video":return ie({key:m,value:f,valueSpec:E.source_video,style:B,styleSpec:E});case"image":return ie({key:m,value:f,valueSpec:E.source_image,style:B,styleSpec:E});case"canvas":return[new se(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return be({key:`${m}.type`,value:f.type,valueSpec:{values:ke(E)},style:B,styleSpec:E})}}function ke(w){return w.source.reduce((f,m)=>{const E=w[m];return E.type.type==="enum"&&(f=f.concat(Object.keys(E.type.values))),f},[])}function Ye(w){const f=w.value;let m=[];if(!f)return m;const E=o.i(f);return E!=="string"?(m=m.concat([new se(w.key,f,`string expected, "${E}" found`)]),m):(function(B){const R=B.indexOf("://")===-1;try{return new URL(B,R?"http://example.com":void 0),!0}catch{return!1}}(f)||(m=m.concat([new se(w.key,f,`invalid url "${f}"`)])),m)}function at(w){const f=w.value,m=w.styleSpec,E=m.light,B=w.style;let R=[];const k=o.i(f);if(f===void 0)return R;if(k!=="object")return R=R.concat([new se("light",f,`object expected, ${k} found`)]),R;for(const z in f){const K=z.match(/^(.*)-transition$/);R=R.concat(K&&E[K[1]]&&E[K[1]].transition?Bt({key:z,value:f[z],valueSpec:m.transition,style:B,styleSpec:m}):E[z]?Bt({key:z,value:f[z],valueSpec:E[z],style:B,styleSpec:m}):[new se(z,f[z],`unknown property "${z}"`)])}return R}function He(w){const f=w.value;let m=[];if(!f)return m;const E=o.i(f);if(E!=="object")return m=m.concat([new se("light-3d",f,`object expected, ${E} found`)]),m;const B=w.styleSpec,R=B["light-3d"],k=w.key,z=w.style,K=w.style.lights;for(const he of["type","id"])if(!(he in f))return m=m.concat([new se("light-3d",f,`missing property ${he} on light`)]),m;if(f.type&&K)for(let he=0;he<w.arrayIndex;he++){const ye=o.u(f.type),we=K[he];o.u(we.type)===ye&&m.push(new se(k,f.id,`duplicate light type "${f.type}", previously defined at line ${we.id.__line__}`))}const J=`properties_light_${f.type}`;if(!(J in B))return m=m.concat([new se("light-3d",f,`Invalid light type ${f.type}`)]),m;const ne=B[J];for(const he in f)if(he==="properties"){const ye=f[he],we=o.i(ye);if(we!=="object")return m=m.concat([new se("properties",ye,`object expected, ${we} found`)]),m;for(const Oe in ye)m=m.concat(ne[Oe]?Bt({key:Oe,value:ye[Oe],valueSpec:ne[Oe],style:z,styleSpec:B}):[new le(w.key,ye[Oe],`unknown property "${Oe}"`)])}else{const ye=he.match(/^(.*)-transition$/);m=m.concat(ye&&R[ye[1]]&&R[ye[1]].transition?Bt({key:he,value:f[he],valueSpec:B.transition,style:z,styleSpec:B}):R[he]?Bt({key:he,value:f[he],valueSpec:R[he],style:z,styleSpec:B}):[new le(he,f[he],`unknown property "${he}"`)])}return m}function Tt(w){const f=w.value,m=w.key,E=w.style,B=w.styleSpec,R=B.terrain;let k=[];const z=o.i(f);if(f===void 0||z==="null")return k;if(z!=="object")return k=k.concat([new se("terrain",f,`object expected, ${z} found`)]),k;for(const K in f){const J=K.match(/^(.*)-transition$/);k=k.concat(J&&R[J[1]]&&R[J[1]].transition?Bt({key:K,value:f[K],valueSpec:B.transition,style:E,styleSpec:B}):R[K]?Bt({key:K,value:f[K],valueSpec:R[K],style:E,styleSpec:B}):[new le(K,f[K],`unknown property "${K}"`)])}if(f.source){const K=E.sources&&E.sources[f.source],J=K&&o.u(K.type);K?J!=="raster-dem"&&k.push(new se(m,f.source,`terrain cannot be used with a source of type ${String(J)}, it only be used with a "raster-dem" source type`)):k.push(new se(m,f.source,`source "${f.source}" not found`))}else k.push(new se(m,f,'terrain is missing required property "source"'));return k}function Ut(w){const f=w.value,m=w.style,E=w.styleSpec,B=E.fog;let R=[];const k=o.i(f);if(f===void 0)return R;if(k!=="object")return R=R.concat([new se("fog",f,`object expected, ${k} found`)]),R;for(const z in f){const K=z.match(/^(.*)-transition$/);R=R.concat(K&&B[K[1]]&&B[K[1]].transition?Bt({key:z,value:f[z],valueSpec:E.transition,style:m,styleSpec:E}):B[z]?Bt({key:z,value:f[z],valueSpec:B[z],style:m,styleSpec:E}):[new le(z,f[z],`unknown property "${z}"`)])}return R}const Rt={"*":()=>[],array:pe,boolean:function(w){const f=w.value,m=w.key,E=o.i(f);return E!=="boolean"?[new se(m,f,`boolean expected, ${E} found`)]:[]},number:ue,color:function(w){const f=w.key,m=w.value,E=o.i(m);return E!=="string"?[new se(f,m,`color expected, ${E} found`)]:o.y(m)===null?[new se(f,m,`color expected, "${m}" found`)]:[]},enum:be,filter:_e,function:me,layer:Je,object:ie,source:Et,model:Ye,light:at,"light-3d":He,terrain:Tt,fog:Ut,string:je,formatted:function(w){return je(w).length===0?[]:Le(w)},resolvedImage:function(w){return je(w).length===0?[]:Le(w)},projection:function(w){const f=w.value,m=w.styleSpec,E=m.projection,B=w.style;let R=[];const k=o.i(f);if(k==="object")for(const z in f)R=R.concat(Bt({key:z,value:f[z],valueSpec:E[z],style:B,styleSpec:m}));else k!=="string"&&(R=R.concat([new se("projection",f,`object or string expected, ${k} found`)]));return R},import:function(w){const{value:f,styleSpec:m}=w,{data:E,...B}=f;Object.defineProperty(B,"__line__",{value:f.__line__,enumerable:!1});let R=ie(o.j({},w,{value:B,valueSpec:m.import}));return o.u(B.id)===""&&R.push(new se(`${w.key}.id`,B,"import id can't be an empty string")),E&&(R=R.concat(xt(E,m,{key:`${w.key}.data`}))),R}};function Bt(w,f=!1){const m=w.value,E=w.valueSpec,B=w.styleSpec;if(E.expression&&o.A(o.u(m)))return me(w);if(E.expression&&o.n(o.o(m)))return Le(w);if(E.type&&Rt[E.type]){const R=Rt[E.type](w);return f===!0&&R.length>0&&o.i(w.value)==="array"?Le(w):R}return ie(o.j({},w,{valueSpec:E.type?B[E.type]:E}))}function Ht(w){const f=w.value,m=w.key,E=je(w);return E.length||(f.indexOf("{fontstack}")===-1&&E.push(new se(m,f,'"glyphs" url must include a "{fontstack}" token')),f.indexOf("{range}")===-1&&E.push(new se(m,f,'"glyphs" url must include a "{range}" token'))),E}function xt(w,f=o.D,m={}){return Bt({key:m.key||"",value:w,valueSpec:f.$root,styleSpec:f,style:w,objectElementValidators:{glyphs:Ht,"*":()=>[]}})}function Zt(w,f=o.D){return Xe(xt(w,f))}const un=w=>Xe(Et(w)),Ft=w=>Xe(at(w)),mt=w=>Xe(He(w)),Be=w=>Xe(Tt(w)),ze=w=>Xe(Ut(w)),it=w=>Xe(Je(w)),bt=w=>Xe(_e(w)),Qe=w=>Xe(Ie(w)),St=w=>Xe(Ne(w)),yt=w=>Xe(Ye(w));function Xe(w){return w.slice().sort((f,m)=>f.line&&m.line?f.line-m.line:0)}function _t(w,f){let m=!1;if(f&&f.length)for(const E of f)E instanceof le?o.w(E.message):(w.fire(new o.a(new Error(E.message))),m=!0);return m}const Gt=new o.F({anchor:new o.G(o.D.light.anchor),position:new o.H(o.D.light.position),color:new o.G(o.D.light.color),intensity:new o.G(o.D.light.intensity)});class gt extends o.E{constructor(f,m="flat"){super(),this._transitionable=new o.J(Gt),this.setLight(f,m),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(f,m,E={}){this._validate(Ft,f,E)||(this._transitionable.setTransitionOrValue(f),this.id=m)}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,m,E){return(!E||E.validate!==!1)&&_t(this,f.call(Zt,o.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:o.D})))}}const hn=new o.F({source:new o.G(o.D.terrain.source),exaggeration:new o.G(o.D.terrain.exaggeration)});let rr=class extends o.E{constructor(w,f,m,E){super(),this.scope=m,this._transitionable=new o.J(hn,m,E),this._transitionable.setTransitionOrValue(w,E),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(w,f){this._transitionable.setTransitionOrValue(w,f)}updateTransitions(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(w){this.properties=this._transitioning.possiblyEvaluate(w)}getExaggeration(w){return this._transitioning.possiblyEvaluate(new o.K(w)).get("exaggeration")}isZoomDependent(){const w=this._transitionable._values.exaggeration;return w!=null&&w.value!=null&&w.value.expression!=null&&w.value.expression instanceof o.Z}};const br=45,Qr=65,hr=.05;function Kn(w,f,m,E){const B=o.O(br,Qr,m),[R,k]=ur(w,E);let z=1-Math.min(1,Math.exp((f-R)/(k-R)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*B*w.alpha}function ur(w,f){const m=.5/Math.tan(.5*f);return[w.range[0]+m,w.range[1]+m]}function ni(w,f,m,E,B){const R=o.N.transformMat4([],[f,m,E],B.mercatorFogMatrix);return Kn(w,o.N.length(R),B.pitch,B._fov)}function us(w,f,m,E,B,R,k){const z=[[m,E,0],[B,E,0],[B,R,0],[m,R,0]];let K=Number.MAX_VALUE,J=-Number.MAX_VALUE;for(const ne of z){const he=o.N.transformMat4([],ne,f),ye=o.N.length(he);K=Math.min(K,ye),J=Math.max(J,ye)}return[Kn(w,K,k.pitch,k._fov),Kn(w,J,k.pitch,k._fov)]}const bi=new o.F({range:new o.G(o.D.fog.range),color:new o.G(o.D.fog.color),"high-color":new o.G(o.D.fog["high-color"]),"space-color":new o.G(o.D.fog["space-color"]),"horizon-blend":new o.G(o.D.fog["horizon-blend"]),"star-intensity":new o.G(o.D.fog["star-intensity"]),"vertical-range":new o.G(o.D.fog["vertical-range"])});class is extends o.E{constructor(f,m,E,B){super(),this._transitionable=new o.J(bi,E,new Map(B)),this.set(f,B),this._transitioning=this._transitionable.untransitioned(),this._transform=m,this.properties=new o.Q(bi)}get state(){const f=this._transform,m=f.projection.name==="globe",E=o.S(f.zoom),B=this.properties.get("range"),R=[.5,3];return{range:m?[o.U(R[0],B[0],E),o.U(R[1],B[1],E)]:B,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(f,m,E={}){if(this._validate(ze,f,E))return;const B=o.e({},f);for(const R of Object.keys(o.D.fog))B[R]===void 0&&(B[R]=o.D.fog[R].default);this._options=B,this._transitionable.setTransitionOrValue(this._options,m)}getOpacity(f){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.O(br,Qr,f))*m.a}getOpacityAtLatLng(f,m){return this._transform.projection.supportsFog?function(E,B,R){const k=o.L.fromLngLat(B),z=R.elevation?R.elevation.getAtPointOrZero(k):0;return ni(E,k.x,k.y,z,R)}(this.state,f,m):0}getOpacityForTile(f){if(!this._transform.projection.supportsFog)return[1,1];const m=this._transform.calculateFogTileMatrix(f.toUnwrapped());return us(this.state,m,0,0,o.V,o.V,this._transform)}getOpacityForBounds(f,m,E,B,R){return this._transform.projection.supportsFog?us(this.state,f,m,E,B,R,this._transform):[1,1]}getFovAdjustedRange(f){return this._transform.projection.supportsFog?ur(this.state,f):[0,1]}isVisibleOnFrustum(f){if(!this._transform.projection.supportsFog)return!1;const m=[4,5,6,7];for(const E of m){const B=f.points[E];let R;if(B[2]>=0)R=B;else{const k=f.points[E-4];R=o.W(k,B,k[2]/(k[2]-B[2]))}if(ni(this.state,R[0],R[1],0,this._transform)>=hr)return!0}return!1}updateConfig(f){this._transitionable.setTransitionOrValue(this._options,new Map(f))}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,m,E){return(!E||E.validate!==!1)&&_t(this,f.call(Zt,o.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:o.D})))}}class Fs extends o.E{constructor(f,m,E,B){super(),this.scope=E,this._options=f,this.properties=new o.Q(m),this._transitionable=new o.J(m,E,new Map(B)),this._transitionable.setTransitionOrValue(f.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(f){this._transitionable.setTransitionOrValue(this._options.properties,new Map(f))}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(f,m){this._options=f,this._transitionable.setTransitionOrValue(f.properties,m)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const zr=new o.F({color:new o.G(o.D.properties_light_ambient.color),intensity:new o.G(o.D.properties_light_ambient.intensity)}),ss=new o.F({direction:new o.X(o.D.properties_light_directional.direction),color:new o.G(o.D.properties_light_directional.color),intensity:new o.G(o.D.properties_light_directional.intensity),"cast-shadows":new o.G(o.D.properties_light_directional["cast-shadows"]),"shadow-intensity":new o.G(o.D.properties_light_directional["shadow-intensity"])});class Zi{constructor(f,m,E,B){this.screenBounds=f,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=E,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,B)}static createFromScreenPoints(f,m){let E,B;if(f instanceof o.P||typeof f[0]=="number"){const R=o.P.convert(f);E=[R],B=m.isPointAboveHorizon(R)}else{const R=o.P.convert(f[0]),k=o.P.convert(f[1]);E=[R,k],B=o.Y(R,k).every(z=>m.isPointAboveHorizon(z))}return new Zi(E,m.getCameraPoint(),B,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(f){return o.Y(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],f)}bufferedCameraGeometry(f){const m=this.screenBounds[0],E=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],B=o.Y(m,E,0,!1);return this.cameraPoint.y>E.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<E.x?B.splice(3,0,this.cameraPoint):this.cameraPoint.x>=E.x?B[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(B[3]=this.cameraPoint)),o._(B,f)}bufferedCameraGeometryGlobe(f){const m=this.screenBounds[0],E=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],B=o.Y(m,E,f),R=this.cameraPoint.clone();switch(3*((R.y>m.y)+(R.y>E.y))+((R.x>m.x)+(R.x>E.x))){case 0:B[0]=R,B[4]=R.clone();break;case 1:B.splice(1,0,R);break;case 2:B[1]=R;break;case 3:B.splice(4,0,R);break;case 5:B.splice(2,0,R);break;case 6:B[3]=R;break;case 7:B.splice(3,0,R);break;case 8:B[2]=R}return B}containsTile(f,m,E,B=0){const R=f.queryPadding/m._pixelsPerMercatorPixel+1,k=E?this._bufferedCameraMercator(R,m):this._bufferedScreenMercator(R,m);let z=f.tileID.wrap+(k.unwrapped?B:0);const K=k.polygon.map(De=>o.$(f.tileTransform,De,z));if(!o.a0(K,0,0,o.V,o.V))return;z=f.tileID.wrap+(this.screenGeometryMercator.unwrapped?B:0);const J=this.screenGeometryMercator.polygon.map(De=>o.a1(f.tileTransform,De,z)),ne=J.map(De=>new o.P(De[0],De[1])),he=m.getFreeCameraOptions().position||new o.L(0,0,0),ye=o.a1(f.tileTransform,he,z),we=J.map(De=>{const Ee=o.N.sub(De,De,ye);return o.N.normalize(Ee,Ee),new o.a2(ye,Ee)}),Oe=o.a3(f,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:ne,tilespaceRays:we,bufferedTilespaceGeometry:K,bufferedTilespaceBounds:(Fe=o.a4(K),Fe.min.x=o.aa(Fe.min.x,0,o.V),Fe.min.y=o.aa(Fe.min.y,0,o.V),Fe.max.x=o.aa(Fe.max.x,0,o.V),Fe.max.y=o.aa(Fe.max.y,0,o.V),Fe),tile:f,tileID:f.tileID,pixelToTileUnitsFactor:Oe};var Fe}_bufferedScreenMercator(f,m){const E=En(f);if(this._screenRaycastCache[E])return this._screenRaycastCache[E];{let B;return B=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(f),m):{polygon:this.bufferedScreenGeometry(f).map(R=>m.pointCoordinate3D(R)),unwrapped:!0},this._screenRaycastCache[E]=B,B}}_bufferedCameraMercator(f,m){const E=En(f);if(this._cameraRaycastCache[E])return this._cameraRaycastCache[E];{let B;return B=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(f),m):{polygon:this.bufferedCameraGeometry(f).map(R=>m.pointCoordinate3D(R)),unwrapped:!0},this._cameraRaycastCache[E]=B,B}}_projectAndResample(f,m){const E=function(R,k){const z=o.a6.multiply([],k.pixelMatrix,k.globeMatrix),K=[0,-o.ab,0,1],J=[0,o.ab,0,1],ne=[0,0,0,1];o.a7.transformMat4(K,K,z),o.a7.transformMat4(J,J,z),o.a7.transformMat4(ne,ne,z);const he=new o.P(K[0]/K[3],K[1]/K[3]),ye=new o.P(J[0]/J[3],J[1]/J[3]),we=o.a8(R,he)&&K[3]<ne[3],Oe=o.a8(R,ye)&&J[3]<ne[3];if(!we&&!Oe)return null;const Fe=function(ut,Ct,Lt){for(let $t=1;$t<ut.length;$t++){const pn=dn(Ct.pointCoordinate3D(ut[$t-1]).x),Kt=dn(Ct.pointCoordinate3D(ut[$t]).x);if(Lt<0){if(pn<Kt)return{idx:$t,t:-pn/(Kt-1-pn)}}else if(Kt<pn)return{idx:$t,t:(1-pn)/(Kt+1-pn)}}return null}(R,k,we?-1:1);if(!Fe)return null;const{idx:De,t:Ee}=Fe;let Ke=De>1?en(R.slice(0,De),k):[],lt=De<R.length?en(R.slice(De),k):[];Ke=Ke.map(ut=>new o.P(dn(ut.x),ut.y)),lt=lt.map(ut=>new o.P(dn(ut.x),ut.y));const Ze=[...Ke];Ze.length===0&&Ze.push(lt[lt.length-1]);const ct=o.U(Ze[Ze.length-1].y,(lt.length===0?Ke[0]:lt[0]).y,Ee);let Ve;return Ve=we?[new o.P(0,ct),new o.P(0,0),new o.P(1,0),new o.P(1,ct)]:[new o.P(1,ct),new o.P(1,1),new o.P(0,1),new o.P(0,ct)],Ze.push(...Ve),lt.length===0?Ze.push(Ke[0]):Ze.push(...lt),{polygon:Ze.map(ut=>new o.L(ut.x,ut.y)),unwrapped:!1}}(f,m);if(E)return E;const B=function(R,k){let z=!1,K=-1/0,J=0;for(let he=0;he<R.length-1;he++)R[he].x>K&&(K=R[he].x,J=he);for(let he=0;he<R.length-1;he++){const ye=(J+he)%(R.length-1),we=R[ye],Oe=R[ye+1];Math.abs(we.x-Oe.x)>.5&&(we.x<Oe.x?(we.x+=1,ye===0&&(R[R.length-1].x+=1)):(Oe.x+=1,ye+1===R.length-1&&(R[0].x+=1)),z=!0)}const ne=o.a5(k.center.lng);return z&&ne<Math.abs(ne-1)&&R.forEach(he=>{he.x-=1}),{polygon:R,unwrapped:z}}(en(f,m).map(R=>new o.P(dn(R.x),R.y)),m);return{polygon:B.polygon.map(R=>new o.L(R.x,R.y)),unwrapped:B.unwrapped}}}function en(w,f){return o.a9(w,m=>{const E=f.pointCoordinate3D(m);m.x=E.x,m.y=E.y},1/256)}function dn(w){return w<0?1+w%1:w%1}function En(w){return 100*w|0}function Vn(w,f,m,E,B){const R=function(k,z){if(k)return B(k);if(z){w.url&&z.tiles&&w.tiles&&delete w.tiles;const K=o.ac(o.e(z,w),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);z.vector_layers&&(K.vectorLayers=z.vector_layers,K.vectorLayerIds=K.vectorLayers.map(J=>J.id)),z.raster_layers&&(K.rasterLayers=z.raster_layers,K.rasterLayerIds=K.rasterLayers.map(J=>J.id)),K.tiles=f.canonicalizeTileset(K,w.url),B(null,K)}};return w.url?o.g(f.transformRequest(f.normalizeSourceURL(w.url,null,m,E),o.R.Source),R):o.f.frame(()=>R(null,w))}class Dt{constructor(f,m,E){this.bounds=o.ad.convert(this.validateBounds(f)),this.minzoom=m||0,this.maxzoom=E||24}validateBounds(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]}contains(f){const m=Math.pow(2,f.z),E=Math.floor(o.a5(this.bounds.getWest())*m),B=Math.floor(o.ae(this.bounds.getNorth())*m),R=Math.ceil(o.a5(this.bounds.getEast())*m),k=Math.ceil(o.ae(this.bounds.getSouth())*m);return f.x>=E&&f.x<R&&f.y>=B&&f.y<k}}class sn extends o.E{constructor(f,m,E,B){if(super(),this.id=f,this.dispatcher=E,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.ac(m,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},m),this._collectResourceTiming=!!m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(B),this._tileWorkers={},this._deduped=new o.af}load(f){this._loaded=!1,this.fire(new o.b("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,E=this.map._worldview;this._tileJSONRequest=Vn(this._options,this.map._requestManager,m,E,(B,R)=>{this._tileJSONRequest=null,this._loaded=!0,B?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),E&&E.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${E}`),this.fire(new o.a(B))):R&&(o.e(this,R),R.bounds&&(this.tileBounds=new Dt(R.bounds,this.minzoom,this.maxzoom)),o.aj(R.tiles,this.map._requestManager._customAccessToken),this.fire(new o.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.b("data",{dataType:"source",sourceDataType:"content"}))),f&&f(B)})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest();const f=o.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(f))}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.e({},this._options)}loadTile(f,m){const E=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),B={request:this.map._requestManager.transformRequest(E,o.R.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:o.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:f.isExtraShadowCaster};if(B.request.collectResourceTiming=this._collectResourceTiming,f.actor&&f.state!=="expired")f.state==="loading"?f.reloadCallback=m:f.request=f.actor.send("reloadTile",B,R.bind(this));else if(f.actor=this._tileWorkers[E]=this._tileWorkers[E]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",B,R.bind(this),void 0,!0);else{const k=o.ah.call({deduped:this._deduped},B,(z,K)=>{z||!K?R.call(this,z):(B.data={cacheControl:K.cacheControl,expires:K.expires,rawData:K.rawData.slice(0)},f.actor&&f.actor.send("loadTile",B,R.bind(this),void 0,!0))},!0);f.request={cancel:k}}function R(k,z){return delete f.request,f.aborted?m(null):k&&k.status!==404?m(k):(z&&z.resourceTiming&&(f.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&f.setExpiryData(z),f.loadVectorData(z,this.map.painter),o.ai(this.dispatcher),m(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(f){f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id,scope:this.scope}),f.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mn extends o.E{constructor(f,m,E,B){super(),this.id=f,this.dispatcher=E,this.setEventedParent(B),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},m),o.e(this,o.ac(m,["url","scheme","tileSize"]))}load(f){this._loaded=!1,this.fire(new o.b("dataloading",{dataType:"source"})),this._tileJSONRequest=Vn(this._options,this.map._requestManager,null,null,(m,E)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new o.a(m)):E&&(o.e(this,E),E.bounds&&(this.tileBounds=new Dt(E.bounds,this.minzoom,this.maxzoom)),o.aj(E.tiles),this.fire(new o.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.b("data",{dataType:"source",sourceDataType:"content"}))),f&&f(m)})}loaded(){return this._loaded}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest();const f=o.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(f))}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.e({},this._options)}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,m){const E=o.f.devicePixelRatio>=2,B=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),E,this.tileSize);f.request=o.d(this.map._requestManager.transformRequest(B,o.R.Tile),(R,k,z,K)=>(delete f.request,f.aborted?(f.state="unloaded",m(null)):R?(f.state="errored",m(R)):k?(this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:z,expires:K}),f.setTexture(k,this.map.painter),f.state="loaded",o.ai(this.dispatcher),void m(null)):m(null)))}abortTile(f,m){f.request&&(f.request.cancel(),delete f.request),m()}unloadTile(f,m){f.texture&&f.texture instanceof o.T?(f.destroy(!0),f.texture&&f.texture instanceof o.T&&this.map.painter.saveTileTexture(f.texture)):f.destroy(),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Rn extends Mn{constructor(f,m,E,B){super(f,m,E,B),this.type="raster-array",this.maxzoom=22,this._options=o.e({type:"raster-array"},m)}triggerRepaint(f){const m=this.map.painter._terrain,E=this.map.style.getSourceCache(this.id);m&&m.enabled&&E&&m._clearRenderCacheForTile(E.id,f.tileID),this.map.triggerRepaint()}loadTile(f,m){const E=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),B=this.map._requestManager.transformRequest(E,o.R.Tile);f.requestParams=B,f.actor||(f.actor=this.dispatcher.getActor()),f.request=f.fetchHeader(void 0,(R,k,z,K)=>{if(delete f.request,f.aborted)return f.state="unloaded",m(null);if(R)return R.code===20?void 0:(f.state="errored",m(R));this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:z,expires:K}),f.state="empty",m(null)})}unloadTile(f){const m=f.texture;m&&m instanceof o.T?(f.destroy(!0),this.map.painter.saveTileTexture(m)):(f.destroy(),f.flushQueues(),f._isHeaderLoaded=!1,delete f._mrt,delete f.textureDescriptor),f.fbo&&(f.fbo.destroy(),delete f.fbo),delete f.request,delete f.requestParams,delete f.neighboringTiles,f.state="unloaded"}prepareTile(f,m,E){f._isHeaderLoaded&&(f.state!=="empty"&&(f.state="reloading"),f.fetchBand(m,E,(B,R)=>{if(B)return f.state="errored",this.fire(new o.a(B)),void this.triggerRepaint(f);R&&(f.setTexture(R,this.map.painter),f.state="loaded",this.triggerRepaint(f))}))}getInitialBand(f){if(!this.rasterLayers)return 0;const m=this.rasterLayers.find(({id:R})=>R===f),E=m&&m.fields,B=E&&E.bands&&E.bands;return B?B[0]:0}getTextureDescriptor(f,m,E){if(!f)return;const B=m.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!B)return;let R=null;m instanceof o.an?R=m.paint.get("raster-array-band"):m instanceof o.ao&&(R=m.paint.get("raster-particle-array-band"));const k=R||this.getInitialBand(B);if(k!=null)if(f.textureDescriptor){if(!f.updateNeeded(B,k)||E)return Object.assign({},f.textureDescriptor,{texture:f.texture})}else this.prepareTile(f,B,k)}}const er=32,Qn=33,Nr=new Uint16Array(8184);for(let w=0;w<2046;w++){let f=w+2,m=0,E=0,B=0,R=0,k=0,z=0;for(1&f?B=R=k=er:m=E=z=er;(f>>=1)>1;){const J=m+B>>1,ne=E+R>>1;1&f?(B=m,R=E,m=k,E=z):(m=B,E=R,B=k,R=z),k=J,z=ne}const K=4*w;Nr[K+0]=m,Nr[K+1]=E,Nr[K+2]=B,Nr[K+3]=R}const si=new Uint16Array(2178),Tn=new Uint8Array(1089),jt=new Uint16Array(1089);function Zn(w){return w===0?-.03125:w===32?.03125:0}class Vt{constructor(f,m,E,B){this.id=Vt.uniqueIdxCounter,Vt.uniqueIdxCounter++,this.context=f;const R=f.gl;this.buffer=R.createBuffer(),this.dynamicDraw=!!E,this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),R.bufferData(R.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||B||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(f){this.id=Vt.uniqueIdxCounter,Vt.uniqueIdxCounter++;const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Vt.uniqueIdxCounter=0;const Xn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ur{constructor(f,m,E,B,R,k){this.length=m.length,this.attributes=E,this.itemSize=m.bytesPerElement,this.dynamicDraw=B,this.instanceCount=k,this.context=f;const z=f.gl;this.buffer=z.createBuffer(),f.bindVertexBuffer.set(this.buffer),z.bufferData(z.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||R||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(f){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,f.arrayBuffer)}enableAttributes(f,m){for(let E=0;E<this.attributes.length;E++){const B=m.attributes[this.attributes[E].name];B!==void 0&&f.enableVertexAttribArray(B)}}setVertexAttribPointers(f,m,E){for(let B=0;B<this.attributes.length;B++){const R=this.attributes[B],k=m.attributes[R.name];k!==void 0&&f.vertexAttribPointer(k,R.components,f[Xn[R.type]],!1,this.itemSize,R.offset+this.itemSize*(E||0))}}setVertexAttribDivisor(f,m,E){for(let B=0;B<this.attributes.length;B++){const R=m.attributes[this.attributes[B].name];R!==void 0&&this.instanceCount&&this.instanceCount>0&&f.vertexAttribDivisor(R,E)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Cr{constructor(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(f){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Is extends Cr{getDefault(){return o.ax.transparent}set(f){const m=this.current;(f.r!==m.r||f.g!==m.g||f.b!==m.b||f.a!==m.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class Bo extends Cr{getDefault(){return 1}set(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)}}class Qs extends Cr{getDefault(){return 0}set(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)}}class xh extends Cr{getDefault(){return[!0,!0,!0,!0]}set(f){const m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||f[3]!==m[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class zc extends Cr{getDefault(){return!0}set(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)}}class zd extends Cr{getDefault(){return 255}set(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)}}class eg extends Cr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(f){const m=this.current;(f.func!==m.func||f.ref!==m.ref||f.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)}}class $d extends Cr{getDefault(){const f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]}set(f){const m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)}}class Df extends Cr{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;f?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=f,this.dirty=!1}}class Uf extends Cr{getDefault(){return[0,1]}set(f){const m=this.current;(f[0]!==m[0]||f[1]!==m[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)}}class za extends Cr{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;f?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=f,this.dirty=!1}}class Rp extends Cr{getDefault(){return this.gl.LESS}set(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)}}class tg extends Cr{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;f?m.enable(m.BLEND):m.disable(m.BLEND),this.current=f,this.dirty=!1}}class Pp extends Cr{getDefault(){const f=this.gl;return[f.ONE,f.ZERO,f.ONE,f.ZERO]}set(f){const m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||f[3]!==m[3]||this.dirty)&&(this.gl.blendFuncSeparate(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Fp extends Cr{getDefault(){return o.ax.transparent}set(f){const m=this.current;(f.r!==m.r||f.g!==m.g||f.b!==m.b||f.a!==m.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class _c extends Cr{getDefault(){return this.gl.FUNC_ADD}set(f){(f!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(f,f),this.current=f,this.dirty=!1)}}class po extends Cr{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;f?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=f,this.dirty=!1}}class Qi extends Cr{getDefault(){return this.gl.BACK}set(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)}}class $c extends Cr{getDefault(){return this.gl.CCW}set(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)}}let zf=class extends Cr{getDefault(){return null}set(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)}};class ng extends Cr{getDefault(){return this.gl.TEXTURE0}set(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)}}class N_ extends Cr{getDefault(){const f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]}set(f){const m=this.current;(f[0]!==m[0]||f[1]!==m[1]||f[2]!==m[2]||f[3]!==m[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Tu extends Cr{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,f),this.current=f,this.dirty=!1}}class Cm extends Cr{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class w0 extends Cr{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,f),this.current=f,this.dirty=!1}}class $f extends Cr{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class yr extends Cr{getDefault(){return null}set(f){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class Bs extends Cr{getDefault(){return null}set(f){this.gl&&(f!==this.current||this.dirty)&&(this.gl.bindVertexArray(f),this.current=f,this.dirty=!1)}}class Ms extends Cr{getDefault(){return 4}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}}class ou extends Cr{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}}class au extends Cr{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}}class es extends Cr{constructor(f,m){super(f),this.context=f,this.parent=m}getDefault(){return null}}class Vd extends es{setDirty(){this.dirty=!0}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class Hd extends es{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class fl extends es{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,this.attachment(),m.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class bc extends Hd{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class jo{constructor(f,m,E,B,R){this.context=f,this.width=m,this.height=E;const k=this.framebuffer=f.gl.createFramebuffer();B&&(this.colorAttachment=new Vd(f,k)),R&&(this.depthAttachmentType=R,this.depthAttachment=R==="renderbuffer"?new Hd(f,k):new fl(f,k))}destroy(){const f=this.context.gl;if(this.colorAttachment){const m=this.colorAttachment.get();m&&f.deleteTexture(m)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const m=this.depthAttachment.get();m&&f.deleteRenderbuffer(m)}else{const m=this.depthAttachment.get();m&&f.deleteTexture(m)}f.deleteFramebuffer(this.framebuffer)}}class ir{constructor(f,m,E){this.func=f,this.mask=m,this.range=E}}ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(519,ir.ReadOnly,[0,1]);const Gd=7680;class di{constructor(f,m,E,B,R,k){this.test=f,this.ref=m,this.mask=E,this.fail=B,this.depthFail=R,this.pass=k}}di.disabled=new di({func:519,mask:0},0,0,Gd,Gd,Gd);const Kl=771;class Ui{constructor(f,m,E,B){this.blendFunction=f,this.blendColor=m,this.mask=E,this.blendEquation=B}}Ui.Replace=[1,0,1,0],Ui.disabled=new Ui(Ui.Replace,o.ax.transparent,[!1,!1,!1,!1]),Ui.unblended=new Ui(Ui.Replace,o.ax.transparent,[!0,!0,!0,!0]),Ui.alphaBlended=new Ui([1,Kl,1,Kl],o.ax.transparent,[!0,!0,!0,!0]),Ui.multiply=new Ui([774,0,774,0],o.ax.transparent,[!0,!0,!0,!0]);const Qd=1029,Fa=2305;class Yr{constructor(f,m,E){this.enable=f,this.mode=m,this.frontFace=E}}Yr.disabled=new Yr(!1,Qd,Fa),Yr.backCCW=new Yr(!0,Qd,Fa),Yr.backCW=new Yr(!0,Qd,2304),Yr.frontCW=new Yr(!0,1028,2304),Yr.frontCCW=new Yr(!0,1028,Fa);class x0{constructor(f,m){this.gl=f,this.clearColor=new Is(this),this.clearDepth=new Bo(this),this.clearStencil=new Qs(this),this.colorMask=new xh(this),this.depthMask=new zc(this),this.stencilMask=new zd(this),this.stencilFunc=new eg(this),this.stencilOp=new $d(this),this.stencilTest=new Df(this),this.depthRange=new Uf(this),this.depthTest=new za(this),this.depthFunc=new Rp(this),this.blend=new tg(this),this.blendFunc=new Pp(this),this.blendColor=new Fp(this),this.blendEquation=new _c(this),this.cullFace=new po(this),this.cullFaceSide=new Qi(this),this.frontFace=new $c(this),this.program=new zf(this),this.activeTexture=new ng(this),this.viewport=new N_(this),this.bindFramebuffer=new Tu(this),this.bindRenderbuffer=new Cm(this),this.bindTexture=new w0(this),this.bindVertexBuffer=new $f(this),this.bindElementBuffer=new yr(this),this.bindVertexArrayOES=new Bs(this),this.pixelStoreUnpack=new Ms(this),this.pixelStoreUnpackPremultiplyAlpha=new ou(this),this.pixelStoreUnpackFlipY=new au(this),this.options=m?{...m}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=f.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=f.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=f.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=f.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE),this.maxPointSize=f.getParameter(f.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(f,m,E){return new Vt(this,f,m,E)}createVertexBuffer(f,m,E,B,R){return new Ur(this,f,m,E,B,R)}createRenderbuffer(f,m,E){const B=this.gl,R=B.createRenderbuffer();return this.bindRenderbuffer.set(R),B.renderbufferStorage(B.RENDERBUFFER,f,m,E),this.bindRenderbuffer.set(null),R}createFramebuffer(f,m,E,B){return new jo(this,f,m,E,B)}clear({color:f,depth:m,stencil:E,colorMask:B}){const R=this.gl;let k=0;f&&(k|=R.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set(B||[!0,!0,!0,!0])),m!==void 0&&(k|=R.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),E!==void 0&&(k|=R.STENCIL_BUFFER_BIT,this.clearStencil.set(E),this.stencilMask.set(255)),R.clear(k)}setCullFace(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))}setDepthMode(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)}setStencilMode(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)}setColorMode(f){d(f.blendFunction,Ui.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor),f.blendEquation?this.blendEquation.set(f.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(f.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}var jd=o.ay([{name:"a_pos",type:"Float32",components:3}]);class _a{constructor(f,m,E,B){const R={width:E[0],height:E[1],data:null},k=f.gl;this.targetColorTexture=new o.T(f,R,k.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new o.T(f,R,k.RGBA,{useMipmap:!1}),this.context=f,this.setNumParticles(m,B),this.lastInvalidatedAt=0}setNumParticles(f,m){if(this.numParticles===m)return;(this.particleVertices0||this.particleVertices1||this.particleSegment)&&(this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy());const E=new o.az;E.reserve(Math.round(m));const B=o.aA(f.key);for(let R=0;R<m;R++)E.emplaceBack(B(),B(),B());this.particleVertices0=this.context.createVertexBuffer(E,jd.members,!0),this.particleVertices1=this.context.createVertexBuffer(E,jd.members,!0),this.particleSegment=o.aB.simpleSegment(0,0,this.particleVertices0.length,0),this.numParticles=m}update(f){return!(this.lastInvalidatedAt<f&&(this.lastInvalidatedAt=o.f.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy()}}const wc={type:2,extent:o.V,loadGeometry:()=>[[new o.P(0,0),new o.P(o.V+1,0),new o.P(o.V+1,o.V+1),new o.P(0,o.V+1),new o.P(0,0)]]};class lu{constructor(f,m,E,B,R){this.tileID=f,this.uid=o.aC(),this.uses=0,this.tileSize=m,this.tileZoom=E,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=R,B&&B.style&&(this._lastUpdatedBrightness=B.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",B&&B.transform&&(this.projection=B.transform.projection)}registerFadeDuration(f){const m=f+this.timeAdded;m<o.f.now()||this.fadeEndTime&&m<this.fadeEndTime||(this.fadeEndTime=m)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=o.as(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(f,m,E){if(this.unloadVectorData(),this.state="loaded",f){f.featureIndex&&(this.latestFeatureIndex=f.featureIndex,f.rawTileData?(this.latestRawTileData=f.rawTileData,this.latestFeatureIndex.rawTileData=f.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=f.collisionBoxArray,this.buckets=function(B,R){const k={};if(!R)return k;for(const z of B){const K=z.layerIds.map(J=>R.getLayer(J)).filter(Boolean);if(K.length!==0){z.layers=K,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(J=>K.filter(ne=>ne.id===J)[0]));for(const J of K)k[J.fqid]=z}}return k}(f.buckets,m.style),this.hasSymbolBuckets=!1;for(const B in this.buckets){const R=this.buckets[B];if(R instanceof o.aE){if(this.hasSymbolBuckets=!0,!E)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const B in this.buckets){const R=this.buckets[B];if(R instanceof o.aE&&R.hasRTLText){this.hasRTLText=!0,o.aF();break}}this.queryPadding=0;for(const B in this.buckets){const R=this.buckets[B],k=m.style.getOwnLayer(B);if(!k)continue;const z=k.queryRadius(R);this.queryPadding=Math.max(this.queryPadding,z)}f.imageAtlas&&(this.imageAtlas=f.imageAtlas),f.glyphAtlasImage&&(this.glyphAtlasImage=f.glyphAtlasImage),f.lineAtlas&&(this.lineAtlas=f.lineAtlas),this._lastUpdatedBrightness=f.brightness}else this.collisionBoxArray=new o.aD}unloadVectorData(){if(this.hasData()){for(const f in this.buckets)this.buckets[f].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(f){return this.buckets[f.fqid]}upload(f){for(const B in this.buckets){const R=this.buckets[B];R.uploadPending()&&R.upload(f)}const m=f.gl,E=this.imageAtlas;if(E&&!E.uploaded){const B=!!Object.keys(E.patternPositions).length;this.imageAtlasTexture=new o.T(f,E.image,m.RGBA,{useMipmap:B}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(f,this.glyphAtlasImage,m.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new o.T(f,this.lineAtlas.image,m.R8),this.lineAtlas.uploaded=!0)}prepare(f,m,E){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(f,this.imageAtlasTexture,E),!m||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const B=m.style.getBrightness();(this._lastUpdatedBrightness||B)&&(this._lastUpdatedBrightness&&B&&Math.abs(this._lastUpdatedBrightness-B)<.001||(this._lastUpdatedBrightness=B,this.updateBuckets(void 0,m)))}queryRenderedFeatures(f,m,E,B,R,k,z,K){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:B,pixelPosMatrix:z,transform:k,params:R,tileTransform:this.tileTransform},f,m,E):{}}querySourceFeatures(f,m){const E=this.latestFeatureIndex;if(!E||!E.rawTileData)return;const B=E.loadVTLayers(),R=m?m.sourceLayer:"",k=B._geojsonTileLayer||B[R];if(!k)return;const z=o.aG(m&&m.filter),{z:K,x:J,y:ne}=this.tileID.canonical,he={z:K,x:J,y:ne};for(let ye=0;ye<k.length;ye++){const we=k.feature(ye);if(z.needGeometry){const De=o.aH(we,!0);if(!z.filter(new o.K(this.tileID.overscaledZ),De,this.tileID.canonical))continue}else if(!z.filter(new o.K(this.tileID.overscaledZ),we))continue;const Oe=E.getId(we,R),Fe=new o.aI(we,K,J,ne,Oe);Fe.tile=he,f.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const f in this.buckets)if(this.buckets[f].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(f){const m=this.expirationTime;if(f.cacheControl){const E=o.aJ(f.cacheControl);E["max-age"]&&(this.expirationTime=Date.now()+1e3*E["max-age"])}else f.expires&&(this.expirationTime=new Date(f.expires).getTime());if(this.expirationTime){const E=Date.now();let B=!1;if(this.expirationTime>E)B=!1;else if(m)if(this.expirationTime<m)B=!0;else{const R=this.expirationTime-m;R?this.expirationTime=E+Math.max(R,3e4):B=!0}else B=!0;B?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(f,m){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(f).length!==0&&m&&this.updateBuckets(f,m)}updateBuckets(f,m){if(!this.latestFeatureIndex)return;const E=this.latestFeatureIndex.loadVTLayers(),B=m.style.listImages(),R=m.style.getBrightness();for(const k in this.buckets){if(!m.style.hasLayer(k))continue;const z=this.buckets[k],K=z.layers[0].sourceLayer||"_geojsonTileLayer",J=E[K];let ne={};if(f&&(ne=f[K],!J||!ne||Object.keys(ne).length===0))continue;if(z.update(ne,J,B,this.imageAtlas&&this.imageAtlas.patternPositions||{},R),z instanceof o.aK||z instanceof o.aL){const ye=m.style.getOwnSourceCache(z.layers[0].source);m._terrain&&m._terrain.enabled&&ye&&z.programConfigurations.needsUpload&&m._terrain._clearRenderCacheForTile(ye.id,this.tileID)}const he=m&&m.style&&m.style.getOwnLayer(k);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(z)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.f.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(f){this.symbolFadeHoldUntil=o.f.now()+f}setTexture(f,m){const E=m.context,B=E.gl;this.texture=this.texture||m.getTileTexture(f.width),this.texture&&this.texture instanceof o.T?this.texture.update(f,{useMipmap:!0}):(this.texture=new o.T(E,f,B.RGBA,{useMipmap:!0}),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE))}setDependencies(f,m){const E={};for(const B of m)E[B]=!0;this.dependencies[f]=E}hasDependency(f,m){for(const E of f){const B=this.dependencies[E];if(B){for(const R of m)if(B[R])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(f,m){if(!m||m.name==="mercator"||this._tileDebugBuffer)return;const E=o.aM(wc,this.tileID.canonical,this.tileTransform)[0],B=new o.aN,R=new o.aO;for(let k=0;k<E.length;k++){const{x:z,y:K}=E[k];B.emplaceBack(z,K),R.emplaceBack(k)}R.emplaceBack(0),this._tileDebugIndexBuffer=f.createIndexBuffer(R),this._tileDebugBuffer=f.createVertexBuffer(B,o.aP.members),this._tileDebugSegments=o.aB.simpleSegment(0,0,B.length,R.length)}_makeTileBoundsBuffers(f,m){if(this._tileBoundsBuffer||!m||m.name==="mercator")return;const E=o.aM(wc,this.tileID.canonical,this.tileTransform)[0];let B,R;if(this.isRaster){const k=function(z,K){const J=o.as(z,K),ne=Math.pow(2,z.z);for(let De=0;De<Qn;De++)for(let Ee=0;Ee<Qn;Ee++){const Ke=o.at((z.x+(Ee+Zn(Ee))/er)/ne),lt=o.au((z.y+(De+Zn(De))/er)/ne),Ze=K.project(Ke,lt),ct=De*Qn+Ee;si[2*ct+0]=Math.round((Ze.x*J.scale-J.x)*o.V),si[2*ct+1]=Math.round((Ze.y*J.scale-J.y)*o.V)}Tn.fill(0),jt.fill(0);for(let De=2045;De>=0;De--){const Ee=4*De,Ke=Nr[Ee+0],lt=Nr[Ee+1],Ze=Nr[Ee+2],ct=Nr[Ee+3],Ve=Ke+Ze>>1,ut=lt+ct>>1,Ct=Ve+ut-lt,Lt=ut+Ke-Ve,$t=lt*Qn+Ke,pn=ct*Qn+Ze,Kt=ut*Qn+Ve,Cn=Math.hypot((si[2*$t+0]+si[2*pn+0])/2-si[2*Kt+0],(si[2*$t+1]+si[2*pn+1])/2-si[2*Kt+1])>=16;Tn[Kt]=Tn[Kt]||(Cn?1:0),De<1022&&(Tn[Kt]=Tn[Kt]||Tn[(lt+Lt>>1)*Qn+(Ke+Ct>>1)]||Tn[(ct+Lt>>1)*Qn+(Ze+Ct>>1)])}const he=new o.av,ye=new o.aw;let we=0;function Oe(De,Ee){const Ke=Ee*Qn+De;return jt[Ke]===0&&(he.emplaceBack(si[2*Ke+0],si[2*Ke+1],De*o.V/er,Ee*o.V/er),jt[Ke]=++we),jt[Ke]-1}function Fe(De,Ee,Ke,lt,Ze,ct){const Ve=De+Ke>>1,ut=Ee+lt>>1;if(Math.abs(De-Ze)+Math.abs(Ee-ct)>1&&Tn[ut*Qn+Ve])Fe(Ze,ct,De,Ee,Ve,ut),Fe(Ke,lt,Ze,ct,Ve,ut);else{const Ct=Oe(De,Ee),Lt=Oe(Ke,lt),$t=Oe(Ze,ct);ye.emplaceBack(Ct,Lt,$t)}}return Fe(0,0,er,er,er,0),Fe(er,er,0,0,0,er),{vertices:he,indices:ye}}(this.tileID.canonical,m);B=k.vertices,R=k.indices}else{B=new o.av,R=new o.aw;for(const{x:z,y:K}of E)B.emplaceBack(z,K,0,0);const k=o.aQ(B.int16,void 0,4);for(let z=0;z<k.length;z+=3)R.emplaceBack(k[z],k[z+1],k[z+2])}this._tileBoundsBuffer=f.createVertexBuffer(B,o.aR.members),this._tileBoundsIndexBuffer=f.createIndexBuffer(R),this._tileBoundsSegments=o.aB.simpleSegment(0,0,B.length,R.length)}_makeGlobeTileDebugBuffers(f,m){const E=m.projection;if(!E||E.name!=="globe"||m.freezeTileCoverage)return;const B=this.tileID.canonical,R=o.aS(B,m),k=o.aT(R),z=o.S(m.zoom);let K;z>0&&(K=o.a6.invert(new Float64Array(16),m.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(f,B,m,k,K,z),this._makeGlobeTileDebugTextBuffer(f,B,m,k,K,z)}_globePoint(f,m,E,B,R,k,z){let K=o.aU(f,m,E);if(k){const J=1<<E.z,ne=o.a5(B.center.lng),he=o.ae(B.center.lat),ye=(E.x+.5)/J-ne;let we=0;ye>.5?we=-1:ye<-.5&&(we=1);let Oe=(f/o.V+E.x)/J+we,Fe=(m/o.V+E.y)/J;Oe=(Oe-ne)*B._pixelsPerMercatorPixel+ne,Fe=(Fe-he)*B._pixelsPerMercatorPixel+he;const De=[Oe*B.worldSize,Fe*B.worldSize,0];o.N.transformMat4(De,De,k),K=o.aV(K,De,z)}return o.N.transformMat4(K,K,R)}_makeGlobeTileDebugBorderBuffer(f,m,E,B,R,k){const z=new o.aN,K=new o.aO,J=new o.aW,ne=(ye,we,Oe,Fe,De)=>{const Ee=(Oe-ye)/(De-1),Ke=(Fe-we)/(De-1),lt=z.length;for(let Ze=0;Ze<De;Ze++){const ct=ye+Ze*Ee,Ve=we+Ze*Ke;z.emplaceBack(ct,Ve);const ut=this._globePoint(ct,Ve,m,E,B,R,k);J.emplaceBack(ut[0],ut[1],ut[2]),K.emplaceBack(lt+Ze)}},he=o.V;ne(0,0,he,0,16),ne(he,0,he,he,16),ne(he,he,0,he,16),ne(0,he,0,0,16),this._tileDebugIndexBuffer=f.createIndexBuffer(K),this._tileDebugBuffer=f.createVertexBuffer(z,o.aP.members),this._globeTileDebugBorderBuffer=f.createVertexBuffer(J,o.aX.members),this._tileDebugSegments=o.aB.simpleSegment(0,0,z.length,K.length)}_makeGlobeTileDebugTextBuffer(f,m,E,B,R,k){const z=o.V/4,K=new o.aN,J=new o.aw,ne=new o.aW,he=25;J.reserve(32),K.reserve(he),ne.reserve(he);const ye=(we,Oe)=>he*we+Oe;for(let we=0;we<he;we++){const Oe=we*z;for(let Fe=0;Fe<he;Fe++){const De=Fe*z;K.emplaceBack(De,Oe);const Ee=this._globePoint(De,Oe,m,E,B,R,k);ne.emplaceBack(Ee[0],Ee[1],Ee[2])}}for(let we=0;we<4;we++)for(let Oe=0;Oe<4;Oe++){const Fe=ye(we,Oe),De=ye(we,Oe+1),Ee=ye(we+1,Oe),Ke=ye(we+1,Oe+1);J.emplaceBack(Fe,De,Ee),J.emplaceBack(Ee,De,Ke)}this._tileDebugTextIndexBuffer=f.createIndexBuffer(J),this._tileDebugTextBuffer=f.createVertexBuffer(K,o.aP.members),this._globeTileDebugTextBuffer=f.createVertexBuffer(ne,o.aX.members),this._tileDebugTextSegments=o.aB.simpleSegment(0,0,he,32)}destroy(f=!1){for(const m in this.buckets)this.buckets[m].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!f&&this.texture&&this.texture instanceof o.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}const xc={vector:sn,raster:Mn,"raster-dem":class extends Mn{constructor(w,f,m,E){super(w,f,m,E),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}loadTile(w,f){const m=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function E(B,R){B&&(w.state="errored",f(B)),R&&(w.dem=R,w.dem.onDeserialize(),w.needsHillshadePrepare=!0,w.needsDEMTextureUpload=!0,w.state="loaded",f(null))}w.request=o.d(this.map._requestManager.transformRequest(m,o.R.Tile),(function(B,R,k,z){if(delete w.request,w.aborted)w.state="unloaded",f(null);else if(B)w.state="errored",f(B);else if(R){this.map._refreshExpiredTiles&&w.setExpiryData({cacheControl:k,expires:z});const K=ImageBitmap&&R instanceof ImageBitmap&&o.ak(),J=1-(R.width-o.al(R.width))/2;J<1||w.neighboringTiles||(w.neighboringTiles=this._getNeighboringTiles(w.tileID));const ne=K?R:o.f.getImageData(R,J),he={uid:w.uid,coord:w.tileID,source:this.id,scope:this.scope,rawImageData:ne,encoding:this.encoding,padding:J};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",he,E.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(w){const f=w.canonical,m=Math.pow(2,f.z),E=(f.x-1+m)%m,B=f.x===0?w.wrap-1:w.wrap,R=(f.x+1+m)%m,k=f.x+1===m?w.wrap+1:w.wrap,z={};return z[new o.am(w.overscaledZ,B,f.z,E,f.y).key]={backfilled:!1},z[new o.am(w.overscaledZ,k,f.z,R,f.y).key]={backfilled:!1},f.y>0&&(z[new o.am(w.overscaledZ,B,f.z,E,f.y-1).key]={backfilled:!1},z[new o.am(w.overscaledZ,w.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},z[new o.am(w.overscaledZ,k,f.z,R,f.y-1).key]={backfilled:!1}),f.y+1<m&&(z[new o.am(w.overscaledZ,B,f.z,E,f.y+1).key]={backfilled:!1},z[new o.am(w.overscaledZ,w.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},z[new o.am(w.overscaledZ,k,f.z,R,f.y+1).key]={backfilled:!1}),z}},"raster-array":Rn,geojson:class extends o.E{constructor(w,f,m,E){super(),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(E),this._data=f.data,this._options=o.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const B=o.V/this.tileSize;this.workerOptions=o.e({source:this.id,scope:this.scope,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*B,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*B,extent:o.V,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:o.V,radius:(f.clusterRadius!==void 0?f.clusterRadius:50)*B,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}onAdd(w){this.map=w,this.setData(this._data)}setData(w){return this._data=w,this._updateWorkerData(),this}getClusterExpansionZoom(w,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id,scope:this.scope},f),this}getClusterChildren(w,f){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id,scope:this.scope},f),this}getClusterLeaves(w,f,m,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:w,limit:f,offset:m},E),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.b("dataloading",{dataType:"source"})),this._loaded=!1;const w=o.e({},this.workerOptions);w.scope=this.scope;const f=this._data;typeof f=="string"?(w.request=this.map._requestManager.transformRequest(o.f.resolveURL(f),o.R.Source),w.request.collectResourceTiming=this._collectResourceTiming):w.data=JSON.stringify(f),this._pendingLoad=this.actor.send(`${this.type}.loadData`,w,(m,E)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new o.a(m));else{const B={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&E&&E.resourceTiming&&E.resourceTiming[this.id]&&(B.resourceTiming=E.resourceTiming[this.id]),this.fire(new o.b("data",B)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(w,f){const m=w.actor?"reloadTile":"loadTile";w.actor=this.actor;const E={type:this.type,uid:w.uid,tileID:w.tileID,tileZoom:w.tileZoom,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:o.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};w.request=this.actor.send(m,E,(B,R)=>(delete w.request,w.destroy(),w.aborted?f(null):B?f(B):(w.loadVectorData(R,this.map.painter,m==="reloadTile"),f(null))),void 0,m==="loadTile")}abortTile(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0}unloadTile(w){this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id,scope:this.scope}),w.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends o.ap{constructor(w,f,m,E){super(w,f,m,E),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const w=this.options;this.urls=[];for(const f of w.urls)this.urls.push(this.map._requestManager.transformRequest(f,o.R.Source).url);o.aq(this.urls,(f,m)=>{this._loaded=!0,f?this.fire(new o.a(f)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(w){if(this.video){const f=this.video.seekable;w<f.start(0)||w>f.end(0)?this.fire(new o.a(new se(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=w}}getVideo(){return this.video}onAdd(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const w=this.map.painter.context,f=w.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(w,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(w)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:o.ap,model:class extends o.E{constructor(w,f,m,E){super(),this.id=w,this.type="model",this.models=[],this._loaded=!1,this._options=f}load(){const w=[];for(const f in this._options.models){const m=this._options.models[f],E=o.l(this.map._requestManager.transformRequest(m.uri,o.R.Model).url).then(B=>{if(!B)return;const R=o.c(B),k=new o.M(f,m.position,m.orientation,R);k.computeBoundsAndApplyParent(),this.models.push(k)}).catch(B=>{this.fire(new o.a(new Error(`Could not load model ${f} from ${m.uri}: ${B.message}`)))});w.push(E)}return Promise.allSettled(w).then(()=>{this._loaded=!0,this.fire(new o.b("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(f=>{this.fire(new o.a(new Error(`Could not load models: ${f.message}`)))})}onAdd(w){this.map=w,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(w,f){}serialize(){return{type:"model"}}},"batched-model":class extends o.E{constructor(w,f,m,E){super(),this.type="batched-model",this.id=w,this.tileSize=512,this._options=f,this.tiles=this._options.tiles,this.maxzoom=f.maxzoom||19,this.minzoom=f.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=m,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(E)}onAdd(w){this.map=w,this.load()}load(w){this._loaded=!1,this.fire(new o.b("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,m=this.map._worldview;this._tileJSONRequest=Vn(this._options,this.map._requestManager,f,m,(E,B)=>{this._tileJSONRequest=null,this._loaded=!0,E?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),m&&m.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${m}`),this.fire(new o.a(E))):B&&(o.e(this,B),B.bounds&&(this.tileBounds=new Dt(B.bounds,this.minzoom,this.maxzoom)),o.aj(B.tiles,this.map._requestManager._customAccessToken),this.fire(new o.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.b("data",{dataType:"source",sourceDataType:"content"}))),w&&w(E)})}hasTransition(){return!1}hasTile(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)}loaded(){return this._loaded}loadTile(w,f){const m=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(m,o.R.Tile),data:void 0,uid:w.uid,tileID:w.tileID,tileZoom:w.tileZoom,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:w.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(w.actor&&w.state!=="expired")if(w.state==="loading")w.reloadCallback=f;else{if(w.buckets){const R=Object.values(w.buckets);for(const k of R)k.dirty=!0;return void(w.state="loaded")}w.request=w.actor.send("reloadTile",E,B.bind(this))}else w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",E,B.bind(this),void 0,!0);function B(R,k){return w.aborted?f(null):R&&R.status!==404?f(R):(k&&(k.resourceTiming&&(w.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&w.setExpiryData(k),w.buckets={...w.buckets,...k.buckets},k.featureIndex&&(w.latestFeatureIndex=k.featureIndex)),w.state="loaded",void f(null))}}serialize(){return o.e({},this._options)}},canvas:class extends o.ap{constructor(w,f,m,E){super(w,f,m,E),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(R=>typeof R!="number"))||this.fire(new o.a(new se(`sources.${w}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.a(new se(`sources.${w}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new o.a(new se(`sources.${w}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new o.a(new se(`sources.${w}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.a(new se(`sources.${w}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.a(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context;this.texture?!w&&!this._playing||this.texture instanceof o.ar||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(f,this.canvas,f.gl.RGBA,{premultiply:!0}),this._prepareData(f)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const w of[this.canvas.width,this.canvas.height])if(isNaN(w)||w<=0)return!0;return!1}},custom:class extends o.E{constructor(w,f,m,E){super(),this.id=w,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=f,this.setEventedParent(E),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.a(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.a(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Dt(this._implementation.bounds,this.minzoom,this.maxzoom)),f.update=this._update.bind(this),f.clearTiles=this._clearTiles.bind(this),f.coveringTiles=this._coveringTiles.bind(this),o.e(this,o.ac(f,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.ac(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.b("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(w){this._map=w,this._loaded=!1,this.fire(new o.b("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(w),this.load()}onRemove(w){this._implementation.onRemove&&this._implementation.onRemove(w)}hasTile(w){if(this._implementation.hasTile){const{x:f,y:m,z:E}=w.canonical;return this._implementation.hasTile({x:f,y:m,z:E})}return!this.tileBounds||this.tileBounds.contains(w.canonical)}loadTile(w,f){const{x:m,y:E,z:B}=w.tileID.canonical,R=new AbortController;w.request=Promise.resolve(this._implementation.loadTile({x:m,y:E,z:B},{signal:R.signal})).then((function(k){return delete w.request,w.aborted?(w.state="unloaded",f(null)):k===void 0?(w.state="errored",f(null)):k===null?(this.loadTileData(w,{width:this.tileSize,height:this.tileSize,data:null}),w.state="loaded",f(null)):function(z){return z instanceof ImageData||z instanceof HTMLCanvasElement||z instanceof ImageBitmap||z instanceof HTMLImageElement}(k)?(this.loadTileData(w,k),w.state="loaded",void f(null)):(w.state="errored",f(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(k=>{k.code!==20&&(w.state="errored",f(k))}),w.request.cancel=()=>R.abort()}loadTileData(w,f){w.setTexture(f,this._map.painter)}unloadTile(w,f){if(w.texture&&w.texture instanceof o.T?(w.destroy(!0),w.texture&&w.texture instanceof o.T&&this._map.painter.saveTileTexture(w.texture)):w.destroy(),this._implementation.unloadTile){const{x:m,y:E,z:B}=w.tileID.canonical;this._implementation.unloadTile({x:m,y:E,z:B})}f()}abortTile(w,f){w.request&&w.request.cancel&&(w.request.cancel(),delete w.request),f()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(w=>({x:w.canonical.x,y:w.canonical.y,z:w.canonical.z}))}_clearTiles(){const w=o.ag(this.id,this.scope);this._map.style.clearSource(w)}_update(){this.fire(new o.b("data",{dataType:"source",sourceDataType:"content"}))}}},ba=function(w,f,m,E){const B=new xc[f.type](w,f,m,E);if(B.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${B.id}`);return o.aY(["load","abort","unload","serialize","prepare"],B),B};function Kd(w,f){const m=o.a6.identity([]);return o.a6.scale(m,m,[.5*w.width,.5*-w.height,1]),o.a6.translate(m,m,[1,-1,0]),o.a6.multiply(m,m,w.calculateProjMatrix(f.toUnwrapped())),Float32Array.from(m)}function Op(w,f,m,E,B,R,k,z=!1){const K=w.tilesIn(E,k,z);K.sort(Wd);const J=[];for(const he of K)J.push({wrappedTileID:he.tile.tileID.wrapped().key,queryResults:he.tile.queryRenderedFeatures(f,m,w._state,he,B,R,Kd(w.transform,he.tile.tileID),z)});const ne=function(he){const ye={},we={};for(const Oe of he){const Fe=Oe.queryResults,De=Oe.wrappedTileID,Ee=we[De]=we[De]||{};for(const Ke in Fe){const lt=Fe[Ke],Ze=Ee[Ke]=Ee[Ke]||{},ct=ye[Ke]=ye[Ke]||[];for(const Ve of lt)Ze[Ve.featureIndex]||(Ze[Ve.featureIndex]=!0,ct.push(Ve))}}return ye}(J);for(const he in ne)ne[he].forEach(ye=>{const we=ye.feature,Oe=we.layer;Oe&&Oe.type!=="background"&&Oe.type!=="sky"&&Oe.type!=="slot"&&(we.source=Oe.source,Oe["source-layer"]&&(we.sourceLayer=Oe["source-layer"]),we.state=we.id!==void 0?w.getFeatureState(Oe["source-layer"],we.id):{})});return ne}function cu(w,f){const m=w.getRenderableIds().map(R=>w.getTileByID(R)),E=[],B={};for(let R=0;R<m.length;R++){const k=m[R],z=k.tileID.canonical.key;B[z]||(B[z]=!0,k.querySourceFeatures(E,f))}return E}function Wd(w,f){const m=w.tileID,E=f.tileID;return m.overscaledZ-E.overscaledZ||m.canonical.y-E.canonical.y||m.wrap-E.wrap||m.canonical.x-E.canonical.x}class Yh extends lu{constructor(f,m,E,B,R){super(f,m,E,B,R),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(f,m){const E=m.context,B=E.gl;this.texture=this.texture||m.getTileTexture(f.width),this.texture&&this.texture instanceof o.T?this.texture.update(f,{useMipmap:!1,premultiply:!1}):this.texture=new o.T(E,f,B.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(f=16384,m){const E=this._mrt=new o.aZ(30),B=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(f-1)}});return this.entireBuffer=null,this.request=o.a_(B,(R,k,z,K)=>{if(R)m(R);else try{const J=E.getHeaderLength(k);if(J>f)return void(this.request=this.fetchHeader(J,m));E.parseHeader(k),this._isHeaderLoaded=!0;let ne=0;for(const he of Object.values(E.layers))ne=Math.max(ne,he.dataIndex[he.dataIndex.length-1].last_byte);k.byteLength>=ne&&(this.entireBuffer=k),m(null,this.entireBuffer||k,z,K)}catch(J){m(J)}}),this.request}fetchBand(f,m,E){const B=this._mrt;if(!this._isHeaderLoaded||!B)return void E(new Error("Tile header is not ready"));const R=this.actor;if(!R)return void E(new Error("Can't fetch tile band without an actor"));let k;const z=(he,ye)=>{k.complete(he,ye),he?E(he):(this.updateTextureDescriptor(f,m),E(null,this.textureDescriptor&&this.textureDescriptor.img))},K=(he,ye)=>{if(he)return E(he);const we=R.send("decodeRasterArray",{buffer:ye,task:k},z,void 0,!0);this._workQueue.push(()=>{we&&we.cancel(),k.cancel()})},J=B.getLayer(f);if(!J)return void E(new Error(`Unknown sourceLayer "${f}"`));if(J.hasDataForBand(m))return this.updateTextureDescriptor(f,m),void E(null,this.textureDescriptor?this.textureDescriptor.img:null);const ne=J.getDataRange([m]);if(k=B.createDecodingTask(ne),!k||k.tasks.length)if(this.flushQueues(),this.entireBuffer)K(null,this.entireBuffer.slice(ne.firstByte,ne.lastByte+1));else{const he=Object.assign({},this.requestParams,{headers:{Range:`bytes=${ne.firstByte}-${ne.lastByte}`}}),ye=o.a_(he,K);this._fetchQueue.push(()=>{ye.cancel(),k.cancel()})}else E(null)}updateNeeded(f,m){return(!this.textureDescriptor||this.textureDescriptor.band!==m||this.textureDescriptor.layer!==f)&&this.state!=="errored"}updateTextureDescriptor(f,m){if(!this._mrt)return;const E=this._mrt.getLayer(f);if(!E||!E.hasBand(m)||!E.hasDataForBand(m))return;const{bytes:B,tileSize:R,buffer:k,offset:z,scale:K}=E.getBandView(m),J=R+2*k,ne={data:B,width:J,height:J},he=this.texture;he&&he instanceof o.T&&he.update(ne,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:f,band:m,img:ne,buffer:k,offset:z,tileSize:R,format:E.pixelFormat,mix:[K,256*K,65536*K,16777216*K]}}}class qd{constructor(f,m){this.max=f,this.onRemove=m,this.reset()}reset(){for(const f in this.data)for(const m of this.data[f])m.timeout&&clearTimeout(m.timeout),this.onRemove(m.value);return this.data={},this.order=[],this}add(f,m,E){const B=f.wrapped().key;this.data[B]===void 0&&(this.data[B]=[]);const R={value:m,timeout:void 0};if(E!==void 0&&(R.timeout=setTimeout(()=>{this.remove(f,R)},E)),this.data[B].push(R),this.order.push(B),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(f){return f.wrapped().key in this.data}getAndRemove(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null}_getAndRemoveByKey(f){const m=this.data[f].shift();return m.timeout&&clearTimeout(m.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),m.value}getByKey(f){const m=this.data[f];return m?m[0].value:null}get(f){return this.has(f)?this.data[f.wrapped().key][0].value:null}remove(f,m){if(!this.has(f))return this;const E=f.wrapped().key,B=m===void 0?0:this.data[E].indexOf(m),R=this.data[E][B];return this.data[E].splice(B,1),R.timeout&&clearTimeout(R.timeout),this.data[E].length===0&&delete this.data[E],this.onRemove(R.value),this.order.splice(this.order.indexOf(E),1),this}setMaxSize(f){for(this.max=f;this.order.length>this.max;){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}filter(f){const m=[];for(const E in this.data)for(const B of this.data[E])f(B.value)||m.push(B);for(const E of m)this.remove(E.value.tileID,E)}}class uu extends o.E{constructor(f,m,E){super(),this.id=f,this._onlySymbols=E,m.on("data",B=>{B.dataType==="source"&&B.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&B.dataType==="source"&&B.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),m.on("error",()=>{this._sourceErrored=!0}),this._source=m,this._tiles={},this._cache=new qd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Y,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(f){this.map=f,this._minTileCacheSize=this._minTileCacheSize===void 0&&f?f._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&f?f._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const f in this._tiles){const m=this._tiles[f];if(m.state!=="errored"&&(m.state!=="loaded"||!m.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const f=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,f&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(f,m){return f.isSymbolTile=this._onlySymbols,f.isExtraShadowCaster=this._shadowCasterTiles[f.tileID.key],this._source.loadTile(f,m)}_unloadTile(f){if(this._source.unloadTile)return this._source.unloadTile(f,()=>{})}_abortTile(f){if(this._source.abortTile)return this._source.abortTile(f,()=>{})}serialize(){return this._source.serialize()}prepare(f){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const m in this._tiles){const E=this._tiles[m];E.upload(f),E.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return o.a$(this._tiles).map(f=>f.tileID).sort(qu).map(f=>f.key)}getRenderableIds(f,m){const E=[];for(const B in this._tiles)this._isIdRenderable(+B,f,m)&&E.push(this._tiles[B]);return f?E.sort((B,R)=>{const k=B.tileID,z=R.tileID,K=new o.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle),J=new o.P(z.canonical.x,z.canonical.y)._rotate(this.transform.angle);return k.overscaledZ-z.overscaledZ||J.y-K.y||J.x-K.x}).map(B=>B.tileID.key):E.map(B=>B.tileID).sort(qu).map(B=>B.key)}hasRenderableParent(f){const m=this.findLoadedParent(f,0);return!!m&&this._isIdRenderable(m.tileID.key)}_isIdRenderable(f,m,E){return this._tiles[f]&&this._tiles[f].hasData()&&!this._coveredTiles[f]&&(m||!this._tiles[f].holdingForFade())&&(E||!this._shadowCasterTiles[f])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const f in this._tiles)this._tiles[f].state!=="errored"&&this._reloadTile(+f,"reloading")}}_reloadTile(f,m){const E=this._tiles[f];E&&(E.state!=="loading"&&(E.state=m),this._loadTile(E,this._tileLoaded.bind(this,E,f,m)))}_tileLoaded(f,m,E,B){if(B)if(f.state="errored",B.status!==404)this._source.fire(new o.a(B,{tile:f}));else{if(!(f.tileID.key in this._loadedParentTiles))return void this._source.fire(new o.b("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const R=this.map.painter.terrain;this.update(this.transform,R.getScaledDemTileSize(),!0),R.resetTileLookupCache(this.id)}else this.update(this.transform)}else f.timeAdded=o.f.now(),E==="expired"&&(f.refreshedUponExpiration=!0),this._setTileReloadTimer(m,f),this._source.type==="raster-dem"&&f.dem&&this._backfillDEM(f),this._state.initializeTileState(f,this.map?this.map.painter:null),this._source.fire(new o.b("data",{dataType:"source",tile:f,coord:f.tileID,sourceCacheId:this.id}))}_backfillDEM(f){const m=this.getRenderableIds();for(let B=0;B<m.length;B++){const R=m[B];if(f.neighboringTiles&&f.neighboringTiles[R]){const k=this.getTileByID(R);E(f,k),E(k,f)}}function E(B,R){if(!B.dem||B.dem.borderReady)return;B.needsHillshadePrepare=!0,B.needsDEMTextureUpload=!0;let k=R.tileID.canonical.x-B.tileID.canonical.x;const z=R.tileID.canonical.y-B.tileID.canonical.y,K=Math.pow(2,B.tileID.canonical.z),J=R.tileID.key;k===0&&z===0||Math.abs(z)>1||(Math.abs(k)>1&&(Math.abs(k+K)===1?k+=K:Math.abs(k-K)===1&&(k-=K)),R.dem&&B.dem&&(B.dem.backfillBorder(R.dem,k,z),B.neighboringTiles&&B.neighboringTiles[J]&&(B.neighboringTiles[J].backfilled=!0)))}}getTile(f){return this.getTileByID(f.key)}getTileByID(f){return this._tiles[f]}_retainLoadedChildren(f,m,E,B){for(const R in this._tiles){let k=this._tiles[R];if(B[R]||!k.hasData()||k.tileID.overscaledZ<=m||k.tileID.overscaledZ>E)continue;let z=k.tileID;for(;k&&k.tileID.overscaledZ>m+1;){const J=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[J.key],k&&k.hasData()&&(z=J)}let K=z;for(;K.overscaledZ>m;)if(K=K.scaledTo(K.overscaledZ-1),f[K.key]){B[z.key]=z;break}}}findLoadedParent(f,m){if(f.key in this._loadedParentTiles){const E=this._loadedParentTiles[f.key];return E&&E.tileID.overscaledZ>=m?E:null}for(let E=f.overscaledZ-1;E>=m;E--){const B=f.scaledTo(E),R=this._getLoadedTile(B);if(R)return R}}_getLoadedTile(f){const m=this._tiles[f.key];return m&&m.hasData()?m:this._cache.getByKey(this._source.reparseOverscaled?f.wrapped().key:f.canonical.key)}updateCacheSize(f,m){m=m||this._source.tileSize;const E=Math.ceil(f.width/m)+1,B=Math.ceil(f.height/m)+1,R=Math.floor(E*B*5),k=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,R):R,z=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(z)}handleWrapJump(f){const m=Math.round((f-(this._prevLng===void 0?f:this._prevLng))/360);if(this._prevLng=f,m){const E={};for(const B in this._tiles){const R=this._tiles[B];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+m),E[R.tileID.key]=R}this._tiles=E;for(const B in this._timers)clearTimeout(this._timers[B]),delete this._timers[B];for(const B in this._tiles)this._setTileReloadTimer(+B,this._tiles[B])}}update(f,m,E,B){if(this.transform=f,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!E)return;let R;if(this.updateCacheSize(f,m),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain)if(this._source.tileID)R=f.getVisibleUnwrappedCoordinates(this._source.tileID).map(K=>new o.am(K.canonical.z,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y));else if(this.tileCoverLift!==0){const K=f.clone();K.tileCoverLift=this.tileCoverLift,R=K.coveringTiles({tileSize:m||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!E,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&f.projection.name==="globe"&&(R.push(new o.am(1,0,1,0,0)),R.push(new o.am(1,0,1,1,0)),R.push(new o.am(1,0,1,0,1)),R.push(new o.am(1,0,1,1,1)))}else R=f.coveringTiles({tileSize:m||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!E,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(R=R.filter(K=>this._source.hasTile(K)));else R=[];if(R.length>0&&this.castsShadows&&B&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Cc(this._source.type)){const K=f.coveringZoomLevel({tileSize:m||this._source.tileSize,roundZoom:this._source.roundZoom&&!E}),J=Math.min(K,this._source.maxzoom),ne=f.extendTileCoverForShadows(R,B,J);for(const he of ne)this._shadowCasterTiles[he.key]=!0,R.push(he)}const k=this._updateRetainedTiles(R);if(Cc(this._source.type)&&R.length!==0){const K={},J={},ne=Object.keys(k);for(const ye of ne){const we=k[ye],Oe=this._tiles[ye];if(!Oe||Oe.fadeEndTime&&Oe.fadeEndTime<=o.f.now())continue;const Fe=this.findLoadedParent(we,Math.max(we.overscaledZ-uu.maxOverzooming,this._source.minzoom));Fe&&(this._addTile(Fe.tileID),K[Fe.tileID.key]=Fe.tileID),J[ye]=we}const he=R[R.length-1].overscaledZ;for(const ye in this._tiles){const we=this._tiles[ye];if(k[ye]||!we.hasData())continue;let Oe=we.tileID;for(;Oe.overscaledZ>he;){Oe=Oe.scaledTo(Oe.overscaledZ-1);const Fe=this._tiles[Oe.key];if(Fe&&Fe.hasData()&&J[Oe.key]){k[ye]=we.tileID;break}}}for(const ye in K)k[ye]||(this._coveredTiles[ye]=!0,k[ye]=K[ye])}for(const K in k)this._tiles[K].clearFadeHold();const z=o.b0(this._tiles,k);for(const K of z){const J=this._tiles[K];J.hasSymbolBuckets&&!J.holdingForFade()?J.setHoldDuration(this.map._fadeDuration):J.hasSymbolBuckets&&!J.symbolFadeFinished()||this._removeTile(+K)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const f in this._tiles)this._tiles[f].holdingForFade()&&this._removeTile(+f)}_updateRetainedTiles(f){const m={};if(f.length===0)return m;const E={},B=f.reduce((J,ne)=>Math.min(J,ne.overscaledZ),1/0),R=f[0].overscaledZ,k=Math.max(R-uu.maxOverzooming,this._source.minzoom),z=Math.max(R+uu.maxUnderzooming,this._source.minzoom),K={};for(const J of f){const ne=this._addTile(J);m[J.key]=J,ne.hasData()||B<this._source.maxzoom&&(K[J.key]=J)}this._retainLoadedChildren(K,B,z,m);for(const J of f){let ne=this._tiles[J.key];if(ne.hasData())continue;if(J.canonical.z>=this._source.maxzoom){const ye=J.children(this._source.maxzoom)[0],we=this.getTile(ye);if(we&&we.hasData()){m[ye.key]=ye;continue}}else{const ye=J.children(this._source.maxzoom);if(m[ye[0].key]&&m[ye[1].key]&&m[ye[2].key]&&m[ye[3].key])continue}let he=ne.wasRequested();for(let ye=J.overscaledZ-1;ye>=k;--ye){const we=J.scaledTo(ye);if(E[we.key]||(E[we.key]=!0,ne=this.getTile(we),!ne&&he&&(ne=this._addTile(we)),ne&&(m[we.key]=we,he=ne.wasRequested(),ne.hasData())))break}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const f in this._tiles){const m=[];let E,B=this._tiles[f].tileID;for(;B.overscaledZ>0;){if(B.key in this._loadedParentTiles){E=this._loadedParentTiles[B.key];break}m.push(B.key);const R=B.scaledTo(B.overscaledZ-1);if(E=this._getLoadedTile(R),E)break;B=R}for(const R of m)this._loadedParentTiles[R]=E}}_addTile(f){let m=this._tiles[f.key];if(m)return m.isExtraShadowCaster!==!0||this._shadowCasterTiles[f.key]||this._reloadTile(f.key,"reloading"),m;m=this._cache.getAndRemove(f),m&&(this._setTileReloadTimer(f.key,m),m.tileID=f,this._state.initializeTileState(m,this.map?this.map.painter:null),this._cacheTimers[f.key]&&(clearTimeout(this._cacheTimers[f.key]),delete this._cacheTimers[f.key],this._setTileReloadTimer(f.key,m)));const E=!!m;if(!E){const B=this.map?this.map.painter:null,R=this._source.tileSize*f.overscaleFactor();m=this._source.type==="raster-array"?new Yh(f,R,this.transform.tileZoom,B,this._isRaster):new lu(f,R,this.transform.tileZoom,B,this._isRaster),this._loadTile(m,this._tileLoaded.bind(this,m,f.key,m.state))}return m?(m.uses++,this._tiles[f.key]=m,E||this._source.fire(new o.b("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m):null}_setTileReloadTimer(f,m){f in this._timers&&(clearTimeout(this._timers[f]),delete this._timers[f]);const E=m.getExpiryTimeout();E&&(this._timers[f]=setTimeout(()=>{this._reloadTile(f,"expired"),delete this._timers[f]},E))}_removeTile(f){const m=this._tiles[f];m&&(m.uses--,delete this._tiles[f],this._timers[f]&&(clearTimeout(this._timers[f]),delete this._timers[f]),m.uses>0||(m.hasData()&&m.state!=="reloading"||m.state==="empty"?this._cache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const f in this._tiles)this._removeTile(+f);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(f,m,E){const B=[],R=this.transform;if(!R)return B;const k=R.projection.name==="globe",z=o.a5(R.center.lng);for(const K in this._tiles){const J=this._tiles[K];if(E&&J.clearQueryDebugViz(),J.holdingForFade())continue;let ne;if(k){const he=J.tileID.canonical;if(he.z===0){const ye=[Math.abs(o.aa(z,...Np(he,-1))-z),Math.abs(o.aa(z,...Np(he,1))-z)];ne=[0,2*ye.indexOf(Math.min(...ye))-1]}else{const ye=[Math.abs(o.aa(z,...Np(he,-1))-z),Math.abs(o.aa(z,...Np(he,0))-z),Math.abs(o.aa(z,...Np(he,1))-z)];ne=[ye.indexOf(Math.min(...ye))-1]}}else ne=[0];for(const he of ne){const ye=f.containsTile(J,R,m,he);ye&&B.push(ye)}}return B}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(f){return this._getRenderableCoordinates(f)}_getRenderableCoordinates(f,m){const E=this.getRenderableIds(f,m).map(R=>this._tiles[R].tileID),B=this.transform.projection.name==="globe";for(const R of E)R.projMatrix=this.transform.calculateProjMatrix(R.toUnwrapped()),R.expandedProjMatrix=B?this.transform.calculateProjMatrix(R.toUnwrapped(),!1,!0):R.projMatrix;return E}sortCoordinatesByDistance(f){const m=f.slice(),E=this.transform._camera.position,B=this.transform._camera.forward(),R={};for(const k of m){const z=1/(1<<k.canonical.z);R[k.key]=((k.canonical.x+.5)*z+k.wrap-E[0])*B[0]+((k.canonical.y+.5)*z-E[1])*B[1]-E[2]*B[2]}return m.sort((k,z)=>R[k.key]-R[z.key]),m}hasTransition(){if(this._source.hasTransition())return!0;if(Cc(this._source.type))for(const f in this._tiles){const m=this._tiles[f];if(m.fadeEndTime!==void 0&&m.fadeEndTime>=o.f.now())return!0}return!1}setFeatureState(f,m,E){this._state.updateState(f=f||"_geojsonTileLayer",m,E)}removeFeatureState(f,m,E){this._state.removeFeatureState(f=f||"_geojsonTileLayer",m,E)}getFeatureState(f,m){return this._state.getState(f=f||"_geojsonTileLayer",m)}setDependencies(f,m,E){const B=this._tiles[f];B&&B.setDependencies(m,E)}reloadTilesForDependencies(f,m){for(const E in this._tiles)this._tiles[E].hasDependency(f,m)&&this._reloadTile(+E,"reloading");this._cache.filter(E=>!E.hasDependency(f,m))}_preloadTiles(f,m){if(!this._sourceLoaded){const K=()=>{this._sourceLoaded&&(this._source.off("data",K),this._preloadTiles(f,m))};return void this._source.on("data",K)}const E=new Map,B=Array.isArray(f)?f:[f],R=this.map.painter.terrain,k=this.usedForTerrain&&R?R.getScaledDemTileSize():this._source.tileSize;for(const K of B){const J=K.coveringTiles({tileSize:k,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const ne of J)E.set(ne.key,ne);this.usedForTerrain&&K.updateElevation(!1)}const z=Array.from(E.values());o.b1(z,(K,J)=>{const ne=new lu(K,this._source.tileSize*K.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(ne,he=>{this._source.type==="raster-dem"&&ne.dem&&this._backfillDEM(ne),J(he,ne)})},m)}}function qu(w,f){const m=Math.abs(2*w.wrap)-+(w.wrap<0),E=Math.abs(2*f.wrap)-+(f.wrap<0);return w.overscaledZ-f.overscaledZ||E-m||f.canonical.y-w.canonical.y||f.canonical.x-w.canonical.x}function Cc(w){return w==="raster"||w==="image"||w==="video"||w==="custom"}function Np(w,f){const m=1<<w.z;return[w.x/m+f,(w.x+1)/m+f]}uu.maxOverzooming=10,uu.maxUnderzooming=3;class Yd{constructor(f){this.style=f,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const f=!1,m=!1;for(const E in this.style._mergedLayers){const B=this.style._mergedLayers[E];if(B.type==="fill-extrusion")this.layers.push({layer:B,visible:f,visibilityChanged:m});else if(B.type==="model"){const R=this.style.getLayerSource(B);R&&R.type==="batched-model"&&this.layers.push({layer:B,visible:f,visibilityChanged:m})}}}onNewFrame(f){this.layersGotHidden=!1;for(const m of this.layers){const E=m.layer;let B=!1;E.type==="fill-extrusion"?B=!E.isHidden(f)&&E.paint.get("fill-extrusion-opacity")>0:E.type==="model"&&(B=!E.isHidden(f)&&E.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!B&&m.visible,m.visible=B}}updateZOffset(f,m){this.currentBuildingBuckets=[];for(const B of this.layers){const R=B.layer,k=this.style.getLayerSourceCache(R);let z=1;R.type==="fill-extrusion"&&(z=B.visible?R.paint.get("fill-extrusion-vertical-scale"):0);let K=k?k.getTile(m):null;if(!K&&k&&m.canonical.z>k.getSource().minzoom){let J=m.scaledTo(Math.min(k.getSource().maxzoom,m.overscaledZ-1));for(;J.overscaledZ>=k.getSource().minzoom&&(K=k.getTile(J),!K&&J.overscaledZ!==0);)J=J.scaledTo(J.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:K?K.getBucket(R):null,tileID:K?K.tileID:m,verticalScale:z})}f.hasAnyZOffset=!1;let E=!1;for(let B=0;B<f.symbolInstances.length;B++){const R=f.symbolInstances.get(B),k=R.zOffset,z=this._getHeightAtTileOffset(m,R.tileAnchorX,R.tileAnchorY);R.zOffset=z!==Number.NEGATIVE_INFINITY?z:k,E||k===R.zOffset||(E=!0),f.hasAnyZOffset||R.zOffset===0||(f.hasAnyZOffset=!0)}E&&(f.zOffsetBuffersNeedUpload=!0,f.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(f,m,E,B){let R=m,k=E;if(f.canonical.z!==B.canonical.z){const z=B.canonical,K=1/(1<<f.canonical.z-z.z);R=(m+f.canonical.x*o.V)*K-z.x*o.V|0,k=(E+f.canonical.y*o.V)*K-z.y*o.V|0}return{tileX:R,tileY:k}}_getHeightAtTileOffset(f,m,E){let B,R;for(let k=0;k<this.layers.length;++k){if(this.layers[k].layer.type!=="fill-extrusion")continue;const{bucket:z,tileID:K,verticalScale:J}=this.currentBuildingBuckets[k];if(!z)continue;const{tileX:ne,tileY:he}=this._mapCoordToOverlappingTile(f,m,E,K),ye=z.getHeightAtTileCoord(ne,he);ye&&ye.height!==void 0&&(ye.hidden?B=ye.height:R=Math.max(ye.height*J,R||0))}if(R!==void 0)return R;for(let k=0;k<this.layers.length;++k){const z=this.layers[k];if(z.layer.type!=="model"||!z.visible)continue;const{bucket:K,tileID:J}=this.currentBuildingBuckets[k];if(!K)continue;const{tileX:ne,tileY:he}=this._mapCoordToOverlappingTile(f,m,E,J),ye=K.getHeightAtTileCoord(ne,he);if(ye&&!ye.hidden)return ye.height===void 0&&B!==void 0?Math.min(ye.maxHeight,B)*ye.verticalScale:(ye.height||0)*ye.verticalScale}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Wl(w,f){const m={};for(const E in w)E!=="ref"&&(m[E]=w[E]);return o.b2.forEach(E=>{E in f&&(m[E]=f[E])}),m}function rg(w){w=w.slice();const f=Object.create(null);for(let m=0;m<w.length;m++)f[w[m].id]=w[m];for(let m=0;m<w.length;m++)"ref"in w[m]&&(w[m]=Wl(w[m],f[w[m].ref]));return w}const ji={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function kp(w,f,m){m.push({command:ji.addSource,args:[w,f[w]]})}function Vf(w,f,m){f.push({command:ji.removeSource,args:[w]}),m[w]=!0}function k_(w,f,m,E){Vf(w,m,E),kp(w,f,m)}function Em(w,f,m){let E;for(E in w[m])if(w[m].hasOwnProperty(E)&&E!=="data"&&!d(w[m][E],f[m][E]))return!1;for(E in f[m])if(f[m].hasOwnProperty(E)&&E!=="data"&&!d(w[m][E],f[m][E]))return!1;return!0}function Yu(w,f,m,E,B,R){let k;for(k in f=f||{},w=w||{})w.hasOwnProperty(k)&&(d(w[k],f[k])||m.push({command:R,args:[E,k,f[k],B]}));for(k in f)f.hasOwnProperty(k)&&!w.hasOwnProperty(k)&&(d(w[k],f[k])||m.push({command:R,args:[E,k,f[k],B]}))}function Ch(w){return w.id}function Xd(w,f){return w[f.id]=f,w}class Xh{constructor(f,m){this.reset(f,m)}reset(f,m){this.points=f||[],this._distances=[0];for(let E=1;E<this.points.length;E++)this._distances[E]=this._distances[E-1]+this.points[E].dist(this.points[E-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(f){if(this.points.length===1)return this.points[0];f=o.aa(f,0,1);let m=1,E=this._distances[m];const B=f*this.paddedLength+this.padding;for(;E<B&&m<this._distances.length;)E=this._distances[++m];const R=m-1,k=this._distances[R],z=E-k,K=z>0?(B-k)/z:0;return this.points[R].mult(1-K).add(this.points[m].mult(K))}}class Dp{constructor(f,m,E){const B=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(f/E),this.yCellCount=Math.ceil(m/E);for(let k=0;k<this.xCellCount*this.yCellCount;k++)B.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=m,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(f,m,E,B,R){this._forEachCell(m,E,B,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(m),this.bboxes.push(E),this.bboxes.push(B),this.bboxes.push(R)}insertCircle(f,m,E,B){this._forEachCell(m-B,E-B,m+B,E+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(m),this.circles.push(E),this.circles.push(B)}_insertBoxCell(f,m,E,B,R,k){this.boxCells[R].push(k)}_insertCircleCell(f,m,E,B,R,k){this.circleCells[R].push(k)}_query(f,m,E,B,R,k){if(E<0||f>this.width||B<0||m>this.height)return!R&&[];const z=[];if(f<=0&&m<=0&&this.width<=E&&this.height<=B){if(R)return!0;for(let K=0;K<this.boxKeys.length;K++)z.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(let K=0;K<this.circleKeys.length;K++){const J=this.circles[3*K],ne=this.circles[3*K+1],he=this.circles[3*K+2];z.push({key:this.circleKeys[K],x1:J-he,y1:ne-he,x2:J+he,y2:ne+he})}return k?z.filter(k):z}return this._forEachCell(f,m,E,B,this._queryCell,z,{hitTest:R,seenUids:{box:{},circle:{}}},k),R?z.length>0:z}_queryCircle(f,m,E,B,R){const k=f-E,z=f+E,K=m-E,J=m+E;if(z<0||k>this.width||J<0||K>this.height)return!B&&[];const ne=[];return this._forEachCell(k,K,z,J,this._queryCellCircle,ne,{hitTest:B,circle:{x:f,y:m,radius:E},seenUids:{box:{},circle:{}}},R),B?ne.length>0:ne}query(f,m,E,B,R){return this._query(f,m,E,B,!1,R)}hitTest(f,m,E,B,R){return this._query(f,m,E,B,!0,R)}hitTestCircle(f,m,E,B){return this._queryCircle(f,m,E,!0,B)}_queryCell(f,m,E,B,R,k,z,K){const J=z.seenUids,ne=this.boxCells[R];if(ne!==null){const ye=this.bboxes;for(const we of ne)if(!J.box[we]){J.box[we]=!0;const Oe=4*we;if(f<=ye[Oe+2]&&m<=ye[Oe+3]&&E>=ye[Oe+0]&&B>=ye[Oe+1]&&(!K||K(this.boxKeys[we]))){if(z.hitTest)return k.push(!0),!0;k.push({key:this.boxKeys[we],x1:ye[Oe],y1:ye[Oe+1],x2:ye[Oe+2],y2:ye[Oe+3]})}}}const he=this.circleCells[R];if(he!==null){const ye=this.circles;for(const we of he)if(!J.circle[we]){J.circle[we]=!0;const Oe=3*we;if(this._circleAndRectCollide(ye[Oe],ye[Oe+1],ye[Oe+2],f,m,E,B)&&(!K||K(this.circleKeys[we]))){if(z.hitTest)return k.push(!0),!0;{const Fe=ye[Oe],De=ye[Oe+1],Ee=ye[Oe+2];k.push({key:this.circleKeys[we],x1:Fe-Ee,y1:De-Ee,x2:Fe+Ee,y2:De+Ee})}}}}}_queryCellCircle(f,m,E,B,R,k,z,K){const J=z.circle,ne=z.seenUids,he=this.boxCells[R];if(he!==null){const we=this.bboxes;for(const Oe of he)if(!ne.box[Oe]){ne.box[Oe]=!0;const Fe=4*Oe;if(this._circleAndRectCollide(J.x,J.y,J.radius,we[Fe+0],we[Fe+1],we[Fe+2],we[Fe+3])&&(!K||K(this.boxKeys[Oe])))return k.push(!0),!0}}const ye=this.circleCells[R];if(ye!==null){const we=this.circles;for(const Oe of ye)if(!ne.circle[Oe]){ne.circle[Oe]=!0;const Fe=3*Oe;if(this._circlesCollide(we[Fe],we[Fe+1],we[Fe+2],J.x,J.y,J.radius)&&(!K||K(this.circleKeys[Oe])))return k.push(!0),!0}}}_forEachCell(f,m,E,B,R,k,z,K){const J=this._convertToXCellCoord(f),ne=this._convertToYCellCoord(m),he=this._convertToXCellCoord(E),ye=this._convertToYCellCoord(B);for(let we=J;we<=he;we++)for(let Oe=ne;Oe<=ye;Oe++)if(R.call(this,f,m,E,B,this.xCellCount*Oe+we,k,z,K))return}_convertToXCellCoord(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}_convertToYCellCoord(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}_circlesCollide(f,m,E,B,R,k){const z=B-f,K=R-m,J=E+k;return J*J>z*z+K*K}_circleAndRectCollide(f,m,E,B,R,k,z){const K=(k-B)/2,J=Math.abs(f-(B+K));if(J>K+E)return!1;const ne=(z-R)/2,he=Math.abs(m-(R+ne));if(he>ne+E)return!1;if(J<=K||he<=ne)return!0;const ye=J-K,we=he-ne;return ye*ye+we*we<=E*E}}const Xu={unknown:0,flipRequired:1,flipNotRequired:2},Zh=Math.tan(85*Math.PI/180);function Jh(w,f,m,E,B,R,k){const z=o.a6.create();if(m)if(R.name==="globe"){const K=o.b3(B,f);o.a6.multiply(z,z,K)}else{const K=o.b4.invert([],k);z[0]=K[0],z[1]=K[1],z[4]=K[2],z[5]=K[3],E||o.a6.rotateZ(z,z,B.angle)}else o.a6.multiply(z,B.labelPlaneMatrix,w);return z}function Zd(w,f,m,E,B,R,k){const z=Jh(w,f,m,E,B,R,k);return R.name==="globe"&&m||(z[2]=z[6]=z[10]=z[14]=0),z}function Up(w,f,m,E,B,R,k){if(m){if(R.name==="globe"){const z=Jh(w,f,m,E,B,R,k);return o.a6.invert(z,z),o.a6.multiply(z,w,z),z}{const z=o.a6.clone(w),K=o.a6.identity([]);return K[0]=k[0],K[1]=k[1],K[4]=k[2],K[5]=k[3],o.a6.multiply(z,z,K),E||o.a6.rotateZ(z,z,-B.angle),z}}return B.glCoordMatrix}function vl(w,f,m,E){const B=[w,f,m,1];m?o.a7.transformMat4(B,B,E):_s(B,B,E);const R=B[3];return B[0]/=R,B[1]/=R,B[2]/=R,B}function ig(w,f){return Math.min(.5+w/f*.5,1.5)}function de(w,f){const m=w[0]/w[3],E=w[1]/w[3];return m>=-f[0]&&m<=f[0]&&E>=-f[1]&&E<=f[1]}function We(w,f,m,E,B,R,k,z,K,J){const ne=m.transform,he=E?w.textSizeData:w.iconSizeData,ye=o.b5(he,m.transform.zoom),we=ne.projection.name==="globe",Oe=[256/m.width*2+1,256/m.height*2+1],Fe=E?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Fe.clear();let De=null;we&&(De=E?w.text.globeExtVertexArray:w.icon.globeExtVertexArray);const Ee=w.lineVertexArray,Ke=E?w.text.placedSymbolArray:w.icon.placedSymbolArray,lt=m.transform.width/m.transform.height;let Ze,ct=!1;for(let Ve=0;Ve<Ke.length;Ve++){const ut=Ke.get(Ve),{numGlyphs:Ct,writingMode:Lt}=ut;if(Lt!==o.b6.vertical||ct||Ze===o.b6.horizontal||(ct=!0),Ze=Lt,(ut.hidden||Lt===o.b6.vertical)&&!ct){Ci(Ct,Fe);continue}ct=!1;const $t=new o.P(ut.tileAnchorX,ut.tileAnchorY);let{x:pn,y:Kt,z:Cn}=ne.projection.projectTilePoint($t.x,$t.y,J.canonical);if(K){const[pr,kr,Zr]=K($t);pn+=pr,Kt+=kr,Cn+=Zr}const bn=[pn,Kt,Cn,1];if(o.a7.transformMat4(bn,bn,f),!de(bn,Oe)){Ci(Ct,Fe);continue}const $n=bn[3],Yt=ig(m.transform.getCameraToCenterDistance(ne.projection),$n),vn=o.b7(he,ye,ut),Nt=k?vn/Yt:vn*Yt,ln=vl(pn,Kt,Cn,B);if(ln[3]<=0){Ci(Ct,Fe);continue}let jn={};const sr=k?null:K,tr=xn(ut,Nt,!1,z,f,B,R,w.glyphOffsetArray,Ee,Fe,De,ln,$t,jn,lt,sr,ne.projection,J,k);ct=tr.useVertical,sr&&tr.needsFlipping&&(jn={}),(tr.notEnoughRoom||ct||tr.needsFlipping&&xn(ut,Nt,!0,z,f,B,R,w.glyphOffsetArray,Ee,Fe,De,ln,$t,jn,lt,sr,ne.projection,J,k).notEnoughRoom)&&Ci(Ct,Fe)}E?(w.text.dynamicLayoutVertexBuffer.updateData(Fe),De&&w.text.globeExtVertexBuffer&&w.text.globeExtVertexBuffer.updateData(De)):(w.icon.dynamicLayoutVertexBuffer.updateData(Fe),De&&w.icon.globeExtVertexBuffer&&w.icon.globeExtVertexBuffer.updateData(De))}function Ot(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe){const{lineStartIndex:De,glyphStartIndex:Ee,segment:Ke}=z,lt=Ee+z.numGlyphs,Ze=De+z.lineLength,ct=f.getoffsetX(Ee),Ve=f.getoffsetX(lt-1),ut=ei(w*ct,m,E,B,R,k,Ke,De,Ze,K,J,ne,he,ye,!0,we,Oe,Fe);if(!ut)return null;const Ct=ei(w*Ve,m,E,B,R,k,Ke,De,Ze,K,J,ne,he,ye,!0,we,Oe,Fe);return Ct?{first:ut,last:Ct}:null}function Jt(w,f,m,E){return w===o.b6.horizontal&&Math.abs(E)>Math.abs(m)?{useVertical:!0}:w===o.b6.vertical?E>0?{needsFlipping:!0}:null:f!==Xu.unknown&&function(B,R){return B===0||Math.abs(R/B)>Zh}(m,E)?f===Xu.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function xn(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee,Ke){const lt=f/24,Ze=w.lineOffsetX*lt,ct=w.lineOffsetY*lt,{lineStartIndex:Ve,glyphStartIndex:ut,numGlyphs:Ct,segment:Lt,writingMode:$t,flipState:pn}=w,Kt=Ve+w.lineLength,Cn=bn=>{if(ne){const[Nt,ln,jn]=bn.up,sr=J.length;o.b8(ne,sr+0,Nt,ln,jn),o.b8(ne,sr+1,Nt,ln,jn),o.b8(ne,sr+2,Nt,ln,jn),o.b8(ne,sr+3,Nt,ln,jn)}const[$n,Yt,vn]=bn.point;o.b9(J,$n,Yt,vn,bn.angle)};if(Ct>1){const bn=Ot(lt,z,Ze,ct,m,he,ye,w,K,R,we,Fe,!1,De,Ee,Ke);if(!bn)return{notEnoughRoom:!0};if(E&&!m){let[$n,Yt,vn]=bn.first.point,[Nt,ln,jn]=bn.last.point;[$n,Yt]=vl($n,Yt,vn,k),[Nt,ln]=vl(Nt,ln,jn,k);const sr=Jt($t,pn,(Nt-$n)*Oe,ln-Yt);if(w.flipState=sr&&sr.needsFlipping?Xu.flipRequired:Xu.flipNotRequired,sr)return sr}Cn(bn.first);for(let $n=ut+1;$n<ut+Ct-1;$n++){const Yt=ei(lt*z.getoffsetX($n),Ze,ct,m,he,ye,Lt,Ve,Kt,K,R,we,Fe,!1,!1,De,Ee,Ke);if(!Yt)return J.length-=4*($n-ut),{notEnoughRoom:!0};Cn(Yt)}Cn(bn.last)}else{if(E&&!m){const $n=vl(ye.x,ye.y,0,B),Yt=Ve+Lt+1,vn=new o.P(K.getx(Yt),K.gety(Yt)),Nt=vl(vn.x,vn.y,0,B),ln=Nt[3]>0?Nt:xr(ye,vn,$n,1,B,void 0,De,Ee.canonical),jn=Jt($t,pn,(ln[0]-$n[0])*Oe,ln[1]-$n[1]);if(w.flipState=jn&&jn.needsFlipping?Xu.flipRequired:Xu.flipNotRequired,jn)return jn}const bn=ei(lt*z.getoffsetX(ut),Ze,ct,m,he,ye,Lt,Ve,Kt,K,R,we,Fe,!1,!1,De,Ee,Ke);if(!bn)return{notEnoughRoom:!0};Cn(bn)}return{}}function Wn(w,f,m,E,B){const{x:R,y:k,z}=E.projectTilePoint(w.x,w.y,f);if(!B)return vl(R,k,z,m);const[K,J,ne]=B(w);return vl(R+K,k+J,z+ne,m)}function xr(w,f,m,E,B,R,k,z){const K=Wn(w.sub(f)._unit()._add(w),z,B,k,R);return o.N.sub(K,m,K),o.N.normalize(K,K),o.N.scaleAndAdd(K,m,K,E)}function ei(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee){const Ke=E?w-f:w+f;let lt=Ke>0?1:-1,Ze=0;E&&(lt*=-1,Ze=Math.PI),lt<0&&(Ze+=Math.PI);let ct=z+k+(lt>0?0:1)|0,Ve=B,ut=B,Ct=0,Lt=0;const $t=Math.abs(Ke),pn=[],Kt=[];let Cn=R,bn=Cn;const $n=()=>xr(bn,Cn,ut,$t-Ct+1,ne,ye,Fe,De.canonical);for(;Ct+Lt<=$t;){if(ct+=lt,ct<z||ct>=K)return null;if(ut=Ve,bn=Cn,pn.push(ut),we&&Kt.push(bn),Cn=new o.P(J.getx(ct),J.gety(ct)),Ve=he[ct],!Ve){const kr=Wn(Cn,De.canonical,ne,Fe,ye);Ve=kr[3]>0?he[ct]=kr:$n()}Ct+=Lt,Lt=o.N.distance(ut,Ve)}Oe&&ye&&(he[ct]&&(Ve=$n(),Lt=o.N.distance(ut,Ve)),he[ct]=Ve);const Yt=($t-Ct)/Lt,vn=Cn.sub(bn)._mult(Yt)._add(bn),Nt=o.N.sub([],Ve,ut),ln=o.N.scaleAndAdd([],ut,Nt,Yt);let jn=[0,0,1],sr=Nt[0],tr=Nt[1];if(Ee&&(jn=Fe.upVector(De.canonical,vn.x,vn.y),jn[0]!==0||jn[1]!==0||jn[2]!==1)){const kr=[jn[2],0,-jn[0]],Zr=o.N.cross([],jn,kr);o.N.normalize(kr,kr),o.N.normalize(Zr,Zr),sr=o.N.dot(Nt,kr),tr=o.N.dot(Nt,Zr)}if(m){const kr=o.N.cross([],jn,Nt);o.N.normalize(kr,kr),o.N.scaleAndAdd(ln,ln,kr,m*lt)}const pr=Ze+Math.atan2(tr,sr);return pn.push(ln),we&&Kt.push(vn),{point:ln,angle:pr,path:pn,tilePath:Kt,up:jn}}function Ci(w,f){const m=f.length,E=m+4*w;f.resize(E),f.float32.fill(-1/0,4*m,4*E)}function _s(w,f,m){const E=f[0],B=f[1];return w[0]=m[0]*E+m[4]*B+m[12],w[1]=m[1]*E+m[5]*B+m[13],w[3]=m[3]*E+m[7]*B+m[15],w}const ts=100;class zn{constructor(f,m,E=new Dp(f.width+200,f.height+200,25),B=new Dp(f.width+200,f.height+200,25)){this.transform=f,this.grid=E,this.ignoredGrid=B,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+ts,this.screenBottomBoundary=f.height+ts,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200,this.fogState=m}placeCollisionBox(f,m,E,B,R,k,z,K){let J=E.projectedAnchorX,ne=E.projectedAnchorY,he=E.projectedAnchorZ;const ye=E.elevation,we=E.tileID,Oe=f.getProjection();if(ye&&we){const[Ve,ut,Ct]=Oe.upVector(we.canonical,E.tileAnchorX,E.tileAnchorY),Lt=Oe.upVectorScale(we.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;J+=Ve*ye*Lt,ne+=ut*ye*Lt,he+=Ct*ye*Lt}const Fe=this.projectAndGetPerspectiveRatio(z,J,ne,he,E.tileID,Oe.name==="globe"||!!ye||this.transform.pitch>0,Oe),De=k*Fe.perspectiveRatio,Ee=(E.x1*m+B.x-E.padding)*De+Fe.point.x,Ke=(E.y1*m+B.y-E.padding)*De+Fe.point.y,lt=(E.x2*m+B.x+E.padding)*De+Fe.point.x,Ze=(E.y2*m+B.y+E.padding)*De+Fe.point.y,ct=Fe.perspectiveRatio<=.55||Fe.occluded;return!this.isInsideGrid(Ee,Ke,lt,Ze)||!R&&this.grid.hitTest(Ee,Ke,lt,Ze,K)||ct?{box:[],offscreen:!1,occluded:Fe.occluded}:{box:[Ee,Ke,lt,Ze],offscreen:this.isOffscreen(Ee,Ke,lt,Ze),occluded:!1}}placeCollisionCircles(f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe){const De=[],Ee=this.transform.elevation,Ke=f.getProjection(),lt=Ee?Ee.getAtTileOffsetFunc(Fe,this.transform.center.lat,this.transform.worldSize,Ke):null,Ze=new o.P(E.tileAnchorX,E.tileAnchorY);let{x:ct,y:Ve,z:ut}=Ke.projectTilePoint(Ze.x,Ze.y,Fe.canonical);if(lt){const[vn,Nt,ln]=lt(Ze);ct+=vn,Ve+=Nt,ut+=ln}const Ct=Ke.name==="globe",Lt=this.projectAndGetPerspectiveRatio(z,ct,Ve,ut,Fe,Ct||!!Ee||this.transform.pitch>0,Ke),{perspectiveRatio:$t}=Lt,pn=(he?k/$t:k*$t)/o.bc,Kt=vl(ct,Ve,ut,K),Cn=Lt.signedDistanceFromCamera>0?Ot(pn,R,E.lineOffsetX*pn,E.lineOffsetY*pn,!1,Kt,Ze,E,B,K,{},Ee&&!he?lt:null,he&&!!Ee,Ke,Fe,he):null;let bn=!1,$n=!1,Yt=!0;if(Cn&&!Lt.occluded){const vn=.5*we*$t+Oe,Nt=new o.P(-100,-100),ln=new o.P(this.screenRightBoundary,this.screenBottomBoundary),jn=new Xh,{first:sr,last:tr}=Cn,pr=sr.path.length;let kr=[];for(let Wr=pr-1;Wr>=1;Wr--)kr.push(sr.path[Wr]);for(let Wr=1;Wr<tr.path.length;Wr++)kr.push(tr.path[Wr]);const Zr=2.5*vn;J&&(kr=kr.map(([Wr,Vi,vi],Li)=>(lt&&!Ct&&(vi=lt(Li<pr-1?sr.tilePath[pr-1-Li]:tr.tilePath[Li-pr+2])[2]),vl(Wr,Vi,vi,J))),kr.some(Wr=>Wr[3]<=0)&&(kr=[]));let jr=[];if(kr.length>0){let Wr=1/0,Vi=-1/0,vi=1/0,Li=-1/0;for(const Bi of kr)Wr=Math.min(Wr,Bi[0]),vi=Math.min(vi,Bi[1]),Vi=Math.max(Vi,Bi[0]),Li=Math.max(Li,Bi[1]);Vi>=Nt.x&&Wr<=ln.x&&Li>=Nt.y&&vi<=ln.y&&(jr=[kr.map(Bi=>new o.P(Bi[0],Bi[1]))],(Wr<Nt.x||Vi>ln.x||vi<Nt.y||Li>ln.y)&&(jr=o.ba(jr,Nt.x,Nt.y,ln.x,ln.y)))}for(const Wr of jr){jn.reset(Wr,.25*vn);let Vi=0;Vi=jn.length<=.5*vn?1:Math.ceil(jn.paddedLength/Zr)+1;for(let vi=0;vi<Vi;vi++){const Li=vi/Math.max(Vi-1,1),Bi=jn.lerp(Li),ms=Bi.x+ts,Co=Bi.y+ts;De.push(ms,Co,vn,0);const os=ms-vn,ia=Co-vn,as=ms+vn,Os=Co+vn;if(Yt=Yt&&this.isOffscreen(os,ia,as,Os),$n=$n||this.isInsideGrid(os,ia,as,Os),!m&&this.grid.hitTestCircle(ms,Co,vn,ye)&&(bn=!0,!ne))return{circles:[],offscreen:!1,collisionDetected:bn,occluded:!1}}}}return{circles:!ne&&bn||!$n?[]:De,offscreen:Yt,collisionDetected:bn,occluded:Lt.occluded}}queryRenderedSymbols(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let E=1/0,B=1/0,R=-1/0,k=-1/0;for(const ne of f){const he=new o.P(ne.x+ts,ne.y+ts);E=Math.min(E,he.x),B=Math.min(B,he.y),R=Math.max(R,he.x),k=Math.max(k,he.y),m.push(he)}const z=this.grid.query(E,B,R,k).concat(this.ignoredGrid.query(E,B,R,k)),K={},J={};for(const ne of z){const he=ne.key;if(K[he.bucketInstanceId]===void 0&&(K[he.bucketInstanceId]={}),K[he.bucketInstanceId][he.featureIndex])continue;const ye=[new o.P(ne.x1,ne.y1),new o.P(ne.x2,ne.y1),new o.P(ne.x2,ne.y2),new o.P(ne.x1,ne.y2)];o.bb(m,ye)&&(K[he.bucketInstanceId][he.featureIndex]=!0,J[he.bucketInstanceId]===void 0&&(J[he.bucketInstanceId]=[]),J[he.bucketInstanceId].push(he.featureIndex))}return J}insertCollisionBox(f,m,E,B,R){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:B,collisionGroupID:R},f[0],f[1],f[2],f[3])}insertCollisionCircles(f,m,E,B,R){const k=m?this.ignoredGrid:this.grid,z={bucketInstanceId:E,featureIndex:B,collisionGroupID:R};for(let K=0;K<f.length;K+=4)k.insertCircle(z,f[K],f[K+1],f[K+2])}projectAndGetPerspectiveRatio(f,m,E,B,R,k,z){const K=[m,E,B,1];let J=!1;B||this.transform.pitch>0?(o.a7.transformMat4(K,K,f),this.fogState&&R&&z.name!=="globe"&&(J=function(ye,we,Oe,Fe,De,Ee){const Ke=Ee.calculateFogTileMatrix(De),lt=[we,Oe,Fe];return o.N.transformMat4(lt,lt,Ke),Kn(ye,o.N.length(lt),Ee.pitch,Ee._fov)}(this.fogState,m,E,B,R.toUnwrapped(),this.transform)>.9)):_s(K,K,f);const ne=K[3];return{point:new o.P((K[0]/ne+1)/2*this.transform.width+ts,(-K[1]/ne+1)/2*this.transform.height+ts),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(z)/ne*.5,1.5),signedDistanceFromCamera:ne,occluded:k&&K[2]>ne||J}}isOffscreen(f,m,E,B){return E<ts||f>=this.screenRightBoundary||B<ts||m>this.screenBottomBoundary}isInsideGrid(f,m,E,B){return E>=0&&f<this.gridRightBoundary&&B>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const f=o.a6.identity([]);return o.a6.translate(f,f,[-100,-100,0]),f}}function na(w,f,m){const E=f.createTileMatrix(w,w.worldSize,m.toUnwrapped());return o.a6.multiply(new Float32Array(16),w.projMatrix,E)}function wa(w,f,m){if(f.projection.name===m.projection.name)return w.projMatrix;const E=m.clone();return E.setProjection(f.projection),na(E,f.getProjection(),w)}function xa(w,f,m){return f.name===m.projection.name?w.projMatrix:na(m,f,w)}class Ml{constructor(f,m,E,B){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?m:-m))):B&&E?1:0,this.placed=E}isHidden(){return this.opacity===0&&!this.placed}}class fa{constructor(f,m,E,B,R,k=!1){this.text=new Ml(f?f.text:null,m,E,R),this.icon=new Ml(f?f.icon:null,m,B,R),this.clipped=k}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class el{constructor(f,m,E,B=!1){this.text=f,this.icon=m,this.skipFade=E,this.clipped=B}}class Vc{constructor(){this.invProjMatrix=o.a6.create(),this.viewportMatrix=o.a6.create(),this.circles=[]}}class Hc{constructor(f,m,E,B,R){this.bucketInstanceId=f,this.featureIndex=m,this.sourceLayerIndex=E,this.bucketIndex=B,this.tileID=R}}class zp{constructor(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}}get(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){const m=++this.maxGroupID;this.collisionGroups[f]={ID:m,predicate:E=>E.collisionGroupID===m}}return this.collisionGroups[f]}}function Eh(w,f,m,E,B){const{horizontalAlign:R,verticalAlign:k}=o.bf(w),z=-(R-.5)*f,K=-(k-.5)*m,J=o.bd(w,E);return new o.P(z+J[0]*B,K+J[1]*B)}function $p(w,f,m,E,B){const R=new o.P(w,f);return m&&R._rotate(E?B:-B),R}class sg{constructor(f,m,E,B,R,k){this.transform=f.clone(),this.projection=f.projection.name,this.collisionIndex=new zn(this.transform,R),this.buildingIndex=k,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new zp(E),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(f,m,E,B){const R=E.getBucket(m),k=E.latestFeatureIndex;if(!R||!k||m.fqid!==R.layerIds[0])return;const z=R.layers[0].layout,K=E.collisionBoxArray,J=Math.pow(2,this.transform.zoom-E.tileID.overscaledZ),ne=E.tileSize/o.V,he=E.tileID.toUnwrapped();this.transform.setProjection(R.projection);const ye=(we=E.tileID,Oe=R.getProjection(),Fe=this.transform,Oe.name===this.projection?Fe.calculateProjMatrix(we.toUnwrapped()):na(Fe,Oe,we));var we,Oe,Fe;const De=z.get("text-pitch-alignment")==="map",Ee=z.get("text-rotation-alignment")==="map";m.compileFilter();const Ke=m.dynamicFilter(),lt=m.dynamicFilterNeedsFeature(),Ze=this.transform.calculatePixelsToTileUnitsMatrix(E),ct=Zd(ye,E.tileID.canonical,De,Ee,this.transform,R.getProjection(),Ze);let Ve=null;if(De){const Lt=Up(ye,E.tileID.canonical,De,Ee,this.transform,R.getProjection(),Ze);Ve=o.a6.multiply([],this.transform.labelPlaneMatrix,Lt)}let ut=null;Ke&&E.latestFeatureIndex&&(ut={unwrappedTileID:he,dynamicFilter:Ke,dynamicFilterNeedsFeature:lt,featureIndex:E.latestFeatureIndex}),this.retainedQueryData[R.bucketInstanceId]=new Hc(R.bucketInstanceId,k,R.sourceLayerIndex,R.index,E.tileID);const Ct={bucket:R,layout:z,posMatrix:ye,textLabelPlaneMatrix:ct,labelToScreenMatrix:Ve,clippingData:ut,scale:J,textPixelRatio:ne,holdingForFade:E.holdingForFade(),collisionBoxArray:K,partiallyEvaluatedTextSize:o.b5(R.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.b5(R.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(B)for(const Lt of R.sortKeyRanges){const{sortKey:$t,symbolInstanceStart:pn,symbolInstanceEnd:Kt}=Lt;f.push({sortKey:$t,symbolInstanceStart:pn,symbolInstanceEnd:Kt,parameters:Ct})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:Ct})}attemptAnchorPlacement(f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee,Ke){const{textOffset0:lt,textOffset1:Ze,crossTileID:ct}=ye,Ve=[lt,Ze],ut=Eh(f,E,B,Ve,R),Ct=this.collisionIndex.placeCollisionBox(Oe,R,m,$p(ut.x,ut.y,k,z,this.transform.angle),he,K,J,ne.predicate);if(De){const Lt=Oe.getSymbolInstanceIconSize(Ke,this.transform.zoom,ye.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Oe,Lt,De,$p(ut.x,ut.y,k,z,this.transform.angle),he,K,J,ne.predicate).box.length===0)return}if(Ct.box.length>0){let Lt;return this.prevPlacement&&this.prevPlacement.variableOffsets[ct]&&this.prevPlacement.placements[ct]&&this.prevPlacement.placements[ct].text&&(Lt=this.prevPlacement.variableOffsets[ct].anchor),this.variableOffsets[ct]={textOffset:Ve,width:E,height:B,anchor:f,textScale:R,prevAnchor:Lt},this.markUsedJustification(Oe,f,ye,Fe),Oe.allowVerticalPlacement&&(this.markUsedOrientation(Oe,Fe,ye),this.placedOrientations[ct]=Fe),{shift:ut,placedGlyphBoxes:Ct}}}placeLayerBucketPart(f,m,E,B){const{bucket:R,layout:k,posMatrix:z,textLabelPlaneMatrix:K,labelToScreenMatrix:J,clippingData:ne,textPixelRatio:he,holdingForFade:ye,collisionBoxArray:we,partiallyEvaluatedTextSize:Oe,partiallyEvaluatedIconSize:Fe,collisionGroup:De}=f.parameters,Ee=k.get("text-optional"),Ke=k.get("icon-optional"),lt=k.get("text-allow-overlap"),Ze=k.get("icon-allow-overlap"),ct=k.get("text-rotation-alignment")==="map",Ve=k.get("text-pitch-alignment")==="map",ut=k.get("symbol-z-order")==="viewport-y",Ct=k.get("symbol-z-elevate");this.transform.setProjection(R.projection);let Lt=lt&&(Ze||!R.hasIconData()||Ke),$t=Ze&&(lt||!R.hasTextData()||Ee);!R.collisionArrays&&we&&R.deserializeCollisionBoxes(we),E&&B&&R.updateCollisionDebugBuffers(this.transform.zoom,we);const pn=(Kt,Cn,bn)=>{const{crossTileID:$n,numVerticalGlyphVertices:Yt}=Kt;if(ne){const as={zoom:this.transform.zoom,pitch:this.transform.pitch};let Os=null;if(ne.dynamicFilterNeedsFeature){const ls=this.retainedQueryData[R.bucketInstanceId];Os=ne.featureIndex.loadFeature({featureIndex:Kt.featureIndex,bucketIndex:ls.bucketIndex,sourceLayerIndex:ls.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,ne.dynamicFilter)(as,Os,this.retainedQueryData[R.bucketInstanceId].tileID.canonical,new o.P(Kt.tileAnchorX,Kt.tileAnchorY),this.transform.calculateDistanceTileData(ne.unwrappedTileID)))return this.placements[$n]=new el(!1,!1,!1,!0),void m.add($n)}if(m.has($n))return;if(ye)return void(this.placements[$n]=new el(!1,!1,!1));let vn=!1,Nt=!1,ln=!0,jn=!1,sr=!1,tr=null,pr={box:null,offscreen:null,occluded:null},kr={box:null,offscreen:null,occluded:null},Zr=null,jr=null,Wr=null,Vi=0,vi=0,Li=0;bn.textFeatureIndex?Vi=bn.textFeatureIndex:Kt.useRuntimeCollisionCircles&&(Vi=Kt.featureIndex),bn.verticalTextFeatureIndex&&(vi=bn.verticalTextFeatureIndex);const Bi=as=>{as.tileID=this.retainedQueryData[R.bucketInstanceId].tileID;const Os=this.transform.elevation;as.elevation=Kt.zOffset+(Os?Os.getAtTileOffset(as.tileID,as.tileAnchorX,as.tileAnchorY):0)},ms=bn.textBox;if(ms){Bi(ms);const as=ls=>{let Ls=o.b6.horizontal;if(R.allowVerticalPlacement&&!ls&&this.prevPlacement){const Lo=this.prevPlacement.placedOrientations[$n];Lo&&(this.placedOrientations[$n]=Lo,Ls=Lo,this.markUsedOrientation(R,Ls,Kt))}return Ls},Os=(ls,Ls)=>{if(R.allowVerticalPlacement&&Yt>0&&bn.verticalTextBox){for(const Lo of R.writingModes)if(Lo===o.b6.vertical?(pr=Ls(),kr=pr):pr=ls(),pr&&pr.box&&pr.box.length)break}else pr=ls()};if(k.get("text-variable-anchor")){let ls=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[$n]){const $s=this.prevPlacement.variableOffsets[$n];ls.indexOf($s.anchor)>0&&(ls=ls.filter(Nl=>Nl!==$s.anchor),ls.unshift($s.anchor))}const Ls=($s,Nl,Mc)=>{const eh=R.getSymbolInstanceTextSize(Oe,Kt,this.transform.zoom,Cn),ep=($s.x2-$s.x1)*eh+2*$s.padding,th=($s.y2-$s.y1)*eh+2*$s.padding,kl=Kt.hasIconTextFit&&!Ze?Nl:null;kl&&Bi(kl);let Al={box:[],offscreen:!1,occluded:!1};const Au=lt?2*ls.length:ls.length;for(let Pu=0;Pu<Au;++Pu){const nh=this.attemptAnchorPlacement(ls[Pu%ls.length],$s,ep,th,eh,ct,Ve,he,z,De,Pu>=ls.length,Kt,Cn,R,Mc,kl,Oe,Fe);if(nh&&(Al=nh.placedGlyphBoxes,Al&&Al.box&&Al.box.length)){vn=!0,tr=nh.shift;break}}return Al};Os(()=>Ls(ms,bn.iconBox,o.b6.horizontal),()=>{const $s=bn.verticalTextBox;return $s&&Bi($s),R.allowVerticalPlacement&&!(pr&&pr.box&&pr.box.length)&&Yt>0&&$s?Ls($s,bn.verticalIconBox,o.b6.vertical):{box:null,offscreen:null,occluded:null}}),pr&&(vn=pr.box,ln=pr.offscreen,jn=pr.occluded);const Lo=as(!(!pr||!pr.box));if(!vn&&this.prevPlacement){const $s=this.prevPlacement.variableOffsets[$n];$s&&(this.variableOffsets[$n]=$s,this.markUsedJustification(R,$s.anchor,Kt,Lo))}}else{const ls=(Ls,Lo)=>{const $s=R.getSymbolInstanceTextSize(Oe,Kt,this.transform.zoom,Cn),Nl=this.collisionIndex.placeCollisionBox(R,$s,Ls,new o.P(0,0),lt,he,z,De.predicate);return Nl&&Nl.box&&Nl.box.length&&(this.markUsedOrientation(R,Lo,Kt),this.placedOrientations[$n]=Lo),Nl};Os(()=>ls(ms,o.b6.horizontal),()=>{const Ls=bn.verticalTextBox;return R.allowVerticalPlacement&&Yt>0&&Ls?(Bi(Ls),ls(Ls,o.b6.vertical)):{box:null,offscreen:null,occluded:null}}),as(!!(pr&&pr.box&&pr.box.length))}}if(Zr=pr,vn=Zr&&Zr.box&&Zr.box.length>0,ln=Zr&&Zr.offscreen,jn=Zr&&Zr.occluded,Kt.useRuntimeCollisionCircles){const as=R.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex>=0?Kt.centerJustifiedTextSymbolIndex:Kt.verticalPlacedTextSymbolIndex),Os=o.b7(R.textSizeData,Oe,as),ls=k.get("text-padding");jr=this.collisionIndex.placeCollisionCircles(R,lt,as,R.lineVertexArray,R.glyphOffsetArray,Os,z,K,J,E,Ve,De.predicate,Kt.collisionCircleDiameter*Os/o.bc,ls,this.retainedQueryData[R.bucketInstanceId].tileID),vn=lt||jr.circles.length>0&&!jr.collisionDetected,ln=ln&&jr.offscreen,jn=jr.occluded}if(bn.iconFeatureIndex&&(Li=bn.iconFeatureIndex),bn.iconBox){const as=Os=>{Bi(Os);const ls=Kt.hasIconTextFit&&tr?$p(tr.x,tr.y,ct,Ve,this.transform.angle):new o.P(0,0),Ls=R.getSymbolInstanceIconSize(Fe,this.transform.zoom,Kt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(R,Ls,Os,ls,Ze,he,z,De.predicate)};kr&&kr.box&&kr.box.length&&bn.verticalIconBox?(Wr=as(bn.verticalIconBox),Nt=Wr.box.length>0):(Wr=as(bn.iconBox),Nt=Wr.box.length>0),ln=ln&&Wr.offscreen,sr=Wr.occluded}const Co=Ee||Kt.numHorizontalGlyphVertices===0&&Yt===0,os=Ke||Kt.numIconVertices===0;if(Co||os?os?Co||(Nt=Nt&&vn):vn=Nt&&vn:Nt=vn=Nt&&vn,vn&&Zr&&Zr.box&&this.collisionIndex.insertCollisionBox(Zr.box,k.get("text-ignore-placement"),R.bucketInstanceId,kr&&kr.box&&vi?vi:Vi,De.ID),Nt&&Wr&&this.collisionIndex.insertCollisionBox(Wr.box,k.get("icon-ignore-placement"),R.bucketInstanceId,Li,De.ID),jr&&(vn&&this.collisionIndex.insertCollisionCircles(jr.circles,k.get("text-ignore-placement"),R.bucketInstanceId,Vi,De.ID),E)){const as=R.bucketInstanceId;let Os=this.collisionCircleArrays[as];Os===void 0&&(Os=this.collisionCircleArrays[as]=new Vc);for(let ls=0;ls<jr.circles.length;ls+=4)Os.circles.push(jr.circles[ls+0]),Os.circles.push(jr.circles[ls+1]),Os.circles.push(jr.circles[ls+2]),Os.circles.push(jr.collisionDetected?1:0)}const ia=R.projection.name!=="globe";Lt=Lt&&(ia||!jn),$t=$t&&(ia||!sr),this.placements[$n]=new el(vn||Lt,Nt||$t,ln||R.justReloaded),m.add($n)};if(Ct&&this.buildingIndex&&(this.buildingIndex.updateZOffset(R,this.retainedQueryData[R.bucketInstanceId].tileID),R.updateZOffset()),ut){const Kt=R.getSortedSymbolIndexes(this.transform.angle);for(let Cn=Kt.length-1;Cn>=0;--Cn){const bn=Kt[Cn];pn(R.symbolInstances.get(bn),bn,R.collisionArrays[bn])}R.hasAnyZOffset&&o.w(`${R.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(R.hasAnyZOffset){const Kt=R.getSortedIndexesByZOffset();for(let Cn=0;Cn<Kt.length;++Cn){const bn=Kt[Cn];pn(R.symbolInstances.get(bn),bn,R.collisionArrays[bn])}}else for(let Kt=f.symbolInstanceStart;Kt<f.symbolInstanceEnd;Kt++)pn(R.symbolInstances.get(Kt),Kt,R.collisionArrays[Kt]);if(E&&R.bucketInstanceId in this.collisionCircleArrays){const Kt=this.collisionCircleArrays[R.bucketInstanceId];o.a6.invert(Kt.invProjMatrix,z),Kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}R.justReloaded=!1}markUsedJustification(f,m,E,B){const{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:K,crossTileID:J}=E,ne=o.be(m),he=B===o.b6.vertical?K:ne==="left"?R:ne==="center"?k:ne==="right"?z:-1;R>=0&&(f.text.placedSymbolArray.get(R).crossTileID=he>=0&&R!==he?0:J),k>=0&&(f.text.placedSymbolArray.get(k).crossTileID=he>=0&&k!==he?0:J),z>=0&&(f.text.placedSymbolArray.get(z).crossTileID=he>=0&&z!==he?0:J),K>=0&&(f.text.placedSymbolArray.get(K).crossTileID=he>=0&&K!==he?0:J)}markUsedOrientation(f,m,E){const B=m===o.b6.horizontal||m===o.b6.horizontalOnly?m:0,R=m===o.b6.vertical?m:0,{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:K,verticalPlacedTextSymbolIndex:J}=E,ne=f.text.placedSymbolArray;k>=0&&(ne.get(k).placedOrientation=B),z>=0&&(ne.get(z).placedOrientation=B),K>=0&&(ne.get(K).placedOrientation=B),J>=0&&(ne.get(J).placedOrientation=R)}commit(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let E=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const B=m?m.symbolFadeChange(f):1,R=m?m.opacities:{},k=m?m.variableOffsets:{},z=m?m.placedOrientations:{};for(const K in this.placements){const J=this.placements[K],ne=R[K];ne?(this.opacities[K]=new fa(ne,B,J.text,J.icon,null,J.clipped),E=E||J.text!==ne.text.placed||J.icon!==ne.icon.placed):(this.opacities[K]=new fa(null,B,J.text,J.icon,J.skipFade,J.clipped),E=E||J.text||J.icon)}for(const K in R){const J=R[K];if(!this.opacities[K]){const ne=new fa(J,B,!1,!1);ne.isHidden()||(this.opacities[K]=ne,E=E||J.text.placed||J.icon.placed)}}for(const K in k)this.variableOffsets[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.variableOffsets[K]=k[K]);for(const K in z)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=z[K]);E?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:f)}updateLayerOpacities(f,m){const E=new Set;for(const B of m){const R=B.getBucket(f);R&&B.latestFeatureIndex&&f.fqid===R.layerIds[0]&&(this.updateBucketOpacities(R,E,B.collisionBoxArray),R.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(R,B.tileID),R.updateZOffset()))}}updateBucketOpacities(f,m,E){f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();const B=f.layers[0].layout,R=!!f.layers[0].dynamicFilter(),k=new fa(null,0,!1,!1,!0),z=B.get("text-allow-overlap"),K=B.get("icon-allow-overlap"),J=B.get("text-variable-anchor"),ne=B.get("text-rotation-alignment")==="map",he=B.get("text-pitch-alignment")==="map",ye=new fa(null,0,z&&(K||!f.hasIconData()||B.get("icon-optional")),K&&(z||!f.hasTextData()||B.get("text-optional")),!0);!f.collisionArrays&&E&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(E);const we=(Fe,De,Ee)=>{for(let Ke=0;Ke<De/4;Ke++)Fe.opacityVertexArray.emplaceBack(Ee)};let Oe=0;for(let Fe=0;Fe<f.symbolInstances.length;Fe++){const De=f.symbolInstances.get(Fe),{numHorizontalGlyphVertices:Ee,numVerticalGlyphVertices:Ke,crossTileID:lt,numIconVertices:Ze}=De,ct=m.has(lt);let Ve=this.opacities[lt];ct?Ve=k:Ve||(Ve=ye,this.opacities[lt]=Ve),m.add(lt);const ut=Ee>0||Ke>0,Ct=Ze>0,Lt=this.placedOrientations[lt],$t=Lt===o.b6.vertical,pn=Lt===o.b6.horizontal||Lt===o.b6.horizontalOnly;if(!ut&&!Ct||Ve.isHidden()||Oe++,ut){const Kt=Qc(Ve.text);we(f.text,Ee,$t?Hp:Kt),we(f.text,Ke,pn?Hp:Kt);const Cn=Ve.text.isHidden(),{leftJustifiedTextSymbolIndex:bn,centerJustifiedTextSymbolIndex:$n,rightJustifiedTextSymbolIndex:Yt,verticalPlacedTextSymbolIndex:vn}=De,Nt=f.text.placedSymbolArray,ln=Cn||$t?1:0;bn>=0&&(Nt.get(bn).hidden=ln),$n>=0&&(Nt.get($n).hidden=ln),Yt>=0&&(Nt.get(Yt).hidden=ln),vn>=0&&(Nt.get(vn).hidden=Cn||pn?1:0);const jn=this.variableOffsets[lt];jn&&this.markUsedJustification(f,jn.anchor,De,Lt);const sr=this.placedOrientations[lt];sr&&(this.markUsedJustification(f,"left",De,sr),this.markUsedOrientation(f,sr,De))}if(Ct){const Kt=Qc(Ve.icon),{placedIconSymbolIndex:Cn,verticalPlacedIconSymbolIndex:bn}=De,$n=f.icon.placedSymbolArray,Yt=Ve.icon.isHidden()?1:0;Cn>=0&&(we(f.icon,Ze,$t?Hp:Kt),$n.get(Cn).hidden=Yt),bn>=0&&(we(f.icon,De.numVerticalIconVertices,pn?Hp:Kt),$n.get(bn).hidden=Yt)}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){const Kt=f.collisionArrays[Fe];if(Kt){let Cn=new o.P(0,0),bn=!0;if(Kt.textBox||Kt.verticalTextBox){if(J){const Yt=this.variableOffsets[lt];Yt?(Cn=Eh(Yt.anchor,Yt.width,Yt.height,Yt.textOffset,Yt.textScale),ne&&Cn._rotate(he?this.transform.angle:-this.transform.angle)):bn=!1}R&&(bn=!Ve.clipped),Kt.textBox&&ed(f.textCollisionBox.collisionVertexArray,Ve.text.placed,!bn||$t,Cn.x,Cn.y),Kt.verticalTextBox&&ed(f.textCollisionBox.collisionVertexArray,Ve.text.placed,!bn||pn,Cn.x,Cn.y)}const $n=bn&&!!(!pn&&Kt.verticalIconBox);Kt.iconBox&&ed(f.iconCollisionBox.collisionVertexArray,Ve.icon.placed,$n,De.hasIconTextFit?Cn.x:0,De.hasIconTextFit?Cn.y:0),Kt.verticalIconBox&&ed(f.iconCollisionBox.collisionVertexArray,Ve.icon.placed,!$n,De.hasIconTextFit?Cn.x:0,De.hasIconTextFit?Cn.y:0)}}}if(f.fullyClipped=Oe===0,f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=Fe.invProjMatrix,f.placementViewportMatrix=Fe.viewportMatrix,f.collisionCircleArray=Fe.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}}symbolFadeChange(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(f){return Math.max(0,(this.transform.zoom-f)/1.5)}hasTransitions(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(f,m){const E=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*E>f}setStale(){this.stale=!0}}function ed(w,f,m,E,B){w.emplaceBack(f?1:0,m?1:0,E||0,B||0),w.emplaceBack(f?1:0,m?1:0,E||0,B||0),w.emplaceBack(f?1:0,m?1:0,E||0,B||0),w.emplaceBack(f?1:0,m?1:0,E||0,B||0)}const Sm=Math.pow(2,25),Vp=Math.pow(2,24),Gc=Math.pow(2,17),Hf=Math.pow(2,16),og=Math.pow(2,9),ag=Math.pow(2,8),Tm=Math.pow(2,1);function Qc(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const f=w.placed?1:0,m=Math.floor(127*w.opacity);return m*Sm+f*Vp+m*Gc+f*Hf+m*og+f*ag+m*Tm+f}const Hp=0;class Im{constructor(f){this._sortAcrossTiles=f.layout.get("symbol-z-order")!=="viewport-y"&&f.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(f,m,E,B,R){const k=this._bucketParts;for(;this._currentTileIndex<f.length;)if(m.getBucketParts(k,B,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((z,K)=>z.sortKey-K.sortKey));this._currentPartIndex<k.length;){const z=k[this._currentPartIndex];if(m.placeLayerBucketPart(z,this._seenCrossTileIDs,E,z.symbolInstanceStart===0),this._currentPartIndex++,R())return!0}return!1}}class Gp{constructor(f,m,E,B,R,k,z,K,J){this.placement=new sg(f,R,k,z,K,J),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(f,m,E,B){const R=o.f.now(),k=()=>{const z=o.f.now()-R;return!this._forceFullPlacement&&z>2};for(;this._currentPlacementIndex>=0;){const z=m[f[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=K)&&(!z.maxzoom||z.maxzoom>K)){const J=z,ne=J.layout.get("symbol-z-elevate"),he=this._inProgressLayer=this._inProgressLayer||new Im(J),ye=o.ag(z.source,z.scope);if(he.continuePlacement(ne?B[ye]:E[ye],this.placement,this._showCollisionBoxes,z,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(f){return this.placement.commit(f),this.placement}}const Iu=512/o.V/2;class lg{constructor(f,m,E){this.tileID=f,this.bucketInstanceId=E,this.index=new o.bg(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const B=f.canonical.x*o.V,R=f.canonical.y*o.V;for(let k=0;k<m.length;k++){const{key:z,crossTileID:K,tileAnchorX:J,tileAnchorY:ne}=m.get(k),he=Math.floor((B+J)*Iu),ye=Math.floor((R+ne)*Iu);this.index.add(he,ye),this.keys.push(z),this.crossTileIDs.push(K)}this.index.finish()}findMatches(f,m,E){const B=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),R=Iu/Math.pow(2,m.canonical.z-this.tileID.canonical.z),k=m.canonical.x*o.V,z=m.canonical.y*o.V;for(let K=0;K<f.length;K++){const J=f.get(K);if(J.crossTileID)continue;const{key:ne,tileAnchorX:he,tileAnchorY:ye}=J,we=Math.floor((k+he)*R),Oe=Math.floor((z+ye)*R),Fe=this.index.range(we-B,Oe-B,we+B,Oe+B);for(const De of Fe){const Ee=this.crossTileIDs[De];if(this.keys[De]===ne&&!E.has(Ee)){E.add(Ee),J.crossTileID=Ee;break}}}}}class Bm{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class cg{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(f){const m=Math.round((f-this.lng)/360);if(m!==0)for(const E in this.indexes){const B=this.indexes[E],R={};for(const k in B){const z=B[k];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+m),R[z.tileID.key]=z}this.indexes[E]=R}this.lng=f}addBucket(f,m,E){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(let R=0;R<m.symbolInstances.length;R++)m.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]=new Set);const B=this.usedCrossTileIDs[f.overscaledZ];for(const R in this.indexes){const k=this.indexes[R];if(Number(R)>f.overscaledZ)for(const z in k){const K=k[z];K.tileID.isChildOf(f)&&K.findMatches(m.symbolInstances,f,B)}else{const z=k[f.scaledTo(Number(R)).key];z&&z.findMatches(m.symbolInstances,f,B)}}for(let R=0;R<m.symbolInstances.length;R++){const k=m.symbolInstances.get(R);k.crossTileID||(k.crossTileID=E.generate(),B.add(k.crossTileID))}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new lg(f,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(f,m){for(const E of m.crossTileIDs)this.usedCrossTileIDs[f].delete(E)}removeStaleBuckets(f){let m=!1;for(const E in this.indexes){const B=this.indexes[E];for(const R in B)f[B[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(E,B[R]),delete B[R],m=!0)}return m}}class td{constructor(){this.layerIndexes={},this.crossTileIDs=new Bm,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(f,m,E,B){let R=this.layerIndexes[f.fqid];R===void 0&&(R=this.layerIndexes[f.fqid]=new cg);let k=!1;const z={};B.name!=="globe"&&R.handleWrapJump(E);for(const K of m){const J=K.getBucket(f);J&&f.fqid===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),R.addBucket(K.tileID,J,this.crossTileIDs)&&(k=!0),z[J.bucketInstanceId]=!0)}return R.removeStaleBuckets(z)&&(k=!0),k}pruneUnusedLayers(f){const m={};f.forEach(E=>{m[E]=!0});for(const E in this.layerIndexes)m[E]||delete this.layerIndexes[E]}}class Ll{constructor(f=0,m=0,E=0,B=0){if(isNaN(f)||f<0||isNaN(m)||m<0||isNaN(E)||E<0||isNaN(B)||B<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=m,this.left=E,this.right=B}interpolate(f,m,E){return m.top!=null&&f.top!=null&&(this.top=o.U(f.top,m.top,E)),m.bottom!=null&&f.bottom!=null&&(this.bottom=o.U(f.bottom,m.bottom,E)),m.left!=null&&f.left!=null&&(this.left=o.U(f.left,m.left,E)),m.right!=null&&f.right!=null&&(this.right=o.U(f.right,m.right,E)),this}getCenter(f,m){const E=o.aa((this.left+f-this.right)/2,0,f),B=o.aa((this.top+m-this.bottom)/2,0,m);return new o.P(E,B)}equals(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right}clone(){return new Ll(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function hu(w,f){const m=o.bk(w,3);o.a6.fromQuat(w,f),o.bm(w,3,m)}function Zu(w,f){const m=o.bi.identity([]);return o.bi.rotateZ(m,m,-f),o.bi.rotateX(m,m,-w),m}function Ju(w,f){const m=[w[0],w[1],0],E=[f[0],f[1],0];if(o.N.length(m)>=1e-15){const k=o.N.normalize([],m);o.N.scale(E,k,o.N.dot(E,k)),f[0]=E[0],f[1]=E[1]}const B=o.N.cross([],f,w);if(o.N.len(B)<1e-15)return null;const R=Math.atan2(-B[1],B[0]);return Zu(Math.atan2(Math.sqrt(w[0]*w[0]+w[1]*w[1]),-w[2]),R)}class Bu{constructor(f,m){this.position=f,this.orientation=m}get position(){return this._position}set position(f){if(f){const m=f instanceof o.L?f:new o.L(f[0],f[1],f[2]);this._renderWorldCopies&&(m.x=o.bh(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(f,m){if(this.orientation=null,!this.position)return;const E=this.position,B=this._elevation?this._elevation.getAtPointOrZero(o.L.fromLngLat(f)):0,R=o.L.fromLngLat(f,B),k=[R.x-E.x,R.y-E.y,R.z-E.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=Ju(k,m)}setPitchBearing(f,m){this.orientation=Zu(o.bj(f),o.bj(-m))}}class Sh{constructor(f,m){this._transform=o.a6.identity([]),this.orientation=m,this.position=f}get mercatorPosition(){const f=this.position;return new o.L(f[0],f[1],f[2])}get position(){const f=o.bk(this._transform,3);return[f[0],f[1],f[2]]}set position(f){var m;f&&o.bm(this._transform,3,[(m=f)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(f){this._orientation=f||o.bi.identity([]),f&&hu(this._transform,this._orientation)}getPitchBearing(){const f=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2])}}setPitchBearing(f,m){this._orientation=Zu(f,m),hu(this._transform,this._orientation)}forward(){const f=o.bk(this._transform,2);return[-f[0],-f[1],-f[2]]}up(){const f=o.bk(this._transform,1);return[-f[0],-f[1],-f[2]]}right(){const f=o.bk(this._transform,0);return[f[0],f[1],f[2]]}getCameraToWorld(f,m){const E=new Float64Array(16);return o.a6.invert(E,this.getWorldToCamera(f,m)),E}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(f,m,E){const B=this.position;o.N.scale(B,B,-f);const R=new Float64Array(16);return o.a6.fromScaling(R,[E,E,E]),o.a6.translate(R,R,B),R[10]*=m,R}getWorldToCamera(f,m){const E=new Float64Array(16),B=new Float64Array(4),R=this.position;return o.bi.conjugate(B,this._orientation),o.N.scale(R,R,-f),o.a6.fromQuat(E,B),o.a6.translate(E,E,R),E[1]*=-1,E[5]*=-1,E[9]*=-1,E[13]*=-1,E[8]*=m,E[9]*=m,E[10]*=m,E[11]*=m,E}getCameraToClipPerspective(f,m,E,B){const R=new Float64Array(16);return o.a6.perspective(R,f,m,E,B),R}getCameraToClipOrthographic(f,m,E,B,R,k){const z=new Float64Array(16);return o.a6.ortho(z,f,m,E,B,R,k),z}getDistanceToElevation(f,m=!1){const E=f===0?0:o.bl(f,m?o.au(this.position[1]):this.position[1]),B=this.forward();return(E-this.position[2])/B[2]}clone(){return new Sh([...this.position],[...this.orientation])}}const Ec=(w,f,m)=>(1-m)*w+m*f,nd=w=>w*w*w*w*w;class Jd{constructor(f,m,E,B,R,k,z){this.tileSize=512,this._renderWorldCopies=R===void 0||R,this._minZoom=f||0,this._maxZoom=m||22,this._minPitch=E??0,this._maxPitch=B??60,this.setProjection(k),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new o.bn(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ll,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Sh,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const f=new Jd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return f._elevation=this._elevation,f._centerAltitude=this._centerAltitude,f._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,f.tileSize=this.tileSize,f.mercatorFromTransition=this.mercatorFromTransition,f.width=this.width,f.height=this.height,f.cameraElevationReference=this.cameraElevationReference,f._center=this._center,f._setZoom(this.zoom),f._seaLevelZoom=this._seaLevelZoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._nearZ=this._nearZ,f._farZ=this._farZ,f._averageElevation=this._averageElevation,f._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._camera=this._camera.clone(),f._calcMatrices(),f.freezeTileCoverage=this.freezeTileCoverage,f.frustumCorners=this.frustumCorners,f}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(f){this._elevation!==f&&(this._elevation=f,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(f,m=!1){const E=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||E)&&this._updateCameraOnTerrain(),(f||E)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return o.ac(this.projection,["name","center","parallels"])}setProjection(f){this.projectionOptions=f||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=o.bo(this.projectionOptions);const E=!d(m,this.getProjection());return E&&this._calcMatrices(),this.mercatorFromTransition=!1,E}setOrthographicProjectionAtLowPitch(f){return this._orthographicProjectionAtLowPitch!==f&&(this._orthographicProjectionAtLowPitch=f,this._calcMatrices(),!0)}setMercatorFromTransition(){const f=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.bo({name:"mercator"});const m=f!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))}get maxZoom(){return this._maxZoom}set maxZoom(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))}get minPitch(){return this._minPitch}set minPitch(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))}get maxPitch(){return this._maxPitch}set maxPitch(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get cameraWorldSize(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.bl(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return o.bh(this.rotation,-180,180)}set bearing(f){this.rotation=f}get rotation(){return-this.angle/Math.PI*180}set rotation(f){const m=-f*Math.PI/180;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=o.b4.create(),o.b4.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(f){const m=o.aa(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const f=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/f)}set fov(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=o.bj(f),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(f){this._averageElevation=f,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(f){const m=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(f){this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(f){this._tileCoverLift!==f&&(this._tileCoverLift=f)}_updateCameraOnTerrain(){const f=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,m=this.elevation&&f===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||f===Number.NEGATIVE_INFINITY&&(!m||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const E=this._elevation;m||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&E.exaggeration()&&this._centerAltitudeValidForExaggeration!==E.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*E.exaggeration(),this._centerAltitudeValidForExaggeration=E.exaggeration()):(this._centerAltitude=f||0,this._centerAltitudeValidForExaggeration=E.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const f=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],E=this.horizonLineFromTop();let B=0,R=0;for(let k=0;k<m.length;k++){const z=new o.P(m[k][0]*this.width,E+m[k][1]*(this.height-E)),K=f.pointCoordinate(z);if(!K)continue;const J=1/Math.hypot(K[0]-this._camera.position[0],K[1]-this._camera.position[1]);B+=K[3]*J,R+=J}return R===0?NaN:B/R}get center(){return this._center}set center(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const f=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),E=this.pixelsPerMeter/this.worldSize*m,B=this._mercatorZfromZoom(f),R=this._mercatorZfromZoom(this._maxZoom),k=Math.max(B-E,R);this._setZoom(this._zoomFromMercatorZ(k))}get padding(){return this._edgeInsets.toJSON()}set padding(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())}computeZoomRelativeTo(f){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,f.toAltitude()));let E;E=f.z<this._camera.position[2]?[m.x,m.y,m.z]:[f.x,f.y,f.z];const B=o.N.length(o.N.sub([],this._camera.position,E));return o.aa(this._zoomFromMercatorZ(B),this._minZoom,this._maxZoom)}setFreeCameraOptions(f){if(!this.height||!f.position&&!f.orientation)return;this._updateCameraState();let m=!1;if(f.orientation&&!o.bi.exactEquals(f.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(f.orientation)),f.position){const E=[f.position.x,f.position.y,f.position.z];o.N.exactEquals(E,this._camera.position)||(this._setCameraPosition(E),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const f=this._camera.position,m=new Bu;return m.position=new o.L(f[0],f[1],f[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(f){if(!o.bi.length(f))return!1;o.bi.normalize(f,f);const m=o.N.transformQuat([],[0,0,-1],f),E=o.N.transformQuat([],[0,-1,0],f);if(E[2]<0)return!1;const B=Ju(m,E);return!!B&&(this._camera.orientation=B,!0)}_setCameraPosition(f){const m=this.zoomScale(this.minZoom)*this.tileSize,E=this.zoomScale(this.maxZoom)*this.tileSize,B=this.cameraToCenterDistance;f[2]=o.aa(f[2],B/E,B/m),this._camera.position=f}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(f){return this._edgeInsets.equals(f)}interpolatePadding(f,m,E){this._unmodified=!1,this._edgeInsets.interpolate(f,m,E),this._constrain(),this._calcMatrices()}coveringZoomLevel(f){const m=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(f){const m=[new o.bp(0,f)];if(this.renderWorldCopies){const E=this.pointCoordinate(new o.P(0,0)),B=this.pointCoordinate(new o.P(this.width,0)),R=this.pointCoordinate(new o.P(this.width,this.height)),k=this.pointCoordinate(new o.P(0,this.height)),z=Math.floor(Math.min(E.x,B.x,R.x,k.x)),K=Math.floor(Math.max(E.x,B.x,R.x,k.x)),J=1;for(let ne=z-J;ne<=K+J;ne++)ne!==0&&m.push(new o.bp(ne,f))}return m}isLODDisabled(f){return(!f||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(f,m,E){let B=[];if(m[0]===0&&m[1]===0)return B;for(const k of f){const z=k.canonical,K=k.overscaledZ,J=k.wrap,ne=1<<z.z,he=z.x+1<ne,ye=z.x>0,we=z.y+1<ne,Oe=z.y>0,Fe=k.wrap-(ye?0:1),De=k.wrap+(he?0:1),Ee=ye?z.x-1:ne-1,Ke=he?z.x+1:0;m[0]<0?(B.push(new o.am(K,De,z.z,Ke,z.y)),m[1]<0&&we&&(B.push(new o.am(K,J,z.z,z.x,z.y+1)),B.push(new o.am(K,De,z.z,Ke,z.y+1))),m[1]>0&&Oe&&(B.push(new o.am(K,J,z.z,z.x,z.y-1)),B.push(new o.am(K,De,z.z,Ke,z.y-1)))):m[0]>0?(B.push(new o.am(K,Fe,z.z,Ee,z.y)),m[1]<0&&we&&(B.push(new o.am(K,J,z.z,z.x,z.y+1)),B.push(new o.am(K,Fe,z.z,Ee,z.y+1))),m[1]>0&&Oe&&(B.push(new o.am(K,J,z.z,z.x,z.y-1)),B.push(new o.am(K,Fe,z.z,Ee,z.y-1)))):m[1]<0&&we?B.push(new o.am(K,J,z.z,z.x,z.y+1)):Oe&&B.push(new o.am(K,J,z.z,z.x,z.y-1))}if(B.length>1){B.sort((K,J)=>K.overscaledZ-J.overscaledZ||K.wrap-J.wrap||K.canonical.z-J.canonical.z||K.canonical.x-J.canonical.x||K.canonical.y-J.canonical.y);let k=0,z=0;for(;z<B.length;)B[z].equals(B[k])?++z:B[++k]=B[z++];B.length=k+1}const R=[];for(const k of B)B.some(z=>k.isChildOf(z))||R.push(k);return B=R.filter(k=>!f.some(z=>!!(k.overscaledZ<E&&z.isChildOf(k))||k.equals(z)||k.isChildOf(z))),B}coveringTiles(f){let m=this.coveringZoomLevel(f);const E=m,B=this.elevation&&this.elevation.exaggeration(),R=B&&!f.isTerrainDEM,k=this.projection.name==="mercator";if(f.minzoom!==void 0&&m<f.minzoom)return[];f.maxzoom!==void 0&&m>f.maxzoom&&(m=f.maxzoom);const z=this.locationCoordinate(this.center),K=this.center.lat,J=1<<m,ne=[J*z.x,J*z.y,0],he=this.projection.name==="globe",ye=!he,we=o.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,ye),Oe=he?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Fe=J*o.bl(1,this.center.lat),De=this._camera.position[2]/o.bl(1,this.center.lat),Ee=[J*Oe.x,J*Oe.y,De*(ye?1:Fe)],Ke=he||B,lt=this.cameraToCenterDistance/f.tileSize*(f.roundZoom?1:.502),Ze=this.isLODDisabled(!0)?m:0;let ct;if(this._elevation&&f.isTerrainDEM)ct=1e4*this._elevation.exaggeration();else if(this._elevation){const Nt=this._elevation.getMinMaxForVisibleTiles();ct=Nt?Nt.max:this._centerAltitude}else ct=this._centerAltitude;const Ve=f.isTerrainDEM?-ct:this._elevation?this._elevation.getMinElevationBelowMSL():0,ut=this.projection.isReprojectedInTileSpace?o.br(this):1,Ct=Nt=>{const jn=new o.L(Nt.x+25e-6,Nt.y,Nt.z),sr=new o.L(Nt.x,Nt.y+25e-6,Nt.z),tr=Nt.toLngLat(),pr=jn.toLngLat(),kr=sr.toLngLat(),Zr=this.locationCoordinate(tr),jr=this.locationCoordinate(pr),Wr=this.locationCoordinate(kr),Vi=Math.hypot(jr.x-Zr.x,jr.y-Zr.y),vi=Math.hypot(Wr.x-Zr.x,Wr.y-Zr.y);return Math.sqrt(Vi*vi)*ut/25e-6},Lt=Nt=>{const ln=ct,jn=Ve;return{aabb:o.bu(this,J,0,0,0,Nt,jn,ln,this.projection),zoom:0,x:0,y:0,minZ:jn,maxZ:ln,wrap:Nt,fullyVisible:!1}},$t=[];let pn=[];const Kt=m,Cn=f.reparseOverscaled?E:m,bn=Nt=>Nt*Nt,$n=bn((De-this._centerAltitude)*Fe),Yt=Nt=>{if(!this._elevation||!Nt.tileID||!k)return;const ln=this._elevation.getMinMaxForTile(Nt.tileID),jn=Nt.aabb;ln?(jn.min[2]=ln.min,jn.max[2]=ln.max,jn.center[2]=(jn.min[2]+jn.max[2])/2):(Nt.shouldSplit=vn(Nt),Nt.shouldSplit||(jn.min[2]=jn.max[2]=jn.center[2]=this._centerAltitude))},vn=Nt=>{if(Nt.zoom<Ze)return!0;if(Nt.zoom===Kt)return!1;if(Nt.shouldSplit!=null)return Nt.shouldSplit;const ln=Nt.aabb.distanceX(Ee),jn=Nt.aabb.distanceY(Ee);let sr=$n,tr=1;if(he){sr=bn(Nt.aabb.distanceZ(Ee));const Zr=Math.pow(2,Nt.zoom),jr=o.au((Nt.y+1)/Zr),Wr=o.au(Nt.y/Zr),Vi=Math.min(Math.max(K,jr),Wr),vi=o.bJ(Vi)/o.bJ(K);if(tr=Vi===K?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,vi/this._mercatorScaleRatio),this.zoom<=o.bG&&Nt.zoom===Kt-1&&vi>=.9)return!0}else if(R&&(sr=bn(Nt.aabb.distanceZ(Ee)*Fe)),this.projection.isReprojectedInTileSpace&&E<=5){const Zr=Math.pow(2,Nt.zoom),jr=Ct(new o.L((Nt.x+.5)/Zr,(Nt.y+.5)/Zr));tr=jr>.85?1:jr}const pr=ln*ln+jn*jn+sr,kr=bn((1<<Kt-Nt.zoom)*lt*tr*((Zr,jr)=>{if(jr*bn(.707)<Zr)return 1;const Wr=Math.sqrt(jr/Zr);return Wr/(1.4144271570014144+(Math.pow(1.1,Wr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(sr,$n),pr));return pr<kr};if(this.renderWorldCopies)for(let Nt=1;Nt<=3;Nt++)$t.push(Lt(-Nt)),$t.push(Lt(Nt));for($t.push(Lt(0));$t.length>0;){const Nt=$t.pop(),ln=Nt.x,jn=Nt.y;let sr=Nt.fullyVisible;const tr=()=>this.projection.name==="globe"&&(Nt.y===0||Nt.y===(1<<Nt.zoom)-1);if(!sr){let pr=Ke?Nt.aabb.intersects(we):Nt.aabb.intersectsFlat(we);if(pr===0&&tr()){const kr=new o.bs(Nt.zoom,ln,jn);pr=o.bt(this,J,kr,!0).intersects(we)}if(pr===0)continue;sr=pr===2}if(Nt.zoom!==Kt&&vn(Nt))for(let pr=0;pr<4;pr++){const kr=(ln<<1)+pr%2,Zr=(jn<<1)+(pr>>1),jr={aabb:k?Nt.aabb.quadrant(pr):o.bu(this,J,Nt.zoom+1,kr,Zr,Nt.wrap,Nt.minZ,Nt.maxZ,this.projection),zoom:Nt.zoom+1,x:kr,y:Zr,wrap:Nt.wrap,fullyVisible:sr,tileID:void 0,shouldSplit:void 0,minZ:Nt.minZ,maxZ:Nt.maxZ};R&&!he&&(jr.tileID=new o.am(Nt.zoom+1===Kt?Cn:Nt.zoom+1,Nt.wrap,Nt.zoom+1,kr,Zr),Yt(jr)),$t.push(jr)}else{const pr=Nt.zoom===Kt?Cn:Nt.zoom;if(f.minzoom&&f.minzoom>pr)continue;if(!sr){let Wr=Ke?Nt.aabb.intersectsPrecise(we):Nt.aabb.intersectsPreciseFlat(we);if(Wr===0&&tr()){const Vi=new o.bs(Nt.zoom,ln,jn);Wr=o.bt(this,J,Vi,!0).intersectsPrecise(we)}if(Wr===0)continue}const kr=ne[0]-(.5+ln+(Nt.wrap<<Nt.zoom))*(1<<m-Nt.zoom),Zr=ne[1]-.5-jn,jr=Nt.tileID?Nt.tileID:new o.am(pr,Nt.wrap,Nt.zoom,ln,jn);pn.push({tileID:jr,distanceSq:kr*kr+Zr*Zr})}}if(this.fogCullDistSq){const Nt=this.fogCullDistSq,ln=this.horizonLineFromTop();pn=pn.filter(jn=>{const sr=[0,0,0,1],tr=[o.V,o.V,0,1],pr=this.calculateFogTileMatrix(jn.tileID.toUnwrapped());o.a7.transformMat4(sr,sr,pr),o.a7.transformMat4(tr,tr,pr);const kr=o.a7.min([],sr,tr),Zr=o.a7.max([],sr,tr),jr=o.bv(kr,Zr);if(jr===0)return!0;let Wr=!1;const Vi=this._elevation;if(Vi&&jr>Nt&&ln!==0){const vi=this.calculateProjMatrix(jn.tileID.toUnwrapped());let Li;f.isTerrainDEM||(Li=Vi.getMinMaxForTile(jn.tileID)),Li||(Li={min:Ve,max:ct});const Bi=o.bH(this.rotation),ms=[Bi[0]*o.V,Bi[1]*o.V,Li.max];o.N.transformMat4(ms,ms,vi),Wr=(1-ms[1])*this.height*.5<ln}return jr<Nt||Wr})}return pn.sort((Nt,ln)=>Nt.distanceSq-ln.distanceSq).map(Nt=>Nt.tileID)}resize(f,m){this.width=f,this.height=m,this.pixelsToGLUnits=[2/f,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(f){return Math.pow(2,f)}scaleZoom(f){return Math.log(f)/Math.LN2}project(f){const m=o.aa(f.lat,-o.bw,o.bw),E=this.projection.project(f.lng,m);return new o.P(E.x*this.worldSize,E.y*this.worldSize)}unproject(f){return this.projection.unproject(f.x/this.worldSize,f.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.bl(1,this.center.lat)/this.worldSize}setLocationAtPoint(f,m){let E,B;const R=this.centerPoint;if(this.projection.name==="globe"){const z=this.worldSize;E=(m.x-R.x)/z,B=(m.y-R.y)/z}else{const z=this.pointCoordinate(m),K=this.pointCoordinate(R);E=z.x-K.x,B=z.y-K.y}const k=this.locationCoordinate(f);this.setLocation(new o.L(k.x-E,k.y-B))}setLocation(f){this.center=this.coordinateLocation(f),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(f){return this.projection.locationPoint(this,f)}locationPoint3D(f){return this.projection.locationPoint(this,f,!0)}pointLocation(f){return this.coordinateLocation(this.pointCoordinate(f))}pointLocation3D(f){return this.coordinateLocation(this.pointCoordinate3D(f))}locationCoordinate(f,m){const E=m?o.bl(m,f.lat):void 0,B=this.projection.project(f.lng,f.lat);return new o.L(B.x,B.y,E)}coordinateLocation(f){return this.projection.unproject(f.x,f.y)}pointRayIntersection(f,m){const E=m??this._centerAltitude,B=[f.x,f.y,0,1],R=[f.x,f.y,1,1];o.a7.transformMat4(B,B,this.pixelMatrixInverse),o.a7.transformMat4(R,R,this.pixelMatrixInverse);const k=R[3];o.a7.scale(B,B,1/B[3]),o.a7.scale(R,R,1/k);const z=B[2],K=R[2];return{p0:B,p1:R,t:z===K?0:(E-z)/(K-z)}}screenPointToMercatorRay(f){const m=[f.x,f.y,0,1],E=[f.x,f.y,1,1];return o.a7.transformMat4(m,m,this.pixelMatrixInverse),o.a7.transformMat4(E,E,this.pixelMatrixInverse),o.a7.scale(m,m,1/m[3]),o.a7.scale(E,E,1/E[3]),m[2]=o.bl(m[2],this._center.lat)*this.worldSize,E[2]=o.bl(E[2],this._center.lat)*this.worldSize,o.a7.scale(m,m,1/this.worldSize),o.a7.scale(E,E,1/this.worldSize),new o.a2([m[0],m[1],m[2]],o.N.normalize([],o.N.sub([],E,m)))}rayIntersectionCoordinate(f){const{p0:m,p1:E,t:B}=f,R=o.bl(m[2],this._center.lat),k=o.bl(E[2],this._center.lat);return new o.L(o.U(m[0],E[0],B)/this.worldSize,o.U(m[1],E[1],B)/this.worldSize,o.U(R,k,B))}pointCoordinate(f,m=this._centerAltitude){return this.projection.pointCoordinate(this,f.x,f.y,m)}pointCoordinate3D(f){if(!this.elevation)return this.pointCoordinate(f);let m=this.projection.pointCoordinate3D(this,f.x,f.y);if(m)return new o.L(m[0],m[1],m[2]);let E=0,B=this.horizonLineFromTop();if(f.y>B)return this.pointCoordinate(f);const R=.02*B,k=f.clone();for(let z=0;z<10&&B-E>R;z++){k.y=o.U(E,B,.66);const K=this.projection.pointCoordinate3D(this,k.x,k.y);K?(B=k.y,m=K):E=k.y}return m?new o.L(m[0],m[1],m[2]):this.pointCoordinate(f)}isPointAboveHorizon(f){return this.projection.isPointAboveHorizon(this,f)}isPointOnSurface(f){if(f.y<0||f.y>this.height||f.x<0||f.x>this.width)return!1;if(this.elevation||this.zoom>=o.bx)return!this.isPointAboveHorizon(f);const m=this.pointCoordinate(f);return m.y>=0&&m.y<=1}_coordinatePoint(f,m){const E=m&&this.elevation?this.elevation.getAtPointOrZero(f,this._centerAltitude):this._centerAltitude,B=[f.x*this.worldSize,f.y*this.worldSize,E+f.toAltitude(),1];return o.a7.transformMat4(B,B,this.pixelMatrix),B[3]>0?new o.P(B[0]/B[3],B[1]/B[3]):new o.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:f,left:m}=this._edgeInsets,E=this.height-this._edgeInsets.bottom,B=this.width-this._edgeInsets.right,R=this.pointLocation3D(new o.P(m,f)),k=this.pointLocation3D(new o.P(B,f)),z=this.pointLocation3D(new o.P(B,E)),K=this.pointLocation3D(new o.P(m,E));let J=Math.min(R.lng,k.lng,z.lng,K.lng),ne=Math.max(R.lng,k.lng,z.lng,K.lng),he=Math.min(R.lat,k.lat,z.lat,K.lat),ye=Math.max(R.lat,k.lat,z.lat,K.lat);const we=Math.pow(2,-this.zoom)/16*270,Oe=this.projection.name==="globe"?1:4,Fe=(De,Ee,Ke,lt,Ze)=>{const ct=(De+Ke)/2,Ve=(Ee+lt)/2,ut=new o.P(ct,Ve),{lng:Ct,lat:Lt}=this.pointLocation3D(ut),$t=Math.max(0,J-Ct,he-Lt,Ct-ne,Lt-ye);J=Math.min(J,Ct),ne=Math.max(ne,Ct),he=Math.min(he,Lt),ye=Math.max(ye,Lt),(Ze<Oe||$t>we)&&(Fe(De,Ee,ct,Ve,Ze+1),Fe(ct,Ve,Ke,lt,Ze+1))};if(Fe(m,f,B,f,1),Fe(B,f,B,E,1),Fe(B,E,m,E,1),Fe(m,E,m,f,1),this.projection.name==="globe"){const[De,Ee]=o.by(this);De?(ye=90,ne=180,J=-180):Ee&&(he=-90,ne=180,J=-180)}return new o.ad(new o.bn(J,he),new o.bn(ne,ye))}_getBoundsRectangular(f,m){const{top:E,left:B}=this._edgeInsets,R=this.height-this._edgeInsets.bottom,k=this.width-this._edgeInsets.right,z=new o.P(B,E),K=new o.P(k,E),J=new o.P(k,R),ne=new o.P(B,R);let he=this.pointCoordinate(z,f),ye=this.pointCoordinate(K,f);const we=this.pointCoordinate(J,m),Oe=this.pointCoordinate(ne,m),Fe=(De,Ee)=>(Ee.y-De.y)/(Ee.x-De.x);return he.y>1&&ye.y>=0?he=new o.L((1-Oe.y)/Fe(Oe,he)+Oe.x,1):he.y<0&&ye.y<=1&&(he=new o.L(-Oe.y/Fe(Oe,he)+Oe.x,0)),ye.y>1&&he.y>=0?ye=new o.L((1-we.y)/Fe(we,ye)+we.x,1):ye.y<0&&he.y<=1&&(ye=new o.L(-we.y/Fe(we,ye)+we.x,0)),new o.ad().extend(this.coordinateLocation(he)).extend(this.coordinateLocation(ye)).extend(this.coordinateLocation(Oe)).extend(this.coordinateLocation(we))}_getBoundsRectangularTerrain(){const f=this.elevation;if(!f.visibleDemTiles.length||f.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=f.visibleDemTiles.reduce((E,B)=>{if(B.dem){const R=B.dem.tree;E.min=Math.min(E.min,R.minimums[0]),E.max=Math.max(E.max,R.maximums[0])}return E},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*f.exaggeration(),m.max*f.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(f=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,E=this.height/2-m*(1-this._horizonShift);return f?Math.max(0,E):E}getMaxBounds(){return this.maxBounds}setMaxBounds(f){this.maxBounds=f,this.minLat=-o.bw,this.maxLat=o.bw,this.minLng=-180,this.maxLng=180,f&&(this.minLat=f.getSouth(),this.maxLat=f.getNorth(),this.minLng=f.getWest(),this.maxLng=f.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.a5(this.minLng)*this.tileSize,this.worldMaxX=o.a5(this.maxLng)*this.tileSize,this.worldMinY=o.ae(this.maxLat)*this.tileSize,this.worldMaxY=o.ae(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(f,m){return this.projection.createTileMatrix(this,m,f)}calculateDistanceTileData(f){const m=f.key,E=this._distanceTileDataCache;if(E[m])return E[m];const B=f.canonical,R=1/this.height,k=this.cameraWorldSize,z=k/this.zoomScale(B.z),K=(B.x+Math.pow(2,B.z)*f.wrap)*z,J=B.y*z,ne=this.point;ne.x*=k/this.worldSize,ne.y*=k/this.worldSize;const he=this.angle,ye=Math.sin(-he),we=-Math.cos(-he);return E[m]={bearing:[ye,we],center:[(ne.x-K)*R,(ne.y-J)*R],scale:z/o.V*R},E[m]}calculateFogTileMatrix(f){const m=f.key,E=this._fogTileMatrixCache;if(E[m])return E[m];const B=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,f);return o.a6.multiply(B,this.worldToFogMatrix,B),E[m]=new Float32Array(B),E[m]}calculateProjMatrix(f,m=!1,E=!1){const B=f.key;let R;if(R=E?this._expandedProjMatrixCache:m?this._alignedProjMatrixCache:this._projMatrixCache,R[B])return R[B];const k=this.calculatePosMatrix(f,this.worldSize);let z;return z=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:E?this.expandedFarZProjMatrix:m?this.alignedProjMatrix:this.projMatrix,o.a6.multiply(k,z,k),R[B]=new Float32Array(k),R[B]}calculatePixelsToTileUnitsMatrix(f){const m=f.tileID.key,E=this._pixelsToTileUnitsCache;if(E[m])return E[m];const B=o.bz(f,this);return E[m]=B,E[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const f=1/this.worldSize,m=o.a6.fromScaling([],[f,f,f]);return o.a6.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const f=this._elevation;this._updateCameraState();const m=o.bl(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(m),B=this._camera.forward(),R=o.bl(1,this._center.lat);E[2]/=R,B[2]/=R,o.N.normalize(B,B);const k=f.raycast(E,B,f.exaggeration());if(k){const z=o.N.scaleAndAdd([],E,B,k),K=new o.L(z[0],z[1],o.bl(z[2],o.au(z[1]))),J=(K.z+o.N.length([K.x-E[0],K.y-E[1],K.z-E[2]*R]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(J),this._centerAltitude=K.toAltitude(),this._center=this.coordinateLocation(K),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(f=!1){if(!this._elevation)return;const m=this._elevation,E=o.bl(1,this._center.lat)*this.worldSize,B=this._computeCameraPosition(E),R=m.getAtPointOrZero(new o.L(...B)),k=this.pixelsPerMeter/this.worldSize*R,z=this._minimumHeightOverTerrain(),K=B[2]-k;if(K<=z)if(K<0||f){const J=this.locationCoordinate(this._center,this._centerAltitude),ne=[B[0],B[1],J.z-B[2]],he=o.N.length(ne);ne[2]-=(z-K)/this._pixelsPerMercatorPixel;const ye=o.N.length(ne);if(ye===0)return;o.N.scale(ne,ne,he/ye*this._pixelsPerMercatorPixel),this._camera.position=[B[0],B[1],J.z*this._pixelsPerMercatorPixel-ne[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const f=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||f){const ye=this.center;return ye.lat=o.aa(ye.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!f)&&(ye.lng=o.aa(ye.lng,this.minLng,this.maxLng)),this.center=ye,void(this._constraining=!1)}const m=this._unmodified,{x:E,y:B}=this.point;let R=0,k=E,z=B;const K=this.width/2,J=this.height/2,ne=this.worldMinY*this.scale,he=this.worldMaxY*this.scale;if(B-J<ne&&(z=ne+J),B+J>he&&(z=he-J),he-ne<this.height&&(R=Math.max(R,this.height/(he-ne)),z=(he+ne)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ye=this.worldMinX*this.scale,we=this.worldMaxX*this.scale,Oe=this.worldSize/2-(ye+we)/2;k=(E+Oe+this.worldSize)%this.worldSize-Oe,k-K<ye&&(k=ye+K),k+K>we&&(k=we-K),we-ye<this.width&&(R=Math.max(R,this.width/(we-ye)),k=(we+ye)/2)}k===E&&z===B||(this.center=this.unproject(new o.P(k,z))),R&&(this.zoom+=this.scaleZoom(R)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let f=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(f=Math.max(f,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),f}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const f=this.centerOffset,m=this.projection.name==="globe",E=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.bl(1,this.center.lat)/o.bl(1,o.bI));const B=o.bA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,B),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const R=this.projection.zAxisUnit==="meters"?E:1,k=this._camera.getWorldToCamera(this.worldSize,R);let z;const K=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(K[8]=2*-f.x/this.width,K[9]=2*f.y/this.height,this.isOrthographic){let Lt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),$t=Lt*this.aspect,pn=-$t,Kt=-Lt;$t-=f.x,pn-=f.x,Lt+=f.y,Kt+=f.y,z=this._camera.getCameraToClipOrthographic(pn,$t,Kt,Lt,this._nearZ,this._farZ),((Cn,bn,$n,Yt)=>{for(let vn=0;vn<16;vn++)Cn[vn]=Ec(bn[vn],$n[vn],Yt)})(z,z,K,nd(this.pitch>=15?1:this.pitch/15))}else z=K;const J=o.a6.mul([],K,k);let ne=o.a6.mul([],z,k);if(this.projection.isReprojectedInTileSpace){const Lt=this.locationCoordinate(this.center),$t=o.a6.identity([]);o.a6.translate($t,$t,[Lt.x*this.worldSize,Lt.y*this.worldSize,0]),o.a6.multiply($t,$t,o.bB(this)),o.a6.translate($t,$t,[-Lt.x*this.worldSize,-Lt.y*this.worldSize,0]),o.a6.multiply(ne,ne,$t),o.a6.multiply(J,J,$t),this.inverseAdjustmentMatrix=o.bC(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=o.a6.scale([],ne,[this.worldSize,this.worldSize,this.worldSize/R,1]),this.projMatrix=ne,this.invProjMatrix=o.a6.invert(new Float64Array(16),this.projMatrix),m){const Lt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Lt[8]=2*-f.x/this.width,Lt[9]=2*f.y/this.height,this.expandedFarZProjMatrix=o.a6.mul([],Lt,k)}else this.expandedFarZProjMatrix=this.projMatrix;const he=o.a6.invert([],z);this.frustumCorners=o.bD.fromInvProjectionMatrix(he,this.horizonLineFromTop(),this.height),this.cameraFrustum=o.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!m);const ye=new Float32Array(16);o.a6.identity(ye),o.a6.scale(ye,ye,[1,-1,1]),o.a6.rotateX(ye,ye,this._pitch),o.a6.rotateZ(ye,ye,this.angle);const we=o.a6.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=o.a6.clone(we);const Oe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;we[8]=2*-f.x/this.width,we[9]=2*(f.y+Oe)/this.height,this.skyboxMatrix=o.a6.multiply(ye,we,ye);const Fe=this.point,De=Fe.x,Ee=Fe.y,Ke=this.width%2/2,lt=this.height%2/2,Ze=Math.cos(this.angle),ct=Math.sin(this.angle),Ve=De-Math.round(De)+Ze*Ke+ct*lt,ut=Ee-Math.round(Ee)+Ze*lt+ct*Ke,Ct=new Float64Array(ne);if(o.a6.translate(Ct,Ct,[Ve>.5?Ve-1:Ve,ut>.5?ut-1:ut,0]),this.alignedProjMatrix=Ct,ne=o.a6.create(),o.a6.scale(ne,ne,[this.width/2,-this.height/2,1]),o.a6.translate(ne,ne,[1,-1,0]),this.labelPlaneMatrix=ne,ne=o.a6.create(),o.a6.scale(ne,ne,[1,-1,1]),o.a6.translate(ne,ne,[-1,-1,0]),o.a6.scale(ne,ne,[2/this.width,2/this.height,1]),this.glCoordMatrix=ne,this.pixelMatrix=o.a6.multiply(new Float64Array(16),this.labelPlaneMatrix,J),this._calcFogMatrices(),this._distanceTileDataCache={},ne=o.a6.invert(new Float64Array(16),this.pixelMatrix),!ne)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=ne,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.bE(this);const Lt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.N.transformMat4(Lt,Lt,k),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=ne;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const f=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,E=this._camera.position,B=1/this.height/this._pixelsPerMercatorPixel,R=[f,f,m];o.N.scale(R,R,B),o.N.scale(E,E,-1),o.N.multiply(E,E,R);const k=o.a6.create();o.a6.translate(k,k,E),o.a6.scale(k,k,R),this.mercatorFogMatrix=k,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(f,m,B)}_computeCameraPosition(f){const m=(f=f||this.pixelsPerMeter)/this.pixelsPerMeter,E=this._camera.forward(),B=this.point,R=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-f/this.worldSize*this._centerAltitude;return[B.x/this.worldSize-E[0]*R,B.y/this.worldSize-E[1]*R,f/this.worldSize*this._centerAltitude-E[2]*R]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(f){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),E=this._camera.position[2],B=f[2];let R=1;this.projection.wrap&&(this.center=this.center.wrap()),B>0&&(R=Math.min((m-E)/B,1)),this._camera.position=o.N.scaleAndAdd([],this._camera.position,f,R),this._updateStateFromCamera()}_updateStateFromCamera(){const f=this._camera.position,m=this._camera.forward(),{pitch:E,bearing:B}=this._camera.getPitchBearing(),R=o.bl(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,k=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.bj(this._maxPitch)),z=Math.max((f[2]-R)/Math.cos(E),k),K=this._zoomFromMercatorZ(z);o.N.scaleAndAdd(f,f,m,z),this._pitch=o.aa(E,o.bj(this.minPitch),o.bj(this.maxPitch)),this.angle=o.bh(B,-Math.PI,Math.PI),this._setZoom(o.aa(K,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.L(f[0],f[1],f[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(f){return Math.pow(2,f)*this.tileSize}_mercatorZfromZoom(f){return this.cameraToCenterDistance/this._worldSizeFromZoom(f)}_minimumHeightOverTerrain(){const f=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(f)}_zoomFromMercatorZ(f){return this.scaleZoom(this.cameraToCenterDistance/(f*this.tileSize))}zoomFromMercatorZAdjusted(f){let m=0,E=o.bx,B=0,R=1/0;for(;E-m>1e-6&&E>m;){const k=m+.5*(E-m),z=this.tileSize*Math.pow(2,k),K=this.getCameraToCenterDistance(this.projection,k,z),J=this.scaleZoom(K/(f*this.tileSize)),ne=Math.abs(k-J);ne<R&&(R=ne,B=k),k<J?m=k:E=k}return B}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(f,m){const E=Math.min(f.x,m.x),B=Math.max(f.x,m.x),R=Math.min(f.y,m.y),k=Math.max(f.y,m.y);if(R<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const z=[new o.P(E,R),new o.P(B,k),new o.P(E,k),new o.P(B,R)],K=this.renderWorldCopies?-3:0,J=this.renderWorldCopies?4:1;for(const ne of z){const he=this.pointRayIntersection(ne);if(he.t<0)return!0;const ye=this.rayIntersectionCoordinate(he);if(ye.x<K||ye.y<0||ye.x>J||ye.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.bF(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.P(0,0),new o.P(this.width,this.height))}zoomDeltaToMovement(f,m){const E=o.N.length(o.N.sub([],this._camera.position,f)),B=this._zoomFromMercatorZ(E)+m;return E-this._mercatorZfromZoom(B)}getCameraPoint(){if(this.projection.name==="globe"){const f=function([m,E,B],R){const k=[m,E,B,1];o.a7.transformMat4(k,k,R);const z=k[3]=Math.max(k[3],1e-6);return k[0]/=z,k[1]/=z,k[2]/=z,k}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.P(f[0],f[1])}{const f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,f))}}getCameraToCenterDistance(f,m=this.zoom,E=this.worldSize){const B=o.bA(f,m,this.width,this.height,1024),R=f.pixelSpaceConversion(this.center.lat,E,B);let k=.5/Math.tan(.5*this._fov)*this.height*R;return this.isOrthographic&&(k=Ec(1,k,nd(this.pitch>=15?1:this.pitch/15))),k}getWorldToCameraMatrix(){const f=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.a6.multiply(f,f,this.globeMatrix),f}getFrustum(f){return o.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,this.projection.zAxisUnit==="meters")}}const pa={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},Rl=(w,f)=>{if(f>0&&w.terrain&&o.w("Cutoff is currently disabled on terrain"),f<=0||w.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const m=w.transform,E=Math.max(Math.abs(m._zoom-(w.minCutoffZoom-1)),1),B=m.isLODDisabled(!1)?o.O(60,45,m.pitch):o.O(30,15,m.pitch),R=m._farZ-m._nearZ,k=f*m.height,z=((1-(K=B))*m.cameraToCenterDistance+K*(m._farZ+k))*E;var K;return{shouldRenderCutoff:B<1,uniformValues:{u_cutoff_params:[m._nearZ,m._farZ,(z-m._nearZ)/R,(z-k-m._nearZ)/R]}}},Oa={cascadeCount:2,shadowMapResolution:2048};class ef{constructor(f,m){this.aabb=f,this.lastCascade=m}}class Qp{add(f,m){const E=this.receivers[f.key];E!==void 0?(E.aabb.min[0]=Math.min(E.aabb.min[0],m.min[0]),E.aabb.min[1]=Math.min(E.aabb.min[1],m.min[1]),E.aabb.min[2]=Math.min(E.aabb.min[2],m.min[2]),E.aabb.max[0]=Math.max(E.aabb.max[0],m.max[0]),E.aabb.max[1]=Math.max(E.aabb.max[1],m.max[1]),E.aabb.max[2]=Math.max(E.aabb.max[2],m.max[2])):this.receivers[f.key]=new ef(m,null)}clear(){this.receivers={}}get(f){return this.receivers[f.key]}computeRequiredCascades(f,m,E){const B=o.bS.fromPoints(f.points);let R=0;for(const k in this.receivers){const z=this.receivers[k];if(!z||!B.intersectsAabb(z.aabb))continue;z.aabb.min=B.closestPoint(z.aabb.min),z.aabb.max=B.closestPoint(z.aabb.max);const K=z.aabb.getCorners();for(let J=0;J<E.length;J++){let ne=!0;for(const he of K){const ye=[he[0]*m,he[1]*m,he[2]];if(o.N.transformMat4(ye,ye,E[J].matrix),ye[0]<-1||ye[0]>1||ye[1]<-1||ye[1]>1){ne=!1;break}}if(z.lastCascade=J,R=Math.max(R,J),ne)break}}return R+1}}class tf{constructor(f){this.painter=f,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Qp,this._depthMode=new ir(f.context.gl.LEQUAL,ir.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,f.tp.registerParameter(Oa,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),f.tp.registerParameter(Oa,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(const f of this._cascades)f.texture.destroy(),f.framebuffer.destroy();this._cascades=[]}updateShadowParameters(f,m){const E=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!m||!m.properties)return;const B=m.properties.get("shadow-intensity");if(!m.shadowsEnabled()||B<=0||(this._shadowLayerCount=E.style.order.reduce((Oe,Fe)=>{const De=E.style._mergedLayers[Fe];return Oe+(De.hasShadowPass()&&!De.isHidden(f.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const R=E.context,k=Oa.shadowMapResolution,z=Oa.shadowMapResolution;if(this._cascades.length===0||Oa.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Oe=0;Oe<Oa.cascadeCount;++Oe){const Fe=E._shadowMapDebug,De=R.gl,Ee=R.createFramebuffer(k,z,Fe,"texture"),Ke=new o.T(R,{width:k,height:z,data:null},De.DEPTH_COMPONENT);if(Ee.depthAttachment.set(Ke.texture),Fe){const lt=new o.T(R,{width:k,height:z,data:null},De.RGBA);Ee.colorAttachment.set(lt.texture)}this._cascades.push({framebuffer:Ee,texture:Ke,matrix:[],far:0,boundingSphereRadius:0,frustum:new o.bq,scale:0})}}this.shadowDirection=Gf(m);let K=0;if(f.elevation){const Oe=f.elevation,Fe=[1e4,-1e4];Oe.visibleDemTiles.filter(De=>De.dem).forEach(De=>{const Ee=De.dem.tree;Fe[0]=Math.min(Fe[0],Ee.minimums[0]),Fe[1]=Math.max(Fe[1],Ee.maximums[0])}),Fe[0]!==1e4&&(K=(Fe[1]-Fe[0])*Oe.exaggeration())}const J=1.5*f.cameraToCenterDistance,ne=3*J,he=new Float64Array(16);for(let Oe=0;Oe<this._cascades.length;++Oe){const Fe=this._cascades[Oe];let De=f.height/50,Ee=1;Oa.cascadeCount===1?Ee=ne:Oe===0?Ee=J:(De=J,Ee=ne);const[Ke,lt]=rd(f,this.shadowDirection,De,Ee,Oa.shadowMapResolution,K);Fe.scale=f.scale,Fe.matrix=Ke,Fe.boundingSphereRadius=lt,o.a6.invert(he,Fe.matrix),Fe.frustum=o.bq.fromInvProjectionMatrix(he,1,0,!0),Fe.far=Ee}const ye=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ye].far,this._cascades[ye].far],this._uniformValues.u_shadow_intensity=B,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Oa.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Oa.shadowMapResolution,this._uniformValues.u_shadowmap_0=pa.ShadowMap0,this._uniformValues.u_shadowmap_1=pa.ShadowMap0+1,this._groundShadowTiles=E.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const we=E.transform.elevation;for(const Oe of this._groundShadowTiles){let Fe={min:0,max:0};if(we){const De=we.getMinMaxForTile(Oe);De&&(Fe=De)}this.addShadowReceiver(Oe.toUnwrapped(),Fe.min,Fe.max)}}get enabled(){return this._enabled}set enabled(f){this._enabled=f}drawShadowPass(f,m){if(!this._enabled)return;const E=this.painter,B=E.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(E.transform.getFrustum(0),E.transform.worldSize,this._cascades),B.viewport.set([0,0,Oa.shadowMapResolution,Oa.shadowMapResolution]);for(let R=0;R<this._numCascadesToRender;++R){E.currentShadowCascade=R,B.bindFramebuffer.set(this._cascades[R].framebuffer.framebuffer),B.clear({color:o.ax.white,depth:1});for(const k of f.order){const z=f._mergedLayers[k];if(!z.hasShadowPass()||z.isHidden(E.transform.zoom))continue;const K=f.getLayerSourceCache(z),J=K?m[K.id]:void 0;(z.type==="model"||J&&J.length)&&E.renderLayer(E,K,z,J)}}E.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const f=this.painter,m=f.style,E=f.context,B=m.directionalLight,R=m.ambientLight;if(!B||!R)return;const k=[],z=Rl(f,f.longestCutoffRange);z.shouldRenderCutoff&&k.push("RENDER_CUTOFF");const K=Sc(B,R),J=new ir(E.gl.LEQUAL,ir.ReadOnly,f.depthRangeFor3D);for(const ne of this._groundShadowTiles){const he=ne.toUnwrapped(),ye=f.isTileAffectedByFog(ne),we=f.getOrCreateProgram("groundShadow",{defines:k,overrideFog:ye});this.setupShadows(he,we),f.uploadCommonUniforms(E,we,he,null,z);const Oe={u_matrix:f.transform.calculateProjMatrix(he),u_ground_shadow_factor:K};we.draw(f,E.gl.TRIANGLES,J,di.disabled,Ui.multiply,Yr.disabled,Oe,"ground_shadow",f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments,{},f.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Ui.unblended:Ui.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(f){const m=this.painter.transform,E=m.calculatePosMatrix(f,m.worldSize);return o.a6.multiply(E,this._cascades[this.painter.currentShadowCascade].matrix,E),Float32Array.from(E)}calculateShadowPassMatrixFromMatrix(f){return o.a6.multiply(f,this._cascades[this.painter.currentShadowCascade].matrix,f),Float32Array.from(f)}setupShadows(f,m,E,B=0){if(!this._enabled)return;const R=this.painter.transform,k=this.painter.context,z=k.gl,K=this._uniformValues,J=new Float64Array(16),ne=R.calculatePosMatrix(f,R.worldSize);for(let he=0;he<this._cascades.length;he++)o.a6.multiply(J,this._cascades[he].matrix,ne),K[he===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(J),k.activeTexture.set(z.TEXTURE0+pa.ShadowMap0+he),this._cascades[he].texture.bind(z.NEAREST,z.CLAMP_TO_EDGE);if(this.useNormalOffset=!!E,this.useNormalOffset){const he=o.bR(f.canonical),ye=2/R.tileSize*o.V/Oa.shadowMapResolution,we=ye*this._cascades[0].boundingSphereRadius,Oe=ye*this._cascades[this._cascades.length-1].boundingSphereRadius,Fe=(E==="vector-tile"?1:3)/Math.pow(2,B-f.canonical.z-(1-R.zoom+Math.floor(R.zoom)));K.u_shadow_normal_offset=[he,we*Fe,Oe*Fe],K.u_shadow_bias=[6e-5,.0012,.012]}else K.u_shadow_bias=[36e-5,.0012,.012];m.setShadowUniformValues(k,K)}setupShadowsFromMatrix(f,m,E=!1){if(!this._enabled)return;const B=this.painter.context,R=B.gl,k=this._uniformValues,z=new Float64Array(16);for(let K=0;K<Oa.cascadeCount;K++)o.a6.multiply(z,this._cascades[K].matrix,f),k[K===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(z),B.activeTexture.set(R.TEXTURE0+pa.ShadowMap0+K),this._cascades[K].texture.bind(R.NEAREST,R.CLAMP_TO_EDGE);this.useNormalOffset=E,E?(k.u_shadow_normal_offset=[1,5,5],k.u_shadow_bias=[6e-5,.0012,.012]):k.u_shadow_bias=[36e-5,.0012,.012],m.setShadowUniformValues(B,k)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(f,m,E,B){if(B[2]>=0)return{};const R=function(K,J,ne){const he=ne/(1<<K.canonical.z);return new o.bS([K.canonical.x*he+K.wrap*ne,K.canonical.y*he+K.wrap*ne,0],[(K.canonical.x+1)*he+K.wrap*ne,(K.canonical.y+1)*he+K.wrap*ne,J])}(f,m,E).getCorners(),k=m/-B[2];B[0]<0?(o.N.add(R[0],R[0],[B[0]*k,0,0]),o.N.add(R[3],R[3],[B[0]*k,0,0])):B[0]>0&&(o.N.add(R[1],R[1],[B[0]*k,0,0]),o.N.add(R[2],R[2],[B[0]*k,0,0])),B[1]<0?(o.N.add(R[0],R[0],[0,B[1]*k,0]),o.N.add(R[1],R[1],[0,B[1]*k,0])):B[1]>0&&(o.N.add(R[2],R[2],[0,B[1]*k,0]),o.N.add(R[3],R[3],[0,B[1]*k,0]));const z={};return z.vertices=R,z.planes=[du(R[1],R[0],R[4]),du(R[2],R[1],R[5]),du(R[3],R[2],R[6]),du(R[0],R[3],R[7])],z}addShadowReceiver(f,m,E){this._receivers.add(f,o.bS.fromTileIdAndHeight(f,m,E))}getMaxCascadeForTile(f){const m=this._receivers.get(f);return m&&m.lastCascade?m.lastCascade:0}}function du(w,f,m){const E=o.N.sub([],m,f),B=o.N.sub([],w,f),R=o.N.cross([],E,B),k=o.N.length(R);return k===0?[0,0,1,0]:(o.N.scale(R,R,1/k),[R[0],R[1],R[2],-o.N.dot(R,f)])}function Gf(w){const f=w.properties.get("direction"),m=o.bQ(f.x,f.y,f.z);m[2]=o.aa(m[2],0,75);const E=o.bT([m[0],m[1],m[2]]);return o.N.fromValues(E.x,E.y,E.z)}function Sc(w,f){const m=w.properties.get("color"),E=w.properties.get("intensity"),B=w.properties.get("direction"),R=[B.x,B.y,B.z],k=f.properties.get("color"),z=f.properties.get("intensity"),K=Math.max(o.N.dot([0,0,1],R),0),J=[0,0,0];o.N.scale(J,k.toArray01Linear().slice(0,3),z);const ne=[0,0,0];return o.N.scale(ne,m.toArray01Linear().slice(0,3),K*E),o.bU([J[0]>0?J[0]/(J[0]+ne[0]):0,J[1]>0?J[1]/(J[1]+ne[1]):0,J[2]>0?J[2]/(J[2]+ne[2]):0])}function rd(w,f,m,E,B,R){const k=w.zoom,z=w.scale,K=w.worldSize,J=1/K,ne=w.aspect,he=Math.sqrt(1+ne*ne)*Math.tan(.5*w.fovX),ye=he*he,we=E-m,Oe=E+m;let Fe,De;ye>we/Oe?(Fe=E,De=E*he):(Fe=.5*Oe*(1+ye),De=.5*Math.sqrt(we*we+2*(E*E+m*m)*ye+Oe*Oe*ye*ye));const Ee=w.projection.pixelsPerMeter(w.center.lat,K),Ke=w._camera.getCameraToWorldMercator(),lt=[0,0,-Fe*J];o.N.transformMat4(lt,lt,Ke);let Ze=De*J;const ct=w._edgeInsets;if(!(ct.left===0&&ct.top===0&&ct.right===0&&ct.bottom===0||ct.left===ct.right&&ct.top===ct.bottom)){const sr=w._camera.getWorldToCamera(w.worldSize,w.projection.zAxisUnit==="meters"?Ee:1),tr=w._camera.getCameraToClipPerspective(w._fov,w.width/w.height,m,E);tr[8]=2*-w.centerOffset.x/w.width,tr[9]=2*w.centerOffset.y/w.height;const pr=new Float64Array(16);o.a6.mul(pr,tr,sr);const kr=new Float64Array(16);o.a6.invert(kr,pr);const Zr=o.bq.fromInvProjectionMatrix(kr,K,k,!0);for(const jr of Zr.points){const Wr=((Ve=jr)[0]/=z,Ve[1]/=z,Ve[2]=o.bl(Ve[2],w._center.lat),Ve);Ze=Math.max(Ze,o.N.len(o.N.subtract([],lt,Wr)))}}var Ve;Ze*=B/(B-1);const ut=Math.acos(f[2]),Ct=Math.atan2(-f[0],-f[1]),Lt=new Sh;Lt.position=lt,Lt.setPitchBearing(ut,Ct);const $t=Lt.getWorldToCamera(K,Ee),pn=Ze*K,Kt=Math.min(w._mercatorZfromZoom(17)*K*-2,-2*pn),Cn=Lt.getCameraToClipOrthographic(-pn,pn,-pn,pn,Kt,(pn+R*Ee)/f[2]),bn=new Float64Array(16);o.a6.multiply(bn,Cn,$t);const $n=o.N.fromValues(Math.floor(1e6*lt[0])/1e6*K,Math.floor(1e6*lt[1])/1e6*K,0),Yt=.5*B,vn=[0,0,0];o.N.transformMat4(vn,$n,bn),o.N.scale(vn,vn,Yt);const Nt=[Math.floor(vn[0]),Math.floor(vn[1]),Math.floor(vn[2])],ln=[0,0,0];o.N.sub(ln,vn,Nt),o.N.scale(ln,ln,-1/Yt);const jn=new Float64Array(16);return o.a6.identity(jn),o.a6.translate(jn,jn,ln),o.a6.multiply(bn,jn,bn),[bn,pn]}const Ao=(w,f)=>_t(w,f&&f.filter(m=>m.identifier!=="source.canvas")),Ko=o.ac(ji,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),ra=o.ac(ji,["setCenter","setZoom","setBearing","setPitch"]),tl={version:8,layers:[],sources:{}},id={duration:300,delay:0},Qf=new Set(["fill","line","background","hillshade","raster"]);class Tc extends o.E{constructor(f,m={}){super(),this.map=f,this.scope=m.scope||"",this.fragments=[],this.importDepth=m.importDepth||0,this.importsCache=m.importsCache||new Map,this.resolvedImports=m.resolvedImports||new Set,this.transition=o.e({},id),this._buildingIndex=new Yd(this),this.crossTileSymbolIndex=new td,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=m.styleChanges||new te,this.dispatcher=m.dispatcher?m.dispatcher:new o.bW(o.bX(),this),m.imageManager?this.imageManager=m.imageManager:(this.imageManager=new ce,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=m.glyphManager?m.glyphManager:new o.bY(f._requestManager,m.localFontFamily?o.bZ.all:m.localIdeographFontFamily?o.bZ.ideographs:o.bZ.none,m.localFontFamily||m.localIdeographFontFamily),m.modelManager?this.modelManager=m.modelManager:(this.modelManager=new q(f._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=m.configOptions?m.configOptions:new Map,this._configDependentLayers=m.configDependentLayers?m.configDependentLayers:new Set,this._config=m.config,this.dispatcher.broadcast("setReferrer",o.b_());const E=this;this._rtlTextPluginCallback=Tc.registerForPluginStateChange(B=>{E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:B.pluginStatus,pluginURL:B.pluginURL},(R,k)=>{if(o.b$(R),k&&k.every(z=>z))for(const z in E._sourceCaches){const K=E._sourceCaches[z],J=K.getSource().type;J!=="vector"&&J!=="geojson"||K.reload()}})}),this.on("data",B=>{if(B.dataType!=="source"||B.sourceDataType!=="metadata")return;const R=this.getOwnSource(B.sourceId);if(R&&R.vectorLayerIds)for(const k in this._layers){const z=this._layers[k];z.source===R.id&&this._validateLayer(z)}})}loadURL(f,m={}){this.fire(new o.b("dataloading",{dataType:"style"}));const E=typeof m.validate=="boolean"?m.validate:!o.c0(f);f=this.map._requestManager.normalizeStyleURL(f,m.accessToken),this.resolvedImports.add(f);const B=this.importsCache.get(f);if(B)return this._load(B,E);const R=this.map._requestManager.transformRequest(f,o.R.Style);this._request=o.g(R,(k,z)=>{if(this._request=null,k)this.fire(new o.a(k));else if(z)return this.importsCache.set(f,z),this._load(z,E)})}loadJSON(f,m={}){this.fire(new o.b("dataloading",{dataType:"style"})),this._request=o.f.frame(()=>{this._request=null,this._load(f,m.validate!==!1)})}loadEmpty(){this.fire(new o.b("dataloading",{dataType:"style"})),this._load(tl,!1)}_loadImports(f,m,E){if(this.importDepth>=4)return o.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const B=[];for(const R of f){const k=this._createFragmentStyle(R),z=new Promise(ne=>{k.once("style.import.load",ne),k.once("error",ne)}).then(()=>this.mergeAll());if(B.push(z),this.resolvedImports.has(R.url)){k.loadEmpty();continue}const K=R.data||this.importsCache.get(R.url);K?k.loadJSON(K,{validate:m}):R.url?k.loadURL(R.url,{validate:m}):k.loadEmpty();const J={style:k,id:R.id,config:R.config};if(E){const ne=this.fragments.findIndex(({id:he})=>he===E);this.fragments=this.fragments.slice(0,ne).concat(J).concat(this.fragments.slice(ne))}else this.fragments.push(J)}return Promise.allSettled(B)}_createFragmentStyle(f){const m=this.scope?o.ag(f.id,this.scope):f.id,E=new Tc(this.map,{scope:m,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:f.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return E.setEventedParent(this.map,{style:E}),E}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const f=this.isRootStyle();this._shouldPrecompile=f,this.fire(new o.b(f?"style.load":"style.import.load"))}_load(f,m){const E=f.schema;if(this.isRootStyle()&&(f.fragment||E&&f.fragment!==!1)){const k=o.e({},tl,{imports:[{id:"basemap",data:f,url:""}]});return void this._load(k,m)}if(this.setConfig(this._config,E),m&&Ao(this,Zt(f)))return;this._loaded=!0,this.stylesheet=o.c1(f);for(const k in f.sources)this.addSource(k,f.sources[k],{validate:!1,isInitialLoad:!0});f.sprite?this._loadSprite(f.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(f.glyphs,this.scope);const B=rg(this.stylesheet.layers);if(this._order=B.map(k=>k.id),this.stylesheet.light&&o.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const k=this.stylesheet.lights[0];this.light=new gt(k.properties,k.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new gt(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const k of B){const z=o.c2(k,this.scope,this.options);z.isConfigDependent&&this._configDependentLayers.add(z.fqid),z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize();const K=this.getOwnLayerSourceCache(z),J=!!this.directionalLight&&this.directionalLight.shadowsEnabled();K&&z.canCastShadows()&&J&&(K.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const R=this.stylesheet.terrain;R&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=o.f.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?o.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(R,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new o.b("data",{dataType:"style"})),f.imports?this._loadImports(f.imports,m).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let f,m,E,B,R,k,z,K;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(J=>{if(J.stylesheet){if(J.light!=null&&(f=J.light),J.stylesheet.lights)for(const ne of J.stylesheet.lights)ne.type==="ambient"&&J.ambientLight!=null&&(m=J.ambientLight),ne.type==="directional"&&J.directionalLight!=null&&(E=J.directionalLight);B=this._prioritizeTerrain(B,J.terrain,J.stylesheet.terrain),J.stylesheet.fog&&J.fog!=null&&(R=J.fog),J.stylesheet.camera!=null&&(K=J.stylesheet.camera),J.stylesheet.projection!=null&&(k=J.stylesheet.projection),J.stylesheet.transition!=null&&(z=J.stylesheet.transition)}}),this.light=f,this.ambientLight=m,this.directionalLight=E,this.fog=R,B===null?delete this.terrain:this.terrain=B,this.camera=K||{"camera-projection":"perspective"},this.projection=k||{name:"mercator"},this.transition=o.e({},id,z),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(f){const m=E=>{for(const B of E.fragments)m(B.style);f(E)};m(this)}_prioritizeTerrain(f,m,E){const B=f&&f.drapeRenderMode===0;return E===null?m&&m.drapeRenderMode===0?m:B?f:null:m!=null&&(!f||B||m&&m.drapeRenderMode===1)?m:f}mergeTerrain(){let f;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(m=>{f=this._prioritizeTerrain(f,m.terrain,m.stylesheet.terrain)}),f===null?delete this.terrain:this.terrain=f}mergeProjection(){let f;this.forEachFragmentStyle(m=>{m.stylesheet.projection!=null&&(f=m.stylesheet.projection)}),this.projection=f||{name:"mercator"}}mergeSources(){const f={},m={},E={};this.forEachFragmentStyle(B=>{for(const R in B._sourceCaches){const k=o.ag(R,B.scope);f[k]=B._sourceCaches[R]}for(const R in B._otherSourceCaches){const k=o.ag(R,B.scope);m[k]=B._otherSourceCaches[R]}for(const R in B._symbolSourceCaches){const k=o.ag(R,B.scope);E[k]=B._symbolSourceCaches[R]}}),this._mergedSourceCaches=f,this._mergedOtherSourceCaches=m,this._mergedSymbolSourceCaches=E}mergeLayers(){const f={},m=[],E={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(R=>{for(const k of R._order){const z=R._layers[k];if(z.type==="slot"){const K=o.c3(k);if(f[K])continue;f[K]=[]}z.slot&&f[z.slot]?f[z.slot].push(z):m.push(z)}}),this._mergedOrder=[];const B=(R=[])=>{for(const k of R)if(k.type==="slot"){const z=o.c3(k.id);f[z]&&B(f[z])}else{const z=o.ag(k.id,k.scope);this._mergedOrder.push(z),E[z]=k,k.is3D()&&(this._has3DLayers=!0),k.type==="circle"&&(this._hasCircleLayers=!0),k.type==="symbol"&&(this._hasSymbolLayers=!0)}};B(m),this._mergedLayers=E,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(f){return this.stylesheet.camera=o.e({},this.stylesheet.camera,f),this.camera=this.stylesheet.camera,this}setProjection(f){f?this.stylesheet.projection=f:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(f){this._spriteRequest=function(m,E,B){let R,k,z;const K=o.f.devicePixelRatio>1?"@2x":"";let J=o.g(E.transformRequest(E.normalizeSpriteURL(m,K,".json"),o.R.SpriteJSON),(ye,we)=>{J=null,z||(z=ye,R=we,he())}),ne=o.d(E.transformRequest(E.normalizeSpriteURL(m,K,".png"),o.R.SpriteImage),(ye,we)=>{ne=null,z||(z=ye,k=we,he())});function he(){if(z)B(z);else if(R&&k){const ye=o.f.getImageData(k),we={};for(const Oe in R){const{width:Fe,height:De,x:Ee,y:Ke,sdf:lt,pixelRatio:Ze,stretchX:ct,stretchY:Ve,content:ut}=R[Oe],Ct=new o.h({width:Fe,height:De});o.h.copy(ye,Ct,{x:Ee,y:Ke},{x:0,y:0},{width:Fe,height:De}),we[Oe]={data:Ct,pixelRatio:Ze,sdf:lt,stretchX:ct,stretchY:Ve,content:ut}}B(null,we)}}return{cancel(){J&&(J.cancel(),J=null),ne&&(ne.cancel(),ne=null)}}}(f,this.map._requestManager,(m,E)=>{if(this._spriteRequest=null,m)this.fire(new o.a(m));else if(E)for(const B in E)this.imageManager.addImage(B,this.scope,E[B]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new o.b("data",{dataType:"style"}))})}_validateLayer(f){const m=this.getOwnSource(f.source);if(!m)return;const E=f.sourceLayer;E&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(E)===-1)&&this.fire(new o.a(new Error(`Source layer "${E}" does not exist on source "${m.id}" as specified by style layer "${f.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const f in this._sourceCaches)if(!this._sourceCaches[f].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:f}of this.fragments)if(!f.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((f,m)=>{const E=this.fragments[m];return E&&E.style&&(f.data=E.style.serialize()),f})}_serializeSources(){const f={};for(const m in this._sourceCaches){const E=this._sourceCaches[m].getSource();f[E.id]||(f[E.id]=E.serialize())}return f}_serializeLayers(f){const m=[];for(const E of f){const B=this._layers[E];B&&B.type!=="custom"&&m.push(B.serialize())}return m}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const f in this._sourceCaches)if(this._sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(f){return!!this.terrain&&(typeof f.isLayerDraped=="function"?f.isLayerDraped(this.getLayerSourceCache(f)):Qf.has(f.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(f){const m=this.getOwnLayer(f);if(m)return m;this.fire(new o.a(new Error(`The layer '${f}' does not exist in the map's style.`)))}_checkSource(f){const m=this.getOwnSource(f);if(m)return m;this.fire(new o.a(new Error(`The source '${f}' does not exist in the map's style.`)))}update(f){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(f),this.directionalLight&&this.directionalLight.recalculate(f);const m=this.calculateLightsBrightness();f.brightness=m||0,m!==this._brightness&&(this._brightness=m,this.dispatcher.broadcast("setBrightness",m));const E=this._changes.isDirty();if(this._changes.isDirty()){const R=this._changes.getLayerUpdatesByScope();for(const k in R){const{updatedIds:z,removedIds:K}=R[k];(z||K)&&this._updateWorkerLayers(k,z,K)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(f),this.light&&this.light.updateTransitions(f),this.ambientLight&&this.ambientLight.updateTransitions(f),this.directionalLight&&this.directionalLight.updateTransitions(f),this.fog&&this.fog.updateTransitions(f),this._changes.reset()}const B={};for(const R in this._mergedSourceCaches){const k=this._mergedSourceCaches[R];B[R]=k.used,k.used=!1,k.tileCoverLift=0}for(const R of this._mergedOrder){const k=this._mergedLayers[R];if(k.recalculate(f,this._availableImages),!k.isHidden(f.zoom)){const z=this.getLayerSourceCache(k);z&&(z.used=!0,z.tileCoverLift=Math.max(z.tileCoverLift,k.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let z=k.minzoom||0;z<(k.maxzoom||25.5);z++){const K=this.map.painter;if(K){const J=k.getProgramIds();if(!J)continue;for(const ne of J){const he=k.getDefaultProgramParams(ne,f.zoom);he&&(K.style=this,this.fog&&(K._fogVisible=!0,he.overrideFog=!0,K.getOrCreateProgram(ne,he)),K._fogVisible=!1,he.overrideFog=!1,K.getOrCreateProgram(ne,he),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(he.overrideRtt=!0,K.getOrCreateProgram(ne,he)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const R in B){const k=this._mergedSourceCaches[R];B[R]!==k.used&&k.getSource().fire(new o.b("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(f),this.terrain&&this.terrain.recalculate(f),this.fog&&this.fog.recalculate(f),this.z=f.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),E&&this.fire(new o.b("data",{dataType:"style"}))}_updateTilesForChangedImages(){const f=this._changes.getUpdatedImages();if(f.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],f);this._changes.resetUpdatedImages()}}_updateWorkerLayers(f,m,E){const B=this.getFragmentStyle(f);B&&this.dispatcher.broadcast("updateLayers",{layers:m?B._serializeLayers(m):[],scope:f,removedIds:E||[],options:B.options})}setState(f){if(this._checkLoaded(),Ao(this,Zt(f)))return!1;(f=o.c1(f)).layers=rg(f.layers);const m=function(B,R){if(!B)return[{command:ji.setStyle,args:[R]}];let k=[];try{if(!d(B.version,R.version))return[{command:ji.setStyle,args:[R]}];d(B.center,R.center)||k.push({command:ji.setCenter,args:[R.center]}),d(B.zoom,R.zoom)||k.push({command:ji.setZoom,args:[R.zoom]}),d(B.bearing,R.bearing)||k.push({command:ji.setBearing,args:[R.bearing]}),d(B.pitch,R.pitch)||k.push({command:ji.setPitch,args:[R.pitch]}),d(B.sprite,R.sprite)||k.push({command:ji.setSprite,args:[R.sprite]}),d(B.glyphs,R.glyphs)||k.push({command:ji.setGlyphs,args:[R.glyphs]}),d(B.imports,R.imports)||function(he=[],ye=[],we){ye=ye||[];const Oe=(he=he||[]).map(Ch),Fe=ye.map(Ch),De=he.reduce(Xd,{}),Ee=ye.reduce(Xd,{}),Ke=Oe.slice();let lt,Ze,ct,Ve;for(lt=0,Ze=0;lt<Oe.length;lt++)ct=Oe[lt],Ee.hasOwnProperty(ct)?Ze++:(we.push({command:ji.removeImport,args:[ct]}),Ke.splice(Ke.indexOf(ct,Ze),1));for(lt=0,Ze=0;lt<Fe.length;lt++)ct=Fe[Fe.length-1-lt],Ke[Ke.length-1-lt]!==ct&&(De.hasOwnProperty(ct)?(we.push({command:ji.removeImport,args:[ct]}),Ke.splice(Ke.lastIndexOf(ct,Ke.length-Ze),1)):Ze++,Ve=Ke[Ke.length-lt],we.push({command:ji.addImport,args:[Ee[ct],Ve]}),Ke.splice(Ke.length-lt,0,ct));for(const ut of ye){const Ct=De[ut.id];Ct&&!d(Ct,ut)&&we.push({command:ji.updateImport,args:[ut.id,ut]})}}(B.imports,R.imports,k),d(B.transition,R.transition)||k.push({command:ji.setTransition,args:[R.transition]}),d(B.light,R.light)||k.push({command:ji.setLight,args:[R.light]}),d(B.fog,R.fog)||k.push({command:ji.setFog,args:[R.fog]}),d(B.projection,R.projection)||k.push({command:ji.setProjection,args:[R.projection]}),d(B.lights,R.lights)||k.push({command:ji.setLights,args:[R.lights]}),d(B.camera,R.camera)||k.push({command:ji.setCamera,args:[R.camera]});const z={},K=[];(function(he,ye,we,Oe){let Fe;for(Fe in ye=ye||{},he=he||{})he.hasOwnProperty(Fe)&&(ye.hasOwnProperty(Fe)||Vf(Fe,we,Oe));for(Fe in ye){if(!ye.hasOwnProperty(Fe))continue;const De=ye[Fe];he.hasOwnProperty(Fe)?d(he[Fe],De)||(he[Fe].type==="geojson"&&De.type==="geojson"&&Em(he,ye,Fe)?we.push({command:ji.setGeoJSONSourceData,args:[Fe,De.data]}):k_(Fe,ye,we,Oe)):kp(Fe,ye,we)}})(B.sources,R.sources,K,z);const J=[];B.layers&&B.layers.forEach(he=>{he.source&&z[he.source]?k.push({command:ji.removeLayer,args:[he.id]}):J.push(he)});let ne=B.terrain;ne&&z[ne.source]&&(k.push({command:ji.setTerrain,args:[void 0]}),ne=void 0),k=k.concat(K),d(ne,R.terrain)||k.push({command:ji.setTerrain,args:[R.terrain]}),function(he,ye,we){ye=ye||[];const Oe=(he=he||[]).map(Ch),Fe=ye.map(Ch),De=he.reduce(Xd,{}),Ee=ye.reduce(Xd,{}),Ke=Oe.slice(),lt=Object.create(null);let Ze,ct,Ve,ut,Ct,Lt,$t;for(Ze=0,ct=0;Ze<Oe.length;Ze++)Ve=Oe[Ze],Ee.hasOwnProperty(Ve)?ct++:(we.push({command:ji.removeLayer,args:[Ve]}),Ke.splice(Ke.indexOf(Ve,ct),1));for(Ze=0,ct=0;Ze<Fe.length;Ze++)Ve=Fe[Fe.length-1-Ze],Ke[Ke.length-1-Ze]!==Ve&&(De.hasOwnProperty(Ve)?(we.push({command:ji.removeLayer,args:[Ve]}),Ke.splice(Ke.lastIndexOf(Ve,Ke.length-ct),1)):ct++,Lt=Ke[Ke.length-Ze],we.push({command:ji.addLayer,args:[Ee[Ve],Lt]}),Ke.splice(Ke.length-Ze,0,Ve),lt[Ve]=!0);for(Ze=0;Ze<Fe.length;Ze++)if(Ve=Fe[Ze],ut=De[Ve],Ct=Ee[Ve],!lt[Ve]&&!d(ut,Ct))if(d(ut.source,Ct.source)&&d(ut["source-layer"],Ct["source-layer"])&&d(ut.type,Ct.type)){for($t in Yu(ut.layout,Ct.layout,we,Ve,null,ji.setLayoutProperty),Yu(ut.paint,Ct.paint,we,Ve,null,ji.setPaintProperty),d(ut.slot,Ct.slot)||we.push({command:ji.setSlot,args:[Ve,Ct.slot]}),d(ut.filter,Ct.filter)||we.push({command:ji.setFilter,args:[Ve,Ct.filter]}),d(ut.minzoom,Ct.minzoom)&&d(ut.maxzoom,Ct.maxzoom)||we.push({command:ji.setLayerZoomRange,args:[Ve,Ct.minzoom,Ct.maxzoom]}),ut)ut.hasOwnProperty($t)&&$t!=="layout"&&$t!=="paint"&&$t!=="filter"&&$t!=="metadata"&&$t!=="minzoom"&&$t!=="maxzoom"&&$t!=="slot"&&($t.indexOf("paint.")===0?Yu(ut[$t],Ct[$t],we,Ve,$t.slice(6),ji.setPaintProperty):d(ut[$t],Ct[$t])||we.push({command:ji.setLayerProperty,args:[Ve,$t,Ct[$t]]}));for($t in Ct)Ct.hasOwnProperty($t)&&!ut.hasOwnProperty($t)&&$t!=="layout"&&$t!=="paint"&&$t!=="filter"&&$t!=="metadata"&&$t!=="minzoom"&&$t!=="maxzoom"&&$t!=="slot"&&($t.indexOf("paint.")===0?Yu(ut[$t],Ct[$t],we,Ve,$t.slice(6),ji.setPaintProperty):d(ut[$t],Ct[$t])||we.push({command:ji.setLayerProperty,args:[Ve,$t,Ct[$t]]}))}else we.push({command:ji.removeLayer,args:[Ve]}),Lt=Ke[Ke.lastIndexOf(Ve)+1],we.push({command:ji.addLayer,args:[Ct,Lt]})}(J,R.layers,k)}catch(z){console.warn("Unable to compute style diff:",z),k=[{command:ji.setStyle,args:[R]}]}return k}(this.serialize(),f).filter(B=>!(B.command in ra));if(m.length===0)return!1;const E=m.filter(B=>!(B.command in Ko));if(E.length>0)throw new Error(`Unimplemented: ${E.map(B=>B.command).join(", ")}.`);return m.forEach(B=>{this[B.command].apply(this,B.args)}),this.stylesheet=f,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(f,m){return this.getImage(f)?this.fire(new o.a(new Error("An image with this name already exists."))):(this.imageManager.addImage(f,this.scope,m),this._afterImageUpdated(f),this)}updateImage(f,m){this.imageManager.updateImage(f,this.scope,m)}getImage(f){return this.imageManager.getImage(f,this.scope)}removeImage(f){return this.getImage(f)?(this.imageManager.removeImage(f,this.scope),this._afterImageUpdated(f),this):this.fire(new o.a(new Error("No image with this name exists.")))}_afterImageUpdated(f){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(f),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new o.b("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(f,m,E={}){return this._checkLoaded(),this._validate(yt,`models.${f}`,m,null,E)||(this.modelManager.addModel(f,m,this.scope),this._changes.setDirty()),this}hasModel(f){return this.modelManager.hasModel(f,this.scope)}removeModel(f){return this.hasModel(f)?(this.modelManager.removeModel(f,this.scope),this):this.fire(new o.a(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(f,m,E={}){if(this._checkLoaded(),this.getOwnSource(f)!==void 0)throw new Error(`There is already a source with ID "${f}".`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(un,`sources.${f}`,m,null,E))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const B=ba(f,m,this.dispatcher,this);B.scope=this.scope,B.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(B.id),source:B.serialize(),sourceId:B.id}));const R=k=>{const z=(k?"symbol:":"other:")+B.id,K=o.ag(z,this.scope),J=this._sourceCaches[z]=new uu(K,B,k);(k?this._symbolSourceCaches:this._otherSourceCaches)[B.id]=J,J.onAdd(this.map)};R(!1),m.type!=="vector"&&m.type!=="geojson"||R(!0),B.onAdd&&B.onAdd(this.map),E.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(f){this._checkLoaded();const m=this.getOwnSource(f);if(!m)throw new Error("There is no source with this ID");for(const B in this._layers)if(this._layers[B].source===f)return this.fire(new o.a(new Error(`Source "${f}" cannot be removed while layer "${B}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===f)return this.fire(new o.a(new Error(`Source "${f}" cannot be removed while terrain is using it.`)));const E=this.getOwnSourceCaches(f);for(const B of E){const R=o.c3(B.id);delete this._sourceCaches[R],this._changes.discardSourceCacheUpdate(B.id),B.fire(new o.b("data",{sourceDataType:"metadata",dataType:"source",sourceId:B.getSource().id})),B.setEventedParent(null),B.clearTiles()}return delete this._otherSourceCaches[f],delete this._symbolSourceCaches[f],this.mergeSources(),m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(f,m){this._checkLoaded(),this.getOwnSource(f).setData(m),this._changes.setDirty()}getOwnSource(f){const m=this.getOwnSourceCache(f);return m&&m.getSource()}getOwnSources(){const f=[];for(const m in this._otherSourceCaches){const E=this.getOwnSourceCache(m);E&&f.push(E.getSource())}return f}areTilesLoaded(){const f=this._mergedSourceCaches;for(const m in f){const E=f[m]._tiles;for(const B in E){const R=E[B];if(R.state!=="loaded"&&R.state!=="errored")return!1}}return!0}setLights(f){if(this._checkLoaded(),!f)return delete this.ambientLight,void delete this.directionalLight;const m=this._getTransitionParameters();for(const B of f){if(this._validate(mt,"lights",B))return;switch(B.type){case"ambient":if(this.ambientLight){const R=this.ambientLight;R.set(B),R.updateTransitions(m)}else this.ambientLight=new Fs(B,zr,this.scope,this.options);break;case"directional":if(this.directionalLight){const R=this.directionalLight;R.set(B),R.updateTransitions(m)}else this.directionalLight=new Fs(B,ss,this.scope,this.options)}}const E=new o.K(this.z||0,m);this.ambientLight&&this.ambientLight.recalculate(E),this.directionalLight&&this.directionalLight.recalculate(E),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const f=this.directionalLight,m=this.ambientLight;if(!f||!m)return;const E=he=>.2126*(he[0]<=.03928?he[0]/12.92:Math.pow((he[0]+.055)/1.055,2.4))+.7152*(he[1]<=.03928?he[1]/12.92:Math.pow((he[1]+.055)/1.055,2.4))+.0722*(he[2]<=.03928?he[2]/12.92:Math.pow((he[2]+.055)/1.055,2.4)),B=f.properties.get("color").toArray01(),R=f.properties.get("intensity"),k=f.properties.get("direction"),z=1-o.bQ(k.x,k.y,k.z)[2]/90,K=E(B)*R*z,J=m.properties.get("color").toArray01(),ne=m.properties.get("intensity");return(K+E(J)*ne)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const f=[];return this.directionalLight&&f.push(this.directionalLight.get()),this.ambientLight&&f.push(this.ambientLight.get()),f}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(f){if(!f)return this;if(o.c4(f)){const m=o.c5(f),E=this.fragments.find(({id:R})=>R===m);if(!E)throw new Error(`Style import not found: ${f}`);const B=o.c3(f);return E.style.getFragmentStyle(B)}{const m=this.fragments.find(({id:E})=>E===f);if(!m)throw new Error(`Style import not found: ${f}`);return m.style}}getConfigProperty(f,m){const E=this.getFragmentStyle(f);if(!E)return null;const B=o.ag(m,E.scope),R=E.options.get(B),k=R?R.value||R.default:null;return k?k.serialize():null}setConfigProperty(f,m,E){const B=o.r(E);if(B.result!=="success")return void Ao(this,B.value);const R=B.value.expression,k=this.getFragmentStyle(f);if(!k)return;const z=o.ag(m,k.scope),K=k.options.get(z);K&&(this.options.set(z,{...K,value:R}),this.updateConfigDependencies())}setConfig(f,m){if(this._config=f,f||m)if(m)for(const E in m){let B,R;const k=o.r(m[E].default);if(k.result==="success"&&(B=k.value.expression),f&&f[E]!==void 0){const ye=o.r(f[E]);ye.result==="success"&&(R=ye.value.expression)}const{minValue:z,maxValue:K,stepValue:J,type:ne,values:he}=m[E];if(B){const ye=o.ag(E,this.scope);this.options.set(ye,{default:B,value:R,minValue:z,maxValue:K,stepValue:J,type:ne,values:he})}else this.fire(new o.a(new Error(`No schema defined for config option "${E}".`)))}else this.fire(new o.a(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const f of this._configDependentLayers){const m=this.getLayer(f);m&&(m.possiblyEvaluateVisibility(),this._updateLayer(m))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this._changes.setDirty()}addLayer(f,m,E={}){this._checkLoaded();const B=f.id;if(this._layers[B])return void this.fire(new o.a(new Error(`Layer with id "${B}" already exists on this map`)));let R;if(f.type==="custom"){if(Ao(this,o.c6(f)))return;R=o.c2(f,this.scope,this.options)}else{if(typeof f.source=="object"&&(this.addSource(B,f.source),f=o.c1(f),f=o.e(f,{source:B})),this._validate(it,`layers.${B}`,f,{arrayIndex:-1},E))return;R=o.c2(f,this.scope,this.options),this._validateLayer(R),R.setEventedParent(this,{layer:{id:B}}),this._serializedLayers[R.id]=R.serialize()}R.isConfigDependent&&this._configDependentLayers.add(R.fqid);let k=this._order.length;if(m){const ne=this._order.indexOf(m);if(ne===-1)return void this.fire(new o.a(new Error(`Layer with id "${m}" does not exist on this map.`)));R.slot===this._layers[m].slot?k=ne:o.w(`Layer with id "${m}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(k,0,B),this._layerOrderChanged=!0,this._layers[B]=R;const z=this.getOwnLayerSourceCache(R),K=!!this.directionalLight&&this.directionalLight.shadowsEnabled();z&&R.canCastShadows()&&K&&(z.castsShadows=!0);const J=this._changes.getRemovedLayer(R);if(J&&R.source&&z&&R.type!=="custom"){this._changes.discardLayerRemoval(R);const ne=o.ag(R.source,R.scope);J.type!==R.type?this._changes.updateSourceCache(ne,"clear"):(this._changes.updateSourceCache(ne,"reload"),z.pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map),R.scope=this.scope,this.mergeLayers()}moveLayer(f,m){this._checkLoaded();const E=this._checkLayer(f);if(!E||f===m)return;const B=this._order.indexOf(f);this._order.splice(B,1);let R=this._order.length;if(m){const k=this._order.indexOf(m);if(k===-1)return void this.fire(new o.a(new Error(`Layer with id "${m}" does not exist on this map.`)));E.slot===this._layers[m].slot?R=k:o.w(`Layer with id "${m}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(R,0,f),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(f){this._checkLoaded();const m=this._checkLayer(f);if(!m)return;m.setEventedParent(null);const E=this._order.indexOf(f);this._order.splice(E,1),delete this._layers[f],delete this._serializedLayers[f],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(m.fqid),this._changes.removeLayer(m);const B=this.getOwnLayerSourceCache(m);if(B&&B.castsShadows){let R=!1;for(const k in this._layers)if(this._layers[k].source===m.source&&this._layers[k].canCastShadows()){R=!0;break}B.castsShadows=R}m.onRemove&&m.onRemove(this.map),this.mergeLayers()}getOwnLayer(f){return this._layers[f]}hasLayer(f){return f in this._mergedLayers}hasLayerType(f){for(const m in this._layers)if(this._layers[m].type===f)return!0;return!1}setLayerZoomRange(f,m,E){this._checkLoaded();const B=this._checkLayer(f);B&&(B.minzoom===m&&B.maxzoom===E||(m!=null&&(B.minzoom=m),E!=null&&(B.maxzoom=E),this._updateLayer(B)))}setSlot(f,m){this._checkLoaded();const E=this._checkLayer(f);E&&E.slot!==m&&(E.slot=m,this._updateLayer(E))}setFilter(f,m,E={}){this._checkLoaded();const B=this._checkLayer(f);if(B&&!d(B.filter,m))return m==null?(B.filter=void 0,void this._updateLayer(B)):void(this._validate(bt,`layers.${B.id}.filter`,m,{layerType:B.type},E)||(B.filter=o.c1(m),this._updateLayer(B)))}getFilter(f){const m=this._checkLayer(f);if(m)return o.c1(m.filter)}setLayoutProperty(f,m,E,B={}){this._checkLoaded();const R=this._checkLayer(f);if(R&&!d(R.getLayoutProperty(m),E)){if(E!=null&&(!B||B.validate!==!1)&&Ao(R,St.call(Zt,{key:`layers.${f}.layout.${m}`,layerType:R.type,objectKey:m,value:E,styleSpec:o.D,style:{glyphs:!0,sprite:!0}})))return;R.setLayoutProperty(m,E),R.isConfigDependent&&this._configDependentLayers.add(R.fqid),this._updateLayer(R)}}getLayoutProperty(f,m){const E=this._checkLayer(f);if(E)return E.getLayoutProperty(m)}setPaintProperty(f,m,E,B={}){this._checkLoaded();const R=this._checkLayer(f);if(!R||d(R.getPaintProperty(m),E)||E!=null&&(!B||B.validate!==!1)&&Ao(R,Qe.call(Zt,{key:`layers.${f}.paint.${m}`,layerType:R.type,objectKey:m,value:E,styleSpec:o.D})))return;const k=R.setPaintProperty(m,E);R.isConfigDependent&&this._configDependentLayers.add(R.fqid),k&&this._updateLayer(R),this._changes.updatePaintProperties(R)}getPaintProperty(f,m){const E=this._checkLayer(f);if(E)return E.getPaintProperty(m)}setFeatureState(f,m){this._checkLoaded();const E=f.source,B=f.sourceLayer,R=this._checkSource(E);if(!R)return;const k=R.type;if(k==="geojson"&&B)return void this.fire(new o.a(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(k==="vector"&&!B)return void this.fire(new o.a(new Error("The sourceLayer parameter must be provided for vector source types.")));f.id===void 0&&this.fire(new o.a(new Error("The feature id parameter must be provided.")));const z=this.getOwnSourceCaches(E);for(const K of z)K.setFeatureState(B,f.id,m)}removeFeatureState(f,m){this._checkLoaded();const E=f.source,B=this._checkSource(E);if(!B)return;const R=B.type,k=R==="vector"?f.sourceLayer:void 0;if(R==="vector"&&!k)return void this.fire(new o.a(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof f.id!="string"&&typeof f.id!="number")return void this.fire(new o.a(new Error("A feature id is required to remove its specific state property.")));const z=this.getOwnSourceCaches(E);for(const K of z)K.removeFeatureState(k,f.id,m)}getFeatureState(f){this._checkLoaded();const m=f.source,E=f.sourceLayer,B=this._checkSource(m);if(B){if(B.type!=="vector"||E)return f.id===void 0&&this.fire(new o.a(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(m)[0].getFeatureState(E,f.id);this.fire(new o.a(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(f){return this.stylesheet.transition=o.e({},this.stylesheet.transition,f),this.transition=this.stylesheet.transition,this}getTransition(){return o.e({},this.stylesheet.transition)}serialize(){this._checkLoaded();const f=this.getTerrain(),m=f&&this.terrain&&this.terrain.scope===this.scope?f:this.stylesheet.terrain;return o.c7({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:m,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},E=>E!==void 0)}_updateLayer(f){this._changes.updateLayer(f);const m=this.getLayerSourceCache(f),E=o.ag(f.source,f.scope),B=this._changes.getUpdatedSourceCaches();f.source&&!B[E]&&m&&m.getSource().type!=="raster"&&(this._changes.updateSourceCache(E,"reload"),m.pause()),f.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(f){const m=z=>this._mergedLayers[z].type==="fill-extrusion"||this._mergedLayers[z].type==="model",E=this.order,B={},R=[];for(let z=E.length-1;z>=0;z--){const K=E[z];if(m(K)){B[K]=z;for(const J of f){const ne=J[K];if(ne)for(const he of ne)R.push(he)}}}R.sort((z,K)=>K.intersectionZ-z.intersectionZ);const k=[];for(let z=E.length-1;z>=0;z--){const K=E[z];if(m(K))for(let J=R.length-1;J>=0;J--){const ne=R[J].feature;if(B[ne.layer.id]<z)break;k.push(ne),R.pop()}else for(const J of f){const ne=J[K];if(ne)for(const he of ne)k.push(he.feature)}}return k}queryRenderedFeatures(f,m,E){m&&m.filter&&this._validate(bt,"queryRenderedFeatures.filter",m.filter,null,m),m.scope=this.scope,m.availableImages=this._availableImages,m.serializedLayers=this._serializedLayers;const B={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new o.a(new Error("parameters.layers must be an Array."))),[];for(const J of m.layers){const ne=this._mergedLayers[J];if(!ne)return this.fire(new o.a(new Error(`The layer '${J}' does not exist in the map's style and cannot be queried for features.`))),[];B[ne.source]=!0}}const R=[],k=m.serializedLayers||{},z=m&&m.layers?m.layers.some(J=>{const ne=this.getLayer(J);return ne&&ne.is3D()}):this.has3DLayers(),K=Zi.createFromScreenPoints(f,E);for(const J in this._mergedSourceCaches){const ne=this._mergedSourceCaches[J].getSource();if(!ne||ne.scope!==m.scope)continue;const he=this._mergedSourceCaches[J].getSource().id;m.layers&&!B[he]||R.push(Op(this._mergedSourceCaches[J],this._mergedLayers,k,K,m,E,z,!!this.map._showQueryGeometry))}return this.placement&&R.push(function(J,ne,he,ye,we,Oe,Fe){const De={},Ee=Oe.queryRenderedSymbols(ye),Ke=[];for(const lt of Object.keys(Ee).map(Number))Ke.push(Fe[lt]);Ke.sort(Wd);for(const lt of Ke){const Ze=lt.featureIndex.lookupSymbolFeatures(Ee[lt.bucketInstanceId],ne,lt.bucketIndex,lt.sourceLayerIndex,we.filter,we.layers,we.availableImages,J);for(const ct in Ze){const Ve=De[ct]=De[ct]||[],ut=Ze[ct];ut.sort((Ct,Lt)=>{const $t=lt.featureSortOrder;if($t){const pn=$t.indexOf(Ct.featureIndex);return $t.indexOf(Lt.featureIndex)-pn}return Lt.featureIndex-Ct.featureIndex});for(const Ct of ut)Ve.push(Ct)}}for(const lt in De)De[lt].forEach(Ze=>{const ct=Ze.feature,Ve=he(J[lt]);if(!Ve)return;const ut=Ve.getFeatureState(ct.layer["source-layer"],ct.id);ct.source=ct.layer.source,ct.layer["source-layer"]&&(ct.sourceLayer=ct.layer["source-layer"]),ct.state=ut});return De}(this._mergedLayers,k,this.getLayerSourceCache.bind(this),K.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(f,m){m&&m.filter&&this._validate(bt,"querySourceFeatures.filter",m.filter,null,m);const E=this.getOwnSourceCaches(f);let B=[];for(const R of E)B=B.concat(cu(R,m));return B}addSourceType(f,m,E){return Tc.getSourceType(f)?E(new Error(`A source type called "${f}" already exists.`)):(Tc.setSourceType(f,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:m.workerSourceURL},E):E(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(f,m,E={}){this._checkLoaded();const B=this.light.getLight();let R=!1;for(const z in f)if(!d(f[z],B[z])){R=!0;break}if(!R)return;const k=this._getTransitionParameters();this.light.setLight(f,m,E),this.light.updateTransitions(k)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(f,m=1){if(this._checkLoaded(),!f)return this.terrainSetForDrapingOnly()&&m!==0||delete this.terrain,f===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let E=f;const B=f.source==null;if(m===1){if(typeof E.source=="object"){const z="terrain-dem-src";this.addSource(z,E.source),E=o.c1(E),E=o.e(E,{source:z})}const R=o.e({},E),k={};if(this.terrain&&B){R.source=this.terrain.get().source;const z=this.terrain?this.getFragmentStyle(this.terrain.scope):null;z&&(k.style=z.serialize())}if(this._validate(Be,"terrain",R,k))return}if(!this.terrain||this.terrain.scope!==this.scope&&!B||this.terrain&&m!==this.terrain.drapeRenderMode){if(!E)return;this._createTerrain(E,m),this.fire(new o.b("data",{dataType:"style"}))}else{const R=this.terrain,k=R.get();for(const z of Object.keys(o.D.terrain))!E.hasOwnProperty(z)&&o.D.terrain[z].default&&(E[z]=o.D.terrain[z].default);for(const z in f)if(!d(f[z],k[z])){R.set(f,this.options),this.stylesheet.terrain=f;const K=this._getTransitionParameters({duration:0});R.updateTransitions(K),this.fire(new o.b("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(f){const m=this.fog=new is(f,this.map.transform,this.scope,this.options);this.stylesheet.fog=m.get();const E=this._getTransitionParameters({duration:0});m.updateTransitions(E)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const f of this.map._markers)f._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(f){if(this._checkLoaded(),!f)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog;if(!d(m.get(),f)){m.set(f,this.options),this.stylesheet.fog=m.get();const E=this._getTransitionParameters({duration:0});m.updateTransitions(E)}}else this._createFog(f);this._markersNeedUpdate=!0}_getTransitionParameters(f){return{now:o.f.now(),transition:o.e(this.transition,f)}}updateDrapeFirstLayers(){if(!this.terrain)return;const f=[],m=[];for(const E in this._mergedLayers)this.isLayerDraped(this._mergedLayers[E])?f.push(E):m.push(E);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...f),this._drapedFirstOrder.push(...m)}_createTerrain(f,m){const E=this.terrain=new rr(f,m,this.scope,this.options);m===1&&(this.stylesheet.terrain=f),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const B=this._getTransitionParameters({duration:0});E.updateTransitions(B)}_force3DLayerUpdate(){for(const f in this._layers){const m=this._layers[f];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const f in this._layers){const m=this._layers[f];m.type==="symbol"&&this._updateLayer(m)}}_validate(f,m,E,B,R={}){if(R&&R.validate===!1)return!1;const k=o.e({},this.serialize());return Ao(this,f.call(Zt,o.e({key:m,style:k,value:E,styleSpec:o.D},B)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.c8.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._mergedLayers)this._mergedLayers[f].setEventedParent(null);for(const f in this._mergedSourceCaches)this._mergedSourceCaches[f].clearTiles(),this._mergedSourceCaches[f].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(f){const m=this.getSourceCaches(f);for(const E of m)E.clearTiles()}clearSources(){for(const f in this._mergedSourceCaches)this._mergedSourceCaches[f].clearTiles()}reloadSource(f){const m=this.getSourceCaches(f);for(const E of m)E.resume(),E.reload()}reloadSources(){for(const f of this.getSources())f.reload&&f.reload()}updateSources(f){let m;this.directionalLight&&(m=Gf(this.directionalLight));for(const E in this._mergedSourceCaches)this._mergedSourceCaches[E].update(f,void 0,void 0,m)}_generateCollisionBoxes(){for(const f in this._sourceCaches){const m=this._sourceCaches[f];m.resume(),m.reload()}}_updatePlacement(f,m,E,B,R=!1){let k=!1,z=!1;const K={},J={};for(const ne of this._mergedOrder){const he=this._mergedLayers[ne];if(he.type!=="symbol")continue;const ye=o.ag(he.source,he.scope);let we=K[ye];if(!we){const Fe=this.getLayerSourceCache(he);if(!Fe)continue;const De=Fe.getRenderableIds(!0).map(Ee=>Fe.getTileByID(Ee));J[ye]=De.slice(),we=K[ye]=De.sort((Ee,Ke)=>Ke.tileID.overscaledZ-Ee.tileID.overscaledZ||(Ee.tileID.isLessThan(Ke.tileID)?-1:1))}const Oe=this.crossTileSymbolIndex.addLayer(he,we,f.center.lng,f.projection);k=k||Oe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),R=R||this._layerOrderChanged||E===0,this._layerOrderChanged&&this.fire(new o.b("neworder")),(R||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.f.now(),f.zoom))&&(this.pauseablePlacement=new Gp(f,this._mergedOrder,R,m,E,B,this.placement,this.fog&&f.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,K,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.f.now()),z=!0),k&&this.pauseablePlacement.placement.setStale()),z||k){this._buildingIndex.onNewFrame(f.zoom);for(const ne of this._mergedOrder){const he=this._mergedLayers[ne];he.type==="symbol"&&this.placement.updateLayerOpacities(he,K[o.ag(he.source,he.scope)])}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.f.now())}_releaseSymbolFadeTiles(){for(const f in this._sourceCaches)this._sourceCaches[f].releaseSymbolFadeTiles()}addImport(f,m){this._checkLoaded();const E=this.stylesheet.imports=this.stylesheet.imports||[];if(E.findIndex(({id:R})=>R===f.id)!==-1)return this.fire(new o.a(new Error(`Import with id '${f.id}' already exists in the map's style.`)));if(!m)return E.push(f),this._loadImports([f],!0),this;const B=E.findIndex(({id:R})=>R===m);return B===-1?this.fire(new o.a(new Error(`Import with id "${m}" does not exist on this map.`))):(this.stylesheet.imports=E.slice(0,B).concat(f).concat(E.slice(B)),this._loadImports([f],!0,m),this)}updateImport(f,m){this._checkLoaded();const E=this.stylesheet.imports||[],B=this.getImportIndex(f);return B===-1?this:typeof m=="string"?(this.setImportUrl(f,m),this):(m.url&&m.url!==E[B].url&&this.setImportUrl(f,m.url),d(m.config,E[B].config)||this.setImportConfig(f,m.config),d(m.data,E[B].data)||this.setImportData(f,m.data),this)}moveImport(f,m){this._checkLoaded();let E=this.stylesheet.imports||[];const B=this.getImportIndex(f);if(B===-1)return this;const R=this.getImportIndex(m);if(R===-1)return this;const k=E[B],z=this.fragments[B];return E=E.filter(({id:K})=>K!==f),this.fragments=this.fragments.filter(({id:K})=>K!==f),this.stylesheet.imports=E.slice(0,R).concat(k).concat(E.slice(R)),this.fragments=this.fragments.slice(0,R).concat(z).concat(this.fragments.slice(R)),this.mergeLayers(),this}setImportUrl(f,m){this._checkLoaded();const E=this.stylesheet.imports||[],B=this.getImportIndex(f);if(B===-1)return this;E[B].url=m;const R=this.fragments[B];return R.style=this._createFragmentStyle(E[B]),R.style.on("style.import.load",()=>this.mergeAll()),R.style.loadURL(m),this}setImportData(f,m){this._checkLoaded();const E=this.getImportIndex(f),B=this.stylesheet.imports||[];return E===-1?this:m?(this.fragments[E].style.setState(m),this._reloadImports(),this):(delete B[E].data,this.setImportUrl(f,B[E].url))}setImportConfig(f,m){this._checkLoaded();const E=this.getImportIndex(f),B=this.stylesheet.imports||[];if(E===-1)return this;m?B[E].config=m:delete B[E].config;const R=this.fragments[E],k=R.style.stylesheet&&R.style.stylesheet.schema;return R.config=m,R.style.setConfig(m,k),this.updateConfigDependencies(),this}removeImport(f){this._checkLoaded();const m=this.stylesheet.imports||[],E=this.getImportIndex(f);return E===-1||(m.splice(E,1),this.fragments[E].style._remove(),this.fragments.splice(E,1),this._reloadImports()),this}getImportIndex(f){const m=(this.stylesheet.imports||[]).findIndex(E=>E.id===f);return m===-1&&this.fire(new o.a(new Error(`Import '${f}' does not exist in the map's style and cannot be updated.`))),m}getLayer(f){return this._mergedLayers[f]}getSources(){const f=[];for(const m in this._mergedOtherSourceCaches){const E=this._mergedOtherSourceCaches[m];E&&f.push(E.getSource())}return f}getSource(f,m){const E=this.getSourceCache(f,m);return E&&E.getSource()}getLayerSource(f){const m=this.getLayerSourceCache(f);return m&&m.getSource()}getSourceCache(f,m){const E=o.ag(f,m);return this._mergedOtherSourceCaches[E]}getLayerSourceCache(f){const m=o.ag(f.source,f.scope);return f.type==="symbol"?this._mergedSymbolSourceCaches[m]:this._mergedOtherSourceCaches[m]}getSourceCaches(f){const m=[];return this._mergedOtherSourceCaches[f]&&m.push(this._mergedOtherSourceCaches[f]),this._mergedSymbolSourceCaches[f]&&m.push(this._mergedSymbolSourceCaches[f]),m}updateSourceCaches(){const f=this._changes.getUpdatedSourceCaches();for(const m in f){const E=f[m];E==="reload"?this.reloadSource(m):E==="clear"&&this.clearSource(m)}}updateLayers(f){const m=this._changes.getUpdatedPaintProperties();for(const E of m){const B=this.getLayer(E);B&&B.updateTransitions(f)}}getImages(f,m,E){this.imageManager.getImages(m.icons,m.scope,E),this._updateTilesForChangedImages();const B=R=>{R&&R.setDependencies(m.tileID.key,m.type,m.icons)};B(this._otherSourceCaches[m.source]),B(this._symbolSourceCaches[m.source])}getGlyphs(f,m,E){this.glyphManager.getGlyphs(m.stacks,m.scope,E)}getResource(f,m,E){return o.c9(m,E)}getOwnSourceCache(f){return this._otherSourceCaches[f]}getOwnLayerSourceCache(f){return f.type==="symbol"?this._symbolSourceCaches[f.source]:this._otherSourceCaches[f.source]}getOwnSourceCaches(f){const m=[];return this._otherSourceCaches[f]&&m.push(this._otherSourceCaches[f]),this._symbolSourceCaches[f]&&m.push(this._symbolSourceCaches[f]),m}_isSourceCacheLoaded(f){const m=this.getOwnSourceCaches(f);return m.length===0?(this.fire(new o.a(new Error(`There is no source with ID '${f}'`))),!1):m.every(E=>E.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(f=>{f.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Tc.getSourceType=function(w){return xc[w]},Tc.setSourceType=function(w,f){xc[w]=f},Tc.registerForPluginStateChange=o.bV;var jp=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Mm=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,Lm=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Rm="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",C0=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,E0=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,D_=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,jf=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,nf=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform vec2 u_velocity_res;uniform float u_max_speed;const vec2 INVALID_VELOCITY=vec2(-1);uniform vec2 u_texture_offset;uniform float u_data_offset;uniform vec4 u_data_scale;vec2 lookup_velocity(vec2 uv) {uv=u_texture_offset.x+u_texture_offset.y*uv;vec2 fxy;ivec4 c=_raTexLinearCoord(uv,u_velocity_res,fxy);vec4 tl=texelFetch(u_velocity,c.yz,0);vec4 tr=texelFetch(u_velocity,c.xz,0);vec4 bl=texelFetch(u_velocity,c.yw,0);vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NODATA) {return INVALID_VELOCITY;}if (tr==NODATA) {return INVALID_VELOCITY;}if (bl==NODATA) {return INVALID_VELOCITY;}if (br==NODATA) {return INVALID_VELOCITY;}vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);
#ifdef DATA_FORMAT_UINT32
vec2 velocity=vec2(u_data_offset+dot(t,u_data_scale),0);return velocity;
#else
vec2 velocity=vec2(u_data_offset+dot(t.rg,u_data_scale.yx),-(u_data_offset+dot(t.ba,u_data_scale.yx)));
#endif
return velocity/max(u_max_speed,length(velocity));}
#endif`,jc=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Ic=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const rf=[];sf(jp,rf),sf(Lm,rf),sf(Mm,rf);const Bc={"_prelude_fog.vertex.glsl":E0,"_prelude_terrain.vertex.glsl":C0,"_prelude_shadow.vertex.glsl":jc,"_prelude_fog.fragment.glsl":D_,"_prelude_shadow.fragment.glsl":Ic,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":jf,"_prelude_raster_particle.glsl":nf},Kp={};ds("",C0),ds(D_,E0),ds(Ic,jc),ds(jf,""),ds(nf,"");const ug=ds(Mm,Lm),Wp=jp;var Pm={background:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ds("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ds(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ds(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ds("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ds("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ds("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:ds(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:ds(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:ds(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:ds(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;vec2 uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
vec2 uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:ds("precision highp float;uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`precision highp float;
#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {vec2 pos=a_pos.xy+u_tile_offset;vec2 tex_coords=fract(pos);gl_PointSize=1.0;vec2 velocity=lookup_velocity(tex_coords);if (velocity==INVALID_VELOCITY) {v_particle_speed=0.0;gl_Position=vec4(2.0,2.0,2.0,1.0);} else {v_particle_speed=length(velocity);gl_Position=vec4(2.0*pos-vec2(1.0),0.0,1.0);}}`),rasterParticleTexture:ds("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {v_tex_pos=0.5*a_pos+vec2(0.5);gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:ds("void main() {}",`#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform float u_speed_factor;uniform float u_lifetime_delta;uniform float u_rand_seed;out vec3 v_new_particle;const vec3 rand_constants=vec3(12.9898,78.233,4375.85453);float rand(const vec2 co) {float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {float lifetime=a_pos.z;vec2 pos=a_pos.xy;vec2 uv=clamp(pos,vec2(0.0),vec2(1.0));vec2 velocity=lookup_velocity(uv);float next_lifetime=lifetime-u_lifetime_delta;float t=step(0.0,next_lifetime);
#ifdef DATA_FORMAT_UINT32
vec2 dp=vec2(0);
#else
vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;
#endif
vec2 seed=pos*u_rand_seed;vec2 next_pos=pos+dp;vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));v_new_particle=vec3(
vec2(mix(random_pos,next_pos,t)),mix(1.0,next_lifetime,t)
);}`),symbolIcon:ds(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:ds(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:ds(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:ds("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:ds(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Rm),skyboxGradient:ds(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Rm),skyboxCapture:ds(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ds(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:ds(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:ds(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:ds(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function sf(w,f){const m=w.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let E of m)if(E=E.trim(),E[0]==="#"&&E.includes("if")&&!E.includes("endif")){E=E.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const B=E.split(" ");for(const R of B)f.includes(R)||f.push(R)}}function ds(w,f){const m=/#include\s+"([^"]+)"/g,E=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let B=f.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);B&&(B=B.map(J=>{const ne=J.split(" ");return ne[ne.length-1]}),B=[...new Set(B)]);const R={},k=[],z=[];if(w=w.replace(m,(J,ne)=>(z.push(ne),"")),(f=f.replace(m,(J,ne)=>(k.push(ne),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let K=[...rf];sf(w,K),sf(f,K);for(const J of[...k,...z])Bc[J]||console.error(`Undefined include: ${J}`),Kp[J]||(Kp[J]=[],sf(Bc[J],Kp[J])),K=[...K,...Kp[J]];return{fragmentSource:w=w.replace(E,(J,ne,he,ye,we)=>(R[we]=!0,ne==="define"?`
#ifndef HAS_UNIFORM_u_${we}
in ${he} ${ye} ${we};
#else
uniform ${he} ${ye} u_${we};
#endif
`:ne==="initialize"?`
#ifdef HAS_UNIFORM_u_${we}
    ${he} ${ye} ${we} = u_${we};
#endif
`:ne==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${we}
    in ${he} ${ye} ${we};
#endif
`:ne==="initialize-attribute"?"":void 0)),vertexSource:f=f.replace(E,(J,ne,he,ye,we)=>{const Oe=ye==="float"?"vec2":ye,Fe=we.match(/color/)?"color":Oe;return ne==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${we}
in ${he} ${ye} a_${we};
#endif
`:R[we]?ne==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
in ${he} ${Oe} a_${we};
out ${he} ${ye} ${we};
#else
uniform ${he} ${ye} u_${we};
#endif
`:ne==="initialize"?Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = a_${we};
#else
    ${he} ${ye} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = unpack_mix_${Fe}(a_${we}, u_${we}_t);
#else
    ${he} ${ye} ${we} = u_${we};
#endif
`:ne==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${we}
    in ${he} ${ye} a_${we};
    out ${he} ${ye} ${we};
#endif
`:ne==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${we}
    ${we} = a_${we};
#endif
`:void 0:ne==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
in ${he} ${Oe} a_${we};
#else
uniform ${he} ${ye} u_${we};
#endif
`:ne==="define-instanced"?Fe==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${we}0;
in vec4 a_${we}1;
in vec4 a_${we}2;
in vec4 a_${we}3;
#else
uniform ${he} ${ye} u_${we};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${he} ${Oe} a_${we};
#else
uniform ${he} ${ye} u_${we};
#endif
`:ne==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${we}
    ${he} ${ye} ${we} = a_${we};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${he} ${ye} ${we} = a_${we};
#else
    ${he} ${ye} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${he} ${ye} ${we} = unpack_mix_${Fe}(a_${we}, u_${we}_t);
#else
    ${he} ${ye} ${we} = u_${we};
#endif
`}),staticAttributes:B,usedDefines:K,vertexIncludes:k,fragmentIncludes:z}}class Fm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(f,m,E,B,R,k,z,K){this.context=f;let J=this.boundPaintVertexBuffers.length!==B.length;for(let he=0;!J&&he<B.length;he++)this.boundPaintVertexBuffers[he]!==B[he]&&(J=!0);let ne=this.boundDynamicVertexBuffers.length!==z.length;for(let he=0;!ne&&he<z.length;he++)this.boundDynamicVertexBuffers[he]!==z[he]&&(ne=!0);if(!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==E||J||ne||this.boundIndexBuffer!==R||this.boundVertexOffset!==k)this.freshBind(m,E,B,R,k,z,K);else{f.bindVertexArrayOES.set(this.vao);for(const he of z)he&&(he.bind(),K&&he.instanceCount&&he.setVertexAttribDivisor(f.gl,m,K));R&&R.dynamicDraw&&R.bind()}}freshBind(f,m,E,B,R,k,z){const K=f.numAttributes,J=this.context,ne=J.gl;this.vao&&this.destroy(),this.vao=J.gl.createVertexArray(),J.bindVertexArrayOES.set(this.vao),this.boundProgram=f,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=E,this.boundIndexBuffer=B,this.boundVertexOffset=R,this.boundDynamicVertexBuffers=k,m.enableAttributes(ne,f),m.bind(),m.setVertexAttribPointers(ne,f,R);for(const he of E)he.enableAttributes(ne,f),he.bind(),he.setVertexAttribPointers(ne,f,R);for(const he of k)he&&(he.enableAttributes(ne,f),he.bind(),he.setVertexAttribPointers(ne,f,R),z&&he.instanceCount&&he.setVertexAttribDivisor(ne,f,z));B&&B.bind(),J.currentNumAttributes=K}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function S0(w,f){const m=Math.pow(2,f.canonical.z),E=f.canonical.y;return[new o.L(0,E/m).toLngLat().lat,new o.L(0,(E+1)/m).toLngLat().lat]}function hg(w,f,m,E,B,R,k){const z=w.context,K=z.gl,J=m.hillshadeFBO;if(!J)return;w.prepareDrawTile();const ne=w.isTileAffectedByFog(f),he=w.getOrCreateProgram("hillshade",{overrideFog:ne});z.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,J.colorAttachment.get());const ye=((De,Ee,Ke,lt)=>{const Ze=Ke.paint.get("hillshade-shadow-color"),ct=Ke.paint.get("hillshade-highlight-color"),Ve=Ke.paint.get("hillshade-accent-color"),ut=Ke.paint.get("hillshade-emissive-strength");let Ct=o.bj(Ke.paint.get("hillshade-illumination-direction"));if(Ke.paint.get("hillshade-illumination-anchor")==="viewport")Ct-=De.transform.angle;else if(De.style&&De.style.enable3dLights()&&De.style.directionalLight){const $t=De.style.directionalLight.properties.get("direction"),pn=o.bQ($t.x,$t.y,$t.z);Ct=o.bj(pn[1])}const Lt=!De.options.moving;return{u_matrix:lt||De.transform.calculateProjMatrix(Ee.tileID.toUnwrapped(),Lt),u_image:0,u_latrange:S0(0,Ee.tileID),u_light:[Ke.paint.get("hillshade-exaggeration"),Ct],u_shadow:Ze,u_highlight:ct,u_emissive_strength:ut,u_accent:Ve}})(w,m,E,w.terrain?f.projMatrix:null);w.uploadCommonUniforms(z,he,f.toUnwrapped());const{tileBoundsBuffer:we,tileBoundsIndexBuffer:Oe,tileBoundsSegments:Fe}=w.getTileBoundsBuffers(m);he.draw(w,K.TRIANGLES,B,R,k,Yr.disabled,ye,E.id,we,Oe,Fe)}function uw(w,f,m){if(!f.needsDEMTextureUpload)return;const E=w.context,B=E.gl;E.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||w.getTileTexture(m.stride);const R=m.getPixels();f.demTexture?f.demTexture.update(R,{premultiply:!1}):f.demTexture=new o.T(E,R,B.R32F,{premultiply:!1}),f.needsDEMTextureUpload=!1}function U_(w,f,m){const E=w.context,B=E.gl;if(!f.dem)return;const R=f.dem;if(E.activeTexture.set(B.TEXTURE1),uw(w,f,R),!f.demTexture)return;f.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);const k=R.dim;E.activeTexture.set(B.TEXTURE0);let z=f.hillshadeFBO;if(!z){const ye=new o.T(E,{width:k,height:k,data:null},B.RGBA);ye.bind(B.LINEAR,B.CLAMP_TO_EDGE),z=f.hillshadeFBO=E.createFramebuffer(k,k,!0,"renderbuffer"),z.colorAttachment.set(ye.texture)}E.bindFramebuffer.set(z.framebuffer),E.viewport.set([0,0,k,k]);const{tileBoundsBuffer:K,tileBoundsIndexBuffer:J,tileBoundsSegments:ne}=w.getMercatorTileBoundsBuffers(),he=[];w.linearFloatFilteringSupported()&&he.push("TERRAIN_DEM_FLOAT_FORMAT"),w.getOrCreateProgram("hillshadePrepare",{defines:he}).draw(w,B.TRIANGLES,ir.disabled,di.disabled,Ui.unblended,Yr.disabled,((ye,we)=>{const Oe=we.stride,Fe=o.a6.create();return o.a6.ortho(Fe,0,o.V,-o.V,0,0,1),o.a6.translate(Fe,Fe,[0,-o.V,0]),{u_matrix:Fe,u_image:1,u_dimension:[Oe,Oe],u_zoom:ye.overscaledZ}})(f.tileID,R),m.id,K,J,ne),f.needsHillshadePrepare=!1}const z_=w=>({u_matrix:new o.bK(w),u_image0:new o.bO(w),u_skirt_height:new o.bN(w),u_ground_shadow_factor:new o.bM(w)}),T0=(w,f,m)=>({u_matrix:w,u_image0:0,u_skirt_height:f,u_ground_shadow_factor:m}),hw=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe)=>({u_proj_matrix:Float32Array.from(w),u_globe_matrix:f,u_normalize_matrix:Float32Array.from(E),u_merc_matrix:m,u_zoom_transition:B,u_merc_center:R,u_image0:0,u_frustum_tl:k,u_frustum_tr:z,u_frustum_br:K,u_frustum_bl:J,u_globe_pos:ne,u_globe_radius:he,u_viewport:ye,u_grid_matrix:Fe?Float32Array.from(Fe):new Float32Array(9),u_skirt_height:we,u_far_z_cutoff:Oe});function Om(w,f){return w!=null&&f!=null&&!(!w.hasData()||!f.hasData())&&w.demTexture!=null&&f.demTexture!=null&&w.tileID.key!==f.tileID.key}const dg=new class{constructor(){this.operations={}}newMorphing(w,f,m,E,B){if(w in this.operations){const R=this.operations[w];R.to.tileID.key!==m.tileID.key&&(R.queued=m)}else this.operations[w]={startTime:E,phase:0,duration:B,from:f,to:m,queued:null}}getMorphValuesForProxy(w){if(!(w in this.operations))return null;const f=this.operations[w];return{from:f.from,to:f.to,phase:f.phase}}update(w){for(const f in this.operations){const m=this.operations[f];for(m.phase=(w-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,w)){delete this.operations[f];break}}}_nextOp(w,f){return!!w.queued&&(w.from=w.to,w.to=w.queued,w.queued=null,w.phase=0,w.startTime=f,!0)}_validOp(w){return w.from.hasData()&&w.to.hasData()}},$_={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Nm(w,f,m){if(f===0)return 0;const E=f<1&&m===514?.25/f:1;return 6*Math.pow(1.5,22-w)*Math.max(f,1)*E}function Kf(w,f){const m=1<<w.z;return!f&&(w.x===0||w.x===m-1)||w.y===0||w.y===m-1}const qp=w=>({u_matrix:w});function V_(w,f,m,E,B){if(B>0){const R=o.f.now(),k=(R-w.timeAdded)/B,z=f?(R-f.timeAdded)/B:-1,K=m.getSource(),J=E.coveringZoomLevel({tileSize:K.tileSize,roundZoom:K.roundZoom}),ne=!f||Math.abs(f.tileID.overscaledZ-J)>Math.abs(w.tileID.overscaledZ-J),he=ne&&w.refreshedUponExpiration?1:o.aa(ne?k:1-z,0,1);return w.refreshedUponExpiration&&k>=1&&(w.refreshedUponExpiration=!1),f?{opacity:1,mix:1-he}:{opacity:he,mix:0}}return{opacity:1,mix:0}}class YE extends uu{constructor(f){const m={type:"raster-dem",maxzoom:f.transform.maxZoom},E=new o.bW(o.bX(),null),B=ba("mock-dem",m,E,f.style);super("mock-dem",B,!1),B.setEventedParent(this),this._sourceLoaded=!0}_loadTile(f,m){f.state="loaded",m(null)}}class dw extends uu{constructor(f){const m=ba("proxy",{type:"geojson",maxzoom:f.transform.maxZoom},new o.bW(o.bX(),null),f.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=f,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(f,m,E){if(f.freezeTileCoverage)return;this.transform=f;const B=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((R,k)=>{if(R[k.key]="",!this._tiles[k.key]){const z=new lu(k,this._source.tileSize*k.overscaleFactor(),f.tileZoom);z.state="loaded",this._tiles[k.key]=z}return R},{});for(const R in this._tiles)R in B||(this.freeFBO(R),this._tiles[R].unloadVectorData(),delete this._tiles[R])}freeFBO(f){const m=this.proxyCachedFBO[f];if(m!==void 0){const E=Object.values(m);this.renderCachePool.push(...E),delete this.proxyCachedFBO[f]}}deallocRenderCache(){this.renderCache.forEach(f=>f.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class fw extends o.am{constructor(f,m,E){super(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y),this.proxyTileKey=m,this.projMatrix=E}}class XE extends o.ck{constructor(f,m){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},f.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),f.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),f.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=f,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[E,B,R]=function(K){const J=new o.aN,ne=new o.aw,he=131;J.reserve(17161),ne.reserve(33800);const ye=o.V/128,we=o.V+ye/2,Oe=we+ye;for(let De=-ye;De<Oe;De+=ye)for(let Ee=-ye;Ee<Oe;Ee+=ye){const Ke=Ee<0||Ee>we||De<0||De>we?24575:0,lt=o.aa(Math.round(Ee),0,o.V),Ze=o.aa(Math.round(De),0,o.V);J.emplaceBack(lt+Ke,Ze)}const Fe=(De,Ee)=>{const Ke=Ee*he+De;ne.emplaceBack(Ke+1,Ke,Ke+he),ne.emplaceBack(Ke+he,Ke+he+1,Ke+1)};for(let De=1;De<129;De++)for(let Ee=1;Ee<129;Ee++)Fe(Ee,De);return[0,129].forEach(De=>{for(let Ee=0;Ee<130;Ee++)Fe(Ee,De),Fe(De,Ee)}),[J,ne,32768]}(),k=f.context;this.gridBuffer=k.createVertexBuffer(E,o.aP.members),this.gridIndexBuffer=k.createIndexBuffer(B),this.gridSegments=o.aB.simpleSegment(0,0,E.length,B.length),this.gridNoSkirtSegments=o.aB.simpleSegment(0,0,E.length,R),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new dw(m.map),this.orthoMatrix=o.a6.create(),o.a6.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.V,0,o.V,0,1);const z=k.gl;this._overlapStencilMode=new di({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=f.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new YE(m.map),this._pendingGroundEffectLayers=[]}set style(f){f.on("data",this._onStyleDataEvent.bind(this)),this._style=f,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(f,m,E){if(f&&f.terrain){this._style!==f&&(this.style=f,this._evaluationZoom=void 0);const B=f.terrain.properties,R=f.terrain.drapeRenderMode===0,k=f.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=o.f.now();const z=f.terrain&&f.terrain.scope,K=B.get("source"),J=R?this._mockSourceCache:f.getSourceCache(K,z);if(!J)return void o.w(`Couldn't find terrain source "${K}".`);if(this.sourceCache=J,this._exaggeration=k?this.calculateExaggeration(m):B.get("exaggeration"),!m.projection.requiresDraping&&k&&this._exaggeration===0)return void this._disable();this.enabled=!0;const ne=()=>{this.sourceCache.used&&o.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const he=this.getScaledDemTileSize();this.sourceCache.update(m,he,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,ne(),this._initializing=!0),ne(),m.updateElevation(!0,E),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0,this._previousZoom=m.zoom}else this._disable()}calculateExaggeration(f){const m=this._previousCameraAltitude,E=f.getFreeCameraOptions().position.z/f.pixelsPerMeter*f.worldSize;this._previousCameraAltitude=E;const B=m!=null?E-m:Number.MAX_VALUE;if(Math.abs(B)<2)return this._exaggeration;const R=f.zoom,k=this._style.terrain;if(!this._previousUpdateTimestamp)return k.getExaggeration(R);let z=R-this._previousZoom;const K=this._previousUpdateTimestamp;let J=R;this._evaluationZoom!=null&&(J=this._evaluationZoom,Math.abs(R-J)>.5&&(z=.5*(R-J+z)),z*B<0&&(J+=z)),this._evaluationZoom=J;const ne=k.getExaggeration(J),he=ne===k.getExaggeration(Math.max(0,J-.1));if(he&&Math.abs(ne-this._exaggeration)<.01)return ne;let ye=Math.min(.1,.00375*(this._updateTimestamp-K));return(he||ne<.1||Math.abs(z)<1e-4)&&(ye=Math.min(.2,4*ye)),o.U(this._exaggeration,ne,ye)}resetTileLookupCache(f){this._findCoveringTileCache[f]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(f){f.coord&&f.dataType==="source"?this._clearRenderCacheForTile(f.sourceCacheId,f.coord):f.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const f in this._style._mergedSourceCaches)this._style._mergedSourceCaches[f].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(f=>f.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const f=2*this.proxySourceCache.getSource().tileSize;return[f,f]}set useVertexMorphing(f){this._useVertexMorphing=f}updateTileBinding(f){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,E=this.painter.transform;this._initializing&&(this._initializing=E._centerAltitude===0&&this.getAtPointOrZero(o.L.fromLngLat(E.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const B=this.proxyCoords=m.getIds().map(K=>{const J=m.getTileByID(K).tileID;return J.projMatrix=E.calculateProjMatrix(J.toUnwrapped()),J});(function(K,J){const ne=J.transform.pointCoordinate(J.transform.getCameraPoint()),he=new o.P(ne.x,ne.y);K.sort((ye,we)=>{if(we.overscaledZ-ye.overscaledZ)return we.overscaledZ-ye.overscaledZ;const Oe=new o.P(ye.canonical.x+(1<<ye.canonical.z)*ye.wrap,ye.canonical.y),Fe=new o.P(we.canonical.x+(1<<we.canonical.z)*we.wrap,we.canonical.y),De=he.mult(1<<ye.canonical.z);return De.x-=.5,De.y-=.5,De.distSqr(Oe)-De.distSqr(Fe)})})(B,this.painter);const R=this.proxyToSource||{};this.proxyToSource={},B.forEach(K=>{this.proxyToSource[K.key]={}}),this.terrainTileForTile={};const k=this._style._mergedSourceCaches;for(const K in k){const J=k[K];if(!J.used||(J!==this.sourceCache&&this.resetTileLookupCache(J.id),this._setupProxiedCoordsForOrtho(J,f[K],R),J.usedForTerrain))continue;const ne=f[K];J.getSource().reparseOverscaled&&this._assignTerrainTiles(ne)}this.proxiedCoords[m.id]=B.map(K=>new fw(K,K.key,this.orthoMatrix)),this._assignTerrainTiles(B),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(R),this.renderingToTexture=!1;const z={};this._visibleDemTiles=[];for(const K of this.proxyCoords){const J=this.terrainTileForTile[K.key];if(!J)continue;const ne=J.tileID.key;ne in z||(this._visibleDemTiles.push(J),z[ne]=ne)}}_assignTerrainTiles(f){this._initializing||f.forEach(m=>{if(this.terrainTileForTile[m.key])return;const E=this._findTileCoveringTileID(m,this.sourceCache);E&&(this.terrainTileForTile[m.key]=E)})}_prepareDEMTextures(){const f=this.painter.context,m=f.gl;for(const E in this.terrainTileForTile){const B=this.terrainTileForTile[E],R=B.dem;!R||B.demTexture&&!B.needsDEMTextureUpload||(f.activeTexture.set(m.TEXTURE1),uw(this.painter,B,R))}}_prepareDemTileUniforms(f,m,E,B){if(!m||m.demTexture==null)return!1;const R=f.tileID.canonical,k=Math.pow(2,m.tileID.canonical.z-R.z),z=B||"";return E[`u_dem_tl${z}`]=[R.x*k%1,R.y*k%1],E[`u_dem_scale${z}`]=k,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const f=this.painter.context,m=f.gl;if(!this._emptyDepthBufferTexture){const E=new o.h({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.T(f,E,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let f=0;const m=this._visibleDemTiles.reduce((E,B)=>{if(!B.dem)return E;const R=B.dem.tree.minimums[0];return R>0&&f++,E+R},0);return f?m/f:0}_updateEmptyDEMTexture(){const f=this.painter.context,m=f.gl;f.activeTexture.set(m.TEXTURE2);const E=this._getLoadedAreaMinimum(),[B,R]=(()=>{const z=new o.cm({width:1,height:1},new Float32Array([E]));return[m.R32F,z]})();this._emptyDEMTextureDirty=!1;let k=this._emptyDEMTexture;return k?k.update(R,{premultiply:!1}):k=this._emptyDEMTexture=new o.T(f,R,B,{premultiply:!1}),k}setupElevationDraw(f,m,E){const B=this.painter.context,R=B.gl,k={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};k.u_exaggeration=this.exaggeration();let z=null,K=null,J=1;if(E&&E.morphing&&this._useVertexMorphing){const ye=E.morphing.srcDemTile,we=E.morphing.dstDemTile;J=E.morphing.phase,ye&&we&&(this._prepareDemTileUniforms(f,ye,k,"_prev")&&(K=ye),this._prepareDemTileUniforms(f,we,k)&&(z=we))}const ne=ye=>ye&&ye.demTexture&&this.painter.linearFloatFilteringSupported()?R.LINEAR:R.NEAREST,he=ye=>{k.u_dem_size=ye.size[0]===1?1:ye.size[0]-2};if(K&&z)B.activeTexture.set(R.TEXTURE2),z.demTexture.bind(ne(z),R.CLAMP_TO_EDGE),B.activeTexture.set(R.TEXTURE4),K.demTexture.bind(ne(K),R.CLAMP_TO_EDGE),z.demTexture&&he(z.demTexture),k.u_dem_lerp=J;else{z=this.terrainTileForTile[f.tileID.key],B.activeTexture.set(R.TEXTURE2);const ye=this._prepareDemTileUniforms(f,z,k)?z.demTexture:this.emptyDEMTexture;ye.bind(ne(z),R.CLAMP_TO_EDGE),he(ye)}if(B.activeTexture.set(R.TEXTURE3),E&&E.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),this._depthFBO&&(k.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE),k.u_depth_size_inv=[1,1]),E&&E.useMeterToDem&&z){const ye=(1<<z.tileID.canonical.z)*o.bl(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;k.u_meter_to_dem=ye}if(E&&E.labelPlaneMatrixInv&&(k.u_label_plane_matrix_inv=E.labelPlaneMatrixInv),m.setTerrainUniformValues(B,k),this.painter.transform.projection.name==="globe"){const ye=this.globeUniformValues(this.painter.transform,f.tileID.canonical,E&&E.useDenormalizedUpVectorScale);m.setGlobeUniformValues(B,ye)}}globeUniformValues(f,m,E){const B=f.projection;return{u_tile_tl_up:B.upVector(m,0,0),u_tile_tr_up:B.upVector(m,o.V,0),u_tile_br_up:B.upVector(m,o.V,o.V),u_tile_bl_up:B.upVector(m,0,o.V),u_tile_up_scale:E?o.cl(1):B.upVectorScale(m,f.center.lat,f.worldSize).metersToTile}}renderToBackBuffer(f){const m=this.painter,E=this.painter.context;f.length!==0&&(E.bindFramebuffer.set(null),E.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(B,R,k,z,K){if(B.transform.projection.name==="globe")(function(J,ne,he,ye,we){const Oe=J.context,Fe=Oe.gl;let De,Ee;const Ke=J.transform,lt=o.cd(J,Oe,Ke),Ze=(Cn,bn)=>{if(Ee===bn)return;const $n=[$_[bn],"PROJECTION_GLOBE_VIEW"];lt&&$n.push("CUSTOM_ANTIALIASING");const Yt=J.isTileAffectedByFog(Cn);De=J.getOrCreateProgram("globeRaster",{defines:$n,overrideFog:Yt}),Ee=bn},ct=J.colorModeForRenderPass(),Ve=new ir(Fe.LEQUAL,ir.ReadWrite,J.depthRangeFor3D);dg.update(we);const ut=o.ce(Ke),Ct=[o.a5(Ke.center.lng),o.ae(Ke.center.lat)],Lt=J.globeSharedBuffers,$t=[Ke.width*o.f.devicePixelRatio,Ke.height*o.f.devicePixelRatio],pn=Float32Array.from(Ke.globeMatrix),Kt={useDenormalizedUpVectorScale:!0};{const Cn=J.transform,bn=Nm(Cn.zoom,ne.exaggeration(),ne.sourceCache._source.tileSize);Ee=-1;const $n=Fe.TRIANGLES;for(const Yt of ye){const vn=he.getTile(Yt),Nt=di.disabled,ln=ne.prevTerrainTileForTile[Yt.key],jn=ne.terrainTileForTile[Yt.key];Om(ln,jn)&&dg.newMorphing(Yt.key,ln,jn,we,250),Oe.activeTexture.set(Fe.TEXTURE0),vn.texture&&vn.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE);const sr=dg.getMorphValuesForProxy(Yt.key),tr=sr?1:0;sr&&o.j(Kt,{morphing:{srcDemTile:sr.from,dstDemTile:sr.to,phase:o.cc(sr.phase)}});const pr=o.cf(Yt.canonical),kr=o.cg(pr.getCenter().lat),Zr=o.ch(Yt.canonical,pr,kr,Cn.worldSize/Cn._pixelsPerMercatorPixel),jr=o.aT(o.ci(Yt.canonical)),Wr=hw(Cn.expandedFarZProjMatrix,pn,ut,jr,o.S(Cn.zoom),Ct,Cn.frustumCorners.TL,Cn.frustumCorners.TR,Cn.frustumCorners.BR,Cn.frustumCorners.BL,Cn.globeCenterInViewSpace,Cn.globeRadius,$t,bn,Cn._farZ,Zr);if(Ze(Yt,tr),De&&(ne.setupElevationDraw(vn,De,Kt),J.uploadCommonUniforms(Oe,De,Yt.toUnwrapped()),Lt)){const[Vi,vi,Li]=Lt.getGridBuffers(kr,bn!==0);De.draw(J,$n,Ve,Nt,ct,Yr.backCCW,Wr,"globe_raster",Vi,vi,Li)}}}if(Lt&&(J.renderDefaultNorthPole||J.renderDefaultSouthPole)){const Cn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];lt&&Cn.push("CUSTOM_ANTIALIASING"),De=J.getOrCreateProgram("globeRaster",{defines:Cn});for(const bn of ye){const{x:$n,y:Yt,z:vn}=bn.canonical,Nt=Yt===0,ln=Yt===(1<<vn)-1,[jn,sr,tr,pr]=Lt.getPoleBuffers(vn,!1);if(pr&&(Nt||ln)){const kr=he.getTile(bn);Oe.activeTexture.set(Fe.TEXTURE0),kr.texture&&kr.texture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE);let Zr=o.cj(vn,$n,Ke);const jr=o.aT(o.ci(bn.canonical)),Wr=(Vi,vi)=>Vi.draw(J,Fe.TRIANGLES,Ve,di.disabled,ct,Yr.disabled,hw(Ke.expandedFarZProjMatrix,Zr,Zr,jr,0,Ct,Ke.frustumCorners.TL,Ke.frustumCorners.TR,Ke.frustumCorners.BR,Ke.frustumCorners.BL,Ke.globeCenterInViewSpace,Ke.globeRadius,$t,0,Ke._farZ),"globe_pole_raster",vi,tr,pr);ne.setupElevationDraw(kr,De,Kt),J.uploadCommonUniforms(Oe,De,bn.toUnwrapped()),Nt&&J.renderDefaultNorthPole&&Wr(De,jn),ln&&J.renderDefaultSouthPole&&(Zr=o.a6.scale(o.a6.create(),Zr,[1,-1,1]),Wr(De,sr))}}}})(B,R,k,z,K);else{const J=B.context,ne=J.gl;let he,ye;const we=B.shadowRenderer,Oe=Rl(B,B.longestCutoffRange),Fe=ct=>{if(ye===ct)return;const Ve=[];Ve.push($_[ct]),Oe.shouldRenderCutoff&&Ve.push("RENDER_CUTOFF"),he=B.getOrCreateProgram("terrainRaster",{defines:Ve}),ye=ct},De=B.colorModeForRenderPass(),Ee=new ir(ne.LEQUAL,ir.ReadWrite,B.depthRangeFor3D);dg.update(K);const Ke=B.transform,lt=Nm(Ke.zoom,R.exaggeration(),R.sourceCache._source.tileSize);let Ze=[0,0,0];if(we){const ct=B.style.directionalLight,Ve=B.style.ambientLight;ct&&Ve&&(Ze=Sc(ct,Ve))}{ye=-1;const ct=ne.TRIANGLES,[Ve,ut]=[R.gridIndexBuffer,R.gridSegments];for(const Ct of z){const Lt=k.getTile(Ct),$t=di.disabled,pn=R.prevTerrainTileForTile[Ct.key],Kt=R.terrainTileForTile[Ct.key];Om(pn,Kt)&&dg.newMorphing(Ct.key,pn,Kt,K,250),J.activeTexture.set(ne.TEXTURE0),Lt.texture&&Lt.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const Cn=dg.getMorphValuesForProxy(Ct.key),bn=Cn?1:0;let $n;Cn&&($n={morphing:{srcDemTile:Cn.from,dstDemTile:Cn.to,phase:o.cc(Cn.phase)}});const Yt=T0(Ct.projMatrix,Kf(Ct.canonical,Ke.renderWorldCopies)?lt/10:lt,Ze);if(Fe(bn),!he)continue;R.setupElevationDraw(Lt,he,$n);const vn=Ct.toUnwrapped();we&&we.setupShadows(vn,he),B.uploadCommonUniforms(J,he,vn,null,Oe),he.draw(B,ct,Ee,$t,De,Yr.backCCW,Yt,"terrain_raster",R.gridBuffer,Ve,ut)}}}}(m,this,this.proxySourceCache,f,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),f.splice(0,f.length))}renderBatch(f){if(this._drapedRenderBatches.length===0)return f+1;this.renderingToTexture=!0;const m=this.painter,E=this.painter.context,B=this.proxySourceCache,R=this.proxiedCoords[B.id],k=this._drapedRenderBatches.shift(),z=m.style.order,K=[];let J=0;for(const ne of R){const he=B.getTileByID(ne.proxyTileKey),ye=B.proxyCachedFBO[ne.key]?B.proxyCachedFBO[ne.key][f]:void 0,we=ye!==void 0?B.renderCache[ye]:this.pool[J++],Oe=ye!==void 0;if(he.texture=we.tex,Oe&&!we.dirty){K.push(he.tileID);continue}let Fe;E.bindFramebuffer.set(we.fb.framebuffer),this.renderedToTile=!1,we.dirty&&(E.clear({color:o.ax.transparent,stencil:0}),we.dirty=!1);for(let De=k.start;De<=k.end;++De){const Ee=m.style._mergedLayers[z[De]];if(Ee.isHidden(m.transform.zoom))continue;const Ke=m.style.getLayerSourceCache(Ee),lt=Ke?this.proxyToSource[ne.key][Ke.id]:[ne];if(!lt)continue;const Ze=lt;E.viewport.set([0,0,we.fb.width,we.fb.height]),Fe!==(Ke?Ke.id:null)&&(this._setupStencil(we,lt,Ee,Ke),Fe=Ke?Ke.id:null),m.renderLayer(m,Ke,Ee,Ze)}if(this._drapedRenderBatches.length===0)for(const De of this._pendingGroundEffectLayers){const Ee=m.style._mergedLayers[z[De]];if(Ee.isHidden(m.transform.zoom))continue;const Ke=m.style.getLayerSourceCache(Ee),lt=Ke?this.proxyToSource[ne.key][Ke.id]:[ne];if(!lt)continue;const Ze=lt;E.viewport.set([0,0,we.fb.width,we.fb.height]),Fe!==(Ke?Ke.id:null)&&(this._setupStencil(we,lt,Ee,Ke),Fe=Ke?Ke.id:null),m.renderLayer(m,Ke,Ee,Ze)}this.renderedToTile?(we.dirty=!0,K.push(he.tileID)):Oe||--J,J===5&&(J=0,this.renderToBackBuffer(K))}return this.renderToBackBuffer(K),this.renderingToTexture=!1,E.bindFramebuffer.set(null),E.viewport.set([0,0,m.width,m.height]),k.end+1}postRender(){}isLayerOrderingCorrect(f){const m=f.order.length;let E=-1,B=m;for(let R=0;R<m;++R)this._style.isLayerDraped(f._mergedLayers[f.order[R]])?E=Math.max(E,R):B=Math.min(B,R);return B>E}getMinElevationBelowMSL(){let f=0;return this._visibleDemTiles.filter(m=>m.dem).forEach(m=>{f=Math.min(f,m.dem.tree.minimums[0])}),f===0?f:(f-30)*this._exaggeration}raycast(f,m,E){if(!this._visibleDemTiles)return null;const B=this._visibleDemTiles.filter(R=>R.dem).map(R=>{const k=R.tileID,z=1<<k.overscaledZ,{x:K,y:J}=k.canonical,ne=K/z,he=(K+1)/z,ye=J/z,we=(J+1)/z;return{minx:ne,miny:ye,maxx:he,maxy:we,t:R.dem.tree.raycastRoot(ne,ye,he,we,f,m,E),tile:R}});B.sort((R,k)=>(R.t!==null?R.t:Number.MAX_VALUE)-(k.t!==null?k.t:Number.MAX_VALUE));for(const R of B){if(R.t==null)return null;const k=R.tile.dem.tree.raycast(R.minx,R.miny,R.maxx,R.maxy,f,m,E);if(k!=null)return k}return null}_createFBO(){const f=this.painter.context,m=f.gl,E=this.drapeBufferSize;f.activeTexture.set(m.TEXTURE0);const B=new o.T(f,{width:E[0],height:E[1],data:null},m.RGBA);B.bind(m.LINEAR,m.CLAMP_TO_EDGE);const R=f.createFramebuffer(E[0],E[1],!0,null);return R.colorAttachment.set(B.texture),R.depthAttachment=new bc(f,R.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=f.createRenderbuffer(f.gl.DEPTH_STENCIL,E[0],E[1]),this._stencilRef=0,R.depthAttachment.set(this._sharedDepthStencil),f.clear({stencil:0})):R.depthAttachment.set(this._sharedDepthStencil),f.extTextureFilterAnisotropic&&m.texParameterf(m.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax),{fb:R,tex:B,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const f in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[f].hasTransition())return!0;return this._style.order.some(f=>{const m=this._style._mergedLayers[f],E=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!E&&m.shouldRedrape():!E&&m.hasTransition()})}_clearLineLayersFromRenderCache(){let f=!1;for(const E of this._style.getSources())if(E instanceof sn){f=!0;break}if(!f)return;const m={};for(let E=0;E<this._style.order.length;++E){const B=this._style._mergedLayers[this._style.order[E]],R=this._style.getLayerSourceCache(B);if(R&&!m[R.id]&&!B.isHidden(this.painter.transform.zoom)&&B.type==="line"&&B.widthExpression()instanceof o.Z){m[R.id]=!0;for(const k of this.proxyCoords){const z=this.proxyToSource[k.key][R.id];if(z)for(const K of z)this._clearRenderCacheForTile(R.id,K)}}}}_clearRasterLayersFromRenderCache(){let f=!1;for(const E in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[E]._source instanceof Mn){f=!0;break}if(!f)return;const m={};for(let E=0;E<this._style.order.length;++E){const B=this._style._mergedLayers[this._style.order[E]],R=this._style.getLayerSourceCache(B);if(!R||m[R.id]||B.isHidden(this.painter.transform.zoom)||B.type!=="raster")continue;const k=B.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const K=this.proxyToSource[z.key][R.id];if(K)for(const J of K){const ne=V_(R.getTile(J),R.findLoadedParent(J,0),R,this.painter.transform,k);(ne.opacity!==1||ne.mix!==0)&&this._clearRenderCacheForTile(R.id,J)}}}}_setupDrapedRenderBatches(){const f=this._style.order,m=f.length;if(m===0)return;const E=[];this._pendingGroundEffectLayers=[];let B,R=0,k=this._style._mergedLayers[f[R]];for(;!this._style.isLayerDraped(k)&&k.isHidden(this.painter.transform.zoom)&&++R<m;)k=this._style._mergedLayers[f[R]];for(;R<m;++R){const z=this._style._mergedLayers[f[R]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?B===void 0&&(B=R):(z.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(R),B!==void 0&&(E.push({start:B,end:R-1}),B=void 0)))}if(B!==void 0&&E.push({start:B,end:R-1}),E.length!==0){const z=E[E.length-1];this._pendingGroundEffectLayers.every(K=>K>z.end)||o.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=E}_setupRenderCache(f){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const k=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let z=0;z<k.length;++z){const K=Object.values(k[z]);m.renderCachePool.push(...K)}}return}this._clearRasterLayersFromRenderCache();const E=this.proxyCoords,B=this._tilesDirty;for(let k=E.length-1;k>=0;k--){const z=E[k];if(m.getTileByID(z.key),m.proxyCachedFBO[z.key]!==void 0){const K=f[z.key],J=this.proxyToSource[z.key];let ne=0;for(const he in J){const ye=J[he],we=K[he];if(!we||we.length!==ye.length||ye.some((Oe,Fe)=>Oe!==we[Fe]||B[he]&&B[he].hasOwnProperty(Oe.key))){ne=-1;break}++ne}for(const he in m.proxyCachedFBO[z.key])m.renderCache[m.proxyCachedFBO[z.key][he]].dirty=ne<0||ne!==Object.values(K).length}}const R=[...this._drapedRenderBatches];R.sort((k,z)=>z.end-z.start-(k.end-k.start));for(const k of R)for(const z of E){if(m.proxyCachedFBO[z.key])continue;let K=m.renderCachePool.pop();K===void 0&&m.renderCache.length<50&&(K=m.renderCache.length,m.renderCache.push(this._createFBO())),K!==void 0&&(m.proxyCachedFBO[z.key]={},m.proxyCachedFBO[z.key][k.start]=K,m.renderCache[K].dirty=!0)}this._tilesDirty={}}_setupStencil(f,m,E,B){if(!B||!this._sourceTilesOverlap[B.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const R=this.painter.context,k=R.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let z;if(E.isTileClipped())z=m.length,this._overlapStencilMode.test={func:k.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:k.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(R.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,E.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(f){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[f.key]),this._overlapStencilMode):di.disabled}_renderTileClippingMasks(f,m){const E=this.painter,B=this.painter.context,R=B.gl;E._tileClippingMaskIDs={},B.setColorMode(Ui.disabled),B.setDepthMode(ir.disabled);const k=E.getOrCreateProgram("clippingMask");for(const z of f){const K=E._tileClippingMaskIDs[z.key]=--m;k.draw(E,R.TRIANGLES,ir.disabled,new di({func:R.ALWAYS,mask:0},K,255,R.KEEP,R.KEEP,R.REPLACE),Ui.disabled,Yr.disabled,qp(z.projMatrix),"$clipping",E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}}pointCoordinate(f){const m=this.painter.transform;if(f.x<0||f.x>m.width||f.y<0||f.y>m.height)return null;const E=[f.x,f.y,1,1];o.a7.transformMat4(E,E,m.pixelMatrixInverse),o.a7.scale(E,E,1/E[3]),E[0]/=m.worldSize,E[1]/=m.worldSize;const B=m._camera.position,R=o.bl(1,m.center.lat),k=[B[0],B[1],B[2]/R,0],z=o.N.subtract([],E.slice(0,3),k);o.N.normalize(z,z);const K=this.raycast(k,z,this._exaggeration);return K!==null&&K?(o.N.scaleAndAdd(k,k,z,K),k[3]=k[2],k[2]*=R,k):null}drawDepth(){const f=this.painter,m=f.context,E=this.proxySourceCache,B=Math.ceil(f.width),R=Math.ceil(f.height);if(!this._depthFBO||this._depthFBO.width===B&&this._depthFBO.height===R||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const k=m.gl,z=m.createFramebuffer(B,R,!0,"renderbuffer");m.activeTexture.set(k.TEXTURE0);const K=new o.T(m,{width:B,height:R,data:null},k.RGBA);K.bind(k.NEAREST,k.CLAMP_TO_EDGE),z.colorAttachment.set(K.texture);const J=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,B,R);z.depthAttachment.set(J),this._depthFBO=z,this._depthTexture=K}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,B,R]),function(k,z,K,J){if(k.transform.projection.name==="globe")return;const ne=k.context,he=ne.gl;ne.clear({depth:1});const ye=k.getOrCreateProgram("terrainDepth"),we=new ir(he.LESS,ir.ReadWrite,k.depthRangeFor3D);for(const Oe of J){const Fe=K.getTile(Oe),De=T0(Oe.projMatrix,0,[0,0,0]);z.setupElevationDraw(Fe,ye),ye.draw(k,he.TRIANGLES,we,di.disabled,Ui.unblended,Yr.backCCW,De,"terrain_depth",z.gridBuffer,z.gridIndexBuffer,z.gridNoSkirtSegments)}}(f,this,E,this.proxyCoords)}_setupProxiedCoordsForOrtho(f,m,E){if(f.getSource()instanceof o.ap)return this._setupProxiedCoordsForImageSource(f,m,E);this._findCoveringTileCache[f.id]=this._findCoveringTileCache[f.id]||{};const B=this.proxiedCoords[f.id]=[],R=this.proxyCoords;for(let K=0;K<R.length;K++){const J=R[K],ne=this._findTileCoveringTileID(J,f);if(ne){const he=this._createProxiedId(J,ne,E[J.key]&&E[J.key][f.id]);B.push(he),this.proxyToSource[J.key][f.id]=[he]}}let k=!1;const z=new Set;for(let K=0;K<m.length;K++){const J=f.getTile(m[K]);if(!J||!J.hasData())continue;const ne=this._findTileCoveringTileID(J.tileID,this.proxySourceCache);if(ne&&ne.tileID.canonical.z!==J.tileID.canonical.z){const he=this.proxyToSource[ne.tileID.key][f.id],ye=this._createProxiedId(ne.tileID,J,E[ne.tileID.key]&&E[ne.tileID.key][f.id]);he?he.splice(he.length-1,0,ye):this.proxyToSource[ne.tileID.key][f.id]=[ye];const we=this.proxyToSource[ne.tileID.key][f.id];z.has(we)||z.add(we),B.push(ye),k=!0}}if(this._sourceTilesOverlap[f.id]=k,k&&this._debugParams.sortTilesHiZFirst)for(const K of z)K.sort((J,ne)=>ne.overscaledZ-J.overscaledZ)}_setupProxiedCoordsForImageSource(f,m,E){if(!f.getSource().loaded())return;const B=this.proxiedCoords[f.id]=[],R=this.proxyCoords,k=f.getSource(),z=k.tileID;if(!z)return;const K=new o.P(z.x,z.y)._div(1<<z.z),J=k.coordinates.map(o.L.fromLngLat).reduce((he,ye)=>(he.min.x=Math.min(he.min.x,ye.x-K.x),he.min.y=Math.min(he.min.y,ye.y-K.y),he.max.x=Math.max(he.max.x,ye.x-K.x),he.max.y=Math.max(he.max.y,ye.y-K.y),he),{min:new o.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),ne=(he,ye)=>{const we=he.wrap+he.canonical.x/(1<<he.canonical.z),Oe=he.canonical.y/(1<<he.canonical.z),Fe=o.V/(1<<he.canonical.z),De=ye.wrap+ye.canonical.x/(1<<ye.canonical.z),Ee=ye.canonical.y/(1<<ye.canonical.z);return we+Fe<De+J.min.x||we>De+J.max.x||Oe+Fe<Ee+J.min.y||Oe>Ee+J.max.y};for(let he=0;he<R.length;he++){const ye=R[he];for(let we=0;we<m.length;we++){const Oe=f.getTile(m[we]);if(!Oe||!Oe.hasData()||ne(ye,Oe.tileID))continue;const Fe=this._createProxiedId(ye,Oe,E[ye.key]&&E[ye.key][f.id]),De=this.proxyToSource[ye.key][f.id];De?De.push(Fe):this.proxyToSource[ye.key][f.id]=[Fe],B.push(Fe)}}}_createProxiedId(f,m,E){let B=this.orthoMatrix;if(E){const R=E.find(k=>k.key===m.tileID.key);if(R)return R}if(m.tileID.key!==f.key){const R=f.canonical.z-m.tileID.canonical.z;let k,z,K;B=o.a6.create();const J=m.tileID.wrap-f.wrap<<f.overscaledZ;R>0?(k=o.V>>R,z=k*((m.tileID.canonical.x<<R)-f.canonical.x+J),K=k*((m.tileID.canonical.y<<R)-f.canonical.y)):(k=o.V<<-R,z=o.V*(m.tileID.canonical.x-(f.canonical.x+J<<-R)),K=o.V*(m.tileID.canonical.y-(f.canonical.y<<-R))),o.a6.ortho(B,0,k,0,k,0,1),o.a6.translate(B,B,[z,K,0])}return new fw(m.tileID,f.key,B)}_findTileCoveringTileID(f,m){let E=m.getTile(f);if(E&&E.hasData())return E;const B=this._findCoveringTileCache[m.id],R=B[f.key];if(E=R?m.getTileByID(R):null,E&&E.hasData()||R===null)return E;let k=E?E.tileID:f,z=k.overscaledZ;const K=m.getSource().minzoom,J=[];if(!R){const he=m.getSource().maxzoom;if(f.canonical.z>=he){const ye=f.canonical.z-he;m.getSource().reparseOverscaled?(z=Math.max(f.canonical.z+2,m.transform.tileZoom),k=new o.am(z,f.wrap,he,f.canonical.x>>ye,f.canonical.y>>ye)):ye!==0&&(z=he,k=new o.am(z,f.wrap,he,f.canonical.x>>ye,f.canonical.y>>ye))}k.key!==f.key&&(J.push(k.key),E=m.getTile(k))}const ne=he=>{J.forEach(ye=>{B[ye]=he}),J.length=0};for(z-=1;z>=K&&(!E||!E.hasData());z--){E&&ne(E.tileID.key);const he=k.calculateScaledKey(z);if(E=m.getTileByID(he),E&&E.hasData())break;const ye=B[he];if(ye===null)break;ye===void 0?J.push(he):E=m.getTileByID(ye)}return ne(E?E.tileID.key:null),E&&E.hasData()?E:null}findDEMTileFor(f){return this.enabled?this._findTileCoveringTileID(f,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(f,m){let E=this._tilesDirty[f];E||(E=this._tilesDirty[f]={}),E[m.key]=!0}}function H_(w,f,m){const E=function(z,K,J){const ne=o.N.dot(K,z),he=o.N.dot(J,[.2126,.7152,.0722]),ye=(Oe,Fe,De)=>(1-De)*Oe+De*Fe,we=ye(1-.3*Math.min(he,1),1,Math.min(ne+1,1));return ye(.92,1,Math.asin(o.aa(K[2],-1,1))/Math.PI+.5)*we}(w,[0,0,1],f),B=[0,0,0];o.N.scale(B,m.slice(0,3),E);const R=[0,0,0];o.N.scale(R,f.slice(0,3),w[2]);const k=[0,0,0];return o.N.add(k,B,R),o.bU(k)}const G_=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],of=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class Mu{static cacheKey(f,m,E,B){let R=`${m}${B?B.cacheKey:""}`;for(const k of E)f.usedDefines.includes(k)&&(R+=`/${k}`);return R}constructor(f,m,E,B,R,k,z){const K=f.gl;this.program=K.createProgram(),this.configuration=B,this.name=m,this.fixedDefines=[...k];const J=B?B.getBinderAttributes():[],ne=(E.staticAttributes||[]).concat(J);let he=B?B.defines():[];he=he.concat(k.map(Ee=>`#define ${Ee}`));const ye=`#version 300 es
`;let we=ye+he.concat("precision mediump float;",Wp,ug.fragmentSource).join(`
`);for(const Ee of E.fragmentIncludes)we+=`
${Bc[Ee]}`;we+=`
${E.fragmentSource}`;let Oe=ye+he.concat("precision highp float;",Wp,ug.vertexSource).join(`
`);for(const Ee of E.vertexIncludes)Oe+=`
${Bc[Ee]}`;Oe+=`
${E.vertexSource}`;const Fe=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);K.shaderSource(Fe,we),K.compileShader(Fe),K.attachShader(this.program,Fe);const De=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(De,Oe),K.compileShader(De),K.attachShader(this.program,De),this.attributes={},this.numAttributes=ne.length;for(let Ee=0;Ee<this.numAttributes;Ee++)if(ne[Ee]){const Ke=ne[Ee].startsWith("a_")?ne[Ee]:`a_${ne[Ee]}`;K.bindAttribLocation(this.program,Ee,Ke),this.attributes[Ke]=Ee}z&&z.shaderVaryings.length>0&&K.transformFeedbackVaryings(this.program,z.shaderVaryings,z.bufferMode),K.linkProgram(this.program),K.deleteShader(De),K.deleteShader(Fe),this.fixedUniforms=R(f),this.binderUniforms=B?B.getUniforms(f):[],k.includes("TERRAIN")&&(this.terrainUniforms=(Ee=>({u_dem:new o.bO(Ee),u_dem_prev:new o.bO(Ee),u_dem_tl:new o.bL(Ee),u_dem_scale:new o.bN(Ee),u_dem_tl_prev:new o.bL(Ee),u_dem_scale_prev:new o.bN(Ee),u_dem_size:new o.bN(Ee),u_dem_lerp:new o.bN(Ee),u_exaggeration:new o.bN(Ee),u_depth:new o.bO(Ee),u_depth_size_inv:new o.bL(Ee),u_meter_to_dem:new o.bN(Ee),u_label_plane_matrix_inv:new o.bK(Ee)}))(f)),k.includes("GLOBE")&&(this.globeUniforms=(Ee=>({u_tile_tl_up:new o.bM(Ee),u_tile_tr_up:new o.bM(Ee),u_tile_br_up:new o.bM(Ee),u_tile_bl_up:new o.bM(Ee),u_tile_up_scale:new o.bN(Ee)}))(f)),k.includes("FOG")&&(this.fogUniforms=(Ee=>({u_fog_matrix:new o.bK(Ee),u_fog_range:new o.bL(Ee),u_fog_color:new o.bP(Ee),u_fog_horizon_blend:new o.bN(Ee),u_fog_vertical_limit:new o.bL(Ee),u_fog_temporal_offset:new o.bN(Ee),u_frustum_tl:new o.bM(Ee),u_frustum_tr:new o.bM(Ee),u_frustum_br:new o.bM(Ee),u_frustum_bl:new o.bM(Ee),u_globe_pos:new o.bM(Ee),u_globe_radius:new o.bN(Ee),u_globe_transition:new o.bN(Ee),u_is_globe:new o.bO(Ee),u_viewport:new o.bL(Ee)}))(f)),k.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Ee=>({u_cutoff_params:new o.bP(Ee)}))(f)),k.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Ee=>({u_lighting_ambient_color:new o.bM(Ee),u_lighting_directional_dir:new o.bM(Ee),u_lighting_directional_color:new o.bM(Ee),u_ground_radiance:new o.bM(Ee)}))(f)),k.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Ee=>({u_light_matrix_0:new o.bK(Ee),u_light_matrix_1:new o.bK(Ee),u_fade_range:new o.bL(Ee),u_shadow_normal_offset:new o.bM(Ee),u_shadow_intensity:new o.bN(Ee),u_shadow_texel_size:new o.bN(Ee),u_shadow_map_resolution:new o.bN(Ee),u_shadow_direction:new o.bM(Ee),u_shadow_bias:new o.bM(Ee),u_shadowmap_0:new o.bO(Ee),u_shadowmap_1:new o.bO(Ee)}))(f))}}setTerrainUniformValues(f,m){if(!this.terrainUniforms)return;const E=this.terrainUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const B in m)E[B]&&E[B].set(this.program,B,m[B])}}setGlobeUniformValues(f,m){if(!this.globeUniforms)return;const E=this.globeUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const B in m)E[B]&&E[B].set(this.program,B,m[B])}}setFogUniformValues(f,m){if(!this.fogUniforms)return;const E=this.fogUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const B in m)E[B].set(this.program,B,m[B])}}setCutoffUniformValues(f,m){if(!this.cutoffUniforms)return;const E=this.cutoffUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const B in m)E[B].set(this.program,B,m[B])}}setLightsUniformValues(f,m){if(!this.lightsUniforms)return;const E=this.lightsUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const B in m)E[B].set(this.program,B,m[B])}}setShadowUniformValues(f,m){if(this.failedToCreate||!this.shadowUniforms)return;const E=this.shadowUniforms;f.program.set(this.program);for(const B in m)E[B].set(this.program,B,m[B])}_drawDebugWireframe(f,m,E,B,R,k,z,K,J,ne){const he=f.options.wireframe;if(he.terrain===!1&&he.layers2D===!1&&he.layers3D===!1)return;const ye=f.context;if(!(!(!he.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!he.layers2D||f._terrain&&f._terrain.renderingToTexture||!G_.includes(this.name))||!(!he.layers3D||!of.includes(this.name))))return;const we=ye.gl,Oe=f.wireframeDebugCache.getLinesFromTrianglesBuffer(f.frameCounter,R,ye);if(!Oe)return;const Fe=[...this.fixedDefines];Fe.push("DEBUG_WIREFRAME");const De=f.getOrCreateProgram(this.name,{config:this.configuration,defines:Fe});ye.program.set(De.program);const Ee=(Ze,ct,Ve)=>{if(ct[Ze]&&Ve[Ze])for(const ut in ct[Ze])Ve[Ze][ut]&&Ve[Ze][ut].set(Ve.program,ut,ct[Ze][ut].current)};J&&J.setUniforms(De.program,ye,De.binderUniforms,z,{zoom:K}),Ee("fixedUniforms",this,De),Ee("terrainUniforms",this,De),Ee("globeUniforms",this,De),Ee("fogUniforms",this,De),Ee("lightsUniforms",this,De),Ee("shadowUniforms",this,De),Oe.bind(),ye.setColorMode(new Ui([we.ONE,we.ONE_MINUS_SRC_ALPHA,we.ZERO,we.ONE],o.ax.transparent,[!0,!0,!0,!1])),ye.setDepthMode(new ir(m.func===we.LESS?we.LEQUAL:m.func,ir.ReadOnly,m.range)),ye.setStencilMode(di.disabled);const Ke=3*k.primitiveLength*2,lt=3*k.primitiveOffset*2*2;ne&&ne>1?we.drawElementsInstanced(we.LINES,Ke,we.UNSIGNED_SHORT,lt,ne):we.drawElements(we.LINES,Ke,we.UNSIGNED_SHORT,lt),R.bind(),ye.program.set(this.program),ye.setDepthMode(m),ye.setStencilMode(E),ye.setColorMode(B)}draw(f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee){const Ke=f.context,lt=Ke.gl;if(this.failedToCreate)return;Ke.program.set(this.program),Ke.setDepthMode(E),Ke.setStencilMode(B),Ke.setColorMode(R),Ke.setCullFace(k);for(const ut of Object.keys(this.fixedUniforms))this.fixedUniforms[ut].set(this.program,ut,z[ut]);Oe&&Oe.setUniforms(this.program,Ke,this.binderUniforms,ye,{zoom:we});const Ze={[lt.POINTS]:1,[lt.LINES]:2,[lt.TRIANGLES]:3,[lt.LINE_STRIP]:1}[m],ct=Ee&&Ee.length>0;if(ct){for(const ut of Ee)lt.bindBufferBase(lt.TRANSFORM_FEEDBACK_BUFFER,ut.targetIndex,ut.buffer.buffer);lt.beginTransformFeedback(m)}const Ve=De&&De>0?1:void 0;for(const ut of he.get()){const Ct=ut.vaos||(ut.vaos={});(Ct[K]||(Ct[K]=new Fm)).bind(Ke,this,J,Oe?Oe.getPaintVertexBuffers():[],ne,ut.vertexOffset,Fe||[],Ve),De&&De>1?lt.drawElementsInstanced(m,ut.primitiveLength*Ze,lt.UNSIGNED_SHORT,ut.primitiveOffset*Ze*2,De):ne?lt.drawElements(m,ut.primitiveLength*Ze,lt.UNSIGNED_SHORT,ut.primitiveOffset*Ze*2):lt.drawArrays(m,ut.vertexOffset,ut.vertexLength),m===lt.TRIANGLES&&ne&&this._drawDebugWireframe(f,E,B,R,ne,ut,ye,we,Oe,De)}ct&&lt.endTransformFeedback()}}function Th(w,f){const m=Math.pow(2,f.tileID.overscaledZ),E=f.tileSize*Math.pow(2,w.transform.tileZoom)/m,B=E*(f.tileID.canonical.x+f.tileID.wrap*m),R=E*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture?f.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/o.a3(f,1,w.transform.tileZoom),u_pixel_coord_upper:[B>>16,R>>16],u_pixel_coord_lower:[65535&B,65535&R]}}const pw=o.a6.create(),I0=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe)=>{const De=f.style.light,Ee=De.properties.get("position"),Ke=[Ee.x,Ee.y,Ee.z],lt=o.co.create();De.properties.get("anchor")==="viewport"&&(o.co.fromRotation(lt,-f.transform.angle),o.N.transformMat3(Ke,Ke,lt));const Ze=De.properties.get("color"),ct=f.transform,Ve={u_matrix:w,u_lightpos:Ke,u_lightintensity:De.properties.get("intensity"),u_lightcolor:[Ze.r,Ze.g,Ze.b],u_vertical_gradient:+m,u_opacity:E,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:pw,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:B,u_edge_radius:R,u_flood_light_color:he,u_vertical_scale:ye,u_flood_light_intensity:we,u_ground_shadow_factor:Oe,u_emissive_strength:Fe};return ct.projection.name==="globe"&&(Ve.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],Ve.u_zoom_transition=K,Ve.u_inv_rot_matrix=ne,Ve.u_merc_center=J,Ve.u_up_dir=ct.projection.upVector(new o.bs(0,0,0),J[0]*o.V,J[1]*o.V),Ve.u_height_lift=z),Ve},sd=(w,f,m)=>({u_matrix:w,u_edge_radius:f,u_vertical_scale:m}),Pl=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we)=>{const Oe=I0(w,f,m,E,B,R,k,K,J,ne,he,ye,we,1,[0,0,0],0),Fe={u_height_factor:-Math.pow(2,k.overscaledZ)/z.tileSize/8};return o.e(Oe,Th(f,z),Fe)},fg=(w,f)=>({u_matrix:w,u_emissive_strength:f}),Q_=(w,f,m,E)=>o.e(fg(w,f),Th(m,E)),Wf=(w,f,m)=>({u_matrix:w,u_world:m,u_emissive_strength:f}),j_=(w,f,m,E,B)=>o.e(Q_(w,f,m,E),{u_world:B}),km=(w,f,m,E)=>{const B=o.V/m.tileSize;return{u_matrix:w,u_camera_to_center_distance:f.getCameraToCenterDistance(E),u_extrude_scale:[f.pixelsToGLUnits[0]/B,f.pixelsToGLUnits[1]/B]}},B0=(w,f,m=1)=>({u_matrix:w,u_color:f,u_overlay:0,u_overlay_scale:m}),Aw=o.a6.create(),pg=(w,f,m,E,B,R,k)=>{const z=w.transform,K=z.projection.name==="globe",J=K?o.cp(z.zoom,f.canonical)*z._pixelsPerMercatorPixel:o.a3(m,1,R),ne={u_matrix:f.projMatrix,u_extrude_scale:J,u_intensity:k,u_inv_rot_matrix:Aw,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(K){ne.u_inv_rot_matrix=E,ne.u_merc_center=B,ne.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],ne.u_zoom_transition=o.S(z.zoom);const he=B[0]*o.V,ye=B[1]*o.V;ne.u_up_dir=z.projection.upVector(new o.bs(0,0,0),he,ye)}return ne};function Yp(w,[f,m,E,B],[R,k]){if(R===k)return[0,0,0,0];const z=255*(w-1)/(w*(k-R));return[f*z,m*z,E*z,B*z]}function Ag(w,f,[m,E]){return m===E?0:.5/w+(f-m)*(w-1)/(w*(E-m))}const Dm=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee,Ke,lt,Ze)=>{return{u_matrix:w,u_normalize_matrix:f,u_globe_matrix:m,u_merc_matrix:E,u_grid_matrix:B,u_tl_parent:R,u_scale_parent:J,u_fade_t:ne.mix,u_opacity:ne.opacity*he.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:he.paint.get("raster-brightness-min"),u_brightness_high:he.paint.get("raster-brightness-max"),u_saturation_factor:(Ve=he.paint.get("raster-saturation"),Ve>0?1-1/(1.001-Ve):-Ve),u_contrast_factor:(ct=he.paint.get("raster-contrast"),ct>0?1/(1-ct):1+ct),u_spin_weights:gg(he.paint.get("raster-hue-rotate")),u_perspective_transform:ye,u_raster_elevation:we,u_zoom_transition:k,u_merc_center:z,u_cutoff_params:K,u_colorization_mix:Yp(o.cq,Fe,Ee),u_colorization_offset:Ag(o.cq,De,Ee),u_color_ramp:Oe,u_texture_offset:[lt/(Ke+2*lt),Ke/(Ke+2*lt)],u_texture_res:[Ke+2*lt,Ke+2*lt],u_emissive_strength:Ze};var ct,Ve};function gg(w){w*=Math.PI/180;const f=Math.sin(w),m=Math.cos(w);return[(2*m+1)/3,(-Math.sqrt(3)*f-m+1)/3,(Math.sqrt(3)*f-m+1)/3]}const ZE=(w,f,m,E,B,R,k,z,K,J,ne,he)=>({u_matrix:w,u_normalize_matrix:f,u_globe_matrix:m,u_merc_matrix:E,u_grid_matrix:B,u_tl_parent:R,u_scale_parent:J,u_fade_t:ne.mix,u_opacity:ne.opacity,u_image0:0,u_image1:1,u_raster_elevation:he,u_zoom_transition:k,u_merc_center:z,u_cutoff_params:K}),gw=(w,f,m,E,B,R,k,z)=>({u_tile_offset:w,u_velocity:f,u_color_ramp:E,u_velocity_res:m,u_max_speed:B,u_texture_offset:R,u_data_scale:k,u_data_offset:z}),mw=(w,f,m,E,B,R,k,z)=>({u_velocity:w,u_velocity_res:f,u_max_speed:m,u_speed_factor:E,u_lifetime_delta:B,u_rand_seed:Math.random(),u_texture_offset:R,u_data_scale:k,u_data_offset:z}),vw=o.a6.create(),M0=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee)=>{const Ke=B.transform,lt={u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:Ke.getCameraToCenterDistance(Fe),u_rotate_symbol:+m,u_aspect_ratio:Ke.width/Ke.height,u_fade_change:B.options.fadeDuration?B.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:k,u_coord_matrix:z,u_is_text:+K,u_pitch_with_map:+E,u_texsize:J,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:vw,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:vw,u_up_vector:[0,-1,0],u_icon_transition:Ee||0,u_icon_saturation:De};return Fe.name==="globe"&&(lt.u_tile_id=[ne.canonical.x,ne.canonical.y,1<<ne.canonical.z],lt.u_zoom_transition=he,lt.u_inv_rot_matrix=we,lt.u_merc_center=ye,lt.u_camera_forward=Ke._camera.forward(),lt.u_ecef_origin=o.cr(Ke.globeMatrix,ne.toUnwrapped()),lt.u_tile_matrix=Float32Array.from(Ke.globeMatrix),lt.u_up_vector=Oe),lt},Um=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De)=>o.e(M0(w,f,m,E,B,R,k,z,K,J,he,ye,we,Oe,Fe,De,1),{u_gamma_scale:E?B.transform.getCameraToCenterDistance(De)*Math.cos(B.terrain?0:B.transform._pitch):1,u_device_pixel_ratio:o.f.devicePixelRatio,u_is_halo:+ne,undefined:void 0}),L0=(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe)=>o.e(Um(w,f,m,E,B,R,k,z,!0,K,!0,ne,he,ye,we,Oe,Fe),{u_texsize_icon:J,u_texture_icon:1}),K_=(w,f,m,E)=>({u_matrix:w,u_emissive_strength:f,u_opacity:m,u_color:E}),mg=(w,f,m,E,B,R,k)=>o.e(function(z,K,J,ne){const he=J.imageManager.getPattern(z.toString(),K),{width:ye,height:we}=J.imageManager.getPixelSize(K),Oe=Math.pow(2,ne.tileID.overscaledZ),Fe=ne.tileSize*Math.pow(2,J.transform.tileZoom)/Oe,De=Fe*(ne.tileID.canonical.x+ne.tileID.wrap*Oe),Ee=Fe*ne.tileID.canonical.y;return{u_image:0,u_pattern_tl:he.tl,u_pattern_br:he.br,u_texsize:[ye,we],u_pattern_size:he.displaySize,u_tile_units_to_pixels:1/o.a3(ne,1,J.transform.tileZoom),u_pixel_coord_upper:[De>>16,Ee>>16],u_pixel_coord_lower:[65535&De,65535&Ee]}}(B,R,E,k),{u_matrix:w,u_emissive_strength:f,u_opacity:m}),Xp=(w,f,m,E,B,R,k,z,K,J,ne,he,ye=[0,0,0],we)=>{const Oe=E.style.light,Fe=Oe.properties.get("position"),De=[-Fe.x,-Fe.y,Fe.z],Ee=o.co.create();Oe.properties.get("anchor")==="viewport"&&(o.co.fromRotation(Ee,-E.transform.angle),o.N.transformMat3(De,De,Ee));const Ke=J.alphaMode==="MASK",lt=Oe.properties.get("color"),Ze=he.paint.get("model-ambient-occlusion-intensity"),ct=he.paint.get("model-color").constantOr(o.ax.white),Ve=he.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:w,u_lighting_matrix:f,u_normal_matrix:m,u_lightpos:De,u_lightintensity:Oe.properties.get("intensity"),u_lightcolor:[lt.r,lt.g,lt.b],u_camera_pos:ye,u_opacity:B,u_baseTextureIsAlpha:0,u_alphaMask:+Ke,u_alphaCutoff:J.alphaCutoff,u_baseColorFactor:[R.r,R.g,R.b,R.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:z,u_roughnessFactor:K,u_baseColorTexture:pa.BaseColor,u_metallicRoughnessTexture:pa.MetallicRoughness,u_normalTexture:pa.Normal,u_occlusionTexture:pa.Occlusion,u_emissionTexture:pa.Emission,u_color_mix:[ct.r,ct.g,ct.b,Ve],u_aoIntensity:Ze,u_emissive_strength:ne,u_occlusionTextureTransform:we||[0,0,0,0]}},zm=new Float32Array(16),$m=(w,f=zm,m=zm)=>({u_matrix:w,u_instance:f,u_node_matrix:m}),yw={fillExtrusion:w=>({u_matrix:new o.bK(w),u_lightpos:new o.bM(w),u_lightintensity:new o.bN(w),u_lightcolor:new o.bM(w),u_vertical_gradient:new o.bN(w),u_opacity:new o.bN(w),u_edge_radius:new o.bN(w),u_ao:new o.bL(w),u_tile_id:new o.bM(w),u_zoom_transition:new o.bN(w),u_inv_rot_matrix:new o.bK(w),u_merc_center:new o.bL(w),u_up_dir:new o.bM(w),u_height_lift:new o.bN(w),u_flood_light_color:new o.bM(w),u_vertical_scale:new o.bN(w),u_flood_light_intensity:new o.bN(w),u_ground_shadow_factor:new o.bM(w),u_emissive_strength:new o.bN(w)}),fillExtrusionDepth:w=>({u_matrix:new o.bK(w),u_edge_radius:new o.bN(w),u_vertical_scale:new o.bN(w)}),fillExtrusionPattern:w=>({u_matrix:new o.bK(w),u_lightpos:new o.bM(w),u_lightintensity:new o.bN(w),u_lightcolor:new o.bM(w),u_vertical_gradient:new o.bN(w),u_height_factor:new o.bN(w),u_edge_radius:new o.bN(w),u_ao:new o.bL(w),u_tile_id:new o.bM(w),u_zoom_transition:new o.bN(w),u_inv_rot_matrix:new o.bK(w),u_merc_center:new o.bL(w),u_up_dir:new o.bM(w),u_height_lift:new o.bN(w),u_image:new o.bO(w),u_texsize:new o.bL(w),u_pixel_coord_upper:new o.bL(w),u_pixel_coord_lower:new o.bL(w),u_tile_units_to_pixels:new o.bN(w),u_opacity:new o.bN(w)}),fillExtrusionGroundEffect:w=>({u_matrix:new o.bK(w),u_opacity:new o.bN(w),u_ao_pass:new o.bN(w),u_meter_to_tile:new o.bN(w),u_ao:new o.bL(w),u_flood_light_intensity:new o.bN(w),u_flood_light_color:new o.bM(w),u_attenuation:new o.bN(w),u_edge_radius:new o.bN(w),u_fb:new o.bO(w),u_fb_size:new o.bN(w)}),fill:w=>({u_matrix:new o.bK(w),u_emissive_strength:new o.bN(w)}),fillPattern:w=>({u_matrix:new o.bK(w),u_emissive_strength:new o.bN(w),u_image:new o.bO(w),u_texsize:new o.bL(w),u_pixel_coord_upper:new o.bL(w),u_pixel_coord_lower:new o.bL(w),u_tile_units_to_pixels:new o.bN(w)}),fillOutline:w=>({u_matrix:new o.bK(w),u_emissive_strength:new o.bN(w),u_world:new o.bL(w)}),fillOutlinePattern:w=>({u_matrix:new o.bK(w),u_emissive_strength:new o.bN(w),u_world:new o.bL(w),u_image:new o.bO(w),u_texsize:new o.bL(w),u_pixel_coord_upper:new o.bL(w),u_pixel_coord_lower:new o.bL(w),u_tile_units_to_pixels:new o.bN(w)}),circle:o.cs,collisionBox:w=>({u_matrix:new o.bK(w),u_camera_to_center_distance:new o.bN(w),u_extrude_scale:new o.bL(w)}),collisionCircle:w=>({u_matrix:new o.bK(w),u_inv_matrix:new o.bK(w),u_camera_to_center_distance:new o.bN(w),u_viewport_size:new o.bL(w)}),debug:w=>({u_color:new o.ca(w),u_matrix:new o.bK(w),u_overlay:new o.bO(w),u_overlay_scale:new o.bN(w)}),clippingMask:w=>({u_matrix:new o.bK(w)}),heatmap:w=>({u_extrude_scale:new o.bN(w),u_intensity:new o.bN(w),u_matrix:new o.bK(w),u_inv_rot_matrix:new o.bK(w),u_merc_center:new o.bL(w),u_tile_id:new o.bM(w),u_zoom_transition:new o.bN(w),u_up_dir:new o.bM(w)}),heatmapTexture:w=>({u_image:new o.bO(w),u_color_ramp:new o.bO(w),u_opacity:new o.bN(w)}),hillshade:w=>({u_matrix:new o.bK(w),u_image:new o.bO(w),u_latrange:new o.bL(w),u_light:new o.bL(w),u_shadow:new o.ca(w),u_highlight:new o.ca(w),u_emissive_strength:new o.bN(w),u_accent:new o.ca(w)}),hillshadePrepare:w=>({u_matrix:new o.bK(w),u_image:new o.bO(w),u_dimension:new o.bL(w),u_zoom:new o.bN(w)}),line:o.ct,linePattern:o.cu,raster:w=>({u_matrix:new o.bK(w),u_normalize_matrix:new o.bK(w),u_globe_matrix:new o.bK(w),u_merc_matrix:new o.bK(w),u_grid_matrix:new o.cb(w),u_tl_parent:new o.bL(w),u_scale_parent:new o.bN(w),u_fade_t:new o.bN(w),u_opacity:new o.bN(w),u_image0:new o.bO(w),u_image1:new o.bO(w),u_brightness_low:new o.bN(w),u_brightness_high:new o.bN(w),u_saturation_factor:new o.bN(w),u_contrast_factor:new o.bN(w),u_spin_weights:new o.bM(w),u_perspective_transform:new o.bL(w),u_raster_elevation:new o.bN(w),u_zoom_transition:new o.bN(w),u_merc_center:new o.bL(w),u_cutoff_params:new o.bP(w),u_colorization_mix:new o.bP(w),u_colorization_offset:new o.bN(w),u_color_ramp:new o.bO(w),u_texture_offset:new o.bL(w),u_texture_res:new o.bL(w),u_emissive_strength:new o.bN(w)}),rasterParticle:w=>({u_matrix:new o.bK(w),u_normalize_matrix:new o.bK(w),u_globe_matrix:new o.bK(w),u_merc_matrix:new o.bK(w),u_grid_matrix:new o.cb(w),u_tl_parent:new o.bL(w),u_scale_parent:new o.bN(w),u_fade_t:new o.bN(w),u_opacity:new o.bN(w),u_image0:new o.bO(w),u_image1:new o.bO(w),u_raster_elevation:new o.bN(w),u_zoom_transition:new o.bN(w),u_merc_center:new o.bL(w),u_cutoff_params:new o.bP(w)}),rasterParticleTexture:w=>({u_texture:new o.bO(w),u_opacity:new o.bN(w)}),rasterParticleDraw:w=>({u_tile_offset:new o.bL(w),u_velocity:new o.bO(w),u_color_ramp:new o.bO(w),u_velocity_res:new o.bL(w),u_max_speed:new o.bN(w),u_texture_offset:new o.bL(w),u_data_scale:new o.bP(w),u_data_offset:new o.bN(w)}),rasterParticleUpdate:w=>({u_velocity:new o.bO(w),u_velocity_res:new o.bL(w),u_max_speed:new o.bN(w),u_speed_factor:new o.bN(w),u_lifetime_delta:new o.bN(w),u_rand_seed:new o.bN(w),u_texture_offset:new o.bL(w),u_data_scale:new o.bP(w),u_data_offset:new o.bN(w)}),symbolIcon:w=>({u_is_size_zoom_constant:new o.bO(w),u_is_size_feature_constant:new o.bO(w),u_size_t:new o.bN(w),u_size:new o.bN(w),u_camera_to_center_distance:new o.bN(w),u_rotate_symbol:new o.bO(w),u_aspect_ratio:new o.bN(w),u_fade_change:new o.bN(w),u_matrix:new o.bK(w),u_label_plane_matrix:new o.bK(w),u_coord_matrix:new o.bK(w),u_is_text:new o.bO(w),u_pitch_with_map:new o.bO(w),u_texsize:new o.bL(w),u_tile_id:new o.bM(w),u_zoom_transition:new o.bN(w),u_inv_rot_matrix:new o.bK(w),u_merc_center:new o.bL(w),u_camera_forward:new o.bM(w),u_tile_matrix:new o.bK(w),u_up_vector:new o.bM(w),u_ecef_origin:new o.bM(w),u_texture:new o.bO(w),u_icon_transition:new o.bN(w),u_icon_saturation:new o.bN(w)}),symbolSDF:w=>({u_is_size_zoom_constant:new o.bO(w),u_is_size_feature_constant:new o.bO(w),u_size_t:new o.bN(w),u_size:new o.bN(w),u_camera_to_center_distance:new o.bN(w),u_rotate_symbol:new o.bO(w),u_aspect_ratio:new o.bN(w),u_fade_change:new o.bN(w),u_matrix:new o.bK(w),u_label_plane_matrix:new o.bK(w),u_coord_matrix:new o.bK(w),u_is_text:new o.bO(w),u_pitch_with_map:new o.bO(w),u_texsize:new o.bL(w),u_texture:new o.bO(w),u_gamma_scale:new o.bN(w),u_device_pixel_ratio:new o.bN(w),u_tile_id:new o.bM(w),u_zoom_transition:new o.bN(w),u_inv_rot_matrix:new o.bK(w),u_merc_center:new o.bL(w),u_camera_forward:new o.bM(w),u_tile_matrix:new o.bK(w),u_up_vector:new o.bM(w),u_ecef_origin:new o.bM(w),u_is_halo:new o.bO(w)}),symbolTextAndIcon:w=>({u_is_size_zoom_constant:new o.bO(w),u_is_size_feature_constant:new o.bO(w),u_size_t:new o.bN(w),u_size:new o.bN(w),u_camera_to_center_distance:new o.bN(w),u_rotate_symbol:new o.bO(w),u_aspect_ratio:new o.bN(w),u_fade_change:new o.bN(w),u_matrix:new o.bK(w),u_label_plane_matrix:new o.bK(w),u_coord_matrix:new o.bK(w),u_is_text:new o.bO(w),u_pitch_with_map:new o.bO(w),u_texsize:new o.bL(w),u_texsize_icon:new o.bL(w),u_texture:new o.bO(w),u_texture_icon:new o.bO(w),u_gamma_scale:new o.bN(w),u_device_pixel_ratio:new o.bN(w),u_is_halo:new o.bO(w)}),background:w=>({u_matrix:new o.bK(w),u_emissive_strength:new o.bN(w),u_opacity:new o.bN(w),u_color:new o.ca(w)}),backgroundPattern:w=>({u_matrix:new o.bK(w),u_emissive_strength:new o.bN(w),u_opacity:new o.bN(w),u_image:new o.bO(w),u_pattern_tl:new o.bL(w),u_pattern_br:new o.bL(w),u_texsize:new o.bL(w),u_pattern_size:new o.bL(w),u_pixel_coord_upper:new o.bL(w),u_pixel_coord_lower:new o.bL(w),u_tile_units_to_pixels:new o.bN(w)}),terrainRaster:z_,terrainDepth:z_,skybox:w=>({u_matrix:new o.bK(w),u_sun_direction:new o.bM(w),u_cubemap:new o.bO(w),u_opacity:new o.bN(w),u_temporal_offset:new o.bN(w)}),skyboxGradient:w=>({u_matrix:new o.bK(w),u_color_ramp:new o.bO(w),u_center_direction:new o.bM(w),u_radius:new o.bN(w),u_opacity:new o.bN(w),u_temporal_offset:new o.bN(w)}),skyboxCapture:w=>({u_matrix_3f:new o.cb(w),u_sun_direction:new o.bM(w),u_sun_intensity:new o.bN(w),u_color_tint_r:new o.bP(w),u_color_tint_m:new o.bP(w),u_luminance:new o.bN(w)}),globeRaster:w=>({u_proj_matrix:new o.bK(w),u_globe_matrix:new o.bK(w),u_normalize_matrix:new o.bK(w),u_merc_matrix:new o.bK(w),u_zoom_transition:new o.bN(w),u_merc_center:new o.bL(w),u_image0:new o.bO(w),u_grid_matrix:new o.cb(w),u_skirt_height:new o.bN(w),u_far_z_cutoff:new o.bN(w),u_frustum_tl:new o.bM(w),u_frustum_tr:new o.bM(w),u_frustum_br:new o.bM(w),u_frustum_bl:new o.bM(w),u_globe_pos:new o.bM(w),u_globe_radius:new o.bN(w),u_viewport:new o.bL(w)}),globeAtmosphere:w=>({u_frustum_tl:new o.bM(w),u_frustum_tr:new o.bM(w),u_frustum_br:new o.bM(w),u_frustum_bl:new o.bM(w),u_horizon:new o.bN(w),u_transition:new o.bN(w),u_fadeout_range:new o.bN(w),u_color:new o.bP(w),u_high_color:new o.bP(w),u_space_color:new o.bP(w),u_temporal_offset:new o.bN(w),u_horizon_angle:new o.bN(w)}),model:w=>({u_matrix:new o.bK(w),u_lighting_matrix:new o.bK(w),u_normal_matrix:new o.bK(w),u_lightpos:new o.bM(w),u_lightintensity:new o.bN(w),u_lightcolor:new o.bM(w),u_camera_pos:new o.bM(w),u_opacity:new o.bN(w),u_baseColorFactor:new o.bP(w),u_emissiveFactor:new o.bP(w),u_metallicFactor:new o.bN(w),u_roughnessFactor:new o.bN(w),u_baseTextureIsAlpha:new o.bO(w),u_alphaMask:new o.bO(w),u_alphaCutoff:new o.bN(w),u_baseColorTexture:new o.bO(w),u_metallicRoughnessTexture:new o.bO(w),u_normalTexture:new o.bO(w),u_occlusionTexture:new o.bO(w),u_emissionTexture:new o.bO(w),u_color_mix:new o.bP(w),u_aoIntensity:new o.bN(w),u_emissive_strength:new o.bN(w),u_occlusionTextureTransform:new o.bP(w)}),modelDepth:w=>({u_matrix:new o.bK(w),u_instance:new o.bK(w),u_node_matrix:new o.bK(w)}),groundShadow:w=>({u_matrix:new o.bK(w),u_ground_shadow_factor:new o.bM(w)}),stars:w=>({u_matrix:new o.bK(w),u_up:new o.bM(w),u_right:new o.bM(w),u_intensity_multiplier:new o.bN(w)})};let $;function Z(w,f,m,E,B,R,k){const z=w.context,K=z.gl,J=w.transform,ne=w.getOrCreateProgram("collisionBox"),he=[];let ye=0,we=0;for(let Ze=0;Ze<E.length;Ze++){const ct=E[Ze],Ve=f.getTile(ct),ut=Ve.getBucket(m);if(!ut)continue;const Ct=wa(ct,ut,J);let Lt=Ct;B[0]===0&&B[1]===0||(Lt=w.translatePosMatrix(Ct,Ve,B,R));const $t=k?ut.textCollisionBox:ut.iconCollisionBox,pn=ut.collisionCircleArray;if(pn.length>0){const Kt=o.a6.create(),Cn=Lt;o.a6.mul(Kt,ut.placementInvProjMatrix,J.glCoordMatrix),o.a6.mul(Kt,Kt,ut.placementViewportMatrix),he.push({circleArray:pn,circleOffset:we,transform:Cn,invTransform:Kt,projection:ut.getProjection()}),ye+=pn.length/4,we=ye}$t&&(w.terrain&&w.terrain.setupElevationDraw(Ve,ne),ne.draw(w,K.LINES,ir.disabled,di.disabled,w.colorModeForRenderPass(),Yr.disabled,km(Lt,J,Ve,ut.getProjection()),m.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,null,J.zoom,null,[$t.collisionVertexBuffer,$t.collisionVertexBufferExt]))}if(!k||!he.length)return;const Oe=w.getOrCreateProgram("collisionCircle"),Fe=new o.cv;Fe.resize(4*ye),Fe._trim();let De=0;for(const Ze of he)for(let ct=0;ct<Ze.circleArray.length/4;ct++){const Ve=4*ct,ut=Ze.circleArray[Ve+0],Ct=Ze.circleArray[Ve+1],Lt=Ze.circleArray[Ve+2],$t=Ze.circleArray[Ve+3];Fe.emplace(De++,ut,Ct,Lt,$t,0),Fe.emplace(De++,ut,Ct,Lt,$t,1),Fe.emplace(De++,ut,Ct,Lt,$t,2),Fe.emplace(De++,ut,Ct,Lt,$t,3)}(!$||$.length<2*ye)&&($=function(Ze){const ct=2*Ze,Ve=new o.aw;Ve.resize(ct),Ve._trim();for(let ut=0;ut<ct;ut++){const Ct=6*ut;Ve.uint16[Ct+0]=4*ut+0,Ve.uint16[Ct+1]=4*ut+1,Ve.uint16[Ct+2]=4*ut+2,Ve.uint16[Ct+3]=4*ut+2,Ve.uint16[Ct+4]=4*ut+3,Ve.uint16[Ct+5]=4*ut+0}return Ve}(ye));const Ee=z.createIndexBuffer($,!0),Ke=z.createVertexBuffer(Fe,o.cw.members,!0);for(const Ze of he){const ct={u_matrix:Ze.transform,u_inv_matrix:Ze.invTransform,u_camera_to_center_distance:(lt=J).getCameraToCenterDistance(Ze.projection),u_viewport_size:[lt.width,lt.height]};Oe.draw(w,K.TRIANGLES,ir.disabled,di.disabled,w.colorModeForRenderPass(),Yr.disabled,ct,m.id,Ke,Ee,o.aB.simpleSegment(0,2*Ze.circleOffset,Ze.circleArray.length,Ze.circleArray.length/2),null,J.zoom)}var lt;Ke.destroy(),Ee.destroy()}const Ae=o.a6.create();function Se(w){const f=w._camera.getWorldToCamera(w.worldSize,1),m=o.a6.multiply([],f,w.globeMatrix);o.a6.invert(m,m);const E=[0,0,0],B=[0,1,0,0];return o.a7.transformMat4(B,B,m),E[0]=B[0],E[1]=B[1],E[2]=B[2],o.N.normalize(E,E),E}function Pe({width:w,height:f,anchor:m,textOffset:E,textScale:B},R){const{horizontalAlign:k,verticalAlign:z}=o.bf(m),K=-(k-.5)*w,J=-(z-.5)*f,ne=o.bd(m,E);return new o.P((K/B+ne[0])*R,(J/B+ne[1])*R)}function nt(w,f,m,E,B,R,k,z,K,J,ne){const he=w.text.placedSymbolArray,ye=w.text.dynamicLayoutVertexArray,we=w.icon.dynamicLayoutVertexArray,Oe={},Fe=w.getProjection(),De=xa(z,Fe,R),Ee=R.elevation,Ke=Fe.upVectorScale(z.canonical,R.center.lat,R.worldSize).metersToTile;ye.clear();for(let lt=0;lt<he.length;lt++){const Ze=he.get(lt),{tileAnchorX:ct,tileAnchorY:Ve,numGlyphs:ut}=Ze,Ct=Ze.hidden||!Ze.crossTileID||w.allowVerticalPlacement&&!Ze.placedOrientation?null:E[Ze.crossTileID];if(Ct){let Lt=0,$t=0,pn=0;if(Ee){const jn=Ee?Ee.getAtTileOffset(z,ct,Ve):0,[sr,tr,pr]=Fe.upVector(z.canonical,ct,Ve);Lt=jn*sr*Ke,$t=jn*tr*Ke,pn=jn*pr*Ke}let[Kt,Cn,bn,$n]=vl(Ze.projectedAnchorX+Lt,Ze.projectedAnchorY+$t,Ze.projectedAnchorZ+pn,m?De:k);const Yt=ig(R.getCameraToCenterDistance(Fe),$n);let vn=B.evaluateSizeForFeature(w.textSizeData,J,Ze)*Yt/o.bc;m&&(vn*=w.tilePixelRatio/K);const Nt=Pe(Ct,vn);m?({x:Kt,y:Cn,z:bn}=Fe.projectTilePoint(ct+Nt.x,Ve+Nt.y,z.canonical),[Kt,Cn,bn]=vl(Kt+Lt,Cn+$t,bn+pn,k)):(f&&Nt._rotate(-R.angle),Kt+=Nt.x,Cn+=Nt.y,bn=0);const ln=w.allowVerticalPlacement&&Ze.placedOrientation===o.b6.vertical?Math.PI/2:0;for(let jn=0;jn<ut;jn++)o.b9(ye,Kt,Cn,bn,ln);ne&&Ze.associatedIconIndex>=0&&(Oe[Ze.associatedIconIndex]={x:Kt,y:Cn,z:bn,angle:ln})}else Ci(ut,ye)}if(ne){we.clear();const lt=w.icon.placedSymbolArray;for(let Ze=0;Ze<lt.length;Ze++){const ct=lt.get(Ze),{numGlyphs:Ve}=ct,ut=Oe[Ze];if(ct.hidden||!ut)Ci(Ve,we);else{const{x:Ct,y:Lt,z:$t,angle:pn}=ut;for(let Kt=0;Kt<Ve;Kt++)o.b9(we,Ct,Lt,$t,pn)}}w.icon.dynamicLayoutVertexBuffer.updateData(we)}w.text.dynamicLayoutVertexBuffer.updateData(ye)}function st(w,f,m,E,B,R,k={}){const z=m.paint.get("icon-translate"),K=m.paint.get("text-translate"),J=m.paint.get("icon-translate-anchor"),ne=m.paint.get("text-translate-anchor"),he=m.layout.get("icon-rotation-alignment"),ye=m.layout.get("text-rotation-alignment"),we=m.layout.get("icon-pitch-alignment"),Oe=m.layout.get("text-pitch-alignment"),Fe=m.layout.get("icon-keep-upright"),De=m.layout.get("text-keep-upright"),Ee=m.paint.get("icon-color-saturation"),Ke=w.context,lt=Ke.gl,Ze=w.transform,ct=he==="map",Ve=ye==="map",ut=we==="map",Ct=Oe==="map",Lt=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let $t=!1;const pn=w.depthModeForSublayer(0,ir.ReadOnly),Kt=[o.a5(Ze.center.lng),o.ae(Ze.center.lat)],Cn=m.layout.get("text-variable-anchor"),bn=Ze.projection.name==="globe",$n=[],Yt=[0,-1,0];for(const vn of E){const Nt=f.getTile(vn),ln=Nt.getBucket(m);if(!ln||ln.projection.name==="mercator"&&bn||ln.fullyClipped)continue;const jn=ln.projection.name==="globe",sr=jn?o.S(Ze.zoom):0,tr=xa(vn,ln.getProjection(),Ze),pr=Ze.calculatePixelsToTileUnitsMatrix(Nt),kr=Cn&&ln.hasTextData(),Zr=ln.hasIconTextFit()&&kr&&ln.hasIconData(),jr=ln.getProjection().createInversionMatrix(Ze,vn.canonical),Wr=()=>{const ia=ct&&m.layout.get("symbol-placement")!=="point",as=[],Os=ia||Zr,ls=m.paint.get("icon-image-cross-fade").constantOr(0);w.terrainRenderModeElevated()&&ut&&as.push("PITCH_WITH_MAP_TERRAIN"),jn&&(as.push("PROJECTION_GLOBE_VIEW"),Os&&as.push("PROJECTED_POS_ON_VIEWPORT")),ls>0&&as.push("ICON_TRANSITION"),ln.icon.zOffsetVertexBuffer&&as.push("Z_OFFSET"),Ee<1&&as.push("SATURATION");const Ls=ln.icon.programConfigurations.get(m.id),Lo=w.getOrCreateProgram(ln.sdfIcons?"symbolSDF":"symbolIcon",{config:Ls,defines:as});let $s;const Nl=Nt.imageAtlasTexture?Nt.imageAtlasTexture.size:[0,0],Mc=ln.iconSizeData,eh=o.b5(Mc,Ze.zoom),ep=ut||Ze.pitch!==0,th=Jh(tr,Nt.tileID.canonical,ut,ct,Ze,ln.getProjection(),pr),kl=Up(tr,Nt.tileID.canonical,ut,ct,Ze,ln.getProjection(),pr),Al=w.translatePosMatrix(kl,Nt,z,J,!0),Au=w.translatePosMatrix(tr,Nt,z,J),Pu=Os?Ae:th,nh=ct&&!ut&&!ia;let tp=Yt;!bn&&!Ze.mercatorFromTransition||ct||(tp=Se(Ze));const wg=jn?tp:Yt;$s=ln.sdfIcons&&!ln.iconsInText?Um(Mc.kind,eh,nh,ut,w,Au,Pu,Al,!1,Nl,!0,vn,sr,Kt,jr,wg,ln.getProjection()):M0(Mc.kind,eh,nh,ut,w,Au,Pu,Al,!1,Nl,vn,sr,Kt,jr,wg,ln.getProjection(),Ee,ls);const nv=Nt.imageAtlasTexture?Nt.imageAtlasTexture:null,r1=m.layout.get("icon-size").constantOr(0)!==1||ln.iconsNeedLinear,i1=ln.sdfIcons||w.options.rotating||w.options.zooming||r1||ep?lt.LINEAR:lt.NEAREST,rS=ln.sdfIcons&&m.paint.get("icon-halo-width").constantOr(1)!==0,s1=w.terrain&&ut&&ia?o.a6.invert(o.a6.create(),th):Ae;if(ia&&ln.icon){const N0=Ze.elevation,Ew=N0?N0.getAtTileOffsetFunc(vn,Ze.center.lat,Ze.worldSize,ln.getProjection()):null,sA=Zd(tr,Nt.tileID.canonical,ut,ct,Ze,ln.getProjection(),pr);We(ln,tr,w,!1,sA,kl,ut,Fe,Ew,vn)}return{program:Lo,buffers:ln.icon,uniformValues:$s,atlasTexture:nv,atlasTextureIcon:null,atlasInterpolation:i1,atlasInterpolationIcon:null,isSDF:ln.sdfIcons,hasHalo:rS,tile:Nt,labelPlaneMatrixInv:s1}},Vi=()=>{const ia=Ve&&m.layout.get("symbol-placement")!=="point",as=[],Os=ia||Cn||Zr;w.terrainRenderModeElevated()&&Ct&&as.push("PITCH_WITH_MAP_TERRAIN"),jn&&(as.push("PROJECTION_GLOBE_VIEW"),Os&&as.push("PROJECTED_POS_ON_VIEWPORT")),ln.text.zOffsetVertexBuffer&&as.push("Z_OFFSET");const ls=ln.text.programConfigurations.get(m.id),Ls=w.getOrCreateProgram(ln.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:ls,defines:as});let Lo,$s=[0,0],Nl=null;const Mc=ln.textSizeData;ln.iconsInText&&($s=Nt.imageAtlasTexture?Nt.imageAtlasTexture.size:[0,0],Nl=Nt.imageAtlasTexture?Nt.imageAtlasTexture:null,Lo=Ct||Ze.pitch!==0||w.options.rotating||w.options.zooming||Mc.kind==="composite"||Mc.kind==="camera"?lt.LINEAR:lt.NEAREST);const eh=Nt.glyphAtlasTexture?Nt.glyphAtlasTexture.size:[0,0],ep=o.b5(Mc,Ze.zoom),th=Jh(tr,Nt.tileID.canonical,Ct,Ve,Ze,ln.getProjection(),pr),kl=Up(tr,Nt.tileID.canonical,Ct,Ve,Ze,ln.getProjection(),pr),Al=w.translatePosMatrix(kl,Nt,K,ne,!0),Au=w.translatePosMatrix(tr,Nt,K,ne),Pu=Os?Ae:th,nh=Ve&&!Ct&&!ia;let tp=Yt;!bn&&!Ze.mercatorFromTransition||Ve||(tp=Se(Ze));const wg=jn?tp:Yt;let nv;nv=ln.iconsInText?L0(Mc.kind,ep,nh,Ct,w,Au,Pu,Al,eh,$s,vn,sr,Kt,jr,wg,ln.getProjection()):Um(Mc.kind,ep,nh,Ct,w,Au,Pu,Al,!0,eh,!0,vn,sr,Kt,jr,wg,ln.getProjection());const r1=Nt.glyphAtlasTexture?Nt.glyphAtlasTexture:null,i1=lt.LINEAR,rS=m.paint.get("text-halo-width").constantOr(1)!==0,s1=w.terrain&&Ct&&ia?o.a6.invert(o.a6.create(),th):Ae;if(ia&&ln.text){const N0=Ze.elevation,Ew=N0?N0.getAtTileOffsetFunc(vn,Ze.center.lat,Ze.worldSize,ln.getProjection()):null,sA=Zd(tr,Nt.tileID.canonical,Ct,Ve,Ze,ln.getProjection(),pr);We(ln,tr,w,!0,sA,kl,Ct,De,Ew,vn)}return{program:Ls,buffers:ln.text,uniformValues:nv,atlasTexture:r1,atlasTextureIcon:Nl,atlasInterpolation:i1,atlasInterpolationIcon:Lo,isSDF:!0,hasHalo:rS,tile:Nt,labelPlaneMatrixInv:s1}},vi=ln.icon.segments.get().length,Li=ln.text.segments.get().length,Bi=vi&&!k.onlyText?Wr():null,ms=Li&&!k.onlyIcons?Vi():null,Co=m.paint.get("icon-opacity").constantOr(1),os=m.paint.get("text-opacity").constantOr(1);if(Lt&&ln.canOverlap){$t=!0;const ia=Co&&!k.onlyText?ln.icon.segments.get():[],as=os&&!k.onlyIcons?ln.text.segments.get():[];for(const Os of ia)$n.push({segments:new o.aB([Os]),sortKey:Os.sortKey,state:Bi});for(const Os of as)$n.push({segments:new o.aB([Os]),sortKey:Os.sortKey,state:ms})}else k.onlyText||$n.push({segments:Co?ln.icon.segments:new o.aB([]),sortKey:0,state:Bi}),k.onlyIcons||$n.push({segments:os?ln.text.segments:new o.aB([]),sortKey:0,state:ms})}$t&&$n.sort((vn,Nt)=>vn.sortKey-Nt.sortKey);for(const vn of $n){const Nt=vn.state;if(Nt)if(w.terrain&&w.terrain.setupElevationDraw(Nt.tile,Nt.program,{useDepthForOcclusion:Ze.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Nt.labelPlaneMatrixInv}),Ke.activeTexture.set(lt.TEXTURE0),Nt.atlasTexture&&Nt.atlasTexture.bind(Nt.atlasInterpolation,lt.CLAMP_TO_EDGE,!0),Nt.atlasTextureIcon&&(Ke.activeTexture.set(lt.TEXTURE1),Nt.atlasTextureIcon&&Nt.atlasTextureIcon.bind(Nt.atlasInterpolationIcon,lt.CLAMP_TO_EDGE,!0)),w.uploadCommonLightUniforms(w.context,Nt.program),Nt.hasHalo){const ln=Nt.uniformValues;ln.u_is_halo=1,ht(Nt.buffers,vn.segments,m,w,Nt.program,pn,B,R,ln,2),ln.u_is_halo=0}else{if(Nt.isSDF){const ln=Nt.uniformValues;Nt.hasHalo&&(ln.u_is_halo=1,ht(Nt.buffers,vn.segments,m,w,Nt.program,pn,B,R,ln,1)),ln.u_is_halo=0}ht(Nt.buffers,vn.segments,m,w,Nt.program,pn,B,R,Nt.uniformValues,1)}}}function ht(w,f,m,E,B,R,k,z,K,J){const ne=[w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer,w.iconTransitioningVertexBuffer,w.globeExtVertexBuffer,w.zOffsetVertexBuffer];B.draw(E,E.context.gl.TRIANGLES,R,k,z,Yr.disabled,K,m.id,w.layoutVertexBuffer,w.indexBuffer,f,m.paint,E.transform.zoom,w.programConfigurations.get(m.id),ne,J)}function At(w,f,m,E,B,R,k){const z=w.context.gl,K=m.paint.get("fill-pattern"),J=K&&K.constantOr(1);let ne,he,ye,we,Oe;k?(he=J&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=z.LINES):(he=J?"fillPattern":"fill",ne=z.TRIANGLES);for(const Fe of E){const De=f.getTile(Fe);if(J&&!De.patternsLoaded())continue;const Ee=De.getBucket(m);if(!Ee)continue;w.prepareDrawTile();const Ke=Ee.programConfigurations.get(m.id),lt=w.isTileAffectedByFog(Fe),Ze=w.getOrCreateProgram(he,{config:Ke,overrideFog:lt});J&&(w.context.activeTexture.set(z.TEXTURE0),De.imageAtlasTexture&&De.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ke.updatePaintBuffers());const ct=K.constantOr(null);if(ct&&De.imageAtlas){const Ct=De.imageAtlas.patternPositions[ct.toString()];Ct&&Ke.setConstantPatternPositions(Ct)}const Ve=w.translatePosMatrix(Fe.projMatrix,De,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor")),ut=m.paint.get("fill-emissive-strength");if(k){we=Ee.indexBuffer2,Oe=Ee.segments2;const Ct=w.terrain&&w.terrain.renderingToTexture?w.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];ye=he==="fillOutlinePattern"&&J?j_(Ve,ut,w,De,Ct):Wf(Ve,ut,Ct)}else we=Ee.indexBuffer,Oe=Ee.segments,ye=J?Q_(Ve,ut,w,De):fg(Ve,ut);w.uploadCommonUniforms(w.context,Ze,Fe.toUnwrapped()),Ze.draw(w,ne,B,w.stencilModeForClipping(Fe),R,Yr.disabled,ye,m.id,Ee.layoutVertexBuffer,we,Oe,m.paint,w.transform.zoom,Ke,void 0)}}function ot(w,f,m,E,B,R,k,z){m.resetLayerRenderingStats(w);const K=w.context,J=K.gl,ne=w.transform,he=m.paint.get("fill-extrusion-pattern"),ye=he.constantOr(1),we=m.paint.get("fill-extrusion-opacity"),Oe=w.style.enable3dLights(),Fe=m.paint.get(Oe&&!ye?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),De=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),Fe],Ee=m.layout.get("fill-extrusion-edge-radius"),Ke=Ee>0&&!m.paint.get("fill-extrusion-rounded-roof"),lt=Ke?0:Ee,Ze=ne.projection.name==="globe"?o.cF():0,ct=ne.projection.name==="globe",Ve=ct?o.S(ne.zoom):0,ut=[o.a5(ne.center.lng),o.ae(ne.center.lat)],Ct=m.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),Lt=m.paint.get("fill-extrusion-flood-light-intensity"),$t=m.paint.get("fill-extrusion-vertical-scale"),pn=Rl(w,m.paint.get("fill-extrusion-cutoff-fade-range")),Kt=m.paint.get("fill-extrusion-emissive-strength"),Cn=[];let bn;ct&&Cn.push("PROJECTION_GLOBE_VIEW"),De[0]>0&&Cn.push("FAUX_AO"),Ke&&Cn.push("ZERO_ROOF_RADIUS"),z&&Cn.push("HAS_CENTROID"),Lt>0&&Cn.push("FLOOD_LIGHT"),pn.shouldRenderCutoff&&Cn.push("RENDER_CUTOFF");const $n=w.renderPass==="shadow",Yt=w.shadowRenderer,vn=$n&&!!Yt;w.shadowRenderer&&(w.shadowRenderer.useNormalOffset=!0);let Nt=[0,0,0];if(Yt){const sr=w.style.directionalLight,tr=w.style.ambientLight;sr&&tr&&(Nt=Sc(sr,tr)),bn=Cn.concat(["SHADOWS_SINGLE_CASCADE"])}const ln=vn?"fillExtrusionDepth":ye?"fillExtrusionPattern":"fillExtrusion",jn=m.getLayerRenderingStats();for(const sr of E){const tr=f.getTile(sr),pr=tr.getBucket(m);if(!pr||pr.projection.name!==ne.projection.name)continue;let kr=!1;Yt&&(kr=Yt.getMaxCascadeForTile(sr.toUnwrapped())===0);const Zr=w.isTileAffectedByFog(sr),jr=pr.programConfigurations.get(m.id),Wr=w.getOrCreateProgram(ln,{config:jr,defines:kr?bn:Cn,overrideFog:Zr});if(w.terrain&&w.terrain.setupElevationDraw(tr,Wr,{useMeterToDem:!0}),!pr.centroidVertexBuffer){const Co=Wr.attributes.a_centroid_pos;Co!==void 0&&J.vertexAttrib2f(Co,0,0)}!$n&&Yt&&Yt.setupShadows(tr.tileID.toUnwrapped(),Wr,"vector-tile",tr.tileID.overscaledZ),ye&&(w.context.activeTexture.set(J.TEXTURE0),tr.imageAtlasTexture&&tr.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),jr.updatePaintBuffers());const Vi=he.constantOr(null);if(Vi&&tr.imageAtlas){const Co=tr.imageAtlas.patternPositions[Vi.toString()];Co&&jr.setConstantPatternPositions(Co)}const vi=m.paint.get("fill-extrusion-vertical-gradient");let Li;if($n&&Yt){if(Hn(tr.tileID,pr,w))continue;const Co=Yt.calculateShadowPassMatrixFromTile(tr.tileID.toUnwrapped());Li=sd(Co,lt,$t)}else{const Co=w.translatePosMatrix(sr.expandedProjMatrix,tr,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),os=ne.projection.createInversionMatrix(ne,sr.canonical);Li=ye?Pl(Co,w,vi,we,De,lt,sr,tr,Ze,Ve,ut,os,Ct,$t):I0(Co,w,vi,we,De,lt,sr,Ze,Ve,ut,os,Ct,$t,Lt,Nt,Kt)}w.uploadCommonUniforms(K,Wr,sr.toUnwrapped(),null,pn);let Bi=pr.segments;if(ne.projection.name==="mercator"&&!$n&&(Bi=pr.getVisibleSegments(tr.tileID,w.terrain,w.transform.getFrustum(0)),!Bi.get().length))continue;if(jn)if($n)for(const Co of Bi.get())jn.numRenderedVerticesInShadowPass+=Co.primitiveLength;else for(const Co of Bi.get())jn.numRenderedVerticesInTransparentPass+=Co.primitiveLength;const ms=[];(w.terrain||z)&&ms.push(pr.centroidVertexBuffer),ct&&ms.push(pr.layoutVertexExtBuffer),Wr.draw(w,K.gl.TRIANGLES,B,R,k,Yr.backCCW,Li,m.id,pr.layoutVertexBuffer,pr.indexBuffer,Bi,m.paint,w.transform.zoom,jr,ms)}w.shadowRenderer&&(w.shadowRenderer.useNormalOffset=!1)}function nn(w,f,m,E,B,R,k,z,K,J,ne,he,ye,we,Oe,Fe,De,Ee,Ke){const lt=w.context,Ze=lt.gl,ct=w.transform,Ve=w.transform.zoom,ut=[],Ct=Rl(w,m.paint.get("fill-extrusion-cutoff-fade-range"));J==="clear"?(ut.push("CLEAR_SUBPASS"),Ke&&(ut.push("CLEAR_FROM_TEXTURE"),lt.activeTexture.set(Ze.TEXTURE0),Ke.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE))):J==="sdf"&&ut.push("SDF_SUBPASS"),De&&ut.push("HAS_CENTROID"),Ct.shouldRenderCutoff&&ut.push("RENDER_CUTOFF");const Lt=m.layout.get("fill-extrusion-edge-radius"),$t=(pn,Kt,Cn,bn,$n)=>{const Yt=Kt.programConfigurations.get(m.id),vn=w.isTileAffectedByFog(pn),Nt=w.getOrCreateProgram("fillExtrusionGroundEffect",{config:Yt,defines:ut,overrideFog:vn}),ln=((sr,tr,pr,kr,Zr,jr,Wr,Vi,vi,Li,Bi)=>({u_matrix:tr,u_opacity:pr,u_ao_pass:kr?1:0,u_meter_to_tile:Zr,u_ao:jr,u_flood_light_intensity:Wr,u_flood_light_color:Vi,u_attenuation:vi,u_edge_radius:Li,u_fb:0,u_fb_size:Bi}))(0,bn,ne,K,$n,[he,ye*$n],we,Oe,Fe,Ve>=17?0:Lt*$n,Ke?Ke.size[0]:0),jn=[];De&&jn.push(Kt.hiddenByLandmarkVertexBuffer),w.uploadCommonUniforms(lt,Nt,pn.toUnwrapped(),null,Ct),Nt.draw(w,lt.gl.TRIANGLES,B,R,k,z,ln,m.id,Kt.vertexBuffer,Kt.indexBuffer,Cn,m.paint,Ve,Yt,jn)};for(const pn of E){const Kt=f.getTile(pn),Cn=Kt.getBucket(m);if(!Cn||Cn.projection.name!==ct.projection.name||!Cn.groundEffect||Cn.groundEffect&&!Cn.groundEffect.hasData())continue;const bn=Cn.groundEffect,$n=1/Cn.tileToMeter;{const Yt=w.translatePosMatrix(pn.projMatrix,Kt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),vn=bn.getDefaultSegment();$t(pn,bn,vn,Yt,$n)}if(Ee)for(let Yt=0;Yt<4;Yt++){const vn=o.cG[Yt](pn),Nt=f.getTile(vn);if(!Nt)continue;const ln=Nt.getBucket(m);if(!ln||ln.projection.name!==ct.projection.name||!ln.groundEffect||ln.groundEffect&&!ln.groundEffect.hasData())continue;const jn=ln.groundEffect;let sr,tr;Yt===0?(sr=[-o.V,0,0],tr=1):Yt===1?(sr=[o.V,0,0],tr=0):Yt===2?(sr=[0,-o.V,0],tr=3):(sr=[0,o.V,0],tr=2);const pr=jn.regionSegments[tr];if(!pr)continue;const kr=new Float32Array(16);o.a6.translate(kr,pn.projMatrix,sr),$t(pn,jn,pr,w.translatePosMatrix(kr,Kt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),$n)}}}function In(w,f,m,E,B,R,k){E.centroidVertexArray.length===0&&E.createCentroidsBuffer();const z=R?R.findDEMTileFor(m):null;if(!(z&&z.dem||k))return;const K=Ee=>new o.P(Math.ceil((Ee+o.cJ)*o.cK),0),J=Ee=>{const Ke=f.getSource().minzoom,lt=ct=>{const Ve=f.getTileByID(ct);if(Ve&&Ve.hasData())return Ve.getBucket(B)},Ze=[0,-1,1];for(const ct of Ze){if(Ee.overscaledZ+ct<Ke)continue;const Ve=lt(Ee.calculateScaledKey(Ee.overscaledZ+ct));if(Ve)return Ve}},ne=[0,0,0],he=(Ee,Ke)=>(ne[0]=Math.min(Ee.min.y,Ke.min.y),ne[1]=Math.max(Ee.max.y,Ke.max.y),ne[2]=o.V-Ke.min.x>Ee.max.x?Ke.min.x-o.V:Ee.max.x,ne),ye=(Ee,Ke)=>(ne[0]=Math.min(Ee.min.x,Ke.min.x),ne[1]=Math.max(Ee.max.x,Ke.max.x),ne[2]=o.V-Ke.min.y>Ee.max.y?Ke.min.y-o.V:Ee.max.y,ne),we=[(Ee,Ke)=>he(Ee,Ke),(Ee,Ke)=>he(Ke,Ee),(Ee,Ke)=>ye(Ee,Ke),(Ee,Ke)=>ye(Ke,Ee)],Oe=(Ee,Ke,lt,Ze,ct,Ve,ut)=>{if(!R)return 0;const Ct=[[Ve?lt:Ee,Ve?Ee:lt,0],[Ve?lt:Ke,Ve?Ke:lt,0]],Lt=ut<0?o.V+ut:ut,$t=[Ve?Lt:(Ee+Ke)/2,Ve?(Ee+Ke)/2:Lt,0];return lt===0&&ut<0||lt!==0&&ut>0?R.getForTilePoints(ct,[$t],!0,Ze):Ct.push($t),R.getForTilePoints(m,Ct,!0,z),Math.max(Ct[0][2],Ct[1][2],$t[2])/R.exaggeration()};for(let Ee=0;Ee<4;Ee++){const Ke=E.borderFeatureIndices[Ee];if(Ke.length===0)continue;const lt=o.cG[Ee](m),Ze=J(lt);if(!(Ze&&Ze instanceof o.cH)||E.borderDoneWithNeighborZ[Ee]===Ze.canonical.z)continue;Ze.centroidVertexArray.length===0&&Ze.createCentroidsBuffer();const ct=R?R.findDEMTileFor(lt):null;if(!(ct&&ct.dem||k))continue;const Ve=(Ee<2?1:5)-Ee,ut=Ze.borderDoneWithNeighborZ[Ve]!==E.canonical.z,Ct=Ze.borderFeatureIndices[Ve];let Lt=0;if(E.canonical.z!==Ze.canonical.z){for(const $t of Ke)E.showCentroid(E.featuresOnBorder[$t]);if(ut)for(const $t of Ct)Ze.showCentroid(Ze.featuresOnBorder[$t]);E.borderDoneWithNeighborZ[Ee]=Ze.canonical.z,Ze.borderDoneWithNeighborZ[Ve]=E.canonical.z}for(const $t of Ke){const pn=E.featuresOnBorder[$t],Kt=E.centroidData[pn.centroidDataIndex],Cn=pn.borders[Ee];let bn;for(;Lt<Ct.length;){bn=Ze.featuresOnBorder[Ct[Lt]];const $n=bn.borders[Ve];if($n[1]>Cn[0]+3||$n[0]>Cn[0]-3)break;Ze.showCentroid(bn),Lt++}if(bn&&Lt<Ct.length){const $n=Lt;let Yt=0;for(;!(bn.borders[Ve][0]>Cn[1]-3)&&(Yt++,++Lt!==Ct.length);)bn=Ze.featuresOnBorder[Ct[Lt]];if(bn=Ze.featuresOnBorder[Ct[$n]],Yt>1){const ln=bn.borders[Ve];Math.abs(Cn[0]-ln[0])<3&&Math.abs(Cn[1]-ln[1])<3&&(Yt=1,Lt=$n+1)}else if(Yt===0){E.showCentroid(pn);continue}const vn=Ze.centroidData[bn.centroidDataIndex];k&&Yt===1&&(((Fe=Kt).flags|(De=vn).flags)&o.cI?(Fe.flags|=o.cI,De.flags|=o.cI):(Fe.flags&=~o.cI,De.flags&=~o.cI));const Nt=pn.intersectsCount()>1||bn.intersectsCount()>1;if(Yt>1)Lt=$n,Kt.centroidXY=vn.centroidXY=new o.P(0,0);else if(ct&&ct.dem&&!Nt){const ln=we[Ee](Kt,vn),jn=Ee%2?o.V-1:0,sr=Oe(ln[0],Math.min(o.V-1,ln[1]),jn,ct,lt,Ee<2,ln[2]);Kt.centroidXY=vn.centroidXY=K(sr)}else Nt?Kt.centroidXY=vn.centroidXY=new o.P(0,0):(Kt.centroidXY=E.encodeBorderCentroid(pn),vn.centroidXY=Ze.encodeBorderCentroid(bn));E.writeCentroidToBuffer(Kt),Ze.writeCentroidToBuffer(vn)}else E.showCentroid(pn)}E.borderDoneWithNeighborZ[Ee]=Ze.canonical.z,Ze.borderDoneWithNeighborZ[Ve]=E.canonical.z}var Fe,De;(E.needsCentroidUpdate||!E.centroidVertexBuffer&&E.centroidVertexArray.length!==0)&&E.uploadCentroid(w)}const Bn=[1,0,0],gn=[0,1,0],cr=[0,0,1];function Hn(w,f,m){const E=m.transform,B=m.shadowRenderer;if(!B)return!0;const R=w.toUnwrapped(),k=E.tileSize*B._cascades[m.currentShadowCascade].scale;let z=f.maxHeight;if(E.elevation){const Fe=E.elevation.getMinMaxForTile(w);Fe&&(z+=Fe.max)}const K=[...B.shadowDirection];K[2]=-K[2];const J=B.computeSimplifiedTileShadowVolume(R,z,k,K);if(!J)return!1;const ne=[Bn,gn,cr,K,[K[0],0,K[2]],[0,K[1],K[2]]],he=E.projection.name==="globe",ye=E.scaleZoom(k),we=o.bq.fromInvProjectionMatrix(E.invProjMatrix,E.worldSize,ye,!he),Oe=B.getCurrentCascadeFrustum();return we.intersectsPrecise(J.vertices,J.planes,ne)===0||Oe.intersectsPrecise(J.vertices,J.planes,ne)===0}function cn(w){return[w[0]*o.cL,w[1]*o.cL,w[2]*o.cL,0]}function fn(w,f,m,E,B,R,k,z,K){const J=E.getSource(),ne=m.globeSharedBuffers;if(!ne)return;let he,ye,we;if(f&&(he=E.getTile(f)),J instanceof o.ap?(ye=J.texture,we=o.cj(0,0,m.transform)):he&&f&&(ye=he.texture,we=o.cj(f.canonical.z,f.canonical.x,m.transform)),!ye||!we)return;w||(we=o.a6.scale(o.a6.create(),we,[1,-1,1]));const Oe=m.context,Fe=Oe.gl,De=B.paint.get("raster-resampling")==="nearest"?Fe.NEAREST:Fe.LINEAR,Ee=m.colorModeForDrapableLayerRenderPass(R),Ke=k.defines;Ke.push("GLOBE_POLES");const lt=new ir(Fe.LEQUAL,ir.ReadWrite,m.depthRangeFor3D),Ze=Float32Array.from(m.transform.expandedFarZProjMatrix),ct=Float32Array.from(o.aT(o.ci(new o.bs(0,0,0))));m.terrain&&m.terrain.prepareDrawTile(),Oe.activeTexture.set(Fe.TEXTURE0),ye.bind(De,Fe.CLAMP_TO_EDGE),Oe.activeTexture.set(Fe.TEXTURE1),ye.bind(De,Fe.CLAMP_TO_EDGE),ye.useMipmap&&Oe.extTextureFilterAnisotropic&&m.transform.pitch>20&&Fe.texParameterf(Fe.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax);const[Ve,ut,Ct,Lt]=f?ne.getPoleBuffers(f.canonical.z,!1):ne.getPoleBuffers(0,!0),$t=B.paint.get("raster-elevation");let pn;w?(pn=Ve,m.renderDefaultNorthPole=$t!==0):(pn=ut,m.renderDefaultSouthPole=$t!==0);const Kt=cn(k.mix),Cn=(($n,Yt,vn,Nt,ln,jn,sr,tr,pr,kr,Zr,jr,Wr)=>Dm($n,Yt,vn,new Float32Array(16),new Float32Array(9),[0,0],Nt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},jn,[0,0],tr,2,kr,Zr,jr,1,0,Wr))(Ze,ct,we,o.S(m.transform.zoom),0,B,0,$t,0,Kt,k.offset,k.range,R),bn=m.getOrCreateProgram("raster",{defines:Ke});m.uploadCommonUniforms(Oe,bn,null),bn.draw(m,Fe.TRIANGLES,lt,K,Ee,z,Cn,B.id,pn,Ct,Lt)}function or(w){const f=w._nearZ,m=w.projection.farthestPixelDistance(w),E=m-f,B=.2*w.height,R=f+B;return[f,m,(R-B-f)/E,(R-f)/E]}function fr(w,f,m,E){if(w)return f instanceof Rn&&w instanceof Yh?f.getTextureDescriptor(w,m,!0):{texture:w.texture,mix:cn(E.mix),offset:E.offset,buffer:0,tileSize:1}}function ar(w,f,m){if(!w)return null;const E=f.getTextureDescriptor(w,m,!0);if(!E)return null;let{texture:B,mix:R,offset:k,tileSize:z,buffer:K,format:J}=E;if(!B||!J)return null;let ne=!1;return J==="uint32"&&(ne=!0,R[3]=0,R=Yp(o.cM,R,[0,m.paint.get("raster-particle-max-speed")]),k=Ag(o.cM,k,[0,m.paint.get("raster-particle-max-speed")])),{texture:B,textureOffset:[K/(z+2*K),z/(z+2*K)],tileSize:z,scalarData:ne,scale:R,offset:k,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[J]]}}function ri(w){const f=w._nearZ,m=w.projection.farthestPixelDistance(w),E=m-f,B=.2*w.height,R=f+B;return[f,m,(R-B-f)/E,(R-f)/E]}const Lr=new o.ax(1,0,0,1),Ii=new o.ax(0,1,0,1),Jr=new o.ax(0,0,1,1),go=new o.ax(1,0,1,1),Mo=new o.ax(0,1,1,1);function js(w,f,m,E,B,R,k){const z=w.context,K=w.transform,J=z.gl,ne=K.projection.name==="globe",he=ne?["PROJECTION_GLOBE_VIEW"]:[];let ye=o.a6.clone(m.projMatrix);if(ne&&o.S(K.zoom)>0){const Kt=o.aS(m.canonical,K),Cn=o.cN(Kt);ye=o.a6.multiply(new Float32Array(16),K.globeMatrix,Cn),o.a6.multiply(ye,K.projMatrix,ye)}const we=o.a6.create();we[12]+=2*B/(o.f.devicePixelRatio*K.width),we[13]+=2*R/(o.f.devicePixelRatio*K.height),o.a6.multiply(ye,we,ye);const Oe=w.getOrCreateProgram("debug",{defines:he}),Fe=f.getTileByID(m.key);w.terrain&&w.terrain.setupElevationDraw(Fe,Oe);const De=ir.disabled,Ee=di.disabled,Ke=w.colorModeForRenderPass(),lt="$debug";z.activeTexture.set(J.TEXTURE0),w.emptyTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),ne?Fe._makeGlobeTileDebugBuffers(w.context,K):Fe._makeDebugTileBoundsBuffers(w.context,K.projection);const Ze=Fe._tileDebugBuffer||w.debugBuffer,ct=Fe._tileDebugIndexBuffer||w.debugIndexBuffer,Ve=Fe._tileDebugSegments||w.debugSegments;if(Oe.draw(w,J.LINE_STRIP,De,Ee,Ke,Yr.disabled,B0(ye,E),lt,Ze,ct,Ve,null,null,null,[Fe._globeTileDebugBorderBuffer]),k){const Kt=Fe.latestRawTileData,Cn=Math.floor((Kt&&Kt.byteLength||0)/1024);let bn=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(bn+=` => ${m.overscaledZ}`),bn+=` ${Fe.state}`,bn+=` ${Cn}kb`,function($n,Yt){$n.initDebugOverlayCanvas();const vn=$n.debugOverlayCanvas,Nt=$n.context.gl,ln=$n.debugOverlayCanvas.getContext("2d");ln.clearRect(0,0,vn.width,vn.height),ln.shadowColor="white",ln.shadowBlur=2,ln.lineWidth=1.5,ln.strokeStyle="white",ln.textBaseline="top",ln.font="bold 36px Open Sans, sans-serif",ln.fillText(Yt,5,5),ln.strokeText(Yt,5,5),$n.debugOverlayTexture.update(vn),$n.debugOverlayTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE)}(w,bn)}const ut=f.getTile(m).tileSize,Ct=512/Math.min(ut,512)*(m.overscaledZ/K.zoom)*.5,Lt=Fe._tileDebugTextBuffer||w.debugBuffer,$t=Fe._tileDebugTextIndexBuffer||w.quadTriangleIndexBuffer,pn=Fe._tileDebugTextSegments||w.debugSegments;Oe.draw(w,J.TRIANGLES,De,Ee,Ui.alphaBlended,Yr.disabled,B0(ye,o.ax.transparent,Ct),lt,Lt,$t,pn,null,null,null,[Fe._globeTileDebugTextBuffer])}function ro(w,f,m,E){$i(w,0,f+m/2,w.transform.width,m,E)}function Zs(w,f,m,E){$i(w,f-m/2,0,m,w.transform.height,E)}function $i(w,f,m,E,B,R){const k=w.context,z=k.gl;z.enable(z.SCISSOR_TEST),z.scissor(f*o.f.devicePixelRatio,m*o.f.devicePixelRatio,E*o.f.devicePixelRatio,B*o.f.devicePixelRatio),k.clear({color:R}),z.disable(z.SCISSOR_TEST)}const bs=o.ay([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:$a}=bs;function Va(w,f,m,E){w.emplaceBack(f,m,E)}class Ha{constructor(f){this.vertexArray=new o.az,this.indices=new o.aw,Va(this.vertexArray,-1,-1,1),Va(this.vertexArray,1,-1,1),Va(this.vertexArray,-1,1,1),Va(this.vertexArray,1,1,1),Va(this.vertexArray,-1,-1,-1),Va(this.vertexArray,1,-1,-1),Va(this.vertexArray,-1,1,-1),Va(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=f.createVertexBuffer(this.vertexArray,$a),this.indexBuffer=f.createIndexBuffer(this.indices),this.segment=o.aB.simpleSegment(0,0,36,12)}}function pl(w,f,m,E,B,R){const k=w.context.gl,z=f.paint.get("sky-atmosphere-color"),K=f.paint.get("sky-atmosphere-halo-color"),J=f.paint.get("sky-atmosphere-sun-intensity"),ne=((he,ye,we,Oe,Fe)=>({u_matrix_3f:he,u_sun_direction:ye,u_sun_intensity:we,u_color_tint_r:[Oe.r,Oe.g,Oe.b,Oe.a],u_color_tint_m:[Fe.r,Fe.g,Fe.b,Fe.a],u_luminance:5e-5}))(o.co.fromMat4(o.co.create(),E),B,J,z,K);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+R,f.skyboxTexture,0),m.draw(w,k.TRIANGLES,ir.disabled,di.disabled,Ui.unblended,Yr.frontCW,ne,"skyboxCapture",f.skyboxGeometry.vertexBuffer,f.skyboxGeometry.indexBuffer,f.skyboxGeometry.segment)}const Fo=o.ay([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Fl{constructor(f){const m=new o.cO;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const E=new o.aw;E.emplaceBack(0,1,2),E.emplaceBack(2,3,0),this.vertexBuffer=f.createVertexBuffer(m,Fo.members),this.indexBuffer=f.createIndexBuffer(E),this.segments=o.aB.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ql=o.ay([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Gn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Mr{constructor(f){this.colorModeAlphaBlendedWriteRGB=new Ui([1,Kl,1,Kl],o.ax.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Ui([1,0,1,0],o.ax.transparent,[!1,!1,!1,!0]),this.params=new Gn,this.updateNeeded=!0,f.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),f.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),f.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),f.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(f){const m=f.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Fl(m);const E=this.params.sizeRange,B=this.params.intensityRange,R=function(ne){const he=o.aA(30),ye=[];for(let we=0;we<ne;++we){const Oe=2*Math.PI*he(),Fe=Math.acos(1-2*he())-.5*Math.PI;ye.push(o.N.fromValues(Math.cos(Fe)*Math.cos(Oe),Math.cos(Fe)*Math.sin(Oe),Math.sin(Fe)))}return ye}(this.params.starsCount),k=o.aA(300),z=new o.cP,K=new o.aw;let J=0;for(let ne=0;ne<R.length;++ne){const he=o.N.scale([],R[ne],200),ye=Math.max(0,1+.01*E*(1*k()-.5)),we=Math.max(0,1+.01*B*(1*k()-.5));z.emplaceBack(he[0],he[1],he[2],-1,-1,ye,we),z.emplaceBack(he[0],he[1],he[2],1,-1,ye,we),z.emplaceBack(he[0],he[1],he[2],1,1,ye,we),z.emplaceBack(he[0],he[1],he[2],-1,1,ye,we),K.emplaceBack(J+0,J+1,J+2),K.emplaceBack(J+0,J+2,J+3),J+=4}this.starsVx=m.createVertexBuffer(z,ql.members),this.starsIdx=m.createIndexBuffer(K),this.starsSegments=o.aB.simpleSegment(0,0,z.length,K.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(f,m){const E=f.context,B=E.gl,R=f.transform,k=new ir(B.LEQUAL,ir.ReadOnly,[0,1]),z=o.S(R.zoom),K=m.properties.get("color").toArray01(),J=m.properties.get("high-color").toArray01(),ne=m.properties.get("space-color").toArray01PremultipliedAlpha(),he=5e-4,ye=o.cQ(m.properties.get("horizon-blend"),0,1,he,.25),we=o.cd(f,E,R)&&ye===he?R.worldSize/(2*Math.PI*1.025)-1:R.globeRadius,Oe=f.frameCounter/1e3%1,Fe=o.N.length(R.globeCenterInViewSpace),De=Math.sqrt(Math.pow(Fe,2)-Math.pow(we,2)),Ee=Math.acos(De/Fe),Ke=lt=>{const Ze=R.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];lt&&Ze.push("ALPHA_PASS");const ct=f.getOrCreateProgram("globeAtmosphere",{defines:Ze}),Ve=((Ct,Lt,$t,pn,Kt,Cn,bn,$n,Yt,vn,Nt,ln)=>({u_frustum_tl:Ct,u_frustum_tr:Lt,u_frustum_br:$t,u_frustum_bl:pn,u_horizon:Kt,u_transition:Cn,u_fadeout_range:bn,u_color:$n,u_high_color:Yt,u_space_color:vn,u_temporal_offset:Nt,u_horizon_angle:ln}))(R.frustumCorners.TL,R.frustumCorners.TR,R.frustumCorners.BR,R.frustumCorners.BL,R.frustumCorners.horizon,z,ye,K,J,ne,Oe,Ee);f.uploadCommonUniforms(E,ct);const ut=this.atmosphereBuffer;ut&&ct.draw(f,B.TRIANGLES,k,di.disabled,lt?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Yr.backCW,Ve,lt?"atmosphere_glow_alpha":"atmosphere_glow",ut.vertexBuffer,ut.indexBuffer,ut.segments)};Ke(!1),Ke(!0)}drawStars(f,m){const E=o.aa(m.properties.get("star-intensity"),0,1);if(E===0)return;const B=f.context,R=B.gl,k=f.transform,z=f.getOrCreateProgram("stars"),K=o.bi.identity([]);o.bi.rotateX(K,K,-k._pitch),o.bi.rotateZ(K,K,-k.angle),o.bi.rotateX(K,K,o.bj(k._center.lat)),o.bi.rotateY(K,K,-o.bj(k._center.lng));const J=o.a6.fromQuat(new Float32Array(16),K),ne=o.a6.multiply([],k.starsProjMatrix,J),he=o.co.fromMat4([],J),ye=o.co.invert([],he),we=[0,1,0];o.N.transformMat3(we,we,ye),o.N.scale(we,we,this.params.sizeMultiplier);const Oe=[1,0,0];o.N.transformMat3(Oe,Oe,ye),o.N.scale(Oe,Oe,this.params.sizeMultiplier);const Fe=(De=we,Ee=Oe,Ke=E,{u_matrix:Float32Array.from(ne),u_up:De,u_right:Ee,u_intensity_multiplier:Ke});var De,Ee,Ke;f.uploadCommonUniforms(B,z),this.starsVx&&this.starsIdx&&z.draw(f,R.TRIANGLES,ir.disabled,di.disabled,this.colorModeAlphaBlendedWriteRGB,Yr.disabled,Fe,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function nl(w,f){const m=[...w],E=f.cameraWorldSizeForFog/f.worldSize,B=o.a6.identity([]);return o.a6.scale(B,B,[E,E,1]),o.a6.multiply(m,B,m),o.a6.multiply(m,f.worldToFogMatrix,m),m}function Js(w,f,m,E){const B=m.material,R=E.context,{baseColorTexture:k,metallicRoughnessTexture:z}=B.pbrMetallicRoughness,{normalTexture:K,occlusionTexture:J,emissionTexture:ne}=B;function he(ye,we,Oe){if(ye&&(w.push(we),R.activeTexture.set(R.gl.TEXTURE0+Oe),ye.gfxTexture)){const{minFilter:Fe,magFilter:De,wrapS:Ee,wrapT:Ke}=ye.sampler;ye.gfxTexture.bindExtraParam(Fe,De,Ee,Ke)}}he(k,"HAS_TEXTURE_u_baseColorTexture",pa.BaseColor),he(z,"HAS_TEXTURE_u_metallicRoughnessTexture",pa.MetallicRoughness),he(K,"HAS_TEXTURE_u_normalTexture",pa.Normal),he(J,"HAS_TEXTURE_u_occlusionTexture",pa.Occlusion),he(ne,"HAS_TEXTURE_u_emissionTexture",pa.Emission),m.texcoordBuffer&&(w.push("HAS_ATTRIBUTE_a_uv_2f"),f.push(m.texcoordBuffer)),m.colorBuffer&&(w.push(m.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),f.push(m.colorBuffer)),m.normalBuffer&&(w.push("HAS_ATTRIBUTE_a_normal_3f"),f.push(m.normalBuffer)),m.pbrBuffer&&(w.push("HAS_ATTRIBUTE_a_pbr"),w.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),f.push(m.pbrBuffer)),B.alphaMode!=="OPAQUE"&&B.alphaMode!=="MASK"||w.push("UNPREMULT_TEXTURE_IN_SHADER"),B.defined||w.push("DIFFUSE_SHADED"),w.push("USE_STANDARD_DERIVATIVES")}function fu(w,f,m,E,B,R){const k=m.paint.get("model-opacity"),z=f.context,K=new ir(f.context.gl.LEQUAL,ir.ReadWrite,f.depthRangeFor3D),J=f.transform,ne=w.mesh,he=ne.material,ye=he.pbrMetallicRoughness,we=f.style.fog;let Oe;Oe=f.transform.projection.zAxisUnit==="pixels"?[...w.nodeModelMatrix]:o.a6.multiply([],E.zScaleMatrix,w.nodeModelMatrix),o.a6.multiply(Oe,E.negCameraPosMatrix,Oe);const Fe=o.a6.invert([],Oe);o.a6.transpose(Fe,Fe);const De=m.paint.get("model-emissive-strength").constantOr(0),Ee=Xp(new Float32Array(w.worldViewProjection),new Float32Array(Oe),new Float32Array(Fe),f,k,ye.baseColorFactor,he.emissiveFactor,ye.metallicFactor,ye.roughnessFactor,he,De,m),Ke={defines:[]},lt=[];Js(Ke.defines,lt,ne,f);const Ze=f.shadowRenderer;Ze&&(Ze.useNormalOffset=!1);let ct=null;if(we){const Ct=nl(w.nodeModelMatrix,f.transform);if(ct=new Float32Array(Ct),J.projection.name!=="globe"){const Lt=ne.aabb.min,$t=ne.aabb.max,[pn,Kt]=we.getOpacityForBounds(Ct,Lt[0],Lt[1],$t[0],$t[1]);Ke.overrideFog=pn>=hr||Kt>=hr}}const Ve=Rl(f,m.paint.get("model-cutoff-fade-range"));Ve.shouldRenderCutoff&&Ke.defines.push("RENDER_CUTOFF");const ut=f.getOrCreateProgram("model",Ke);f.uploadCommonUniforms(z,ut,null,ct,Ve),f.renderPass!=="shadow"&&Ze&&Ze.setupShadowsFromMatrix(w.nodeModelMatrix,ut),ut.draw(f,z.gl.TRIANGLES,K,B,R,ne.material.doubleSided?Yr.disabled:Yr.backCCW,Ee,m.id,ne.vertexBuffer,ne.indexBuffer,ne.segments,m.paint,f.transform.zoom,void 0,lt)}function Ga(w,f,m,E,B,R,k){let z;z=w.projection.name==="globe"?o.cS(m,w):[...m],o.a6.multiply(z,z,f.matrix);const K=o.a6.multiply([],E,z);if(f.meshes)for(const J of f.meshes){if(J.material.alphaMode!=="BLEND"){k.push({mesh:J,depth:0,modelIndex:B,worldViewProjection:K,nodeModelMatrix:z});continue}const ne=o.N.transformMat4([],J.centroid,K);ne[2]>0&&R.push({mesh:J,depth:ne[2],modelIndex:B,worldViewProjection:K,nodeModelMatrix:z})}if(f.children)for(const J of f.children)Ga(w,J,m,E,B,R,k)}function rn(w,f,m,E){const B=m.shadowRenderer;if(!B)return;const R=B.getShadowPassDepthMode(),k=B.getShadowPassColorMode(),z=B.calculateShadowPassMatrixFromMatrix(f),K=$m(z);m.getOrCreateProgram("modelDepth",{defines:m._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(m,m.context.gl.TRIANGLES,R,di.disabled,k,Yr.backCCW,K,E.id,w.vertexBuffer,w.indexBuffer,w.segments,E.paint,m.transform.zoom,void 0,void 0)}function af(w,f,m){const E=f.updateZoomBasedPaintProperties(),B=function(R,k,z){let K,J,ne,he=R.terrain?R.terrain.exaggeration():0;if(R.terrain&&he>0){const ye=R.terrain,we=ye.findDEMTileFor(z);we&&we.dem?K=o.cU.create(ye,z,we):he=0}if(he===0&&(k.terrainElevationMin=0,k.terrainElevationMax=0),he===k.validForExaggeration&&(he===0||K&&K._demTile&&K._demTile.tileID===k.validForDEMTile.id&&K._dem._timestamp===k.validForDEMTile.timestamp))return!1;for(const ye in k.instancesPerModel){const we=k.instancesPerModel[ye];for(let Oe=0;Oe<we.instancedDataArray.length;++Oe){const Fe=(K?he*K.getElevationAt(0|we.instancedDataArray.float32[16*Oe],0|we.instancedDataArray.float32[16*Oe+1],!0,!0):0)+we.instancesEvaluatedElevation[Oe];we.instancedDataArray.float32[16*Oe+6]=Fe,J=J?Math.min(k.terrainElevationMin,Fe):Fe,ne=ne?Math.max(k.terrainElevationMax,Fe):Fe}}return k.terrainElevationMin=J||0,k.terrainElevationMax=ne||0,k.validForExaggeration=he,k.validForDEMTile=K&&K._demTile?{id:K._demTile.tileID,timestamp:K._dem._timestamp}:{id:void 0,timestamp:0},!0}(w,f,m);(E||B)&&(f.uploaded=!1,f.upload(w.context))}const Ol={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new o.bS([0,0,0],[o.V,o.V,0])};function lf(w,f){const m=1<<w.canonical.z,E=f.getFreeCameraOptions().position,B=f.elevation,R=w.canonical.x/m,k=(w.canonical.x+1)/m,z=w.canonical.y/m,K=(w.canonical.y+1)/m;let J=f._centerAltitude;if(B){const we=B.getMinMaxForTile(w);we&&we.max>J&&(J=we.max)}const ne=o.aa(E.x,R,k)-E.x,he=o.aa(E.y,z,K)-E.y,ye=o.bl(J,f.center.lat)-E.z;return f._zoomFromMercatorZ(Math.sqrt(ne*ne+he*he+ye*ye))}function Ca(w,f,m,E,B,R,k){const z=w.context,K=w.renderPass==="shadow",J=w.shadowRenderer,ne=K&&J?J.getShadowPassDepthMode():new ir(z.gl.LEQUAL,ir.ReadWrite,w.depthRangeFor3D),he=w.isTileAffectedByFog(R);if(m.meshes)for(const ye of m.meshes){const we=["MODEL_POSITION_ON_GPU"],Oe=[];let Fe,De,Ee;E.instancedDataArray.length>20&&we.push("INSTANCED_ARRAYS");const Ke=Rl(w,f.paint.get("model-cutoff-fade-range"));if(Ke.shouldRenderCutoff&&we.push("RENDER_CUTOFF"),K&&J)Fe=w.getOrCreateProgram("modelDepth",{defines:we}),De=$m(k.shadowTileMatrix,k.shadowTileMatrix,Float32Array.from(m.matrix)),Ee=J.getShadowPassColorMode();else{Js(we,Oe,ye,w),Fe=w.getOrCreateProgram("model",{defines:we,overrideFog:he});const Ze=ye.material,ct=Ze.pbrMetallicRoughness,Ve=f.paint.get("model-opacity"),ut=f.paint.get("model-emissive-strength").constantOr(0);De=Xp(R.expandedProjMatrix,Float32Array.from(m.matrix),new Float32Array(16),w,Ve,ct.baseColorFactor,Ze.emissiveFactor,ct.metallicFactor,ct.roughnessFactor,Ze,ut,f,B),J&&(k.shadowUniformsInitialized?Fe.setShadowUniformValues(z,J.getShadowUniformValues()):(J.setupShadows(R.toUnwrapped(),Fe,"model-tile",R.overscaledZ),k.shadowUniformsInitialized=!0)),Ee=Ke.shouldRenderCutoff||Ve<1||Ze.alphaMode!=="OPAQUE"?Ui.alphaBlended:Ui.unblended}w.uploadCommonUniforms(z,Fe,R.toUnwrapped(),null,Ke);const lt=ye.material.doubleSided?Yr.disabled:Yr.backCCW;if(E.instancedDataArray.length>20)Oe.push(E.instancedDataBuffer),Fe.draw(w,z.gl.TRIANGLES,ne,di.disabled,Ee,lt,De,f.id,ye.vertexBuffer,ye.indexBuffer,ye.segments,f.paint,w.transform.zoom,void 0,Oe,E.instancedDataArray.length);else{const Ze=K?"u_instance":"u_normal_matrix";for(let ct=0;ct<E.instancedDataArray.length;++ct)De[Ze]=new Float32Array(E.instancedDataArray.arrayBuffer,64*ct,16),Fe.draw(w,z.gl.TRIANGLES,ne,di.disabled,Ee,lt,De,f.id,ye.vertexBuffer,ye.indexBuffer,ye.segments,f.paint,w.transform.zoom,void 0,Oe)}}if(m.children)for(const ye of m.children)Ca(w,f,ye,E,B,R,k)}const qf=[1,-1,1];function _w(w,f,m,E){if(!m.modelManager)return!0;const B=m.modelManager;if(!m.shadowRenderer)return!0;const R=m.shadowRenderer,k=f.aabb;let z=!0,K=w.maxHeight;if(K===0){let ne=0;for(const he in w.instancesPerModel){const ye=B.getModel(he,E);ye?ne=Math.max(ne,Math.max(Math.max(ye.aabb.max[0],ye.aabb.max[1]),ye.aabb.max[2])):z=!1}K=w.maxScale*ne*1.41+w.maxVerticalOffset,z&&(w.maxHeight=K)}k.max[2]=K,k.min[2]+=w.terrainElevationMin,k.max[2]+=w.terrainElevationMax,o.N.transformMat4(k.min,k.min,f.tileMatrix),o.N.transformMat4(k.max,k.max,f.tileMatrix);const J=k.intersects(R.getCurrentCascadeFrustum());return m.currentShadowCascade===0&&(w.isInsideFirstShadowMapFrustum=J===2),J===0}class bw{}class Vm{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(f,m,E){{const he=this._storage.get(m.id);if(he)return he.lastUsedFrameIdx=f,he.buf}const B=E.gl,R=B.getBufferParameter(B.ELEMENT_ARRAY_BUFFER,B.BUFFER_SIZE),k=new ArrayBuffer(R),z=new Int16Array(k);B.getBufferSubData(B.ELEMENT_ARRAY_BUFFER,0,new Int16Array(k));const K=new o.cW;for(let he=0;he<R/2;he+=3){const ye=z[he],we=z[he+1],Oe=z[he+2];K.emplaceBack(ye,we),K.emplaceBack(we,Oe),K.emplaceBack(Oe,ye)}const J=E.bindVertexArrayOES.current,ne=new bw;return ne.buf=new Vt(E,K),ne.lastUsedFrameIdx=f,this._storage.set(m.id,ne),E.bindVertexArrayOES.set(J),ne.buf}update(f){for(const[m,E]of this._storage)f-E.lastUsedFrameIdx>30&&(E.buf.destroy(),this._storage.delete(m))}destroy(){for(const[f,m]of this._storage)m.buf.destroy(),this._storage.delete(f)}}class cf{registerParameter(f,m,E,B,R){}registerButton(f,m,E){}}const Yf={symbol:function(w,f,m,E,B){if(w.renderPass!=="translucent")return;const R=di.disabled,k=w.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&function(J,ne,he,ye,we,Oe,Fe){const De=ne.transform,Ee=we==="map",Ke=Oe==="map";for(const lt of J){const Ze=ye.getTile(lt),ct=Ze.getBucket(he);if(!ct||!ct.text||!ct.text.segments.get().length)continue;const Ve=o.b5(ct.textSizeData,De.zoom),ut=xa(lt,ct.getProjection(),De),Ct=De.calculatePixelsToTileUnitsMatrix(Ze),Lt=Jh(ut,Ze.tileID.canonical,Ke,Ee,De,ct.getProjection(),Ct),$t=ct.hasIconTextFit()&&ct.hasIconData();if(Ve){const pn=Math.pow(2,De.zoom-Ze.tileID.overscaledZ);nt(ct,Ee,Ke,Fe,o.cx,De,Lt,lt,pn,Ve,$t)}}}(E,w,m,f,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),B);const z=m.paint.get("icon-opacity").constantOr(1)!==0,K=m.paint.get("text-opacity").constantOr(1)!==0;m.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(z||K)?st(w,f,m,E,R,k):(z&&st(w,f,m,E,R,k,{onlyIcons:!0}),K&&st(w,f,m,E,R,k,{onlyText:!0})),f.map.showCollisionBoxes&&(Z(w,f,m,E,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),Z(w,f,m,E,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(w,f,m,E){if(w.renderPass!=="translucent")return;const B=m.paint.get("circle-opacity"),R=m.paint.get("circle-stroke-width"),k=m.paint.get("circle-stroke-opacity"),z=m.layout.get("circle-sort-key").constantOr(1)!==void 0,K=m.paint.get("circle-emissive-strength");if(B.constantOr(1)===0&&(R.constantOr(1)===0||k.constantOr(1)===0))return;const J=w.context,ne=J.gl,he=w.transform,ye=w.depthModeForSublayer(0,ir.ReadOnly),we=di.disabled,Oe=w.colorModeForDrapableLayerRenderPass(K),Fe=he.projection.name==="globe",De=[o.a5(he.center.lng),o.ae(he.center.lat)],Ee=[];for(let lt=0;lt<E.length;lt++){const Ze=E[lt],ct=f.getTile(Ze),Ve=ct.getBucket(m);if(!Ve||Ve.projection.name!==he.projection.name)continue;const ut=Ve.programConfigurations.get(m.id),Ct=o.cy(m),Lt=w.isTileAffectedByFog(Ze);Fe&&Ct.push("PROJECTION_GLOBE_VIEW");const $t=w.getOrCreateProgram("circle",{config:ut,defines:Ct,overrideFog:Lt}),pn=Ve.layoutVertexBuffer,Kt=Ve.globeExtVertexBuffer,Cn=Ve.indexBuffer,bn=he.projection.createInversionMatrix(he,Ze.canonical),$n={programConfiguration:ut,program:$t,layoutVertexBuffer:pn,globeExtVertexBuffer:Kt,indexBuffer:Cn,uniformValues:o.cz(w,Ze,ct,bn,De,m),tile:ct};if(z){const Yt=Ve.segments.get();for(const vn of Yt)Ee.push({segments:new o.aB([vn]),sortKey:vn.sortKey,state:$n})}else Ee.push({segments:Ve.segments,sortKey:0,state:$n})}z&&Ee.sort((lt,Ze)=>lt.sortKey-Ze.sortKey);const Ke={useDepthForOcclusion:he.depthOcclusionForSymbolsAndCircles};for(const lt of Ee){const{programConfiguration:Ze,program:ct,layoutVertexBuffer:Ve,globeExtVertexBuffer:ut,indexBuffer:Ct,uniformValues:Lt,tile:$t}=lt.state,pn=lt.segments;w.terrain&&w.terrain.setupElevationDraw($t,ct,Ke),w.uploadCommonUniforms(J,ct,$t.tileID.toUnwrapped()),ct.draw(w,ne.TRIANGLES,ye,we,Oe,Yr.disabled,Lt,m.id,Ve,Ct,pn,m.paint,he.zoom,Ze,[ut])}},heatmap:function(w,f,m,E){if(m.paint.get("heatmap-opacity")!==0)if(w.renderPass==="offscreen"){const B=w.context,R=B.gl,k=di.disabled,z=new Ui([R.ONE,R.ONE,R.ONE,R.ONE],o.ax.transparent,[!0,!0,!0,!0]);(function(we,Oe,Fe,De){const Ee=we.gl,Ke=Oe.width*De,lt=Oe.height*De;we.activeTexture.set(Ee.TEXTURE1),we.viewport.set([0,0,Ke,lt]);let Ze=Fe.heatmapFbo;if(!Ze||Ze&&(Ze.width!==Ke||Ze.height!==lt)){Ze&&Ze.destroy();const ct=Ee.createTexture();Ee.bindTexture(Ee.TEXTURE_2D,ct),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_WRAP_S,Ee.CLAMP_TO_EDGE),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_WRAP_T,Ee.CLAMP_TO_EDGE),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_MIN_FILTER,Ee.LINEAR),Ee.texParameteri(Ee.TEXTURE_2D,Ee.TEXTURE_MAG_FILTER,Ee.LINEAR),Ze=Fe.heatmapFbo=we.createFramebuffer(Ke,lt,!0,null),function(Ve,ut,Ct,Lt,$t,pn){const Kt=Ve.gl;Kt.texImage2D(Kt.TEXTURE_2D,0,Ve.extRenderToTextureHalfFloat?Kt.RGBA16F:Kt.RGBA,$t,pn,0,Kt.RGBA,Ve.extRenderToTextureHalfFloat?Kt.HALF_FLOAT:Kt.UNSIGNED_BYTE,null),Lt.colorAttachment.set(Ct)}(we,0,ct,Ze,Ke,lt)}else Ee.bindTexture(Ee.TEXTURE_2D,Ze.colorAttachment.get()),we.bindFramebuffer.set(Ze.framebuffer)})(B,w,m,w.transform.projection.name==="globe"?.5:.25),B.clear({color:o.ax.transparent});const K=w.transform,J=K.projection.name==="globe",ne=J?["PROJECTION_GLOBE_VIEW"]:[],he=J?Yr.frontCCW:Yr.disabled,ye=[o.a5(K.center.lng),o.ae(K.center.lat)];for(let we=0;we<E.length;we++){const Oe=E[we];if(f.hasRenderableParent(Oe))continue;const Fe=f.getTile(Oe),De=Fe.getBucket(m);if(!De||De.projection.name!==K.projection.name)continue;const Ee=w.isTileAffectedByFog(Oe),Ke=De.programConfigurations.get(m.id),lt=w.getOrCreateProgram("heatmap",{config:Ke,defines:ne,overrideFog:Ee}),{zoom:Ze}=w.transform;w.terrain&&w.terrain.setupElevationDraw(Fe,lt),w.uploadCommonUniforms(B,lt,Oe.toUnwrapped());const ct=K.projection.createInversionMatrix(K,Oe.canonical);lt.draw(w,R.TRIANGLES,ir.disabled,k,z,he,pg(w,Oe,Fe,ct,ye,Ze,m.paint.get("heatmap-intensity")),m.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,m.paint,w.transform.zoom,Ke,J?[De.globeExtVertexBuffer]:null)}B.viewport.set([0,0,w.width,w.height])}else w.renderPass==="translucent"&&(w.context.setColorMode(w.colorModeForRenderPass()),function(B,R){const k=B.context,z=k.gl,K=R.heatmapFbo;if(!K)return;k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,K.colorAttachment.get()),k.activeTexture.set(z.TEXTURE1);let J=R.colorRampTexture;J||(J=R.colorRampTexture=new o.T(k,R.colorRamp,z.RGBA)),J.bind(z.LINEAR,z.CLAMP_TO_EDGE),B.getOrCreateProgram("heatmapTexture").draw(B,z.TRIANGLES,ir.disabled,di.disabled,B.colorModeForRenderPass(),Yr.disabled,((ne,he,ye,we)=>({u_image:0,u_color_ramp:1,u_opacity:he.paint.get("heatmap-opacity")}))(0,R),R.id,B.viewportBuffer,B.quadTriangleIndexBuffer,B.viewportSegments,R.paint,B.transform.zoom)}(w,m))},line:function(w,f,m,E){if(w.renderPass!=="translucent")return;const B=m.paint.get("line-opacity"),R=m.paint.get("line-width");if(B.constantOr(1)===0||R.constantOr(1)===0)return;const k=m.paint.get("line-emissive-strength"),z=w.depthModeForSublayer(0,ir.ReadOnly),K=w.colorModeForDrapableLayerRenderPass(k),J=w.terrain&&w.terrain.renderingToTexture?1:o.f.devicePixelRatio,ne=m.paint.get("line-dasharray"),he=ne.constantOr(1),ye=m.layout.get("line-cap"),we=m.paint.get("line-pattern"),Oe=we.constantOr(1),Fe=m.paint.get("line-pattern").constantOr(1),De=m.paint.get("line-opacity").constantOr(1)!==1;let Ee=!Fe&&De;const Ke=m.paint.get("line-gradient"),lt=Oe?"linePattern":"line",Ze=w.context,ct=Ze.gl,Ve=o.cA(m);w.terrain&&w.terrain.clipOrMaskOverlapStencilType()&&(Ee=!1);for(const ut of E){const Ct=f.getTile(ut);if(Oe&&!Ct.patternsLoaded())continue;const Lt=Ct.getBucket(m);if(!Lt)continue;w.prepareDrawTile();const $t=Lt.programConfigurations.get(m.id),pn=w.isTileAffectedByFog(ut),Kt=w.getOrCreateProgram(lt,{config:$t,defines:Ve,overrideFog:pn}),Cn=we.constantOr(null);if(Cn&&Ct.imageAtlas){const sr=Ct.imageAtlas.patternPositions[Cn.toString()];sr&&$t.setConstantPatternPositions(sr)}const bn=ne.constantOr(null),$n=ye.constantOr(null);if(!Oe&&bn&&$n&&Ct.lineAtlas){const sr=Ct.lineAtlas.getDash(bn,$n);sr&&$t.setConstantPatternPositions(sr)}let[Yt,vn]=m.paint.get("line-trim-offset");($n==="round"||$n==="square")&&Yt!==vn&&(Yt===0&&(Yt-=1),vn===1&&(vn+=1));const Nt=w.terrain?ut.projMatrix:null,ln=Oe?o.cB(w,Ct,m,Nt,J,[Yt,vn]):o.cC(w,Ct,m,Nt,Lt.lineClipsArray.length,J,[Yt,vn]);if(Ke){const sr=Lt.gradients[m.id];let tr=sr.texture;if(m.gradientVersion!==sr.version){let pr=256;if(m.stepInterpolant){const kr=f.getSource().maxzoom,Zr=ut.canonical.z===kr?Math.ceil(1<<w.transform.maxZoom-ut.canonical.z):1;pr=o.aa(o.cD(Lt.maxLineLength/o.V*1024*Zr),256,Ze.maxTextureSize)}sr.gradient=o.cE({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:pr,image:sr.gradient||void 0,clips:Lt.lineClipsArray}),sr.texture?sr.texture.update(sr.gradient):sr.texture=new o.T(Ze,sr.gradient,ct.RGBA),sr.version=m.gradientVersion,tr=sr.texture}Ze.activeTexture.set(ct.TEXTURE1),tr.bind(m.stepInterpolant?ct.NEAREST:ct.LINEAR,ct.CLAMP_TO_EDGE)}he&&(Ze.activeTexture.set(ct.TEXTURE0),Ct.lineAtlasTexture&&Ct.lineAtlasTexture.bind(ct.LINEAR,ct.REPEAT),$t.updatePaintBuffers()),Oe&&(Ze.activeTexture.set(ct.TEXTURE0),Ct.imageAtlasTexture&&Ct.imageAtlasTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),$t.updatePaintBuffers()),w.uploadCommonUniforms(Ze,Kt,ut.toUnwrapped());const jn=sr=>{Kt.draw(w,ct.TRIANGLES,z,sr,K,Yr.disabled,ln,m.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,m.paint,w.transform.zoom,$t,[Lt.layoutVertexBuffer2])};if(Ee){const sr=w.stencilModeForClipping(ut).ref;sr===0&&w.terrain&&Ze.clear({stencil:0});const tr={func:ct.EQUAL,mask:255};ln.u_alpha_discard_threshold=.8,jn(new di(tr,sr,255,ct.KEEP,ct.KEEP,ct.INVERT)),ln.u_alpha_discard_threshold=0,jn(new di(tr,sr,255,ct.KEEP,ct.KEEP,ct.KEEP))}else jn(w.stencilModeForClipping(ut))}Ee&&(w.resetStencilClippingMasks(),w.terrain&&Ze.clear({stencil:0}))},fill:function(w,f,m,E){const B=m.paint.get("fill-color"),R=m.paint.get("fill-opacity");if(R.constantOr(1)===0)return;const k=m.paint.get("fill-emissive-strength"),z=w.colorModeForDrapableLayerRenderPass(k),K=m.paint.get("fill-pattern"),J=w.opaquePassEnabledForLayer()&&!K.constantOr(1)&&B.constantOr(o.ax.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===J){const ne=w.depthModeForSublayer(1,w.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly);At(w,f,m,E,ne,z,!1)}if(w.renderPass==="translucent"&&m.paint.get("fill-antialias")){const ne=w.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly);At(w,f,m,E,ne,z,!0)}},"fill-extrusion":function(w,f,m,E){const B=m.paint.get("fill-extrusion-opacity"),R=w.context,k=R.gl,z=w.terrain,K=z&&z.renderingToTexture;if(B===0)return;const J=w.conflationActive&&w.layerUsedInConflation(m,f.getSource());if(J&&function(ne,he,ye,we){for(const Oe of we){const Fe=he.getTile(Oe).getBucket(ye);Fe&&(Fe.updateReplacement(Oe,ne.replacementSource),Fe.uploadCentroid(ne.context))}}(w,f,m,E),z||J)for(const ne of E){const he=f.getTile(ne).getBucket(m);he&&In(w.context,f,ne,he,m,z,J)}if(w.renderPass==="shadow"&&w.shadowRenderer){const ne=w.shadowRenderer;if(z&&B<.65&&m._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof o.Z)return;const he=ne.getShadowPassDepthMode(),ye=ne.getShadowPassColorMode();ot(w,f,m,E,he,di.disabled,ye,J)}else if(w.renderPass==="translucent"){const ne=!m.paint.get("fill-extrusion-pattern").constantOr(1),he=m.paint.get("fill-extrusion-color").constantOr(o.ax.white);if(!K&&he.a!==0){const ye=new ir(w.context.gl.LEQUAL,ir.ReadWrite,w.depthRangeFor3D);B===1&&ne?ot(w,f,m,E,ye,di.disabled,Ui.unblended,J):(ot(w,f,m,E,ye,di.disabled,Ui.disabled,J),ot(w,f,m,E,ye,w.stencilModeFor3D(),w.colorModeForRenderPass(),J),w.resetStencilClippingMasks())}if(w.style.enable3dLights()&&ne&&(!z&&w.transform.projection.name!=="globe"||K)){const ye=m.paint.get("fill-extrusion-opacity"),we=m.paint.get("fill-extrusion-ambient-occlusion-intensity"),Oe=m.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Fe=m.paint.get("fill-extrusion-flood-light-intensity"),De=m.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),Ee=we>0&&Oe>0,Ke=Fe>0,lt=(ct,Ve,ut)=>(1-ut)*ct+ut*Ve,Ze=ct=>{const Ve=w.depthModeForSublayer(1,ir.ReadOnly,k.LEQUAL,!0),ut=m.paint.get(ct?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ct=lt(.1,3,ut),Lt=w._showOverdrawInspector;if(!Lt){const $t=new di({func:k.ALWAYS,mask:255},255,255,k.KEEP,k.KEEP,k.REPLACE),pn=new Ui([k.ONE,k.ONE,k.ONE,k.ONE],o.ax.transparent,[!1,!1,!1,!0],k.MIN);nn(w,f,m,E,Ve,$t,pn,Yr.disabled,ct,"sdf",ye,we,Oe,Fe,De,Ct,J,!1)}{const $t=Lt?di.disabled:new di({func:k.EQUAL,mask:255},255,255,k.KEEP,k.DECR,k.DECR),pn=Lt?w.colorModeForRenderPass():new Ui([k.ONE_MINUS_DST_ALPHA,k.DST_ALPHA,k.ONE,k.ONE],o.ax.transparent,[!0,!0,!0,!0]);nn(w,f,m,E,Ve,$t,pn,Yr.disabled,ct,"color",ye,we,Oe,Fe,De,Ct,J,!1)}};if(K){const ct=(Ve,ut,Ct)=>{const Lt=w.depthModeForSublayer(1,ir.ReadOnly,k.LEQUAL,!1),$t=m.paint.get(Ve?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),pn=lt(.1,3,$t);{const Kt=new Ui([k.ONE,k.ONE,k.ONE,k.ONE],o.ax.transparent,[!1,!1,!1,!0]);nn(w,f,m,E,Lt,di.disabled,Kt,Yr.disabled,Ve,"clear",ye,we,Oe,Fe,De,pn,J,ut)}{const Kt=new di({func:k.ALWAYS,mask:255},255,255,k.KEEP,k.KEEP,k.REPLACE),Cn=new Ui([k.ONE,k.ONE,k.ONE,k.ONE],o.ax.transparent,[!1,!1,!1,!0],k.MIN);nn(w,f,m,E,Lt,Kt,Cn,Yr.disabled,Ve,"sdf",ye,we,Oe,Fe,De,pn,J,ut)}{const Kt=Ve?k.ZERO:k.ONE_MINUS_DST_ALPHA,Cn=new di({func:k.EQUAL,mask:255},255,255,k.KEEP,k.DECR,k.DECR),bn=new Ui([Kt,k.DST_ALPHA,k.ONE_MINUS_DST_ALPHA,k.ZERO],o.ax.transparent,[!0,!0,!0,!0]);nn(w,f,m,E,Lt,Cn,bn,Yr.disabled,Ve,"color",ye,we,Oe,Fe,De,pn,J,ut)}{const Kt=new Ui([k.ONE,k.ONE,k.ONE,Ve?k.ZERO:k.ONE],o.ax.transparent,[!1,!1,!1,!0],Ve?k.FUNC_ADD:k.MAX);nn(w,f,m,E,Lt,di.disabled,Kt,Yr.disabled,Ve,"clear",ye,we,Oe,Fe,De,pn,J,ut,Ct)}};if(Ee||Ke){let Ve;if(w.prepareDrawTile(),z){const ut=z.drapeBufferSize[0],Ct=z.drapeBufferSize[1];Ve=z.framebufferCopyTexture,Ve&&(!Ve||Ve.size[0]===ut&&Ve.size[1]===Ct)||(Ve&&Ve.destroy(),Ve=z.framebufferCopyTexture=new o.T(R,new o.h({width:ut,height:Ct}),k.RGBA)),Ve.bind(k.LINEAR,k.CLAMP_TO_EDGE),k.copyTexImage2D(k.TEXTURE_2D,0,k.RGBA,0,0,ut,Ct,0)}Ee&&ct(!0,!1,Ve),Ke&&ct(!1,!0,Ve)}}else Ee&&Ze(!0),Ke&&Ze(!1)}}},hillshade:function(w,f,m,E){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent"||w.style.disableElevatedTerrain)return;const B=w.context,R=w.terrain&&w.terrain.renderingToTexture,[k,z]=w.renderPass!=="translucent"||R?[{},E]:w.stencilConfigForOverlap(E);for(const K of z){const J=f.getTile(K);if(J.needsHillshadePrepare&&w.renderPass==="offscreen")U_(w,J,m);else if(w.renderPass==="translucent"){const ne=w.depthModeForSublayer(0,ir.ReadOnly),he=m.paint.get("hillshade-emissive-strength"),ye=w.colorModeForDrapableLayerRenderPass(he),we=R&&w.terrain?w.terrain.stencilModeForRTTOverlap(K):k[K.overscaledZ];hg(w,K,J,m,ne,we,ye)}}B.viewport.set([0,0,w.width,w.height]),w.resetStencilClippingMasks()},raster:function(w,f,m,E,B,R){if(w.renderPass!=="translucent"||m.paint.get("raster-opacity")===0)return;const k=w.transform.projection.name==="globe",z=m.paint.get("raster-elevation")!==0,K=z&&k;if(w.renderElevatedRasterBackface&&!K)return;const J=w.context,ne=J.gl,he=f.getSource(),ye=function(Ve,ut,Ct,Lt){const $t=ut.paint.get("raster-color"),pn=Ve.type==="raster-array",Kt=[],Cn=ut.paint.get("raster-resampling"),bn=ut.paint.get("raster-color-mix");let $n=ut.paint.get("raster-color-range");const Yt=[bn[0],bn[1],bn[2],0],vn=bn[3];let Nt=Cn==="nearest"?Lt.NEAREST:Lt.LINEAR;if(pn&&(Kt.push("RASTER_ARRAY"),$t||Kt.push("RASTER_COLOR"),Cn==="linear"&&Kt.push("RASTER_ARRAY_LINEAR"),Nt=Lt.NEAREST,!$n&&Ve.rasterLayers)){const ln=Ve.rasterLayers.find(({id:jn})=>jn===ut.sourceLayer);ln&&ln.fields&&ln.fields.range&&($n=ln.fields.range)}if($n=$n||[0,1],$t){Kt.push("RASTER_COLOR"),Ct.activeTexture.set(Lt.TEXTURE2),ut.updateColorRamp($n);let ln=ut.colorRampTexture;ln||(ln=ut.colorRampTexture=new o.T(Ct,ut.colorRamp,Lt.RGBA)),ln.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}return{mix:Yt,range:$n,offset:vn,defines:Kt,resampling:Nt}}(he,m,J,ne);if(he instanceof o.ap&&!E.length&&!k)return;const we=m.paint.get("raster-emissive-strength"),Oe=w.colorModeForDrapableLayerRenderPass(we),Fe=w.terrain&&w.terrain.renderingToTexture,De=!w.options.moving,Ee=m.paint.get("raster-resampling")==="nearest"?ne.NEAREST:ne.LINEAR;if(he instanceof o.ap&&!E.length&&(he.onNorthPole||he.onSouthPole)){const Ve=z?w.stencilModeFor3D():di.disabled;return void fn(!!he.onNorthPole,null,w,f,m,we,ye,Yr.disabled,Ve)}if(!E.length)return;const[Ke,lt]=he instanceof o.ap||Fe?[{},E]:w.stencilConfigForOverlap(E),Ze=lt[lt.length-1].overscaledZ;K&&ye.defines.push("PROJECTION_GLOBE_VIEW"),z&&ye.defines.push("RENDER_CUTOFF");const ct=(Ve,ut,Ct)=>{for(const Lt of Ve){const $t=Lt.toUnwrapped(),pn=f.getTile(Lt);if(Fe&&(!pn||!pn.hasData()))continue;J.activeTexture.set(ne.TEXTURE0);const Kt=fr(pn,he,m,ye);if(!Kt||!Kt.texture)continue;const{texture:Cn,mix:bn,offset:$n,tileSize:Yt,buffer:vn}=Kt;let Nt,ln;Fe?(Nt=ir.disabled,ln=Lt.projMatrix):z?(Nt=new ir(ne.LEQUAL,ir.ReadWrite,w.depthRangeFor3D),ln=k?Float32Array.from(w.transform.expandedFarZProjMatrix):w.transform.calculateProjMatrix($t,De)):(Nt=w.depthModeForSublayer(Lt.overscaledZ-Ze,m.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,ne.LESS),ln=w.transform.calculateProjMatrix($t,De));const jn=w.terrain&&Fe?w.terrain.stencilModeForRTTOverlap(Lt):Ke[Lt.overscaledZ],sr=R?0:m.paint.get("raster-fade-duration");pn.registerFadeDuration(sr);const tr=f.findLoadedParent(Lt,0),pr=V_(pn,tr,f,w.transform,sr);let kr,Zr;w.terrain&&w.terrain.prepareDrawTile(),J.activeTexture.set(ne.TEXTURE0),Cn.bind(Ee,ne.CLAMP_TO_EDGE),J.activeTexture.set(ne.TEXTURE1),tr?(tr.texture&&tr.texture.bind(Ee,ne.CLAMP_TO_EDGE),kr=Math.pow(2,tr.tileID.overscaledZ-pn.tileID.overscaledZ),Zr=[pn.tileID.canonical.x*kr%1,pn.tileID.canonical.y*kr%1]):Cn.bind(Ee,ne.CLAMP_TO_EDGE),Cn.useMipmap&&J.extTextureFilterAnisotropic&&w.transform.pitch>20&&ne.texParameterf(ne.TEXTURE_2D,J.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,J.extTextureFilterAnisotropicMax);const jr=w.transform;let Wr;const Vi=z?or(jr):[0,0,0,0];let vi,Li,Bi,ms,Co,os=0;if(K&&he instanceof o.ap&&he.coordinates.length>3)vi=Float32Array.from(o.aT(o.ci(new o.bs(0,0,0)))),Li=Float32Array.from(jr.globeMatrix),Bi=Float32Array.from(o.ce(jr)),ms=[o.a5(jr.center.lng),o.ae(jr.center.lat)],Wr=he.elevatedGlobePerspectiveTransform,Co=he.elevatedGlobeGridMatrix||new Float32Array(9);else if(K){const ls=o.cf(Lt.canonical);os=o.cg(ls.getCenter().lat),vi=Float32Array.from(o.aT(o.ci(Lt.canonical))),Li=Float32Array.from(jr.globeMatrix),Bi=Float32Array.from(o.ce(jr)),ms=[o.a5(jr.center.lng),o.ae(jr.center.lat)],Wr=[0,0],Co=Float32Array.from(o.ch(Lt.canonical,ls,os,jr.worldSize/jr._pixelsPerMercatorPixel))}else Wr=he instanceof o.ap?he.perspectiveTransform:[0,0],vi=new Float32Array(16),Li=new Float32Array(9),Bi=new Float32Array(16),ms=[0,0],Co=new Float32Array(9);const ia=Dm(ln,vi,Li,Bi,Co,Zr||[0,0],o.S(w.transform.zoom),ms,Vi,kr||1,pr,m,Wr,z?m.paint.get("raster-elevation"):0,2,bn,$n,ye.range,Yt,vn,we),as=w.isTileAffectedByFog(Lt),Os=w.getOrCreateProgram("raster",{defines:ye.defines,overrideFog:as});if(w.uploadCommonUniforms(J,Os,$t),he instanceof o.ap){const ls=he.elevatedGlobeVertexBuffer,Ls=he.elevatedGlobeIndexBuffer;if(Fe||!k)he.boundsBuffer&&he.boundsSegments&&Os.draw(w,ne.TRIANGLES,Nt,di.disabled,Oe,Yr.disabled,ia,m.id,he.boundsBuffer,w.quadTriangleIndexBuffer,he.boundsSegments);else if(ls&&Ls){const Lo=jr.zoom<=o.bG?he.elevatedGlobeSegments:he.getSegmentsForLongitude(jr.center.lng);Lo&&Os.draw(w,ne.TRIANGLES,Nt,di.disabled,Oe,ut,ia,m.id,ls,Ls,Lo)}}else if(K){Nt=new ir(ne.LEQUAL,ir.ReadOnly,w.depthRangeFor3D);const ls=w.globeSharedBuffers;if(ls){const[Ls,Lo,$s]=ls.getGridBuffers(os,!1);Os.draw(w,ne.TRIANGLES,Nt,Ct||jn,w.colorModeForRenderPass(),ut,ia,m.id,Ls,Lo,$s)}}else{const{tileBoundsBuffer:ls,tileBoundsIndexBuffer:Ls,tileBoundsSegments:Lo}=w.getTileBoundsBuffers(pn);Os.draw(w,ne.TRIANGLES,Nt,jn,Oe,Yr.disabled,ia,m.id,ls,Ls,Lo)}}if(!(he instanceof o.ap)&&K)for(const Lt of Ve){const $t=Lt.canonical.y===(1<<Lt.canonical.z)-1;Lt.canonical.y===0&&fn(!0,Lt,w,f,m,we,ye,ut,Ct||di.disabled),$t&&fn(!1,Lt,w,f,m,we,ye,ut===Yr.frontCW?Yr.backCW:Yr.frontCW,Ct||di.disabled)}};K?ct(lt,w.renderElevatedRasterBackface?Yr.backCW:Yr.frontCW,w.stencilModeFor3D()):ct(lt,Yr.disabled,void 0),w.resetStencilClippingMasks()},"raster-particle":function(w,f,m,E,B,R){w.renderPass==="offscreen"&&function(k,z,K,J){if(!J.length)return;const ne=k.context,he=ne.gl,ye=z.getSource();if(!(ye instanceof Rn))return;const we=[];for(const De of J){const Ee=z.getTile(De);if(!(Ee instanceof Yh))continue;const Ke=ar(Ee,ye,K);if(!Ke)continue;const lt=[Ke.tileSize,Ke.tileSize];let Ze=K.tileFramebuffer;Ze||(Ze=K.tileFramebuffer=ne.createFramebuffer(lt[0],lt[1],!0,null));let ct=Ee.rasterParticleState;const Ve=K.paint.get("raster-particle-count");ct||(ct=Ee.rasterParticleState=new _a(ne,De,lt,Ve));const ut=ct.update(K.lastInvalidatedAt);ct.numParticles!==Ve&&ct.setNumParticles(De,Ve);const Ct=ct.targetColorTexture;ct.targetColorTexture=ct.backgroundColorTexture,ct.backgroundColorTexture=Ct;const Lt=ct.particleVertices0;ct.particleVertices0=ct.particleVertices1,ct.particleVertices1=Lt,we.push([De,Ke,ct,ut])}if(we.length===0)return;const Oe=o.f.now(),Fe=K.previousDrawTimestamp?.001*(Oe-K.previousDrawTimestamp):.0167;if(K.previousDrawTimestamp=Oe,K.hasColorMap()){ne.activeTexture.set(he.TEXTURE0+2);let De=K.colorRampTexture;De||(De=K.colorRampTexture=new o.T(ne,K.colorRamp,he.RGBA)),De.bind(he.LINEAR,he.CLAMP_TO_EDGE)}ne.bindFramebuffer.set(K.tileFramebuffer.framebuffer),ne.activeTexture.set(he.TEXTURE0),function(De,Ee,Ke){const lt=De.context,Ze=lt.gl,ct=Ee.tileFramebuffer;lt.activeTexture.set(Ze.TEXTURE0);const Ve={u_texture:0,u_opacity:1.05*(Ct=Ee.paint.get("raster-particle-fade-opacity-factor"))/(Ct+.05)},ut=De.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ct;for(const Lt of Ke){const[,,$t,pn]=Lt;ct.colorAttachment.set($t.targetColorTexture.texture),lt.viewport.set([0,0,ct.width,ct.height]),lt.clear({color:o.ax.transparent}),pn&&($t.backgroundColorTexture.bind(Ze.NEAREST,Ze.CLAMP_TO_EDGE),ut.draw(De,Ze.TRIANGLES,ir.disabled,di.disabled,Ui.alphaBlended,Yr.disabled,Ve,Ee.id,De.viewportBuffer,De.quadTriangleIndexBuffer,De.viewportSegments))}}(k,K,we),function(De,Ee,Ke,lt){const Ze=De.context.gl,ct=Ke.tileFramebuffer,Ve=De.transform.projection.name==="globe",ut=Ke.paint.get("raster-particle-max-speed");for(const Ct of lt){const[Lt,$t,pn]=Ct;$t.texture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),ct.colorAttachment.set(pn.targetColorTexture.texture);const Kt=De.getOrCreateProgram("rasterParticleDraw",{defines:$t.defines,overrideFog:!1}),Cn=$t.scalarData?[]:[0,1,2,3].map(Yt=>o.cG[Yt](Lt));Cn.push(Lt);const bn=Lt.canonical.x,$n=Lt.canonical.y;for(const Yt of Cn){const vn=Ee.getTile(Ve?Yt.wrapped():Yt);if(!vn)continue;const Nt=vn.rasterParticleState;if(!Nt)continue;const ln=gw([Yt.canonical.x+(1<<Yt.canonical.z)*(Yt.wrap-Lt.wrap)-bn,Yt.canonical.y-$n],0,$t.texture.size,2,ut,$t.textureOffset,$t.scale,$t.offset);Kt.draw(De,Ze.POINTS,ir.disabled,di.disabled,Ui.alphaBlended,Yr.disabled,ln,Ke.id,Nt.particleVertices0,void 0,Nt.particleSegment)}}}(k,z,K,we),function(De,Ee,Ke,lt){const Ze=De.context.gl;let ct=Ee.transformFeedbackObject;ct||(ct=Ee.transformFeedbackObject=Ze.createTransformFeedback()),Ze.bindTransformFeedback(Ze.TRANSFORM_FEEDBACK,Ee.transformFeedbackObject);const Ve=Ee.paint.get("raster-particle-max-speed"),ut=lt*Ee.paint.get("raster-particle-speed-factor")*.3,Ct=(Lt=Ee.paint.get("raster-particle-reset-rate-factor"),Math.pow(Lt,6));var Lt;for(const $t of Ke){const[,pn,Kt]=$t;pn.texture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE);const Cn=mw(0,pn.texture.size,Ve,ut,Ct,pn.textureOffset,pn.scale,pn.offset);De.getOrCreateProgram("rasterParticleUpdate",{defines:pn.defines,transformFeedback:{bufferMode:Ze.SEPARATE_ATTRIBS,shaderVaryings:["v_new_particle"]}}).draw(De,Ze.POINTS,ir.disabled,di.disabled,Ui.disabled,Yr.disabled,Cn,Ee.id,Kt.particleVertices0,void 0,Kt.particleSegment,{},void 0,void 0,void 0,void 0,[{buffer:Kt.particleVertices1,targetIndex:0}])}Ze.bindTransformFeedback(Ze.TRANSFORM_FEEDBACK,null)}(k,K,we,Fe)}(w,f,m,E),w.renderPass==="translucent"&&(function(k,z,K,J,ne){const he=k.context,ye=he.gl,we=!k.options.moving,Oe=k.transform.projection.name==="globe";if(!J.length)return;const[Fe,De]=k.stencilConfigForOverlap(J),Ee=[];Oe&&Ee.push("PROJECTION_GLOBE_VIEW");for(const Ke of De){const lt=Ke.toUnwrapped(),Ze=z.getTile(Ke);if(!Ze.rasterParticleState)continue;const ct=Ze.rasterParticleState,Ve=100;Ze.registerFadeDuration(Ve);const ut=z.findLoadedParent(Ke,0),Ct=V_(Ze,ut,z,k.transform,Ve);let Lt,$t;k.terrain&&k.terrain.prepareDrawTile(),he.activeTexture.set(ye.TEXTURE0),ct.targetColorTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),he.activeTexture.set(ye.TEXTURE1),ut&&ut.rasterParticleState?(ut.rasterParticleState.targetColorTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Lt=Math.pow(2,ut.tileID.overscaledZ-Ze.tileID.overscaledZ),$t=[Ze.tileID.canonical.x*Lt%1,Ze.tileID.canonical.y*Lt%1]):ct.targetColorTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE);const pn=Oe?Float32Array.from(k.transform.expandedFarZProjMatrix):k.transform.calculateProjMatrix(lt,we),Kt=k.transform,Cn=ri(Kt),bn=o.cf(Ke.canonical),$n=o.cg(bn.getCenter().lat);let Yt,vn,Nt,ln,jn;Oe?(Yt=Float32Array.from(o.aT(o.ci(Ke.canonical))),vn=Float32Array.from(Kt.globeMatrix),Nt=Float32Array.from(o.ce(Kt)),ln=[o.a5(Kt.center.lng),o.ae(Kt.center.lat)],jn=Float32Array.from(o.ch(Ke.canonical,bn,$n,Kt.worldSize/Kt._pixelsPerMercatorPixel))):(Yt=new Float32Array(16),vn=new Float32Array(9),Nt=new Float32Array(16),ln=[0,0],jn=new Float32Array(9));const sr=ZE(pn,Yt,vn,Nt,jn,$t||[0,0],o.S(k.transform.zoom),ln,Cn,Lt||1,Ct,250),tr=k.isTileAffectedByFog(Ke),pr=k.getOrCreateProgram("rasterParticle",{defines:Ee,overrideFog:tr});if(k.uploadCommonUniforms(he,pr,lt),Oe){const kr=new ir(ye.LEQUAL,ir.ReadWrite,k.depthRangeFor3D),Zr=0,jr=k.globeSharedBuffers;if(jr){const[Wr,Vi,vi]=jr.getGridBuffers($n,Zr!==0);pr.draw(k,ye.TRIANGLES,kr,di.disabled,Ui.alphaBlended,Yr.backCCW,sr,K.id,Wr,Vi,vi)}}else{const kr=k.depthModeForSublayer(0,ir.ReadOnly),Zr=Fe[Ke.overscaledZ],{tileBoundsBuffer:jr,tileBoundsIndexBuffer:Wr,tileBoundsSegments:Vi}=k.getTileBoundsBuffers(Ze);pr.draw(k,ye.TRIANGLES,kr,Zr,Ui.alphaBlended,Yr.disabled,sr,K.id,jr,Wr,Vi)}}k.resetStencilClippingMasks()}(w,f,m,E),w.style.map.triggerRepaint())},background:function(w,f,m,E){const B=m.paint.get("background-color"),R=m.paint.get("background-opacity"),k=m.paint.get("background-emissive-strength");if(R===0)return;const z=w.context,K=z.gl,J=w.transform,ne=J.tileSize,he=m.paint.get("background-pattern");if(w.isPatternMissing(he,m.scope))return;const ye=!he&&B.a===1&&R===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ye)return;const we=di.disabled,Oe=w.depthModeForSublayer(0,ye==="opaque"?ir.ReadWrite:ir.ReadOnly),Fe=w.colorModeForDrapableLayerRenderPass(k),De=he?"backgroundPattern":"background";let Ee,Ke=E;Ke||(Ee=w.getBackgroundTiles(),Ke=Object.values(Ee).map(lt=>lt.tileID)),he&&(z.activeTexture.set(K.TEXTURE0),w.imageManager.bind(w.context,m.scope));for(const lt of Ke){const Ze=w.isTileAffectedByFog(lt),ct=w.getOrCreateProgram(De,{overrideFog:Ze}),Ve=lt.toUnwrapped(),ut=E?lt.projMatrix:w.transform.calculateProjMatrix(Ve);w.prepareDrawTile();const Ct=f?f.getTile(lt):Ee?Ee[lt.key]:new lu(lt,ne,J.zoom,w),Lt=he?mg(ut,k,R,w,he,m.scope,{tileID:lt,tileSize:ne}):K_(ut,k,R,B);w.uploadCommonUniforms(z,ct,Ve);const{tileBoundsBuffer:$t,tileBoundsIndexBuffer:pn,tileBoundsSegments:Kt}=w.getTileBoundsBuffers(Ct);ct.draw(w,K.TRIANGLES,Oe,we,Fe,Yr.disabled,Lt,m.id,$t,pn,Kt)}},sky:function(w,f,m){const E=w._atmosphere?o.S(w.transform.zoom):1,B=m.paint.get("sky-opacity")*E;if(B===0)return;const R=w.context,k=m.paint.get("sky-type"),z=new ir(R.gl.LEQUAL,ir.ReadOnly,[0,1]),K=w.frameCounter/1e3%1;k==="atmosphere"?w.renderPass==="offscreen"?m.needsSkyboxCapture(w)&&(function(J,ne,he,ye){const we=J.context,Oe=we.gl;let Fe=ne.skyboxFbo;if(!Fe){Fe=ne.skyboxFbo=we.createFramebuffer(32,32,!0,null),ne.skyboxGeometry=new Ha(we),ne.skyboxTexture=we.gl.createTexture(),Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,ne.skyboxTexture),Oe.texParameteri(Oe.TEXTURE_CUBE_MAP,Oe.TEXTURE_WRAP_S,Oe.CLAMP_TO_EDGE),Oe.texParameteri(Oe.TEXTURE_CUBE_MAP,Oe.TEXTURE_WRAP_T,Oe.CLAMP_TO_EDGE),Oe.texParameteri(Oe.TEXTURE_CUBE_MAP,Oe.TEXTURE_MIN_FILTER,Oe.LINEAR),Oe.texParameteri(Oe.TEXTURE_CUBE_MAP,Oe.TEXTURE_MAG_FILTER,Oe.LINEAR);for(let lt=0;lt<6;++lt)Oe.texImage2D(Oe.TEXTURE_CUBE_MAP_POSITIVE_X+lt,0,Oe.RGBA,32,32,0,Oe.RGBA,Oe.UNSIGNED_BYTE,null)}we.bindFramebuffer.set(Fe.framebuffer),we.viewport.set([0,0,32,32]);const De=ne.getCenter(J,!0),Ee=J.getOrCreateProgram("skyboxCapture"),Ke=new Float64Array(16);o.a6.identity(Ke),o.a6.rotateY(Ke,Ke,.5*-Math.PI),pl(J,ne,Ee,Ke,De,0),o.a6.identity(Ke),o.a6.rotateY(Ke,Ke,.5*Math.PI),pl(J,ne,Ee,Ke,De,1),o.a6.identity(Ke),o.a6.rotateX(Ke,Ke,.5*-Math.PI),pl(J,ne,Ee,Ke,De,2),o.a6.identity(Ke),o.a6.rotateX(Ke,Ke,.5*Math.PI),pl(J,ne,Ee,Ke,De,3),o.a6.identity(Ke),pl(J,ne,Ee,Ke,De,4),o.a6.identity(Ke),o.a6.rotateY(Ke,Ke,Math.PI),pl(J,ne,Ee,Ke,De,5),we.viewport.set([0,0,J.width,J.height])}(w,m),m.markSkyboxValid(w)):w.renderPass==="sky"&&function(J,ne,he,ye,we){const Oe=J.context,Fe=Oe.gl,De=J.transform,Ee=J.getOrCreateProgram("skybox");Oe.activeTexture.set(Fe.TEXTURE0),Fe.bindTexture(Fe.TEXTURE_CUBE_MAP,ne.skyboxTexture);const Ke=((lt,Ze,ct,Ve,ut)=>({u_matrix:lt,u_sun_direction:Ze,u_cubemap:0,u_opacity:Ve,u_temporal_offset:ut}))(De.skyboxMatrix,ne.getCenter(J,!1),0,ye,we);J.uploadCommonUniforms(Oe,Ee),Ee.draw(J,Fe.TRIANGLES,he,di.disabled,J.colorModeForRenderPass(),Yr.backCW,Ke,"skybox",ne.skyboxGeometry.vertexBuffer,ne.skyboxGeometry.indexBuffer,ne.skyboxGeometry.segment)}(w,m,z,B,K):k==="gradient"&&w.renderPass==="sky"&&function(J,ne,he,ye,we){const Oe=J.context,Fe=Oe.gl,De=J.transform,Ee=J.getOrCreateProgram("skyboxGradient");ne.skyboxGeometry||(ne.skyboxGeometry=new Ha(Oe)),Oe.activeTexture.set(Fe.TEXTURE0);let Ke=ne.colorRampTexture;Ke||(Ke=ne.colorRampTexture=new o.T(Oe,ne.colorRamp,Fe.RGBA)),Ke.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE);const lt=((Ze,ct,Ve,ut,Ct)=>({u_matrix:Ze,u_color_ramp:0,u_center_direction:ct,u_radius:o.bj(Ve),u_opacity:ut,u_temporal_offset:Ct}))(De.skyboxMatrix,ne.getCenter(J,!1),ne.paint.get("sky-gradient-radius"),ye,we);J.uploadCommonUniforms(Oe,Ee),Ee.draw(J,Fe.TRIANGLES,he,di.disabled,J.colorModeForRenderPass(),Yr.backCW,lt,"skyboxGradient",ne.skyboxGeometry.vertexBuffer,ne.skyboxGeometry.indexBuffer,ne.skyboxGeometry.segment)}(w,m,z,B,K)},debug:function(w,f,m,E,B,R){for(let k=0;k<m.length;k++)if(B){const J=new o.ax(E.r*.8,E.g*.8,E.b*.8,1);js(w,f,m[k],E,-1,-1,R),js(w,f,m[k],E,-1,1,R),js(w,f,m[k],E,1,1,R),js(w,f,m[k],E,1,-1,R),js(w,f,m[k],J,0,0,R)}else js(w,f,m[k],E,0,0,R)},custom:function(w,f,m,E){const B=w.context,R=m.implementation;if(!w.transform.projection.unsupportedLayers||!w.transform.projection.unsupportedLayers.includes("custom")||w.terrain&&(w.terrain.renderingToTexture||w.renderPass==="offscreen")&&m.isLayerDraped(f)){if(w.renderPass==="offscreen"){const k=R.prerender;if(k){if(w.setCustomLayerDefaults(),B.setColorMode(w.colorModeForRenderPass()),w.transform.projection.name==="globe"){const z=w.transform.pointMerc;k.call(R,B.gl,w.transform.customLayerMatrix(),w.transform.getProjection(),w.transform.globeToMercatorMatrix(),o.S(w.transform.zoom),[z.x,z.y],w.transform.pixelsPerMeterRatio)}else k.call(R,B.gl,w.transform.customLayerMatrix());B.setDirty(),w.setBaseState()}}else if(w.renderPass==="translucent"){if(w.terrain&&w.terrain.renderingToTexture){const z=R.renderToTile;if(z){const K=E[0].canonical,J=new o.L(K.x+E[0].wrap*(1<<K.z),K.y,K.z);B.setDepthMode(ir.disabled),B.setStencilMode(di.disabled),B.setColorMode(w.colorModeForRenderPass()),w.setCustomLayerDefaults(),z.call(R,B.gl,J),B.setDirty(),w.setBaseState()}return}w.setCustomLayerDefaults(),B.setColorMode(w.colorModeForRenderPass()),B.setStencilMode(di.disabled);const k=R.renderingMode==="3d"?new ir(w.context.gl.LEQUAL,ir.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,ir.ReadOnly);if(B.setDepthMode(k),w.transform.projection.name==="globe"){const z=w.transform.pointMerc;R.render(B.gl,w.transform.customLayerMatrix(),w.transform.getProjection(),w.transform.globeToMercatorMatrix(),o.S(w.transform.zoom),[z.x,z.y],w.transform.pixelsPerMeterRatio)}else R.render(B.gl,w.transform.customLayerMatrix());B.setDirty(),w.setBaseState(),B.bindFramebuffer.set(null)}}else o.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(w,f,m,E){if(w.renderPass==="opaque")return;const B=m.paint.get("model-opacity");if(B===0)return;const R=m.paint.get("model-cast-shadows");if(w.renderPass==="shadow"&&(!R||w.terrain&&B<.65&&m._transitionablePaint._values["model-opacity"].value.expression instanceof o.Z))return;const k=w.shadowRenderer,z=m.paint.get("model-receive-shadows");k&&(k.useNormalOffset=!0,z||(k.enabled=!1));const K=()=>{k&&(k.useNormalOffset=!0,z||(k.enabled=!0))},J=f.getSource();if(w.renderPass==="light-beam"&&J.type!=="batched-model")return;if(J.type==="vector"||J.type==="geojson")return function(Ee,Ke,lt,Ze){const ct=Ee.transform;if(ct.projection.name!=="mercator")return void o.w(`Drawing 3D models for ${ct.projection.name} projection is not yet implemented`);const Ve=ct.getFreeCameraOptions().position;if(!Ee.modelManager)return;const ut=Ee.modelManager;lt.modelManager=ut;const Ct=Ee.shadowRenderer;if(!lt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Lt=lt._unevaluatedLayout._values["model-id"],$t={...lt.layout.get("model-id").parameters};for(const pn of Ze){const Kt=Ke.getTile(pn).getBucket(lt);if(!Kt||Kt.projection.name!==ct.projection.name)continue;const Cn=lf(pn,ct);$t.zoom=Cn;const bn=Lt.possiblyEvaluate($t);if(af(Ee,Kt,pn),Ol.shadowUniformsInitialized=!1,Ol.useSingleShadowCascade=!!Ct&&Ct.getMaxCascadeForTile(pn.toUnwrapped())===0,Ee.renderPass==="shadow"&&Ct){if(Ee.currentShadowCascade===1&&Kt.isInsideFirstShadowMapFrustum)continue;const vn=ct.calculatePosMatrix(pn.toUnwrapped(),ct.worldSize);if(Ol.tileMatrix.set(vn),Ol.shadowTileMatrix=Float32Array.from(Ct.calculateShadowPassMatrixFromMatrix(vn)),Ol.aabb.min.fill(0),Ol.aabb.max[0]=Ol.aabb.max[1]=o.V,Ol.aabb.max[2]=0,_w(Kt,Ol,Ee,lt.scope))continue}const $n=1<<pn.canonical.z,Yt=[((Ve.x-pn.wrap)*$n-pn.canonical.x)*o.V,(Ve.y*$n-pn.canonical.y)*o.V,Ve.z*$n*o.V];for(let vn in Kt.instancesPerModel){const Nt=Kt.instancesPerModel[vn];Nt.features.length>0&&(vn=bn.evaluate(Nt.features[0].feature,{}));const ln=ut.getModel(vn,lt.scope);if(ln&&ln.uploaded)for(const jn of ln.nodes)Ca(Ee,lt,jn,Nt,Yt,pn,Ol)}}}(w,f,m,E),void K();if(!J.loaded())return;if(J.type==="batched-model")return function(Ee,Ke,lt,Ze){lt.resetLayerRenderingStats(Ee);const ct=Ee.context,Ve=Ee.transform,ut=Ee.style.fog,Ct=Ee.shadowRenderer;if(Ve.projection.name!=="mercator")return void o.w(`Drawing 3D landmark models for ${Ve.projection.name} projection is not yet implemented`);const Lt=Ee.transform.getFreeCameraOptions().position,$t=o.N.scale([],[Lt.x,Lt.y,Lt.z],Ee.transform.worldSize);o.N.negate($t,$t);const pn=o.a6.identity([]),Kt=o.cR(Ve.center.lat,Ve.zoom),Cn=o.a6.fromScaling([],[1,1,1/Kt]);o.a6.translate(pn,pn,$t);const bn=lt.paint.get("model-opacity"),$n=new ir(ct.gl.LEQUAL,ir.ReadWrite,Ee.depthRangeFor3D),Yt=new ir(ct.gl.LEQUAL,ir.ReadOnly,Ee.depthRangeFor3D),vn=new o.bS([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Nt=Ee.renderPass==="shadow",ln=Nt&&Ct?Ct.getCurrentCascadeFrustum():Ve.getFrustum(Ve.scaleZoom(Ve.worldSize)),jn=lt.getLayerRenderingStats(),sr=function(tr,pr){for(const kr of Ze){const Zr=Ke.getTile(kr).getBucket(lt);if(!Zr||!Zr.uploaded)continue;let jr=!1;Ct&&(jr=Ct.getMaxCascadeForTile(kr.toUnwrapped())===0);const Wr=Ve.calculatePosMatrix(kr.toUnwrapped(),Ve.worldSize),Vi=Zr.modelTraits;for(const vi of Zr.getNodesInfo()){if(vi.hiddenByReplacement||!vi.node.meshes)continue;const Li=vi.evaluatedScale,Bi=vi.node;let ms=0;if(Ee.terrain&&Bi.elevation&&(ms=Bi.elevation*Ee.terrain.exaggeration()),Li[0]<=1&&Li[1]<=1&&Li[2]<=1&&(()=>{const Lo=vi.getLocalBounds();return vn.min=[...Lo.min],vn.max=[...Lo.max],vn.min[2]+=ms,vn.max[2]+=ms,o.N.transformMat4(vn.min,vn.min,Wr),o.N.transformMat4(vn.max,vn.max,Wr),vn})().intersects(ln)===0)continue;const Co=Ee.renderPass==="light-beam",os=[...Wr];o.a6.translate(os,os,[(Bi.anchor?Bi.anchor[0]:0)*(Li[0]-1),(Bi.anchor?Bi.anchor[1]:0)*(Li[1]-1),ms]),o.N.exactEquals(Li,o.cT)||o.a6.scale(os,os,Li),o.a6.multiply(os,os,Bi.matrix);const ia=o.a6.multiply([],Cn,os);o.a6.multiply(ia,pn,ia);const as=o.a6.invert([],ia);o.a6.transpose(as,as),o.a6.scale(as,as,qf);const Os=o.a6.multiply([],Ve.expandedFarZProjMatrix,os),ls=Vi&o.cV.HasMapboxMeshFeatures,Ls=ls?0:vi.evaluatedRMEA[0][2];for(let Lo=0;Lo<Bi.meshes.length;++Lo){const $s=Bi.meshes[Lo],Nl=Lo===Bi.lightMeshIndex;if(Nl){if(!Co&&!Ee.terrain&&Ee.shadowRenderer){Ee.currentLayer<Ee.firstLightBeamLayer&&(Ee.firstLightBeamLayer=Ee.currentLayer);continue}}else if(Co)continue;const Mc={defines:[]},eh=[];if(Js(Mc.defines,eh,$s,Ee),ls||Mc.defines.push("DIFFUSE_SHADED"),jr&&Mc.defines.push("SHADOWS_SINGLE_CASCADE"),jn&&(Nt?jn.numRenderedVerticesInShadowPass+=$s.vertexArray.length:jn.numRenderedVerticesInTransparentPass+=$s.vertexArray.length),Nt){rn($s,os,Ee,lt);continue}let ep=null;if(ut){const nh=nl(os,Ee.transform);if(ep=new Float32Array(nh),Ve.projection.name!=="globe"){const tp=$s.aabb.min,wg=$s.aabb.max,[nv,r1]=ut.getOpacityForBounds(nh,tp[0],tp[1],wg[0],wg[1]);Mc.overrideFog=nv>=hr||r1>=hr}}const th=$s.material;let kl;th.occlusionTexture&&th.occlusionTexture.offsetScale&&(kl=th.occlusionTexture.offsetScale,Mc.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!Nt&&Ct&&(Ct.useNormalOffset=!!$s.normalBuffer);const Al=Ee.getOrCreateProgram("model",Mc);!Nt&&Ct&&Ct.setupShadowsFromMatrix(os,Al,Ct.useNormalOffset),Ee.uploadCommonUniforms(ct,Al,kr.toUnwrapped(),ep);const Au=th.pbrMetallicRoughness;Au.metallicFactor=.9,Au.roughnessFactor=.5;const Pu=Xp(new Float32Array(Os),new Float32Array(ia),new Float32Array(as),Ee,bn,Au.baseColorFactor,th.emissiveFactor,Au.metallicFactor,Au.roughnessFactor,th,Ls,lt,[0,0,0],kl);Al.draw(Ee,ct.gl.TRIANGLES,pr&&!Nl?$n:Yt,di.disabled,tr?Nl||bn<1||vi.hasTranslucentParts?Ui.alphaBlended:Ui.unblended:Ui.disabled,Yr.backCCW,Pu,lt.id,$s.vertexBuffer,$s.indexBuffer,$s.segments,lt.paint,Ee.transform.zoom,void 0,eh)}}}};(function(tr,pr,kr,Zr){const jr=tr.terrain?tr.terrain.exaggeration():0,Wr=tr.transform.zoom;for(const Vi of Zr){const vi=pr.getTile(Vi).getBucket(kr);vi&&(tr.conflationActive&&vi.updateReplacement(Vi,tr.replacementSource),vi.evaluateScale(tr,kr),tr.terrain&&jr>0&&vi.elevationUpdate(tr.terrain,jr,Vi,kr.source),vi.needsReEvaluation(tr,Wr,kr)&&vi.evaluate(kr))}})(Ee,Ke,lt,Ze),bn===1?sr(!0,!0):(sr(!1,!0),sr(!0,!1))}(w,f,m,E),void K();const ne=J.getModels(),he=[],ye=w.transform.getFreeCameraOptions().position,we=o.N.scale([],[ye.x,ye.y,ye.z],w.transform.worldSize);o.N.negate(we,we);const Oe=[],Fe=[];let De=0;for(const Ee of ne){const Ke=m.paint.get("model-rotation").constantOr(null),lt=m.paint.get("model-scale").constantOr(null),Ze=m.paint.get("model-translation").constantOr(null);Ee.computeModelMatrix(w,Ke,lt,Ze,!0,!0,!1);const ct=o.a6.identity([]),Ve=o.cR(Ee.position.lat,w.transform.zoom),ut=o.a6.fromScaling([],[1,1,1/Ve]);o.a6.translate(ct,ct,we),he.push({zScaleMatrix:ut,negCameraPosMatrix:ct});for(const Ct of Ee.nodes)Ga(w.transform,Ct,Ee.matrix,w.transform.expandedFarZProjMatrix,De,Oe,Fe);De++}if(Oe.sort((Ee,Ke)=>Ke.depth-Ee.depth),w.renderPass!=="shadow"){if(B===1)for(const Ee of Fe)fu(Ee,w,m,he[Ee.modelIndex],di.disabled,w.colorModeForRenderPass());else{for(const Ee of Fe)fu(Ee,w,m,he[Ee.modelIndex],di.disabled,Ui.disabled);for(const Ee of Fe)fu(Ee,w,m,he[Ee.modelIndex],w.stencilModeFor3D(),w.colorModeForRenderPass());w.resetStencilClippingMasks()}for(const Ee of Oe)fu(Ee,w,m,he[Ee.modelIndex],di.disabled,w.colorModeForRenderPass());K()}else{for(const Ee of Fe)rn(Ee.mesh,Ee.nodeModelMatrix,w,m);for(const Ee of Oe)rn(Ee.mesh,Ee.nodeModelMatrix,w,m);K()}}},Lu={model:function(w,f,m){const E=w.scope,B=f.getSource();if(!B.loaded())return;if(B.type==="vector"||B.type==="geojson")return void(m.modelManager&&m.modelManager.upload(m,E));if(B.type==="batched-model")return;const R=B.getModels();for(const k of R)k.upload(m.context)},raster:function(w,f,m){const E=f.getSource();if(!(E instanceof Rn&&E.loaded()))return;const B=w.sourceLayer||E.rasterLayerIds&&E.rasterLayerIds[0];if(!B)return;const R=w.paint.get("raster-array-band")||E.getInitialBand(B);if(R==null)return;const k=f.getIds().map(z=>f.getTileByID(z));for(const z of k)z.updateNeeded(B,R)&&E.prepareTile(z,B,R)},"raster-particle":function(w,f,m){const E=f.getSource();if(!(E instanceof Rn&&E.loaded()))return;const B=w.sourceLayer||E.rasterLayerIds&&E.rasterLayerIds[0];if(!B)return;const R=w.paint.get("raster-particle-array-band")||E.getInitialBand(B);if(R==null)return;const k=f.getIds().map(z=>f.getTileByID(z));for(const z of k)z.updateNeeded(B,R)&&E.prepareTile(z,B,R)}};class Zp{constructor(f,m,E,B){this.context=new x0(f,m),this.transform=E,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=B,this._debugParams={showTerrainProxyTiles:!1},B.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=uu.maxUnderzooming+uu.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new o.cX,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new tf(this),this._wireframeDebugCache=new Vm,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(f,m){const E=!!f&&!!f.terrain&&this.transform.projection.supportsTerrain;if(!(E||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new XE(this,f));const B=this._terrain;this.transform.elevation=E?B:null,B.update(f,this.transform,m),this.transform.elevation&&!B.enabled&&(this.transform.elevation=null)}_updateFog(f){const m=f.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[E,B]=m.getFovAdjustedRange(this.transform._fov);if(E>B)return void(this.transform.fogCullDistSq=null);const R=E+.78*(B-E);this.transform.fogCullDistSq=R*R}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(f,m){if(this.width=f*o.f.devicePixelRatio,this.height=m*o.f.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style.order)this.style._mergedLayers[E].resize()}setup(){const f=this.context,m=new o.aN;m.emplaceBack(0,0),m.emplaceBack(o.V,0),m.emplaceBack(0,o.V),m.emplaceBack(o.V,o.V),this.tileExtentBuffer=f.createVertexBuffer(m,o.aP.members),this.tileExtentSegments=o.aB.simpleSegment(0,0,4,2);const E=new o.aN;E.emplaceBack(0,0),E.emplaceBack(o.V,0),E.emplaceBack(0,o.V),E.emplaceBack(o.V,o.V),this.debugBuffer=f.createVertexBuffer(E,o.aP.members),this.debugSegments=o.aB.simpleSegment(0,0,4,5);const B=new o.aN;B.emplaceBack(-1,-1),B.emplaceBack(1,-1),B.emplaceBack(-1,1),B.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(B,o.aP.members),this.viewportSegments=o.aB.simpleSegment(0,0,4,2);const R=new o.av;R.emplaceBack(0,0,0,0),R.emplaceBack(o.V,0,o.V,0),R.emplaceBack(0,o.V,0,o.V),R.emplaceBack(o.V,o.V,o.V,o.V),this.mercatorBoundsBuffer=f.createVertexBuffer(R,o.aR.members),this.mercatorBoundsSegments=o.aB.simpleSegment(0,0,4,2);const k=new o.aw;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(k);const z=new o.aO;for(const J of[0,1,3,2,0])z.emplaceBack(J);this.debugIndexBuffer=f.createIndexBuffer(z),this.emptyTexture=new o.T(f,new o.h({width:1,height:1},Uint8Array.of(0,0,0,0)),f.gl.RGBA),this.identityMat=o.a6.create();const K=this.context.gl;this.stencilClearMode=new di({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(f){return f._makeTileBoundsBuffers(this.context,this.transform.projection),f._tileBoundsBuffer?{tileBoundsBuffer:f._tileBoundsBuffer,tileBoundsIndexBuffer:f._tileBoundsIndexBuffer,tileBoundsSegments:f._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const f=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,f.TRIANGLES,ir.disabled,this.stencilClearMode,Ui.disabled,Yr.disabled,qp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(f,m,E){if(!m||this.currentStencilSource===m.id||!f.isTileClipped()||!E||E.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const K of E)if(this._tileClippingMaskIDs[K.key]===void 0){z=!0;break}if(!z)return}this.currentStencilSource=m.id;const B=this.context,R=B.gl;this.nextStencilID+E.length>256&&this.clearStencil(),B.setColorMode(Ui.disabled),B.setDepthMode(ir.disabled);const k=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of E){const K=m.getTile(z),J=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:ne,tileBoundsIndexBuffer:he,tileBoundsSegments:ye}=this.getTileBoundsBuffers(K);k.draw(this,R.TRIANGLES,ir.disabled,new di({func:R.ALWAYS,mask:0},J,255,R.KEEP,R.KEEP,R.REPLACE),Ui.disabled,Yr.disabled,qp(z.projMatrix),"$clipping",ne,he,ye)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const f=this.nextStencilID++,m=this.context.gl;return new di({func:m.NOTEQUAL,mask:255},f,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(f){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(f);const m=this.context.gl;return new di({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(f){const m=this.context.gl,E=f.sort((k,z)=>z.overscaledZ-k.overscaledZ),B=E[E.length-1].overscaledZ,R=E[0].overscaledZ-B+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const k={};for(let z=0;z<R;z++)k[z+B]=new di({func:m.GEQUAL,mask:255},z+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=R,[k,E]}return[{[B]:di.disabled},E]}colorModeForRenderPass(){const f=this.context.gl;return this._showOverdrawInspector?new Ui([f.CONSTANT_COLOR,f.ONE,f.CONSTANT_COLOR,f.ONE],new o.ax(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ui.unblended:Ui.alphaBlended}colorModeForDrapableLayerRenderPass(f){const m=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Ui([m.ONE,m.ONE_MINUS_SRC_ALPHA,m.CONSTANT_ALPHA,m.ONE_MINUS_SRC_ALPHA],new o.ax(0,0,0,f===void 0?0:f),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(f,m,E,B=!1){if(!this.opaquePassEnabledForLayer()&&!B)return ir.disabled;const R=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new ir(E||this.context.gl.LEQUAL,m,[R,R])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(f,m){this._wireframeDebugCache.update(this.frameCounter),this.style=f,this.options=m;const E=this.style._mergedLayers,B=this.style.order,R=B.map(Ve=>E[Ve]),k=this.style._mergedSourceCaches;this.imageManager=f.imageManager,this.modelManager=f.modelManager,this.symbolFadeChange=f.placement.symbolFadeChange(o.f.now()),this.imageManager.beginFrame();let z=0,K=!1;for(const Ve in k){const ut=k[Ve];ut.used&&(ut.prepare(this.context),ut.getSource().usedInConflation&&++z)}for(const Ve of R)Ve.isHidden(this.transform.zoom)||this.prepareLayer(Ve);const J={},ne={},he={},ye={},we={};for(const Ve in k){const ut=k[Ve];J[Ve]=ut.getVisibleCoordinates(),ne[Ve]=J[Ve].slice().reverse(),he[Ve]=ut.getVisibleCoordinates(!0).reverse(),ye[Ve]=ut.getShadowCasterCoordinates(),we[Ve]=ut.sortCoordinatesByDistance(J[Ve])}const Oe=Ve=>{const ut=this.style.getLayerSourceCache(Ve);return ut&&ut.used?ut.getSource():null};if(z){const Ve=[];for(const ut of R)this.layerUsedInConflation(ut,Oe(ut))&&Ve.push(ut);if(Ve&&Ve.length>1){const ut=[];for(const Ct of Ve){const Lt=this.style.getLayerSourceCache(Ct);Lt&&Lt.used&&Lt.getSource().usedInConflation&&ut.push({layer:Ct.fqid,cache:Lt})}this.replacementSource.setSources(ut),K=!0}}K||this.replacementSource.clear(),this.conflationActive=K,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const Ve of R){const ut=Ve.cutoffRange();if(this.longestCutoffRange=Math.max(ut,this.longestCutoffRange),ut>0){const Ct=Oe(Ve);Ct&&(this.minCutoffZoom=Math.max(Ct.minzoom,this.minCutoffZoom)),Ve.minzoom&&(this.minCutoffZoom=Math.max(Ve.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let Ve=0;Ve<R.length;Ve++)if(R[Ve].is3D()){this.opaquePassCutoff=Ve;break}const Fe=this.style&&this.style.fog;Fe?(this._fogVisible=Fe.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Fe.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(he),this.opaquePassCutoff=0);const De=this._shadowRenderer;if(De){De.updateShadowParameters(this.transform,this.style.directionalLight);for(const Ve in k)for(const ut of J[Ve]){let Ct={min:0,max:0};this.terrain&&(Ct=this.terrain.getMinMaxForTile(ut)||Ct),De.addShadowReceiver(ut.toUnwrapped(),Ct.min,Ct.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.cY(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Mr(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!o.cZ(this.context.gl))return;this.renderPass="offscreen";for(const Ve of R){const ut=f.getLayerSourceCache(Ve);if(!Ve.hasOffscreenPass()||Ve.isHidden(this.transform.zoom))continue;const Ct=ut?ne[ut.id]:void 0;(Ve.type==="custom"||Ve.type==="raster"||Ve.type==="raster-particle"||Ve.isSky()||Ct&&Ct.length)&&this.renderLayer(this,ut,Ve,Ct)}this.depthRangeFor3D=[0,1-(R.length+2)*this.numSublayers*this.depthEpsilon];const Ee=this.terrain;Ee&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&Ee.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ye)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Ke=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),lt=(()=>{if(m.showOverdrawInspector)return o.ax.black;if(this.style.fog&&this.transform.projection.supportsFog&&!Ke){const Ve=this.style.fog.properties.get("color").toArray01();return new o.ax(...Ve)}if(this.style.fog&&this.transform.projection.supportsFog&&Ke){const Ve=this.style.fog.properties.get("space-color").toArray01();return new o.ax(...Ve)}return o.ax.transparent})();if(this.context.clear({color:lt,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ke&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){const Ve=R[this.currentLayer],ut=f.getLayerSourceCache(Ve);if(Ve.isSky())continue;const Ct=ut?(Ve.is3D()?we:ne)[ut.id]:void 0;this._renderTileClippingMasks(Ve,ut,Ct),this.renderLayer(this,ut,Ve,Ct)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ke&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||o.S(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){const Ve=R[this.currentLayer],ut=f.getLayerSourceCache(Ve);Ve.isSky()&&this.renderLayer(this,ut,Ve,ut?ne[ut.id]:void 0)}function Ze(Ve,ut){let Ct;return ut&&(Ct=(Ve.type==="symbol"?he:Ve.is3D()?we:ne)[ut.id]),Ct}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<B.length;){const Ve=R[this.currentLayer];if(Ve.type==="raster"){const ut=f.getLayerSourceCache(Ve);this.renderLayer(this,ut,Ve,Ze(Ve,ut))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let ct=0;for(De&&(ct=De.getShadowCastingLayerCount());this.currentLayer<B.length;){const Ve=R[this.currentLayer],ut=f.getLayerSourceCache(Ve);if(Ve.isSky())++this.currentLayer;else if(Ee&&this.style.isLayerDraped(Ve)){if(Ve.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=Ee.renderBatch(this.currentLayer)}else{if(this._renderTileClippingMasks(Ve,ut,ut?J[ut.id]:void 0),this.renderLayer(this,ut,Ve,Ze(Ve,ut)),!Ee&&De&&ct>0&&Ve.hasShadowPass()&&--ct==0&&(De.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Ct=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Ct;this.currentLayer++){const Lt=R[this.currentLayer];if(!Lt.hasLightBeamPass())continue;const $t=f.getLayerSourceCache(Lt);this.renderLayer(this,$t,Lt,$t?ne[$t.id]:void 0)}this.currentLayer=Ct,this.renderPass="translucent"}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Ve=null;R.forEach(ut=>{const Ct=f.getLayerSourceCache(ut);Ct&&!ut.isHidden(this.transform.zoom)&&Ct.getVisibleCoordinates().length&&(!Ve||Ve.getSource().maxzoom<Ct.getSource().maxzoom)&&(Ve=Ct)}),Ve&&this.options.showTileBoundaries&&Yf.debug(this,Ve,Ve.getVisibleCoordinates(),o.ax.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Yf.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new o.ax(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Ve){const ut=Ve.transform.padding;ro(Ve,Ve.transform.height-(ut.top||0),3,Lr),ro(Ve,ut.bottom||0,3,Ii),Zs(Ve,ut.left||0,3,Jr),Zs(Ve,Ve.transform.width-(ut.right||0),3,go);const Ct=Ve.transform.centerPoint;(function(Lt,$t,pn,Kt){$i(Lt,$t-1,pn-10,2,20,Kt),$i(Lt,$t-10,pn-1,20,2,Kt)})(Ve,Ct.x,Ve.transform.height-Ct.y,Mo)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),K||(this.conflationActive=!1)}prepareLayer(f){this.gpuTimingStart(f);const{unsupportedLayers:m}=this.transform.projection,E=!m||!m.includes(f.type);if(Lu[f.type]&&(E||this.terrain&&f.type==="custom")){const B=this.style.getLayerSourceCache(f);Lu[f.type](f,B,this)}this.gpuTimingEnd()}renderLayer(f,m,E,B){E.isHidden(this.transform.zoom)||(E.type==="background"||E.type==="sky"||E.type==="custom"||E.type==="model"||E.type==="raster"||E.type==="raster-particle"||B&&B.length)&&(this.id=E.id,this.gpuTimingStart(E),(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes(E.type)||f.terrain&&E.type==="custom")&&Yf[E.type](f,m,E,B,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(f){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery,E=this.context.gl;let B=this.gpuTimers[f.id];B||(B=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:E.createQuery()}),B.calls++,E.beginQuery(m.TIME_ELAPSED_EXT,B.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const f=this.context.extTimerQuery,m=this.context.gl,E=m.createQuery();this.deferredRenderGpuTimeQueries.push(E),m.beginQuery(f.TIME_ELAPSED_EXT,E)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const f=this.gpuTimers;return this.gpuTimers={},f}collectDeferredRenderGpuQueries(){const f=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],f}queryGpuTimers(f){const m={};for(const E in f){const B=f[E],R=this.context.extTimerQuery,k=R.getQueryParameter(B.query,this.context.gl.QUERY_RESULT)/1e6;R.deleteQueryEXT(B.query),m[E]=k}return m}queryGpuTimeDeferredRender(f){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery,E=this.context.gl;let B=0;for(const R of f)B+=m.getQueryParameter(R,E.QUERY_RESULT)/1e6,m.deleteQueryEXT(R);return B}translatePosMatrix(f,m,E,B,R){if(!E[0]&&!E[1])return f;const k=R?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(k){const J=Math.sin(k),ne=Math.cos(k);E=[E[0]*ne-E[1]*J,E[0]*J+E[1]*ne]}const z=[R?E[0]:o.a3(m,E[0],this.transform.zoom),R?E[1]:o.a3(m,E[1],this.transform.zoom),0],K=new Float32Array(16);return o.a6.translate(K,f,z),K}saveTileTexture(f){const m=f.size[0],E=this._tileTextures[m];E?E.push(f):this._tileTextures[m]=[f]}getTileTexture(f){const m=this._tileTextures[f];return m&&m.length>0?m.pop():null}isPatternMissing(f,m){return f===null||f!==void 0&&!this.imageManager.getPattern(f.toString(),m)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(f,m,E){const B=E===void 0?this.terrain&&this.terrain.renderingToTexture:E,R=this.terrain&&this.terrain.exaggeration()===0,k=[];return this.style&&this.style.enable3dLights()&&(f==="globeRaster"||f==="terrainRaster"?(k.push("LIGHTING_3D_MODE"),k.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):B||k.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||k.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?k.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):k.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(k.push("TERRAIN"),this.linearFloatFilteringSupported()&&k.push("TERRAIN_DEM_FLOAT_FORMAT"),R&&k.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&k.push("GLOBE"),!this._fogVisible||B||m!==void 0&&!m||k.push("FOG","FOG_DITHERING"),B&&k.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&k.push("OVERDRAW_INSPECTOR"),k}getOrCreateProgram(f,m){this.cache=this.cache||{};const E=m&&m.defines||[],B=m&&m.config,R=m&&m.transformFeedback,k=this.currentGlobalDefines(f,m&&m.overrideFog,m&&m.overrideRtt).concat(E),z=Mu.cacheKey(Pm[f],f,k,B);return this.cache[z]||(this.cache[z]=new Mu(this.context,f,Pm[f],B,yw[f],k,R)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(f,m){if(this.style.enable3dLights()){const E=this.style.directionalLight,B=this.style.ambientLight;if(E&&B){const R=((k,z)=>{const K=k.properties.get("direction"),J=k.properties.get("color").toArray01(),ne=k.properties.get("intensity"),he=z.properties.get("color").toArray01(),ye=z.properties.get("intensity"),we=[K.x,K.y,K.z],Oe=o.cn(he,ye),Fe=o.cn(J,ne);return{u_lighting_ambient_color:Oe,u_lighting_directional_dir:we,u_lighting_directional_color:Fe,u_ground_radiance:H_(we,Fe,Oe)}})(E,B);m.setLightsUniformValues(f,R)}}}uploadCommonUniforms(f,m,E,B,R){if(this.uploadCommonLightUniforms(f,m),this.terrain&&this.terrain.renderingToTexture)return;const k=this.style.fog;if(k){const z=k.getOpacity(this.transform.pitch),K=((J,ne,he,ye,we,Oe,Fe,De,Ee,Ke,lt,Ze)=>{const ct=J.transform,Ve=ne.properties.get("color").toArray01();Ve[3]=ye;const ut=J.frameCounter/1e3%1,[Ct,Lt]=ne.properties.get("vertical-range");return{u_fog_matrix:he?ct.calculateFogTileMatrix(he):Ze||J.identityMat,u_fog_range:ne.getFovAdjustedRange(ct._fov),u_fog_color:Ve,u_fog_horizon_blend:ne.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ct,Lt),Lt],u_fog_temporal_offset:ut,u_frustum_tl:we,u_frustum_tr:Oe,u_frustum_br:Fe,u_frustum_bl:De,u_globe_pos:Ee,u_globe_radius:Ke,u_viewport:lt,u_globe_transition:o.S(ct.zoom),u_is_globe:+(ct.projection.name==="globe")}})(this,k,E,z,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.f.devicePixelRatio,this.transform.height*o.f.devicePixelRatio],B);m.setFogUniformValues(f,K)}R&&m.setCutoffUniformValues(f,R.uniformValues)}setTileLoadedFlag(f){this.tileLoaded=f}saveCanvasCopy(){const f=this.canvasCopy();f&&(this.frameCopies.push(f),this.tileLoaded=!1)}canvasCopy(){const f=this.context.gl,m=f.createTexture();return f.bindTexture(f.TEXTURE_2D,m),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,0,0,f.drawingBufferWidth,f.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const f=this.style&&this.style.fog;return!!f&&f.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const f=this._backgroundTiles,m=this._backgroundTiles={},E=this.transform.coveringTiles({tileSize:512});for(const B of E)m[B.key]=f[B.key]||new lu(B,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(f,m){return!(!f.is3D()||f.minzoom&&f.minzoom>this.transform.zoom||f.sourceLayer!=="building"&&(!m||m.type!=="batched-model"))}isTileAffectedByFog(f){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let m=this._cachedTileFogOpacities[f.key];return m||(this._cachedTileFogOpacities[f.key]=m=this.style.fog.getOpacityForTile(f)),m[0]>=hr||m[1]>=hr}}function od(w,f){let m=!1,E=null;const B=()=>{E=null,m&&(w(),E=setTimeout(B,f),m=!1)};return()=>(m=!0,E||B(),E)}class Hm{constructor(f){this._hashName=f&&encodeURIComponent(f),o.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=od(this._updateHashUnthrottled.bind(this),300)}addTo(f){return this._map=f,window.addEventListener("hashchange",this._onHashChange,!1),f.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const f=this._map;if(!f)return"";const m=vg(f);if(this._hashName){const E=this._hashName;let B=!1;const R=location.hash.slice(1).split("&").map(k=>{const z=k.split("=")[0];return z===E?(B=!0,`${z}=${m}`):k}).filter(k=>k);return B||R.push(`${E}=${m}`),`#${R.join("&")}`}return`#${m}`}_getCurrentHash(){const f=location.hash.replace("#","");if(this._hashName){let m;return f.split("&").map(E=>E.split("=")).forEach(E=>{E[0]===this._hashName&&(m=E)}),(m&&m[1]||"").split("/")}return f.split("/")}_onHashChange(){const f=this._map;if(!f)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some(E=>isNaN(E))){const E=f.dragRotate.isEnabled()&&f.touchZoomRotate.isEnabled()?+(m[3]||0):f.getBearing();return f.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:E,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function vg(w,f){const m=w.getCenter(),E=Math.round(100*w.getZoom())/100,B=Math.ceil((E*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,B),k=Math.round(m.lng*R)/R,z=Math.round(m.lat*R)/R,K=w.getBearing(),J=w.getPitch();let ne=f?`/${k}/${z}/${E}`:`${E}/${z}/${k}`;return(K||J)&&(ne+="/"+Math.round(10*K)/10),J&&(ne+=`/${Math.round(J)}`),ne}const yg={linearity:.3,easing:o.c_(0,0,.3,1)},Yl=o.e({deceleration:2500,maxSpeed:1400},yg),W_=o.e({deceleration:20,maxSpeed:1400},yg),Jp=o.e({deceleration:1e3,maxSpeed:360},yg),ho=o.e({deceleration:1e3,maxSpeed:90},yg);class Ks{constructor(f){this._map=f,this.clear()}clear(){this._inertiaBuffer=[]}record(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.f.now(),settings:f})}_drainInertiaBuffer(){const f=this._inertiaBuffer,m=o.f.now();for(;f.length>0&&m-f[0].time>160;)f.shift()}_onMoveEnd(f){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)m.zoom+=R.zoomDelta||0,m.bearing+=R.bearingDelta||0,m.pitch+=R.pitchDelta||0,R.panDelta&&m.pan._add(R.panDelta),R.around&&(m.around=R.around),R.pinchAround&&(m.pinchAround=R.pinchAround);const E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,B={};if(m.pan.mag()){const R=Ru(m.pan.mag(),E,o.e({},Yl,f||{}));B.offset=m.pan.mult(R.amount/m.pan.mag()),B.center=this._map.transform.center,Gm(B,R)}if(m.zoom){const R=Ru(m.zoom,E,W_);B.zoom=this._map.transform.zoom+R.amount,Gm(B,R)}if(m.bearing){const R=Ru(m.bearing,E,Jp);B.bearing=this._map.transform.bearing+o.aa(R.amount,-179,179),Gm(B,R)}if(m.pitch){const R=Ru(m.pitch,E,ho);B.pitch=this._map.transform.pitch+R.amount,Gm(B,R)}if(B.zoom||B.bearing){const R=m.pinchAround===void 0?m.around:m.pinchAround;B.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),B.noMoveStart=!0,B}}function Gm(w,f){(!w.duration||w.duration<f.duration)&&(w.duration=f.duration,w.easing=f.easing)}function Ru(w,f,m){const{maxSpeed:E,linearity:B,deceleration:R}=m,k=o.aa(w*B/(f/1e3),-E,E),z=Math.abs(k)/(R*B);return{easing:m.easing,duration:1e3*z,amount:k*(z/2)}}class Qa extends o.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,m,E,B={}){const R=H(m.getCanvasContainer(),E),k=m.unproject(R);super(f,o.e({point:R,lngLat:k,originalEvent:E},B)),this._defaultPrevented=!1,this.target=m}}class uf extends o.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,m,E){const B=f==="touchend"?E.changedTouches:E.touches,R=Q(m.getCanvasContainer(),B),k=R.map(K=>m.unproject(K)),z=R.reduce((K,J,ne,he)=>K.add(J.div(he.length)),new o.P(0,0));super(f,{points:R,point:z,lngLats:k,lngLat:m.unproject(z),originalEvent:E}),this._defaultPrevented=!1}}class q_ extends o.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,m,E){super(f,{originalEvent:E}),this._defaultPrevented=!1}}class Y_{constructor(f,m){this._map=f,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(f){return this._firePreventable(new q_(f.type,this._map,f))}mousedown(f,m){return this._mousedownPos=m,this._firePreventable(new Qa(f.type,this._map,f))}mouseup(f){this._map.fire(new Qa(f.type,this._map,f))}preclick(f){const m=o.e({},f);m.type="preclick",this._map.fire(new Qa(m.type,this._map,m))}click(f,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(f),this._map.fire(new Qa(f.type,this._map,f)))}dblclick(f){return this._firePreventable(new Qa(f.type,this._map,f))}mouseover(f){this._map.fire(new Qa(f.type,this._map,f))}mouseout(f){this._map.fire(new Qa(f.type,this._map,f))}touchstart(f){return this._firePreventable(new uf(f.type,this._map,f))}touchmove(f){this._map.fire(new uf(f.type,this._map,f))}touchend(f){this._map.fire(new uf(f.type,this._map,f))}touchcancel(f){this._map.fire(new uf(f.type,this._map,f))}_firePreventable(f){if(this._map.fire(f),f.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hf{constructor(f){this._map=f}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(f){this._map.fire(new Qa(f.type,this._map,f))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new Qa(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ih{constructor(f,m){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(f,m){this.isEnabled()&&f.shiftKey&&f.button===0&&(P(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(f,m){if(!this._active)return;const E=m,B=this._startPos,R=this._lastPos;if(!B||!R||R.equals(E)||!this._box&&E.dist(B)<this._clickTolerance)return;this._lastPos=E,this._box||(this._box=y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));const k=Math.min(B.x,E.x),z=Math.max(B.x,E.x),K=Math.min(B.y,E.y),J=Math.max(B.y,E.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${k}px,${K}px)`,this._box.style.width=z-k+"px",this._box.style.height=J-K+"px")})}mouseupWindow(f,m){if(!this._active)return;const E=this._startPos,B=m;if(E&&f.button===0){if(this.reset(),V(),E.x!==B.x||E.y!==B.y)return this._map.fire(new o.b("boxzoomend",{originalEvent:f})),{cameraAnimation:R=>R.fitScreenCoordinates(E,B,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",f)}}keydown(f){this._active&&f.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",f))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),F(),delete this._startPos,delete this._lastPos}_fireEvent(f,m){return this._map.fire(new o.b(f,{originalEvent:m}))}}function eA(w,f){const m={};for(let E=0;E<w.length;E++)m[w[E].identifier]=f[E];return m}class Qm{constructor(f){this.reset(),this.numTouches=f.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(f,m,E){(this.centroid||E.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=f.timeStamp),E.length===this.numTouches&&(this.centroid=function(B){const R=new o.P(0,0);for(const k of B)R._add(k);return R.div(B.length)}(m),this.touches=eA(E,m)))}touchmove(f,m,E){if(this.aborted||!this.centroid)return;const B=eA(E,m);for(const R in this.touches){const k=B[R];(!k||k.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(f,m,E){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),E.length===0){const B=!this.aborted&&this.centroid;if(this.reset(),B)return B}}}class Xf{constructor(f){this.singleTap=new Qm(f),this.numTaps=f.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(f,m,E){this.singleTap.touchstart(f,m,E)}touchmove(f,m,E){this.singleTap.touchmove(f,m,E)}touchend(f,m,E){const B=this.singleTap.touchend(f,m,E);if(B){const R=f.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(B)<30;if(R&&k||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}}}class jm{constructor(){this._zoomIn=new Xf({numTouches:1,numTaps:2}),this._zoomOut=new Xf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(f,m,E){this._zoomIn.touchstart(f,m,E),this._zoomOut.touchstart(f,m,E)}touchmove(f,m,E){this._zoomIn.touchmove(f,m,E),this._zoomOut.touchmove(f,m,E)}touchend(f,m,E){const B=this._zoomIn.touchend(f,m,E),R=this._zoomOut.touchend(f,m,E);return B?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(B)},{originalEvent:f})}):R?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(R)},{originalEvent:f})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const tA={0:1,2:2};class Bh{constructor(f){this.reset(),this._clickTolerance=f.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(f,m){return!1}_move(f,m){return{}}mousedown(f,m){if(this._lastPoint)return;const E=G(f);this._correctButton(f,E)&&(this._lastPoint=m,this._eventButton=E)}mousemoveWindow(f,m){const E=this._lastPoint;if(E){if(f.preventDefault(),this._eventButton!=null&&function(B,R){const k=tA[R];return B.buttons===void 0||(B.buttons&k)!==k}(f,this._eventButton))this.reset();else if(this._moved||!(m.dist(E)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(E,m)}}mouseupWindow(f){this._lastPoint&&G(f)===this._eventButton&&(this._moved&&V(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class X_ extends Bh{mousedown(f,m){super.mousedown(f,m),this._lastPoint&&(this._active=!0)}_correctButton(f,m){return m===0&&!f.ctrlKey}_move(f,m){return{around:m,panDelta:m.sub(f)}}}class Zf extends Bh{_correctButton(f,m){return m===0&&f.ctrlKey||m===2}_move(f,m){const E=.8*(m.x-f.x);if(E)return this._active=!0,{bearingDelta:E}}contextmenu(f){f.preventDefault()}}class Km extends Bh{_correctButton(f,m){return m===0&&f.ctrlKey||m===2}_move(f,m){const E=-.5*(m.y-f.y);if(E)return this._active=!0,{pitchDelta:E}}contextmenu(f){f.preventDefault()}}class Wm{constructor(f,m){this._map=f,this._el=f.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),o.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}touchstart(f,m,E){return this._calculateTransform(f,m,E)}touchmove(f,m,E){if(this._active&&!(E.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(E.length===1&&!o.c$())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return f.cancelable&&f.preventDefault(),this._calculateTransform(f,m,E)}}touchend(f,m,E){this._calculateTransform(f,m,E),this._active&&E.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(f,m,E){E.length>0&&(this._active=!0);const B=eA(E,m),R=new o.P(0,0),k=new o.P(0,0);let z=0;for(const J in B){const ne=B[J],he=this._touches[J];he&&(R._add(ne),k._add(ne.sub(he)),z++,B[J]=ne)}if(this._touches=B,z<this._minTouches||!k.mag())return;const K=k.div(z);return this._sum._add(K),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(z),panDelta:K}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Wo{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(f){}_move(f,m,E){return{}}touchstart(f,m,E){this._firstTwoTouches||E.length<2||(this._firstTwoTouches=[E[0].identifier,E[1].identifier],this._start([m[0],m[1]]))}touchmove(f,m,E){const B=this._firstTwoTouches;if(!B)return;f.preventDefault();const[R,k]=B,z=nA(E,m,R),K=nA(E,m,k);if(!z||!K)return;const J=this._aroundCenter?null:z.add(K).div(2);return this._move([z,K],J,f)}touchend(f,m,E){if(!this._firstTwoTouches)return;const[B,R]=this._firstTwoTouches,k=nA(E,m,B),z=nA(E,m,R);k&&z||(this._active&&V(),this.reset())}touchcancel(){this.reset()}enable(f){this._enabled=!0,this._aroundCenter=!!f&&f.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function nA(w,f,m){for(let E=0;E<w.length;E++)if(w[E].identifier===m)return f[E]}function qm(w,f){return Math.log(w/f)/Math.LN2}class Ym extends Wo{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(f){this._startDistance=this._distance=f[0].dist(f[1])}_move(f,m){const E=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(qm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qm(this._distance,E),pinchAround:m}}}function df(w,f){return 180*w.angleWith(f)/Math.PI}class Jf extends Wo{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])}_move(f,m){const E=this._vector;if(this._vector=f[0].sub(f[1]),E&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:df(this._vector,E),pinchAround:m}}_isBelowThreshold(f){this._minDiameter=Math.min(this._minDiameter,f.mag());const m=25/(Math.PI*this._minDiameter)*360,E=this._startVector;if(!E)return!1;const B=df(f,E);return Math.abs(B)<m}}function Xm(w){return Math.abs(w.y)>Math.abs(w.x)}class R0 extends Wo{constructor(f){super(),this._map=f}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(f){this._lastPoints=f,Xm(f[0].sub(f[1]))&&(this._valid=!1)}_move(f,m,E){const B=this._lastPoints;if(!B)return;const R=f[0].sub(B[0]),k=f[1].sub(B[1]);return this._map._cooperativeGestures&&!o.c$()&&E.touches.length<3||(this._valid=this.gestureBeginsVertically(R,k,E.timeStamp),!this._valid)?void 0:(this._lastPoints=f,this._active=!0,{pitchDelta:(R.y+k.y)/2*-.5})}gestureBeginsVertically(f,m,E){if(this._valid!==void 0)return this._valid;const B=f.mag()>=2,R=m.mag()>=2;if(!B&&!R)return;if(!B||!R)return this._firstMove==null&&(this._firstMove=E),E-this._firstMove<100&&void 0;const k=f.y>0==m.y>0;return Xm(f)&&Xm(m)&&k}}const rA={panStep:100,bearingStep:15,pitchStep:10};class _g{constructor(){const f=rA;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(f){if(f.altKey||f.ctrlKey||f.metaKey)return;let m=0,E=0,B=0,R=0,k=0;switch(f.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:f.shiftKey?E=-1:(f.preventDefault(),R=-1);break;case 39:f.shiftKey?E=1:(f.preventDefault(),R=1);break;case 38:f.shiftKey?B=1:(f.preventDefault(),k=-1);break;case 40:f.shiftKey?B=-1:(f.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(E=0,B=0),{cameraAnimation:z=>{const K=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:Z_,zoom:m?Math.round(K)+m*(f.shiftKey?2:1):K,bearing:z.getBearing()+E*this._bearingStep,pitch:z.getPitch()+B*this._pitchStep,offset:[-R*this._panStep,-k*this._panStep],center:z.getCenter()},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Z_(w){return w*(2-w)}const ff=4.000244140625,Zm=1/450;class Jm{constructor(f,m){this._map=f,this._el=f.getCanvasContainer(),this._handler=m,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Zm,o.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(f){this._defaultZoomRate=f}setWheelZoomRate(f){this._wheelZoomRate=f}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!f&&f.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(f){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(f.ctrlKey||f.metaKey||this.isZooming()||o.c$()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=f.deltaMode===WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY;const E=o.f.now(),B=E-(this._lastWheelEventTime||0);this._lastWheelEventTime=E,m!==0&&m%ff==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(B*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),f.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=f,this._delta-=m,this._active||this._start(f)),f.preventDefault()}_onTimeout(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)}_start(f){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=H(this._el,f);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const f=this._map.transform;this._type==="wheel"&&f.projection.wrap&&(f._center.lng>=180||f._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>f._terrainEnabled()&&this._aroundCoord?f.computeZoomRelativeTo(this._aroundCoord):f.zoom;if(this._delta!==0){const J=this._type==="wheel"&&Math.abs(this._delta)>ff?this._wheelZoomRate:this._defaultZoomRate;let ne=2/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&ne!==0&&(ne=1/ne);const he=m(),ye=Math.pow(2,he),we=typeof this._targetZoom=="number"?f.zoomScale(this._targetZoom):ye;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(we*ne))),this._type==="wheel"&&(this._startZoom=he,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const E=typeof this._targetZoom=="number"?this._targetZoom:m(),B=this._startZoom,R=this._easing;let k,z=!1;if(this._type==="wheel"&&B&&R){const J=Math.min((o.f.now()-this._lastWheelEventTime)/200,1),ne=R(J);k=o.U(B,E,ne),J<1?this._frameId||(this._frameId=!0):z=!0}else k=E,z=!0;this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let K=k-m();return K*this._lastDelta<0&&(K=0),{noInertia:!0,needsRenderFrame:!z,zoomDelta:K,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(f){let m=o.d0;if(this._prevEase){const E=this._prevEase,B=(o.f.now()-E.start)/E.duration,R=E.easing(B+.01)-E.easing(B),k=.27/Math.sqrt(R*R+1e-4)*.01,z=Math.sqrt(.0729-k*k);m=o.c_(k,z,.25,1)}return this._prevEase={start:o.f.now(),duration:f,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class ad{constructor(f,m){this._clickZoom=f,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class pf{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(f,m){return f.preventDefault(),{cameraAnimation:E=>{E.easeTo({duration:300,zoom:E.getZoom()+(f.shiftKey?-1:1),around:E.unproject(m)},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Af{constructor(){this._tap=new Xf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(f,m,E){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?E.length>0&&(this._swipePoint=m[0],this._swipeTouch=E[0].identifier):this._tap.touchstart(f,m,E))}touchmove(f,m,E){if(this._tapTime){if(this._swipePoint){if(E[0].identifier!==this._swipeTouch)return;const B=m[0],R=B.y-this._swipePoint.y;return this._swipePoint=B,f.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(f,m,E)}touchend(f,m,E){this._tapTime?this._swipePoint&&E.length===0&&this.reset():this._tap.touchend(f,m,E)&&(this._tapTime=f.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ev{constructor(f,m,E){this._el=f,this._mousePan=m,this._touchPan=E}enable(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class P0{constructor(f,m,E){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=m,this._mousePitch=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class J_{constructor(f,m,E,B){this._el=f,this._touchZoom=m,this._touchRotate=E,this._tapDragZoom=B,this._rotationDisabled=!1,this._enabled=!0}enable(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const tv=w=>w.zoom||w.drag||w.pitch||w.rotate;class F0 extends o.b{}class O0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(f,m){const E=o.N.sub([],m,f);this.radius=o.N.length(E[2]<0?o.N.div([],E,this.constants):[E[0],E[1],0])}projectRay(f){o.N.div(f,f,this.constants),o.N.normalize(f,f),o.N.mul(f,f,this.constants);const m=o.N.scale([],f,this.radius);if(m[2]>0){const E=o.N.scale([],[0,0,1],o.N.dot(m,[0,0,1])),B=o.N.scale([],o.N.normalize([],[m[0],m[1],0]),this.radius),R=o.N.add([],m,o.N.scale([],o.N.sub([],o.N.add([],B,E),m),2));m[0]=R[0],m[1]=R[1]}return m}}function e1(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class ZN{constructor(f,m){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ks(f),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new O0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),o.aY(["handleEvent","handleWindowEvent"],this);const E=this._el;this._listeners=[[E,"touchstart",{passive:!0}],[E,"touchmove",{passive:!1}],[E,"touchend",void 0],[E,"touchcancel",void 0],[E,"mousedown",void 0],[E,"mousemove",void 0],[E,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[E,"mouseover",void 0],[E,"mouseout",void 0],[E,"dblclick",void 0],[E,"click",void 0],[E,"keydown",{capture:!1}],[E,"keyup",void 0],[E,"wheel",{passive:!1}],[E,"contextmenu",void 0],[window,"blur",void 0]];for(const[B,R,k]of this._listeners){const z=B===document?this.handleWindowEvent:this.handleEvent;B.addEventListener(R,z,k)}}destroy(){for(const[f,m,E]of this._listeners){const B=f===document?this.handleWindowEvent:this.handleEvent;f.removeEventListener(m,B,E)}}_addDefaultHandlers(f){const m=this._map,E=m.getCanvasContainer();this._add("mapEvent",new Y_(m,f));const B=m.boxZoom=new Ih(m,f);this._add("boxZoom",B);const R=new jm,k=new pf;m.doubleClickZoom=new ad(k,R),this._add("tapZoom",R),this._add("clickZoom",k);const z=new Af;this._add("tapDragZoom",z);const K=m.touchPitch=new R0(m);this._add("touchPitch",K);const J=new Zf(f),ne=new Km(f);m.dragRotate=new P0(f,J,ne),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",ne,["mouseRotate"]);const he=new X_(f),ye=new Wm(m,f);m.dragPan=new ev(E,he,ye),this._add("mousePan",he),this._add("touchPan",ye,["touchZoom","touchRotate"]);const we=new Jf,Oe=new Ym;m.touchZoomRotate=new J_(E,Oe,we,z),this._add("touchRotate",we,["touchPan","touchZoom"]),this._add("touchZoom",Oe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new hf(m));const Fe=m.scrollZoom=new Jm(m,this);this._add("scrollZoom",Fe,["mousePan"]);const De=m.keyboard=new _g;this._add("keyboard",De);for(const Ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])f.interactive&&f[Ee]&&m[Ee].enable(f[Ee])}_add(f,m,E){this._handlers.push({handlerName:f,handler:m,allowed:E}),this._handlersById[f]=m}stop(f){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:f}of this._handlers)if(f.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tv(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(f,m,E){for(const B in f)if(B!==E&&(!m||m.indexOf(B)<0))return!0;return!1}handleWindowEvent(f){this.handleEvent(f,`${f.type}Window`)}_getMapTouches(f){const m=[];for(const E of f)this._el.contains(E.target)&&m.push(E);return m}handleEvent(f,m){this._updatingCamera=!0;const E=f.type==="renderFrame",B=E?void 0:f,R={needsRenderFrame:!1},k={},z={},K=f.touches?this._getMapTouches(f.touches):void 0,J=K?Q(this._el,K):E?void 0:H(this._el,f);for(const{handlerName:ye,handler:we,allowed:Oe}of this._handlers){if(!we.isEnabled())continue;let Fe;this._blockedByActive(z,Oe,ye)?we.reset():we[m||f.type]&&(Fe=we[m||f.type](f,J,K),this.mergeHandlerResult(R,k,Fe,ye,B),Fe&&Fe.needsRenderFrame&&this._triggerRenderFrame()),(Fe||we.isActive())&&(z[ye]=we)}const ne={};for(const ye in this._previousActiveHandlers)z[ye]||(ne[ye]=B);this._previousActiveHandlers=z,(Object.keys(ne).length||e1(R))&&(this._changes.push([R,k,ne]),this._triggerRenderFrame()),(Object.keys(z).length||e1(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=R;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))}mergeHandlerResult(f,m,E,B,R){if(!E)return;o.e(f,E);const k={handlerName:B,originalEvent:E.originalEvent||R};E.zoomDelta!==void 0&&(m.zoom=k),E.panDelta!==void 0&&(m.drag=k),E.pitchDelta!==void 0&&(m.pitch=k),E.bearingDelta!==void 0&&(m.rotate=k)}_applyChanges(){const f={},m={},E={};for(const[B,R,k]of this._changes)B.panDelta&&(f.panDelta=(f.panDelta||new o.P(0,0))._add(B.panDelta)),B.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+B.zoomDelta),B.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+B.bearingDelta),B.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+B.pitchDelta),B.around!==void 0&&(f.around=B.around),B.aroundCoord!==void 0&&(f.aroundCoord=B.aroundCoord),B.pinchAround!==void 0&&(f.pinchAround=B.pinchAround),B.noInertia&&(f.noInertia=B.noInertia),o.e(m,R),o.e(E,k);this._updateMapTransform(f,m,E),this._changes=[]}_updateMapTransform(f,m,E){const B=this._map,R=B.transform,k=Ke=>[Ke.x,Ke.y,Ke.z];if((Ke=>{const lt=this._eventsInProgress.drag;return lt&&!this._handlersById[lt.handlerName].isActive()})()&&!e1(f)){const Ke=R.zoom;R.cameraElevationReference="sea",this._originalZoom!=null&&R._orthographicProjectionAtLowPitch&&R.projection.name!=="globe"&&R.pitch===0?(R.cameraElevationReference="ground",R.zoom=this._originalZoom):(R.recenterOnTerrain(),R.cameraElevationReference="ground"),Ke!==R.zoom&&this._map._update(!0)}if(R._isCameraConstrained&&B._stop(!0),!e1(f))return void this._fireEvents(m,E,!0);let{panDelta:z,zoomDelta:K,bearingDelta:J,pitchDelta:ne,around:he,aroundCoord:ye,pinchAround:we}=f;R._isCameraConstrained&&(K>0&&(K=0),R._isCameraConstrained=!1),we!==void 0&&(he=we),(K||(Ke=>m[Ke]&&!this._eventsInProgress[Ke])("drag"))&&he&&(this._dragOrigin=k(R.pointCoordinate3D(he)),this._originalZoom=R.zoom,this._trackingEllipsoid.setup(R._camera.position,this._dragOrigin)),R.cameraElevationReference="sea",B._stop(!0),he=he||B.transform.centerPoint,J&&(R.bearing+=J),ne&&(R.pitch+=ne),R._updateCameraState();const Oe=[0,0,0];if(z)if(R.projection.name==="mercator"){const Ke=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(he).dir),lt=this._trackingEllipsoid.projectRay(R.screenPointToMercatorRay(he.sub(z)).dir);Oe[0]=lt[0]-Ke[0],Oe[1]=lt[1]-Ke[1]}else{const Ke=R.pointCoordinate(he);if(R.projection.name==="globe"){z=z.rotate(-R.angle);const lt=R._pixelsPerMercatorPixel/R.worldSize;Oe[0]=-z.x*o.d1(o.au(Ke.y))*lt,Oe[1]=-z.y*o.d1(R.center.lat)*lt}else{const lt=R.pointCoordinate(he.sub(z));Ke&&lt&&(Oe[0]=lt.x-Ke.x,Oe[1]=lt.y-Ke.y)}}const Fe=R.zoom,De=[0,0,0];if(K){const Ke=k(ye||R.pointCoordinate3D(he)),lt={dir:o.N.normalize([],o.N.sub([],Ke,R._camera.position))};if(lt.dir[2]<0){const Ze=R.zoomDeltaToMovement(Ke,K);o.N.scale(De,lt.dir,Ze)}}const Ee=o.N.add(Oe,Oe,De);R._translateCameraConstrained(Ee),K&&Math.abs(R.zoom-Fe)>1e-4&&R.recenterOnTerrain(),R.cameraElevationReference="ground",this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(m,E,!0)}_fireEvents(f,m,E){const B=tv(this._eventsInProgress),R=tv(f),k={};for(const ne in f){const{originalEvent:he}=f[ne];this._eventsInProgress[ne]||(k[`${ne}start`]=he),this._eventsInProgress[ne]=f[ne]}!B&&R&&this._fireEvent("movestart",R.originalEvent);for(const ne in k)this._fireEvent(ne,k[ne]);R&&this._fireEvent("move",R.originalEvent);for(const ne in f){const{originalEvent:he}=f[ne];this._fireEvent(ne,he)}const z={};let K;for(const ne in this._eventsInProgress){const{handlerName:he,originalEvent:ye}=this._eventsInProgress[ne];this._handlersById[he].isActive()||(delete this._eventsInProgress[ne],K=m[he]||ye,z[`${ne}end`]=K)}for(const ne in z)this._fireEvent(ne,z[ne]);const J=tv(this._eventsInProgress);if(E&&(B||R)&&!J){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),he=ye=>ye!==0&&-this._bearingSnap<ye&&ye<this._bearingSnap;ne?(he(ne.bearing||this._map.getBearing())&&(ne.bearing=0),this._map.easeTo(ne,{originalEvent:K})):(this._map.fire(new o.b("moveend",{originalEvent:K})),he(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(f,m){this._map.fire(new o.b(f,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(f=>{this._frameId=void 0,this.handleEvent(new F0("renderFrame",{timeStamp:f})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const zM="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ea extends o.E{constructor(f,m){super(),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,o.aY(["_renderFrameCallback"],this)}getCenter(){return new o.bn(this.transform.center.lng,this.transform.center.lat)}setCenter(f,m){return this.jumpTo({center:f},m)}panBy(f,m,E){return f=o.P.convert(f).mult(-1),this.panTo(this.transform.center,o.e({offset:f},m),E)}panTo(f,m,E){return this.easeTo(o.e({center:f},m),E)}getZoom(){return this.transform.zoom}setZoom(f,m){return this.jumpTo({zoom:f},m),this}zoomTo(f,m,E){return this.easeTo(o.e({zoom:f},m),E)}zoomIn(f,m){return this.zoomTo(this.getZoom()+1,f,m),this}zoomOut(f,m){return this.zoomTo(this.getZoom()-1,f,m),this}getBearing(){return this.transform.bearing}setBearing(f,m){return this.jumpTo({bearing:f},m),this}getPadding(){return this.transform.padding}setPadding(f,m){return this.jumpTo({padding:f},m),this}rotateTo(f,m,E){return this.easeTo(o.e({bearing:f},m),E)}resetNorth(f,m){return this.rotateTo(0,o.e({duration:1e3},f),m),this}resetNorthPitch(f,m){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},f),m),this}snapToNorth(f,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,m):this}getPitch(){return this.transform.pitch}setPitch(f,m){return this.jumpTo({pitch:f},m),this}cameraForBounds(f,m){f=o.ad.convert(f);const E=m&&m.bearing||0,B=m&&m.pitch||0,R=f.getNorthWest(),k=f.getSouthEast();return this._cameraForBounds(this.transform,R,k,E,B,m)}_extendCameraOptions(f){const m={top:0,bottom:0,right:0,left:0};if(typeof(f=o.e({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const E=f.padding;f.padding={top:E,bottom:E,right:E,left:E}}return f.padding=o.e(m,f.padding),f}_minimumAABBFrustumDistance(f,m){const E=m.max[0]-m.min[0],B=m.max[1]-m.min[1];return E/B>f.aspect?E/(2*Math.tan(.5*f.fovX)*f.aspect):B/(2*Math.tan(.5*f.fovY)*f.aspect)}_cameraForBoundsOnGlobe(f,m,E,B,R,k){const z=f.clone(),K=this._extendCameraOptions(k);z.bearing=B,z.pitch=R;const J=o.bn.convert(m),ne=o.bn.convert(E),he=.5*(J.lat+ne.lat),ye=.5*(J.lng+ne.lng),we=o.d2(he,ye),Oe=o.N.normalize([],we),Fe=o.N.normalize([],o.N.cross([],Oe,[0,1,0])),De=o.N.cross([],Fe,Oe),Ee=[Fe[0],Fe[1],Fe[2],0,De[0],De[1],De[2],0,Oe[0],Oe[1],Oe[2],0,0,0,0,1],Ke=[we,o.d2(J.lat,J.lng),o.d2(ne.lat,J.lng),o.d2(ne.lat,ne.lng),o.d2(J.lat,ne.lng),o.d2(he,J.lng),o.d2(he,ne.lng),o.d2(J.lat,ye),o.d2(ne.lat,ye)];let lt=o.bS.fromPoints(Ke.map(ln=>[o.N.dot(Fe,ln),o.N.dot(De,ln),o.N.dot(Oe,ln)]));const Ze=o.N.transformMat4([],lt.center,Ee);o.N.squaredLength(Ze)===0&&o.N.set(Ze,0,0,1),o.N.normalize(Ze,Ze),o.N.scale(Ze,Ze,o.ab),z.center=o.d3(Ze);const ct=z.getWorldToCameraMatrix(),Ve=o.a6.invert(new Float64Array(16),ct);lt=o.bS.applyTransform(lt,o.a6.multiply([],ct,Ee)),o.N.transformMat4(Ze,Ze,ct);const ut=.5*(lt.max[2]-lt.min[2]),Ct=this._minimumAABBFrustumDistance(z,lt),Lt=o.N.scale([],[0,0,1],ut),$t=o.N.add(Lt,Ze,Lt),pn=Ct+(z.pitch===0?0:o.N.distance(Ze,$t)),Kt=z.globeCenterInViewSpace,Cn=o.N.sub([],Ze,[Kt[0],Kt[1],Kt[2]]);o.N.normalize(Cn,Cn),o.N.scale(Cn,Cn,pn);const bn=o.N.add([],Ze,Cn);o.N.transformMat4(bn,bn,Ve);const $n=o.d4/o.ab,Yt=o.N.length(bn),vn=o.bl(Math.max(Yt*$n-o.d4,Number.EPSILON),0),Nt=Math.min(z.zoomFromMercatorZAdjusted(vn),K.maxZoom);return Nt>.5*(o.bG+o.bx)?(z.setProjection({name:"mercator"}),z.zoom=Nt,this._cameraForBounds(z,m,E,B,R,k)):{center:z.center,zoom:Nt,bearing:B,pitch:R}}queryTerrainElevation(f,m){const E=this.transform.elevation;return E?(m=o.e({},{exaggerated:!0},m),E.getAtPoint(o.L.fromLngLat(f),null,m.exaggerated)):null}_cameraForBounds(f,m,E,B,R,k){if(f.projection.name==="globe")return this._cameraForBoundsOnGlobe(f,m,E,B,R,k);const z=f.clone(),K=this._extendCameraOptions(k),J=z.padding;z.bearing=B,z.pitch=R;const ne=o.bn.convert(m),he=o.bn.convert(E),ye=new o.bn(ne.lng,he.lat),we=new o.bn(he.lng,ne.lat),Oe=z.project(ne),Fe=z.project(he),De=this.queryTerrainElevation(ne),Ee=this.queryTerrainElevation(he),Ke=this.queryTerrainElevation(ye),lt=this.queryTerrainElevation(we),Ze=[[Oe.x,Oe.y,Math.min(De||0,Ee||0,Ke||0,lt||0)],[Fe.x,Fe.y,Math.max(De||0,Ee||0,Ke||0,lt||0)]];let ct=o.bS.fromPoints(Ze);const Ve=z.getWorldToCameraMatrix(),ut=o.a6.invert(new Float64Array(16),Ve);ct=o.bS.applyTransform(ct,Ve);const Ct=o.N.sub([],ct.max,ct.min),Lt=J.left||0,$t=J.right||0,pn=J.bottom||0,Kt=J.top||0,{left:Cn,right:bn,top:$n,bottom:Yt}=K.padding,vn=.5*(Lt+$t),Nt=.5*(Kt+pn),ln=Math.min(z.scaleZoom(z.scale*Math.min((z.width-(Lt+$t+Cn+bn))/Ct[0],(z.height-(pn+Kt+Yt+$n))/Ct[1])),K.maxZoom),jn=z.scale/z.zoomScale(ln);ct=new o.bS([ct.min[0]-(Cn+vn)*jn,ct.min[1]-(Yt+Nt)*jn,ct.min[2]],[ct.max[0]+(bn+vn)*jn,ct.max[1]+($n+Nt)*jn,ct.max[2]]);const sr=.5*Ct[2],tr=this._minimumAABBFrustumDistance(z,ct),pr=[0,0,1,0];o.a7.transformMat4(pr,pr,Ve),o.a7.normalize(pr,pr);const kr=o.N.scale([],pr,tr+sr),Zr=o.N.add([],ct.center,kr),jr=(typeof K.offset.x=="number"&&typeof K.offset.y=="number"?new o.P(K.offset.x,K.offset.y):o.P.convert(K.offset)).rotate(-o.bj(B));ct.center[0]-=jr.x*jn,ct.center[1]+=jr.y*jn,o.N.transformMat4(ct.center,ct.center,ut),o.N.transformMat4(Zr,Zr,ut);const Wr=[ct.center[0],ct.center[1],Zr[2]*z.pixelsPerMeter];o.N.scale(Wr,Wr,1/z.worldSize);const Vi=o.at(Wr[0]),vi=o.au(Wr[1]),Li=Math.min(z._zoomFromMercatorZ(Wr[2]),K.maxZoom),Bi=new o.bn(Vi,vi);return z.mercatorFromTransition&&Li<.5*(o.bG+o.bx)?(z.setProjection({name:"globe"}),z.zoom=Li,this._cameraForBounds(z,m,E,B,R,k)):{center:Bi,zoom:Li,bearing:B,pitch:R}}fitBounds(f,m,E){const B=this.cameraForBounds(f,m);return this._fitInternal(B,m,E)}fitScreenCoordinates(f,m,E,B,R){const k=o.P.convert(f),z=o.P.convert(m),K=new o.P(Math.min(k.x,z.x),Math.min(k.y,z.y)),J=new o.P(Math.max(k.x,z.x),Math.max(k.y,z.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(k,z))return this;const ne=this.transform.pointLocation3D(K),he=this.transform.pointLocation3D(J),ye=this.transform.pointLocation3D(new o.P(K.x,J.y)),we=this.transform.pointLocation3D(new o.P(J.x,K.y)),Oe=[Math.min(ne.lng,he.lng,ye.lng,we.lng),Math.min(ne.lat,he.lat,ye.lat,we.lat)],Fe=[Math.max(ne.lng,he.lng,ye.lng,we.lng),Math.max(ne.lat,he.lat,ye.lat,we.lat)],De=B&&B.pitch?B.pitch:this.getPitch(),Ee=this._cameraForBounds(this.transform,Oe,Fe,E,De,B);return this._fitInternal(Ee,B,R)}_fitInternal(f,m,E){return f?(delete(m=o.e(f,m)).padding,m.linear?this.easeTo(m,E):this.flyTo(m,E)):this}jumpTo(f,m){this.stop();const E=f.preloadOnly?this.transform.clone():this.transform;let B=!1,R=!1,k=!1;return"zoom"in f&&E.zoom!==+f.zoom&&(B=!0,E.zoom=+f.zoom),f.center!==void 0&&(E.center=o.bn.convert(f.center)),"bearing"in f&&E.bearing!==+f.bearing&&(R=!0,E.bearing=+f.bearing),"pitch"in f&&E.pitch!==+f.pitch&&(k=!0,E.pitch=+f.pitch),f.padding==null||E.isPaddingEqual(f.padding)||(E.padding=f.padding),f.preloadOnly?(this._preloadTiles(E),this):(this.fire(new o.b("movestart",m)).fire(new o.b("move",m)),B&&this.fire(new o.b("zoomstart",m)).fire(new o.b("zoom",m)).fire(new o.b("zoomend",m)),R&&this.fire(new o.b("rotatestart",m)).fire(new o.b("rotate",m)).fire(new o.b("rotateend",m)),k&&this.fire(new o.b("pitchstart",m)).fire(new o.b("pitch",m)).fire(new o.b("pitchend",m)),this.fire(new o.b("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.w(zM),this.transform.getFreeCameraOptions()}setFreeCameraOptions(f,m){const E=this.transform;if(!E.projection.supportsFreeCamera)return o.w(zM),this;this.stop();const B=E.zoom,R=E.pitch,k=E.bearing;E.setFreeCameraOptions(f);const z=B!==E.zoom,K=R!==E.pitch,J=k!==E.bearing;return this.fire(new o.b("movestart",m)).fire(new o.b("move",m)),z&&this.fire(new o.b("zoomstart",m)).fire(new o.b("zoom",m)).fire(new o.b("zoomend",m)),J&&this.fire(new o.b("rotatestart",m)).fire(new o.b("rotate",m)).fire(new o.b("rotateend",m)),K&&this.fire(new o.b("pitchstart",m)).fire(new o.b("pitch",m)).fire(new o.b("pitchend",m)),this.fire(new o.b("moveend",m)),this}easeTo(f,m){this._stop(!1,f.easeId),((f=o.e({offset:[0,0],duration:500,easing:o.d0},f)).animate===!1||this._prefersReducedMotion(f))&&(f.duration=0);const E=this.transform,B=this.getZoom(),R=this.getBearing(),k=this.getPitch(),z=this.getPadding(),K="zoom"in f?+f.zoom:B,J="bearing"in f?this._normalizeBearing(f.bearing,R):R,ne="pitch"in f?+f.pitch:k,he="padding"in f?f.padding:E.padding,ye=o.P.convert(f.offset);let we,Oe,Fe;if(E.projection.name==="globe"){const Lt=o.L.fromLngLat(E.center),$t=ye.rotate(-E.angle);Lt.x+=$t.x/E.worldSize,Lt.y+=$t.y/E.worldSize;const pn=Lt.toLngLat(),Kt=o.bn.convert(f.center||pn);this._normalizeCenter(Kt),we=E.centerPoint.add($t),Oe=new o.P(Lt.x,Lt.y).mult(E.worldSize),Fe=new o.P(o.a5(Kt.lng),o.ae(Kt.lat)).mult(E.worldSize).sub(Oe)}else{we=E.centerPoint.add(ye);const Lt=E.pointLocation(we),$t=o.bn.convert(f.center||Lt);this._normalizeCenter($t),Oe=E.project(Lt),Fe=E.project($t).sub(Oe)}const De=E.zoomScale(K-B);let Ee,Ke;f.around&&(Ee=o.bn.convert(f.around),Ke=E.locationPoint(Ee));const lt=this._zooming||K!==B,Ze=this._rotating||R!==J,ct=this._pitching||ne!==k,Ve=!E.isPaddingEqual(he),ut=Lt=>$t=>{if(lt&&(Lt.zoom=o.U(B,K,$t)),Ze&&(Lt.bearing=o.U(R,J,$t)),ct&&(Lt.pitch=o.U(k,ne,$t)),Ve&&(Lt.interpolatePadding(z,he,$t),we=Lt.centerPoint.add(ye)),Ee)Lt.setLocationAtPoint(Ee,Ke);else{const pn=Lt.zoomScale(Lt.zoom-B),Kt=K>B?Math.min(2,De):Math.max(.5,De),Cn=Math.pow(Kt,1-$t),bn=Lt.unproject(Oe.add(Fe.mult($t*Cn)).mult(pn));Lt.setLocationAtPoint(Lt.renderWorldCopies?bn.wrap():bn,we)}return f.preloadOnly||this._fireMoveEvents(m),Lt};if(f.preloadOnly){const Lt=this._emulate(ut,f.duration,E);return this._preloadTiles(Lt),this}const Ct={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=lt,this._rotating=Ze,this._pitching=ct,this._easeId=f.easeId,this._prepareEase(m,f.noMoveStart,Ct),this._ease(ut(E),Lt=>{E.cameraElevationReference==="sea"&&E.recenterOnTerrain(),this._afterEase(m,Lt)},f),this}_prepareEase(f,m,E={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),m||E.moving||this.fire(new o.b("movestart",f)),this._zooming&&!E.zooming&&this.fire(new o.b("zoomstart",f)),this._rotating&&!E.rotating&&this.fire(new o.b("rotatestart",f)),this._pitching&&!E.pitching&&this.fire(new o.b("pitchstart",f))}_fireMoveEvents(f){this.fire(new o.b("move",f)),this._zooming&&this.fire(new o.b("zoom",f)),this._rotating&&this.fire(new o.b("rotate",f)),this._pitching&&this.fire(new o.b("pitch",f))}_afterEase(f,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const E=this._zooming,B=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,E&&this.fire(new o.b("zoomend",f)),B&&this.fire(new o.b("rotateend",f)),R&&this.fire(new o.b("pitchend",f)),this.fire(new o.b("moveend",f))}flyTo(f,m){if(this._prefersReducedMotion(f)){const Yt=o.ac(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yt,m)}this.stop(),f=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.d0},f);const E=this.transform,B=this.getZoom(),R=this.getBearing(),k=this.getPitch(),z="zoom"in f?o.aa(+f.zoom,E.minZoom,E.maxZoom):B,K="bearing"in f?this._normalizeBearing(f.bearing,R):R,J="pitch"in f?+f.pitch:k,ne=E.zoomScale(z-B),he=o.P.convert(f.offset),ye=E.centerPoint.add(he),we=E.pointLocation(ye);let Oe=f.center;if(Oe&&f.padding){const Yt=this._cameraForBounds(this.transform,Oe,Oe,K,J,f);Yt&&(Oe=Yt.center)}Oe=o.bn.convert(Oe||we),this._normalizeCenter(Oe);const Fe=E.project(we),De=E.project(Oe).sub(Fe);let Ee=f.curve;const Ke=Math.max(E.width,E.height),lt=Ke/ne,Ze=De.mag();if("minZoom"in f){const Yt=o.aa(Math.min(f.minZoom,B,z),E.minZoom,E.maxZoom),vn=Ke/E.zoomScale(Yt-B);Ee=Math.sqrt(vn/Ze*2)}const ct=Ee*Ee;function Ve(Yt){const vn=(lt*lt-Ke*Ke+(Yt?-1:1)*ct*ct*Ze*Ze)/(2*(Yt?lt:Ke)*ct*Ze);return Math.log(Math.sqrt(vn*vn+1)-vn)}function ut(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function Ct(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}const Lt=Ve(0);let $t=function(Yt){return Ct(Lt)/Ct(Lt+Ee*Yt)},pn=function(Yt){return Ke*((Ct(Lt)*(ut(vn=Lt+Ee*Yt)/Ct(vn))-ut(Lt))/ct)/Ze;var vn},Kt=(Ve(1)-Lt)/Ee;if(Math.abs(Ze)<1e-6||!isFinite(Kt)){if(Math.abs(Ke-lt)<1e-6)return this.easeTo(f,m);const Yt=lt<Ke?-1:1;Kt=Math.abs(Math.log(lt/Ke))/Ee,pn=function(){return 0},$t=function(vn){return Math.exp(Yt*Ee*vn)}}f.duration="duration"in f?+f.duration:1e3*Kt/("screenSpeed"in f?+f.screenSpeed/Ee:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0);const Cn=R!==K,bn=J!==k,$n=Yt=>vn=>{const Nt=vn*Kt,ln=1/$t(Nt);Yt.zoom=vn===1?z:B+Yt.scaleZoom(ln),Cn&&(Yt.bearing=o.U(R,K,vn)),bn&&(Yt.pitch=o.U(k,J,vn));const jn=vn===1?Oe:Yt.unproject(Fe.add(De.mult(pn(Nt))).mult(ln));return Yt.setLocationAtPoint(Yt.renderWorldCopies?jn.wrap():jn,ye),Yt._updateCameraOnTerrain(),f.preloadOnly||this._fireMoveEvents(m),Yt};if(f.preloadOnly){const Yt=this._emulate($n,f.duration,E);return this._preloadTiles(Yt),this}return this._zooming=!0,this._rotating=Cn,this._pitching=bn,this._prepareEase(m,!1),this._ease($n(E),()=>this._afterEase(m),f),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(f,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const E=this._onEaseEnd;this._onEaseEnd=void 0,E.call(this,m)}if(!f){const E=this.handlers;E&&E.stop(!1)}return this}_ease(f,m,E){E.animate===!1||E.duration===0?(f(1),m()):(this._easeStart=o.f.now(),this._easeOptions=E,this._onEaseFrame=f,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const f=Math.min((o.f.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(f,m){f=o.bh(f,-180,180);const E=Math.abs(f-m);return Math.abs(f-360-m)<E&&(f-=360),Math.abs(f+360-m)<E&&(f+=360),f}_normalizeCenter(f){const m=this.transform;if(m.maxBounds||m.projection.name!=="globe"&&!m.renderWorldCopies)return;const E=f.lng-m.center.lng;f.lng+=E>180?-360:E<-180?360:0}_prefersReducedMotion(f){return this._respectPrefersReducedMotion&&o.f.prefersReducedMotion&&!(f&&f.essential)}_emulate(f,m,E){const B=Math.ceil(15*m/1e3),R=[],k=f(E.clone());for(let z=0;z<=B;z++){const K=k(z/B);R.push(K.clone())}return R}}class JE{constructor(f={}){this.options=f,o.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(f){const m=this.options&&this.options.compact;return this._map=f,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y("button","mapboxgl-ctrl-attrib-button",this._container),y("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y("div","mapboxgl-ctrl-attrib-inner",this._container),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(f,m){const E=this._map._getUIString(`AttributionControl.${m}`);f.removeAttribute("title"),f.firstElementChild&&f.firstElementChild.setAttribute("title",E)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.d5.ACCESS_TOKEN}];if(f){const E=m.reduce((B,R,k)=>(R.value&&(B+=`${R.key}=${R.value}${k<m.length-1?"&":""}`),B),"?");f.href=`${o.d5.FEEDBACK_URL}/${E}#${vg(this._map,!0)}`,f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}}_updateData(f){!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let f=[];if(this._map.style.stylesheet){const B=this._map.style.stylesheet;this.styleOwner=B.owner,this.styleId=B.id}const m=this._map.style._mergedSourceCaches;for(const B in m){const R=m[B];if(R.used){const k=R.getSource();k.attribution&&f.indexOf(k.attribution)<0&&f.push(k.attribution)}}f.sort((B,R)=>B.length-R.length),f=f.filter((B,R)=>{for(let k=R+1;k<f.length;k++)if(f[k].indexOf(B)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=[...this.options.customAttribution,...f]:f.unshift(this.options.customAttribution));const E=f.join(" | ");E!==this._attribHTML&&(this._attribHTML=E,f.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class $M{constructor(){o.aY(["_updateLogo","_updateCompact"],this)}onAdd(f){this._map=f,this._container=y("div","mapboxgl-ctrl");const m=y("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(f){f&&f.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const f=this._map.style._sourceCaches;if(Object.entries(f).length===0)return!0;for(const m in f){const E=f[m].getSource();if(E.hasOwnProperty("mapbox_logo")&&!E.mapbox_logo)return!1}return!0}_updateCompact(){const f=this._container.children;if(f.length){const m=f[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class VM{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(f){const m=++this._id;return this._queue.push({callback:f,id:m,cancelled:!1}),m}remove(f){const m=this._currentlyRunning,E=m?this._queue.concat(m):this._queue;for(const B of E)if(B.id===f)return void(B.cancelled=!0)}run(f=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const E of m)if(!E.cancelled&&(E.callback(f),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function t1(w,f,m){if(w=new o.bn(w.lng,w.lat),f){const E=new o.bn(w.lng-360,w.lat),B=new o.bn(w.lng+360,w.lat),R=360*Math.ceil(Math.abs(w.lng-m.center.lng)/360),k=m.locationPoint(w).distSqr(f),z=f.x<0||f.y<0||f.x>m.width||f.y>m.height;m.locationPoint(E).distSqr(f)<k&&(z||Math.abs(E.lng-m.center.lng)<R)?w=E:m.locationPoint(B).distSqr(f)<k&&(z||Math.abs(B.lng-m.center.lng)<R)&&(w=B)}for(;Math.abs(w.lng-m.center.lng)>180;){const E=m.locationPoint(w);if(E.x>=0&&E.y>=0&&E.x<=m.width&&E.y<=m.height)break;w.lng>m.center.lng?w.lng-=360:w.lng+=360}return w}const ww={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class eS extends o.E{constructor(f,m){if(super(),(f instanceof HTMLElement||m)&&(f=o.e({element:f},m)),o.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&f.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=f&&f.occludedOpacity||.2,f&&f.element)this._element=f.element,this._offset=o.P.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=y("div");const R=41,k=27,z=C("svg",{display:"block",height:R*this._scale+"px",width:k*this._scale+"px",viewBox:`0 0 ${k} ${R}`},this._element),K=C("radialGradient",{id:"shadowGradient"},C("defs",{},z));C("stop",{offset:"10%","stop-opacity":.4},K),C("stop",{offset:"100%","stop-opacity":.05},K),C("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},z),C("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},z),C("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},z),C("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},z),this._offset=o.P.convert(f&&f.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",R=>{R.preventDefault()}),this._element.addEventListener("mousedown",R=>{R.preventDefault()});const E=this._element.classList;for(const R in ww)E.remove(`mapboxgl-marker-anchor-${R}`);E.add(`mapboxgl-marker-anchor-${this._anchor}`);const B=f&&f.className?f.className.trim().split(/\s+/):[];E.add(...B),this._popup=null}addTo(f){return f===this._map||(this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._updateMoving),f.on("moveend",this._update),f.on("remove",this._clearFadeTimer),f._addMarker(this),this.setDraggable(this._draggable),this._update(),f.on("click",this._onMapClick)),this}remove(){const f=this._map;return f&&(f.off("click",this._onMapClick),f.off("move",this._updateMoving),f.off("moveend",this._update),f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler),f.off("mouseup",this._onUp),f.off("touchend",this._onUp),f.off("mousemove",this._onMove),f.off("touchmove",this._onMove),f.off("remove",this._clearFadeTimer),f._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=o.bn.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){const B=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(38.1-13.5+B)],"bottom-right":[-B,-1*(38.1-13.5+B)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=f,f._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(f){const m=f.code,E=f.charCode||f.keyCode;m!=="Space"&&m!=="Enter"&&E!==32&&E!==13||this.togglePopup()}_onMapClick(f){const m=f.originalEvent.target,E=this._element;this._popup&&(m===E||E.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const f=this._popup;return f?(f.isOpen()?(f.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(f.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const f=this._map,m=this._pos;if(!f||!m)return!1;const E=f.unproject(m),B=f.getFreeCameraOptions();if(!B.position)return!1;const R=B.position.toLngLat();return R.distanceTo(E)<.9*R.distanceTo(this._lngLat)}_evaluateOpacity(){const f=this._map;if(!f)return;const m=this._pos;if(!m||m.x<0||m.x>f.transform.width||m.y<0||m.y>f.transform.height)return void this._clearFadeTimer();const E=f.unproject(m);let B;f._showingGlobe()&&o.d6(f.transform,this._lngLat)?B=0:(B=1-f._queryFogOpacity(E),f.transform._terrainEnabled()&&f.getTerrain()&&this._behindTerrain()&&(B*=this._occludedOpacity)),this._element.style.opacity=`${B}`,this._element.style.pointerEvents=B>0?"auto":"none",this._popup&&this._popup._setOpacity(B),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const f=this._pos;if(!f||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${f.x}px,${f.y}px)
            ${ww[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const f=this._pos,m=this._map,E=this.getPitchAlignment();if(!m||!f||E!=="map")return"";if(!m._showingGlobe()){const K=m.getPitch();return K?`rotateX(${K}deg)`:""}const B=o.bF(o.d7(m.transform,this._lngLat)),R=f.sub(o.d8(m.transform)),k=Math.abs(R.x)+Math.abs(R.y);if(k===0)return"";const z=B/k;return`rotateX(${-R.y*z}deg) rotateY(${R.x*z}deg)`}_calculateZTransform(){const f=this._pos,m=this._map;if(!m||!f)return"";let E=0;const B=this.getRotationAlignment();if(B==="map")if(m._showingGlobe()){const R=m.project(new o.bn(this._lngLat.lng,this._lngLat.lat+.001)),k=m.project(new o.bn(this._lngLat.lng,this._lngLat.lat-.001)).sub(R);E=o.bF(Math.atan2(k.y,k.x))-90}else E=-m.getBearing();else if(B==="horizon"){const R=o.O(4,6,m.getZoom()),k=o.d8(m.transform);k.y+=R*m.transform.height;const z=f.sub(k),K=o.bF(Math.atan2(z.y,z.x));E=(K>90?K-270:K+90)*(1-R)}return E+=this._rotation,E?`rotateZ(${E}deg)`:""}_update(f){cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=t1(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),f===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),m._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(f){return this._offset=o.P.convert(f),this._update(),this}addClassName(f){return this._element.classList.add(f),this}removeClassName(f){return this._element.classList.remove(f),this}toggleClassName(f){return this._element.classList.toggle(f)}_onMove(f){const m=this._map;if(!m)return;const E=this._pointerdownPos,B=this._positionDelta;if(E&&B){if(!this._isDragging){const R=this._clickTolerance||m._clickTolerance;if(f.point.dist(E)<R)return;this._isDragging=!0}this._pos=f.point.sub(B),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.b("dragstart"))),this.fire(new o.b("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const f=this._map;f&&(f.off("mousemove",this._onMove),f.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.b("dragend")),this._state="inactive"}_addDragHandler(f){const m=this._map,E=this._pos;m&&E&&this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(E),this._pointerdownPos=f.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(f){this._draggable=!!f;const m=this._map;return m&&(f?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(f){return this._rotation=f||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(f){return this._rotationAlignment=f||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(f){return this._pitchAlignment=f||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(f){return this._occludedOpacity=f||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const HM={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},GM=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function QM(w=new o.P(0,0),f="bottom"){if(typeof w=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(w,2)));switch(f){case"top":return new o.P(0,w);case"top-left":return new o.P(m,m);case"top-right":return new o.P(-m,m);case"bottom":return new o.P(0,-w);case"bottom-left":return new o.P(m,-m);case"bottom-right":return new o.P(-m,-m);case"left":return new o.P(w,0);case"right":return new o.P(-w,0)}return new o.P(0,0)}return w instanceof o.P||Array.isArray(w)?o.P.convert(w):o.P.convert(w[f]||[0,0])}class tS{constructor(f){this.jumpTo(f)}getValue(f){if(f<=this._startTime)return this._start;if(f>=this._endTime)return this._end;const m=o.cc((f-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(f){return f>=this._startTime&&f<=this._endTime}jumpTo(f){this._startTime=-1/0,this._endTime=-1/0,this._start=f,this._end=f}easeTo(f,m,E){this._start=this.getValue(m),this._end=f,this._startTime=m,this._endTime=m+E}}const n1={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},jM={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class nS{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.showParseStatus=!1,this.continuousRedraw=!1,this.showTileAABBs=!1,this.showPadding=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}const xw={showCompass:!0,showZoom:!0,visualizePitch:!1};class iA{constructor(f,m,E=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new Zf({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,E&&(this.mousePitch=new Km({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),o.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(f,m){this.mouseRotate.mousedown(f,m),this.mousePitch&&this.mousePitch.mousedown(f,m),P()}move(f,m){const E=this.map,B=this.mouseRotate.mousemoveWindow(f,m),R=B&&B.bearingDelta;if(R&&E.setBearing(E.getBearing()+R),this.mousePitch){const k=this.mousePitch.mousemoveWindow(f,m),z=k&&k.pitchDelta;z&&E.setPitch(E.getPitch()+z)}}off(){const f=this.element;f.removeEventListener("mousedown",this.mousedown),f.removeEventListener("touchstart",this.touchstart,{passive:!1}),f.removeEventListener("touchmove",this.touchmove),f.removeEventListener("touchend",this.touchend),f.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){F(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(f){this.down(o.e({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),H(this.element,f)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(f){this.move(f,H(this.element,f))}mouseup(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()}touchstart(f){f.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Q(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>f.preventDefault()},this._startPos))}touchmove(f){f.targetTouches.length!==1?this.reset():(this._lastPos=Q(this.element,f.targetTouches)[0],this.move({preventDefault:()=>f.preventDefault()},this._lastPos))}touchend(f){f.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Cw={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},pu={maxWidth:100,unit:"metric"},bg={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:o.dk,supported:p,setRTLTextPlugin:o.dm,getRTLTextPluginStatus:o.dn,Map:class extends Ea{constructor(w){const f=w;if((w=o.e({},jM,w)).minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(w.antialias&&o.d9(window)&&(w.antialias=!1,o.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Jd(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies),w),this._repaint=!1,this._interactive=w.interactive,this._minTileCacheSize=w.minTileCacheSize,this._maxTileCacheSize=w.maxTileCacheSize,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=w.crossSourceCollisions,this._collectResourceTiming=w.collectResourceTiming,this._language=this._parseLanguage(w.language),this._worldview=w.worldview,this._renderTaskQueue=new VM,this._domRenderTaskQueue=new VM,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.aC(),this._locale=o.e({},n1,w.locale),this._clickTolerance=w.clickTolerance,this._cooperativeGestures=w.cooperativeGestures,this._performanceMetricsCollection=w.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new tS(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.da(w.transformRequest,w.accessToken,w.testMode),this._silenceAuthErrors=!!w.testMode,this._contextCreateOptions=w.contextCreateOptions?{...w.contextCreateOptions}:{},typeof w.container=="string"){const m=document.getElementById(w.container);if(!m)throw new Error(`Container '${w.container.toString()}' not found.`);this._container=m}else{if(!(w.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(this._container.childNodes.length>0&&o.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),w.maxBounds&&this.setMaxBounds(w.maxBounds),o.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new nS,this._tp=w.devtools?new cf(this):new cf,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showParseStatus",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,m=>{this.repaint=m}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileAABBs",void 0,m=>{this.showTileAABBs=m}),this._tp.registerParameter(this._debugParams,["Debug"],"showPadding",void 0,m=>{this.showPadding=m}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new ZN(this,w),this._localFontFamily=w.localFontFamily,this._localIdeographFontFamily=w.localIdeographFontFamily,(w.style||!w.testMode)&&this.setStyle(w.style||o.d5.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),w.projection&&this.setProjection(w.projection),w.hash&&(this._hash=new Hm(typeof w.hash=="string"&&w.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){f.center==null&&f.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch});const m=w.bounds;m&&(this.resize(),this.fitBounds(m,o.e({},w.fitBoundsOptions,{duration:0})))}this.resize(),w.attributionControl&&this.addControl(new JE({customAttribution:w.customAttribution})),this._logoControl=new $M,this.addControl(this._logoControl,w.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",m=>{this._update(m.dataType==="style"),this.fire(new o.b(`${m.dataType}data`,m))}),this.on("dataloading",m=>{this.fire(new o.b(`${m.dataType}dataloading`,m))})}_getMapId(){return this._mapId}addControl(w,f){if(f===void 0&&(f=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.a(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=w.onAdd(this);this._controls.push(w);const E=this._controlPositions[f];return f.indexOf("bottom")!==-1?E.insertBefore(m,E.firstChild):E.appendChild(m),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.a(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const f=this._controls.indexOf(w);return f>-1&&this._controls.splice(f,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(w){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const f=!this._moving;return f&&this.fire(new o.b("movestart",w)).fire(new o.b("move",w)),this.fire(new o.b("resize",w)),f&&this.fire(new o.b("moveend",w)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(w){return this.transform.setMaxBounds(o.ad.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w?this.setZoom(w):this.fire(new o.b("zoomstart")).fire(new o.b("zoom")).fire(new o.b("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w?this.setZoom(w):this.fire(new o.b("zoomstart")).fire(new o.b("zoom")).fire(new o.b("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w?this.setPitch(w):this.fire(new o.b("pitchstart")).fire(new o.b("pitch")).fire(new o.b("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w?this.setPitch(w):this.fire(new o.b("pitchstart")).fire(new o.b("pitch")).fire(new o.b("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(w){return w==="auto"?navigator.language:Array.isArray(w)?w.length===0?void 0:w.map(f=>f==="auto"?navigator.language:f):w}setLanguage(w){const f=this._parseLanguage(w);if(!this.style||f===this._language)return this;this._language=f,this.style.reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(w){return this.style&&w!==this._worldview?(this._worldview=w,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(w){return this._lazyInitEmptyStyle(),w?typeof w=="string"&&(w={name:w}):w=null,this._useExplicitProjection=!!w,this._prioritizeAndUpdateProjection(w,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const w=this.transform,f=w.projection.name;let m;f==="globe"&&w.zoom>=o.bx?(w.setMercatorFromTransition(),m=!0):f==="mercator"&&w.zoom<o.bx&&(w.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(w,f){return this._updateProjection(w||f||{name:"mercator"})}_updateProjection(w){let f;return f=w.name==="globe"&&this.transform.zoom>=o.bx?this.transform.setMercatorFromTransition():this.transform.setProjection(w),this.style.applyProjectionUpdate(),f&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(w){return this.transform.locationPoint3D(o.bn.convert(w))}unproject(w){return this.transform.pointLocation3D(o.P.convert(w))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(w,f,m){if(w==="mouseenter"||w==="mouseover"){let E=!1;const B=k=>{const z=f.filter(J=>this.getLayer(J)),K=z.length?this.queryRenderedFeatures(k.point,{layers:z}):[];K.length?E||(E=!0,m.call(this,new Qa(w,this,k.originalEvent,{features:K}))):E=!1},R=()=>{E=!1};return{layers:new Set(f),listener:m,delegates:{mousemove:B,mouseout:R}}}if(w==="mouseleave"||w==="mouseout"){let E=!1;const B=k=>{const z=f.filter(K=>this.getLayer(K));(z.length?this.queryRenderedFeatures(k.point,{layers:z}):[]).length?E=!0:E&&(E=!1,m.call(this,new Qa(w,this,k.originalEvent)))},R=k=>{E&&(E=!1,m.call(this,new Qa(w,this,k.originalEvent)))};return{layers:new Set(f),listener:m,delegates:{mousemove:B,mouseout:R}}}{const E=B=>{const R=f.filter(z=>this.getLayer(z)),k=R.length?this.queryRenderedFeatures(B.point,{layers:R}):[];k.length&&(B.features=k,m.call(this,B),delete B.features)};return{layers:new Set(f),listener:m,delegates:{[w]:E}}}}on(w,f,m){if(m===void 0)return super.on(w,f);if(Array.isArray(f)||(f=[f]),f){for(const B of f)if(!this._isValidId(B))return this}const E=this._createDelegatedListener(w,f,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(E);for(const B in E.delegates)this.on(B,E.delegates[B]);return this}once(w,f,m){if(m===void 0)return super.once(w,f);if(Array.isArray(f)||(f=[f]),f){for(const B of f)if(!this._isValidId(B))return this}const E=this._createDelegatedListener(w,f,m);for(const B in E.delegates)this.once(B,E.delegates[B]);return this}off(w,f,m){if(m===void 0)return super.off(w,f);f=new Set(Array.isArray(f)?f:[f]);for(const R of f)if(!this._isValidId(R))return this;const E=(R,k)=>{if(R.size!==k.size)return!1;for(const z of R)if(!k.has(z))return!1;return!0},B=this._delegatedListeners?this._delegatedListeners[w]:void 0;return B&&(R=>{for(let k=0;k<R.length;k++){const z=R[k];if(z.listener===m&&E(z.layers,f)){for(const K in z.delegates)this.off(K,z.delegates[K]);return R.splice(k,1),this}}})(B),this}queryRenderedFeatures(w,f){if(!this.style)return[];if(f!==void 0||w===void 0||w instanceof o.P||Array.isArray(w)||(f=w,w=void 0),w=w||[[0,0],[this.transform.width,this.transform.height]],(f=f||{}).layers&&Array.isArray(f.layers)){for(const m of f.layers)if(!this._isValidId(m))return[]}return this.style.queryRenderedFeatures(w,f,this.transform)}querySourceFeatures(w,f){return this._isValidId(w)?this.style.querySourceFeatures(w,f):[]}isPointOnSurface(w){const{name:f}=this.transform.projection;return f!=="globe"&&f!=="mercator"&&o.w(`${f} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.P.convert(w))}setStyle(w,f){return(f=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},f)).diff!==!1&&f.localIdeographFontFamily===this._localIdeographFontFamily&&f.localFontFamily===this._localFontFamily&&this.style&&w?(this._diffStyle(w,f),this):(this._localIdeographFontFamily=f.localIdeographFontFamily,this._localFontFamily=f.localFontFamily,this._updateStyle(w,f))}_getUIString(w){const f=this._locale[w];if(f==null)throw new Error(`Missing UI string '${w}'`);return f}_updateStyle(w,f){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),w&&(this.style=new Tc(this,f||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w):this.style.loadJSON(w)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Tc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,f){if(typeof w=="string"){const m=this._requestManager.normalizeStyleURL(w),E=this._requestManager.transformRequest(m,o.R.Style);o.g(E,(B,R)=>{B?this.fire(new o.a(B)):R&&this._updateDiff(R,f)})}else typeof w=="object"&&this._updateDiff(w,f)}_updateDiff(w,f){try{this.style.setState(w)&&this._update(!0)}catch(m){o.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(w,f)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.w("There is no style added to the map."),!1)}_isValidId(w){return w==null?(this.fire(new o.a(new Error("IDs can't be empty."))),!1):!o.c4(w)||(this.fire(new o.a(new Error(`IDs can't contain special symbols: "${w}".`))),!1)}addSource(w,f){return this._isValidId(w)?(this._lazyInitEmptyStyle(),this.style.addSource(w,f),this._update(!0)):this}isSourceLoaded(w){return!!this._isValidId(w)&&!!this.style&&this.style._isSourceCacheLoaded(w)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(w,f,m){this._lazyInitEmptyStyle(),this.style.addSourceType(w,f,m)}removeSource(w){return this._isValidId(w)?(this.style.removeSource(w),this._updateTerrain(),this._update(!0)):this}getSource(w){return this._isValidId(w)?this.style.getOwnSource(w):null}addImage(w,f,{pixelRatio:m=1,sdf:E=!1,stretchX:B,stretchY:R,content:k}={}){if(this._lazyInitEmptyStyle(),f instanceof HTMLImageElement||ImageBitmap&&f instanceof ImageBitmap){const{width:z,height:K,data:J}=o.f.getImageData(f);this.style.addImage(w,{data:new o.h({width:z,height:K},J),pixelRatio:m,stretchX:B,stretchY:R,content:k,sdf:E,version:0})}else if(f.width===void 0||f.height===void 0)this.fire(new o.a(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:K}=f,J=f;this.style.addImage(w,{data:new o.h({width:z,height:K},new Uint8Array(J.data)),pixelRatio:m,stretchX:B,stretchY:R,content:k,sdf:E,version:0,userImage:J}),J.onAdd&&J.onAdd(this,w)}}updateImage(w,f){this._lazyInitEmptyStyle();const m=this.style.getImage(w);if(!m)return void this.fire(new o.a(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const E=f instanceof HTMLImageElement||ImageBitmap&&f instanceof ImageBitmap?o.f.getImageData(f):f,{width:B,height:R}=E,k=E.data;if(B===void 0||R===void 0)return void this.fire(new o.a(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(B!==m.data.width||R!==m.data.height)return void this.fire(new o.a(new Error(`The width and height of the updated image (${B}, ${R})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`)));const z=!(f instanceof HTMLImageElement||ImageBitmap&&f instanceof ImageBitmap);m.data.replace(k,z),this.style.updateImage(w,m)}hasImage(w){return w?!!this.style&&!!this.style.getImage(w):(this.fire(new o.a(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w,f){o.d(this._requestManager.transformRequest(w,o.R.Image),(m,E)=>{f(m,E instanceof HTMLImageElement?o.f.getImageData(E):E)})}listImages(){return this.style.listImages()}addModel(w,f){this._lazyInitEmptyStyle(),this.style.addModel(w,f)}hasModel(w){return w?this.style.hasModel(w):(this.fire(new o.a(new Error("Missing required model id"))),!1)}removeModel(w){this.style.removeModel(w)}listModels(){return this.style.listModels()}addLayer(w,f){return this._isValidId(w.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(w,f),this._update(!0)):this}getSlot(w){const f=this.getLayer(w);return f&&f.slot||null}setSlot(w,f){return this.style.setSlot(w,f),this.style.mergeLayers(),this._update(!0)}addImport(w,f){return this.style.addImport(w,f),this}updateImport(w,f){return typeof f!="string"&&f.id!==w?(this.removeImport(w),this.addImport(f)):(this.style.updateImport(w,f),this._update(!0))}removeImport(w){return this.style.removeImport(w),this}moveImport(w,f){return this.style.moveImport(w,f),this._update(!0)}moveLayer(w,f){return this._isValidId(w)?(this.style.moveLayer(w,f),this._update(!0)):this}removeLayer(w){return this._isValidId(w)?(this.style.removeLayer(w),this._update(!0)):this}getLayer(w){return this._isValidId(w)?this.style.getOwnLayer(w):null}setLayerZoomRange(w,f,m){return this._isValidId(w)?(this.style.setLayerZoomRange(w,f,m),this._update(!0)):this}setFilter(w,f,m={}){return this._isValidId(w)?(this.style.setFilter(w,f,m),this._update(!0)):this}getFilter(w){return this._isValidId(w)?this.style.getFilter(w):null}setPaintProperty(w,f,m,E={}){return this._isValidId(w)?(this.style.setPaintProperty(w,f,m,E),this._update(!0)):this}getPaintProperty(w,f){return this._isValidId(w)?this.style.getPaintProperty(w,f):null}setLayoutProperty(w,f,m,E={}){return this._isValidId(w)?(this.style.setLayoutProperty(w,f,m,E),this._update(!0)):this}getLayoutProperty(w,f){return this._isValidId(w)?this.style.getLayoutProperty(w,f):null}getConfigProperty(w,f){return this.style.getConfigProperty(w,f)}setConfigProperty(w,f,m){return this.style.setConfigProperty(w,f,m),this._update(!0)}setLights(w){if(this._lazyInitEmptyStyle(),w&&w.length===1&&w[0].type==="flat"){const f=w[0];f.properties?this.style.setFlatLight(f.properties,f.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(w),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const w=this.style.getLights()||[];return w.length===0&&w.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),w}setLight(w,f={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:w}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(w){return this._lazyInitEmptyStyle(),!w&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(w),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(w){return this._lazyInitEmptyStyle(),this.style.setFog(w),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(w){return this.style.setCamera(w),this._triggerCameraUpdate(w)}_triggerCameraUpdate(w){return this._update(this.transform.setOrthographicProjectionAtLowPitch(w["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(w){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.bn.convert(w),this.transform):0}setFeatureState(w,f){return this._isValidId(w.source)?(this.style.setFeatureState(w,f),this._update()):this}removeFeatureState(w,f){return this._isValidId(w.source)?(this.style.removeFeatureState(w,f),this._update()):this}getFeatureState(w){return this._isValidId(w.source)?this.style.getFeatureState(w):null}_updateContainerDimensions(){if(!this._container)return;const w=this._container.getBoundingClientRect().width||400,f=this._container.getBoundingClientRect().height||300;let m,E,B,R=this._container;for(;R&&(!E||!B);){const k=window.getComputedStyle(R).transform;k&&k!=="none"&&(m=k.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(E=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(B=m[3])),R=R.parentElement}this._containerWidth=E?Math.abs(w/E):w,this._containerHeight=B?Math.abs(f/B):f}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const w=this._container;w.classList.add("mapboxgl-map"),(this._missingCSSCanary=y("div","mapboxgl-canary",w)).style.visibility="hidden",this._detectMissingCSS();const f=this._canvasContainer=y("div","mapboxgl-canvas-container",w);this._canvas=y("canvas","mapboxgl-canvas",f),this._interactive&&(f.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=y("div","mapboxgl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{E[B]=y("div",`mapboxgl-ctrl-${B}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,f){const m=o.f.devicePixelRatio||1;this._canvas.width=m*Math.ceil(w),this._canvas.height=m*Math.ceil(f),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${f}px`}_addMarker(w){this._markers.push(w)}_removeMarker(w){const f=this._markers.indexOf(w);f!==-1&&this._markers.splice(f,1)}_addPopup(w){this._popups.push(w)}_removePopup(w){const f=this._popups.indexOf(w);f!==-1&&this._popups.splice(f,1)}_setupPainter(){const w=o.e({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),f=this._canvas.getContext("webgl2",w);f?(o.db(f,!0),this.painter=new Zp(f,this._contextCreateOptions,this.transform,this._tp),this.on("data",m=>{m.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.dc.testSupport(f)):this.fire(new o.a(new Error("Failed to initialize WebGL")))}_contextLost(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.b("webglcontextlost",{originalEvent:w}))}_contextRestored(w){this._setupPainter(),this.resize(),this._update(),this.fire(new o.b("webglcontextrestored",{originalEvent:w}))}_onMapScroll(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_requestDomTask(w){!this.loaded()||this.loaded()&&!this.isMoving()?w():this._domRenderTaskQueue.add(w)}_render(w){let f;this.fire(new o.b("renderstart"));const m=this.painter.context.extTimerQuery,E=o.f.now(),B=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(f=B.createQuery(),B.beginQuery(m.TIME_ELAPSED_EXT,f)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(w),this._domRenderTaskQueue.run(w),this._removed)return;this._updateProjectionTransition();const R=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,J=this.transform.pitch,ne=o.f.now(),he=new o.K(K,{now:ne,fadeDuration:R,pitch:J,transition:this.style.transition});this.style.update(he)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(E),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):k=this._updateAverageElevation(E),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,R,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,showParseStatus:this.showParseStatus||this._debugParams.showParseStatus,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs||this._debugParams.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:R,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding||this._debugParams.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.b("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.b("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),f){const K=o.f.now()-E;B.endQuery(m.TIME_ELAPSED_EXT),setTimeout(()=>{const J=B.getQueryParameter(f,B.QUERY_RESULT)/1e6;B.deleteQuery(f),this.fire(new o.b("gpu-timing-frame",{cpuTime:K,gpuTime:J}))},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const J=this.painter.queryGpuTimers(K);this.fire(new o.b("gpu-timing-layer",{layerTimes:J}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const J=this.painter.queryGpuTimeDeferredRender(K);this.fire(new o.b("gpu-timing-deferred-render",{gpuTime:J}))},50)}const z=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(z||this._repaint)this.triggerRepaint();else{const K=!this.isMoving()&&this.loaded();if(K&&(k=this._updateAverageElevation(E,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new o.b("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const J=this._calculateSpeedIndex();this.fire(new o.b("speedindexcompleted",{speedIndex:J})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||z||(this._fullyLoaded=!0,this._performanceMetricsCollection&&o.dd(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(w){for(const f of this._markers)w&&!this.getRenderWorldCopies()&&(f._lngLat=f._lngLat.wrap()),f._update();for(const f of this._popups)!w||this.getRenderWorldCopies()||f._trackPointer||(f._lngLat=f._lngLat.wrap()),f._update()}_updateAverageElevation(w,f=!1){const m=B=>(this.transform.averageElevation=B,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);const E=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(E||(f||w-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(w)){const B=this.transform.averageElevation;let R=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(R)?R=0:this._averageElevationLastSampledAt=w;const k=Math.abs(B-R);if(k>1){if(this._isInitialLoad||E)return this._averageElevation.jumpTo(R),m(R);this._averageElevation.easeTo(R,w,300)}else if(k>1e-4)return this._averageElevation.jumpTo(R),m(R)}return!!this._averageElevation.isEasing(w)&&m(this._averageElevation.getValue(w))}_authenticate(){o.de(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,w=>{if(w&&(w.message===o.df||w.status===401)){const f=this.painter.context.gl;o.db(f,!1),this._logoControl instanceof $M&&this._logoControl._updateLogo(),f&&f.clear(f.DEPTH_BUFFER_BIT|f.COLOR_BUFFER_BIT|f.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.a(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.dg(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const w=this._isDragging();this.painter.updateTerrain(this.style,w)}_calculateSpeedIndex(){const w=this.painter.canvasCopy(),f=this.painter.getCanvasCopiesAndTimestamps();f.timeStamps.push(performance.now());const m=this.painter.context.gl,E=m.createFramebuffer();function B(R){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,R,0);const k=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,k),k}return m.bindFramebuffer(m.FRAMEBUFFER,E),this._canvasPixelComparison(B(w),f.canvasCopies.map(B),f.timeStamps)}_canvasPixelComparison(w,f,m){let E=m[1]-m[0];const B=w.length/4;for(let R=0;R<f.length;R++){const k=f[R];let z=0;for(let K=0;K<k.length;K+=4)k[K]===w[K]&&k[K+1]===w[K+1]&&k[K+2]===w[K+2]&&k[K+3]===w[K+3]&&(z+=1);E+=(m[R+2]-m[R+1])*(1-z/B)}return E}remove(){this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.dh(this.painter.context.gl),o.di.remove(),o.dj.remove(),this._removed=!0,this.fire(new o.b("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(w){this._renderNextFrame=this._renderNextFrame||w,this.style&&!this._frame&&(this._frame=o.f.frame(f=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(f)}))}_preloadTiles(w){const f=this.style?Object.values(this.style._sourceCaches):[];return o.b1(f,(m,E)=>m._preloadTiles(w,E),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(w){this._trackResize&&this.resize({originalEvent:w})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(w){this._showParseStatus!==w&&(this._showParseStatus=w,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(w){this._showTerrainWireframe!==w&&(this._showTerrainWireframe=w,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(w){this._showLayers2DWireframe!==w&&(this._showLayers2DWireframe=w,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(w){this._showLayers3DWireframe!==w&&(this._showLayers3DWireframe=w,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(w){this._speedIndexTiming!==w&&(this._speedIndexTiming=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(w){this._showTileAABBs!==w&&(this._showTileAABBs=w,w&&this._update())}_setCacheLimits(w,f){o.dl(w,f)}get version(){return o.dk}},NavigationControl:class{constructor(w){this.options=o.e({},xw,w),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",f=>f.preventDefault()),this.options.showZoom&&(o.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",f=>{this._map&&this._map.zoomIn({},{originalEvent:f})}),y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",f=>{this._map&&this._map.zoomOut({},{originalEvent:f})}),y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",f=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:f}):m.resetNorth({},{originalEvent:f}))}),this._compassIcon=y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const w=this._map;if(!w)return;const f=w.getZoom(),m=f===w.getMaxZoom(),E=f===w.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=E,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",E.toString())}_rotateCompassArrow(){const w=this._map;if(!w)return;const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(w.transform.pitch*(Math.PI/180)),.5)}) rotateX(${w.transform.pitch}deg) rotateZ(${w.transform.angle*(180/Math.PI)}deg)`:`rotate(${w.transform.angle*(180/Math.PI)}deg)`;w._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=f)})}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),w.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&w.on("pitch",this._rotateCompassArrow),w.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new iA(w,this._compass,this.options.visualizePitch)),this._container}onRemove(){const w=this._map;w&&(this._container.remove(),this.options.showZoom&&w.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&w.off("pitch",this._rotateCompassArrow),w.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(w,f){const m=y("button",w,this._container);return m.type="button",m.addEventListener("click",f),m}_setButtonTitle(w,f){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${f}`);w.setAttribute("aria-label",m),w.firstElementChild&&w.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends o.E{constructor(w){super();const f=navigator.geolocation;this.options=o.e({geolocation:f},Cw,w),o.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=od(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(w){return this._map=w,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(w){const f=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,w(m)};this._supportsGeolocation!==void 0?w(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(m=>f(m.state!=="denied")).catch(()=>f()):f()}_isOutOfMapMaxBounds(w){const f=this._map.getMaxBounds(),m=w.coords;return!!f&&(m.longitude<f.getWest()||m.longitude>f.getEast()||m.latitude<f.getSouth()||m.latitude>f.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new o.b("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.b("geolocate",w)),this._finish()}}_updateCamera(w){const f=new o.bn(w.coords.longitude,w.coords.latitude),m=w.coords.accuracy,E=this._map.getBearing(),B=o.e({bearing:E},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(m),B,{geolocateSource:!0})}_updateMarker(w){if(w){const f=new o.bn(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const w=this._map.transform,f=o.bl(1,w._center.lat)*w.worldSize,m=Math.ceil(2*this._accuracy*f);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.b("error",w)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(w){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=y("button","mapboxgl-ctrl-geolocate",this._container),y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",w===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y("div","mapboxgl-user-location"),this._dotElement.appendChild(y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new eS({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new eS({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.b("trackuserlocationend")))})}}_onDeviceOrientation(w){this._userLocationDotMarker&&(w.webkitCompassHeading?this._heading=w.webkitCompassHeading:w.absolute===!0&&(this._heading=-1*w.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.b("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.b("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.b("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(w={maximumAge:6e5,timeout:0},this._noTimeout=!0):(w=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,w),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const w=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(f=>{f==="granted"&&w()}).catch(console.error):w()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:JE,ScaleControl:class{constructor(w){this.options=o.e({},pu,w),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const w=this.options.maxWidth||100,f=this._map,m=f._containerHeight/2,E=f._containerWidth/2-w/2,B=f.unproject([E,m]),R=f.unproject([E+w,m]),k=B.distanceTo(R);if(this.options.unit==="imperial"){const z=3.2808*k;z>5280?this._setScale(w,z/5280,"mile"):this._setScale(w,z,"foot")}else this.options.unit==="nautical"?this._setScale(w,k/1852,"nautical-mile"):k>=1e3?this._setScale(w,k/1e3,"kilometer"):this._setScale(w,k,"meter")}_setScale(w,f,m){this._map._requestDomTask(()=>{const E=function(R){const k=Math.pow(10,`${Math.floor(R)}`.length-1);let z=R/k;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(K){const J=Math.pow(10,Math.ceil(-Math.log(K)/Math.LN10));return Math.round(K*J)/J}(z),k*z}(f),B=E/f;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(E):`${E}&nbsp;${bg[m]}`,this._container.style.width=w*B+"px"})}onAdd(w){return this._map=w,this._language=w.getLanguage(),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",w.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(w){this._language=w,this._update()}setUnit(w){this.options.unit=w,this._update()}},FullscreenControl:class{constructor(w){this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),o.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const w=this._fullscreenButton=y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);y("span","mapboxgl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",w)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.E{constructor(w){super(),this.options=o.e(Object.create(HM),w),o.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(w&&w.className?w.className.trim().split(/\s+/):[])}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&w.on("preclick",this._onClose),this.options.closeOnMove&&w.on("move",this._onClose),w.on("remove",this.remove),this._update(),w._addPopup(this),this._focusFirstElement(),this._trackPointer?(w.on("mousemove",this._onMouseEvent),w.on("mouseup",this._onMouseEvent),w._canvasContainer.classList.add("mapboxgl-track-pointer")):w.on("move",this._update),this.fire(new o.b("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const w=this._map;return w&&(w.off("move",this._update),w.off("move",this._onClose),w.off("preclick",this._onClose),w.off("click",this._onClose),w.off("remove",this.remove),w.off("mousemove",this._onMouseEvent),w.off("mouseup",this._onMouseEvent),w.off("drag",this._onMouseEvent),w._canvasContainer&&w._canvasContainer.classList.remove("mapboxgl-track-pointer"),w._removePopup(this),this._map=void 0),this.fire(new o.b("close")),this}getLngLat(){return this._lngLat}setLngLat(w){this._lngLat=o.bn.convert(w),this._pos=null,this._trackPointer=!1,this._update();const f=this._map;return f&&(f.on("move",this._update),f.off("mousemove",this._onMouseEvent),f._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const w=this._map;return w&&(w.off("move",this._update),w.on("mousemove",this._onMouseEvent),w.on("drag",this._onMouseEvent),w._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const f=document.createDocumentFragment(),m=document.createElement("body");let E;for(m.innerHTML=w;E=m.firstChild,E;)f.appendChild(E);return this.setDOMContent(f)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){let f=this._content;if(f)for(;f.hasChildNodes();)f.firstChild&&f.removeChild(f.firstChild);else f=this._content=y("div","mapboxgl-popup-content",this._container||void 0);if(f.appendChild(w),this.options.closeButton){const m=this._closeButton=y("button","mapboxgl-popup-close-button",f);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(w){return this._classList.add(w),this._updateClassList(),this}removeClassName(w){return this._classList.delete(w),this._updateClassList(),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){let f;return this._classList.delete(w)?f=!1:(this._classList.add(w),f=!0),this._updateClassList(),f}_onMouseEvent(w){this._update(w.point)}_getAnchor(w){if(this.options.anchor)return this.options.anchor;const f=this._map,m=this._container,E=this._pos;if(!f||!m||!E)return"bottom";const B=m.offsetWidth,R=m.offsetHeight,k=E.x<B/2,z=E.x>f.transform.width-B/2;if(E.y+w<R)return k?"top-left":z?"top-right":"top";if(E.y>f.transform.height-R){if(k)return"bottom-left";if(z)return"bottom-right"}return k?"left":z?"right":"bottom"}_updateClassList(){const w=this._container;if(!w)return;const f=[...this._classList];f.push("mapboxgl-popup"),this._anchor&&f.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&f.push("mapboxgl-popup-track-pointer"),w.className=f.join(" ")}_update(w){const f=this._map,m=this._content;if(!f||!this._lngLat&&!this._trackPointer||!m)return;let E=this._container;if(E||(E=this._container=y("div","mapboxgl-popup",f.getContainer()),this._tip=y("div","mapboxgl-popup-tip",E),E.appendChild(m)),this.options.maxWidth&&E.style.maxWidth!==this.options.maxWidth&&(E.style.maxWidth=this.options.maxWidth),f.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=t1(this._lngLat,this._pos,f.transform)),!this._trackPointer||w){const B=this._pos=this._trackPointer&&w?w:f.project(this._lngLat),R=QM(this.options.offset),k=this._anchor=this._getAnchor(R.y),z=QM(this.options.offset,k),K=B.add(z).round();f._requestDomTask(()=>{this._container&&k&&(this._container.style.transform=`${ww[k]} translate(${K.x}px,${K.y}px)`)})}if(!this._marker&&f._showingGlobe()){const B=o.d6(f.transform,this._lngLat)?0:1;this._setOpacity(B)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(GM);w&&w.focus()}_onClose(){this.remove()}_setOpacity(w){this._container&&(this._container.style.opacity=`${w}`),this._content&&(this._content.style.pointerEvents=w?"auto":"none")}},Marker:eS,Style:Tc,LngLat:o.bn,LngLatBounds:o.ad,Point:o.P,MercatorCoordinate:o.L,FreeCameraOptions:Bu,Evented:o.E,config:o.d5,prewarm:o.dp,clearPrewarmedResources:o.dq,get accessToken(){return o.d5.ACCESS_TOKEN},set accessToken(w){o.d5.ACCESS_TOKEN=w},get baseApiUrl(){return o.d5.API_URL},set baseApiUrl(w){o.d5.API_URL=w},get workerCount(){return o.dr.workerCount},set workerCount(w){o.dr.workerCount=w},get maxParallelImageRequests(){return o.d5.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(w){o.d5.MAX_PARALLEL_IMAGE_REQUESTS=w},clearStorage(w){o.ds(w)},get workerUrl(){return o.dt.workerUrl},set workerUrl(w){o.dt.workerUrl=w},get workerClass(){return o.dt.workerClass},set workerClass(w){o.dt.workerClass=w},get workerParams(){return o.dt.workerParams},set workerParams(w){o.dt.workerParams=w},get dracoUrl(){return o.du()},set dracoUrl(w){o.dv(w)},get meshoptUrl(){return o.dw()},set meshoptUrl(w){o.dx(w)},setNow:o.f.setNow,restoreNow:o.f.restoreNow}});var l=s;return l})})(Rae);var CTe=Rae.exports;const FD=kf(CTe),ETe={id:"menu"},STe={class:"input-label-row"},TTe=["id","value","checked"],ITe=["for"],UY="satellite-streets-v12",BTe={__name:"MapboxSwitchStyle",setup(t){const e=Me(null),n=Me(null),r="pk.eyJ1IjoiZ2Vla2NhdCIsImEiOiJjbHc5ZTJ6dmIwMTEyMmpudGowMXk5Y3o2In0.HDxYFBSNCpbYan731GLJEw",i=[{id:"satellite-streets-v12",label:"Satellite Streets",url:"mapbox://styles/mapbox/satellite-streets-v12"},{id:"light-v11",label:"Light",url:"mapbox://styles/mapbox/light-v11"},{id:"dark-v11",label:"Dark",url:"mapbox://styles/mapbox/dark-v11"},{id:"streets-v12",label:"Streets",url:"mapbox://styles/mapbox/streets-v12"},{id:"outdoors-v12",label:"Outdoors",url:"mapbox://styles/mapbox/outdoors-v12"}];dr(()=>{FD.accessToken=r,n.value=new FD.Map({container:e.value,style:i.find(a=>a.id===UY).url,center:[104.0657,30.6594],zoom:13}),n.value.addControl(new FD.NavigationControl)});const s=a=>{const l=a.target.value,o=i.find(d=>d.id===l).url;n.value&&n.value.setStyle(o)};return(a,l)=>{const o=ui("el-row"),d=ui("el-col");return ve(),Ue("div",null,[rt("div",{id:"map",ref_key:"mapContainer",ref:e},null,512),rt("div",ETe,[pt(d,null,{default:It(()=>[(ve(),Ue(_r,null,cs(i,p=>pt(o,{span:6,key:p.id},{default:It(()=>[rt("div",STe,[rt("input",{id:p.id,type:"radio",name:"rtoggle",value:p.id,checked:p.id===UY,onChange:s},null,40,TTe),rt("label",{for:p.id},Nn(p.label),9,ITe)])]),_:2},1024)),64))]),_:1})])])}}},MTe=iae(BTe,[["__scopeId","data-v-35147780"]]),LTe=rt("header",null,[rt("div",{class:"logo"})],-1),RTe={__name:"App",setup(t){return(e,n)=>(ve(),Ue(_r,null,[LTe,pt(MTe),pt(VEe)],64))}},PTe=PEe({history:lEe("/FindMyTrackPage/"),routes:[{path:"/",name:"home"}]}),FTe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',OTe=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,zY=t=>Array.from(t.querySelectorAll(FTe)).filter(e=>NTe(e)&&OTe(e)),NTe=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},XP=function(t,e,...n){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const i=document.createEvent(r);return i.initEvent(e,...n),t.dispatchEvent(i),t},Fae=t=>!t.getAttribute("aria-owns"),Oae=(t,e,n)=>{const{parentNode:r}=t;if(!r)return null;const i=r.querySelectorAll(n),s=Array.prototype.indexOf.call(i,t);return i[s+e]||null},ZP=t=>{t&&(t.focus(),!Fae(t)&&t.click())},Wa=(t,e,{checkForDefaultPrevented:n=!0}={})=>i=>{const s=t==null?void 0:t(i);if(n===!1||!s)return e==null?void 0:e(i)},$Y=t=>e=>e.pointerType==="mouse"?t(e):void 0;var kTe=Object.defineProperty,DTe=Object.defineProperties,UTe=Object.getOwnPropertyDescriptors,VY=Object.getOwnPropertySymbols,zTe=Object.prototype.hasOwnProperty,$Te=Object.prototype.propertyIsEnumerable,HY=(t,e,n)=>e in t?kTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VTe=(t,e)=>{for(var n in e||(e={}))zTe.call(e,n)&&HY(t,n,e[n]);if(VY)for(var n of VY(e))$Te.call(e,n)&&HY(t,n,e[n]);return t},HTe=(t,e)=>DTe(t,UTe(e));function GY(t,e){var n;const r=Ds();return bu(()=>{r.value=t()},HTe(VTe({},e),{flush:(n=void 0)!=null?n:"sync"})),vE(r)}var QY;const As=typeof window<"u",GTe=t=>typeof t<"u",i3=t=>typeof t=="function",QTe=t=>typeof t=="string",NC=()=>{},jTe=As&&((QY=window==null?void 0:window.navigator)==null?void 0:QY.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function e_(t){return typeof t=="function"?t():T(t)}function Nae(t,e){function n(...r){return new Promise((i,s)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(s)})}return n}function KTe(t,e={}){let n,r,i=NC;const s=l=>{clearTimeout(l),i(),i=NC};return l=>{const o=e_(t),d=e_(e.maxWait);return n&&s(n),o<=0||d!==void 0&&d<=0?(r&&(s(r),r=null),Promise.resolve(l())):new Promise((p,A)=>{i=e.rejectOnCancel?A:p,d&&!r&&(r=setTimeout(()=>{n&&s(n),r=null,p(l())},d)),n=setTimeout(()=>{r&&s(r),r=null,p(l())},o)})}}function WTe(t,e=!0,n=!0,r=!1){let i=0,s,a=!0,l=NC,o;const d=()=>{s&&(clearTimeout(s),s=void 0,l(),l=NC)};return A=>{const v=e_(t),y=Date.now()-i,C=()=>o=A();return d(),v<=0?(i=Date.now(),C()):(y>v&&(n||!a)?(i=Date.now(),C()):e&&(o=new Promise((x,M)=>{l=r?M:x,s=setTimeout(()=>{i=Date.now(),a=!0,x(C()),d()},Math.max(0,v-y))})),!n&&!s&&(s=setTimeout(()=>a=!0,v)),a=!1,o)}}function qTe(t){return t}function YTe(t,e){let n,r,i;const s=Me(!0),a=()=>{s.value=!0,i()};zt(t,a,{flush:"sync"});const l=i3(e)?e:e.get,o=i3(e)?void 0:e.set,d=Gwe((p,A)=>(r=p,i=A,{get(){return s.value&&(n=l(),s.value=!1),r(),n},set(v){o==null||o(v)}}));return Object.isExtensible(d)&&(d.trigger=a),d}function UB(t){return Nse()?(kse(t),!0):!1}function XTe(t,e=200,n={}){return Nae(KTe(e,n),t)}function ZTe(t,e=200,n={}){const r=Me(t.value),i=XTe(()=>{r.value=t.value},e,n);return zt(t,()=>i()),r}function kae(t,e=200,n=!1,r=!0,i=!1){return Nae(WTe(e,n,r,i),t)}function lV(t,e=!0){mi()?dr(t):e?t():Tr(t)}function _b(t,e,n={}){const{immediate:r=!0}=n,i=Me(!1);let s=null;function a(){s&&(clearTimeout(s),s=null)}function l(){i.value=!1,a()}function o(...d){a(),i.value=!0,s=setTimeout(()=>{i.value=!1,s=null,t(...d)},e_(e))}return r&&(i.value=!0,As&&o()),UB(l),{isPending:vE(i),start:o,stop:l}}function xd(t){var e;const n=e_(t);return(e=n==null?void 0:n.$el)!=null?e:n}const w_=As?window:void 0,JTe=As?window.document:void 0;function Vo(...t){let e,n,r,i;if(QTe(t[0])||Array.isArray(t[0])?([n,r,i]=t,e=w_):[e,n,r,i]=t,!e)return NC;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],a=()=>{s.forEach(p=>p()),s.length=0},l=(p,A,v,y)=>(p.addEventListener(A,v,y),()=>p.removeEventListener(A,v,y)),o=zt(()=>[xd(e),e_(i)],([p,A])=>{a(),p&&s.push(...n.flatMap(v=>r.map(y=>l(p,v,y,A))))},{immediate:!0,flush:"post"}),d=()=>{o(),a()};return UB(d),d}let jY=!1;function cV(t,e,n={}){const{window:r=w_,ignore:i=[],capture:s=!0,detectIframe:a=!1}=n;if(!r)return;jTe&&!jY&&(jY=!0,Array.from(r.document.body.children).forEach(v=>v.addEventListener("click",NC)));let l=!0;const o=v=>i.some(y=>{if(typeof y=="string")return Array.from(r.document.querySelectorAll(y)).some(C=>C===v.target||v.composedPath().includes(C));{const C=xd(y);return C&&(v.target===C||v.composedPath().includes(C))}}),p=[Vo(r,"click",v=>{const y=xd(t);if(!(!y||y===v.target||v.composedPath().includes(y))){if(v.detail===0&&(l=!o(v)),!l){l=!0;return}e(v)}},{passive:!0,capture:s}),Vo(r,"pointerdown",v=>{const y=xd(t);y&&(l=!v.composedPath().includes(y)&&!o(v))},{passive:!0}),a&&Vo(r,"blur",v=>{var y;const C=xd(t);((y=r.document.activeElement)==null?void 0:y.tagName)==="IFRAME"&&!(C!=null&&C.contains(r.document.activeElement))&&e(v)})].filter(Boolean);return()=>p.forEach(v=>v())}function eIe(t={}){var e;const{window:n=w_}=t,r=(e=t.document)!=null?e:n==null?void 0:n.document,i=YTe(()=>null,()=>r==null?void 0:r.activeElement);return n&&(Vo(n,"blur",s=>{s.relatedTarget===null&&i.trigger()},!0),Vo(n,"focus",i.trigger,!0)),i}function Dae(t,e=!1){const n=Me(),r=()=>n.value=!!t();return r(),lV(r,e),n}function tIe(t){return JSON.parse(JSON.stringify(t))}const KY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},WY="__vueuse_ssr_handlers__";KY[WY]=KY[WY]||{};function nIe(t,e,{window:n=w_,initialValue:r=""}={}){const i=Me(r),s=oe(()=>{var a;return xd(e)||((a=n==null?void 0:n.document)==null?void 0:a.documentElement)});return zt([s,()=>e_(t)],([a,l])=>{var o;if(a&&n){const d=(o=n.getComputedStyle(a).getPropertyValue(l))==null?void 0:o.trim();i.value=d||r}},{immediate:!0}),zt(i,a=>{var l;(l=s.value)!=null&&l.style&&s.value.style.setProperty(e_(t),a)}),i}function rIe({document:t=JTe}={}){if(!t)return Me("visible");const e=Me(t.visibilityState);return Vo(t,"visibilitychange",()=>{e.value=t.visibilityState}),e}var qY=Object.getOwnPropertySymbols,iIe=Object.prototype.hasOwnProperty,sIe=Object.prototype.propertyIsEnumerable,oIe=(t,e)=>{var n={};for(var r in t)iIe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&qY)for(var r of qY(t))e.indexOf(r)<0&&sIe.call(t,r)&&(n[r]=t[r]);return n};function Ia(t,e,n={}){const r=n,{window:i=w_}=r,s=oIe(r,["window"]);let a;const l=Dae(()=>i&&"ResizeObserver"in i),o=()=>{a&&(a.disconnect(),a=void 0)},d=zt(()=>xd(t),A=>{o(),l.value&&i&&A&&(a=new ResizeObserver(e),a.observe(A,s))},{immediate:!0,flush:"post"}),p=()=>{o(),d()};return UB(p),{isSupported:l,stop:p}}function YY(t,e={}){const{reset:n=!0,windowResize:r=!0,windowScroll:i=!0,immediate:s=!0}=e,a=Me(0),l=Me(0),o=Me(0),d=Me(0),p=Me(0),A=Me(0),v=Me(0),y=Me(0);function C(){const x=xd(t);if(!x){n&&(a.value=0,l.value=0,o.value=0,d.value=0,p.value=0,A.value=0,v.value=0,y.value=0);return}const M=x.getBoundingClientRect();a.value=M.height,l.value=M.bottom,o.value=M.left,d.value=M.right,p.value=M.top,A.value=M.width,v.value=M.x,y.value=M.y}return Ia(t,C),zt(()=>xd(t),x=>!x&&C()),i&&Vo("scroll",C,{capture:!0,passive:!0}),r&&Vo("resize",C,{passive:!0}),lV(()=>{s&&C()}),{height:a,bottom:l,left:o,right:d,top:p,width:A,x:v,y,update:C}}var XY=Object.getOwnPropertySymbols,aIe=Object.prototype.hasOwnProperty,lIe=Object.prototype.propertyIsEnumerable,cIe=(t,e)=>{var n={};for(var r in t)aIe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&XY)for(var r of XY(t))e.indexOf(r)<0&&lIe.call(t,r)&&(n[r]=t[r]);return n};function Uae(t,e,n={}){const r=n,{window:i=w_}=r,s=cIe(r,["window"]);let a;const l=Dae(()=>i&&"MutationObserver"in i),o=()=>{a&&(a.disconnect(),a=void 0)},d=zt(()=>xd(t),A=>{o(),l.value&&i&&A&&(a=new MutationObserver(e),a.observe(A,s))},{immediate:!0}),p=()=>{o(),d()};return UB(p),{isSupported:l,stop:p}}var ZY;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(ZY||(ZY={}));var uIe=Object.defineProperty,JY=Object.getOwnPropertySymbols,hIe=Object.prototype.hasOwnProperty,dIe=Object.prototype.propertyIsEnumerable,eX=(t,e,n)=>e in t?uIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fIe=(t,e)=>{for(var n in e||(e={}))hIe.call(e,n)&&eX(t,n,e[n]);if(JY)for(var n of JY(e))dIe.call(e,n)&&eX(t,n,e[n]);return t};const pIe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};fIe({linear:qTe},pIe);function zae(t,e,n,r={}){var i,s,a;const{clone:l=!1,passive:o=!1,eventName:d,deep:p=!1,defaultValue:A}=r,v=mi(),y=n||(v==null?void 0:v.emit)||((i=v==null?void 0:v.$emit)==null?void 0:i.bind(v))||((a=(s=v==null?void 0:v.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(v==null?void 0:v.proxy));let C=d;e||(e="modelValue"),C=d||C||`update:${e.toString()}`;const x=I=>l?i3(l)?l(I):tIe(I):I,M=()=>GTe(t[e])?x(t[e]):A;if(o){const I=M(),P=Me(I);return zt(()=>t[e],F=>P.value=x(F)),zt(P,F=>{(F!==t[e]||p)&&y(C,F)},{deep:p}),P}else return oe({get(){return M()},set(I){y(C,I)}})}function AIe({window:t=w_}={}){if(!t)return Me(!1);const e=Me(t.document.hasFocus());return Vo(t,"blur",()=>{e.value=!1}),Vo(t,"focus",()=>{e.value=!0}),e}function gIe(t={}){const{window:e=w_,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:i=!0,includeScrollbar:s=!0}=t,a=Me(n),l=Me(r),o=()=>{e&&(s?(a.value=e.innerWidth,l.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,l.value=e.document.documentElement.clientHeight))};return o(),lV(o),Vo("resize",o,{passive:!0}),i&&Vo("orientationchange",o,{passive:!0}),{width:a,height:l}}const $ae=()=>As&&/firefox/i.test(window.navigator.userAgent),mIe=(t,e)=>{if(!As||!t||!e)return!1;const n=t.getBoundingClientRect();let r;return e instanceof Element?r=e.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},tX=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},s3=(t,e)=>Math.abs(tX(t)-tX(e)),uV=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}};function vIe(t,e,n,r){const i=n-e;return t/=r/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}var Vae=typeof global=="object"&&global&&global.Object===Object&&global,yIe=typeof self=="object"&&self&&self.Object===Object&&self,HA=Vae||yIe||Function("return this")(),Cp=HA.Symbol,Hae=Object.prototype,_Ie=Hae.hasOwnProperty,bIe=Hae.toString,NS=Cp?Cp.toStringTag:void 0;function wIe(t){var e=_Ie.call(t,NS),n=t[NS];try{t[NS]=void 0;var r=!0}catch{}var i=bIe.call(t);return r&&(e?t[NS]=n:delete t[NS]),i}var xIe=Object.prototype,CIe=xIe.toString;function EIe(t){return CIe.call(t)}var SIe="[object Null]",TIe="[object Undefined]",nX=Cp?Cp.toStringTag:void 0;function kb(t){return t==null?t===void 0?TIe:SIe:nX&&nX in Object(t)?wIe(t):EIe(t)}function nm(t){return t!=null&&typeof t=="object"}var IIe="[object Symbol]";function t2(t){return typeof t=="symbol"||nm(t)&&kb(t)==IIe}function hV(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var $h=Array.isArray,BIe=1/0,rX=Cp?Cp.prototype:void 0,iX=rX?rX.toString:void 0;function Gae(t){if(typeof t=="string")return t;if($h(t))return hV(t,Gae)+"";if(t2(t))return iX?iX.call(t):"";var e=t+"";return e=="0"&&1/t==-BIe?"-0":e}var MIe=/\s/;function LIe(t){for(var e=t.length;e--&&MIe.test(t.charAt(e)););return e}var RIe=/^\s+/;function PIe(t){return t&&t.slice(0,LIe(t)+1).replace(RIe,"")}function Vh(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var sX=NaN,FIe=/^[-+]0x[0-9a-f]+$/i,OIe=/^0b[01]+$/i,NIe=/^0o[0-7]+$/i,kIe=parseInt;function oX(t){if(typeof t=="number")return t;if(t2(t))return sX;if(Vh(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Vh(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=PIe(t);var n=OIe.test(t);return n||NIe.test(t)?kIe(t.slice(2),n?2:8):FIe.test(t)?sX:+t}function dV(t){return t}var DIe="[object AsyncFunction]",UIe="[object Function]",zIe="[object GeneratorFunction]",$Ie="[object Proxy]";function fV(t){if(!Vh(t))return!1;var e=kb(t);return e==UIe||e==zIe||e==DIe||e==$Ie}var OD=HA["__core-js_shared__"],aX=function(){var t=/[^.]+$/.exec(OD&&OD.keys&&OD.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function VIe(t){return!!aX&&aX in t}var HIe=Function.prototype,GIe=HIe.toString;function Db(t){if(t!=null){try{return GIe.call(t)}catch{}try{return t+""}catch{}}return""}var QIe=/[\\^$.*+?()[\]{}|]/g,jIe=/^\[object .+?Constructor\]$/,KIe=Function.prototype,WIe=Object.prototype,qIe=KIe.toString,YIe=WIe.hasOwnProperty,XIe=RegExp("^"+qIe.call(YIe).replace(QIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZIe(t){if(!Vh(t)||VIe(t))return!1;var e=fV(t)?XIe:jIe;return e.test(Db(t))}function JIe(t,e){return t==null?void 0:t[e]}function Ub(t,e){var n=JIe(t,e);return ZIe(n)?n:void 0}var o3=Ub(HA,"WeakMap"),lX=Object.create,eBe=function(){function t(){}return function(e){if(!Vh(e))return{};if(lX)return lX(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function tBe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function nBe(){}function Qae(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var rBe=800,iBe=16,sBe=Date.now;function oBe(t){var e=0,n=0;return function(){var r=sBe(),i=iBe-(r-n);if(n=r,i>0){if(++e>=rBe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function aBe(t){return function(){return t}}var sO=function(){try{var t=Ub(Object,"defineProperty");return t({},"",{}),t}catch{}}(),lBe=sO?function(t,e){return sO(t,"toString",{configurable:!0,enumerable:!1,value:aBe(e),writable:!0})}:dV,jae=oBe(lBe);function cBe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Kae(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function uBe(t){return t!==t}function hBe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function dBe(t,e,n){return e===e?hBe(t,e,n):Kae(t,uBe,n)}function fBe(t,e){var n=t==null?0:t.length;return!!n&&dBe(t,e,0)>-1}var pBe=9007199254740991,ABe=/^(?:0|[1-9]\d*)$/;function n2(t,e){var n=typeof t;return e=e??pBe,!!e&&(n=="number"||n!="symbol"&&ABe.test(t))&&t>-1&&t%1==0&&t<e}function pV(t,e,n){e=="__proto__"&&sO?sO(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function zB(t,e){return t===e||t!==t&&e!==e}var gBe=Object.prototype,mBe=gBe.hasOwnProperty;function AV(t,e,n){var r=t[e];(!(mBe.call(t,e)&&zB(r,n))||n===void 0&&!(e in t))&&pV(t,e,n)}function wE(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],o=void 0;o===void 0&&(o=t[l]),i?pV(n,l,o):AV(n,l,o)}return n}var cX=Math.max;function Wae(t,e,n){return e=cX(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=cX(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(a),tBe(t,this,l)}}function qae(t,e){return jae(Wae(t,e,dV),t+"")}var vBe=9007199254740991;function gV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=vBe}function xE(t){return t!=null&&gV(t.length)&&!fV(t)}function yBe(t,e,n){if(!Vh(n))return!1;var r=typeof e;return(r=="number"?xE(n)&&n2(e,n.length):r=="string"&&e in n)?zB(n[e],t):!1}function _Be(t){return qae(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&yBe(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}var bBe=Object.prototype;function mV(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||bBe;return t===n}function wBe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var xBe="[object Arguments]";function uX(t){return nm(t)&&kb(t)==xBe}var Yae=Object.prototype,CBe=Yae.hasOwnProperty,EBe=Yae.propertyIsEnumerable,NI=uX(function(){return arguments}())?uX:function(t){return nm(t)&&CBe.call(t,"callee")&&!EBe.call(t,"callee")};function SBe(){return!1}var Xae=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hX=Xae&&typeof module=="object"&&module&&!module.nodeType&&module,TBe=hX&&hX.exports===Xae,dX=TBe?HA.Buffer:void 0,IBe=dX?dX.isBuffer:void 0,kI=IBe||SBe,BBe="[object Arguments]",MBe="[object Array]",LBe="[object Boolean]",RBe="[object Date]",PBe="[object Error]",FBe="[object Function]",OBe="[object Map]",NBe="[object Number]",kBe="[object Object]",DBe="[object RegExp]",UBe="[object Set]",zBe="[object String]",$Be="[object WeakMap]",VBe="[object ArrayBuffer]",HBe="[object DataView]",GBe="[object Float32Array]",QBe="[object Float64Array]",jBe="[object Int8Array]",KBe="[object Int16Array]",WBe="[object Int32Array]",qBe="[object Uint8Array]",YBe="[object Uint8ClampedArray]",XBe="[object Uint16Array]",ZBe="[object Uint32Array]",il={};il[GBe]=il[QBe]=il[jBe]=il[KBe]=il[WBe]=il[qBe]=il[YBe]=il[XBe]=il[ZBe]=!0;il[BBe]=il[MBe]=il[VBe]=il[LBe]=il[HBe]=il[RBe]=il[PBe]=il[FBe]=il[OBe]=il[NBe]=il[kBe]=il[DBe]=il[UBe]=il[zBe]=il[$Be]=!1;function JBe(t){return nm(t)&&gV(t.length)&&!!il[kb(t)]}function vV(t){return function(e){return t(e)}}var Zae=typeof exports=="object"&&exports&&!exports.nodeType&&exports,GT=Zae&&typeof module=="object"&&module&&!module.nodeType&&module,eMe=GT&&GT.exports===Zae,ND=eMe&&Vae.process,kC=function(){try{var t=GT&&GT.require&&GT.require("util").types;return t||ND&&ND.binding&&ND.binding("util")}catch{}}(),fX=kC&&kC.isTypedArray,yV=fX?vV(fX):JBe,tMe=Object.prototype,nMe=tMe.hasOwnProperty;function Jae(t,e){var n=$h(t),r=!n&&NI(t),i=!n&&!r&&kI(t),s=!n&&!r&&!i&&yV(t),a=n||r||i||s,l=a?wBe(t.length,String):[],o=l.length;for(var d in t)(e||nMe.call(t,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||n2(d,o)))&&l.push(d);return l}function ele(t,e){return function(n){return t(e(n))}}var rMe=ele(Object.keys,Object),iMe=Object.prototype,sMe=iMe.hasOwnProperty;function oMe(t){if(!mV(t))return rMe(t);var e=[];for(var n in Object(t))sMe.call(t,n)&&n!="constructor"&&e.push(n);return e}function $B(t){return xE(t)?Jae(t):oMe(t)}function aMe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var lMe=Object.prototype,cMe=lMe.hasOwnProperty;function uMe(t){if(!Vh(t))return aMe(t);var e=mV(t),n=[];for(var r in t)r=="constructor"&&(e||!cMe.call(t,r))||n.push(r);return n}function VB(t){return xE(t)?Jae(t,!0):uMe(t)}var hMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dMe=/^\w*$/;function _V(t,e){if($h(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||t2(t)?!0:dMe.test(t)||!hMe.test(t)||e!=null&&t in Object(e)}var DI=Ub(Object,"create");function fMe(){this.__data__=DI?DI(null):{},this.size=0}function pMe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var AMe="__lodash_hash_undefined__",gMe=Object.prototype,mMe=gMe.hasOwnProperty;function vMe(t){var e=this.__data__;if(DI){var n=e[t];return n===AMe?void 0:n}return mMe.call(e,t)?e[t]:void 0}var yMe=Object.prototype,_Me=yMe.hasOwnProperty;function bMe(t){var e=this.__data__;return DI?e[t]!==void 0:_Me.call(e,t)}var wMe="__lodash_hash_undefined__";function xMe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=DI&&e===void 0?wMe:e,this}function bb(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bb.prototype.clear=fMe;bb.prototype.delete=pMe;bb.prototype.get=vMe;bb.prototype.has=bMe;bb.prototype.set=xMe;function CMe(){this.__data__=[],this.size=0}function r2(t,e){for(var n=t.length;n--;)if(zB(t[n][0],e))return n;return-1}var EMe=Array.prototype,SMe=EMe.splice;function TMe(t){var e=this.__data__,n=r2(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():SMe.call(e,n,1),--this.size,!0}function IMe(t){var e=this.__data__,n=r2(e,t);return n<0?void 0:e[n][1]}function BMe(t){return r2(this.__data__,t)>-1}function MMe(t,e){var n=this.__data__,r=r2(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function l0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l0.prototype.clear=CMe;l0.prototype.delete=TMe;l0.prototype.get=IMe;l0.prototype.has=BMe;l0.prototype.set=MMe;var UI=Ub(HA,"Map");function LMe(){this.size=0,this.__data__={hash:new bb,map:new(UI||l0),string:new bb}}function RMe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function i2(t,e){var n=t.__data__;return RMe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function PMe(t){var e=i2(this,t).delete(t);return this.size-=e?1:0,e}function FMe(t){return i2(this,t).get(t)}function OMe(t){return i2(this,t).has(t)}function NMe(t,e){var n=i2(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function c0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c0.prototype.clear=LMe;c0.prototype.delete=PMe;c0.prototype.get=FMe;c0.prototype.has=OMe;c0.prototype.set=NMe;var kMe="Expected a function";function s2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(kMe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(s2.Cache||c0),n}s2.Cache=c0;var DMe=500;function UMe(t){var e=s2(t,function(r){return n.size===DMe&&n.clear(),r}),n=e.cache;return e}var zMe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$Me=/\\(\\)?/g,VMe=UMe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(zMe,function(n,r,i,s){e.push(i?s.replace($Me,"$1"):r||n)}),e});function HMe(t){return t==null?"":Gae(t)}function CE(t,e){return $h(t)?t:_V(t,e)?[t]:VMe(HMe(t))}var GMe=1/0;function EE(t){if(typeof t=="string"||t2(t))return t;var e=t+"";return e=="0"&&1/t==-GMe?"-0":e}function o2(t,e){e=CE(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[EE(e[n++])];return n&&n==r?t:void 0}function ll(t,e,n){var r=t==null?void 0:o2(t,e);return r===void 0?n:r}function bV(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var pX=Cp?Cp.isConcatSpreadable:void 0;function QMe(t){return $h(t)||NI(t)||!!(pX&&t&&t[pX])}function HB(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=QMe),i||(i=[]);++s<a;){var l=t[s];e>0&&n(l)?e>1?HB(l,e-1,n,r,i):bV(i,l):r||(i[i.length]=l)}return i}function tle(t){var e=t==null?0:t.length;return e?HB(t,1):[]}function nle(t){return jae(Wae(t,void 0,tle),t+"")}var wV=ele(Object.getPrototypeOf,Object),jMe="[object Object]",KMe=Function.prototype,WMe=Object.prototype,rle=KMe.toString,qMe=WMe.hasOwnProperty,YMe=rle.call(Object);function ile(t){if(!nm(t)||kb(t)!=jMe)return!1;var e=wV(t);if(e===null)return!0;var n=qMe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&rle.call(n)==YMe}function XMe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function t_(){if(!arguments.length)return[];var t=arguments[0];return $h(t)?t:[t]}function ZMe(){this.__data__=new l0,this.size=0}function JMe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function eLe(t){return this.__data__.get(t)}function tLe(t){return this.__data__.has(t)}var nLe=200;function rLe(t,e){var n=this.__data__;if(n instanceof l0){var r=n.__data__;if(!UI||r.length<nLe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new c0(r)}return n.set(t,e),this.size=n.size,this}function RA(t){var e=this.__data__=new l0(t);this.size=e.size}RA.prototype.clear=ZMe;RA.prototype.delete=JMe;RA.prototype.get=eLe;RA.prototype.has=tLe;RA.prototype.set=rLe;function iLe(t,e){return t&&wE(e,$B(e),t)}function sLe(t,e){return t&&wE(e,VB(e),t)}var sle=typeof exports=="object"&&exports&&!exports.nodeType&&exports,AX=sle&&typeof module=="object"&&module&&!module.nodeType&&module,oLe=AX&&AX.exports===sle,gX=oLe?HA.Buffer:void 0,mX=gX?gX.allocUnsafe:void 0;function ole(t,e){if(e)return t.slice();var n=t.length,r=mX?mX(n):new t.constructor(n);return t.copy(r),r}function aLe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function ale(){return[]}var lLe=Object.prototype,cLe=lLe.propertyIsEnumerable,vX=Object.getOwnPropertySymbols,xV=vX?function(t){return t==null?[]:(t=Object(t),aLe(vX(t),function(e){return cLe.call(t,e)}))}:ale;function uLe(t,e){return wE(t,xV(t),e)}var hLe=Object.getOwnPropertySymbols,lle=hLe?function(t){for(var e=[];t;)bV(e,xV(t)),t=wV(t);return e}:ale;function dLe(t,e){return wE(t,lle(t),e)}function cle(t,e,n){var r=e(t);return $h(t)?r:bV(r,n(t))}function a3(t){return cle(t,$B,xV)}function ule(t){return cle(t,VB,lle)}var l3=Ub(HA,"DataView"),c3=Ub(HA,"Promise"),lC=Ub(HA,"Set"),yX="[object Map]",fLe="[object Object]",_X="[object Promise]",bX="[object Set]",wX="[object WeakMap]",xX="[object DataView]",pLe=Db(l3),ALe=Db(UI),gLe=Db(c3),mLe=Db(lC),vLe=Db(o3),SA=kb;(l3&&SA(new l3(new ArrayBuffer(1)))!=xX||UI&&SA(new UI)!=yX||c3&&SA(c3.resolve())!=_X||lC&&SA(new lC)!=bX||o3&&SA(new o3)!=wX)&&(SA=function(t){var e=kb(t),n=e==fLe?t.constructor:void 0,r=n?Db(n):"";if(r)switch(r){case pLe:return xX;case ALe:return yX;case gLe:return _X;case mLe:return bX;case vLe:return wX}return e});var yLe=Object.prototype,_Le=yLe.hasOwnProperty;function bLe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&_Le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var oO=HA.Uint8Array;function CV(t){var e=new t.constructor(t.byteLength);return new oO(e).set(new oO(t)),e}function wLe(t,e){var n=e?CV(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var xLe=/\w*$/;function CLe(t){var e=new t.constructor(t.source,xLe.exec(t));return e.lastIndex=t.lastIndex,e}var CX=Cp?Cp.prototype:void 0,EX=CX?CX.valueOf:void 0;function ELe(t){return EX?Object(EX.call(t)):{}}function hle(t,e){var n=e?CV(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var SLe="[object Boolean]",TLe="[object Date]",ILe="[object Map]",BLe="[object Number]",MLe="[object RegExp]",LLe="[object Set]",RLe="[object String]",PLe="[object Symbol]",FLe="[object ArrayBuffer]",OLe="[object DataView]",NLe="[object Float32Array]",kLe="[object Float64Array]",DLe="[object Int8Array]",ULe="[object Int16Array]",zLe="[object Int32Array]",$Le="[object Uint8Array]",VLe="[object Uint8ClampedArray]",HLe="[object Uint16Array]",GLe="[object Uint32Array]";function QLe(t,e,n){var r=t.constructor;switch(e){case FLe:return CV(t);case SLe:case TLe:return new r(+t);case OLe:return wLe(t,n);case NLe:case kLe:case DLe:case ULe:case zLe:case $Le:case VLe:case HLe:case GLe:return hle(t,n);case ILe:return new r;case BLe:case RLe:return new r(t);case MLe:return CLe(t);case LLe:return new r;case PLe:return ELe(t)}}function dle(t){return typeof t.constructor=="function"&&!mV(t)?eBe(wV(t)):{}}var jLe="[object Map]";function KLe(t){return nm(t)&&SA(t)==jLe}var SX=kC&&kC.isMap,WLe=SX?vV(SX):KLe,qLe="[object Set]";function YLe(t){return nm(t)&&SA(t)==qLe}var TX=kC&&kC.isSet,XLe=TX?vV(TX):YLe,ZLe=1,JLe=2,eRe=4,fle="[object Arguments]",tRe="[object Array]",nRe="[object Boolean]",rRe="[object Date]",iRe="[object Error]",ple="[object Function]",sRe="[object GeneratorFunction]",oRe="[object Map]",aRe="[object Number]",Ale="[object Object]",lRe="[object RegExp]",cRe="[object Set]",uRe="[object String]",hRe="[object Symbol]",dRe="[object WeakMap]",fRe="[object ArrayBuffer]",pRe="[object DataView]",ARe="[object Float32Array]",gRe="[object Float64Array]",mRe="[object Int8Array]",vRe="[object Int16Array]",yRe="[object Int32Array]",_Re="[object Uint8Array]",bRe="[object Uint8ClampedArray]",wRe="[object Uint16Array]",xRe="[object Uint32Array]",ja={};ja[fle]=ja[tRe]=ja[fRe]=ja[pRe]=ja[nRe]=ja[rRe]=ja[ARe]=ja[gRe]=ja[mRe]=ja[vRe]=ja[yRe]=ja[oRe]=ja[aRe]=ja[Ale]=ja[lRe]=ja[cRe]=ja[uRe]=ja[hRe]=ja[_Re]=ja[bRe]=ja[wRe]=ja[xRe]=!0;ja[iRe]=ja[ple]=ja[dRe]=!1;function cC(t,e,n,r,i,s){var a,l=e&ZLe,o=e&JLe,d=e&eRe;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!Vh(t))return t;var p=$h(t);if(p){if(a=bLe(t),!l)return Qae(t,a)}else{var A=SA(t),v=A==ple||A==sRe;if(kI(t))return ole(t,l);if(A==Ale||A==fle||v&&!i){if(a=o||v?{}:dle(t),!l)return o?dLe(t,sLe(a,t)):uLe(t,iLe(a,t))}else{if(!ja[A])return i?t:{};a=QLe(t,A,l)}}s||(s=new RA);var y=s.get(t);if(y)return y;s.set(t,a),XLe(t)?t.forEach(function(M){a.add(cC(M,e,n,M,t,s))}):WLe(t)&&t.forEach(function(M,I){a.set(I,cC(M,e,n,I,t,s))});var C=d?o?ule:a3:o?VB:$B,x=p?void 0:C(t);return cBe(x||t,function(M,I){x&&(I=M,M=t[I]),AV(a,I,cC(M,e,n,I,t,s))}),a}var CRe=4;function IX(t){return cC(t,CRe)}var ERe=1,SRe=4;function aO(t){return cC(t,ERe|SRe)}var TRe="__lodash_hash_undefined__";function IRe(t){return this.__data__.set(t,TRe),this}function BRe(t){return this.__data__.has(t)}function zI(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new c0;++e<n;)this.add(t[e])}zI.prototype.add=zI.prototype.push=IRe;zI.prototype.has=BRe;function MRe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function gle(t,e){return t.has(e)}var LRe=1,RRe=2;function mle(t,e,n,r,i,s){var a=n&LRe,l=t.length,o=e.length;if(l!=o&&!(a&&o>l))return!1;var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var A=-1,v=!0,y=n&RRe?new zI:void 0;for(s.set(t,e),s.set(e,t);++A<l;){var C=t[A],x=e[A];if(r)var M=a?r(x,C,A,e,t,s):r(C,x,A,t,e,s);if(M!==void 0){if(M)continue;v=!1;break}if(y){if(!MRe(e,function(I,P){if(!gle(y,P)&&(C===I||i(C,I,n,r,s)))return y.push(P)})){v=!1;break}}else if(!(C===x||i(C,x,n,r,s))){v=!1;break}}return s.delete(t),s.delete(e),v}function PRe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function EV(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var FRe=1,ORe=2,NRe="[object Boolean]",kRe="[object Date]",DRe="[object Error]",URe="[object Map]",zRe="[object Number]",$Re="[object RegExp]",VRe="[object Set]",HRe="[object String]",GRe="[object Symbol]",QRe="[object ArrayBuffer]",jRe="[object DataView]",BX=Cp?Cp.prototype:void 0,kD=BX?BX.valueOf:void 0;function KRe(t,e,n,r,i,s,a){switch(n){case jRe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case QRe:return!(t.byteLength!=e.byteLength||!s(new oO(t),new oO(e)));case NRe:case kRe:case zRe:return zB(+t,+e);case DRe:return t.name==e.name&&t.message==e.message;case $Re:case HRe:return t==e+"";case URe:var l=PRe;case VRe:var o=r&FRe;if(l||(l=EV),t.size!=e.size&&!o)return!1;var d=a.get(t);if(d)return d==e;r|=ORe,a.set(t,e);var p=mle(l(t),l(e),r,i,s,a);return a.delete(t),p;case GRe:if(kD)return kD.call(t)==kD.call(e)}return!1}var WRe=1,qRe=Object.prototype,YRe=qRe.hasOwnProperty;function XRe(t,e,n,r,i,s){var a=n&WRe,l=a3(t),o=l.length,d=a3(e),p=d.length;if(o!=p&&!a)return!1;for(var A=o;A--;){var v=l[A];if(!(a?v in e:YRe.call(e,v)))return!1}var y=s.get(t),C=s.get(e);if(y&&C)return y==e&&C==t;var x=!0;s.set(t,e),s.set(e,t);for(var M=a;++A<o;){v=l[A];var I=t[v],P=e[v];if(r)var F=a?r(P,I,v,e,t,s):r(I,P,v,t,e,s);if(!(F===void 0?I===P||i(I,P,n,r,s):F)){x=!1;break}M||(M=v=="constructor")}if(x&&!M){var D=t.constructor,V=e.constructor;D!=V&&"constructor"in t&&"constructor"in e&&!(typeof D=="function"&&D instanceof D&&typeof V=="function"&&V instanceof V)&&(x=!1)}return s.delete(t),s.delete(e),x}var ZRe=1,MX="[object Arguments]",LX="[object Array]",oR="[object Object]",JRe=Object.prototype,RX=JRe.hasOwnProperty;function ePe(t,e,n,r,i,s){var a=$h(t),l=$h(e),o=a?LX:SA(t),d=l?LX:SA(e);o=o==MX?oR:o,d=d==MX?oR:d;var p=o==oR,A=d==oR,v=o==d;if(v&&kI(t)){if(!kI(e))return!1;a=!0,p=!1}if(v&&!p)return s||(s=new RA),a||yV(t)?mle(t,e,n,r,i,s):KRe(t,e,o,n,r,i,s);if(!(n&ZRe)){var y=p&&RX.call(t,"__wrapped__"),C=A&&RX.call(e,"__wrapped__");if(y||C){var x=y?t.value():t,M=C?e.value():e;return s||(s=new RA),i(x,M,n,r,s)}}return v?(s||(s=new RA),XRe(t,e,n,r,i,s)):!1}function a2(t,e,n,r,i){return t===e?!0:t==null||e==null||!nm(t)&&!nm(e)?t!==t&&e!==e:ePe(t,e,n,r,a2,i)}var tPe=1,nPe=2;function rPe(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],o=t[l],d=a[1];if(a[2]){if(o===void 0&&!(l in t))return!1}else{var p=new RA,A;if(!(A===void 0?a2(d,o,tPe|nPe,r,p):A))return!1}}return!0}function vle(t){return t===t&&!Vh(t)}function iPe(t){for(var e=$B(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,vle(i)]}return e}function yle(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function sPe(t){var e=iPe(t);return e.length==1&&e[0][2]?yle(e[0][0],e[0][1]):function(n){return n===t||rPe(n,t,e)}}function oPe(t,e){return t!=null&&e in Object(t)}function aPe(t,e,n){e=CE(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=EE(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&gV(i)&&n2(a,i)&&($h(t)||NI(t)))}function _le(t,e){return t!=null&&aPe(t,e,oPe)}var lPe=1,cPe=2;function uPe(t,e){return _V(t)&&vle(e)?yle(EE(t),e):function(n){var r=ll(n,t);return r===void 0&&r===e?_le(n,t):a2(e,r,lPe|cPe)}}function hPe(t){return function(e){return e==null?void 0:e[t]}}function dPe(t){return function(e){return o2(e,t)}}function fPe(t){return _V(t)?hPe(EE(t)):dPe(t)}function ble(t){return typeof t=="function"?t:t==null?dV:typeof t=="object"?$h(t)?uPe(t[0],t[1]):sPe(t):fPe(t)}function pPe(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),l=a.length;l--;){var o=a[++i];if(n(s[o],o,s)===!1)break}return e}}var wle=pPe();function APe(t,e){return t&&wle(t,e,$B)}function gPe(t,e){return function(n,r){if(n==null)return n;if(!xE(n))return t(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var mPe=gPe(APe),DD=function(){return HA.Date.now()},vPe="Expected a function",yPe=Math.max,_Pe=Math.min;function Rd(t,e,n){var r,i,s,a,l,o,d=0,p=!1,A=!1,v=!0;if(typeof t!="function")throw new TypeError(vPe);e=oX(e)||0,Vh(n)&&(p=!!n.leading,A="maxWait"in n,s=A?yPe(oX(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function y(H){var Q=r,G=i;return r=i=void 0,d=H,a=t.apply(G,Q),a}function C(H){return d=H,l=setTimeout(I,e),p?y(H):a}function x(H){var Q=H-o,G=H-d,W=e-Q;return A?_Pe(W,s-G):W}function M(H){var Q=H-o,G=H-d;return o===void 0||Q>=e||Q<0||A&&G>=s}function I(){var H=DD();if(M(H))return P(H);l=setTimeout(I,x(H))}function P(H){return l=void 0,v&&r?y(H):(r=i=void 0,a)}function F(){l!==void 0&&clearTimeout(l),d=0,r=o=i=l=void 0}function D(){return l===void 0?a:P(DD())}function V(){var H=DD(),Q=M(H);if(r=arguments,i=this,o=H,Q){if(l===void 0)return C(o);if(A)return clearTimeout(l),l=setTimeout(I,e),y(o)}return l===void 0&&(l=setTimeout(I,e)),a}return V.cancel=F,V.flush=D,V}function u3(t,e,n){(n!==void 0&&!zB(t[e],n)||n===void 0&&!(e in t))&&pV(t,e,n)}function xle(t){return nm(t)&&xE(t)}function h3(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function bPe(t){return wE(t,VB(t))}function wPe(t,e,n,r,i,s,a){var l=h3(t,n),o=h3(e,n),d=a.get(o);if(d){u3(t,n,d);return}var p=s?s(l,o,n+"",t,e,a):void 0,A=p===void 0;if(A){var v=$h(o),y=!v&&kI(o),C=!v&&!y&&yV(o);p=o,v||y||C?$h(l)?p=l:xle(l)?p=Qae(l):y?(A=!1,p=ole(o,!0)):C?(A=!1,p=hle(o,!0)):p=[]:ile(o)||NI(o)?(p=l,NI(l)?p=bPe(l):(!Vh(l)||fV(l))&&(p=dle(o))):A=!1}A&&(a.set(o,p),i(p,o,r,s,a),a.delete(o)),u3(t,n,p)}function Cle(t,e,n,r,i){t!==e&&wle(e,function(s,a){if(i||(i=new RA),Vh(s))wPe(t,e,a,n,Cle,r,i);else{var l=r?r(h3(t,a),s,a+"",t,e,i):void 0;l===void 0&&(l=s),u3(t,a,l)}},VB)}function xPe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function Ele(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=r-1;return Kae(t,ble(e),i,!0)}function CPe(t,e){var n=-1,r=xE(t)?Array(t.length):[];return mPe(t,function(i,s,a){r[++n]=e(i,s,a)}),r}function EPe(t,e){var n=$h(t)?hV:CPe;return n(t,ble(e))}function SPe(t,e){return HB(EPe(t,e),1)}var TPe=1/0;function IPe(t){var e=t==null?0:t.length;return e?HB(t,TPe):[]}function lO(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function BPe(t,e){return e.length<2?t:o2(t,XMe(e,0,-1))}function vh(t,e){return a2(t,e)}function eu(t){return t==null}function Sle(t){return t===void 0}var MPe=_Be(function(t,e,n){Cle(t,e,n)});function LPe(t,e){return e=CE(e,t),t=BPe(t,e),t==null||delete t[EE(xPe(e))]}function RPe(t){return ile(t)?void 0:t}var PPe=1,FPe=2,OPe=4,NPe=nle(function(t,e){var n={};if(t==null)return n;var r=!1;e=hV(e,function(s){return s=CE(s,t),r||(r=s.length>1),s}),wE(t,ule(t),n),r&&(n=cC(n,PPe|FPe|OPe,RPe));for(var i=e.length;i--;)LPe(n,e[i]);return n});function Tle(t,e,n,r){if(!Vh(t))return t;e=CE(e,t);for(var i=-1,s=e.length,a=s-1,l=t;l!=null&&++i<s;){var o=EE(e[i]),d=n;if(o==="__proto__"||o==="constructor"||o==="prototype")return t;if(i!=a){var p=l[o];d=void 0,d===void 0&&(d=Vh(p)?p:n2(e[i+1])?[]:{})}AV(l,o,d),l=l[o]}return t}function kPe(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],l=o2(t,a);n(l,a)&&Tle(s,CE(a,t),l)}return s}function DPe(t,e){return kPe(t,e,function(n,r){return _le(t,r)})}var Gg=nle(function(t,e){return t==null?{}:DPe(t,e)});function UPe(t,e,n){return t==null?t:Tle(t,e,n)}var zPe="Expected a function";function eb(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(zPe);return Vh(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Rd(t,e,{leading:r,maxWait:e,trailing:i})}var $Pe=1/0,VPe=lC&&1/EV(new lC([,-0]))[1]==$Pe?function(t){return new lC(t)}:nBe,HPe=200;function GPe(t,e,n){var r=-1,i=fBe,s=t.length,a=!0,l=[],o=l;if(s>=HPe){var d=VPe(t);if(d)return EV(d);a=!1,i=gle,o=new zI}else o=l;e:for(;++r<s;){var p=t[r],A=p;if(p=p!==0?p:0,a&&A===A){for(var v=o.length;v--;)if(o[v]===A)continue e;l.push(p)}else i(o,A,n)||(o!==l&&o.push(A),l.push(p))}return l}var UD=qae(function(t){return GPe(HB(t,1,xle,!0))});const Cl=t=>t===void 0,Sl=t=>typeof t=="boolean",Hr=t=>typeof t=="number",up=t=>!t&&t!==0||Jn(t)&&t.length===0||xi(t)&&!Object.keys(t).length,Ep=t=>typeof Element>"u"?!1:t instanceof Element,wb=t=>eu(t),QPe=t=>Xr(t)?!Number.isNaN(Number(t)):!1,l2=t=>t===window,n_=t=>As?window.requestAnimationFrame(t):setTimeout(t,16),xb=t=>As?window.cancelAnimationFrame(t):clearTimeout(t),SV=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),$g=t=>FB(t),DC=t=>Object.keys(t),jPe=t=>Object.entries(t),JP=(t,e,n)=>({get value(){return ll(t,e,n)},set value(r){UPe(t,e,r)}});class KPe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function pc(t,e){throw new KPe(`[${t}] ${e}`)}const Ile=(t="")=>t.split(" ").filter(e=>!!e.trim()),bp=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},pp=(t,e)=>{!t||!e.trim()||t.classList.add(...Ile(e))},yh=(t,e)=>{!t||!e.trim()||t.classList.remove(...Ile(e))},Sy=(t,e)=>{var n;if(!As||!t||!e)return"";let r=xp(e);r==="float"&&(r="cssFloat");try{const i=t.style[r];if(i)return i;const s=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return s?s[r]:""}catch{return t.style[r]}};function Ja(t,e="px"){if(!t)return"";if(Hr(t)||QPe(t))return`${t}${e}`;if(Xr(t))return t}const WPe=(t,e)=>{if(!As)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=Sy(t,n);return["scroll","auto","overlay"].some(i=>r.includes(i))},TV=(t,e)=>{if(!As)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(WPe(n,e))return n;n=n.parentNode}return n};let aR;const Ble=t=>{var e;if(!As)return 0;if(aR!==void 0)return aR;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",n.appendChild(i);const s=i.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),aR=r-s,aR};function Mle(t,e){if(!As)return;if(!e){t.scrollTop=0;return}const n=[];let r=e.offsetParent;for(;r!==null&&t!==r&&t.contains(r);)n.push(r),r=r.offsetParent;const i=e.offsetTop+n.reduce((o,d)=>o+d.offsetTop,0),s=i+e.offsetHeight,a=t.scrollTop,l=a+t.clientHeight;i<a?t.scrollTop=i:s>l&&(t.scrollTop=s-t.clientHeight)}function qPe(t,e,n,r,i){const s=Date.now();let a;const l=()=>{const d=Date.now()-s,p=vIe(d>r?r:d,e,n,r);l2(t)?t.scrollTo(window.pageXOffset,p):t.scrollTop=p,d<r?a=n_(l):typeof i=="function"&&i()};return l(),()=>{a&&xb(a)}}const PX=(t,e)=>l2(e)?t.ownerDocument.documentElement:e,FX=t=>l2(t)?window.scrollY:t.scrollTop,lR=t=>{if(!As||t==="")return null;if(Xr(t))try{return document.querySelector(t)}catch{return null}return t};/*! Element Plus Icons Vue v2.3.1 */var YPe=Ge({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),u0=YPe,XPe=Ge({name:"ArrowLeft",__name:"arrow-left",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),r_=XPe,ZPe=Ge({name:"ArrowRight",__name:"arrow-right",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),Uh=ZPe,JPe=Ge({name:"ArrowUp",__name:"arrow-up",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),IV=JPe,eFe=Ge({name:"Back",__name:"back",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),rt("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),tFe=eFe,nFe=Ge({name:"Calendar",__name:"calendar",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),rFe=nFe,iFe=Ge({name:"CaretRight",__name:"caret-right",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),Lle=iFe,sFe=Ge({name:"CaretTop",__name:"caret-top",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),oFe=sFe,aFe=Ge({name:"Check",__name:"check",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),GB=aFe,lFe=Ge({name:"CircleCheckFilled",__name:"circle-check-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),cFe=lFe,uFe=Ge({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),rt("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),BV=uFe,hFe=Ge({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),MV=hFe,dFe=Ge({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),rt("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),x_=dFe,fFe=Ge({name:"Clock",__name:"clock",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),rt("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),rt("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),Rle=fFe,pFe=Ge({name:"Close",__name:"close",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),NA=pFe,AFe=Ge({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),UC=AFe,gFe=Ge({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),zC=gFe,mFe=Ge({name:"Delete",__name:"delete",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),vFe=mFe,yFe=Ge({name:"Document",__name:"document",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),_Fe=yFe,bFe=Ge({name:"FullScreen",__name:"full-screen",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),wFe=bFe,xFe=Ge({name:"Hide",__name:"hide",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),rt("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),CFe=xFe,EFe=Ge({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),LV=EFe,SFe=Ge({name:"Loading",__name:"loading",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),C_=SFe,TFe=Ge({name:"Minus",__name:"minus",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),IFe=TFe,BFe=Ge({name:"MoreFilled",__name:"more-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),OX=BFe,MFe=Ge({name:"More",__name:"more",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),LFe=MFe,RFe=Ge({name:"PictureFilled",__name:"picture-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),PFe=RFe,FFe=Ge({name:"Plus",__name:"plus",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),Ple=FFe,OFe=Ge({name:"QuestionFilled",__name:"question-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),NFe=OFe,kFe=Ge({name:"RefreshLeft",__name:"refresh-left",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),DFe=kFe,UFe=Ge({name:"RefreshRight",__name:"refresh-right",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),zFe=UFe,$Fe=Ge({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),VFe=$Fe,HFe=Ge({name:"Search",__name:"search",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),GFe=HFe,QFe=Ge({name:"SortDown",__name:"sort-down",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),jFe=QFe,KFe=Ge({name:"SortUp",__name:"sort-up",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),WFe=KFe,qFe=Ge({name:"StarFilled",__name:"star-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),cR=qFe,YFe=Ge({name:"Star",__name:"star",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),XFe=YFe,ZFe=Ge({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Fle=ZFe,JFe=Ge({name:"View",__name:"view",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),eOe=JFe,tOe=Ge({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),c2=tOe,nOe=Ge({name:"ZoomIn",__name:"zoom-in",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),Ole=nOe,rOe=Ge({name:"ZoomOut",__name:"zoom-out",setup(t){return(e,n)=>(ve(),Ue("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[rt("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),iOe=rOe;const Nle="__epPropKey",Mt=t=>t,sOe=t=>xi(t)&&!!t[Nle],GA=(t,e)=>{if(!xi(t)||sOe(t))return t;const{values:n,required:r,default:i,type:s,validator:a}=t,o={type:s,required:!!r,validator:n||a?d=>{let p=!1,A=[];if(n&&(A=Array.from(n),vs(t,"default")&&A.push(i),p||(p=A.includes(d))),a&&(p||(p=a(d))),!p&&A.length>0){const v=[...new Set(A)].map(y=>JSON.stringify(y)).join(", ");Xxe(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${v}], got value ${JSON.stringify(d)}.`)}return p}:void 0,[Nle]:!0};return vs(t,"default")&&(o.default=i),o},Ln=t=>lO(Object.entries(t).map(([e,n])=>[e,GA(n,e)])),wo=Mt([String,Object,Function]),RV={Close:NA},PV={Close:NA,SuccessFilled:Fle,InfoFilled:LV,WarningFilled:c2,CircleCloseFilled:MV},i_={success:Fle,warning:c2,error:MV,info:LV},FV={validating:C_,success:BV,error:x_},_i=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},kle=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),oOe=(t,e)=>(t.install=n=>{n.directive(e,t)},t),Pa=t=>(t.install=co,t),u2=(...t)=>e=>{t.forEach(n=>{Gr(n)?n(e):n.value=e})},Fr={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},aOe=["year","years","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],zD=["sun","mon","tue","wed","thu","fri","sat"],Si="update:modelValue",Qo="change",zh="input",NX=Symbol("INSTALLED_KEY"),dm=["","default","small","large"],Dle=t=>["",...dm].includes(t);var lp=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(lp||{});function d3(t){return ya(t)&&t.type===_r}function lOe(t){return ya(t)&&t.type===gh}function cOe(t){return ya(t)&&!d3(t)&&!lOe(t)}const uOe=t=>{if(!ya(t))return{};const e=t.props||{},n=(ya(t.type)?t.type.props:void 0)||{},r={};return Object.keys(n).forEach(i=>{vs(n[i],"default")&&(r[i]=n[i].default)}),Object.keys(e).forEach(i=>{r[xp(i)]=e[i]}),r},hOe=t=>{if(!Jn(t)||t.length>1)throw new Error("expect to receive a single Vue element child");return t[0]},Hy=t=>{const e=Jn(t)?t:[t],n=[];return e.forEach(r=>{var i;Jn(r)?n.push(...Hy(r)):ya(r)&&Jn(r.children)?n.push(...Hy(r.children)):(n.push(r),ya(r)&&((i=r.component)!=null&&i.subTree)&&n.push(...Hy(r.component.subTree)))}),n},kX=t=>[...new Set(t)],Sf=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],OV=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),Ba=t=>t;function dOe(t){let e=0;const n=(...r)=>{e&&xb(e),e=n_(()=>{t(...r),e=0})};return n.cancel=()=>{xb(e),e=0},n}const fOe=["class","style"],pOe=/^on[A-Z]/,NV=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,r=oe(()=>((n==null?void 0:n.value)||[]).concat(fOe)),i=mi();return oe(i?()=>{var s;return lO(Object.entries((s=i.proxy)==null?void 0:s.$attrs).filter(([a])=>!r.value.includes(a)&&!(e&&pOe.test(a))))}:()=>({}))},Jc=({from:t,replacement:e,scope:n,version:r,ref:i,type:s="API"},a)=>{zt(()=>T(a),l=>{},{immediate:!0})},Ule=(t,e,n,r)=>{let i={offsetX:0,offsetY:0};const s=o=>{const d=o.clientX,p=o.clientY,{offsetX:A,offsetY:v}=i,y=t.value.getBoundingClientRect(),C=y.left,x=y.top,M=y.width,I=y.height,P=document.documentElement.clientWidth,F=document.documentElement.clientHeight,D=-C+A,V=-x+v,H=P-C-M+A,Q=F-x-I+v,G=te=>{let q=A+te.clientX-d,Y=v+te.clientY-p;r!=null&&r.value||(q=Math.min(Math.max(q,D),H),Y=Math.min(Math.max(Y,V),Q)),i={offsetX:q,offsetY:Y},t.value&&(t.value.style.transform=`translate(${Ja(q)}, ${Ja(Y)})`)},W=()=>{document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",G),document.addEventListener("mouseup",W)},a=()=>{e.value&&t.value&&e.value.addEventListener("mousedown",s)},l=()=>{e.value&&t.value&&e.value.removeEventListener("mousedown",s)};dr(()=>{bu(()=>{n.value?a():l()})}),Do(()=>{l()})};var AOe={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const gOe=t=>(e,n)=>mOe(e,n,T(t)),mOe=(t,e,n)=>ll(n,t,t).replace(/\{(\w+)\}/g,(r,i)=>{var s;return`${(s=e==null?void 0:e[i])!=null?s:`{${i}}`}`}),vOe=t=>{const e=oe(()=>T(t).name),n=Go(t)?t:Me(t);return{lang:e,locale:n,t:gOe(t)}},zle=Symbol("localeContextKey"),Ts=t=>{const e=t||mn(zle,Me());return vOe(oe(()=>e.value||AOe))},QT="el",yOe="is-",m1=(t,e,n,r,i)=>{let s=`${t}-${e}`;return n&&(s+=`-${n}`),r&&(s+=`__${r}`),i&&(s+=`--${i}`),s},$le=Symbol("namespaceContextKey"),kV=t=>{const e=t||(mi()?mn($le,Me(QT)):Me(QT));return oe(()=>T(e)||QT)},_n=(t,e)=>{const n=kV(e);return{namespace:n,b:(x="")=>m1(n.value,t,x,"",""),e:x=>x?m1(n.value,t,"",x,""):"",m:x=>x?m1(n.value,t,"","",x):"",be:(x,M)=>x&&M?m1(n.value,t,x,M,""):"",em:(x,M)=>x&&M?m1(n.value,t,"",x,M):"",bm:(x,M)=>x&&M?m1(n.value,t,x,"",M):"",bem:(x,M,I)=>x&&M&&I?m1(n.value,t,x,M,I):"",is:(x,...M)=>{const I=M.length>=1?M[0]:!0;return x&&I?`${yOe}${x}`:""},cssVar:x=>{const M={};for(const I in x)x[I]&&(M[`--${n.value}-${I}`]=x[I]);return M},cssVarName:x=>`--${n.value}-${x}`,cssVarBlock:x=>{const M={};for(const I in x)x[I]&&(M[`--${n.value}-${t}-${I}`]=x[I]);return M},cssVarBlockName:x=>`--${n.value}-${t}-${x}`}},DV=(t,e={})=>{Go(t)||pc("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||_n("popup"),r=Xse(()=>n.bm("parent","hidden"));if(!As||bp(document.body,r.value))return;let i=0,s=!1,a="0";const l=()=>{setTimeout(()=>{yh(document==null?void 0:document.body,r.value),s&&document&&(document.body.style.width=a)},200)};zt(t,o=>{if(!o){l();return}s=!bp(document.body,r.value),s&&(a=document.body.style.width),i=Ble(n.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,p=Sy(document.body,"overflowY");i>0&&(d||p==="scroll")&&s&&(document.body.style.width=`calc(100% - ${i}px)`),pp(document.body,r.value)}),kse(()=>l())},_Oe=GA({type:Mt(Boolean),default:null}),bOe=GA({type:Mt(Function)}),Vle=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,r=[e],i={[t]:_Oe,[n]:bOe};return{useModelToggle:({indicator:a,toggleReason:l,shouldHideWhenRouteChanges:o,shouldProceed:d,onShow:p,onHide:A})=>{const v=mi(),{emit:y}=v,C=v.props,x=oe(()=>Gr(C[n])),M=oe(()=>C[t]===null),I=Q=>{a.value!==!0&&(a.value=!0,l&&(l.value=Q),Gr(p)&&p(Q))},P=Q=>{a.value!==!1&&(a.value=!1,l&&(l.value=Q),Gr(A)&&A(Q))},F=Q=>{if(C.disabled===!0||Gr(d)&&!d())return;const G=x.value&&As;G&&y(e,!0),(M.value||!G)&&I(Q)},D=Q=>{if(C.disabled===!0||!As)return;const G=x.value&&As;G&&y(e,!1),(M.value||!G)&&P(Q)},V=Q=>{Sl(Q)&&(C.disabled&&Q?x.value&&y(e,!1):a.value!==Q&&(Q?I():P()))},H=()=>{a.value?D():F()};return zt(()=>C[t],V),o&&v.appContext.config.globalProperties.$route!==void 0&&zt(()=>({...v.proxy.$route}),()=>{o.value&&a.value&&D()}),dr(()=>{V(C[t])}),{hide:D,show:F,toggle:H,hasUpdateHandler:x}},useModelToggleProps:i,useModelToggleEmits:r}};Vle("modelValue");const Hle=t=>{const e=mi();return oe(()=>{var n,r;return(r=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:r[t]})};var Td="top",Sp="bottom",Tp="right",Id="left",UV="auto",QB=[Td,Sp,Tp,Id],$C="start",$I="end",wOe="clippingParents",Gle="viewport",kS="popper",xOe="reference",DX=QB.reduce(function(t,e){return t.concat([e+"-"+$C,e+"-"+$I])},[]),zb=[].concat(QB,[UV]).reduce(function(t,e){return t.concat([e,e+"-"+$C,e+"-"+$I])},[]),COe="beforeRead",EOe="read",SOe="afterRead",TOe="beforeMain",IOe="main",BOe="afterMain",MOe="beforeWrite",LOe="write",ROe="afterWrite",POe=[COe,EOe,SOe,TOe,IOe,BOe,MOe,LOe,ROe];function rm(t){return t?(t.nodeName||"").toLowerCase():null}function QA(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function VC(t){var e=QA(t).Element;return t instanceof e||t instanceof Element}function wp(t){var e=QA(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function zV(t){if(typeof ShadowRoot>"u")return!1;var e=QA(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function FOe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!wp(s)||!rm(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var l=i[a];l===!1?s.removeAttribute(a):s.setAttribute(a,l===!0?"":l)}))})}function OOe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=a.reduce(function(o,d){return o[d]="",o},{});!wp(i)||!rm(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(o){i.removeAttribute(o)}))})}}var Qle={name:"applyStyles",enabled:!0,phase:"write",fn:FOe,effect:OOe,requires:["computeStyles"]};function Xg(t){return t.split("-")[0]}var tb=Math.max,cO=Math.min,HC=Math.round;function GC(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,i=1;if(wp(t)&&e){var s=t.offsetHeight,a=t.offsetWidth;a>0&&(r=HC(n.width)/a||1),s>0&&(i=HC(n.height)/s||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function $V(t){var e=GC(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function jle(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&zV(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function qv(t){return QA(t).getComputedStyle(t)}function NOe(t){return["table","td","th"].indexOf(rm(t))>=0}function E_(t){return((VC(t)?t.ownerDocument:t.document)||window.document).documentElement}function h2(t){return rm(t)==="html"?t:t.assignedSlot||t.parentNode||(zV(t)?t.host:null)||E_(t)}function UX(t){return!wp(t)||qv(t).position==="fixed"?null:t.offsetParent}function kOe(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&wp(t)){var r=qv(t);if(r.position==="fixed")return null}var i=h2(t);for(zV(i)&&(i=i.host);wp(i)&&["html","body"].indexOf(rm(i))<0;){var s=qv(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function jB(t){for(var e=QA(t),n=UX(t);n&&NOe(n)&&qv(n).position==="static";)n=UX(n);return n&&(rm(n)==="html"||rm(n)==="body"&&qv(n).position==="static")?e:n||kOe(t)||e}function VV(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function jT(t,e,n){return tb(t,cO(e,n))}function DOe(t,e,n){var r=jT(t,e,n);return r>n?n:r}function Kle(){return{top:0,right:0,bottom:0,left:0}}function Wle(t){return Object.assign({},Kle(),t)}function qle(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var UOe=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Wle(typeof t!="number"?t:qle(t,QB))};function zOe(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,l=Xg(n.placement),o=VV(l),d=[Id,Tp].indexOf(l)>=0,p=d?"height":"width";if(!(!s||!a)){var A=UOe(i.padding,n),v=$V(s),y=o==="y"?Td:Id,C=o==="y"?Sp:Tp,x=n.rects.reference[p]+n.rects.reference[o]-a[o]-n.rects.popper[p],M=a[o]-n.rects.reference[o],I=jB(s),P=I?o==="y"?I.clientHeight||0:I.clientWidth||0:0,F=x/2-M/2,D=A[y],V=P-v[p]-A[C],H=P/2-v[p]/2+F,Q=jT(D,H,V),G=o;n.modifiersData[r]=(e={},e[G]=Q,e.centerOffset=Q-H,e)}}function $Oe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!jle(e.elements.popper,i)||(e.elements.arrow=i))}var VOe={name:"arrow",enabled:!0,phase:"main",fn:zOe,effect:$Oe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function QC(t){return t.split("-")[1]}var HOe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GOe(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:HC(e*i)/i||0,y:HC(n*i)/i||0}}function zX(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,l=t.position,o=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,A=t.isFixed,v=a.x,y=v===void 0?0:v,C=a.y,x=C===void 0?0:C,M=typeof p=="function"?p({x:y,y:x}):{x:y,y:x};y=M.x,x=M.y;var I=a.hasOwnProperty("x"),P=a.hasOwnProperty("y"),F=Id,D=Td,V=window;if(d){var H=jB(n),Q="clientHeight",G="clientWidth";if(H===QA(n)&&(H=E_(n),qv(H).position!=="static"&&l==="absolute"&&(Q="scrollHeight",G="scrollWidth")),H=H,i===Td||(i===Id||i===Tp)&&s===$I){D=Sp;var W=A&&H===V&&V.visualViewport?V.visualViewport.height:H[Q];x-=W-r.height,x*=o?1:-1}if(i===Id||(i===Td||i===Sp)&&s===$I){F=Tp;var te=A&&H===V&&V.visualViewport?V.visualViewport.width:H[G];y-=te-r.width,y*=o?1:-1}}var q=Object.assign({position:l},d&&HOe),Y=p===!0?GOe({x:y,y:x}):{x:y,y:x};if(y=Y.x,x=Y.y,o){var ee;return Object.assign({},q,(ee={},ee[D]=P?"0":"",ee[F]=I?"0":"",ee.transform=(V.devicePixelRatio||1)<=1?"translate("+y+"px, "+x+"px)":"translate3d("+y+"px, "+x+"px, 0)",ee))}return Object.assign({},q,(e={},e[D]=P?x+"px":"",e[F]=I?y+"px":"",e.transform="",e))}function QOe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,l=n.roundOffsets,o=l===void 0?!0:l,d={placement:Xg(e.placement),variation:QC(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,zX(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:o})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,zX(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Yle={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:QOe,data:{}},uR={passive:!0};function jOe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,l=a===void 0?!0:a,o=QA(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&d.forEach(function(p){p.addEventListener("scroll",n.update,uR)}),l&&o.addEventListener("resize",n.update,uR),function(){s&&d.forEach(function(p){p.removeEventListener("scroll",n.update,uR)}),l&&o.removeEventListener("resize",n.update,uR)}}var Xle={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jOe,data:{}},KOe={left:"right",right:"left",bottom:"top",top:"bottom"};function eF(t){return t.replace(/left|right|bottom|top/g,function(e){return KOe[e]})}var WOe={start:"end",end:"start"};function $X(t){return t.replace(/start|end/g,function(e){return WOe[e]})}function HV(t){var e=QA(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function GV(t){return GC(E_(t)).left+HV(t).scrollLeft}function qOe(t){var e=QA(t),n=E_(t),r=e.visualViewport,i=n.clientWidth,s=n.clientHeight,a=0,l=0;return r&&(i=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,l=r.offsetTop)),{width:i,height:s,x:a+GV(t),y:l}}function YOe(t){var e,n=E_(t),r=HV(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=tb(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=tb(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+GV(t),o=-r.scrollTop;return qv(i||n).direction==="rtl"&&(l+=tb(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:l,y:o}}function QV(t){var e=qv(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Zle(t){return["html","body","#document"].indexOf(rm(t))>=0?t.ownerDocument.body:wp(t)&&QV(t)?t:Zle(h2(t))}function KT(t,e){var n;e===void 0&&(e=[]);var r=Zle(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=QA(r),a=i?[s].concat(s.visualViewport||[],QV(r)?r:[]):r,l=e.concat(a);return i?l:l.concat(KT(h2(a)))}function f3(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function XOe(t){var e=GC(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function VX(t,e){return e===Gle?f3(qOe(t)):VC(e)?XOe(e):f3(YOe(E_(t)))}function ZOe(t){var e=KT(h2(t)),n=["absolute","fixed"].indexOf(qv(t).position)>=0,r=n&&wp(t)?jB(t):t;return VC(r)?e.filter(function(i){return VC(i)&&jle(i,r)&&rm(i)!=="body"}):[]}function JOe(t,e,n){var r=e==="clippingParents"?ZOe(t):[].concat(e),i=[].concat(r,[n]),s=i[0],a=i.reduce(function(l,o){var d=VX(t,o);return l.top=tb(d.top,l.top),l.right=cO(d.right,l.right),l.bottom=cO(d.bottom,l.bottom),l.left=tb(d.left,l.left),l},VX(t,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Jle(t){var e=t.reference,n=t.element,r=t.placement,i=r?Xg(r):null,s=r?QC(r):null,a=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,o;switch(i){case Td:o={x:a,y:e.y-n.height};break;case Sp:o={x:a,y:e.y+e.height};break;case Tp:o={x:e.x+e.width,y:l};break;case Id:o={x:e.x-n.width,y:l};break;default:o={x:e.x,y:e.y}}var d=i?VV(i):null;if(d!=null){var p=d==="y"?"height":"width";switch(s){case $C:o[d]=o[d]-(e[p]/2-n[p]/2);break;case $I:o[d]=o[d]+(e[p]/2-n[p]/2);break}}return o}function VI(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.boundary,a=s===void 0?wOe:s,l=n.rootBoundary,o=l===void 0?Gle:l,d=n.elementContext,p=d===void 0?kS:d,A=n.altBoundary,v=A===void 0?!1:A,y=n.padding,C=y===void 0?0:y,x=Wle(typeof C!="number"?C:qle(C,QB)),M=p===kS?xOe:kS,I=t.rects.popper,P=t.elements[v?M:p],F=JOe(VC(P)?P:P.contextElement||E_(t.elements.popper),a,o),D=GC(t.elements.reference),V=Jle({reference:D,element:I,strategy:"absolute",placement:i}),H=f3(Object.assign({},I,V)),Q=p===kS?H:D,G={top:F.top-Q.top+x.top,bottom:Q.bottom-F.bottom+x.bottom,left:F.left-Q.left+x.left,right:Q.right-F.right+x.right},W=t.modifiersData.offset;if(p===kS&&W){var te=W[i];Object.keys(G).forEach(function(q){var Y=[Tp,Sp].indexOf(q)>=0?1:-1,ee=[Td,Sp].indexOf(q)>=0?"y":"x";G[q]+=te[ee]*Y})}return G}function e5e(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,l=n.flipVariations,o=n.allowedAutoPlacements,d=o===void 0?zb:o,p=QC(r),A=p?l?DX:DX.filter(function(C){return QC(C)===p}):QB,v=A.filter(function(C){return d.indexOf(C)>=0});v.length===0&&(v=A);var y=v.reduce(function(C,x){return C[x]=VI(t,{placement:x,boundary:i,rootBoundary:s,padding:a})[Xg(x)],C},{});return Object.keys(y).sort(function(C,x){return y[C]-y[x]})}function t5e(t){if(Xg(t)===UV)return[];var e=eF(t);return[$X(t),e,$X(e)]}function n5e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,l=a===void 0?!0:a,o=n.fallbackPlacements,d=n.padding,p=n.boundary,A=n.rootBoundary,v=n.altBoundary,y=n.flipVariations,C=y===void 0?!0:y,x=n.allowedAutoPlacements,M=e.options.placement,I=Xg(M),P=I===M,F=o||(P||!C?[eF(M)]:t5e(M)),D=[M].concat(F).reduce(function(_e,$e){return _e.concat(Xg($e)===UV?e5e(e,{placement:$e,boundary:p,rootBoundary:A,padding:d,flipVariations:C,allowedAutoPlacements:x}):$e)},[]),V=e.rects.reference,H=e.rects.popper,Q=new Map,G=!0,W=D[0],te=0;te<D.length;te++){var q=D[te],Y=Xg(q),ee=QC(q)===$C,ce=[Td,Sp].indexOf(Y)>=0,se=ce?"width":"height",le=VI(e,{placement:q,boundary:p,rootBoundary:A,altBoundary:v,padding:d}),ie=ce?ee?Tp:Id:ee?Sp:Td;V[se]>H[se]&&(ie=eF(ie));var pe=eF(ie),ue=[];if(s&&ue.push(le[Y]<=0),l&&ue.push(le[ie]<=0,le[pe]<=0),ue.every(function(_e){return _e})){W=q,G=!1;break}Q.set(q,ue)}if(G)for(var me=C?3:1,Le=function(_e){var $e=D.find(function(Re){var Ie=Q.get(Re);if(Ie)return Ie.slice(0,_e).every(function(Ne){return Ne})});if($e)return W=$e,"break"},ae=me;ae>0;ae--){var be=Le(ae);if(be==="break")break}e.placement!==W&&(e.modifiersData[r]._skip=!0,e.placement=W,e.reset=!0)}}var r5e={name:"flip",enabled:!0,phase:"main",fn:n5e,requiresIfExists:["offset"],data:{_skip:!1}};function HX(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function GX(t){return[Td,Tp,Sp,Id].some(function(e){return t[e]>=0})}function i5e(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=VI(e,{elementContext:"reference"}),l=VI(e,{altBoundary:!0}),o=HX(a,r),d=HX(l,i,s),p=GX(o),A=GX(d);e.modifiersData[n]={referenceClippingOffsets:o,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:A},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":A})}var s5e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:i5e};function o5e(t,e,n){var r=Xg(t),i=[Id,Td].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],l=s[1];return a=a||0,l=(l||0)*i,[Id,Tp].indexOf(r)>=0?{x:l,y:a}:{x:a,y:l}}function a5e(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,a=zb.reduce(function(p,A){return p[A]=o5e(A,e.rects,s),p},{}),l=a[e.placement],o=l.x,d=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=o,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=a}var l5e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:a5e};function c5e(t){var e=t.state,n=t.name;e.modifiersData[n]=Jle({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var ece={name:"popperOffsets",enabled:!0,phase:"read",fn:c5e,data:{}};function u5e(t){return t==="x"?"y":"x"}function h5e(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,l=a===void 0?!1:a,o=n.boundary,d=n.rootBoundary,p=n.altBoundary,A=n.padding,v=n.tether,y=v===void 0?!0:v,C=n.tetherOffset,x=C===void 0?0:C,M=VI(e,{boundary:o,rootBoundary:d,padding:A,altBoundary:p}),I=Xg(e.placement),P=QC(e.placement),F=!P,D=VV(I),V=u5e(D),H=e.modifiersData.popperOffsets,Q=e.rects.reference,G=e.rects.popper,W=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,te=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),q=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Y={x:0,y:0};if(H){if(s){var ee,ce=D==="y"?Td:Id,se=D==="y"?Sp:Tp,le=D==="y"?"height":"width",ie=H[D],pe=ie+M[ce],ue=ie-M[se],me=y?-G[le]/2:0,Le=P===$C?Q[le]:G[le],ae=P===$C?-G[le]:-Q[le],be=e.elements.arrow,_e=y&&be?$V(be):{width:0,height:0},$e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Kle(),Re=$e[ce],Ie=$e[se],Ne=jT(0,Q[le],_e[le]),Je=F?Q[le]/2-me-Ne-Re-te.mainAxis:Le-Ne-Re-te.mainAxis,je=F?-Q[le]/2+me+Ne+Ie+te.mainAxis:ae+Ne+Ie+te.mainAxis,ft=e.elements.arrow&&jB(e.elements.arrow),Et=ft?D==="y"?ft.clientTop||0:ft.clientLeft||0:0,ke=(ee=q==null?void 0:q[D])!=null?ee:0,Ye=ie+Je-ke-Et,at=ie+je-ke,He=jT(y?cO(pe,Ye):pe,ie,y?tb(ue,at):ue);H[D]=He,Y[D]=He-ie}if(l){var Tt,Ut=D==="x"?Td:Id,Rt=D==="x"?Sp:Tp,Bt=H[V],Ht=V==="y"?"height":"width",xt=Bt+M[Ut],Zt=Bt-M[Rt],un=[Td,Id].indexOf(I)!==-1,Ft=(Tt=q==null?void 0:q[V])!=null?Tt:0,mt=un?xt:Bt-Q[Ht]-G[Ht]-Ft+te.altAxis,Be=un?Bt+Q[Ht]+G[Ht]-Ft-te.altAxis:Zt,ze=y&&un?DOe(mt,Bt,Be):jT(y?mt:xt,Bt,y?Be:Zt);H[V]=ze,Y[V]=ze-Bt}e.modifiersData[r]=Y}}var d5e={name:"preventOverflow",enabled:!0,phase:"main",fn:h5e,requiresIfExists:["offset"]};function f5e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function p5e(t){return t===QA(t)||!wp(t)?HV(t):f5e(t)}function A5e(t){var e=t.getBoundingClientRect(),n=HC(e.width)/t.offsetWidth||1,r=HC(e.height)/t.offsetHeight||1;return n!==1||r!==1}function g5e(t,e,n){n===void 0&&(n=!1);var r=wp(e),i=wp(e)&&A5e(e),s=E_(e),a=GC(t,i),l={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(r||!r&&!n)&&((rm(e)!=="body"||QV(s))&&(l=p5e(e)),wp(e)?(o=GC(e,!0),o.x+=e.clientLeft,o.y+=e.clientTop):s&&(o.x=GV(s))),{x:a.left+l.scrollLeft-o.x,y:a.top+l.scrollTop-o.y,width:a.width,height:a.height}}function m5e(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(l){if(!n.has(l)){var o=e.get(l);o&&i(o)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function v5e(t){var e=m5e(t);return POe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function y5e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function _5e(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var QX={placement:"bottom",modifiers:[],strategy:"absolute"};function jX(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function jV(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?QX:i;return function(a,l,o){o===void 0&&(o=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},QX,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],A=!1,v={state:d,setOptions:function(x){var M=typeof x=="function"?x(d.options):x;C(),d.options=Object.assign({},s,d.options,M),d.scrollParents={reference:VC(a)?KT(a):a.contextElement?KT(a.contextElement):[],popper:KT(l)};var I=v5e(_5e([].concat(r,d.options.modifiers)));return d.orderedModifiers=I.filter(function(P){return P.enabled}),y(),v.update()},forceUpdate:function(){if(!A){var x=d.elements,M=x.reference,I=x.popper;if(jX(M,I)){d.rects={reference:g5e(M,jB(I),d.options.strategy==="fixed"),popper:$V(I)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(G){return d.modifiersData[G.name]=Object.assign({},G.data)});for(var P=0;P<d.orderedModifiers.length;P++){if(d.reset===!0){d.reset=!1,P=-1;continue}var F=d.orderedModifiers[P],D=F.fn,V=F.options,H=V===void 0?{}:V,Q=F.name;typeof D=="function"&&(d=D({state:d,options:H,name:Q,instance:v})||d)}}}},update:y5e(function(){return new Promise(function(x){v.forceUpdate(),x(d)})}),destroy:function(){C(),A=!0}};if(!jX(a,l))return v;v.setOptions(o).then(function(x){!A&&o.onFirstUpdate&&o.onFirstUpdate(x)});function y(){d.orderedModifiers.forEach(function(x){var M=x.name,I=x.options,P=I===void 0?{}:I,F=x.effect;if(typeof F=="function"){var D=F({state:d,name:M,instance:v,options:P}),V=function(){};p.push(D||V)}})}function C(){p.forEach(function(x){return x()}),p=[]}return v}}jV();var b5e=[Xle,ece,Yle,Qle];jV({defaultModifiers:b5e});var w5e=[Xle,ece,Yle,Qle,l5e,r5e,d5e,VOe,s5e],x5e=jV({defaultModifiers:w5e});const C5e=(t,e,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:o})=>{const d=E5e(o);Object.assign(a.value,d)},requires:["computeStyles"]},i=oe(()=>{const{onFirstUpdate:o,placement:d,strategy:p,modifiers:A}=T(n);return{onFirstUpdate:o,placement:d||"bottom",strategy:p||"absolute",modifiers:[...A||[],r,{name:"applyStyles",enabled:!1}]}}),s=Ds(),a=Me({styles:{popper:{position:T(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return zt(i,o=>{const d=T(s);d&&d.setOptions(o)},{deep:!0}),zt([t,e],([o,d])=>{l(),!(!o||!d)&&(s.value=x5e(o,d,T(i)))}),Do(()=>{l()}),{state:oe(()=>{var o;return{...((o=T(s))==null?void 0:o.state)||{}}}),styles:oe(()=>T(a).styles),attributes:oe(()=>T(a).attributes),update:()=>{var o;return(o=T(s))==null?void 0:o.update()},forceUpdate:()=>{var o;return(o=T(s))==null?void 0:o.forceUpdate()},instanceRef:oe(()=>T(s))}};function E5e(t){const e=Object.keys(t.elements),n=lO(e.map(i=>[i,t.styles[i]||{}])),r=lO(e.map(i=>[i,t.attributes[i]]));return{styles:n,attributes:r}}const KV=t=>{if(!t)return{onClick:co,onMousedown:co,onMouseup:co};let e=!1,n=!1;return{onClick:a=>{e&&n&&t(a),e=n=!1},onMousedown:a=>{e=a.target===a.currentTarget},onMouseup:a=>{n=a.target===a.currentTarget}}},S5e=(t,e=0)=>{if(e===0)return t;const n=Me(!1);let r=0;const i=()=>{r&&clearTimeout(r),r=window.setTimeout(()=>{n.value=t.value},e)};return dr(i),zt(()=>t.value,s=>{s?i():n.value=s}),n};function KX(){let t;const e=(r,i)=>{n(),t=window.setTimeout(r,i)},n=()=>window.clearTimeout(t);return UB(()=>n()),{registerTimeout:e,cancelTimeout:n}}const WX={prefix:Math.floor(Math.random()*1e4),current:0},T5e=Symbol("elIdInjection"),WV=()=>mi()?mn(T5e,WX):WX,Hu=t=>{const e=WV(),n=kV();return oe(()=>T(t)||`${n.value}-id-${e.prefix}-${e.current++}`)};let wx=[];const qX=t=>{const e=t;e.key===Fr.esc&&wx.forEach(n=>n(e))},I5e=t=>{dr(()=>{wx.length===0&&document.addEventListener("keydown",qX),As&&wx.push(t)}),Do(()=>{wx=wx.filter(e=>e!==t),wx.length===0&&As&&document.removeEventListener("keydown",qX)})};let YX;const tce=()=>{const t=kV(),e=WV(),n=oe(()=>`${t.value}-popper-container-${e.prefix}`),r=oe(()=>`#${n.value}`);return{id:n,selector:r}},B5e=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},M5e=()=>{const{id:t,selector:e}=tce();return K5(()=>{As&&!YX&&!document.body.querySelector(e.value)&&(YX=B5e(t.value))}),{id:t,selector:e}},L5e=Ln({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),R5e=({showAfter:t,hideAfter:e,autoClose:n,open:r,close:i})=>{const{registerTimeout:s}=KX(),{registerTimeout:a,cancelTimeout:l}=KX();return{onOpen:p=>{s(()=>{r(p);const A=T(n);Hr(A)&&A>0&&a(()=>{i(p)},A)},T(t))},onClose:p=>{l(),s(()=>{i(p)},T(e))}}},nce=Symbol("elForwardRef"),P5e=t=>{Rr(nce,{setForwardRef:n=>{t.value=n}})},F5e=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),XX={current:0},ZX=Me(0),rce=2e3,JX=Symbol("elZIndexContextKey"),ice=Symbol("zIndexContextKey"),SE=t=>{const e=mi()?mn(JX,XX):XX,n=t||(mi()?mn(ice,void 0):void 0),r=oe(()=>{const a=T(n);return Hr(a)?a:rce}),i=oe(()=>r.value+ZX.value),s=()=>(e.current++,ZX.value=e.current,i.value);return!As&&mn(JX),{initialZIndex:r,currentZIndex:i,nextZIndex:s}},jC=Math.min,nb=Math.max,uO=Math.round,hR=Math.floor,s_=t=>({x:t,y:t}),O5e={left:"right",right:"left",bottom:"top",top:"bottom"},N5e={start:"end",end:"start"};function p3(t,e,n){return nb(t,jC(e,n))}function KB(t,e){return typeof t=="function"?t(e):t}function Cb(t){return t.split("-")[0]}function WB(t){return t.split("-")[1]}function sce(t){return t==="x"?"y":"x"}function qV(t){return t==="y"?"height":"width"}function d2(t){return["top","bottom"].includes(Cb(t))?"y":"x"}function YV(t){return sce(d2(t))}function k5e(t,e,n){n===void 0&&(n=!1);const r=WB(t),i=YV(t),s=qV(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=hO(a)),[a,hO(a)]}function D5e(t){const e=hO(t);return[A3(t),e,A3(e)]}function A3(t){return t.replace(/start|end/g,e=>N5e[e])}function U5e(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:a;default:return[]}}function z5e(t,e,n,r){const i=WB(t);let s=U5e(Cb(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(A3)))),s}function hO(t){return t.replace(/left|right|bottom|top/g,e=>O5e[e])}function $5e(t){return{top:0,right:0,bottom:0,left:0,...t}}function oce(t){return typeof t!="number"?$5e(t):{top:t,right:t,bottom:t,left:t}}function dO(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function eZ(t,e,n){let{reference:r,floating:i}=t;const s=d2(e),a=YV(e),l=qV(a),o=Cb(e),d=s==="y",p=r.x+r.width/2-i.width/2,A=r.y+r.height/2-i.height/2,v=r[l]/2-i[l]/2;let y;switch(o){case"top":y={x:p,y:r.y-i.height};break;case"bottom":y={x:p,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:A};break;case"left":y={x:r.x-i.width,y:A};break;default:y={x:r.x,y:r.y}}switch(WB(e)){case"start":y[a]-=v*(n&&d?-1:1);break;case"end":y[a]+=v*(n&&d?-1:1);break}return y}const V5e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,l=s.filter(Boolean),o=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:A}=eZ(d,r,o),v=r,y={},C=0;for(let x=0;x<l.length;x++){const{name:M,fn:I}=l[x],{x:P,y:F,data:D,reset:V}=await I({x:p,y:A,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:d,platform:a,elements:{reference:t,floating:e}});p=P??p,A=F??A,y={...y,[M]:{...y[M],...D}},V&&C<=50&&(C++,typeof V=="object"&&(V.placement&&(v=V.placement),V.rects&&(d=V.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):V.rects),{x:p,y:A}=eZ(d,v,o)),x=-1)}return{x:p,y:A,placement:v,strategy:i,middlewareData:y}};async function XV(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:l,strategy:o}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:A="floating",altBoundary:v=!1,padding:y=0}=KB(e,t),C=oce(y),M=l[v?A==="floating"?"reference":"floating":A],I=dO(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(M)))==null||n?M:M.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:p,strategy:o})),P=A==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,F=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),D=await(s.isElement==null?void 0:s.isElement(F))?await(s.getScale==null?void 0:s.getScale(F))||{x:1,y:1}:{x:1,y:1},V=dO(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:P,offsetParent:F,strategy:o}):P);return{top:(I.top-V.top+C.top)/D.y,bottom:(V.bottom-I.bottom+C.bottom)/D.y,left:(I.left-V.left+C.left)/D.x,right:(V.right-I.right+C.right)/D.x}}const H5e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:l,middlewareData:o}=e,{element:d,padding:p=0}=KB(t,e)||{};if(d==null)return{};const A=oce(p),v={x:n,y:r},y=YV(i),C=qV(y),x=await a.getDimensions(d),M=y==="y",I=M?"top":"left",P=M?"bottom":"right",F=M?"clientHeight":"clientWidth",D=s.reference[C]+s.reference[y]-v[y]-s.floating[C],V=v[y]-s.reference[y],H=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let Q=H?H[F]:0;(!Q||!await(a.isElement==null?void 0:a.isElement(H)))&&(Q=l.floating[F]||s.floating[C]);const G=D/2-V/2,W=Q/2-x[C]/2-1,te=jC(A[I],W),q=jC(A[P],W),Y=te,ee=Q-x[C]-q,ce=Q/2-x[C]/2+G,se=p3(Y,ce,ee),le=!o.arrow&&WB(i)!=null&&ce!==se&&s.reference[C]/2-(ce<Y?te:q)-x[C]/2<0,ie=le?ce<Y?ce-Y:ce-ee:0;return{[y]:v[y]+ie,data:{[y]:se,centerOffset:ce-se-ie,...le&&{alignmentOffset:ie}},reset:le}}}),G5e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:l,platform:o,elements:d}=e,{mainAxis:p=!0,crossAxis:A=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:x=!0,...M}=KB(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const I=Cb(i),P=Cb(l)===l,F=await(o.isRTL==null?void 0:o.isRTL(d.floating)),D=v||(P||!x?[hO(l)]:D5e(l));!v&&C!=="none"&&D.push(...z5e(l,x,C,F));const V=[l,...D],H=await XV(e,M),Q=[];let G=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&Q.push(H[I]),A){const Y=k5e(i,a,F);Q.push(H[Y[0]],H[Y[1]])}if(G=[...G,{placement:i,overflows:Q}],!Q.every(Y=>Y<=0)){var W,te;const Y=(((W=s.flip)==null?void 0:W.index)||0)+1,ee=V[Y];if(ee)return{data:{index:Y,overflows:G},reset:{placement:ee}};let ce=(te=G.filter(se=>se.overflows[0]<=0).sort((se,le)=>se.overflows[1]-le.overflows[1])[0])==null?void 0:te.placement;if(!ce)switch(y){case"bestFit":{var q;const se=(q=G.map(le=>[le.placement,le.overflows.filter(ie=>ie>0).reduce((ie,pe)=>ie+pe,0)]).sort((le,ie)=>le[1]-ie[1])[0])==null?void 0:q[0];se&&(ce=se);break}case"initialPlacement":ce=l;break}if(i!==ce)return{reset:{placement:ce}}}return{}}}};async function Q5e(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Cb(n),l=WB(n),o=d2(n)==="y",d=["left","top"].includes(a)?-1:1,p=s&&o?-1:1,A=KB(e,t);let{mainAxis:v,crossAxis:y,alignmentAxis:C}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...A};return l&&typeof C=="number"&&(y=l==="end"?C*-1:C),o?{x:y*p,y:v*d}:{x:v*d,y:y*p}}const j5e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:l}=e,o=await Q5e(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+o.x,y:s+o.y,data:{...o,placement:a}}}}},K5e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:M=>{let{x:I,y:P}=M;return{x:I,y:P}}},...o}=KB(t,e),d={x:n,y:r},p=await XV(e,o),A=d2(Cb(i)),v=sce(A);let y=d[v],C=d[A];if(s){const M=v==="y"?"top":"left",I=v==="y"?"bottom":"right",P=y+p[M],F=y-p[I];y=p3(P,y,F)}if(a){const M=A==="y"?"top":"left",I=A==="y"?"bottom":"right",P=C+p[M],F=C-p[I];C=p3(P,C,F)}const x=l.fn({...e,[v]:y,[A]:C});return{...x,data:{x:x.x-n,y:x.y-r}}}}};function TE(t){return ace(t)?(t.nodeName||"").toLowerCase():"#document"}function Lf(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function h0(t){var e;return(e=(ace(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ace(t){return t instanceof Node||t instanceof Lf(t).Node}function im(t){return t instanceof Element||t instanceof Lf(t).Element}function sm(t){return t instanceof HTMLElement||t instanceof Lf(t).HTMLElement}function tZ(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Lf(t).ShadowRoot}function qB(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=kA(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function W5e(t){return["table","td","th"].includes(TE(t))}function ZV(t){const e=JV(),n=kA(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function q5e(t){let e=o_(t);for(;sm(e)&&!KC(e);){if(ZV(e))return e;e=o_(e)}return null}function JV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function KC(t){return["html","body","#document"].includes(TE(t))}function kA(t){return Lf(t).getComputedStyle(t)}function f2(t){return im(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function o_(t){if(TE(t)==="html")return t;const e=t.assignedSlot||t.parentNode||tZ(t)&&t.host||h0(t);return tZ(e)?e.host:e}function lce(t){const e=o_(t);return KC(e)?t.ownerDocument?t.ownerDocument.body:t.body:sm(e)&&qB(e)?e:lce(e)}function HI(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=lce(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=Lf(i);return s?e.concat(a,a.visualViewport||[],qB(i)?i:[],a.frameElement&&n?HI(a.frameElement):[]):e.concat(i,HI(i,[],n))}function cce(t){const e=kA(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=sm(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,l=uO(n)!==s||uO(r)!==a;return l&&(n=s,r=a),{width:n,height:r,$:l}}function eH(t){return im(t)?t:t.contextElement}function uC(t){const e=eH(t);if(!sm(e))return s_(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=cce(e);let a=(s?uO(n.width):n.width)/r,l=(s?uO(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Y5e=s_(0);function uce(t){const e=Lf(t);return!JV()||!e.visualViewport?Y5e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function X5e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Lf(t)?!1:e}function Eb(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=eH(t);let a=s_(1);e&&(r?im(r)&&(a=uC(r)):a=uC(t));const l=X5e(s,n,r)?uce(s):s_(0);let o=(i.left+l.x)/a.x,d=(i.top+l.y)/a.y,p=i.width/a.x,A=i.height/a.y;if(s){const v=Lf(s),y=r&&im(r)?Lf(r):r;let C=v,x=C.frameElement;for(;x&&r&&y!==C;){const M=uC(x),I=x.getBoundingClientRect(),P=kA(x),F=I.left+(x.clientLeft+parseFloat(P.paddingLeft))*M.x,D=I.top+(x.clientTop+parseFloat(P.paddingTop))*M.y;o*=M.x,d*=M.y,p*=M.x,A*=M.y,o+=F,d+=D,C=Lf(x),x=C.frameElement}}return dO({width:p,height:A,x:o,y:d})}const Z5e=[":popover-open",":modal"];function tH(t){return Z5e.some(e=>{try{return t.matches(e)}catch{return!1}})}function J5e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=h0(r),l=e?tH(e.floating):!1;if(r===a||l&&s)return n;let o={scrollLeft:0,scrollTop:0},d=s_(1);const p=s_(0),A=sm(r);if((A||!A&&!s)&&((TE(r)!=="body"||qB(a))&&(o=f2(r)),sm(r))){const v=Eb(r);d=uC(r),p.x=v.x+r.clientLeft,p.y=v.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-o.scrollLeft*d.x+p.x,y:n.y*d.y-o.scrollTop*d.y+p.y}}function e2e(t){return Array.from(t.getClientRects())}function hce(t){return Eb(h0(t)).left+f2(t).scrollLeft}function t2e(t){const e=h0(t),n=f2(t),r=t.ownerDocument.body,i=nb(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=nb(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+hce(t);const l=-n.scrollTop;return kA(r).direction==="rtl"&&(a+=nb(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:l}}function n2e(t,e){const n=Lf(t),r=h0(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,l=0,o=0;if(i){s=i.width,a=i.height;const d=JV();(!d||d&&e==="fixed")&&(l=i.offsetLeft,o=i.offsetTop)}return{width:s,height:a,x:l,y:o}}function r2e(t,e){const n=Eb(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=sm(t)?uC(t):s_(1),a=t.clientWidth*s.x,l=t.clientHeight*s.y,o=i*s.x,d=r*s.y;return{width:a,height:l,x:o,y:d}}function nZ(t,e,n){let r;if(e==="viewport")r=n2e(t,n);else if(e==="document")r=t2e(h0(t));else if(im(e))r=r2e(e,n);else{const i=uce(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return dO(r)}function dce(t,e){const n=o_(t);return n===e||!im(n)||KC(n)?!1:kA(n).position==="fixed"||dce(n,e)}function i2e(t,e){const n=e.get(t);if(n)return n;let r=HI(t,[],!1).filter(l=>im(l)&&TE(l)!=="body"),i=null;const s=kA(t).position==="fixed";let a=s?o_(t):t;for(;im(a)&&!KC(a);){const l=kA(a),o=ZV(a);!o&&l.position==="fixed"&&(i=null),(s?!o&&!i:!o&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qB(a)&&!o&&dce(t,a))?r=r.filter(p=>p!==a):i=l,a=o_(a)}return e.set(t,r),r}function s2e(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?tH(e)?[]:i2e(e,this._c):[].concat(n),r],l=a[0],o=a.reduce((d,p)=>{const A=nZ(e,p,i);return d.top=nb(A.top,d.top),d.right=jC(A.right,d.right),d.bottom=jC(A.bottom,d.bottom),d.left=nb(A.left,d.left),d},nZ(e,l,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function o2e(t){const{width:e,height:n}=cce(t);return{width:e,height:n}}function a2e(t,e,n){const r=sm(e),i=h0(e),s=n==="fixed",a=Eb(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const o=s_(0);if(r||!r&&!s)if((TE(e)!=="body"||qB(i))&&(l=f2(e)),r){const A=Eb(e,!0,s,e);o.x=A.x+e.clientLeft,o.y=A.y+e.clientTop}else i&&(o.x=hce(i));const d=a.left+l.scrollLeft-o.x,p=a.top+l.scrollTop-o.y;return{x:d,y:p,width:a.width,height:a.height}}function $D(t){return kA(t).position==="static"}function rZ(t,e){return!sm(t)||kA(t).position==="fixed"?null:e?e(t):t.offsetParent}function fce(t,e){const n=Lf(t);if(tH(t))return n;if(!sm(t)){let i=o_(t);for(;i&&!KC(i);){if(im(i)&&!$D(i))return i;i=o_(i)}return n}let r=rZ(t,e);for(;r&&W5e(r)&&$D(r);)r=rZ(r,e);return r&&KC(r)&&$D(r)&&!ZV(r)?n:r||q5e(t)||n}const l2e=async function(t){const e=this.getOffsetParent||fce,n=this.getDimensions,r=await n(t.floating);return{reference:a2e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function c2e(t){return kA(t).direction==="rtl"}const u2e={convertOffsetParentRelativeRectToViewportRelativeRect:J5e,getDocumentElement:h0,getClippingRect:s2e,getOffsetParent:fce,getElementRects:l2e,getClientRects:e2e,getDimensions:o2e,getScale:uC,isElement:im,isRTL:c2e};function h2e(t,e){let n=null,r;const i=h0(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,o){l===void 0&&(l=!1),o===void 0&&(o=1),s();const{left:d,top:p,width:A,height:v}=t.getBoundingClientRect();if(l||e(),!A||!v)return;const y=hR(p),C=hR(i.clientWidth-(d+A)),x=hR(i.clientHeight-(p+v)),M=hR(d),P={rootMargin:-y+"px "+-C+"px "+-x+"px "+-M+"px",threshold:nb(0,jC(1,o))||1};let F=!0;function D(V){const H=V[0].intersectionRatio;if(H!==o){if(!F)return a();H?a(!1,H):r=setTimeout(()=>{a(!1,1e-7)},1e3)}F=!1}try{n=new IntersectionObserver(D,{...P,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,P)}n.observe(t)}return a(!0),s}function d2e(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:o=!1}=r,d=eH(t),p=i||s?[...d?HI(d):[],...HI(e)]:[];p.forEach(I=>{i&&I.addEventListener("scroll",n,{passive:!0}),s&&I.addEventListener("resize",n)});const A=d&&l?h2e(d,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(I=>{let[P]=I;P&&P.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var F;(F=y)==null||F.observe(e)})),n()}),d&&!o&&y.observe(d),y.observe(e));let C,x=o?Eb(t):null;o&&M();function M(){const I=Eb(t);x&&(I.x!==x.x||I.y!==x.y||I.width!==x.width||I.height!==x.height)&&n(),x=I,C=requestAnimationFrame(M)}return n(),()=>{var I;p.forEach(P=>{i&&P.removeEventListener("scroll",n),s&&P.removeEventListener("resize",n)}),A==null||A(),(I=y)==null||I.disconnect(),y=null,o&&cancelAnimationFrame(C)}}const f2e=XV,pce=j5e,p2e=K5e,A2e=G5e,Ace=H5e,gce=(t,e,n)=>{const r=new Map,i={platform:u2e,...n},s={...i.platform,_c:r};return V5e(t,e,{...i,platform:s})};Ln({});const g2e=t=>{if(!As)return;if(!t)return t;const e=xd(t);return e||(Go(t)?e:t)},m2e=({middleware:t,placement:e,strategy:n})=>{const r=Me(),i=Me(),s=Me(),a=Me(),l=Me({}),o={x:s,y:a,placement:e,strategy:n,middlewareData:l},d=async()=>{if(!As)return;const p=g2e(r),A=xd(i);if(!p||!A)return;const v=await gce(p,A,{placement:T(e),strategy:T(n),middleware:T(t)});DC(o).forEach(y=>{o[y].value=v[y]})};return dr(()=>{bu(()=>{d()})}),{...o,update:d,referenceRef:r,contentRef:i}},v2e=({arrowRef:t,padding:e})=>({name:"arrow",options:{element:t,padding:e},fn(n){const r=T(t);return r?Ace({element:r,padding:e}).fn(n):{}}});function y2e(t){const e=Me();function n(){if(t.value==null)return;const{selectionStart:i,selectionEnd:s,value:a}=t.value;if(i==null||s==null)return;const l=a.slice(0,Math.max(0,i)),o=a.slice(Math.max(0,s));e.value={selectionStart:i,selectionEnd:s,value:a,beforeTxt:l,afterTxt:o}}function r(){if(t.value==null||e.value==null)return;const{value:i}=t.value,{beforeTxt:s,afterTxt:a,selectionStart:l}=e.value;if(s==null||a==null||l==null)return;let o=i.length;if(i.endsWith(a))o=i.length-a.length;else if(i.startsWith(s))o=s.length;else{const d=s[l-1],p=i.indexOf(d,l-1);p!==-1&&(o=p+1)}t.value.setSelectionRange(o,o)}return[n,r]}const _2e=(t,e,n)=>Hy(t.subTree).filter(s=>{var a;return ya(s)&&((a=s.type)==null?void 0:a.name)===e&&!!s.component}).map(s=>s.component.uid).map(s=>n[s]).filter(s=>!!s),nH=(t,e)=>{const n={},r=Ds([]);return{children:r,addChild:a=>{n[a.uid]=a,r.value=_2e(t,e,n)},removeChild:a=>{delete n[a],r.value=r.value.filter(l=>l.uid!==a)}}},Nc=GA({type:String,values:dm,required:!1}),mce=Symbol("size"),b2e=()=>{const t=mn(mce,{});return oe(()=>T(t.size)||"")};function p2(t,{afterFocus:e,beforeBlur:n,afterBlur:r}={}){const i=mi(),{emit:s}=i,a=Ds(),l=Me(!1),o=A=>{l.value||(l.value=!0,s("focus",A),e==null||e())},d=A=>{var v;Gr(n)&&n(A)||A.relatedTarget&&((v=a.value)!=null&&v.contains(A.relatedTarget))||(l.value=!1,s("blur",A),r==null||r())},p=()=>{var A;(A=t.value)==null||A.focus()};return zt(a,A=>{A&&A.setAttribute("tabindex","-1")}),Vo(a,"click",p),{wrapperRef:a,isFocused:l,handleFocus:o,handleBlur:d}}const w2e=["",void 0,null],x2e=void 0,IE=Ln({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:t=>Gr(t)?!t():!t}}),A2=(t,e)=>{let n=YB();n.value||(n=Me({}));const r=oe(()=>t.emptyValues||n.value.emptyValues||w2e),i=oe(()=>Gr(t.valueOnClear)?t.valueOnClear():t.valueOnClear!==void 0?t.valueOnClear:Gr(n.value.valueOnClear)?n.value.valueOnClear():n.value.valueOnClear!==void 0?n.value.valueOnClear:e!==void 0?e:x2e),s=a=>r.value.includes(a);return r.value.includes(i.value),{emptyValues:r,valueOnClear:i,isEmptyValue:s}},C2e=Ln({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Eu=t=>Gg(C2e,t),vce=Symbol(),fO=Me();function YB(t,e=void 0){const n=mi()?mn(vce,fO):fO;return t?oe(()=>{var r,i;return(i=(r=n.value)==null?void 0:r[t])!=null?i:e}):n}function g2(t,e){const n=YB(),r=_n(t,oe(()=>{var l;return((l=n.value)==null?void 0:l.namespace)||QT})),i=Ts(oe(()=>{var l;return(l=n.value)==null?void 0:l.locale})),s=SE(oe(()=>{var l;return((l=n.value)==null?void 0:l.zIndex)||rce})),a=oe(()=>{var l;return T(e)||((l=n.value)==null?void 0:l.size)||""});return rH(oe(()=>T(n)||{})),{ns:r,locale:i,zIndex:s,size:a}}const rH=(t,e,n=!1)=>{var r;const i=!!mi(),s=i?YB():void 0,a=(r=e==null?void 0:e.provide)!=null?r:i?Rr:void 0;if(!a)return;const l=oe(()=>{const o=T(t);return s!=null&&s.value?E2e(s.value,o):o});return a(vce,l),a(zle,oe(()=>l.value.locale)),a($le,oe(()=>l.value.namespace)),a(ice,oe(()=>l.value.zIndex)),a(mce,{size:oe(()=>l.value.size||"")}),(n||!fO.value)&&(fO.value=l.value),l},E2e=(t,e)=>{const n=[...new Set([...DC(t),...DC(e)])],r={};for(const i of n)r[i]=e[i]!==void 0?e[i]:t[i];return r},S2e=Ln({a11y:{type:Boolean,default:!0},locale:{type:Mt(Object)},size:Nc,button:{type:Mt(Object)},experimentalFeatures:{type:Mt(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Mt(Object)},zIndex:Number,namespace:{type:String,default:"el"},...IE}),g3={},T2e=Ge({name:"ElConfigProvider",props:S2e,setup(t,{slots:e}){zt(()=>t.message,r=>{Object.assign(g3,r??{})},{immediate:!0,deep:!0});const n=rH(t);return()=>kt(e,"default",{config:n==null?void 0:n.value})}}),I2e=_i(T2e),B2e="2.7.2",M2e=(t=[])=>({version:B2e,install:(n,r)=>{n[NX]||(n[NX]=!0,t.forEach(i=>n.use(i)),r&&rH(r,n,!0))}}),L2e=Ln({zIndex:{type:Mt([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),R2e={scroll:({scrollTop:t,fixed:e})=>Hr(t)&&Sl(e),[Qo]:t=>Sl(t)};var Fn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};const yce="ElAffix",P2e=Ge({name:yce}),F2e=Ge({...P2e,props:L2e,emits:R2e,setup(t,{expose:e,emit:n}){const r=t,i=_n("affix"),s=Ds(),a=Ds(),l=Ds(),{height:o}=gIe(),{height:d,width:p,top:A,bottom:v,update:y}=YY(a,{windowScroll:!1}),C=YY(s),x=Me(!1),M=Me(0),I=Me(0),P=oe(()=>({height:x.value?`${d.value}px`:"",width:x.value?`${p.value}px`:""})),F=oe(()=>{if(!x.value)return{};const H=r.offset?Ja(r.offset):0;return{height:`${d.value}px`,width:`${p.value}px`,top:r.position==="top"?H:"",bottom:r.position==="bottom"?H:"",transform:I.value?`translateY(${I.value}px)`:"",zIndex:r.zIndex}}),D=()=>{if(l.value)if(M.value=l.value instanceof Window?document.documentElement.scrollTop:l.value.scrollTop||0,r.position==="top")if(r.target){const H=C.bottom.value-r.offset-d.value;x.value=r.offset>A.value&&C.bottom.value>0,I.value=H<0?H:0}else x.value=r.offset>A.value;else if(r.target){const H=o.value-C.top.value-r.offset-d.value;x.value=o.value-r.offset<v.value&&o.value>C.top.value,I.value=H<0?-H:0}else x.value=o.value-r.offset<v.value},V=()=>{y(),n("scroll",{scrollTop:M.value,fixed:x.value})};return zt(x,H=>n("change",H)),dr(()=>{var H;r.target?(s.value=(H=document.querySelector(r.target))!=null?H:void 0,s.value||pc(yce,`Target does not exist: ${r.target}`)):s.value=document.documentElement,l.value=TV(a.value,!0),y()}),Vo(l,"scroll",V),bu(D),e({update:D,updateRoot:y}),(H,Q)=>(ve(),Ue("div",{ref_key:"root",ref:a,class:xe(T(i).b()),style:vr(T(P))},[rt("div",{class:xe({[T(i).m("fixed")]:x.value}),style:vr(T(F))},[kt(H.$slots,"default")],6)],6))}});var O2e=Fn(F2e,[["__file","affix.vue"]]);const N2e=_i(O2e),k2e=Ln({size:{type:Mt([Number,String])},color:{type:String}}),D2e=Ge({name:"ElIcon",inheritAttrs:!1}),U2e=Ge({...D2e,props:k2e,setup(t){const e=t,n=_n("icon"),r=oe(()=>{const{size:i,color:s}=e;return!i&&!s?{}:{fontSize:Cl(i)?void 0:Ja(i),"--color":s}});return(i,s)=>(ve(),Ue("i",Gi({class:T(n).b(),style:T(r)},i.$attrs),[kt(i.$slots,"default")],16))}});var z2e=Fn(U2e,[["__file","icon.vue"]]);const mr=_i(z2e),$2e=["light","dark"],V2e=Ln({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:DC(i_),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:$2e,default:"light"}}),H2e={close:t=>t instanceof MouseEvent},G2e=Ge({name:"ElAlert"}),Q2e=Ge({...G2e,props:V2e,emits:H2e,setup(t,{emit:e}){const n=t,{Close:r}=PV,i=Uc(),s=_n("alert"),a=Me(!0),l=oe(()=>i_[n.type]),o=oe(()=>[s.e("icon"),{[s.is("big")]:!!n.description||!!i.default}]),d=oe(()=>({"with-description":n.description||i.default})),p=A=>{a.value=!1,e("close",A)};return(A,v)=>(ve(),qt(fc,{name:T(s).b("fade"),persisted:""},{default:It(()=>[ci(rt("div",{class:xe([T(s).b(),T(s).m(A.type),T(s).is("center",A.center),T(s).is(A.effect)]),role:"alert"},[A.showIcon&&T(l)?(ve(),qt(T(mr),{key:0,class:xe(T(o))},{default:It(()=>[(ve(),qt(Mi(T(l))))]),_:1},8,["class"])):wt("v-if",!0),rt("div",{class:xe(T(s).e("content"))},[A.title||A.$slots.title?(ve(),Ue("span",{key:0,class:xe([T(s).e("title"),T(d)])},[kt(A.$slots,"title",{},()=>[gs(Nn(A.title),1)])],2)):wt("v-if",!0),A.$slots.default||A.description?(ve(),Ue("p",{key:1,class:xe(T(s).e("description"))},[kt(A.$slots,"default",{},()=>[gs(Nn(A.description),1)])],2)):wt("v-if",!0),A.closable?(ve(),Ue(_r,{key:2},[A.closeText?(ve(),Ue("div",{key:0,class:xe([T(s).e("close-btn"),T(s).is("customed")]),onClick:p},Nn(A.closeText),3)):(ve(),qt(T(mr),{key:1,class:xe(T(s).e("close-btn")),onClick:p},{default:It(()=>[pt(T(r))]),_:1},8,["class"]))],64)):wt("v-if",!0)],2)],2),[[Hs,a.value]])]),_:3},8,["name"]))}});var j2e=Fn(Q2e,[["__file","alert.vue"]]);const K2e=_i(j2e),$b=Symbol("formContextKey"),om=Symbol("formItemContextKey"),Gl=(t,e={})=>{const n=Me(void 0),r=e.prop?n:Hle("size"),i=e.global?n:b2e(),s=e.form?{size:void 0}:mn($b,void 0),a=e.formItem?{size:void 0}:mn(om,void 0);return oe(()=>r.value||T(t)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||i.value||"")},jh=t=>{const e=Hle("disabled"),n=mn($b,void 0);return oe(()=>e.value||T(t)||(n==null?void 0:n.disabled)||!1)},bh=()=>{const t=mn($b,void 0),e=mn(om,void 0);return{form:t,formItem:e}},jA=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=Me(!1)),r||(r=Me(!1));const i=Me();let s;const a=oe(()=>{var l;return!!(!(t.label||t.ariaLabel)&&e&&e.inputIds&&((l=e.inputIds)==null?void 0:l.length)<=1)});return dr(()=>{s=zt([Io(t,"id"),n],([l,o])=>{const d=l??(o?void 0:Hu().value);d!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(r!=null&&r.value)&&!o&&d&&e.addInputId(d)),i.value=d)},{immediate:!0})}),Ss(()=>{s&&s(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:a,inputId:i}},W2e=Ln({size:{type:String,values:dm},disabled:Boolean}),q2e=Ln({...W2e,model:Object,rules:{type:Mt(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),Y2e={validate:(t,e,n)=>(Jn(t)||Xr(t))&&Sl(e)&&Xr(n)};function X2e(){const t=Me([]),e=oe(()=>{if(!t.value.length)return"0";const s=Math.max(...t.value);return s?`${s}px`:""});function n(s){const a=t.value.indexOf(s);return a===-1&&e.value,a}function r(s,a){if(s&&a){const l=n(a);t.value.splice(l,1,s)}else s&&t.value.push(s)}function i(s){const a=n(s);a>-1&&t.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:i}}const dR=(t,e)=>{const n=t_(e);return n.length>0?t.filter(r=>r.prop&&n.includes(r.prop)):t},Z2e="ElForm",J2e=Ge({name:Z2e}),eNe=Ge({...J2e,props:q2e,emits:Y2e,setup(t,{expose:e,emit:n}){const r=t,i=[],s=Gl(),a=_n("form"),l=oe(()=>{const{labelPosition:F,inline:D}=r;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${F}`)]:F,[a.m("inline")]:D}]}),o=F=>i.find(D=>D.prop===F),d=F=>{i.push(F)},p=F=>{F.prop&&i.splice(i.indexOf(F),1)},A=(F=[])=>{r.model&&dR(i,F).forEach(D=>D.resetField())},v=(F=[])=>{dR(i,F).forEach(D=>D.clearValidate())},y=oe(()=>!!r.model),C=F=>{if(i.length===0)return[];const D=dR(i,F);return D.length?D:[]},x=async F=>I(void 0,F),M=async(F=[])=>{if(!y.value)return!1;const D=C(F);if(D.length===0)return!0;let V={};for(const H of D)try{await H.validate("")}catch(Q){V={...V,...Q}}return Object.keys(V).length===0?!0:Promise.reject(V)},I=async(F=[],D)=>{const V=!Gr(D);try{const H=await M(F);return H===!0&&await(D==null?void 0:D(H)),H}catch(H){if(H instanceof Error)throw H;const Q=H;return r.scrollToError&&P(Object.keys(Q)[0]),await(D==null?void 0:D(!1,Q)),V&&Promise.reject(Q)}},P=F=>{var D;const V=dR(i,F)[0];V&&((D=V.$el)==null||D.scrollIntoView(r.scrollIntoViewOptions))};return zt(()=>r.rules,()=>{r.validateOnRuleChange&&x().catch(F=>void 0)},{deep:!0}),Rr($b,Xs({...dc(r),emit:n,resetFields:A,clearValidate:v,validateField:I,getField:o,addField:d,removeField:p,...X2e()})),e({validate:x,validateField:I,resetFields:A,clearValidate:v,scrollToField:P}),(F,D)=>(ve(),Ue("form",{class:xe(T(l))},[kt(F.$slots,"default")],2))}});var tNe=Fn(eNe,[["__file","form.vue"]]);function U1(){return U1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U1.apply(this,arguments)}function nNe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,GI(t,e)}function m3(t){return m3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m3(t)}function GI(t,e){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GI(t,e)}function rNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tF(t,e,n){return rNe()?tF=Reflect.construct.bind():tF=function(i,s,a){var l=[null];l.push.apply(l,s);var o=Function.bind.apply(i,l),d=new o;return a&&GI(d,a.prototype),d},tF.apply(null,arguments)}function iNe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function v3(t){var e=typeof Map=="function"?new Map:void 0;return v3=function(r){if(r===null||!iNe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return tF(r,arguments,m3(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),GI(i,r)},v3(t)}var sNe=/%[sdj%]/g,oNe=function(){};function y3(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function Bf(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,s=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var a=t.replace(sNe,function(l){if(l==="%%")return"%";if(i>=s)return l;switch(l){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return l}});return a}return t}function aNe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function iu(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||aNe(e)&&typeof t=="string"&&!t)}function lNe(t,e,n){var r=[],i=0,s=t.length;function a(l){r.push.apply(r,l||[]),i++,i===s&&n(r)}t.forEach(function(l){e(l,a)})}function iZ(t,e,n){var r=0,i=t.length;function s(a){if(a&&a.length){n(a);return}var l=r;r=r+1,l<i?e(t[l],s):n([])}s([])}function cNe(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var sZ=function(t){nNe(e,t);function e(n,r){var i;return i=t.call(this,"Async Validation Error")||this,i.errors=n,i.fields=r,i}return e}(v3(Error));function uNe(t,e,n,r,i){if(e.first){var s=new Promise(function(v,y){var C=function(I){return r(I),I.length?y(new sZ(I,y3(I))):v(i)},x=cNe(t);iZ(x,n,C)});return s.catch(function(v){return v}),s}var a=e.firstFields===!0?Object.keys(t):e.firstFields||[],l=Object.keys(t),o=l.length,d=0,p=[],A=new Promise(function(v,y){var C=function(M){if(p.push.apply(p,M),d++,d===o)return r(p),p.length?y(new sZ(p,y3(p))):v(i)};l.length||(r(p),v(i)),l.forEach(function(x){var M=t[x];a.indexOf(x)!==-1?iZ(M,n,C):lNe(M,n,C)})});return A.catch(function(v){return v}),A}function hNe(t){return!!(t&&t.message!==void 0)}function dNe(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function oZ(t,e){return function(n){var r;return t.fullFields?r=dNe(e,t.fullFields):r=e[n.field||t.fullField],hNe(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function aZ(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof t[n]=="object"?t[n]=U1({},t[n],r):t[n]=r}}return t}var _ce=function(e,n,r,i,s,a){e.required&&(!r.hasOwnProperty(e.field)||iu(n,a||e.type))&&i.push(Bf(s.messages.required,e.fullField))},fNe=function(e,n,r,i,s){(/^\s+$/.test(n)||n==="")&&i.push(Bf(s.messages.whitespace,e.fullField))},fR,pNe=function(){if(fR)return fR;var t="[a-fA-F\\d:]",e=function(D){return D&&D.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),l=new RegExp("^"+i+"$"),o=function(D){return D&&D.exact?s:new RegExp("(?:"+e(D)+n+e(D)+")|(?:"+e(D)+i+e(D)+")","g")};o.v4=function(F){return F&&F.exact?a:new RegExp(""+e(F)+n+e(F),"g")},o.v6=function(F){return F&&F.exact?l:new RegExp(""+e(F)+i+e(F),"g")};var d="(?:(?:[a-z]+:)?//)",p="(?:\\S+(?::\\S*)?@)?",A=o.v4().source,v=o.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",C="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",x="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",M="(?::\\d{2,5})?",I='(?:[/?#][^\\s"]*)?',P="(?:"+d+"|www\\.)"+p+"(?:localhost|"+A+"|"+v+"|"+y+C+x+")"+M+I;return fR=new RegExp("(?:^"+P+"$)","i"),fR},lZ={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},hT={integer:function(e){return hT.number(e)&&parseInt(e,10)===e},float:function(e){return hT.number(e)&&!hT.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!hT.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(lZ.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(pNe())},hex:function(e){return typeof e=="string"&&!!e.match(lZ.hex)}},ANe=function(e,n,r,i,s){if(e.required&&n===void 0){_ce(e,n,r,i,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;a.indexOf(l)>-1?hT[l](n)||i.push(Bf(s.messages.types[l],e.fullField,e.type)):l&&typeof n!==e.type&&i.push(Bf(s.messages.types[l],e.fullField,e.type))},gNe=function(e,n,r,i,s){var a=typeof e.len=="number",l=typeof e.min=="number",o=typeof e.max=="number",d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=n,A=null,v=typeof n=="number",y=typeof n=="string",C=Array.isArray(n);if(v?A="number":y?A="string":C&&(A="array"),!A)return!1;C&&(p=n.length),y&&(p=n.replace(d,"_").length),a?p!==e.len&&i.push(Bf(s.messages[A].len,e.fullField,e.len)):l&&!o&&p<e.min?i.push(Bf(s.messages[A].min,e.fullField,e.min)):o&&!l&&p>e.max?i.push(Bf(s.messages[A].max,e.fullField,e.max)):l&&o&&(p<e.min||p>e.max)&&i.push(Bf(s.messages[A].range,e.fullField,e.min,e.max))},jw="enum",mNe=function(e,n,r,i,s){e[jw]=Array.isArray(e[jw])?e[jw]:[],e[jw].indexOf(n)===-1&&i.push(Bf(s.messages[jw],e.fullField,e[jw].join(", ")))},vNe=function(e,n,r,i,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||i.push(Bf(s.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(n)||i.push(Bf(s.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},To={required:_ce,whitespace:fNe,type:ANe,range:gNe,enum:mNe,pattern:vNe},yNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n,"string")&&!e.required)return r();To.required(e,n,i,a,s,"string"),iu(n,"string")||(To.type(e,n,i,a,s),To.range(e,n,i,a,s),To.pattern(e,n,i,a,s),e.whitespace===!0&&To.whitespace(e,n,i,a,s))}r(a)},_Ne=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&To.type(e,n,i,a,s)}r(a)},bNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(n===""&&(n=void 0),iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&(To.type(e,n,i,a,s),To.range(e,n,i,a,s))}r(a)},wNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&To.type(e,n,i,a,s)}r(a)},xNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),iu(n)||To.type(e,n,i,a,s)}r(a)},CNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&(To.type(e,n,i,a,s),To.range(e,n,i,a,s))}r(a)},ENe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&(To.type(e,n,i,a,s),To.range(e,n,i,a,s))}r(a)},SNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(n==null&&!e.required)return r();To.required(e,n,i,a,s,"array"),n!=null&&(To.type(e,n,i,a,s),To.range(e,n,i,a,s))}r(a)},TNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&To.type(e,n,i,a,s)}r(a)},INe="enum",BNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s),n!==void 0&&To[INe](e,n,i,a,s)}r(a)},MNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n,"string")&&!e.required)return r();To.required(e,n,i,a,s),iu(n,"string")||To.pattern(e,n,i,a,s)}r(a)},LNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n,"date")&&!e.required)return r();if(To.required(e,n,i,a,s),!iu(n,"date")){var o;n instanceof Date?o=n:o=new Date(n),To.type(e,o,i,a,s),o&&To.range(e,o.getTime(),i,a,s)}}r(a)},RNe=function(e,n,r,i,s){var a=[],l=Array.isArray(n)?"array":typeof n;To.required(e,n,i,a,s,l),r(a)},VD=function(e,n,r,i,s){var a=e.type,l=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(iu(n,a)&&!e.required)return r();To.required(e,n,i,l,s,a),iu(n,a)||To.type(e,n,i,l,s)}r(l)},PNe=function(e,n,r,i,s){var a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(iu(n)&&!e.required)return r();To.required(e,n,i,a,s)}r(a)},WT={string:yNe,method:_Ne,number:bNe,boolean:wNe,regexp:xNe,integer:CNe,float:ENe,array:SNe,object:TNe,enum:BNe,pattern:MNe,date:LNe,url:VD,hex:VD,email:VD,required:RNe,any:PNe};function _3(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var b3=_3(),XB=function(){function t(n){this.rules=null,this._messages=b3,this.define(n)}var e=t.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var a=r[s];i.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(r){return r&&(this._messages=aZ(_3(),r)),this._messages},e.validate=function(r,i,s){var a=this;i===void 0&&(i={}),s===void 0&&(s=function(){});var l=r,o=i,d=s;if(typeof o=="function"&&(d=o,o={}),!this.rules||Object.keys(this.rules).length===0)return d&&d(null,l),Promise.resolve(l);function p(x){var M=[],I={};function P(D){if(Array.isArray(D)){var V;M=(V=M).concat.apply(V,D)}else M.push(D)}for(var F=0;F<x.length;F++)P(x[F]);M.length?(I=y3(M),d(M,I)):d(null,l)}if(o.messages){var A=this.messages();A===b3&&(A=_3()),aZ(A,o.messages),o.messages=A}else o.messages=this.messages();var v={},y=o.keys||Object.keys(this.rules);y.forEach(function(x){var M=a.rules[x],I=l[x];M.forEach(function(P){var F=P;typeof F.transform=="function"&&(l===r&&(l=U1({},l)),I=l[x]=F.transform(I)),typeof F=="function"?F={validator:F}:F=U1({},F),F.validator=a.getValidationMethod(F),F.validator&&(F.field=x,F.fullField=F.fullField||x,F.type=a.getType(F),v[x]=v[x]||[],v[x].push({rule:F,value:I,source:l,field:x}))})});var C={};return uNe(v,o,function(x,M){var I=x.rule,P=(I.type==="object"||I.type==="array")&&(typeof I.fields=="object"||typeof I.defaultField=="object");P=P&&(I.required||!I.required&&x.value),I.field=x.field;function F(H,Q){return U1({},Q,{fullField:I.fullField+"."+H,fullFields:I.fullFields?[].concat(I.fullFields,[H]):[H]})}function D(H){H===void 0&&(H=[]);var Q=Array.isArray(H)?H:[H];!o.suppressWarning&&Q.length&&t.warning("async-validator:",Q),Q.length&&I.message!==void 0&&(Q=[].concat(I.message));var G=Q.map(oZ(I,l));if(o.first&&G.length)return C[I.field]=1,M(G);if(!P)M(G);else{if(I.required&&!x.value)return I.message!==void 0?G=[].concat(I.message).map(oZ(I,l)):o.error&&(G=[o.error(I,Bf(o.messages.required,I.field))]),M(G);var W={};I.defaultField&&Object.keys(x.value).map(function(Y){W[Y]=I.defaultField}),W=U1({},W,x.rule.fields);var te={};Object.keys(W).forEach(function(Y){var ee=W[Y],ce=Array.isArray(ee)?ee:[ee];te[Y]=ce.map(F.bind(null,Y))});var q=new t(te);q.messages(o.messages),x.rule.options&&(x.rule.options.messages=o.messages,x.rule.options.error=o.error),q.validate(x.value,x.rule.options||o,function(Y){var ee=[];G&&G.length&&ee.push.apply(ee,G),Y&&Y.length&&ee.push.apply(ee,Y),M(ee.length?ee:null)})}}var V;if(I.asyncValidator)V=I.asyncValidator(I,x.value,D,x.source,o);else if(I.validator){try{V=I.validator(I,x.value,D,x.source,o)}catch(H){console.error==null||console.error(H),o.suppressValidatorError||setTimeout(function(){throw H},0),D(H.message)}V===!0?D():V===!1?D(typeof I.message=="function"?I.message(I.fullField||I.field):I.message||(I.fullField||I.field)+" fails"):V instanceof Array?D(V):V instanceof Error&&D(V.message)}V&&V.then&&V.then(function(){return D()},function(H){return D(H)})},function(x){p(x)},l)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!WT.hasOwnProperty(r.type))throw new Error(Bf("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),s=i.indexOf("message");return s!==-1&&i.splice(s,1),i.length===1&&i[0]==="required"?WT.required:WT[this.getType(r)]||void 0},t}();XB.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");WT[e]=n};XB.warning=oNe;XB.messages=b3;XB.validators=WT;const FNe=["","error","validating","success"],ONe=Ln({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Mt([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Mt([Object,Array])},error:String,validateStatus:{type:String,values:FNe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:dm}}),cZ="ElLabelWrap";var NNe=Ge({name:cZ,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=mn($b,void 0),r=mn(om);r||pc(cZ,"usage: <el-form-item><label-wrap /></el-form-item>");const i=_n("form"),s=Me(),a=Me(0),l=()=>{var p;if((p=s.value)!=null&&p.firstElementChild){const A=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(A))}else return 0},o=(p="update")=>{Tr(()=>{e.default&&t.isAutoWidth&&(p==="update"?a.value=l():p==="remove"&&(n==null||n.deregisterLabelWidth(a.value)))})},d=()=>o("update");return dr(()=>{d()}),Do(()=>{o("remove")}),o0(()=>d()),zt(a,(p,A)=>{t.updateAll&&(n==null||n.registerLabelWidth(p,A))}),Ia(oe(()=>{var p,A;return(A=(p=s.value)==null?void 0:p.firstElementChild)!=null?A:null}),d),()=>{var p,A;if(!e)return null;const{isAutoWidth:v}=t;if(v){const y=n==null?void 0:n.autoLabelWidth,C=r==null?void 0:r.hasLabel,x={};if(C&&y&&y!=="auto"){const M=Math.max(0,Number.parseInt(y,10)-a.value),I=n.labelPosition==="left"?"marginRight":"marginLeft";M&&(x[I]=`${M}px`)}return pt("div",{ref:s,class:[i.be("item","label-wrap")],style:x},[(p=e.default)==null?void 0:p.call(e)])}else return pt(_r,{ref:s},[(A=e.default)==null?void 0:A.call(e)])}}});const kNe=["role","aria-labelledby"],DNe=Ge({name:"ElFormItem"}),UNe=Ge({...DNe,props:ONe,setup(t,{expose:e}){const n=t,r=Uc(),i=mn($b,void 0),s=mn(om,void 0),a=Gl(void 0,{formItem:!1}),l=_n("form-item"),o=Hu().value,d=Me([]),p=Me(""),A=ZTe(p,100),v=Me(""),y=Me();let C,x=!1;const M=oe(()=>{if((i==null?void 0:i.labelPosition)==="top")return{};const Ie=Ja(n.labelWidth||(i==null?void 0:i.labelWidth)||"");return Ie?{width:Ie}:{}}),I=oe(()=>{if((i==null?void 0:i.labelPosition)==="top"||i!=null&&i.inline)return{};if(!n.label&&!n.labelWidth&&W)return{};const Ie=Ja(n.labelWidth||(i==null?void 0:i.labelWidth)||"");return!n.label&&!r.label?{marginLeft:Ie}:{}}),P=oe(()=>[l.b(),l.m(a.value),l.is("error",p.value==="error"),l.is("validating",p.value==="validating"),l.is("success",p.value==="success"),l.is("required",ce.value||n.required),l.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[l.m("feedback")]:i==null?void 0:i.statusIcon}]),F=oe(()=>Sl(n.inlineMessage)?n.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),D=oe(()=>[l.e("error"),{[l.em("error","inline")]:F.value}]),V=oe(()=>n.prop?Xr(n.prop)?n.prop:n.prop.join("."):""),H=oe(()=>!!(n.label||r.label)),Q=oe(()=>n.for||(d.value.length===1?d.value[0]:void 0)),G=oe(()=>!Q.value&&H.value),W=!!s,te=oe(()=>{const Ie=i==null?void 0:i.model;if(!(!Ie||!n.prop))return JP(Ie,n.prop).value}),q=oe(()=>{const{required:Ie}=n,Ne=[];n.rules&&Ne.push(...t_(n.rules));const Je=i==null?void 0:i.rules;if(Je&&n.prop){const je=JP(Je,n.prop).value;je&&Ne.push(...t_(je))}if(Ie!==void 0){const je=Ne.map((ft,Et)=>[ft,Et]).filter(([ft])=>Object.keys(ft).includes("required"));if(je.length>0)for(const[ft,Et]of je)ft.required!==Ie&&(Ne[Et]={...ft,required:Ie});else Ne.push({required:Ie})}return Ne}),Y=oe(()=>q.value.length>0),ee=Ie=>q.value.filter(Je=>!Je.trigger||!Ie?!0:Array.isArray(Je.trigger)?Je.trigger.includes(Ie):Je.trigger===Ie).map(({trigger:Je,...je})=>je),ce=oe(()=>q.value.some(Ie=>Ie.required)),se=oe(()=>{var Ie;return A.value==="error"&&n.showMessage&&((Ie=i==null?void 0:i.showMessage)!=null?Ie:!0)}),le=oe(()=>`${n.label||""}${(i==null?void 0:i.labelSuffix)||""}`),ie=Ie=>{p.value=Ie},pe=Ie=>{var Ne,Je;const{errors:je,fields:ft}=Ie;(!je||!ft)&&console.error(Ie),ie("error"),v.value=je?(Je=(Ne=je==null?void 0:je[0])==null?void 0:Ne.message)!=null?Je:`${n.prop} is required`:"",i==null||i.emit("validate",n.prop,!1,v.value)},ue=()=>{ie("success"),i==null||i.emit("validate",n.prop,!0,"")},me=async Ie=>{const Ne=V.value;return new XB({[Ne]:Ie}).validate({[Ne]:te.value},{firstFields:!0}).then(()=>(ue(),!0)).catch(je=>(pe(je),Promise.reject(je)))},Le=async(Ie,Ne)=>{if(x||!n.prop)return!1;const Je=Gr(Ne);if(!Y.value)return Ne==null||Ne(!1),!1;const je=ee(Ie);return je.length===0?(Ne==null||Ne(!0),!0):(ie("validating"),me(je).then(()=>(Ne==null||Ne(!0),!0)).catch(ft=>{const{fields:Et}=ft;return Ne==null||Ne(!1,Et),Je?!1:Promise.reject(Et)}))},ae=()=>{ie(""),v.value="",x=!1},be=async()=>{const Ie=i==null?void 0:i.model;if(!Ie||!n.prop)return;const Ne=JP(Ie,n.prop);x=!0,Ne.value=IX(C),await Tr(),ae(),x=!1},_e=Ie=>{d.value.includes(Ie)||d.value.push(Ie)},$e=Ie=>{d.value=d.value.filter(Ne=>Ne!==Ie)};zt(()=>n.error,Ie=>{v.value=Ie||"",ie(Ie?"error":"")},{immediate:!0}),zt(()=>n.validateStatus,Ie=>ie(Ie||""));const Re=Xs({...dc(n),$el:y,size:a,validateState:p,labelId:o,inputIds:d,isGroup:G,hasLabel:H,fieldValue:te,addInputId:_e,removeInputId:$e,resetField:be,clearValidate:ae,validate:Le});return Rr(om,Re),dr(()=>{n.prop&&(i==null||i.addField(Re),C=IX(te.value))}),Do(()=>{i==null||i.removeField(Re)}),e({size:a,validateMessage:v,validateState:p,validate:Le,clearValidate:ae,resetField:be}),(Ie,Ne)=>{var Je;return ve(),Ue("div",{ref_key:"formItemRef",ref:y,class:xe(T(P)),role:T(G)?"group":void 0,"aria-labelledby":T(G)?T(o):void 0},[pt(T(NNe),{"is-auto-width":T(M).width==="auto","update-all":((Je=T(i))==null?void 0:Je.labelWidth)==="auto"},{default:It(()=>[T(H)?(ve(),qt(Mi(T(Q)?"label":"div"),{key:0,id:T(o),for:T(Q),class:xe(T(l).e("label")),style:vr(T(M))},{default:It(()=>[kt(Ie.$slots,"label",{label:T(le)},()=>[gs(Nn(T(le)),1)])]),_:3},8,["id","for","class","style"])):wt("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),rt("div",{class:xe(T(l).e("content")),style:vr(T(I))},[kt(Ie.$slots,"default"),pt($oe,{name:`${T(l).namespace.value}-zoom-in-top`},{default:It(()=>[T(se)?kt(Ie.$slots,"error",{key:0,error:v.value},()=>[rt("div",{class:xe(T(D))},Nn(v.value),3)]):wt("v-if",!0)]),_:3},8,["name"])],6)],10,kNe)}}});var bce=Fn(UNe,[["__file","form-item.vue"]]);const zNe=_i(tNe,{FormItem:bce}),$Ne=Pa(bce);let pA;const VNe=`
  height:0 !important;
  visibility:hidden !important;
  ${$ae()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,HNe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function GNe(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:HNe.map(a=>`${a}:${e.getPropertyValue(a)}`).join(";"),paddingSize:r,borderSize:i,boxSizing:n}}function uZ(t,e=1,n){var r;pA||(pA=document.createElement("textarea"),document.body.appendChild(pA));const{paddingSize:i,borderSize:s,boxSizing:a,contextStyle:l}=GNe(t);pA.setAttribute("style",`${l};${VNe}`),pA.value=t.value||t.placeholder||"";let o=pA.scrollHeight;const d={};a==="border-box"?o=o+s:a==="content-box"&&(o=o-i),pA.value="";const p=pA.scrollHeight-i;if(Hr(e)){let A=p*e;a==="border-box"&&(A=A+i+s),o=Math.max(A,o),d.minHeight=`${A}px`}if(Hr(n)){let A=p*n;a==="border-box"&&(A=A+i+s),o=Math.min(A,o)}return d.height=`${o}px`,(r=pA.parentNode)==null||r.removeChild(pA),pA=void 0,d}const QNe=Ln({id:{type:String,default:void 0},size:Nc,disabled:Boolean,modelValue:{type:Mt([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Mt([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:wo},prefixIcon:{type:wo},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Mt([Object,Array,String]),default:()=>Ba({})},autofocus:{type:Boolean,default:!1},...Eu(["ariaLabel"])}),jNe={[Si]:t=>Xr(t),input:t=>Xr(t),change:t=>Xr(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},KNe=["role"],WNe=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],qNe=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],YNe=Ge({name:"ElInput",inheritAttrs:!1}),XNe=Ge({...YNe,props:QNe,emits:jNe,setup(t,{expose:e,emit:n}){const r=t,i=Ra(),s=Uc(),a=oe(()=>{const Ft={};return r.containerRole==="combobox"&&(Ft["aria-haspopup"]=i["aria-haspopup"],Ft["aria-owns"]=i["aria-owns"],Ft["aria-expanded"]=i["aria-expanded"]),Ft}),l=oe(()=>[r.type==="textarea"?M.b():x.b(),x.m(y.value),x.is("disabled",C.value),x.is("exceed",_e.value),{[x.b("group")]:s.prepend||s.append,[x.bm("group","append")]:s.append,[x.bm("group","prepend")]:s.prepend,[x.m("prefix")]:s.prefix||r.prefixIcon,[x.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[x.bm("suffix","password-clear")]:me.value&&Le.value,[x.b("hidden")]:r.type==="hidden"},i.class]),o=oe(()=>[x.e("wrapper"),x.is("focus",te.value)]),d=NV({excludeKeys:oe(()=>Object.keys(a.value))}),{form:p,formItem:A}=bh(),{inputId:v}=jA(r,{formItemContext:A}),y=Gl(),C=jh(),x=_n("input"),M=_n("textarea"),I=Ds(),P=Ds(),F=Me(!1),D=Me(!1),V=Me(!1),H=Me(),Q=Ds(r.inputStyle),G=oe(()=>I.value||P.value),{wrapperRef:W,isFocused:te,handleFocus:q,handleBlur:Y}=p2(G,{afterBlur(){var Ft;r.validateEvent&&((Ft=A==null?void 0:A.validate)==null||Ft.call(A,"blur").catch(mt=>void 0))}}),ee=oe(()=>{var Ft;return(Ft=p==null?void 0:p.statusIcon)!=null?Ft:!1}),ce=oe(()=>(A==null?void 0:A.validateState)||""),se=oe(()=>ce.value&&FV[ce.value]),le=oe(()=>V.value?eOe:CFe),ie=oe(()=>[i.style]),pe=oe(()=>[r.inputStyle,Q.value,{resize:r.resize}]),ue=oe(()=>eu(r.modelValue)?"":String(r.modelValue)),me=oe(()=>r.clearable&&!C.value&&!r.readonly&&!!ue.value&&(te.value||F.value)),Le=oe(()=>r.showPassword&&!C.value&&!r.readonly&&!!ue.value&&(!!ue.value||te.value)),ae=oe(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!C.value&&!r.readonly&&!r.showPassword),be=oe(()=>ue.value.length),_e=oe(()=>!!ae.value&&be.value>Number(r.maxlength)),$e=oe(()=>!!s.suffix||!!r.suffixIcon||me.value||r.showPassword||ae.value||!!ce.value&&ee.value),[Re,Ie]=y2e(I);Ia(P,Ft=>{if(je(),!ae.value||r.resize!=="both")return;const mt=Ft[0],{width:Be}=mt.contentRect;H.value={right:`calc(100% - ${Be+15+6}px)`}});const Ne=()=>{const{type:Ft,autosize:mt}=r;if(!(!As||Ft!=="textarea"||!P.value))if(mt){const Be=xi(mt)?mt.minRows:void 0,ze=xi(mt)?mt.maxRows:void 0,it=uZ(P.value,Be,ze);Q.value={overflowY:"hidden",...it},Tr(()=>{P.value.offsetHeight,Q.value=it})}else Q.value={minHeight:uZ(P.value).minHeight}},je=(Ft=>{let mt=!1;return()=>{var Be;if(mt||!r.autosize)return;((Be=P.value)==null?void 0:Be.offsetParent)===null||(Ft(),mt=!0)}})(Ne),ft=()=>{const Ft=G.value,mt=r.formatter?r.formatter(ue.value):ue.value;!Ft||Ft.value===mt||(Ft.value=mt)},Et=async Ft=>{Re();let{value:mt}=Ft.target;if(r.formatter&&(mt=r.parser?r.parser(mt):mt),!D.value){if(mt===ue.value){ft();return}n(Si,mt),n("input",mt),await Tr(),ft(),Ie()}},ke=Ft=>{n("change",Ft.target.value)},Ye=Ft=>{n("compositionstart",Ft),D.value=!0},at=Ft=>{var mt;n("compositionupdate",Ft);const Be=(mt=Ft.target)==null?void 0:mt.value,ze=Be[Be.length-1]||"";D.value=!OV(ze)},He=Ft=>{n("compositionend",Ft),D.value&&(D.value=!1,Et(Ft))},Tt=()=>{V.value=!V.value,Ut()},Ut=async()=>{var Ft;await Tr(),(Ft=G.value)==null||Ft.focus()},Rt=()=>{var Ft;return(Ft=G.value)==null?void 0:Ft.blur()},Bt=Ft=>{F.value=!1,n("mouseleave",Ft)},Ht=Ft=>{F.value=!0,n("mouseenter",Ft)},xt=Ft=>{n("keydown",Ft)},Zt=()=>{var Ft;(Ft=G.value)==null||Ft.select()},un=()=>{n(Si,""),n("change",""),n("clear"),n("input","")};return zt(()=>r.modelValue,()=>{var Ft;Tr(()=>Ne()),r.validateEvent&&((Ft=A==null?void 0:A.validate)==null||Ft.call(A,"change").catch(mt=>void 0))}),zt(ue,()=>ft()),zt(()=>r.type,async()=>{await Tr(),ft(),Ne()}),dr(()=>{!r.formatter&&r.parser,ft(),Tr(Ne)}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input",ref:"https://element-plus.org/en-US/component/input.html"},oe(()=>!!r.label)),e({input:I,textarea:P,ref:G,textareaStyle:pe,autosize:Io(r,"autosize"),focus:Ut,blur:Rt,select:Zt,clear:un,resizeTextarea:Ne}),(Ft,mt)=>(ve(),Ue("div",Gi(T(a),{class:T(l),style:T(ie),role:Ft.containerRole,onMouseenter:Ht,onMouseleave:Bt}),[wt(" input "),Ft.type!=="textarea"?(ve(),Ue(_r,{key:0},[wt(" prepend slot "),Ft.$slots.prepend?(ve(),Ue("div",{key:0,class:xe(T(x).be("group","prepend"))},[kt(Ft.$slots,"prepend")],2)):wt("v-if",!0),rt("div",{ref_key:"wrapperRef",ref:W,class:xe(T(o))},[wt(" prefix slot "),Ft.$slots.prefix||Ft.prefixIcon?(ve(),Ue("span",{key:0,class:xe(T(x).e("prefix"))},[rt("span",{class:xe(T(x).e("prefix-inner"))},[kt(Ft.$slots,"prefix"),Ft.prefixIcon?(ve(),qt(T(mr),{key:0,class:xe(T(x).e("icon"))},{default:It(()=>[(ve(),qt(Mi(Ft.prefixIcon)))]),_:1},8,["class"])):wt("v-if",!0)],2)],2)):wt("v-if",!0),rt("input",Gi({id:T(v),ref_key:"input",ref:I,class:T(x).e("inner")},T(d),{minlength:Ft.minlength,maxlength:Ft.maxlength,type:Ft.showPassword?V.value?"text":"password":Ft.type,disabled:T(C),readonly:Ft.readonly,autocomplete:Ft.autocomplete,tabindex:Ft.tabindex,"aria-label":Ft.label||Ft.ariaLabel,placeholder:Ft.placeholder,style:Ft.inputStyle,form:Ft.form,autofocus:Ft.autofocus,onCompositionstart:Ye,onCompositionupdate:at,onCompositionend:He,onInput:Et,onFocus:mt[0]||(mt[0]=(...Be)=>T(q)&&T(q)(...Be)),onBlur:mt[1]||(mt[1]=(...Be)=>T(Y)&&T(Y)(...Be)),onChange:ke,onKeydown:xt}),null,16,WNe),wt(" suffix slot "),T($e)?(ve(),Ue("span",{key:1,class:xe(T(x).e("suffix"))},[rt("span",{class:xe(T(x).e("suffix-inner"))},[!T(me)||!T(Le)||!T(ae)?(ve(),Ue(_r,{key:0},[kt(Ft.$slots,"suffix"),Ft.suffixIcon?(ve(),qt(T(mr),{key:0,class:xe(T(x).e("icon"))},{default:It(()=>[(ve(),qt(Mi(Ft.suffixIcon)))]),_:1},8,["class"])):wt("v-if",!0)],64)):wt("v-if",!0),T(me)?(ve(),qt(T(mr),{key:1,class:xe([T(x).e("icon"),T(x).e("clear")]),onMousedown:qr(T(co),["prevent"]),onClick:un},{default:It(()=>[pt(T(x_))]),_:1},8,["class","onMousedown"])):wt("v-if",!0),T(Le)?(ve(),qt(T(mr),{key:2,class:xe([T(x).e("icon"),T(x).e("password")]),onClick:Tt},{default:It(()=>[(ve(),qt(Mi(T(le))))]),_:1},8,["class"])):wt("v-if",!0),T(ae)?(ve(),Ue("span",{key:3,class:xe(T(x).e("count"))},[rt("span",{class:xe(T(x).e("count-inner"))},Nn(T(be))+" / "+Nn(Ft.maxlength),3)],2)):wt("v-if",!0),T(ce)&&T(se)&&T(ee)?(ve(),qt(T(mr),{key:4,class:xe([T(x).e("icon"),T(x).e("validateIcon"),T(x).is("loading",T(ce)==="validating")])},{default:It(()=>[(ve(),qt(Mi(T(se))))]),_:1},8,["class"])):wt("v-if",!0)],2)],2)):wt("v-if",!0)],2),wt(" append slot "),Ft.$slots.append?(ve(),Ue("div",{key:1,class:xe(T(x).be("group","append"))},[kt(Ft.$slots,"append")],2)):wt("v-if",!0)],64)):(ve(),Ue(_r,{key:1},[wt(" textarea "),rt("textarea",Gi({id:T(v),ref_key:"textarea",ref:P,class:T(M).e("inner")},T(d),{minlength:Ft.minlength,maxlength:Ft.maxlength,tabindex:Ft.tabindex,disabled:T(C),readonly:Ft.readonly,autocomplete:Ft.autocomplete,style:T(pe),"aria-label":Ft.label||Ft.ariaLabel,placeholder:Ft.placeholder,form:Ft.form,autofocus:Ft.autofocus,onCompositionstart:Ye,onCompositionupdate:at,onCompositionend:He,onInput:Et,onFocus:mt[2]||(mt[2]=(...Be)=>T(q)&&T(q)(...Be)),onBlur:mt[3]||(mt[3]=(...Be)=>T(Y)&&T(Y)(...Be)),onChange:ke,onKeydown:xt}),null,16,qNe),T(ae)?(ve(),Ue("span",{key:0,style:vr(H.value),class:xe(T(x).e("count"))},Nn(T(be))+" / "+Nn(Ft.maxlength),7)):wt("v-if",!0)],64))],16,KNe))}});var ZNe=Fn(XNe,[["__file","input.vue"]]);const mh=_i(ZNe),Kw=4,wce={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},JNe=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),iH=Symbol("scrollbarContextKey"),eke=Ln({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),tke="Thumb",nke=Ge({__name:"thumb",props:eke,setup(t){const e=t,n=mn(iH),r=_n("scrollbar");n||pc(tke,"can not inject scrollbar context");const i=Me(),s=Me(),a=Me({}),l=Me(!1);let o=!1,d=!1,p=As?document.onselectstart:null;const A=oe(()=>wce[e.vertical?"vertical":"horizontal"]),v=oe(()=>JNe({size:e.size,move:e.move,bar:A.value})),y=oe(()=>i.value[A.value.offset]**2/n.wrapElement[A.value.scrollSize]/e.ratio/s.value[A.value.offset]),C=H=>{var Q;if(H.stopPropagation(),H.ctrlKey||[1,2].includes(H.button))return;(Q=window.getSelection())==null||Q.removeAllRanges(),M(H);const G=H.currentTarget;G&&(a.value[A.value.axis]=G[A.value.offset]-(H[A.value.client]-G.getBoundingClientRect()[A.value.direction]))},x=H=>{if(!s.value||!i.value||!n.wrapElement)return;const Q=Math.abs(H.target.getBoundingClientRect()[A.value.direction]-H[A.value.client]),G=s.value[A.value.offset]/2,W=(Q-G)*100*y.value/i.value[A.value.offset];n.wrapElement[A.value.scroll]=W*n.wrapElement[A.value.scrollSize]/100},M=H=>{H.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",I),document.addEventListener("mouseup",P),p=document.onselectstart,document.onselectstart=()=>!1},I=H=>{if(!i.value||!s.value||o===!1)return;const Q=a.value[A.value.axis];if(!Q)return;const G=(i.value.getBoundingClientRect()[A.value.direction]-H[A.value.client])*-1,W=s.value[A.value.offset]-Q,te=(G-W)*100*y.value/i.value[A.value.offset];n.wrapElement[A.value.scroll]=te*n.wrapElement[A.value.scrollSize]/100},P=()=>{o=!1,a.value[A.value.axis]=0,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",P),V(),d&&(l.value=!1)},F=()=>{d=!1,l.value=!!e.size},D=()=>{d=!0,l.value=o};Do(()=>{V(),document.removeEventListener("mouseup",P)});const V=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return Vo(Io(n,"scrollbarElement"),"mousemove",F),Vo(Io(n,"scrollbarElement"),"mouseleave",D),(H,Q)=>(ve(),qt(fc,{name:T(r).b("fade"),persisted:""},{default:It(()=>[ci(rt("div",{ref_key:"instance",ref:i,class:xe([T(r).e("bar"),T(r).is(T(A).key)]),onMousedown:x},[rt("div",{ref_key:"thumb",ref:s,class:xe(T(r).e("thumb")),style:vr(T(v)),onMousedown:C},null,38)],34),[[Hs,H.always||l.value]])]),_:1},8,["name"]))}});var hZ=Fn(nke,[["__file","thumb.vue"]]);const rke=Ln({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),ike=Ge({__name:"bar",props:rke,setup(t,{expose:e}){const n=t,r=mn(iH),i=Me(0),s=Me(0),a=Me(""),l=Me(""),o=Me(1),d=Me(1);return e({handleScroll:v=>{if(v){const y=v.offsetHeight-Kw,C=v.offsetWidth-Kw;s.value=v.scrollTop*100/y*o.value,i.value=v.scrollLeft*100/C*d.value}},update:()=>{const v=r==null?void 0:r.wrapElement;if(!v)return;const y=v.offsetHeight-Kw,C=v.offsetWidth-Kw,x=y**2/v.scrollHeight,M=C**2/v.scrollWidth,I=Math.max(x,n.minSize),P=Math.max(M,n.minSize);o.value=x/(y-x)/(I/(y-I)),d.value=M/(C-M)/(P/(C-P)),l.value=I+Kw<y?`${I}px`:"",a.value=P+Kw<C?`${P}px`:""}}),(v,y)=>(ve(),Ue(_r,null,[pt(hZ,{move:i.value,ratio:d.value,size:a.value,always:v.always},null,8,["move","ratio","size","always"]),pt(hZ,{move:s.value,ratio:o.value,size:l.value,vertical:"",always:v.always},null,8,["move","ratio","size","always"])],64))}});var ske=Fn(ike,[["__file","bar.vue"]]);const oke=Ln({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Mt([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...Eu(["ariaLabel","ariaOrientation"])}),ake={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(Hr)},lke="ElScrollbar",cke=Ge({name:lke}),uke=Ge({...cke,props:oke,emits:ake,setup(t,{expose:e,emit:n}){const r=t,i=_n("scrollbar");let s,a;const l=Me(),o=Me(),d=Me(),p=Me(),A=oe(()=>{const F={};return r.height&&(F.height=Ja(r.height)),r.maxHeight&&(F.maxHeight=Ja(r.maxHeight)),[r.wrapStyle,F]}),v=oe(()=>[r.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!r.native}]),y=oe(()=>[i.e("view"),r.viewClass]),C=()=>{var F;o.value&&((F=p.value)==null||F.handleScroll(o.value),n("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function x(F,D){xi(F)?o.value.scrollTo(F):Hr(F)&&Hr(D)&&o.value.scrollTo(F,D)}const M=F=>{Hr(F)&&(o.value.scrollTop=F)},I=F=>{Hr(F)&&(o.value.scrollLeft=F)},P=()=>{var F;(F=p.value)==null||F.update()};return zt(()=>r.noresize,F=>{F?(s==null||s(),a==null||a()):({stop:s}=Ia(d,P),a=Vo("resize",P))},{immediate:!0}),zt(()=>[r.maxHeight,r.height],()=>{r.native||Tr(()=>{var F;P(),o.value&&((F=p.value)==null||F.handleScroll(o.value))})}),Rr(iH,Xs({scrollbarElement:l,wrapElement:o})),dr(()=>{r.native||Tr(()=>{P()})}),o0(()=>P()),e({wrapRef:o,update:P,scrollTo:x,setScrollTop:M,setScrollLeft:I,handleScroll:C}),(F,D)=>(ve(),Ue("div",{ref_key:"scrollbarRef",ref:l,class:xe(T(i).b())},[rt("div",{ref_key:"wrapRef",ref:o,class:xe(T(v)),style:vr(T(A)),onScroll:C},[(ve(),qt(Mi(F.tag),{id:F.id,ref_key:"resizeRef",ref:d,class:xe(T(y)),style:vr(F.viewStyle),role:F.role,"aria-label":F.ariaLabel,"aria-orientation":F.ariaOrientation},{default:It(()=>[kt(F.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),F.native?wt("v-if",!0):(ve(),qt(ske,{key:0,ref_key:"barRef",ref:p,always:F.always,"min-size":F.minSize},null,8,["always","min-size"]))],2))}});var hke=Fn(uke,[["__file","scrollbar.vue"]]);const d0=_i(hke),sH=Symbol("popper"),xce=Symbol("popperContent"),dke=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],Cce=Ln({role:{type:String,values:dke,default:"tooltip"}}),fke=Ge({name:"ElPopper",inheritAttrs:!1}),pke=Ge({...fke,props:Cce,setup(t,{expose:e}){const n=t,r=Me(),i=Me(),s=Me(),a=Me(),l=oe(()=>n.role),o={triggerRef:r,popperInstanceRef:i,contentRef:s,referenceRef:a,role:l};return e(o),Rr(sH,o),(d,p)=>kt(d.$slots,"default")}});var Ake=Fn(pke,[["__file","popper.vue"]]);const Ece=Ln({arrowOffset:{type:Number,default:5}}),gke=Ge({name:"ElPopperArrow",inheritAttrs:!1}),mke=Ge({...gke,props:Ece,setup(t,{expose:e}){const n=t,r=_n("popper"),{arrowOffset:i,arrowRef:s,arrowStyle:a}=mn(xce,void 0);return zt(()=>n.arrowOffset,l=>{i.value=l}),Do(()=>{s.value=void 0}),e({arrowRef:s}),(l,o)=>(ve(),Ue("span",{ref_key:"arrowRef",ref:s,class:xe(T(r).e("arrow")),style:vr(T(a)),"data-popper-arrow":""},null,6))}});var vke=Fn(mke,[["__file","arrow.vue"]]);const yke="ElOnlyChild",Sce=Ge({name:yke,setup(t,{slots:e,attrs:n}){var r;const i=mn(nce),s=F5e((r=i==null?void 0:i.setForwardRef)!=null?r:co);return()=>{var a;const l=(a=e.default)==null?void 0:a.call(e,n);if(!l||l.length>1)return null;const o=Tce(l);return o?ci(Qv(o,n),[[s]]):null}}});function Tce(t){if(!t)return null;const e=t;for(const n of e){if(xi(n))switch(n.type){case gh:continue;case _E:case"svg":return dZ(n);case _r:return Tce(n.children);default:return n}return dZ(n)}return null}function dZ(t){const e=_n("only-child");return pt("span",{class:e.e("content")},[t])}const Ice=Ln({virtualRef:{type:Mt(Object)},virtualTriggering:Boolean,onMouseenter:{type:Mt(Function)},onMouseleave:{type:Mt(Function)},onClick:{type:Mt(Function)},onKeydown:{type:Mt(Function)},onFocus:{type:Mt(Function)},onBlur:{type:Mt(Function)},onContextmenu:{type:Mt(Function)},id:String,open:Boolean}),_ke=Ge({name:"ElPopperTrigger",inheritAttrs:!1}),bke=Ge({..._ke,props:Ice,setup(t,{expose:e}){const n=t,{role:r,triggerRef:i}=mn(sH,void 0);P5e(i);const s=oe(()=>l.value?n.id:void 0),a=oe(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),l=oe(()=>{if(r&&r.value!=="tooltip")return r.value}),o=oe(()=>l.value?`${n.open}`:void 0);let d;return dr(()=>{zt(()=>n.virtualRef,p=>{p&&(i.value=xd(p))},{immediate:!0}),zt(i,(p,A)=>{d==null||d(),d=void 0,Ep(p)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(v=>{var y;const C=n[v];C&&(p.addEventListener(v.slice(2).toLowerCase(),C),(y=A==null?void 0:A.removeEventListener)==null||y.call(A,v.slice(2).toLowerCase(),C))}),d=zt([s,a,l,o],v=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((y,C)=>{eu(v[C])?p.removeAttribute(y):p.setAttribute(y,v[C])})},{immediate:!0})),Ep(A)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(v=>A.removeAttribute(v))},{immediate:!0})}),Do(()=>{d==null||d(),d=void 0}),e({triggerRef:i}),(p,A)=>p.virtualTriggering?wt("v-if",!0):(ve(),qt(T(Sce),Gi({key:0},p.$attrs,{"aria-controls":T(s),"aria-describedby":T(a),"aria-expanded":T(o),"aria-haspopup":T(l)}),{default:It(()=>[kt(p.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var wke=Fn(bke,[["__file","trigger.vue"]]);const HD="focus-trap.focus-after-trapped",GD="focus-trap.focus-after-released",xke="focus-trap.focusout-prevented",fZ={cancelable:!0,bubbles:!1},Cke={cancelable:!0,bubbles:!1},pZ="focusAfterTrapped",AZ="focusAfterReleased",oH=Symbol("elFocusTrap"),aH=Me(),m2=Me(0),lH=Me(0);let pR=0;const Bce=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},gZ=(t,e)=>{for(const n of t)if(!Eke(n,e))return n},Eke=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},Ske=t=>{const e=Bce(t),n=gZ(e,t),r=gZ(e.reverse(),t);return[n,r]},Tke=t=>t instanceof HTMLInputElement&&"select"in t,hy=(t,e)=>{if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),lH.value=window.performance.now(),t!==n&&Tke(t)&&e&&t.select()}};function mZ(t,e){const n=[...t],r=t.indexOf(e);return r!==-1&&n.splice(r,1),n}const Ike=()=>{let t=[];return{push:r=>{const i=t[0];i&&r!==i&&i.pause(),t=mZ(t,r),t.unshift(r)},remove:r=>{var i,s;t=mZ(t,r),(s=(i=t[0])==null?void 0:i.resume)==null||s.call(i)}}},Bke=(t,e=!1)=>{const n=document.activeElement;for(const r of t)if(hy(r,e),document.activeElement!==n)return},vZ=Ike(),Mke=()=>m2.value>lH.value,AR=()=>{aH.value="pointer",m2.value=window.performance.now()},yZ=()=>{aH.value="keyboard",m2.value=window.performance.now()},Lke=()=>(dr(()=>{pR===0&&(document.addEventListener("mousedown",AR),document.addEventListener("touchstart",AR),document.addEventListener("keydown",yZ)),pR++}),Do(()=>{pR--,pR<=0&&(document.removeEventListener("mousedown",AR),document.removeEventListener("touchstart",AR),document.removeEventListener("keydown",yZ))}),{focusReason:aH,lastUserFocusTimestamp:m2,lastAutomatedFocusTimestamp:lH}),gR=t=>new CustomEvent(xke,{...Cke,detail:t}),Rke=Ge({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[pZ,AZ,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=Me();let r,i;const{focusReason:s}=Lke();I5e(C=>{t.trapped&&!a.paused&&e("release-requested",C)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},l=C=>{if(!t.loop&&!t.trapped||a.paused)return;const{key:x,altKey:M,ctrlKey:I,metaKey:P,currentTarget:F,shiftKey:D}=C,{loop:V}=t,H=x===Fr.tab&&!M&&!I&&!P,Q=document.activeElement;if(H&&Q){const G=F,[W,te]=Ske(G);if(W&&te){if(!D&&Q===te){const Y=gR({focusReason:s.value});e("focusout-prevented",Y),Y.defaultPrevented||(C.preventDefault(),V&&hy(W,!0))}else if(D&&[W,G].includes(Q)){const Y=gR({focusReason:s.value});e("focusout-prevented",Y),Y.defaultPrevented||(C.preventDefault(),V&&hy(te,!0))}}else if(Q===G){const Y=gR({focusReason:s.value});e("focusout-prevented",Y),Y.defaultPrevented||C.preventDefault()}}};Rr(oH,{focusTrapRef:n,onKeydown:l}),zt(()=>t.focusTrapEl,C=>{C&&(n.value=C)},{immediate:!0}),zt([n],([C],[x])=>{C&&(C.addEventListener("keydown",l),C.addEventListener("focusin",p),C.addEventListener("focusout",A)),x&&(x.removeEventListener("keydown",l),x.removeEventListener("focusin",p),x.removeEventListener("focusout",A))});const o=C=>{e(pZ,C)},d=C=>e(AZ,C),p=C=>{const x=T(n);if(!x)return;const M=C.target,I=C.relatedTarget,P=M&&x.contains(M);t.trapped||I&&x.contains(I)||(r=I),P&&e("focusin",C),!a.paused&&t.trapped&&(P?i=M:hy(i,!0))},A=C=>{const x=T(n);if(!(a.paused||!x))if(t.trapped){const M=C.relatedTarget;!eu(M)&&!x.contains(M)&&setTimeout(()=>{if(!a.paused&&t.trapped){const I=gR({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||hy(i,!0)}},0)}else{const M=C.target;M&&x.contains(M)||e("focusout",C)}};async function v(){await Tr();const C=T(n);if(C){vZ.push(a);const x=C.contains(document.activeElement)?r:document.activeElement;if(r=x,!C.contains(x)){const I=new Event(HD,fZ);C.addEventListener(HD,o),C.dispatchEvent(I),I.defaultPrevented||Tr(()=>{let P=t.focusStartEl;Xr(P)||(hy(P),document.activeElement!==P&&(P="first")),P==="first"&&Bke(Bce(C),!0),(document.activeElement===x||P==="container")&&hy(C)})}}}function y(){const C=T(n);if(C){C.removeEventListener(HD,o);const x=new CustomEvent(GD,{...fZ,detail:{focusReason:s.value}});C.addEventListener(GD,d),C.dispatchEvent(x),!x.defaultPrevented&&(s.value=="keyboard"||!Mke()||C.contains(document.activeElement))&&hy(r??document.body),C.removeEventListener(GD,d),vZ.remove(a)}}return dr(()=>{t.trapped&&v(),zt(()=>t.trapped,C=>{C?v():y()})}),Do(()=>{t.trapped&&y()}),{onKeydown:l}}});function Pke(t,e,n,r,i,s){return kt(t.$slots,"default",{handleKeydown:t.onKeydown})}var ZB=Fn(Rke,[["render",Pke],["__file","focus-trap.vue"]]);const Fke=["fixed","absolute"],Oke=Ln({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Mt(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:zb,default:"bottom"},popperOptions:{type:Mt(Object),default:()=>({})},strategy:{type:String,values:Fke,default:"absolute"}}),Mce=Ln({...Oke,id:String,style:{type:Mt([String,Array,Object])},className:{type:Mt([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Mt([String,Array,Object])},popperStyle:{type:Mt([String,Array,Object])},referenceEl:{type:Mt(Object)},triggerTargetEl:{type:Mt(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Eu(["ariaLabel"])}),Nke={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},kke=(t,e=[])=>{const{placement:n,strategy:r,popperOptions:i}=t,s={placement:n,strategy:r,...i,modifiers:[...Uke(t),...e]};return zke(s,i==null?void 0:i.modifiers),s},Dke=t=>{if(As)return xd(t)};function Uke(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:r}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function zke(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const $ke=0,Vke=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:r,role:i}=mn(sH,void 0),s=Me(),a=Me(),l=oe(()=>({name:"eventListeners",enabled:!!t.visible})),o=oe(()=>{var I;const P=T(s),F=(I=T(a))!=null?I:$ke;return{name:"arrow",enabled:!Sle(P),options:{element:P,padding:F}}}),d=oe(()=>({onFirstUpdate:()=>{C()},...kke(t,[T(o),T(l)])})),p=oe(()=>Dke(t.referenceEl)||T(r)),{attributes:A,state:v,styles:y,update:C,forceUpdate:x,instanceRef:M}=C5e(p,n,d);return zt(M,I=>e.value=I),dr(()=>{zt(()=>{var I;return(I=T(p))==null?void 0:I.getBoundingClientRect()},()=>{C()})}),{attributes:A,arrowRef:s,contentRef:n,instanceRef:M,state:v,styles:y,role:i,forceUpdate:x,update:C}},Hke=(t,{attributes:e,styles:n,role:r})=>{const{nextZIndex:i}=SE(),s=_n("popper"),a=oe(()=>T(e).popper),l=Me(Hr(t.zIndex)?t.zIndex:i()),o=oe(()=>[s.b(),s.is("pure",t.pure),s.is(t.effect),t.popperClass]),d=oe(()=>[{zIndex:T(l)},T(n).popper,t.popperStyle||{}]),p=oe(()=>r.value==="dialog"?"false":void 0),A=oe(()=>T(n).arrow||{});return{ariaModal:p,arrowStyle:A,contentAttrs:a,contentClass:o,contentStyle:d,contentZIndex:l,updateZIndex:()=>{l.value=Hr(t.zIndex)?t.zIndex:i()}}},Gke=(t,e)=>{const n=Me(!1),r=Me();return{focusStartRef:r,trapped:n,onFocusAfterReleased:d=>{var p;((p=d.detail)==null?void 0:p.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:d=>{t.visible&&!n.value&&(d.target&&(r.value=d.target),n.value=!0)},onFocusoutPrevented:d=>{t.trapping||(d.detail.focusReason==="pointer"&&d.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,e("close")}}},Qke=Ge({name:"ElPopperContent"}),jke=Ge({...Qke,props:Mce,emits:Nke,setup(t,{expose:e,emit:n}){const r=t,{focusStartRef:i,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:l,onFocusInTrap:o,onFocusoutPrevented:d,onReleaseRequested:p}=Gke(r,n),{attributes:A,arrowRef:v,contentRef:y,styles:C,instanceRef:x,role:M,update:I}=Vke(r),{ariaModal:P,arrowStyle:F,contentAttrs:D,contentClass:V,contentStyle:H,updateZIndex:Q}=Hke(r,{styles:C,attributes:A,role:M}),G=mn(om,void 0),W=Me();Rr(xce,{arrowStyle:F,arrowRef:v,arrowOffset:W}),G&&(G.addInputId||G.removeInputId)&&Rr(om,{...G,addInputId:co,removeInputId:co});let te;const q=(ee=!0)=>{I(),ee&&Q()},Y=()=>{q(!1),r.visible&&r.focusOnShow?s.value=!0:r.visible===!1&&(s.value=!1)};return dr(()=>{zt(()=>r.triggerTargetEl,(ee,ce)=>{te==null||te(),te=void 0;const se=T(ee||y.value),le=T(ce||y.value);Ep(se)&&(te=zt([M,()=>r.ariaLabel,P,()=>r.id],ie=>{["role","aria-label","aria-modal","id"].forEach((pe,ue)=>{eu(ie[ue])?se.removeAttribute(pe):se.setAttribute(pe,ie[ue])})},{immediate:!0})),le!==se&&Ep(le)&&["role","aria-label","aria-modal","id"].forEach(ie=>{le.removeAttribute(ie)})},{immediate:!0}),zt(()=>r.visible,Y,{immediate:!0})}),Do(()=>{te==null||te(),te=void 0}),e({popperContentRef:y,popperInstanceRef:x,updatePopper:q,contentStyle:H}),(ee,ce)=>(ve(),Ue("div",Gi({ref_key:"contentRef",ref:y},T(D),{style:T(H),class:T(V),tabindex:"-1",onMouseenter:ce[0]||(ce[0]=se=>ee.$emit("mouseenter",se)),onMouseleave:ce[1]||(ce[1]=se=>ee.$emit("mouseleave",se))}),[pt(T(ZB),{trapped:T(s),"trap-on-focus-in":!0,"focus-trap-el":T(y),"focus-start-el":T(i),onFocusAfterTrapped:T(l),onFocusAfterReleased:T(a),onFocusin:T(o),onFocusoutPrevented:T(d),onReleaseRequested:T(p)},{default:It(()=>[kt(ee.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var Kke=Fn(jke,[["__file","content.vue"]]);const Lce=_i(Ake),v2=Symbol("elTooltip"),qc=Ln({...L5e,...Mce,appendTo:{type:Mt([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,visible:{type:Mt(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Eu(["ariaLabel"])}),QI=Ln({...Ice,disabled:Boolean,trigger:{type:Mt([String,Array]),default:"hover"},triggerKeys:{type:Mt(Array),default:()=>[Fr.enter,Fr.space]}}),{useModelToggleProps:Wke,useModelToggleEmits:qke,useModelToggle:Yke}=Vle("visible"),Xke=Ln({...Cce,...Wke,...qc,...QI,...Ece,showArrow:{type:Boolean,default:!0}}),Zke=[...qke,"before-show","before-hide","show","hide","open","close"],Jke=(t,e)=>Jn(t)?t.includes(e):t===e,Ww=(t,e,n)=>r=>{Jke(T(t),e)&&n(r)},eDe=Ge({name:"ElTooltipTrigger"}),tDe=Ge({...eDe,props:QI,setup(t,{expose:e}){const n=t,r=_n("tooltip"),{controlled:i,id:s,open:a,onOpen:l,onClose:o,onToggle:d}=mn(v2,void 0),p=Me(null),A=()=>{if(T(i)||n.disabled)return!0},v=Io(n,"trigger"),y=Wa(A,Ww(v,"hover",l)),C=Wa(A,Ww(v,"hover",o)),x=Wa(A,Ww(v,"click",D=>{D.button===0&&d(D)})),M=Wa(A,Ww(v,"focus",l)),I=Wa(A,Ww(v,"focus",o)),P=Wa(A,Ww(v,"contextmenu",D=>{D.preventDefault(),d(D)})),F=Wa(A,D=>{const{code:V}=D;n.triggerKeys.includes(V)&&(D.preventDefault(),d(D))});return e({triggerRef:p}),(D,V)=>(ve(),qt(T(wke),{id:T(s),"virtual-ref":D.virtualRef,open:T(a),"virtual-triggering":D.virtualTriggering,class:xe(T(r).e("trigger")),onBlur:T(I),onClick:T(x),onContextmenu:T(P),onFocus:T(M),onMouseenter:T(y),onMouseleave:T(C),onKeydown:T(F)},{default:It(()=>[kt(D.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var nDe=Fn(tDe,[["__file","trigger.vue"]]);const rDe=Ge({name:"ElTooltipContent",inheritAttrs:!1}),iDe=Ge({...rDe,props:qc,setup(t,{expose:e}){const n=t,{selector:r}=tce(),i=_n("tooltip"),s=Me(null),a=Me(!1),{controlled:l,id:o,open:d,trigger:p,onClose:A,onOpen:v,onShow:y,onHide:C,onBeforeShow:x,onBeforeHide:M}=mn(v2,void 0),I=oe(()=>n.transition||`${i.namespace.value}-fade-in-linear`),P=oe(()=>n.persistent);Do(()=>{a.value=!0});const F=oe(()=>T(P)?!0:T(d)),D=oe(()=>n.disabled?!1:T(d)),V=oe(()=>n.appendTo||r.value),H=oe(()=>{var ie;return(ie=n.style)!=null?ie:{}}),Q=oe(()=>!T(d)),G=()=>{C()},W=()=>{if(T(l))return!0},te=Wa(W,()=>{n.enterable&&T(p)==="hover"&&v()}),q=Wa(W,()=>{T(p)==="hover"&&A()}),Y=()=>{var ie,pe;(pe=(ie=s.value)==null?void 0:ie.updatePopper)==null||pe.call(ie),x==null||x()},ee=()=>{M==null||M()},ce=()=>{y(),le=cV(oe(()=>{var ie;return(ie=s.value)==null?void 0:ie.popperContentRef}),()=>{if(T(l))return;T(p)!=="hover"&&A()})},se=()=>{n.virtualTriggering||A()};let le;return zt(()=>T(d),ie=>{ie||le==null||le()},{flush:"post"}),zt(()=>n.content,()=>{var ie,pe;(pe=(ie=s.value)==null?void 0:ie.updatePopper)==null||pe.call(ie)}),e({contentRef:s}),(ie,pe)=>(ve(),qt(yE,{disabled:!ie.teleported,to:T(V)},[pt(fc,{name:T(I),onAfterLeave:G,onBeforeEnter:Y,onAfterEnter:ce,onBeforeLeave:ee},{default:It(()=>[T(F)?ci((ve(),qt(T(Kke),Gi({key:0,id:T(o),ref_key:"contentRef",ref:s},ie.$attrs,{"aria-label":ie.ariaLabel,"aria-hidden":T(Q),"boundaries-padding":ie.boundariesPadding,"fallback-placements":ie.fallbackPlacements,"gpu-acceleration":ie.gpuAcceleration,offset:ie.offset,placement:ie.placement,"popper-options":ie.popperOptions,strategy:ie.strategy,effect:ie.effect,enterable:ie.enterable,pure:ie.pure,"popper-class":ie.popperClass,"popper-style":[ie.popperStyle,T(H)],"reference-el":ie.referenceEl,"trigger-target-el":ie.triggerTargetEl,visible:T(D),"z-index":ie.zIndex,onMouseenter:T(te),onMouseleave:T(q),onBlur:se,onClose:T(A)}),{default:It(()=>[a.value?wt("v-if",!0):kt(ie.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Hs,T(D)]]):wt("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var sDe=Fn(iDe,[["__file","content.vue"]]);const oDe=["innerHTML"],aDe={key:1},lDe=Ge({name:"ElTooltip"}),cDe=Ge({...lDe,props:Xke,emits:Zke,setup(t,{expose:e,emit:n}){const r=t;M5e();const i=Hu(),s=Me(),a=Me(),l=()=>{var I;const P=T(s);P&&((I=P.popperInstanceRef)==null||I.update())},o=Me(!1),d=Me(),{show:p,hide:A,hasUpdateHandler:v}=Yke({indicator:o,toggleReason:d}),{onOpen:y,onClose:C}=R5e({showAfter:Io(r,"showAfter"),hideAfter:Io(r,"hideAfter"),autoClose:Io(r,"autoClose"),open:p,close:A}),x=oe(()=>Sl(r.visible)&&!v.value);Rr(v2,{controlled:x,id:i,open:vE(o),trigger:Io(r,"trigger"),onOpen:I=>{y(I)},onClose:I=>{C(I)},onToggle:I=>{T(o)?C(I):y(I)},onShow:()=>{n("show",d.value)},onHide:()=>{n("hide",d.value)},onBeforeShow:()=>{n("before-show",d.value)},onBeforeHide:()=>{n("before-hide",d.value)},updatePopper:l}),zt(()=>r.disabled,I=>{I&&o.value&&(o.value=!1)});const M=I=>{var P,F;const D=(F=(P=a.value)==null?void 0:P.contentRef)==null?void 0:F.popperContentRef,V=(I==null?void 0:I.relatedTarget)||document.activeElement;return D&&D.contains(V)};return hoe(()=>o.value&&A()),e({popperRef:s,contentRef:a,isFocusInsideContent:M,updatePopper:l,onOpen:y,onClose:C,hide:A}),(I,P)=>(ve(),qt(T(Lce),{ref_key:"popperRef",ref:s,role:I.role},{default:It(()=>[pt(nDe,{disabled:I.disabled,trigger:I.trigger,"trigger-keys":I.triggerKeys,"virtual-ref":I.virtualRef,"virtual-triggering":I.virtualTriggering},{default:It(()=>[I.$slots.default?kt(I.$slots,"default",{key:0}):wt("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),pt(sDe,{ref_key:"contentRef",ref:a,"aria-label":I.ariaLabel,"boundaries-padding":I.boundariesPadding,content:I.content,disabled:I.disabled,effect:I.effect,enterable:I.enterable,"fallback-placements":I.fallbackPlacements,"hide-after":I.hideAfter,"gpu-acceleration":I.gpuAcceleration,offset:I.offset,persistent:I.persistent,"popper-class":I.popperClass,"popper-style":I.popperStyle,placement:I.placement,"popper-options":I.popperOptions,pure:I.pure,"raw-content":I.rawContent,"reference-el":I.referenceEl,"trigger-target-el":I.triggerTargetEl,"show-after":I.showAfter,strategy:I.strategy,teleported:I.teleported,transition:I.transition,"virtual-triggering":I.virtualTriggering,"z-index":I.zIndex,"append-to":I.appendTo},{default:It(()=>[kt(I.$slots,"content",{},()=>[I.rawContent?(ve(),Ue("span",{key:0,innerHTML:I.content},null,8,oDe)):(ve(),Ue("span",aDe,Nn(I.content),1))]),I.showArrow?(ve(),qt(T(vke),{key:0,"arrow-offset":I.arrowOffset},null,8,["arrow-offset"])):wt("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var uDe=Fn(cDe,[["__file","tooltip.vue"]]);const _h=_i(uDe),hDe=Ln({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Mt(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Mt([Function,Array]),default:co},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:qc.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...Eu(["ariaLabel"])}),dDe={[Si]:t=>Xr(t),[zh]:t=>Xr(t),[Qo]:t=>Xr(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,select:t=>xi(t)},fDe=["aria-expanded","aria-owns"],pDe={key:0},ADe=["id","aria-selected","onClick"],Rce="ElAutocomplete",gDe=Ge({name:Rce,inheritAttrs:!1}),mDe=Ge({...gDe,props:hDe,emits:dDe,setup(t,{expose:e,emit:n}){const r=t,i=NV(),s=Ra(),a=jh(),l=_n("autocomplete"),o=Me(),d=Me(),p=Me(),A=Me();let v=!1,y=!1;const C=Me([]),x=Me(-1),M=Me(""),I=Me(!1),P=Me(!1),F=Me(!1),D=Hu(),V=oe(()=>s.style),H=oe(()=>(C.value.length>0||F.value)&&I.value),Q=oe(()=>!r.hideLoading&&F.value),G=oe(()=>o.value?Array.from(o.value.$el.querySelectorAll("input")):[]),W=()=>{H.value&&(M.value=`${o.value.$el.offsetWidth}px`)},te=()=>{x.value=-1},Y=Rd(async Re=>{if(P.value)return;const Ie=Ne=>{F.value=!1,!P.value&&(Jn(Ne)?(C.value=Ne,x.value=r.highlightFirstItem?0:-1):pc(Rce,"autocomplete suggestions must be an array"))};if(F.value=!0,Jn(r.fetchSuggestions))Ie(r.fetchSuggestions);else{const Ne=await r.fetchSuggestions(Re,Ie);Jn(Ne)&&Ie(Ne)}},r.debounce),ee=Re=>{const Ie=!!Re;if(n(zh,Re),n(Si,Re),P.value=!1,I.value||(I.value=Ie),!r.triggerOnFocus&&!Re){P.value=!0,C.value=[];return}Y(Re)},ce=Re=>{var Ie;a.value||(((Ie=Re.target)==null?void 0:Ie.tagName)!=="INPUT"||G.value.includes(document.activeElement))&&(I.value=!0)},se=Re=>{n(Qo,Re)},le=Re=>{y?y=!1:(I.value=!0,n("focus",Re),r.triggerOnFocus&&!v&&Y(String(r.modelValue)))},ie=Re=>{setTimeout(()=>{var Ie;if((Ie=p.value)!=null&&Ie.isFocusInsideContent()){y=!0;return}I.value&&Le(),n("blur",Re)})},pe=()=>{I.value=!1,n(Si,""),n("clear")},ue=async()=>{H.value&&x.value>=0&&x.value<C.value.length?_e(C.value[x.value]):r.selectWhenUnmatched&&(n("select",{value:r.modelValue}),C.value=[],x.value=-1)},me=Re=>{H.value&&(Re.preventDefault(),Re.stopPropagation(),Le())},Le=()=>{I.value=!1},ae=()=>{var Re;(Re=o.value)==null||Re.focus()},be=()=>{var Re;(Re=o.value)==null||Re.blur()},_e=async Re=>{n(zh,Re[r.valueKey]),n(Si,Re[r.valueKey]),n("select",Re),C.value=[],x.value=-1},$e=Re=>{if(!H.value||F.value)return;if(Re<0){x.value=-1;return}Re>=C.value.length&&(Re=C.value.length-1);const Ie=d.value.querySelector(`.${l.be("suggestion","wrap")}`),Je=Ie.querySelectorAll(`.${l.be("suggestion","list")} li`)[Re],je=Ie.scrollTop,{offsetTop:ft,scrollHeight:Et}=Je;ft+Et>je+Ie.clientHeight&&(Ie.scrollTop+=Et),ft<je&&(Ie.scrollTop-=Et),x.value=Re,o.value.ref.setAttribute("aria-activedescendant",`${D.value}-item-${x.value}`)};return cV(A,()=>{H.value&&Le()}),dr(()=>{o.value.ref.setAttribute("role","textbox"),o.value.ref.setAttribute("aria-autocomplete","list"),o.value.ref.setAttribute("aria-controls","id"),o.value.ref.setAttribute("aria-activedescendant",`${D.value}-item-${x.value}`),v=o.value.ref.hasAttribute("readonly")}),e({highlightedIndex:x,activated:I,loading:F,inputRef:o,popperRef:p,suggestions:C,handleSelect:_e,handleKeyEnter:ue,focus:ae,blur:be,close:Le,highlight:$e}),(Re,Ie)=>(ve(),qt(T(_h),{ref_key:"popperRef",ref:p,visible:T(H),placement:Re.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[T(l).e("popper"),Re.popperClass],teleported:Re.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${T(l).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:W,onHide:te},{content:It(()=>[rt("div",{ref_key:"regionRef",ref:d,class:xe([T(l).b("suggestion"),T(l).is("loading",T(Q))]),style:vr({[Re.fitInputWidth?"width":"minWidth"]:M.value,outline:"none"}),role:"region"},[pt(T(d0),{id:T(D),tag:"ul","wrap-class":T(l).be("suggestion","wrap"),"view-class":T(l).be("suggestion","list"),role:"listbox"},{default:It(()=>[T(Q)?(ve(),Ue("li",pDe,[kt(Re.$slots,"loading",{},()=>[pt(T(mr),{class:xe(T(l).is("loading"))},{default:It(()=>[pt(T(C_))]),_:1},8,["class"])])])):(ve(!0),Ue(_r,{key:1},cs(C.value,(Ne,Je)=>(ve(),Ue("li",{id:`${T(D)}-item-${Je}`,key:Je,class:xe({highlighted:x.value===Je}),role:"option","aria-selected":x.value===Je,onClick:je=>_e(Ne)},[kt(Re.$slots,"default",{item:Ne},()=>[gs(Nn(Ne[Re.valueKey]),1)])],10,ADe))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:It(()=>[rt("div",{ref_key:"listboxRef",ref:A,class:xe([T(l).b(),Re.$attrs.class]),style:vr(T(V)),role:"combobox","aria-haspopup":"listbox","aria-expanded":T(H),"aria-owns":T(D)},[pt(T(mh),Gi({ref_key:"inputRef",ref:o},T(i),{clearable:Re.clearable,disabled:T(a),name:Re.name,"model-value":Re.modelValue,"aria-label":Re.ariaLabel,onInput:ee,onChange:se,onFocus:le,onBlur:ie,onClear:pe,onKeydown:[Ie[0]||(Ie[0]=bo(qr(Ne=>$e(x.value-1),["prevent"]),["up"])),Ie[1]||(Ie[1]=bo(qr(Ne=>$e(x.value+1),["prevent"]),["down"])),bo(ue,["enter"]),bo(Le,["tab"]),bo(me,["esc"])],onMousedown:ce}),Gv({_:2},[Re.$slots.prepend?{name:"prepend",fn:It(()=>[kt(Re.$slots,"prepend")])}:void 0,Re.$slots.append?{name:"append",fn:It(()=>[kt(Re.$slots,"append")])}:void 0,Re.$slots.prefix?{name:"prefix",fn:It(()=>[kt(Re.$slots,"prefix")])}:void 0,Re.$slots.suffix?{name:"suffix",fn:It(()=>[kt(Re.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,fDe)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var vDe=Fn(mDe,[["__file","autocomplete.vue"]]);const yDe=_i(vDe),_De=Ln({size:{type:[Number,String],values:dm,default:"",validator:t=>Hr(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:wo},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Mt(String),default:"cover"}}),bDe={error:t=>t instanceof Event},wDe=["src","alt","srcset"],xDe=Ge({name:"ElAvatar"}),CDe=Ge({...xDe,props:_De,emits:bDe,setup(t,{emit:e}){const n=t,r=_n("avatar"),i=Me(!1),s=oe(()=>{const{size:d,icon:p,shape:A}=n,v=[r.b()];return Xr(d)&&v.push(r.m(d)),p&&v.push(r.m("icon")),A&&v.push(r.m(A)),v}),a=oe(()=>{const{size:d}=n;return Hr(d)?r.cssVarBlock({size:Ja(d)||""}):void 0}),l=oe(()=>({objectFit:n.fit}));zt(()=>n.src,()=>i.value=!1);function o(d){i.value=!0,e("error",d)}return(d,p)=>(ve(),Ue("span",{class:xe(T(s)),style:vr(T(a))},[(d.src||d.srcSet)&&!i.value?(ve(),Ue("img",{key:0,src:d.src,alt:d.alt,srcset:d.srcSet,style:vr(T(l)),onError:o},null,44,wDe)):d.icon?(ve(),qt(T(mr),{key:1},{default:It(()=>[(ve(),qt(Mi(d.icon)))]),_:1})):kt(d.$slots,"default",{key:2})],6))}});var EDe=Fn(CDe,[["__file","avatar.vue"]]);const SDe=_i(EDe),TDe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},IDe={click:t=>t instanceof MouseEvent},BDe=(t,e,n)=>{const r=Ds(),i=Ds(),s=Me(!1),a=()=>{r.value&&(s.value=r.value.scrollTop>=t.visibilityHeight)},l=d=>{var p;(p=r.value)==null||p.scrollTo({top:0,behavior:"smooth"}),e("click",d)},o=kae(a,300,!0);return Vo(i,"scroll",o),dr(()=>{var d;i.value=document,r.value=document.documentElement,t.target&&(r.value=(d=document.querySelector(t.target))!=null?d:void 0,r.value||pc(n,`target does not exist: ${t.target}`),i.value=r.value),a()}),{visible:s,handleClick:l}},Pce="ElBacktop",MDe=Ge({name:Pce}),LDe=Ge({...MDe,props:TDe,emits:IDe,setup(t,{emit:e}){const n=t,r=_n("backtop"),{handleClick:i,visible:s}=BDe(n,e,Pce),a=oe(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(l,o)=>(ve(),qt(fc,{name:`${T(r).namespace.value}-fade-in`},{default:It(()=>[T(s)?(ve(),Ue("div",{key:0,style:vr(T(a)),class:xe(T(r).b()),onClick:o[0]||(o[0]=qr((...d)=>T(i)&&T(i)(...d),["stop"]))},[kt(l.$slots,"default",{},()=>[pt(T(mr),{class:xe(T(r).e("icon"))},{default:It(()=>[pt(T(oFe))]),_:1},8,["class"])])],6)):wt("v-if",!0)]),_:3},8,["name"]))}});var RDe=Fn(LDe,[["__file","backtop.vue"]]);const PDe=_i(RDe),FDe=Ln({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,dotStyle:{type:Mt([String,Object,Array])},badgeStyle:{type:Mt([String,Object,Array])},offset:{type:Mt(Array),default:[0,0]},dotClass:{type:String},badgeClass:{type:String}}),ODe=["textContent"],NDe=Ge({name:"ElBadge"}),kDe=Ge({...NDe,props:FDe,setup(t,{expose:e}){const n=t,r=_n("badge"),i=oe(()=>n.isDot?"":Hr(n.value)&&Hr(n.max)?n.max<n.value?`${n.max}+`:n.value===0&&!n.showZero?"":`${n.value}`:`${n.value}`),s=oe(()=>{var a,l,o,d,p,A;return[{backgroundColor:n.color,marginRight:Ja(-((l=(a=n.offset)==null?void 0:a[0])!=null?l:0)),marginTop:Ja((d=(o=n.offset)==null?void 0:o[1])!=null?d:0)},(p=n.dotStyle)!=null?p:{},(A=n.badgeStyle)!=null?A:{}]});return Jc({from:"dot-style",replacement:"badge-style",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},oe(()=>!!n.dotStyle)),Jc({from:"dot-class",replacement:"badge-class",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},oe(()=>!!n.dotClass)),e({content:i}),(a,l)=>(ve(),Ue("div",{class:xe(T(r).b())},[kt(a.$slots,"default"),pt(fc,{name:`${T(r).namespace.value}-zoom-in-center`,persisted:""},{default:It(()=>[ci(rt("sup",{class:xe([T(r).e("content"),T(r).em("content",a.type),T(r).is("fixed",!!a.$slots.default),T(r).is("dot",a.isDot),a.dotClass,a.badgeClass]),style:vr(T(s)),textContent:Nn(T(i))},null,14,ODe),[[Hs,!a.hidden&&(T(i)||a.isDot)]])]),_:1},8,["name"])],2))}});var DDe=Fn(kDe,[["__file","badge.vue"]]);const Fce=_i(DDe),Oce=Symbol("breadcrumbKey"),UDe=Ln({separator:{type:String,default:"/"},separatorIcon:{type:wo}}),zDe=["aria-label"],$De=Ge({name:"ElBreadcrumb"}),VDe=Ge({...$De,props:UDe,setup(t){const e=t,{t:n}=Ts(),r=_n("breadcrumb"),i=Me();return Rr(Oce,e),dr(()=>{const s=i.value.querySelectorAll(`.${r.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,a)=>(ve(),Ue("div",{ref_key:"breadcrumb",ref:i,class:xe(T(r).b()),"aria-label":T(n)("el.breadcrumb.label"),role:"navigation"},[kt(s.$slots,"default")],10,zDe))}});var HDe=Fn(VDe,[["__file","breadcrumb.vue"]]);const GDe=Ln({to:{type:Mt([String,Object]),default:""},replace:{type:Boolean,default:!1}}),QDe=Ge({name:"ElBreadcrumbItem"}),jDe=Ge({...QDe,props:GDe,setup(t){const e=t,n=mi(),r=mn(Oce,void 0),i=_n("breadcrumb"),s=n.appContext.config.globalProperties.$router,a=Me(),l=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(o,d)=>{var p,A;return ve(),Ue("span",{class:xe(T(i).e("item"))},[rt("span",{ref_key:"link",ref:a,class:xe([T(i).e("inner"),T(i).is("link",!!o.to)]),role:"link",onClick:l},[kt(o.$slots,"default")],2),(p=T(r))!=null&&p.separatorIcon?(ve(),qt(T(mr),{key:0,class:xe(T(i).e("separator"))},{default:It(()=>[(ve(),qt(Mi(T(r).separatorIcon)))]),_:1},8,["class"])):(ve(),Ue("span",{key:1,class:xe(T(i).e("separator")),role:"presentation"},Nn((A=T(r))==null?void 0:A.separator),3))],2)}}});var Nce=Fn(jDe,[["__file","breadcrumb-item.vue"]]);const KDe=_i(HDe,{BreadcrumbItem:Nce}),WDe=Pa(Nce),kce=Symbol("buttonGroupContextKey"),qDe=(t,e)=>{Jc({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},oe(()=>t.type==="text"));const n=mn(kce,void 0),r=YB("button"),{form:i}=bh(),s=Gl(oe(()=>n==null?void 0:n.size)),a=jh(),l=Me(),o=Uc(),d=oe(()=>t.type||(n==null?void 0:n.type)||""),p=oe(()=>{var C,x,M;return(M=(x=t.autoInsertSpace)!=null?x:(C=r.value)==null?void 0:C.autoInsertSpace)!=null?M:!1}),A=oe(()=>t.tag==="button"?{ariaDisabled:a.value||t.loading,disabled:a.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),v=oe(()=>{var C;const x=(C=o.default)==null?void 0:C.call(o);if(p.value&&(x==null?void 0:x.length)===1){const M=x[0];if((M==null?void 0:M.type)===_E){const I=M.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(I.trim())}}return!1});return{_disabled:a,_size:s,_type:d,_ref:l,_props:A,shouldAddSpace:v,handleClick:C=>{t.nativeType==="reset"&&(i==null||i.resetFields()),e("click",C)}}},w3=["default","primary","success","warning","info","danger","text",""],YDe=["button","submit","reset"],x3=Ln({size:Nc,disabled:Boolean,type:{type:String,values:w3,default:""},icon:{type:wo},nativeType:{type:String,values:YDe,default:"button"},loading:Boolean,loadingIcon:{type:wo,default:()=>C_},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Mt([String,Object]),default:"button"}}),XDe={click:t=>t instanceof MouseEvent};function Vu(t,e){ZDe(t)&&(t="100%");var n=JDe(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function mR(t){return Math.min(1,Math.max(0,t))}function ZDe(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function JDe(t){return typeof t=="string"&&t.indexOf("%")!==-1}function Dce(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function vR(t){return t<=1?"".concat(Number(t)*100,"%"):t}function z1(t){return t.length===1?"0"+t:String(t)}function e4e(t,e,n){return{r:Vu(t,255)*255,g:Vu(e,255)*255,b:Vu(n,255)*255}}function _Z(t,e,n){t=Vu(t,255),e=Vu(e,255),n=Vu(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s=0,a=0,l=(r+i)/2;if(r===i)a=0,s=0;else{var o=r-i;switch(a=l>.5?o/(2-r-i):o/(r+i),r){case t:s=(e-n)/o+(e<n?6:0);break;case e:s=(n-t)/o+2;break;case n:s=(t-e)/o+4;break}s/=6}return{h:s,s:a,l}}function QD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function t4e(t,e,n){var r,i,s;if(t=Vu(t,360),e=Vu(e,100),n=Vu(n,100),e===0)i=n,s=n,r=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=QD(l,a,t+1/3),i=QD(l,a,t),s=QD(l,a,t-1/3)}return{r:r*255,g:i*255,b:s*255}}function bZ(t,e,n){t=Vu(t,255),e=Vu(e,255),n=Vu(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),s=0,a=r,l=r-i,o=r===0?0:l/r;if(r===i)s=0;else{switch(r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function n4e(t,e,n){t=Vu(t,360)*6,e=Vu(e,100),n=Vu(n,100);var r=Math.floor(t),i=t-r,s=n*(1-e),a=n*(1-i*e),l=n*(1-(1-i)*e),o=r%6,d=[n,a,s,s,l,n][o],p=[l,n,n,a,s,s][o],A=[s,s,l,n,n,a][o];return{r:d*255,g:p*255,b:A*255}}function wZ(t,e,n,r){var i=[z1(Math.round(t).toString(16)),z1(Math.round(e).toString(16)),z1(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function r4e(t,e,n,r,i){var s=[z1(Math.round(t).toString(16)),z1(Math.round(e).toString(16)),z1(Math.round(n).toString(16)),z1(i4e(r))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function i4e(t){return Math.round(parseFloat(t)*255).toString(16)}function xZ(t){return wf(t)/255}function wf(t){return parseInt(t,16)}function s4e(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var C3={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function o4e(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,l=!1;return typeof t=="string"&&(t=c4e(t)),typeof t=="object"&&(hv(t.r)&&hv(t.g)&&hv(t.b)?(e=e4e(t.r,t.g,t.b),a=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):hv(t.h)&&hv(t.s)&&hv(t.v)?(r=vR(t.s),i=vR(t.v),e=n4e(t.h,r,i),a=!0,l="hsv"):hv(t.h)&&hv(t.s)&&hv(t.l)&&(r=vR(t.s),s=vR(t.l),e=t4e(t.h,r,s),a=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=Dce(n),{ok:a,format:t.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var a4e="[-\\+]?\\d+%?",l4e="[-\\+]?\\d*\\.\\d+%?",My="(?:".concat(l4e,")|(?:").concat(a4e,")"),jD="[\\s|\\(]+(".concat(My,")[,|\\s]+(").concat(My,")[,|\\s]+(").concat(My,")\\s*\\)?"),KD="[\\s|\\(]+(".concat(My,")[,|\\s]+(").concat(My,")[,|\\s]+(").concat(My,")[,|\\s]+(").concat(My,")\\s*\\)?"),_A={CSS_UNIT:new RegExp(My),rgb:new RegExp("rgb"+jD),rgba:new RegExp("rgba"+KD),hsl:new RegExp("hsl"+jD),hsla:new RegExp("hsla"+KD),hsv:new RegExp("hsv"+jD),hsva:new RegExp("hsva"+KD),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function c4e(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(C3[t])t=C3[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=_A.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=_A.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=_A.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=_A.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=_A.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=_A.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=_A.hex8.exec(t),n?{r:wf(n[1]),g:wf(n[2]),b:wf(n[3]),a:xZ(n[4]),format:e?"name":"hex8"}:(n=_A.hex6.exec(t),n?{r:wf(n[1]),g:wf(n[2]),b:wf(n[3]),format:e?"name":"hex"}:(n=_A.hex4.exec(t),n?{r:wf(n[1]+n[1]),g:wf(n[2]+n[2]),b:wf(n[3]+n[3]),a:xZ(n[4]+n[4]),format:e?"name":"hex8"}:(n=_A.hex3.exec(t),n?{r:wf(n[1]+n[1]),g:wf(n[2]+n[2]),b:wf(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function hv(t){return!!_A.CSS_UNIT.exec(String(t))}var Uce=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=s4e(e)),this.originalInput=e;var i=o4e(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,i,s=e.r/255,a=e.g/255,l=e.b/255;return s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),l<=.03928?i=l/12.92:i=Math.pow((l+.055)/1.055,2.4),.2126*n+.7152*r+.0722*i},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=Dce(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=bZ(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=bZ(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=_Z(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=_Z(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),wZ(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),r4e(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(Vu(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(Vu(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+wZ(this.r,this.g,this.b,!1),n=0,r=Object.entries(C3);n<r.length;n++){var i=r[n],s=i[0],a=i[1];if(e===a)return s}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,s=!n&&i&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=mR(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=mR(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=mR(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=mR(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),i=new t(e).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return new t(a)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),i=360/n,s=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(new t(r));return s},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,i=n.s,s=n.v,a=[],l=1/e;e--;)a.push(new t({h:r,s:i,v:s})),s=(s+l)%1;return a},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),i=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,i=[this],s=360/e,a=1;a<e;a++)i.push(new t({h:(r+a*s)%360,s:n.s,l:n.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function ey(t,e=20){return t.mix("#141414",e).toString()}function u4e(t){const e=jh(),n=_n("button");return oe(()=>{let r={};const i=t.color;if(i){const s=new Uce(i),a=t.dark?s.tint(20).toString():ey(s,20);if(t.plain)r=n.cssVarBlock({"bg-color":t.dark?ey(s,90):s.tint(90).toString(),"text-color":i,"border-color":t.dark?ey(s,50):s.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":a,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":a}),e.value&&(r[n.cssVarBlockName("disabled-bg-color")]=t.dark?ey(s,90):s.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=t.dark?ey(s,50):s.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=t.dark?ey(s,80):s.tint(80).toString());else{const l=t.dark?ey(s,30):s.tint(30).toString(),o=s.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":i,"text-color":o,"border-color":i,"hover-bg-color":l,"hover-text-color":o,"hover-border-color":l,"active-bg-color":a,"active-border-color":a}),e.value){const d=t.dark?ey(s,50):s.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=d,r[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=d}}}return r})}const h4e=Ge({name:"ElButton"}),d4e=Ge({...h4e,props:x3,emits:XDe,setup(t,{expose:e,emit:n}){const r=t,i=u4e(r),s=_n("button"),{_ref:a,_size:l,_type:o,_disabled:d,_props:p,shouldAddSpace:A,handleClick:v}=qDe(r,n),y=oe(()=>[s.b(),s.m(o.value),s.m(l.value),s.is("disabled",d.value),s.is("loading",r.loading),s.is("plain",r.plain),s.is("round",r.round),s.is("circle",r.circle),s.is("text",r.text),s.is("link",r.link),s.is("has-bg",r.bg)]);return e({ref:a,size:l,type:o,disabled:d,shouldAddSpace:A}),(C,x)=>(ve(),qt(Mi(C.tag),Gi({ref_key:"_ref",ref:a},T(p),{class:T(y),style:T(i),onClick:T(v)}),{default:It(()=>[C.loading?(ve(),Ue(_r,{key:0},[C.$slots.loading?kt(C.$slots,"loading",{key:0}):(ve(),qt(T(mr),{key:1,class:xe(T(s).is("loading"))},{default:It(()=>[(ve(),qt(Mi(C.loadingIcon)))]),_:1},8,["class"]))],64)):C.icon||C.$slots.icon?(ve(),qt(T(mr),{key:1},{default:It(()=>[C.icon?(ve(),qt(Mi(C.icon),{key:0})):kt(C.$slots,"icon",{key:1})]),_:3})):wt("v-if",!0),C.$slots.default?(ve(),Ue("span",{key:2,class:xe({[T(s).em("text","expand")]:T(A)})},[kt(C.$slots,"default")],2)):wt("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var f4e=Fn(d4e,[["__file","button.vue"]]);const p4e={size:x3.size,type:x3.type},A4e=Ge({name:"ElButtonGroup"}),g4e=Ge({...A4e,props:p4e,setup(t){const e=t;Rr(kce,Xs({size:Io(e,"size"),type:Io(e,"type")}));const n=_n("button");return(r,i)=>(ve(),Ue("div",{class:xe(`${T(n).b("group")}`)},[kt(r.$slots,"default")],2))}});var zce=Fn(g4e,[["__file","button-group.vue"]]);const tu=_i(f4e,{ButtonGroup:zce}),$ce=Pa(zce);var Vce={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",a="second",l="minute",o="hour",d="day",p="week",A="month",v="quarter",y="year",C="date",x="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ce){var se=["th","st","nd","rd"],le=ce%100;return"["+ce+(se[(le-20)%10]||se[le]||se[0])+"]"}},F=function(ce,se,le){var ie=String(ce);return!ie||ie.length>=se?ce:""+Array(se+1-ie.length).join(le)+ce},D={s:F,z:function(ce){var se=-ce.utcOffset(),le=Math.abs(se),ie=Math.floor(le/60),pe=le%60;return(se<=0?"+":"-")+F(ie,2,"0")+":"+F(pe,2,"0")},m:function ce(se,le){if(se.date()<le.date())return-ce(le,se);var ie=12*(le.year()-se.year())+(le.month()-se.month()),pe=se.clone().add(ie,A),ue=le-pe<0,me=se.clone().add(ie+(ue?-1:1),A);return+(-(ie+(le-pe)/(ue?pe-me:me-pe))||0)},a:function(ce){return ce<0?Math.ceil(ce)||0:Math.floor(ce)},p:function(ce){return{M:A,y,w:p,d,D:C,h:o,m:l,s:a,ms:s,Q:v}[ce]||String(ce||"").toLowerCase().replace(/s$/,"")},u:function(ce){return ce===void 0}},V="en",H={};H[V]=P;var Q="$isDayjsObject",G=function(ce){return ce instanceof Y||!(!ce||!ce[Q])},W=function ce(se,le,ie){var pe;if(!se)return V;if(typeof se=="string"){var ue=se.toLowerCase();H[ue]&&(pe=ue),le&&(H[ue]=le,pe=ue);var me=se.split("-");if(!pe&&me.length>1)return ce(me[0])}else{var Le=se.name;H[Le]=se,pe=Le}return!ie&&pe&&(V=pe),pe||!ie&&V},te=function(ce,se){if(G(ce))return ce.clone();var le=typeof se=="object"?se:{};return le.date=ce,le.args=arguments,new Y(le)},q=D;q.l=W,q.i=G,q.w=function(ce,se){return te(ce,{locale:se.$L,utc:se.$u,x:se.$x,$offset:se.$offset})};var Y=function(){function ce(le){this.$L=W(le.locale,null,!0),this.parse(le),this.$x=this.$x||le.x||{},this[Q]=!0}var se=ce.prototype;return se.parse=function(le){this.$d=function(ie){var pe=ie.date,ue=ie.utc;if(pe===null)return new Date(NaN);if(q.u(pe))return new Date;if(pe instanceof Date)return new Date(pe);if(typeof pe=="string"&&!/Z$/i.test(pe)){var me=pe.match(M);if(me){var Le=me[2]-1||0,ae=(me[7]||"0").substring(0,3);return ue?new Date(Date.UTC(me[1],Le,me[3]||1,me[4]||0,me[5]||0,me[6]||0,ae)):new Date(me[1],Le,me[3]||1,me[4]||0,me[5]||0,me[6]||0,ae)}}return new Date(pe)}(le),this.init()},se.init=function(){var le=this.$d;this.$y=le.getFullYear(),this.$M=le.getMonth(),this.$D=le.getDate(),this.$W=le.getDay(),this.$H=le.getHours(),this.$m=le.getMinutes(),this.$s=le.getSeconds(),this.$ms=le.getMilliseconds()},se.$utils=function(){return q},se.isValid=function(){return this.$d.toString()!==x},se.isSame=function(le,ie){var pe=te(le);return this.startOf(ie)<=pe&&pe<=this.endOf(ie)},se.isAfter=function(le,ie){return te(le)<this.startOf(ie)},se.isBefore=function(le,ie){return this.endOf(ie)<te(le)},se.$g=function(le,ie,pe){return q.u(le)?this[ie]:this.set(pe,le)},se.unix=function(){return Math.floor(this.valueOf()/1e3)},se.valueOf=function(){return this.$d.getTime()},se.startOf=function(le,ie){var pe=this,ue=!!q.u(ie)||ie,me=q.p(le),Le=function(Je,je){var ft=q.w(pe.$u?Date.UTC(pe.$y,je,Je):new Date(pe.$y,je,Je),pe);return ue?ft:ft.endOf(d)},ae=function(Je,je){return q.w(pe.toDate()[Je].apply(pe.toDate("s"),(ue?[0,0,0,0]:[23,59,59,999]).slice(je)),pe)},be=this.$W,_e=this.$M,$e=this.$D,Re="set"+(this.$u?"UTC":"");switch(me){case y:return ue?Le(1,0):Le(31,11);case A:return ue?Le(1,_e):Le(0,_e+1);case p:var Ie=this.$locale().weekStart||0,Ne=(be<Ie?be+7:be)-Ie;return Le(ue?$e-Ne:$e+(6-Ne),_e);case d:case C:return ae(Re+"Hours",0);case o:return ae(Re+"Minutes",1);case l:return ae(Re+"Seconds",2);case a:return ae(Re+"Milliseconds",3);default:return this.clone()}},se.endOf=function(le){return this.startOf(le,!1)},se.$set=function(le,ie){var pe,ue=q.p(le),me="set"+(this.$u?"UTC":""),Le=(pe={},pe[d]=me+"Date",pe[C]=me+"Date",pe[A]=me+"Month",pe[y]=me+"FullYear",pe[o]=me+"Hours",pe[l]=me+"Minutes",pe[a]=me+"Seconds",pe[s]=me+"Milliseconds",pe)[ue],ae=ue===d?this.$D+(ie-this.$W):ie;if(ue===A||ue===y){var be=this.clone().set(C,1);be.$d[Le](ae),be.init(),this.$d=be.set(C,Math.min(this.$D,be.daysInMonth())).$d}else Le&&this.$d[Le](ae);return this.init(),this},se.set=function(le,ie){return this.clone().$set(le,ie)},se.get=function(le){return this[q.p(le)]()},se.add=function(le,ie){var pe,ue=this;le=Number(le);var me=q.p(ie),Le=function(_e){var $e=te(ue);return q.w($e.date($e.date()+Math.round(_e*le)),ue)};if(me===A)return this.set(A,this.$M+le);if(me===y)return this.set(y,this.$y+le);if(me===d)return Le(1);if(me===p)return Le(7);var ae=(pe={},pe[l]=r,pe[o]=i,pe[a]=n,pe)[me]||1,be=this.$d.getTime()+le*ae;return q.w(be,this)},se.subtract=function(le,ie){return this.add(-1*le,ie)},se.format=function(le){var ie=this,pe=this.$locale();if(!this.isValid())return pe.invalidDate||x;var ue=le||"YYYY-MM-DDTHH:mm:ssZ",me=q.z(this),Le=this.$H,ae=this.$m,be=this.$M,_e=pe.weekdays,$e=pe.months,Re=pe.meridiem,Ie=function(je,ft,Et,ke){return je&&(je[ft]||je(ie,ue))||Et[ft].slice(0,ke)},Ne=function(je){return q.s(Le%12||12,je,"0")},Je=Re||function(je,ft,Et){var ke=je<12?"AM":"PM";return Et?ke.toLowerCase():ke};return ue.replace(I,function(je,ft){return ft||function(Et){switch(Et){case"YY":return String(ie.$y).slice(-2);case"YYYY":return q.s(ie.$y,4,"0");case"M":return be+1;case"MM":return q.s(be+1,2,"0");case"MMM":return Ie(pe.monthsShort,be,$e,3);case"MMMM":return Ie($e,be);case"D":return ie.$D;case"DD":return q.s(ie.$D,2,"0");case"d":return String(ie.$W);case"dd":return Ie(pe.weekdaysMin,ie.$W,_e,2);case"ddd":return Ie(pe.weekdaysShort,ie.$W,_e,3);case"dddd":return _e[ie.$W];case"H":return String(Le);case"HH":return q.s(Le,2,"0");case"h":return Ne(1);case"hh":return Ne(2);case"a":return Je(Le,ae,!0);case"A":return Je(Le,ae,!1);case"m":return String(ae);case"mm":return q.s(ae,2,"0");case"s":return String(ie.$s);case"ss":return q.s(ie.$s,2,"0");case"SSS":return q.s(ie.$ms,3,"0");case"Z":return me}return null}(je)||me.replace(":","")})},se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},se.diff=function(le,ie,pe){var ue,me=this,Le=q.p(ie),ae=te(le),be=(ae.utcOffset()-this.utcOffset())*r,_e=this-ae,$e=function(){return q.m(me,ae)};switch(Le){case y:ue=$e()/12;break;case A:ue=$e();break;case v:ue=$e()/3;break;case p:ue=(_e-be)/6048e5;break;case d:ue=(_e-be)/864e5;break;case o:ue=_e/i;break;case l:ue=_e/r;break;case a:ue=_e/n;break;default:ue=_e}return pe?ue:q.a(ue)},se.daysInMonth=function(){return this.endOf(A).$D},se.$locale=function(){return H[this.$L]},se.locale=function(le,ie){if(!le)return this.$L;var pe=this.clone(),ue=W(le,ie,!0);return ue&&(pe.$L=ue),pe},se.clone=function(){return q.w(this.$d,this)},se.toDate=function(){return new Date(this.valueOf())},se.toJSON=function(){return this.isValid()?this.toISOString():null},se.toISOString=function(){return this.$d.toISOString()},se.toString=function(){return this.$d.toUTCString()},ce}(),ee=Y.prototype;return te.prototype=ee,[["$ms",s],["$s",a],["$m",l],["$H",o],["$W",d],["$M",A],["$y",y],["$D",C]].forEach(function(ce){ee[ce[1]]=function(se){return this.$g(se,ce[0],ce[1])}}),te.extend=function(ce,se){return ce.$i||(ce(se,Y,te),ce.$i=!0),te},te.locale=W,te.isDayjs=G,te.unix=function(ce){return te(1e3*ce)},te.en=H[V],te.Ls=H,te.p={},te})})(Vce);var m4e=Vce.exports;const wi=kf(m4e);var Hce={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,l={},o=function(x){return(x=+x)+(x>68?1900:2e3)},d=function(x){return function(M){this[x]=+M}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(x){(this.zone||(this.zone={})).offset=function(M){if(!M||M==="Z")return 0;var I=M.match(/([+-]|\d\d)/g),P=60*I[1]+(+I[2]||0);return P===0?0:I[0]==="+"?-P:P}(x)}],A=function(x){var M=l[x];return M&&(M.indexOf?M:M.s.concat(M.f))},v=function(x,M){var I,P=l.meridiem;if(P){for(var F=1;F<=24;F+=1)if(x.indexOf(P(F,0,M))>-1){I=F>12;break}}else I=x===(M?"pm":"PM");return I},y={A:[a,function(x){this.afternoon=v(x,!1)}],a:[a,function(x){this.afternoon=v(x,!0)}],S:[/\d/,function(x){this.milliseconds=100*+x}],SS:[i,function(x){this.milliseconds=10*+x}],SSS:[/\d{3}/,function(x){this.milliseconds=+x}],s:[s,d("seconds")],ss:[s,d("seconds")],m:[s,d("minutes")],mm:[s,d("minutes")],H:[s,d("hours")],h:[s,d("hours")],HH:[s,d("hours")],hh:[s,d("hours")],D:[s,d("day")],DD:[i,d("day")],Do:[a,function(x){var M=l.ordinal,I=x.match(/\d+/);if(this.day=I[0],M)for(var P=1;P<=31;P+=1)M(P).replace(/\[|\]/g,"")===x&&(this.day=P)}],M:[s,d("month")],MM:[i,d("month")],MMM:[a,function(x){var M=A("months"),I=(A("monthsShort")||M.map(function(P){return P.slice(0,3)})).indexOf(x)+1;if(I<1)throw new Error;this.month=I%12||I}],MMMM:[a,function(x){var M=A("months").indexOf(x)+1;if(M<1)throw new Error;this.month=M%12||M}],Y:[/[+-]?\d+/,d("year")],YY:[i,function(x){this.year=o(x)}],YYYY:[/\d{4}/,d("year")],Z:p,ZZ:p};function C(x){var M,I;M=x,I=l&&l.formats;for(var P=(x=M.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(W,te,q){var Y=q&&q.toUpperCase();return te||I[q]||n[q]||I[Y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ee,ce,se){return ce||se.slice(1)})})).match(r),F=P.length,D=0;D<F;D+=1){var V=P[D],H=y[V],Q=H&&H[0],G=H&&H[1];P[D]=G?{regex:Q,parser:G}:V.replace(/^\[|\]$/g,"")}return function(W){for(var te={},q=0,Y=0;q<F;q+=1){var ee=P[q];if(typeof ee=="string")Y+=ee.length;else{var ce=ee.regex,se=ee.parser,le=W.slice(Y),ie=ce.exec(le)[0];se.call(te,ie),W=W.replace(ie,"")}}return function(pe){var ue=pe.afternoon;if(ue!==void 0){var me=pe.hours;ue?me<12&&(pe.hours+=12):me===12&&(pe.hours=0),delete pe.afternoon}}(te),te}}return function(x,M,I){I.p.customParseFormat=!0,x&&x.parseTwoDigitYear&&(o=x.parseTwoDigitYear);var P=M.prototype,F=P.parse;P.parse=function(D){var V=D.date,H=D.utc,Q=D.args;this.$u=H;var G=Q[1];if(typeof G=="string"){var W=Q[2]===!0,te=Q[3]===!0,q=W||te,Y=Q[2];te&&(Y=Q[2]),l=this.$locale(),!W&&Y&&(l=I.Ls[Y]),this.$d=function(le,ie,pe){try{if(["x","X"].indexOf(ie)>-1)return new Date((ie==="X"?1e3:1)*le);var ue=C(ie)(le),me=ue.year,Le=ue.month,ae=ue.day,be=ue.hours,_e=ue.minutes,$e=ue.seconds,Re=ue.milliseconds,Ie=ue.zone,Ne=new Date,Je=ae||(me||Le?1:Ne.getDate()),je=me||Ne.getFullYear(),ft=0;me&&!Le||(ft=Le>0?Le-1:Ne.getMonth());var Et=be||0,ke=_e||0,Ye=$e||0,at=Re||0;return Ie?new Date(Date.UTC(je,ft,Je,Et,ke,Ye,at+60*Ie.offset*1e3)):pe?new Date(Date.UTC(je,ft,Je,Et,ke,Ye,at)):new Date(je,ft,Je,Et,ke,Ye,at)}catch{return new Date("")}}(V,G,H),this.init(),Y&&Y!==!0&&(this.$L=this.locale(Y).$L),q&&V!=this.format(G)&&(this.$d=new Date("")),l={}}else if(G instanceof Array)for(var ee=G.length,ce=1;ce<=ee;ce+=1){Q[1]=G[ce-1];var se=I.apply(this,Q);if(se.isValid()){this.$d=se.$d,this.$L=se.$L,this.init();break}ce===ee&&(this.$d=new Date(""))}else F.call(this,D)}}})})(Hce);var v4e=Hce.exports;const cH=kf(v4e),CZ=["hours","minutes","seconds"],E3="HH:mm:ss",xx="YYYY-MM-DD",y4e={date:xx,dates:xx,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",datetime:`${xx} ${E3}`,monthrange:"YYYY-MM",daterange:xx,datetimerange:`${xx} ${E3}`},WD=(t,e)=>[t>0?t-1:void 0,t,t<e?t+1:void 0],Gy=t=>Array.from(Array.from({length:t}).keys()),Gce=t=>t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),Qce=t=>t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),EZ=function(t,e){const n=mb(t),r=mb(e);return n&&r?t.getTime()===e.getTime():!n&&!r?t===e:!1},SZ=function(t,e){const n=Jn(t),r=Jn(e);return n&&r?t.length!==e.length?!1:t.every((i,s)=>EZ(i,e[s])):!n&&!r?EZ(t,e):!1},TZ=function(t,e,n){const r=up(e)||e==="x"?wi(t).locale(n):wi(t,e).locale(n);return r.isValid()?r:void 0},IZ=function(t,e,n){return up(e)?t:e==="x"?+t:wi(t).locale(n).format(e)},qD=(t,e)=>{var n;const r=[],i=e==null?void 0:e();for(let s=0;s<t;s++)r.push((n=i==null?void 0:i.includes(s))!=null?n:!1);return r},jce=Ln({disabledHours:{type:Mt(Function)},disabledMinutes:{type:Mt(Function)},disabledSeconds:{type:Mt(Function)}}),Kce=Ln({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),uH=Ln({id:{type:Mt([Array,String])},name:{type:Mt([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Mt([String,Object]),default:x_},editable:{type:Boolean,default:!0},prefixIcon:{type:Mt([String,Object]),default:""},size:Nc,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Mt(Object),default:()=>({})},modelValue:{type:Mt([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Mt([Date,Array])},defaultTime:{type:Mt([Date,Array])},isRange:Boolean,...jce,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,label:{type:String,default:void 0},tabindex:{type:Mt([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,...IE,...Eu(["ariaLabel"])}),_4e=["id","name","placeholder","value","disabled","readonly"],b4e=["id","name","placeholder","value","disabled","readonly"],w4e=Ge({name:"Picker"}),x4e=Ge({...w4e,props:uH,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(t,{expose:e,emit:n}){const r=t,i=Ra(),{lang:s}=Ts(),a=_n("date"),l=_n("input"),o=_n("range"),{form:d,formItem:p}=bh(),A=mn("ElPopperOptions",{}),{valueOnClear:v}=A2(r,null),y=Me(),C=Me(),x=Me(!1),M=Me(!1),I=Me(null);let P=!1,F=!1;const D=oe(()=>[a.b("editor"),a.bm("editor",r.type),l.e("wrapper"),a.is("disabled",be.value),a.is("active",x.value),o.b("editor"),Rt?o.bm("editor",Rt.value):"",i.class]),V=oe(()=>[l.e("icon"),o.e("close-icon"),ft.value?"":o.e("close-icon--hidden")]);zt(x,gt=>{gt?Tr(()=>{gt&&(I.value=r.modelValue)}):(xt.value=null,Tr(()=>{H(r.modelValue)}))});const H=(gt,hn)=>{(hn||!SZ(gt,I.value))&&(n("change",gt),r.validateEvent&&(p==null||p.validate("change").catch(rr=>void 0)))},Q=gt=>{if(!SZ(r.modelValue,gt)){let hn;Jn(gt)?hn=gt.map(rr=>IZ(rr,r.valueFormat,s.value)):gt&&(hn=IZ(gt,r.valueFormat,s.value)),n("update:modelValue",gt&&hn,s.value)}},G=gt=>{n("keydown",gt)},W=oe(()=>{if(C.value){const gt=Ut.value?C.value:C.value.$el;return Array.from(gt.querySelectorAll("input"))}return[]}),te=(gt,hn,rr)=>{const br=W.value;br.length&&(!rr||rr==="min"?(br[0].setSelectionRange(gt,hn),br[0].focus()):rr==="max"&&(br[1].setSelectionRange(gt,hn),br[1].focus()))},q=()=>{ue(!0,!0),Tr(()=>{F=!1})},Y=(gt="",hn=!1)=>{hn||(F=!0),x.value=hn;let rr;Jn(gt)?rr=gt.map(br=>br.toDate()):rr=gt&&gt.toDate(),xt.value=null,Q(rr)},ee=()=>{M.value=!0},ce=()=>{n("visible-change",!0)},se=gt=>{(gt==null?void 0:gt.key)===Fr.esc&&ue(!0,!0)},le=()=>{M.value=!1,x.value=!1,F=!1,n("visible-change",!1)},ie=()=>{x.value=!0},pe=()=>{x.value=!1},ue=(gt=!0,hn=!1)=>{F=hn;const[rr,br]=T(W);let Qr=rr;!gt&&Ut.value&&(Qr=br),Qr&&Qr.focus()},me=gt=>{r.readonly||be.value||x.value||F||(x.value=!0,n("focus",gt))};let Le;const ae=gt=>{const hn=async()=>{setTimeout(()=>{var rr;Le===hn&&(!((rr=y.value)!=null&&rr.isFocusInsideContent()&&!P)&&W.value.filter(br=>br.contains(document.activeElement)).length===0&&(Zt(),x.value=!1,n("blur",gt),r.validateEvent&&(p==null||p.validate("blur").catch(br=>void 0))),P=!1)},0)};Le=hn,hn()},be=oe(()=>r.disabled||(d==null?void 0:d.disabled)),_e=oe(()=>{let gt;if(ke.value?yt.value.getDefaultValue&&(gt=yt.value.getDefaultValue()):Jn(r.modelValue)?gt=r.modelValue.map(hn=>TZ(hn,r.valueFormat,s.value)):gt=TZ(r.modelValue,r.valueFormat,s.value),yt.value.getRangeAvailableTime){const hn=yt.value.getRangeAvailableTime(gt);vh(hn,gt)||(gt=hn,Q(Jn(gt)?gt.map(rr=>rr.toDate()):gt.toDate()))}return Jn(gt)&&gt.some(hn=>!hn)&&(gt=[]),gt}),$e=oe(()=>{if(!yt.value.panelReady)return"";const gt=Ft(_e.value);return Jn(xt.value)?[xt.value[0]||gt&&gt[0]||"",xt.value[1]||gt&&gt[1]||""]:xt.value!==null?xt.value:!Ie.value&&ke.value||!x.value&&ke.value?"":gt?Ne.value||Je.value?gt.join(", "):gt:""}),Re=oe(()=>r.type.includes("time")),Ie=oe(()=>r.type.startsWith("time")),Ne=oe(()=>r.type==="dates"),Je=oe(()=>r.type==="years"),je=oe(()=>r.prefixIcon||(Re.value?Rle:rFe)),ft=Me(!1),Et=gt=>{r.readonly||be.value||ft.value&&(gt.stopPropagation(),q(),Q(v.value),H(v.value,!0),ft.value=!1,x.value=!1,yt.value.handleClear&&yt.value.handleClear())},ke=oe(()=>{const{modelValue:gt}=r;return!gt||Jn(gt)&&!gt.filter(Boolean).length}),Ye=async gt=>{var hn;r.readonly||be.value||(((hn=gt.target)==null?void 0:hn.tagName)!=="INPUT"||W.value.includes(document.activeElement))&&(x.value=!0)},at=()=>{r.readonly||be.value||!ke.value&&r.clearable&&(ft.value=!0)},He=()=>{ft.value=!1},Tt=gt=>{var hn;r.readonly||be.value||(((hn=gt.touches[0].target)==null?void 0:hn.tagName)!=="INPUT"||W.value.includes(document.activeElement))&&(x.value=!0)},Ut=oe(()=>r.type.includes("range")),Rt=Gl(),Bt=oe(()=>{var gt,hn;return(hn=(gt=T(y))==null?void 0:gt.popperRef)==null?void 0:hn.contentRef}),Ht=oe(()=>{var gt;return T(Ut)?T(C):(gt=T(C))==null?void 0:gt.$el});cV(Ht,gt=>{const hn=T(Bt),rr=T(Ht);hn&&(gt.target===hn||gt.composedPath().includes(hn))||gt.target===rr||gt.composedPath().includes(rr)||(x.value=!1)});const xt=Me(null),Zt=()=>{if(xt.value){const gt=un($e.value);gt&&mt(gt)&&(Q(Jn(gt)?gt.map(hn=>hn.toDate()):gt.toDate()),xt.value=null)}xt.value===""&&(Q(v.value),H(v.value),xt.value=null)},un=gt=>gt?yt.value.parseUserInput(gt):null,Ft=gt=>gt?yt.value.formatToString(gt):null,mt=gt=>yt.value.isValidValue(gt),Be=async gt=>{if(r.readonly||be.value)return;const{code:hn}=gt;if(G(gt),hn===Fr.esc){x.value===!0&&(x.value=!1,gt.preventDefault(),gt.stopPropagation());return}if(hn===Fr.down&&(yt.value.handleFocusPicker&&(gt.preventDefault(),gt.stopPropagation()),x.value===!1&&(x.value=!0,await Tr()),yt.value.handleFocusPicker)){yt.value.handleFocusPicker();return}if(hn===Fr.tab){P=!0;return}if(hn===Fr.enter||hn===Fr.numpadEnter){(xt.value===null||xt.value===""||mt(un($e.value)))&&(Zt(),x.value=!1),gt.stopPropagation();return}if(xt.value){gt.stopPropagation();return}yt.value.handleKeydownInput&&yt.value.handleKeydownInput(gt)},ze=gt=>{xt.value=gt,x.value||(x.value=!0)},it=gt=>{const hn=gt.target;xt.value?xt.value=[hn.value,xt.value[1]]:xt.value=[hn.value,null]},bt=gt=>{const hn=gt.target;xt.value?xt.value=[xt.value[0],hn.value]:xt.value=[null,hn.value]},Qe=()=>{var gt;const hn=xt.value,rr=un(hn&&hn[0]),br=T(_e);if(rr&&rr.isValid()){xt.value=[Ft(rr),((gt=$e.value)==null?void 0:gt[1])||null];const Qr=[rr,br&&(br[1]||null)];mt(Qr)&&(Q(Qr),xt.value=null)}},St=()=>{var gt;const hn=T(xt),rr=un(hn&&hn[1]),br=T(_e);if(rr&&rr.isValid()){xt.value=[((gt=T($e))==null?void 0:gt[0])||null,Ft(rr)];const Qr=[br&&br[0],rr];mt(Qr)&&(Q(Qr),xt.value=null)}},yt=Me({}),Xe=gt=>{yt.value[gt[0]]=gt[1],yt.value.panelReady=!0},_t=gt=>{n("calendar-change",gt)},Gt=(gt,hn,rr)=>{n("panel-change",gt,hn,rr)};return Rr("EP_PICKER_BASE",{props:r}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-time-picker",ref:"https://element-plus.org/en-US/component/time-picker.html"},oe(()=>!!r.label)),e({focus:ue,handleFocusInput:me,handleBlurInput:ae,handleOpen:ie,handleClose:pe,onPick:Y}),(gt,hn)=>(ve(),qt(T(_h),Gi({ref_key:"refPopper",ref:y,visible:x.value,effect:"light",pure:"",trigger:"click"},gt.$attrs,{role:"dialog",teleported:"",transition:`${T(a).namespace.value}-zoom-in-top`,"popper-class":[`${T(a).namespace.value}-picker__popper`,gt.popperClass],"popper-options":T(A),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:ee,onShow:ce,onHide:le}),{default:It(()=>[T(Ut)?(ve(),Ue("div",{key:1,ref_key:"inputRef",ref:C,class:xe(T(D)),style:vr(gt.$attrs.style),onClick:me,onMouseenter:at,onMouseleave:He,onTouchstart:Tt,onKeydown:Be},[T(je)?(ve(),qt(T(mr),{key:0,class:xe([T(l).e("icon"),T(o).e("icon")]),onMousedown:qr(Ye,["prevent"]),onTouchstart:Tt},{default:It(()=>[(ve(),qt(Mi(T(je))))]),_:1},8,["class","onMousedown"])):wt("v-if",!0),rt("input",{id:gt.id&&gt.id[0],autocomplete:"off",name:gt.name&&gt.name[0],placeholder:gt.startPlaceholder,value:T($e)&&T($e)[0],disabled:T(be),readonly:!gt.editable||gt.readonly,class:xe(T(o).b("input")),onMousedown:Ye,onInput:it,onChange:Qe,onFocus:me,onBlur:ae},null,42,_4e),kt(gt.$slots,"range-separator",{},()=>[rt("span",{class:xe(T(o).b("separator"))},Nn(gt.rangeSeparator),3)]),rt("input",{id:gt.id&&gt.id[1],autocomplete:"off",name:gt.name&&gt.name[1],placeholder:gt.endPlaceholder,value:T($e)&&T($e)[1],disabled:T(be),readonly:!gt.editable||gt.readonly,class:xe(T(o).b("input")),onMousedown:Ye,onFocus:me,onBlur:ae,onInput:bt,onChange:St},null,42,b4e),gt.clearIcon?(ve(),qt(T(mr),{key:1,class:xe(T(V)),onClick:Et},{default:It(()=>[(ve(),qt(Mi(gt.clearIcon)))]),_:1},8,["class"])):wt("v-if",!0)],38)):(ve(),qt(T(mh),{key:0,id:gt.id,ref_key:"inputRef",ref:C,"container-role":"combobox","model-value":T($e),name:gt.name,size:T(Rt),disabled:T(be),placeholder:gt.placeholder,class:xe([T(a).b("editor"),T(a).bm("editor",gt.type),gt.$attrs.class]),style:vr(gt.$attrs.style),readonly:!gt.editable||gt.readonly||T(Ne)||T(Je)||gt.type==="week","aria-label":gt.label||gt.ariaLabel,tabindex:gt.tabindex,"validate-event":!1,onInput:ze,onFocus:me,onBlur:ae,onKeydown:Be,onChange:Zt,onMousedown:Ye,onMouseenter:at,onMouseleave:He,onTouchstart:Tt,onClick:hn[0]||(hn[0]=qr(()=>{},["stop"]))},{prefix:It(()=>[T(je)?(ve(),qt(T(mr),{key:0,class:xe(T(l).e("icon")),onMousedown:qr(Ye,["prevent"]),onTouchstart:Tt},{default:It(()=>[(ve(),qt(Mi(T(je))))]),_:1},8,["class","onMousedown"])):wt("v-if",!0)]),suffix:It(()=>[ft.value&&gt.clearIcon?(ve(),qt(T(mr),{key:0,class:xe(`${T(l).e("icon")} clear-icon`),onClick:qr(Et,["stop"])},{default:It(()=>[(ve(),qt(Mi(gt.clearIcon)))]),_:1},8,["class","onClick"])):wt("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onKeydown"]))]),content:It(()=>[kt(gt.$slots,"default",{visible:x.value,actualVisible:M.value,parsedValue:T(_e),format:gt.format,dateFormat:gt.dateFormat,timeFormat:gt.timeFormat,unlinkPanels:gt.unlinkPanels,type:gt.type,defaultValue:gt.defaultValue,onPick:Y,onSelectRange:te,onSetPickerOption:Xe,onCalendarChange:_t,onPanelChange:Gt,onKeydown:se,onMousedown:hn[1]||(hn[1]=qr(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var Wce=Fn(x4e,[["__file","picker.vue"]]);const C4e=Ln({...Kce,datetimeRole:String,parsedValue:{type:Mt(Object)}}),qce=({getAvailableHours:t,getAvailableMinutes:e,getAvailableSeconds:n})=>{const r=(a,l,o,d)=>{const p={hour:t,minute:e,second:n};let A=a;return["hour","minute","second"].forEach(v=>{if(p[v]){let y;const C=p[v];switch(v){case"minute":{y=C(A.hour(),l,d);break}case"second":{y=C(A.hour(),A.minute(),l,d);break}default:{y=C(l,d);break}}if(y!=null&&y.length&&!y.includes(A[v]())){const x=o?0:y.length-1;A=A[v](y[x])}}}),A},i={};return{timePickerOptions:i,getAvailableTime:r,onSetOption:([a,l])=>{i[a]=l}}},YD=t=>{const e=(r,i)=>r||i,n=r=>r!==!0;return t.map(e).filter(n)},Yce=(t,e,n)=>({getHoursList:(a,l)=>qD(24,t&&(()=>t==null?void 0:t(a,l))),getMinutesList:(a,l,o)=>qD(60,e&&(()=>e==null?void 0:e(a,l,o))),getSecondsList:(a,l,o,d)=>qD(60,n&&(()=>n==null?void 0:n(a,l,o,d)))}),Xce=(t,e,n)=>{const{getHoursList:r,getMinutesList:i,getSecondsList:s}=Yce(t,e,n);return{getAvailableHours:(d,p)=>YD(r(d,p)),getAvailableMinutes:(d,p,A)=>YD(i(d,p,A)),getAvailableSeconds:(d,p,A,v)=>YD(s(d,p,A,v))}},Zce=t=>{const e=Me(t.parsedValue);return zt(()=>t.visible,n=>{n||(e.value=t.parsedValue)}),e},dy=new Map;let BZ;As&&(document.addEventListener("mousedown",t=>BZ=t),document.addEventListener("mouseup",t=>{for(const e of dy.values())for(const{documentHandler:n}of e)n(t,BZ)}));function MZ(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:Ep(e.arg)&&n.push(e.arg),function(r,i){const s=e.instance.popperRef,a=r.target,l=i==null?void 0:i.target,o=!e||!e.instance,d=!a||!l,p=t.contains(a)||t.contains(l),A=t===a,v=n.length&&n.some(C=>C==null?void 0:C.contains(a))||n.length&&n.includes(l),y=s&&(s.contains(a)||s.contains(l));o||d||p||A||v||y||e.value(r,i)}}const Yv={beforeMount(t,e){dy.has(t)||dy.set(t,[]),dy.get(t).push({documentHandler:MZ(t,e),bindingFn:e.value})},updated(t,e){dy.has(t)||dy.set(t,[]);const n=dy.get(t),r=n.findIndex(s=>s.bindingFn===e.oldValue),i={documentHandler:MZ(t,e),bindingFn:e.value};r>=0?n.splice(r,1,i):n.push(i)},unmounted(t){dy.delete(t)}},E4e=100,S4e=600,pO={beforeMount(t,e){const n=e.value,{interval:r=E4e,delay:i=S4e}=Gr(n)?{}:n;let s,a;const l=()=>Gr(n)?n():n.handler(),o=()=>{a&&(clearTimeout(a),a=void 0),s&&(clearInterval(s),s=void 0)};t.addEventListener("mousedown",d=>{d.button===0&&(o(),l(),document.addEventListener("mouseup",()=>o(),{once:!0}),a=setTimeout(()=>{s=setInterval(()=>{l()},r)},i))})}},S3="_trap-focus-children",$1=[],LZ=t=>{if($1.length===0)return;const e=$1[$1.length-1][S3];if(e.length>0&&t.code===Fr.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,r=t.target===e[0],i=t.target===e[e.length-1];r&&n&&(t.preventDefault(),e[e.length-1].focus()),i&&!n&&(t.preventDefault(),e[0].focus())}},T4e={beforeMount(t){t[S3]=zY(t),$1.push(t),$1.length<=1&&document.addEventListener("keydown",LZ)},updated(t){Tr(()=>{t[S3]=zY(t)})},unmounted(){$1.shift(),$1.length===0&&document.removeEventListener("keydown",LZ)}};var RZ=!1,L1,T3,I3,nF,rF,Jce,iF,B3,M3,L3,eue,R3,P3,tue,nue;function fd(){if(!RZ){RZ=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(R3=/\b(iPhone|iP[ao]d)/.exec(t),P3=/\b(iP[ao]d)/.exec(t),L3=/Android/i.exec(t),tue=/FBAN\/\w+;/i.exec(t),nue=/Mobile/i.exec(t),eue=!!/Win64/.exec(t),e){L1=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,L1&&document&&document.documentMode&&(L1=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);Jce=r?parseFloat(r[1])+4:L1,T3=e[2]?parseFloat(e[2]):NaN,I3=e[3]?parseFloat(e[3]):NaN,nF=e[4]?parseFloat(e[4]):NaN,nF?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),rF=e&&e[1]?parseFloat(e[1]):NaN):rF=NaN}else L1=T3=I3=rF=nF=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);iF=i?parseFloat(i[1].replace("_",".")):!0}else iF=!1;B3=!!n[2],M3=!!n[3]}else iF=B3=M3=!1}}var F3={ie:function(){return fd()||L1},ieCompatibilityMode:function(){return fd()||Jce>L1},ie64:function(){return F3.ie()&&eue},firefox:function(){return fd()||T3},opera:function(){return fd()||I3},webkit:function(){return fd()||nF},safari:function(){return F3.webkit()},chrome:function(){return fd()||rF},windows:function(){return fd()||B3},osx:function(){return fd()||iF},linux:function(){return fd()||M3},iphone:function(){return fd()||R3},mobile:function(){return fd()||R3||P3||L3||nue},nativeApp:function(){return fd()||tue},android:function(){return fd()||L3},ipad:function(){return fd()||P3}},I4e=F3,yR=!!(typeof window<"u"&&window.document&&window.document.createElement),B4e={canUseDOM:yR,canUseWorkers:typeof Worker<"u",canUseEventListeners:yR&&!!(window.addEventListener||window.attachEvent),canUseViewport:yR&&!!window.screen,isInWorker:!yR},rue=B4e,iue;rue.canUseDOM&&(iue=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function M4e(t,e){if(!rue.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&iue&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var L4e=M4e,PZ=10,FZ=40,OZ=800;function sue(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*PZ,i=n*PZ,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=FZ,i*=FZ):(r*=OZ,i*=OZ)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}sue.getEventType=function(){return I4e.firefox()?"DOMMouseScroll":L4e("wheel")?"wheel":"mousewheel"};var R4e=sue;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const P4e=function(t,e){if(t&&t.addEventListener){const n=function(r){const i=R4e(r);e&&Reflect.apply(e,this,[r,i])};t.addEventListener("wheel",n,{passive:!0})}},F4e={beforeMount(t,e){P4e(t,e.value)}},O4e=Ln({role:{type:String,required:!0},spinnerDate:{type:Mt(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Mt(String),default:""},...jce}),N4e=["onClick"],k4e=["onMouseenter"],D4e=Ge({__name:"basic-time-spinner",props:O4e,emits:["change","select-range","set-option"],setup(t,{emit:e}){const n=t,r=_n("time"),{getHoursList:i,getMinutesList:s,getSecondsList:a}=Yce(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let l=!1;const o=Me(),d=Me(),p=Me(),A=Me(),v={hours:d,minutes:p,seconds:A},y=oe(()=>n.showSeconds?CZ:CZ.slice(0,2)),C=oe(()=>{const{spinnerDate:ue}=n,me=ue.hour(),Le=ue.minute(),ae=ue.second();return{hours:me,minutes:Le,seconds:ae}}),x=oe(()=>{const{hours:ue,minutes:me}=T(C);return{hours:i(n.role),minutes:s(ue,n.role),seconds:a(ue,me,n.role)}}),M=oe(()=>{const{hours:ue,minutes:me,seconds:Le}=T(C);return{hours:WD(ue,23),minutes:WD(me,59),seconds:WD(Le,59)}}),I=Rd(ue=>{l=!1,D(ue)},200),P=ue=>{if(!!!n.amPmMode)return"";const Le=n.amPmMode==="A";let ae=ue<12?" am":" pm";return Le&&(ae=ae.toUpperCase()),ae},F=ue=>{let me;switch(ue){case"hours":me=[0,2];break;case"minutes":me=[3,5];break;case"seconds":me=[6,8];break}const[Le,ae]=me;e("select-range",Le,ae),o.value=ue},D=ue=>{Q(ue,T(C)[ue])},V=()=>{D("hours"),D("minutes"),D("seconds")},H=ue=>ue.querySelector(`.${r.namespace.value}-scrollbar__wrap`),Q=(ue,me)=>{if(n.arrowControl)return;const Le=T(v[ue]);Le&&Le.$el&&(H(Le.$el).scrollTop=Math.max(0,me*G(ue)))},G=ue=>{const me=T(v[ue]),Le=me==null?void 0:me.$el.querySelector("li");return Le&&Number.parseFloat(Sy(Le,"height"))||0},W=()=>{q(1)},te=()=>{q(-1)},q=ue=>{o.value||F("hours");const me=o.value,Le=T(C)[me],ae=o.value==="hours"?24:60,be=Y(me,Le,ue,ae);ee(me,be),Q(me,be),Tr(()=>F(me))},Y=(ue,me,Le,ae)=>{let be=(me+Le+ae)%ae;const _e=T(x)[ue];for(;_e[be]&&be!==me;)be=(be+Le+ae)%ae;return be},ee=(ue,me)=>{if(T(x)[ue][me])return;const{hours:be,minutes:_e,seconds:$e}=T(C);let Re;switch(ue){case"hours":Re=n.spinnerDate.hour(me).minute(_e).second($e);break;case"minutes":Re=n.spinnerDate.hour(be).minute(me).second($e);break;case"seconds":Re=n.spinnerDate.hour(be).minute(_e).second(me);break}e("change",Re)},ce=(ue,{value:me,disabled:Le})=>{Le||(ee(ue,me),F(ue),Q(ue,me))},se=ue=>{l=!0,I(ue);const me=Math.min(Math.round((H(T(v[ue]).$el).scrollTop-(le(ue)*.5-10)/G(ue)+3)/G(ue)),ue==="hours"?23:59);ee(ue,me)},le=ue=>T(v[ue]).$el.offsetHeight,ie=()=>{const ue=me=>{const Le=T(v[me]);Le&&Le.$el&&(H(Le.$el).onscroll=()=>{se(me)})};ue("hours"),ue("minutes"),ue("seconds")};dr(()=>{Tr(()=>{!n.arrowControl&&ie(),V(),n.role==="start"&&F("hours")})});const pe=(ue,me)=>{v[me].value=ue};return e("set-option",[`${n.role}_scrollDown`,q]),e("set-option",[`${n.role}_emitSelectRange`,F]),zt(()=>n.spinnerDate,()=>{l||V()}),(ue,me)=>(ve(),Ue("div",{class:xe([T(r).b("spinner"),{"has-seconds":ue.showSeconds}])},[ue.arrowControl?wt("v-if",!0):(ve(!0),Ue(_r,{key:0},cs(T(y),Le=>(ve(),qt(T(d0),{key:Le,ref_for:!0,ref:ae=>pe(ae,Le),class:xe(T(r).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":T(r).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ae=>F(Le),onMousemove:ae=>D(Le)},{default:It(()=>[(ve(!0),Ue(_r,null,cs(T(x)[Le],(ae,be)=>(ve(),Ue("li",{key:be,class:xe([T(r).be("spinner","item"),T(r).is("active",be===T(C)[Le]),T(r).is("disabled",ae)]),onClick:_e=>ce(Le,{value:be,disabled:ae})},[Le==="hours"?(ve(),Ue(_r,{key:0},[gs(Nn(("0"+(ue.amPmMode?be%12||12:be)).slice(-2))+Nn(P(be)),1)],64)):(ve(),Ue(_r,{key:1},[gs(Nn(("0"+be).slice(-2)),1)],64))],10,N4e))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),ue.arrowControl?(ve(!0),Ue(_r,{key:1},cs(T(y),Le=>(ve(),Ue("div",{key:Le,class:xe([T(r).be("spinner","wrapper"),T(r).is("arrow")]),onMouseenter:ae=>F(Le)},[ci((ve(),qt(T(mr),{class:xe(["arrow-up",T(r).be("spinner","arrow")])},{default:It(()=>[pt(T(IV))]),_:1},8,["class"])),[[T(pO),te]]),ci((ve(),qt(T(mr),{class:xe(["arrow-down",T(r).be("spinner","arrow")])},{default:It(()=>[pt(T(u0))]),_:1},8,["class"])),[[T(pO),W]]),rt("ul",{class:xe(T(r).be("spinner","list"))},[(ve(!0),Ue(_r,null,cs(T(M)[Le],(ae,be)=>(ve(),Ue("li",{key:be,class:xe([T(r).be("spinner","item"),T(r).is("active",ae===T(C)[Le]),T(r).is("disabled",T(x)[Le][ae])])},[typeof ae=="number"?(ve(),Ue(_r,{key:0},[Le==="hours"?(ve(),Ue(_r,{key:0},[gs(Nn(("0"+(ue.amPmMode?ae%12||12:ae)).slice(-2))+Nn(P(ae)),1)],64)):(ve(),Ue(_r,{key:1},[gs(Nn(("0"+ae).slice(-2)),1)],64))],64)):wt("v-if",!0)],2))),128))],2)],42,k4e))),128)):wt("v-if",!0)],2))}});var O3=Fn(D4e,[["__file","basic-time-spinner.vue"]]);const U4e=Ge({__name:"panel-time-pick",props:C4e,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=mn("EP_PICKER_BASE"),{arrowControl:i,disabledHours:s,disabledMinutes:a,disabledSeconds:l,defaultValue:o}=r.props,{getAvailableHours:d,getAvailableMinutes:p,getAvailableSeconds:A}=Xce(s,a,l),v=_n("time"),{t:y,lang:C}=Ts(),x=Me([0,2]),M=Zce(n),I=oe(()=>Cl(n.actualVisible)?`${v.namespace.value}-zoom-in-top`:""),P=oe(()=>n.format.includes("ss")),F=oe(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),D=pe=>{const ue=wi(pe).locale(C.value),me=ce(ue);return ue.isSame(me)},V=()=>{e("pick",M.value,!1)},H=(pe=!1,ue=!1)=>{ue||e("pick",n.parsedValue,pe)},Q=pe=>{if(!n.visible)return;const ue=ce(pe).millisecond(0);e("pick",ue,!0)},G=(pe,ue)=>{e("select-range",pe,ue),x.value=[pe,ue]},W=pe=>{const ue=[0,3].concat(P.value?[6]:[]),me=["hours","minutes"].concat(P.value?["seconds"]:[]),ae=(ue.indexOf(x.value[0])+pe+ue.length)%ue.length;q.start_emitSelectRange(me[ae])},te=pe=>{const ue=pe.code,{left:me,right:Le,up:ae,down:be}=Fr;if([me,Le].includes(ue)){W(ue===me?-1:1),pe.preventDefault();return}if([ae,be].includes(ue)){const _e=ue===ae?-1:1;q.start_scrollDown(_e),pe.preventDefault();return}},{timePickerOptions:q,onSetOption:Y,getAvailableTime:ee}=qce({getAvailableHours:d,getAvailableMinutes:p,getAvailableSeconds:A}),ce=pe=>ee(pe,n.datetimeRole||"",!0),se=pe=>pe?wi(pe,n.format).locale(C.value):null,le=pe=>pe?pe.format(n.format):null,ie=()=>wi(o).locale(C.value);return e("set-picker-option",["isValidValue",D]),e("set-picker-option",["formatToString",le]),e("set-picker-option",["parseUserInput",se]),e("set-picker-option",["handleKeydownInput",te]),e("set-picker-option",["getRangeAvailableTime",ce]),e("set-picker-option",["getDefaultValue",ie]),(pe,ue)=>(ve(),qt(fc,{name:T(I)},{default:It(()=>[pe.actualVisible||pe.visible?(ve(),Ue("div",{key:0,class:xe(T(v).b("panel"))},[rt("div",{class:xe([T(v).be("panel","content"),{"has-seconds":T(P)}])},[pt(O3,{ref:"spinner",role:pe.datetimeRole||"start","arrow-control":T(i),"show-seconds":T(P),"am-pm-mode":T(F),"spinner-date":pe.parsedValue,"disabled-hours":T(s),"disabled-minutes":T(a),"disabled-seconds":T(l),onChange:Q,onSetOption:T(Y),onSelectRange:G},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),rt("div",{class:xe(T(v).be("panel","footer"))},[rt("button",{type:"button",class:xe([T(v).be("panel","btn"),"cancel"]),onClick:V},Nn(T(y)("el.datepicker.cancel")),3),rt("button",{type:"button",class:xe([T(v).be("panel","btn"),"confirm"]),onClick:ue[0]||(ue[0]=me=>H())},Nn(T(y)("el.datepicker.confirm")),3)],2)],2)):wt("v-if",!0)]),_:1},8,["name"]))}});var AO=Fn(U4e,[["__file","panel-time-pick.vue"]]);const z4e=Ln({...Kce,parsedValue:{type:Mt(Array)}}),$4e=["disabled"],V4e=Ge({__name:"panel-time-range",props:z4e,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=(ft,Et)=>{const ke=[];for(let Ye=ft;Ye<=Et;Ye++)ke.push(Ye);return ke},{t:i,lang:s}=Ts(),a=_n("time"),l=_n("picker"),o=mn("EP_PICKER_BASE"),{arrowControl:d,disabledHours:p,disabledMinutes:A,disabledSeconds:v,defaultValue:y}=o.props,C=oe(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",d),D.value?"has-seconds":""]),x=oe(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",d),D.value?"has-seconds":""]),M=oe(()=>n.parsedValue[0]),I=oe(()=>n.parsedValue[1]),P=Zce(n),F=()=>{e("pick",P.value,!1)},D=oe(()=>n.format.includes("ss")),V=oe(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),H=(ft=!1)=>{e("pick",[M.value,I.value],ft)},Q=ft=>{te(ft.millisecond(0),I.value)},G=ft=>{te(M.value,ft.millisecond(0))},W=ft=>{const Et=ft.map(Ye=>wi(Ye).locale(s.value)),ke=Le(Et);return Et[0].isSame(ke[0])&&Et[1].isSame(ke[1])},te=(ft,Et)=>{e("pick",[ft,Et],!0)},q=oe(()=>M.value>I.value),Y=Me([0,2]),ee=(ft,Et)=>{e("select-range",ft,Et,"min"),Y.value=[ft,Et]},ce=oe(()=>D.value?11:8),se=(ft,Et)=>{e("select-range",ft,Et,"max");const ke=T(ce);Y.value=[ft+ke,Et+ke]},le=ft=>{const Et=D.value?[0,3,6,11,14,17]:[0,3,8,11],ke=["hours","minutes"].concat(D.value?["seconds"]:[]),at=(Et.indexOf(Y.value[0])+ft+Et.length)%Et.length,He=Et.length/2;at<He?$e.start_emitSelectRange(ke[at]):$e.end_emitSelectRange(ke[at-He])},ie=ft=>{const Et=ft.code,{left:ke,right:Ye,up:at,down:He}=Fr;if([ke,Ye].includes(Et)){le(Et===ke?-1:1),ft.preventDefault();return}if([at,He].includes(Et)){const Tt=Et===at?-1:1,Ut=Y.value[0]<ce.value?"start":"end";$e[`${Ut}_scrollDown`](Tt),ft.preventDefault();return}},pe=(ft,Et)=>{const ke=p?p(ft):[],Ye=ft==="start",He=(Et||(Ye?I.value:M.value)).hour(),Tt=Ye?r(He+1,23):r(0,He-1);return UD(ke,Tt)},ue=(ft,Et,ke)=>{const Ye=A?A(ft,Et):[],at=Et==="start",He=ke||(at?I.value:M.value),Tt=He.hour();if(ft!==Tt)return Ye;const Ut=He.minute(),Rt=at?r(Ut+1,59):r(0,Ut-1);return UD(Ye,Rt)},me=(ft,Et,ke,Ye)=>{const at=v?v(ft,Et,ke):[],He=ke==="start",Tt=Ye||(He?I.value:M.value),Ut=Tt.hour(),Rt=Tt.minute();if(ft!==Ut||Et!==Rt)return at;const Bt=Tt.second(),Ht=He?r(Bt+1,59):r(0,Bt-1);return UD(at,Ht)},Le=([ft,Et])=>[Re(ft,"start",!0,Et),Re(Et,"end",!1,ft)],{getAvailableHours:ae,getAvailableMinutes:be,getAvailableSeconds:_e}=Xce(pe,ue,me),{timePickerOptions:$e,getAvailableTime:Re,onSetOption:Ie}=qce({getAvailableHours:ae,getAvailableMinutes:be,getAvailableSeconds:_e}),Ne=ft=>ft?Jn(ft)?ft.map(Et=>wi(Et,n.format).locale(s.value)):wi(ft,n.format).locale(s.value):null,Je=ft=>ft?Jn(ft)?ft.map(Et=>Et.format(n.format)):ft.format(n.format):null,je=()=>{if(Jn(y))return y.map(Et=>wi(Et).locale(s.value));const ft=wi(y).locale(s.value);return[ft,ft.add(60,"m")]};return e("set-picker-option",["formatToString",Je]),e("set-picker-option",["parseUserInput",Ne]),e("set-picker-option",["isValidValue",W]),e("set-picker-option",["handleKeydownInput",ie]),e("set-picker-option",["getDefaultValue",je]),e("set-picker-option",["getRangeAvailableTime",Le]),(ft,Et)=>ft.actualVisible?(ve(),Ue("div",{key:0,class:xe([T(a).b("range-picker"),T(l).b("panel")])},[rt("div",{class:xe(T(a).be("range-picker","content"))},[rt("div",{class:xe(T(a).be("range-picker","cell"))},[rt("div",{class:xe(T(a).be("range-picker","header"))},Nn(T(i)("el.datepicker.startTime")),3),rt("div",{class:xe(T(C))},[pt(O3,{ref:"minSpinner",role:"start","show-seconds":T(D),"am-pm-mode":T(V),"arrow-control":T(d),"spinner-date":T(M),"disabled-hours":pe,"disabled-minutes":ue,"disabled-seconds":me,onChange:Q,onSetOption:T(Ie),onSelectRange:ee},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),rt("div",{class:xe(T(a).be("range-picker","cell"))},[rt("div",{class:xe(T(a).be("range-picker","header"))},Nn(T(i)("el.datepicker.endTime")),3),rt("div",{class:xe(T(x))},[pt(O3,{ref:"maxSpinner",role:"end","show-seconds":T(D),"am-pm-mode":T(V),"arrow-control":T(d),"spinner-date":T(I),"disabled-hours":pe,"disabled-minutes":ue,"disabled-seconds":me,onChange:G,onSetOption:T(Ie),onSelectRange:se},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),rt("div",{class:xe(T(a).be("panel","footer"))},[rt("button",{type:"button",class:xe([T(a).be("panel","btn"),"cancel"]),onClick:Et[0]||(Et[0]=ke=>F())},Nn(T(i)("el.datepicker.cancel")),3),rt("button",{type:"button",class:xe([T(a).be("panel","btn"),"confirm"]),disabled:T(q),onClick:Et[1]||(Et[1]=ke=>H())},Nn(T(i)("el.datepicker.confirm")),11,$4e)],2)],2)):wt("v-if",!0)}});var H4e=Fn(V4e,[["__file","panel-time-range.vue"]]);wi.extend(cH);var G4e=Ge({name:"ElTimePicker",install:null,props:{...uH,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,e){const n=Me(),[r,i]=t.isRange?["timerange",H4e]:["time",AO],s=a=>e.emit("update:modelValue",a);return Rr("ElPopperOptions",t.popperOptions),e.expose({focus:a=>{var l;(l=n.value)==null||l.handleFocusInput(a)},blur:a=>{var l;(l=n.value)==null||l.handleBlurInput(a)},handleOpen:()=>{var a;(a=n.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=n.value)==null||a.handleClose()}}),()=>{var a;const l=(a=t.format)!=null?a:E3;return pt(Wce,Gi(t,{ref:n,type:r,format:l,"onUpdate:modelValue":s}),{default:o=>pt(i,o,null)})}}});const sF=G4e;sF.install=t=>{t.component(sF.name,sF)};const Q4e=sF,j4e=(t,e)=>{const n=t.subtract(1,"month").endOf("month").date();return Gy(e).map((r,i)=>n-(e-i-1))},K4e=t=>{const e=t.daysInMonth();return Gy(e).map((n,r)=>r+1)},W4e=t=>Gy(t.length/7).map(e=>{const n=e*7;return t.slice(n,n+7)}),q4e=Ln({selectedDay:{type:Mt(Object)},range:{type:Mt(Array)},date:{type:Mt(Object),required:!0},hideHeader:{type:Boolean}}),Y4e={pick:t=>xi(t)};var oue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){return function(n,r,i){var s=r.prototype,a=function(A){return A&&(A.indexOf?A:A.s)},l=function(A,v,y,C,x){var M=A.name?A:A.$locale(),I=a(M[v]),P=a(M[y]),F=I||P.map(function(V){return V.slice(0,C)});if(!x)return F;var D=M.weekStart;return F.map(function(V,H){return F[(H+(D||0))%7]})},o=function(){return i.Ls[i.locale()]},d=function(A,v){return A.formats[v]||function(y){return y.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(C,x,M){return x||M.slice(1)})}(A.formats[v.toUpperCase()])},p=function(){var A=this;return{months:function(v){return v?v.format("MMMM"):l(A,"months")},monthsShort:function(v){return v?v.format("MMM"):l(A,"monthsShort","months",3)},firstDayOfWeek:function(){return A.$locale().weekStart||0},weekdays:function(v){return v?v.format("dddd"):l(A,"weekdays")},weekdaysMin:function(v){return v?v.format("dd"):l(A,"weekdaysMin","weekdays",2)},weekdaysShort:function(v){return v?v.format("ddd"):l(A,"weekdaysShort","weekdays",3)},longDateFormat:function(v){return d(A.$locale(),v)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return p.bind(this)()},i.localeData=function(){var A=o();return{firstDayOfWeek:function(){return A.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(v){return d(A,v)},meridiem:A.meridiem,ordinal:A.ordinal}},i.months=function(){return l(o(),"months")},i.monthsShort=function(){return l(o(),"monthsShort","months",3)},i.weekdays=function(A){return l(o(),"weekdays",null,null,A)},i.weekdaysShort=function(A){return l(o(),"weekdaysShort","weekdays",3,A)},i.weekdaysMin=function(A){return l(o(),"weekdaysMin","weekdays",2,A)}}})})(oue);var X4e=oue.exports;const aue=kf(X4e),Z4e=(t,e)=>{wi.extend(aue);const n=wi.localeData().firstDayOfWeek(),{t:r,lang:i}=Ts(),s=wi().locale(i.value),a=oe(()=>!!t.range&&!!t.range.length),l=oe(()=>{let v=[];if(a.value){const[y,C]=t.range,x=Gy(C.date()-y.date()+1).map(P=>({text:y.date()+P,type:"current"}));let M=x.length%7;M=M===0?0:7-M;const I=Gy(M).map((P,F)=>({text:F+1,type:"next"}));v=x.concat(I)}else{const y=t.date.startOf("month").day(),C=j4e(t.date,(y-n+7)%7).map(P=>({text:P,type:"prev"})),x=K4e(t.date).map(P=>({text:P,type:"current"}));v=[...C,...x];const M=7-(v.length%7||7),I=Gy(M).map((P,F)=>({text:F+1,type:"next"}));v=v.concat(I)}return W4e(v)}),o=oe(()=>{const v=n;return v===0?zD.map(y=>r(`el.datepicker.weeks.${y}`)):zD.slice(v).concat(zD.slice(0,v)).map(y=>r(`el.datepicker.weeks.${y}`))}),d=(v,y)=>{switch(y){case"prev":return t.date.startOf("month").subtract(1,"month").date(v);case"next":return t.date.startOf("month").add(1,"month").date(v);case"current":return t.date.date(v)}};return{now:s,isInRange:a,rows:l,weekDays:o,getFormattedDate:d,handlePickDay:({text:v,type:y})=>{const C=d(v,y);e("pick",C)},getSlotData:({text:v,type:y})=>{const C=d(v,y);return{isSelected:C.isSame(t.selectedDay),type:`${y}-month`,day:C.format("YYYY-MM-DD"),date:C.toDate()}}}},J4e={key:0},e6e=["onClick"],t6e=Ge({name:"DateTable"}),n6e=Ge({...t6e,props:q4e,emits:Y4e,setup(t,{expose:e,emit:n}){const r=t,{isInRange:i,now:s,rows:a,weekDays:l,getFormattedDate:o,handlePickDay:d,getSlotData:p}=Z4e(r,n),A=_n("calendar-table"),v=_n("calendar-day"),y=({text:C,type:x})=>{const M=[x];if(x==="current"){const I=o(C,x);I.isSame(r.selectedDay,"day")&&M.push(v.is("selected")),I.isSame(s,"day")&&M.push(v.is("today"))}return M};return e({getFormattedDate:o}),(C,x)=>(ve(),Ue("table",{class:xe([T(A).b(),T(A).is("range",T(i))]),cellspacing:"0",cellpadding:"0"},[C.hideHeader?wt("v-if",!0):(ve(),Ue("thead",J4e,[(ve(!0),Ue(_r,null,cs(T(l),M=>(ve(),Ue("th",{key:M},Nn(M),1))),128))])),rt("tbody",null,[(ve(!0),Ue(_r,null,cs(T(a),(M,I)=>(ve(),Ue("tr",{key:I,class:xe({[T(A).e("row")]:!0,[T(A).em("row","hide-border")]:I===0&&C.hideHeader})},[(ve(!0),Ue(_r,null,cs(M,(P,F)=>(ve(),Ue("td",{key:F,class:xe(y(P)),onClick:D=>T(d)(P)},[rt("div",{class:xe(T(v).b())},[kt(C.$slots,"date-cell",{data:T(p)(P)},()=>[rt("span",null,Nn(P.text),1)])],2)],10,e6e))),128))],2))),128))])],2))}});var NZ=Fn(n6e,[["__file","date-table.vue"]]);const r6e=(t,e)=>{const n=t.endOf("month"),r=e.startOf("month"),s=n.isSame(r,"week")?r.add(1,"week"):r;return[[t,n],[s.startOf("week"),e]]},i6e=(t,e)=>{const n=t.endOf("month"),r=t.add(1,"month").startOf("month"),i=n.isSame(r,"week")?r.add(1,"week"):r,s=i.endOf("month"),a=e.startOf("month"),l=s.isSame(a,"week")?a.add(1,"week"):a;return[[t,n],[i.startOf("week"),s],[l.startOf("week"),e]]},s6e=(t,e,n)=>{const{lang:r}=Ts(),i=Me(),s=wi().locale(r.value),a=oe({get(){return t.modelValue?o.value:i.value},set(M){if(!M)return;i.value=M;const I=M.toDate();e(zh,I),e(Si,I)}}),l=oe(()=>{if(!t.range)return[];const M=t.range.map(F=>wi(F).locale(r.value)),[I,P]=M;return I.isAfter(P)?[]:I.isSame(P,"month")?y(I,P):I.add(1,"month").month()!==P.month()?[]:y(I,P)}),o=oe(()=>t.modelValue?wi(t.modelValue).locale(r.value):a.value||(l.value.length?l.value[0][0]:s)),d=oe(()=>o.value.subtract(1,"month").date(1)),p=oe(()=>o.value.add(1,"month").date(1)),A=oe(()=>o.value.subtract(1,"year").date(1)),v=oe(()=>o.value.add(1,"year").date(1)),y=(M,I)=>{const P=M.startOf("week"),F=I.endOf("week"),D=P.get("month"),V=F.get("month");return D===V?[[P,F]]:(D+1)%12===V?r6e(P,F):D+2===V||(D+1)%11===V?i6e(P,F):[]},C=M=>{a.value=M};return{calculateValidatedDateRange:y,date:o,realSelectedDay:a,pickDay:C,selectDate:M=>{const P={"prev-month":d.value,"next-month":p.value,"prev-year":A.value,"next-year":v.value,today:s}[M];P.isSame(o.value,"day")||C(P)},validatedRange:l}},o6e=t=>Jn(t)&&t.length===2&&t.every(e=>mb(e)),a6e=Ln({modelValue:{type:Date},range:{type:Mt(Array),validator:o6e}}),l6e={[Si]:t=>mb(t),[zh]:t=>mb(t)},c6e="ElCalendar",u6e=Ge({name:c6e}),h6e=Ge({...u6e,props:a6e,emits:l6e,setup(t,{expose:e,emit:n}){const r=t,i=_n("calendar"),{calculateValidatedDateRange:s,date:a,pickDay:l,realSelectedDay:o,selectDate:d,validatedRange:p}=s6e(r,n),{t:A}=Ts(),v=oe(()=>{const y=`el.datepicker.month${a.value.format("M")}`;return`${a.value.year()} ${A("el.datepicker.year")} ${A(y)}`});return e({selectedDay:o,pickDay:l,selectDate:d,calculateValidatedDateRange:s}),(y,C)=>(ve(),Ue("div",{class:xe(T(i).b())},[rt("div",{class:xe(T(i).e("header"))},[kt(y.$slots,"header",{date:T(v)},()=>[rt("div",{class:xe(T(i).e("title"))},Nn(T(v)),3),T(p).length===0?(ve(),Ue("div",{key:0,class:xe(T(i).e("button-group"))},[pt(T($ce),null,{default:It(()=>[pt(T(tu),{size:"small",onClick:C[0]||(C[0]=x=>T(d)("prev-month"))},{default:It(()=>[gs(Nn(T(A)("el.datepicker.prevMonth")),1)]),_:1}),pt(T(tu),{size:"small",onClick:C[1]||(C[1]=x=>T(d)("today"))},{default:It(()=>[gs(Nn(T(A)("el.datepicker.today")),1)]),_:1}),pt(T(tu),{size:"small",onClick:C[2]||(C[2]=x=>T(d)("next-month"))},{default:It(()=>[gs(Nn(T(A)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):wt("v-if",!0)])],2),T(p).length===0?(ve(),Ue("div",{key:0,class:xe(T(i).e("body"))},[pt(NZ,{date:T(a),"selected-day":T(o),onPick:T(l)},Gv({_:2},[y.$slots["date-cell"]?{name:"date-cell",fn:It(x=>[kt(y.$slots,"date-cell",Tv(MC(x)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(ve(),Ue("div",{key:1,class:xe(T(i).e("body"))},[(ve(!0),Ue(_r,null,cs(T(p),(x,M)=>(ve(),qt(NZ,{key:M,date:x[0],"selected-day":T(o),range:x,"hide-header":M!==0,onPick:T(l)},Gv({_:2},[y.$slots["date-cell"]?{name:"date-cell",fn:It(I=>[kt(y.$slots,"date-cell",Tv(MC(I)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var d6e=Fn(h6e,[["__file","calendar.vue"]]);const f6e=_i(d6e),p6e=Ln({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Mt([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),A6e=Ge({name:"ElCard"}),g6e=Ge({...A6e,props:p6e,setup(t){const e=_n("card");return(n,r)=>(ve(),Ue("div",{class:xe([T(e).b(),T(e).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(ve(),Ue("div",{key:0,class:xe(T(e).e("header"))},[kt(n.$slots,"header",{},()=>[gs(Nn(n.header),1)])],2)):wt("v-if",!0),rt("div",{class:xe([T(e).e("body"),n.bodyClass]),style:vr(n.bodyStyle)},[kt(n.$slots,"default")],6),n.$slots.footer||n.footer?(ve(),Ue("div",{key:1,class:xe(T(e).e("footer"))},[kt(n.$slots,"footer",{},()=>[gs(Nn(n.footer),1)])],2)):wt("v-if",!0)],2))}});var m6e=Fn(g6e,[["__file","card.vue"]]);const v6e=_i(m6e),y6e=Ln({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:{type:Boolean,default:!1}}),_6e={change:(t,e)=>[t,e].every(Hr)},lue=Symbol("carouselContextKey"),kZ=300,b6e=(t,e,n)=>{const{children:r,addChild:i,removeChild:s}=nH(mi(),"ElCarouselItem"),a=Uc(),l=Me(-1),o=Me(null),d=Me(!1),p=Me(),A=Me(0),v=Me(!0),y=Me(!0),C=Me(!1),x=oe(()=>t.arrow!=="never"&&!T(P)),M=oe(()=>r.value.some(Re=>Re.props.label.toString().length>0)),I=oe(()=>t.type==="card"),P=oe(()=>t.direction==="vertical"),F=oe(()=>t.height!=="auto"?{height:t.height}:{height:`${A.value}px`,overflow:"hidden"}),D=eb(Re=>{te(Re)},kZ,{trailing:!0}),V=eb(Re=>{ue(Re)},kZ),H=Re=>v.value?l.value<=1?Re<=1:Re>1:!0;function Q(){o.value&&(clearInterval(o.value),o.value=null)}function G(){t.interval<=0||!t.autoplay||o.value||(o.value=setInterval(()=>W(),t.interval))}const W=()=>{y.value||(C.value=!0),y.value=!1,l.value<r.value.length-1?l.value=l.value+1:t.loop&&(l.value=0)};function te(Re){if(y.value||(C.value=!0),y.value=!1,Xr(Re)){const Je=r.value.filter(je=>je.props.name===Re);Je.length>0&&(Re=r.value.indexOf(Je[0]))}if(Re=Number(Re),Number.isNaN(Re)||Re!==Math.floor(Re))return;const Ie=r.value.length,Ne=l.value;Re<0?l.value=t.loop?Ie-1:0:Re>=Ie?l.value=t.loop?0:Ie-1:l.value=Re,Ne===l.value&&q(Ne),ae()}function q(Re){r.value.forEach((Ie,Ne)=>{Ie.translateItem(Ne,l.value,Re)})}function Y(Re,Ie){var Ne,Je,je,ft;const Et=T(r),ke=Et.length;if(ke===0||!Re.states.inStage)return!1;const Ye=Ie+1,at=Ie-1,He=ke-1,Tt=Et[He].states.active,Ut=Et[0].states.active,Rt=(Je=(Ne=Et[Ye])==null?void 0:Ne.states)==null?void 0:Je.active,Bt=(ft=(je=Et[at])==null?void 0:je.states)==null?void 0:ft.active;return Ie===He&&Ut||Rt?"left":Ie===0&&Tt||Bt?"right":!1}function ee(){d.value=!0,t.pauseOnHover&&Q()}function ce(){d.value=!1,G()}function se(){C.value=!1}function le(Re){T(P)||r.value.forEach((Ie,Ne)=>{Re===Y(Ie,Ne)&&(Ie.states.hover=!0)})}function ie(){T(P)||r.value.forEach(Re=>{Re.states.hover=!1})}function pe(Re){Re!==l.value&&(y.value||(C.value=!0)),l.value=Re}function ue(Re){t.trigger==="hover"&&Re!==l.value&&(l.value=Re,y.value||(C.value=!0))}function me(){te(l.value-1)}function Le(){te(l.value+1)}function ae(){Q(),t.pauseOnHover||G()}function be(Re){t.height==="auto"&&(A.value=Re)}function _e(){var Re;const Ie=(Re=a.default)==null?void 0:Re.call(a);if(!Ie)return null;const Ne=Hy(Ie),Je="ElCarouselItem",je=Ne.filter(ft=>ya(ft)&&ft.type.name===Je);return(je==null?void 0:je.length)===2&&t.loop&&!I.value?(v.value=!0,je):(v.value=!1,null)}zt(()=>l.value,(Re,Ie)=>{q(Ie),v.value&&(Re=Re%2,Ie=Ie%2),Ie>-1&&e("change",Re,Ie)}),zt(()=>t.autoplay,Re=>{Re?G():Q()}),zt(()=>t.loop,()=>{te(l.value)}),zt(()=>t.interval,()=>{ae()});const $e=Ds();return dr(()=>{zt(()=>r.value,()=>{r.value.length>0&&te(t.initialIndex)},{immediate:!0}),$e.value=Ia(p.value,()=>{q()}),G()}),Do(()=>{Q(),p.value&&$e.value&&$e.value.stop()}),Rr(lue,{root:p,isCardType:I,isVertical:P,items:r,loop:t.loop,addItem:i,removeItem:s,setActiveItem:te,setContainerHeight:be}),{root:p,activeIndex:l,arrowDisplay:x,hasLabel:M,hover:d,isCardType:I,isTransitioning:C,items:r,isVertical:P,containerStyle:F,isItemsTwoLength:v,handleButtonEnter:le,handleTransitionEnd:se,handleButtonLeave:ie,handleIndicatorClick:pe,handleMouseEnter:ee,handleMouseLeave:ce,setActiveItem:te,prev:me,next:Le,PlaceholderItem:_e,isTwoLengthShow:H,throttledArrowClick:D,throttledIndicatorHover:V}},w6e=["aria-label"],x6e=["aria-label"],C6e=["onMouseenter","onClick"],E6e=["aria-label"],S6e={key:0},T6e={key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},I6e=rt("defs",null,[rt("filter",{id:"elCarouselHorizontal"},[rt("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),rt("filter",{id:"elCarouselVertical"},[rt("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])],-1),B6e=[I6e],M6e="ElCarousel",L6e=Ge({name:M6e}),R6e=Ge({...L6e,props:y6e,emits:_6e,setup(t,{expose:e,emit:n}){const r=t,{root:i,activeIndex:s,arrowDisplay:a,hasLabel:l,hover:o,isCardType:d,items:p,isVertical:A,containerStyle:v,handleButtonEnter:y,handleButtonLeave:C,isTransitioning:x,handleIndicatorClick:M,handleMouseEnter:I,handleMouseLeave:P,handleTransitionEnd:F,setActiveItem:D,prev:V,next:H,PlaceholderItem:Q,isTwoLengthShow:G,throttledArrowClick:W,throttledIndicatorHover:te}=b6e(r,n),q=_n("carousel"),{t:Y}=Ts(),ee=oe(()=>{const le=[q.b(),q.m(r.direction)];return T(d)&&le.push(q.m("card")),le}),ce=oe(()=>{const le=[q.e("container")];return r.motionBlur&&T(x)&&le.push(T(A)?`${q.namespace.value}-transitioning-vertical`:`${q.namespace.value}-transitioning`),le}),se=oe(()=>{const le=[q.e("indicators"),q.em("indicators",r.direction)];return T(l)&&le.push(q.em("indicators","labels")),r.indicatorPosition==="outside"&&le.push(q.em("indicators","outside")),T(A)&&le.push(q.em("indicators","right")),le});return e({setActiveItem:D,prev:V,next:H}),(le,ie)=>(ve(),Ue("div",{ref_key:"root",ref:i,class:xe(T(ee)),onMouseenter:ie[7]||(ie[7]=qr((...pe)=>T(I)&&T(I)(...pe),["stop"])),onMouseleave:ie[8]||(ie[8]=qr((...pe)=>T(P)&&T(P)(...pe),["stop"]))},[T(a)?(ve(),qt(fc,{key:0,name:"carousel-arrow-left",persisted:""},{default:It(()=>[ci(rt("button",{type:"button",class:xe([T(q).e("arrow"),T(q).em("arrow","left")]),"aria-label":T(Y)("el.carousel.leftArrow"),onMouseenter:ie[0]||(ie[0]=pe=>T(y)("left")),onMouseleave:ie[1]||(ie[1]=(...pe)=>T(C)&&T(C)(...pe)),onClick:ie[2]||(ie[2]=qr(pe=>T(W)(T(s)-1),["stop"]))},[pt(T(mr),null,{default:It(()=>[pt(T(r_))]),_:1})],42,w6e),[[Hs,(le.arrow==="always"||T(o))&&(r.loop||T(s)>0)]])]),_:1})):wt("v-if",!0),T(a)?(ve(),qt(fc,{key:1,name:"carousel-arrow-right",persisted:""},{default:It(()=>[ci(rt("button",{type:"button",class:xe([T(q).e("arrow"),T(q).em("arrow","right")]),"aria-label":T(Y)("el.carousel.rightArrow"),onMouseenter:ie[3]||(ie[3]=pe=>T(y)("right")),onMouseleave:ie[4]||(ie[4]=(...pe)=>T(C)&&T(C)(...pe)),onClick:ie[5]||(ie[5]=qr(pe=>T(W)(T(s)+1),["stop"]))},[pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})],42,x6e),[[Hs,(le.arrow==="always"||T(o))&&(r.loop||T(s)<T(p).length-1)]])]),_:1})):wt("v-if",!0),rt("div",{class:xe(T(ce)),style:vr(T(v)),onTransitionend:ie[6]||(ie[6]=(...pe)=>T(F)&&T(F)(...pe))},[pt(T(Q)),kt(le.$slots,"default")],38),le.indicatorPosition!=="none"?(ve(),Ue("ul",{key:2,class:xe(T(se))},[(ve(!0),Ue(_r,null,cs(T(p),(pe,ue)=>ci((ve(),Ue("li",{key:ue,class:xe([T(q).e("indicator"),T(q).em("indicator",le.direction),T(q).is("active",ue===T(s))]),onMouseenter:me=>T(te)(ue),onClick:qr(me=>T(M)(ue),["stop"])},[rt("button",{class:xe(T(q).e("button")),"aria-label":T(Y)("el.carousel.indicator",{index:ue+1})},[T(l)?(ve(),Ue("span",S6e,Nn(pe.props.label),1)):wt("v-if",!0)],10,E6e)],42,C6e)),[[Hs,T(G)(ue)]])),128))],2)):wt("v-if",!0),r.motionBlur?(ve(),Ue("svg",T6e,B6e)):wt("v-if",!0)],34))}});var P6e=Fn(R6e,[["__file","carousel.vue"]]);const F6e=Ln({name:{type:String,default:""},label:{type:[String,Number],default:""}}),O6e=(t,e)=>{const n=mn(lue),r=mi(),i=.83,s=Me(),a=Me(!1),l=Me(0),o=Me(1),d=Me(!1),p=Me(!1),A=Me(!1),v=Me(!1),{isCardType:y,isVertical:C}=n;function x(D,V,H){const Q=H-1,G=V-1,W=V+1,te=H/2;return V===0&&D===Q?-1:V===Q&&D===0?H:D<G&&V-D>=te?H+1:D>W&&D-V>=te?-2:D}function M(D,V){var H,Q;const G=T(C)?((H=n.root.value)==null?void 0:H.offsetHeight)||0:((Q=n.root.value)==null?void 0:Q.offsetWidth)||0;return A.value?G*((2-i)*(D-V)+1)/4:D<V?-(1+i)*G/4:(3+i)*G/4}function I(D,V,H){const Q=n.root.value;return Q?((H?Q.offsetHeight:Q.offsetWidth)||0)*(D-V):0}const P=(D,V,H)=>{var Q;const G=T(y),W=(Q=n.items.value.length)!=null?Q:Number.NaN,te=D===V;!G&&!Cl(H)&&(v.value=te||D===H),!te&&W>2&&n.loop&&(D=x(D,V,W));const q=T(C);d.value=te,G?(A.value=Math.round(Math.abs(D-V))<=1,l.value=M(D,V),o.value=T(d)?1:i):l.value=I(D,V,q),p.value=!0,te&&s.value&&n.setContainerHeight(s.value.offsetHeight)};function F(){if(n&&T(y)){const D=n.items.value.findIndex(({uid:V})=>V===r.uid);n.setActiveItem(D)}}return dr(()=>{n.addItem({props:t,states:Xs({hover:a,translate:l,scale:o,active:d,ready:p,inStage:A,animating:v}),uid:r.uid,translateItem:P})}),Ss(()=>{n.removeItem(r.uid)}),{carouselItemRef:s,active:d,animating:v,hover:a,inStage:A,isVertical:C,translate:l,isCardType:y,scale:o,ready:p,handleItemClick:F}},N6e=Ge({name:"ElCarouselItem"}),k6e=Ge({...N6e,props:F6e,setup(t){const e=t,n=_n("carousel"),{carouselItemRef:r,active:i,animating:s,hover:a,inStage:l,isVertical:o,translate:d,isCardType:p,scale:A,ready:v,handleItemClick:y}=O6e(e),C=oe(()=>[n.e("item"),n.is("active",i.value),n.is("in-stage",l.value),n.is("hover",a.value),n.is("animating",s.value),{[n.em("item","card")]:p.value,[n.em("item","card-vertical")]:p.value&&o.value}]),x=oe(()=>{const I=`${`translate${T(o)?"Y":"X"}`}(${T(d)}px)`,P=`scale(${T(A)})`;return{transform:[I,P].join(" ")}});return(M,I)=>ci((ve(),Ue("div",{ref_key:"carouselItemRef",ref:r,class:xe(T(C)),style:vr(T(x)),onClick:I[0]||(I[0]=(...P)=>T(y)&&T(y)(...P))},[T(p)?ci((ve(),Ue("div",{key:0,class:xe(T(n).e("mask"))},null,2)),[[Hs,!T(i)]]):wt("v-if",!0),kt(M.$slots,"default")],6)),[[Hs,T(v)]])}});var cue=Fn(k6e,[["__file","carousel-item.vue"]]);const D6e=_i(P6e,{CarouselItem:cue}),U6e=Pa(cue),uue={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Nc,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Eu(["ariaControls"])},hue={[Si]:t=>Xr(t)||Hr(t)||Sl(t),change:t=>Xr(t)||Hr(t)||Sl(t)},BE=Symbol("checkboxGroupContextKey"),z6e=({model:t,isChecked:e})=>{const n=mn(BE,void 0),r=oe(()=>{var s,a;const l=(s=n==null?void 0:n.max)==null?void 0:s.value,o=(a=n==null?void 0:n.min)==null?void 0:a.value;return!Cl(l)&&t.value.length>=l&&!e.value||!Cl(o)&&t.value.length<=o&&e.value});return{isDisabled:jh(oe(()=>(n==null?void 0:n.disabled.value)||r.value)),isLimitDisabled:r}},$6e=(t,{model:e,isLimitExceeded:n,hasOwnLabel:r,isDisabled:i,isLabeledByFormItem:s})=>{const a=mn(BE,void 0),{formItem:l}=bh(),{emit:o}=mi();function d(C){var x,M,I,P;return[!0,t.trueValue,t.trueLabel].includes(C)?(M=(x=t.trueValue)!=null?x:t.trueLabel)!=null?M:!0:(P=(I=t.falseValue)!=null?I:t.falseLabel)!=null?P:!1}function p(C,x){o("change",d(C),x)}function A(C){if(n.value)return;const x=C.target;o("change",d(x.checked),C)}async function v(C){n.value||!r.value&&!i.value&&s.value&&(C.composedPath().some(I=>I.tagName==="LABEL")||(e.value=d([!1,t.falseValue,t.falseLabel].includes(e.value)),await Tr(),p(e.value,C)))}const y=oe(()=>(a==null?void 0:a.validateEvent)||t.validateEvent);return zt(()=>t.modelValue,()=>{y.value&&(l==null||l.validate("change").catch(C=>void 0))}),{handleChange:A,onClickRoot:v}},V6e=t=>{const e=Me(!1),{emit:n}=mi(),r=mn(BE,void 0),i=oe(()=>Cl(r)===!1),s=Me(!1),a=oe({get(){var l,o;return i.value?(l=r==null?void 0:r.modelValue)==null?void 0:l.value:(o=t.modelValue)!=null?o:e.value},set(l){var o,d;i.value&&Jn(l)?(s.value=((o=r==null?void 0:r.max)==null?void 0:o.value)!==void 0&&l.length>(r==null?void 0:r.max.value)&&l.length>a.value.length,s.value===!1&&((d=r==null?void 0:r.changeEvent)==null||d.call(r,l))):(n(Si,l),e.value=l)}});return{model:a,isGroup:i,isLimitExceeded:s}},H6e=(t,e,{model:n})=>{const r=mn(BE,void 0),i=Me(!1),s=oe(()=>wb(t.value)?t.label:t.value),a=oe(()=>{const p=n.value;return Sl(p)?p:Jn(p)?xi(s.value)?p.map(fo).some(A=>vh(A,s.value)):p.map(fo).includes(s.value):p!=null?p===t.trueValue||p===t.trueLabel:!!p}),l=Gl(oe(()=>{var p;return(p=r==null?void 0:r.size)==null?void 0:p.value}),{prop:!0}),o=Gl(oe(()=>{var p;return(p=r==null?void 0:r.size)==null?void 0:p.value})),d=oe(()=>!!e.default||!wb(s.value));return{checkboxButtonSize:l,isChecked:a,isFocused:i,checkboxSize:o,hasOwnLabel:d,actualValue:s}},due=(t,e)=>{const{formItem:n}=bh(),{model:r,isGroup:i,isLimitExceeded:s}=V6e(t),{isFocused:a,isChecked:l,checkboxButtonSize:o,checkboxSize:d,hasOwnLabel:p,actualValue:A}=H6e(t,e,{model:r}),{isDisabled:v}=z6e({model:r,isChecked:l}),{inputId:y,isLabeledByFormItem:C}=jA(t,{formItemContext:n,disableIdGeneration:p,disableIdManagement:i}),{handleChange:x,onClickRoot:M}=$6e(t,{model:r,isLimitExceeded:s,hasOwnLabel:p,isDisabled:v,isLabeledByFormItem:C});return(()=>{function P(){var F,D;Jn(r.value)&&!r.value.includes(A.value)?r.value.push(A.value):r.value=(D=(F=t.trueValue)!=null?F:t.trueLabel)!=null?D:!0}t.checked&&P()})(),Jc({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},oe(()=>!!t.controls)),Jc({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},oe(()=>i.value&&wb(t.value))),Jc({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},oe(()=>!!t.trueLabel)),Jc({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},oe(()=>!!t.falseLabel)),{inputId:y,isLabeledByFormItem:C,isChecked:l,isDisabled:v,isFocused:a,checkboxButtonSize:o,checkboxSize:d,hasOwnLabel:p,model:r,actualValue:A,handleChange:x,onClickRoot:M}},G6e=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],Q6e=["id","indeterminate","disabled","value","name","tabindex"],j6e=Ge({name:"ElCheckbox"}),K6e=Ge({...j6e,props:uue,emits:hue,setup(t){const e=t,n=Uc(),{inputId:r,isLabeledByFormItem:i,isChecked:s,isDisabled:a,isFocused:l,checkboxSize:o,hasOwnLabel:d,model:p,actualValue:A,handleChange:v,onClickRoot:y}=due(e,n),C=_n("checkbox"),x=oe(()=>[C.b(),C.m(o.value),C.is("disabled",a.value),C.is("bordered",e.border),C.is("checked",s.value)]),M=oe(()=>[C.e("input"),C.is("disabled",a.value),C.is("checked",s.value),C.is("indeterminate",e.indeterminate),C.is("focus",l.value)]);return(I,P)=>(ve(),qt(Mi(!T(d)&&T(i)?"span":"label"),{class:xe(T(x)),"aria-controls":I.indeterminate?I.controls||I.ariaControls:null,onClick:T(y)},{default:It(()=>{var F,D;return[rt("span",{class:xe(T(M))},[I.trueValue||I.falseValue||I.trueLabel||I.falseLabel?ci((ve(),Ue("input",{key:0,id:T(r),"onUpdate:modelValue":P[0]||(P[0]=V=>Go(p)?p.value=V:null),class:xe(T(C).e("original")),type:"checkbox",indeterminate:I.indeterminate,name:I.name,tabindex:I.tabindex,disabled:T(a),"true-value":(F=I.trueValue)!=null?F:I.trueLabel,"false-value":(D=I.falseValue)!=null?D:I.falseLabel,onChange:P[1]||(P[1]=(...V)=>T(v)&&T(v)(...V)),onFocus:P[2]||(P[2]=V=>l.value=!0),onBlur:P[3]||(P[3]=V=>l.value=!1),onClick:P[4]||(P[4]=qr(()=>{},["stop"]))},null,42,G6e)),[[tO,T(p)]]):ci((ve(),Ue("input",{key:1,id:T(r),"onUpdate:modelValue":P[5]||(P[5]=V=>Go(p)?p.value=V:null),class:xe(T(C).e("original")),type:"checkbox",indeterminate:I.indeterminate,disabled:T(a),value:T(A),name:I.name,tabindex:I.tabindex,onChange:P[6]||(P[6]=(...V)=>T(v)&&T(v)(...V)),onFocus:P[7]||(P[7]=V=>l.value=!0),onBlur:P[8]||(P[8]=V=>l.value=!1),onClick:P[9]||(P[9]=qr(()=>{},["stop"]))},null,42,Q6e)),[[tO,T(p)]]),rt("span",{class:xe(T(C).e("inner"))},null,2)],2),T(d)?(ve(),Ue("span",{key:0,class:xe(T(C).e("label"))},[kt(I.$slots,"default"),I.$slots.default?wt("v-if",!0):(ve(),Ue(_r,{key:0},[gs(Nn(I.label),1)],64))],2)):wt("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var W6e=Fn(K6e,[["__file","checkbox.vue"]]);const q6e=["name","tabindex","disabled","true-value","false-value"],Y6e=["name","tabindex","disabled","value"],X6e=Ge({name:"ElCheckboxButton"}),Z6e=Ge({...X6e,props:uue,emits:hue,setup(t){const e=t,n=Uc(),{isFocused:r,isChecked:i,isDisabled:s,checkboxButtonSize:a,model:l,actualValue:o,handleChange:d}=due(e,n),p=mn(BE,void 0),A=_n("checkbox"),v=oe(()=>{var C,x,M,I;const P=(x=(C=p==null?void 0:p.fill)==null?void 0:C.value)!=null?x:"";return{backgroundColor:P,borderColor:P,color:(I=(M=p==null?void 0:p.textColor)==null?void 0:M.value)!=null?I:"",boxShadow:P?`-1px 0 0 0 ${P}`:void 0}}),y=oe(()=>[A.b("button"),A.bm("button",a.value),A.is("disabled",s.value),A.is("checked",i.value),A.is("focus",r.value)]);return(C,x)=>{var M,I;return ve(),Ue("label",{class:xe(T(y))},[C.trueValue||C.falseValue||C.trueLabel||C.falseLabel?ci((ve(),Ue("input",{key:0,"onUpdate:modelValue":x[0]||(x[0]=P=>Go(l)?l.value=P:null),class:xe(T(A).be("button","original")),type:"checkbox",name:C.name,tabindex:C.tabindex,disabled:T(s),"true-value":(M=C.trueValue)!=null?M:C.trueLabel,"false-value":(I=C.falseValue)!=null?I:C.falseLabel,onChange:x[1]||(x[1]=(...P)=>T(d)&&T(d)(...P)),onFocus:x[2]||(x[2]=P=>r.value=!0),onBlur:x[3]||(x[3]=P=>r.value=!1),onClick:x[4]||(x[4]=qr(()=>{},["stop"]))},null,42,q6e)),[[tO,T(l)]]):ci((ve(),Ue("input",{key:1,"onUpdate:modelValue":x[5]||(x[5]=P=>Go(l)?l.value=P:null),class:xe(T(A).be("button","original")),type:"checkbox",name:C.name,tabindex:C.tabindex,disabled:T(s),value:T(o),onChange:x[6]||(x[6]=(...P)=>T(d)&&T(d)(...P)),onFocus:x[7]||(x[7]=P=>r.value=!0),onBlur:x[8]||(x[8]=P=>r.value=!1),onClick:x[9]||(x[9]=qr(()=>{},["stop"]))},null,42,Y6e)),[[tO,T(l)]]),C.$slots.default||C.label?(ve(),Ue("span",{key:2,class:xe(T(A).be("button","inner")),style:vr(T(i)?T(v):void 0)},[kt(C.$slots,"default",{},()=>[gs(Nn(C.label),1)])],6)):wt("v-if",!0)],2)}}});var fue=Fn(Z6e,[["__file","checkbox-button.vue"]]);const J6e=Ln({modelValue:{type:Mt(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Nc,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Eu(["ariaLabel"])}),eUe={[Si]:t=>Jn(t),change:t=>Jn(t)},tUe=Ge({name:"ElCheckboxGroup"}),nUe=Ge({...tUe,props:J6e,emits:eUe,setup(t,{emit:e}){const n=t,r=_n("checkbox"),{formItem:i}=bh(),{inputId:s,isLabeledByFormItem:a}=jA(n,{formItemContext:i}),l=async d=>{e(Si,d),await Tr(),e("change",d)},o=oe({get(){return n.modelValue},set(d){l(d)}});return Rr(BE,{...Gg(dc(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:o,changeEvent:l}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},oe(()=>!!n.label)),zt(()=>n.modelValue,()=>{n.validateEvent&&(i==null||i.validate("change").catch(d=>void 0))}),(d,p)=>{var A;return ve(),qt(Mi(d.tag),{id:T(s),class:xe(T(r).b("group")),role:"group","aria-label":T(a)?void 0:d.label||d.ariaLabel||"checkbox-group","aria-labelledby":T(a)?(A=T(i))==null?void 0:A.labelId:void 0},{default:It(()=>[kt(d.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var pue=Fn(nUe,[["__file","checkbox-group.vue"]]);const Ip=_i(W6e,{CheckboxButton:fue,CheckboxGroup:pue}),rUe=Pa(fue),Aue=Pa(pue),gue=Ln({modelValue:{type:[String,Number,Boolean],default:void 0},size:Nc,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),iUe=Ln({...gue,border:Boolean}),mue={[Si]:t=>Xr(t)||Hr(t)||Sl(t),[Qo]:t=>Xr(t)||Hr(t)||Sl(t)},vue=Symbol("radioGroupKey"),yue=(t,e)=>{const n=Me(),r=mn(vue,void 0),i=oe(()=>!!r),s=oe(()=>wb(t.value)?t.label:t.value),a=oe({get(){return i.value?r.modelValue:t.modelValue},set(A){i.value?r.changeEvent(A):e&&e(Si,A),n.value.checked=t.modelValue===s.value}}),l=Gl(oe(()=>r==null?void 0:r.size)),o=jh(oe(()=>r==null?void 0:r.disabled)),d=Me(!1),p=oe(()=>o.value||i.value&&a.value!==s.value?-1:0);return Jc({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},oe(()=>i.value&&wb(t.value))),{radioRef:n,isGroup:i,radioGroup:r,focus:d,size:l,disabled:o,tabIndex:p,modelValue:a,actualValue:s}},sUe=["value","name","disabled"],oUe=Ge({name:"ElRadio"}),aUe=Ge({...oUe,props:iUe,emits:mue,setup(t,{emit:e}){const n=t,r=_n("radio"),{radioRef:i,radioGroup:s,focus:a,size:l,disabled:o,modelValue:d,actualValue:p}=yue(n,e);function A(){Tr(()=>e("change",d.value))}return(v,y)=>{var C;return ve(),Ue("label",{class:xe([T(r).b(),T(r).is("disabled",T(o)),T(r).is("focus",T(a)),T(r).is("bordered",v.border),T(r).is("checked",T(d)===T(p)),T(r).m(T(l))])},[rt("span",{class:xe([T(r).e("input"),T(r).is("disabled",T(o)),T(r).is("checked",T(d)===T(p))])},[ci(rt("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":y[0]||(y[0]=x=>Go(d)?d.value=x:null),class:xe(T(r).e("original")),value:T(p),name:v.name||((C=T(s))==null?void 0:C.name),disabled:T(o),type:"radio",onFocus:y[1]||(y[1]=x=>a.value=!0),onBlur:y[2]||(y[2]=x=>a.value=!1),onChange:A,onClick:y[3]||(y[3]=qr(()=>{},["stop"]))},null,42,sUe),[[Voe,T(d)]]),rt("span",{class:xe(T(r).e("inner"))},null,2)],2),rt("span",{class:xe(T(r).e("label")),onKeydown:y[4]||(y[4]=qr(()=>{},["stop"]))},[kt(v.$slots,"default",{},()=>[gs(Nn(v.label),1)])],34)],2)}}});var lUe=Fn(aUe,[["__file","radio.vue"]]);const cUe=Ln({...gue}),uUe=["value","name","disabled"],hUe=Ge({name:"ElRadioButton"}),dUe=Ge({...hUe,props:cUe,setup(t){const e=t,n=_n("radio"),{radioRef:r,focus:i,size:s,disabled:a,modelValue:l,radioGroup:o,actualValue:d}=yue(e),p=oe(()=>({backgroundColor:(o==null?void 0:o.fill)||"",borderColor:(o==null?void 0:o.fill)||"",boxShadow:o!=null&&o.fill?`-1px 0 0 0 ${o.fill}`:"",color:(o==null?void 0:o.textColor)||""}));return(A,v)=>{var y;return ve(),Ue("label",{class:xe([T(n).b("button"),T(n).is("active",T(l)===T(d)),T(n).is("disabled",T(a)),T(n).is("focus",T(i)),T(n).bm("button",T(s))])},[ci(rt("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":v[0]||(v[0]=C=>Go(l)?l.value=C:null),class:xe(T(n).be("button","original-radio")),value:T(d),type:"radio",name:A.name||((y=T(o))==null?void 0:y.name),disabled:T(a),onFocus:v[1]||(v[1]=C=>i.value=!0),onBlur:v[2]||(v[2]=C=>i.value=!1),onClick:v[3]||(v[3]=qr(()=>{},["stop"]))},null,42,uUe),[[Voe,T(l)]]),rt("span",{class:xe(T(n).be("button","inner")),style:vr(T(l)===T(d)?T(p):{}),onKeydown:v[4]||(v[4]=qr(()=>{},["stop"]))},[kt(A.$slots,"default",{},()=>[gs(Nn(A.label),1)])],38)],2)}}});var _ue=Fn(dUe,[["__file","radio-button.vue"]]);const fUe=Ln({id:{type:String,default:void 0},size:Nc,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Eu(["ariaLabel"])}),pUe=mue,AUe=["id","aria-label","aria-labelledby"],gUe=Ge({name:"ElRadioGroup"}),mUe=Ge({...gUe,props:fUe,emits:pUe,setup(t,{emit:e}){const n=t,r=_n("radio"),i=Hu(),s=Me(),{formItem:a}=bh(),{inputId:l,isLabeledByFormItem:o}=jA(n,{formItemContext:a}),d=A=>{e(Si,A),Tr(()=>e("change",A))};dr(()=>{const A=s.value.querySelectorAll("[type=radio]"),v=A[0];!Array.from(A).some(y=>y.checked)&&v&&(v.tabIndex=0)});const p=oe(()=>n.name||i.value);return Rr(vue,Xs({...dc(n),changeEvent:d,name:p})),zt(()=>n.modelValue,()=>{n.validateEvent&&(a==null||a.validate("change").catch(A=>void 0))}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},oe(()=>!!n.label)),(A,v)=>(ve(),Ue("div",{id:T(l),ref_key:"radioGroupRef",ref:s,class:xe(T(r).b("group")),role:"radiogroup","aria-label":T(o)?void 0:A.label||A.ariaLabel||"radio-group","aria-labelledby":T(o)?T(a).labelId:void 0},[kt(A.$slots,"default")],10,AUe))}});var bue=Fn(mUe,[["__file","radio-group.vue"]]);const wue=_i(lUe,{RadioButton:_ue,RadioGroup:bue}),vUe=Pa(bue),yUe=Pa(_ue);var _Ue=Ge({name:"NodeContent",setup(){return{ns:_n("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:n}=this.$parent,{data:r,label:i}=e,{renderLabelFn:s}=n;return Br("span",{class:t.e("label")},s?s({node:e,data:r}):i)}});const hH=Symbol(),bUe=Ge({name:"ElCascaderNode",components:{ElCheckbox:Ip,ElRadio:wue,NodeContent:_Ue,ElIcon:mr,Check:GB,Loading:C_,ArrowRight:Uh},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=mn(hH),r=_n("cascader-node"),i=oe(()=>n.isHoverMenu),s=oe(()=>n.config.multiple),a=oe(()=>n.config.checkStrictly),l=oe(()=>{var H;return(H=n.checkedNodes[0])==null?void 0:H.uid}),o=oe(()=>t.node.isDisabled),d=oe(()=>t.node.isLeaf),p=oe(()=>a.value&&!d.value||!o.value),A=oe(()=>y(n.expandingNode)),v=oe(()=>a.value&&n.checkedNodes.some(y)),y=H=>{var Q;const{level:G,uid:W}=t.node;return((Q=H==null?void 0:H.pathNodes[G-1])==null?void 0:Q.uid)===W},C=()=>{A.value||n.expandNode(t.node)},x=H=>{const{node:Q}=t;H!==Q.checked&&n.handleCheckChange(Q,H)},M=()=>{n.lazyLoad(t.node,()=>{d.value||C()})},I=H=>{i.value&&(P(),!d.value&&e("expand",H))},P=()=>{const{node:H}=t;!p.value||H.loading||(H.loaded?C():M())},F=()=>{i.value&&!d.value||(d.value&&!o.value&&!a.value&&!s.value?V(!0):P())},D=H=>{a.value?(x(H),t.node.loaded&&C()):V(H)},V=H=>{t.node.loaded?(x(H),!a.value&&C()):M()};return{panel:n,isHoverMenu:i,multiple:s,checkStrictly:a,checkedNodeId:l,isDisabled:o,isLeaf:d,expandable:p,inExpandingPath:A,inCheckedPath:v,ns:r,handleHoverExpand:I,handleExpand:P,handleClick:F,handleCheck:V,handleSelectCheck:D}}}),wUe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],xUe=rt("span",null,null,-1);function CUe(t,e,n,r,i,s){const a=ui("el-checkbox"),l=ui("el-radio"),o=ui("check"),d=ui("el-icon"),p=ui("node-content"),A=ui("loading"),v=ui("arrow-right");return ve(),Ue("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:xe([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...y)=>t.handleHoverExpand&&t.handleHoverExpand(...y)),onFocus:e[3]||(e[3]=(...y)=>t.handleHoverExpand&&t.handleHoverExpand(...y)),onClick:e[4]||(e[4]=(...y)=>t.handleClick&&t.handleClick(...y))},[wt(" prefix "),t.multiple?(ve(),qt(a,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:e[0]||(e[0]=qr(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(ve(),qt(l,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:e[1]||(e[1]=qr(()=>{},["stop"]))},{default:It(()=>[wt(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),xUe]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(ve(),qt(d,{key:2,class:xe(t.ns.e("prefix"))},{default:It(()=>[pt(o)]),_:1},8,["class"])):wt("v-if",!0),wt(" content "),pt(p),wt(" postfix "),t.isLeaf?wt("v-if",!0):(ve(),Ue(_r,{key:3},[t.node.loading?(ve(),qt(d,{key:0,class:xe([t.ns.is("loading"),t.ns.e("postfix")])},{default:It(()=>[pt(A)]),_:1},8,["class"])):(ve(),qt(d,{key:1,class:xe(["arrow-right",t.ns.e("postfix")])},{default:It(()=>[pt(v)]),_:1},8,["class"]))],64))],42,wUe)}var EUe=Fn(bUe,[["render",CUe],["__file","node.vue"]]);const SUe=Ge({name:"ElCascaderMenu",components:{Loading:C_,ElIcon:mr,ElScrollbar:d0,ElCascaderNode:EUe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=mi(),n=_n("cascader-menu"),{t:r}=Ts(),i=Hu();let s=null,a=null;const l=mn(hH),o=Me(null),d=oe(()=>!t.nodes.length),p=oe(()=>!l.initialLoaded),A=oe(()=>`${i.value}-${t.index}`),v=M=>{s=M.target},y=M=>{if(!(!l.isHoverMenu||!s||!o.value))if(s.contains(M.target)){C();const I=e.vnode.el,{left:P}=I.getBoundingClientRect(),{offsetWidth:F,offsetHeight:D}=I,V=M.clientX-P,H=s.offsetTop,Q=H+s.offsetHeight;o.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${V} ${H} L${F} 0 V${H} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${V} ${Q} L${F} ${D} V${Q} Z" />
        `}else a||(a=window.setTimeout(x,l.config.hoverThreshold))},C=()=>{a&&(clearTimeout(a),a=null)},x=()=>{o.value&&(o.value.innerHTML="",C())};return{ns:n,panel:l,hoverZone:o,isEmpty:d,isLoading:p,menuId:A,t:r,handleExpand:v,handleMouseMove:y,clearHoverZone:x}}});function TUe(t,e,n,r,i,s){const a=ui("el-cascader-node"),l=ui("loading"),o=ui("el-icon"),d=ui("el-scrollbar");return ve(),qt(d,{key:t.menuId,tag:"ul",role:"menu",class:xe(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:It(()=>{var p;return[(ve(!0),Ue(_r,null,cs(t.nodes,A=>(ve(),qt(a,{key:A.uid,node:A,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(ve(),Ue("div",{key:0,class:xe(t.ns.e("empty-text"))},[pt(o,{size:"14",class:xe(t.ns.is("loading"))},{default:It(()=>[pt(l)]),_:1},8,["class"]),gs(" "+Nn(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(ve(),Ue("div",{key:1,class:xe(t.ns.e("empty-text"))},Nn(t.t("el.cascader.noData")),3)):(p=t.panel)!=null&&p.isHoverMenu?(ve(),Ue("svg",{key:2,ref:"hoverZone",class:xe(t.ns.e("hover-zone"))},null,2)):wt("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var IUe=Fn(SUe,[["render",TUe],["__file","menu.vue"]]);let BUe=0;const MUe=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};let N3=class k3{constructor(e,n,r,i=!1){this.data=e,this.config=n,this.parent=r,this.root=i,this.uid=BUe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:a,children:l}=n,o=e[l],d=MUe(this);this.level=i?0:r?r.level+1:1,this.value=e[s],this.label=e[a],this.pathNodes=d,this.pathValues=d.map(p=>p.value),this.pathLabels=d.map(p=>p.label),this.childrenData=o,this.children=(o||[]).map(p=>new k3(p,n,this)),this.loaded=!n.lazy||this.isLeaf||!up(o)}get isDisabled(){const{data:e,parent:n,config:r}=this,{disabled:i,checkStrictly:s}=r;return(Gr(i)?i(e,this):!!e[i])||!s&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:r,loaded:i}=this,{lazy:s,leaf:a}=n,l=Gr(a)?a(e,this):e[a];return Cl(l)?s&&!i?!1:!(Array.isArray(r)&&r.length):!!l}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:r}=this,i=new k3(e,this.config,this);return Array.isArray(n)?n.push(e):this.childrenData=[e],r.push(i),i}calcText(e,n){const r=e?this.pathLabels.join(n):this.label;return this.text=r,r}broadcast(e,...n){const r=`onParent${$g(e)}`;this.children.forEach(i=>{i&&(i.broadcast(e,...n),i[r]&&i[r](...n))})}emit(e,...n){const{parent:r}=this,i=`onChild${$g(e)}`;r&&(r[i]&&r[i](...n),r.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(i=>!i.isDisabled),r=n.length?n.every(i=>i.checked):!1;this.setCheckState(r)}setCheckState(e){const n=this.children.length,r=this.children.reduce((i,s)=>{const a=s.checked?1:s.indeterminate?.5:0;return i+a},0);this.checked=this.loaded&&this.children.filter(i=>!i.isDisabled).every(i=>i.loaded&&i.checked)&&e,this.indeterminate=this.loaded&&r!==n&&r>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:r}=this.config;n||!r?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const D3=(t,e)=>t.reduce((n,r)=>(r.isLeaf?n.push(r):(!e&&n.push(r),n=n.concat(D3(r.children,e))),n),[]);class DZ{constructor(e,n){this.config=n;const r=(e||[]).map(i=>new N3(i,this.config));this.nodes=r,this.allNodes=D3(r,!1),this.leafNodes=D3(r,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const r=n?n.appendChild(e):new N3(e,this.config);n||this.nodes.push(r),this.allNodes.push(r),r.isLeaf&&this.leafNodes.push(r)}appendNodes(e,n){e.forEach(r=>this.appendNode(r,n))}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(i=>vh(i.value,e)||vh(i.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:r,level:i})=>vh(e.value,r)&&e.level===i)||null}}const xue=Ln({modelValue:{type:Mt([Number,String,Array])},options:{type:Mt(Array),default:()=>[]},props:{type:Mt(Object),default:()=>({})}}),LUe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:co,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},RUe=t=>oe(()=>({...LUe,...t.props})),UZ=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},PUe=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():Fae(t)&&t.click()},FUe=(t,e)=>{const n=e.slice(0),r=n.map(s=>s.uid),i=t.reduce((s,a)=>{const l=r.indexOf(a.uid);return l>-1&&(s.push(a),n.splice(l,1),r.splice(l,1)),s},[]);return i.push(...n),i},OUe=Ge({name:"ElCascaderPanel",components:{ElCascaderMenu:IUe},props:{...xue,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Si,Qo,"close","expand-change"],setup(t,{emit:e,slots:n}){let r=!1;const i=_n("cascader"),s=RUe(t);let a=null;const l=Me(!0),o=Me([]),d=Me(null),p=Me([]),A=Me(null),v=Me([]),y=oe(()=>s.value.expandTrigger==="hover"),C=oe(()=>t.renderLabel||n.default),x=()=>{const{options:Y}=t,ee=s.value;r=!1,a=new DZ(Y,ee),p.value=[a.getNodes()],ee.lazy&&up(t.options)?(l.value=!1,M(void 0,ce=>{ce&&(a=new DZ(ce,ee),p.value=[a.getNodes()]),l.value=!0,G(!1,!0)})):G(!1,!0)},M=(Y,ee)=>{const ce=s.value;Y=Y||new N3({},ce,void 0,!0),Y.loading=!0;const se=le=>{const ie=Y,pe=ie.root?null:ie;le&&(a==null||a.appendNodes(le,pe)),ie.loading=!1,ie.loaded=!0,ie.childrenData=ie.childrenData||[],ee&&ee(le)};ce.lazyLoad(Y,se)},I=(Y,ee)=>{var ce;const{level:se}=Y,le=p.value.slice(0,se);let ie;Y.isLeaf?ie=Y.pathNodes[se-2]:(ie=Y,le.push(Y.children)),((ce=A.value)==null?void 0:ce.uid)!==(ie==null?void 0:ie.uid)&&(A.value=Y,p.value=le,!ee&&e("expand-change",(Y==null?void 0:Y.pathValues)||[]))},P=(Y,ee,ce=!0)=>{const{checkStrictly:se,multiple:le}=s.value,ie=v.value[0];r=!0,!le&&(ie==null||ie.doCheck(!1)),Y.doCheck(ee),Q(),ce&&!le&&!se&&e("close"),!ce&&!le&&!se&&F(Y)},F=Y=>{Y&&(Y=Y.parent,F(Y),Y&&I(Y))},D=Y=>a==null?void 0:a.getFlattedNodes(Y),V=Y=>{var ee;return(ee=D(Y))==null?void 0:ee.filter(ce=>ce.checked!==!1)},H=()=>{v.value.forEach(Y=>Y.doCheck(!1)),Q(),p.value=p.value.slice(0,1),A.value=null,e("expand-change",[])},Q=()=>{var Y;const{checkStrictly:ee,multiple:ce}=s.value,se=v.value,le=V(!ee),ie=FUe(se,le),pe=ie.map(ue=>ue.valueByOption);v.value=ie,d.value=ce?pe:(Y=pe[0])!=null?Y:null},G=(Y=!1,ee=!1)=>{const{modelValue:ce}=t,{lazy:se,multiple:le,checkStrictly:ie}=s.value,pe=!ie;if(!(!l.value||r||!ee&&vh(ce,d.value)))if(se&&!Y){const me=kX(IPe(Sf(ce))).map(Le=>a==null?void 0:a.getNodeByValue(Le)).filter(Le=>!!Le&&!Le.loaded&&!Le.loading);me.length?me.forEach(Le=>{M(Le,()=>G(!1,ee))}):G(!0,ee)}else{const ue=le?Sf(ce):[ce],me=kX(ue.map(Le=>a==null?void 0:a.getNodeByValue(Le,pe)));W(me,ee),d.value=aO(ce)}},W=(Y,ee=!0)=>{const{checkStrictly:ce}=s.value,se=v.value,le=Y.filter(ue=>!!ue&&(ce||ue.isLeaf)),ie=a==null?void 0:a.getSameNode(A.value),pe=ee&&ie||le[0];pe?pe.pathNodes.forEach(ue=>I(ue,!0)):A.value=null,se.forEach(ue=>ue.doCheck(!1)),Xs(le).forEach(ue=>ue.doCheck(!0)),v.value=le,Tr(te)},te=()=>{As&&o.value.forEach(Y=>{const ee=Y==null?void 0:Y.$el;if(ee){const ce=ee.querySelector(`.${i.namespace.value}-scrollbar__wrap`),se=ee.querySelector(`.${i.b("node")}.${i.is("active")}`)||ee.querySelector(`.${i.b("node")}.in-active-path`);Mle(ce,se)}})},q=Y=>{const ee=Y.target,{code:ce}=Y;switch(ce){case Fr.up:case Fr.down:{Y.preventDefault();const se=ce===Fr.up?-1:1;ZP(Oae(ee,se,`.${i.b("node")}[tabindex="-1"]`));break}case Fr.left:{Y.preventDefault();const se=o.value[UZ(ee)-1],le=se==null?void 0:se.$el.querySelector(`.${i.b("node")}[aria-expanded="true"]`);ZP(le);break}case Fr.right:{Y.preventDefault();const se=o.value[UZ(ee)+1],le=se==null?void 0:se.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`);ZP(le);break}case Fr.enter:PUe(ee);break}};return Rr(hH,Xs({config:s,expandingNode:A,checkedNodes:v,isHoverMenu:y,initialLoaded:l,renderLabelFn:C,lazyLoad:M,expandNode:I,handleCheckChange:P})),zt([s,()=>t.options],x,{deep:!0,immediate:!0}),zt(()=>t.modelValue,()=>{r=!1,G()},{deep:!0}),zt(()=>d.value,Y=>{vh(Y,t.modelValue)||(e(Si,Y),e(Qo,Y))}),foe(()=>o.value=[]),dr(()=>!up(t.modelValue)&&G()),{ns:i,menuList:o,menus:p,checkedNodes:v,handleKeyDown:q,handleCheckChange:P,getFlattedNodes:D,getCheckedNodes:V,clearCheckedNodes:H,calculateCheckedValue:Q,scrollToExpandingNode:te}}});function NUe(t,e,n,r,i,s){const a=ui("el-cascader-menu");return ve(),Ue("div",{class:xe([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:e[0]||(e[0]=(...l)=>t.handleKeyDown&&t.handleKeyDown(...l))},[(ve(!0),Ue(_r,null,cs(t.menus,(l,o)=>(ve(),qt(a,{key:o,ref_for:!0,ref:d=>t.menuList[o]=d,index:o,nodes:[...l]},null,8,["index","nodes"]))),128))],34)}var oF=Fn(OUe,[["render",NUe],["__file","index.vue"]]);oF.install=t=>{t.component(oF.name,oF)};const Cue=oF,kUe=Cue,y2=Ln({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:dm},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),DUe={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},UUe=Ge({name:"ElTag"}),zUe=Ge({...UUe,props:y2,emits:DUe,setup(t,{emit:e}){const n=t,r=Gl(),i=_n("tag"),s=oe(()=>{const{type:o,hit:d,effect:p,closable:A,round:v}=n;return[i.b(),i.is("closable",A),i.m(o||"primary"),i.m(r.value),i.m(p),i.is("hit",d),i.is("round",v)]}),a=o=>{e("close",o)},l=o=>{e("click",o)};return(o,d)=>o.disableTransitions?(ve(),Ue("span",{key:0,class:xe(T(s)),style:vr({backgroundColor:o.color}),onClick:l},[rt("span",{class:xe(T(i).e("content"))},[kt(o.$slots,"default")],2),o.closable?(ve(),qt(T(mr),{key:0,class:xe(T(i).e("close")),onClick:qr(a,["stop"])},{default:It(()=>[pt(T(NA))]),_:1},8,["class","onClick"])):wt("v-if",!0)],6)):(ve(),qt(fc,{key:1,name:`${T(i).namespace.value}-zoom-in-center`,appear:""},{default:It(()=>[rt("span",{class:xe(T(s)),style:vr({backgroundColor:o.color}),onClick:l},[rt("span",{class:xe(T(i).e("content"))},[kt(o.$slots,"default")],2),o.closable?(ve(),qt(T(mr),{key:0,class:xe(T(i).e("close")),onClick:qr(a,["stop"])},{default:It(()=>[pt(T(NA))]),_:1},8,["class","onClick"])):wt("v-if",!0)],6)]),_:3},8,["name"]))}});var $Ue=Fn(zUe,[["__file","tag.vue"]]);const jI=_i($Ue),VUe=Ln({...xue,size:Nc,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Mt(Function),default:(t,e)=>t.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Mt(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:qc.teleported,tagType:{...y2.type,default:"info"},validateEvent:{type:Boolean,default:!0},...IE}),HUe={[Si]:t=>!0,[Qo]:t=>!0,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>Sl(t),expandChange:t=>!!t,removeTag:t=>!!t},GUe={key:0},QUe=["placeholder","onKeydown"],jUe=["onClick"],KUe="ElCascader",WUe=Ge({name:KUe}),qUe=Ge({...WUe,props:VUe,emits:HUe,setup(t,{expose:e,emit:n}){const r=t,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Xe})=>{const{modifiersData:_t,placement:Gt}=Xe;["right","left","bottom","top"].includes(Gt)||(_t.arrow.x=35)},requires:["arrow"]}]},s=Ra();let a=0,l=0;const o=_n("cascader"),d=_n("input"),{t:p}=Ts(),{form:A,formItem:v}=bh(),{valueOnClear:y}=A2(r),C=Me(null),x=Me(null),M=Me(null),I=Me(null),P=Me(null),F=Me(!1),D=Me(!1),V=Me(!1),H=Me(!1),Q=Me(""),G=Me(""),W=Me([]),te=Me([]),q=Me([]),Y=Me(!1),ee=oe(()=>s.style),ce=oe(()=>r.disabled||(A==null?void 0:A.disabled)),se=oe(()=>r.placeholder||p("el.cascader.placeholder")),le=oe(()=>G.value||W.value.length>0||Y.value?"":se.value),ie=Gl(),pe=oe(()=>["small"].includes(ie.value)?"small":"default"),ue=oe(()=>!!r.props.multiple),me=oe(()=>!r.filterable||ue.value),Le=oe(()=>ue.value?G.value:Q.value),ae=oe(()=>{var Xe;return((Xe=I.value)==null?void 0:Xe.checkedNodes)||[]}),be=oe(()=>!r.clearable||ce.value||V.value||!D.value?!1:!!ae.value.length),_e=oe(()=>{const{showAllLevels:Xe,separator:_t}=r,Gt=ae.value;return Gt.length?ue.value?"":Gt[0].calcText(Xe,_t):""}),$e=oe(()=>(v==null?void 0:v.validateState)||""),Re=oe({get(){return aO(r.modelValue)},set(Xe){const _t=Xe||y.value;n(Si,_t),n(Qo,_t),r.validateEvent&&(v==null||v.validate("change").catch(Gt=>void 0))}}),Ie=oe(()=>[o.b(),o.m(ie.value),o.is("disabled",ce.value),s.class]),Ne=oe(()=>[d.e("icon"),"icon-arrow-down",o.is("reverse",F.value)]),Je=oe(()=>o.is("focus",F.value||H.value)),je=oe(()=>{var Xe,_t;return(_t=(Xe=C.value)==null?void 0:Xe.popperRef)==null?void 0:_t.contentRef}),ft=Xe=>{var _t,Gt,gt;ce.value||(Xe=Xe??!F.value,Xe!==F.value&&(F.value=Xe,(Gt=(_t=x.value)==null?void 0:_t.input)==null||Gt.setAttribute("aria-expanded",`${Xe}`),Xe?(Et(),Tr((gt=I.value)==null?void 0:gt.scrollToExpandingNode)):r.filterable&&Ft(),n("visibleChange",Xe)))},Et=()=>{Tr(()=>{var Xe;(Xe=C.value)==null||Xe.updatePopper()})},ke=()=>{V.value=!1},Ye=Xe=>{const{showAllLevels:_t,separator:Gt}=r;return{node:Xe,key:Xe.uid,text:Xe.calcText(_t,Gt),hitState:!1,closable:!ce.value&&!Xe.isDisabled,isCollapseTag:!1}},at=Xe=>{var _t;const Gt=Xe.node;Gt.doCheck(!1),(_t=I.value)==null||_t.calculateCheckedValue(),n("removeTag",Gt.valueByOption)},He=()=>{if(!ue.value)return;const Xe=ae.value,_t=[],Gt=[];if(Xe.forEach(gt=>Gt.push(Ye(gt))),te.value=Gt,Xe.length){Xe.slice(0,r.maxCollapseTags).forEach(rr=>_t.push(Ye(rr)));const gt=Xe.slice(r.maxCollapseTags),hn=gt.length;hn&&(r.collapseTags?_t.push({key:-1,text:`+ ${hn}`,closable:!1,isCollapseTag:!0}):gt.forEach(rr=>_t.push(Ye(rr))))}W.value=_t},Tt=()=>{var Xe,_t;const{filterMethod:Gt,showAllLevels:gt,separator:hn}=r,rr=(_t=(Xe=I.value)==null?void 0:Xe.getFlattedNodes(!r.props.checkStrictly))==null?void 0:_t.filter(br=>br.isDisabled?!1:(br.calcText(gt,hn),Gt(br,Le.value)));ue.value&&(W.value.forEach(br=>{br.hitState=!1}),te.value.forEach(br=>{br.hitState=!1})),V.value=!0,q.value=rr,Et()},Ut=()=>{var Xe;let _t;V.value&&P.value?_t=P.value.$el.querySelector(`.${o.e("suggestion-item")}`):_t=(Xe=I.value)==null?void 0:Xe.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`),_t&&(_t.focus(),!V.value&&_t.click())},Rt=()=>{var Xe,_t;const Gt=(Xe=x.value)==null?void 0:Xe.input,gt=M.value,hn=(_t=P.value)==null?void 0:_t.$el;if(!(!As||!Gt)){if(hn){const rr=hn.querySelector(`.${o.e("suggestion-list")}`);rr.style.minWidth=`${Gt.offsetWidth}px`}if(gt){const{offsetHeight:rr}=gt,br=W.value.length>0?`${Math.max(rr+6,a)}px`:`${a}px`;Gt.style.height=br,Et()}}},Bt=Xe=>{var _t;return(_t=I.value)==null?void 0:_t.getCheckedNodes(Xe)},Ht=Xe=>{Et(),n("expandChange",Xe)},xt=Xe=>{var _t;const Gt=(_t=Xe.target)==null?void 0:_t.value;if(Xe.type==="compositionend")Y.value=!1,Tr(()=>St(Gt));else{const gt=Gt[Gt.length-1]||"";Y.value=!OV(gt)}},Zt=Xe=>{if(!Y.value)switch(Xe.code){case Fr.enter:ft();break;case Fr.down:ft(!0),Tr(Ut),Xe.preventDefault();break;case Fr.esc:F.value===!0&&(Xe.preventDefault(),Xe.stopPropagation(),ft(!1));break;case Fr.tab:ft(!1);break}},un=()=>{var Xe;(Xe=I.value)==null||Xe.clearCheckedNodes(),!F.value&&r.filterable&&Ft(),ft(!1)},Ft=()=>{const{value:Xe}=_e;Q.value=Xe,G.value=Xe},mt=Xe=>{var _t,Gt;const{checked:gt}=Xe;ue.value?(_t=I.value)==null||_t.handleCheckChange(Xe,!gt,!1):(!gt&&((Gt=I.value)==null||Gt.handleCheckChange(Xe,!0,!1)),ft(!1))},Be=Xe=>{const _t=Xe.target,{code:Gt}=Xe;switch(Gt){case Fr.up:case Fr.down:{const gt=Gt===Fr.up?-1:1;ZP(Oae(_t,gt,`.${o.e("suggestion-item")}[tabindex="-1"]`));break}case Fr.enter:_t.click();break}},ze=()=>{const Xe=W.value,_t=Xe[Xe.length-1];l=G.value?0:l+1,!(!_t||!l||r.collapseTags&&Xe.length>1)&&(_t.hitState?at(_t):_t.hitState=!0)},it=Xe=>{const _t=Xe.target,Gt=o.e("search-input");_t.className===Gt&&(H.value=!0),n("focus",Xe)},bt=Xe=>{H.value=!1,n("blur",Xe)},Qe=Rd(()=>{const{value:Xe}=Le;if(!Xe)return;const _t=r.beforeFilter(Xe);bI(_t)?_t.then(Tt).catch(()=>{}):_t!==!1?Tt():ke()},r.debounce),St=(Xe,_t)=>{!F.value&&ft(!0),!(_t!=null&&_t.isComposing)&&(Xe?Qe():ke())},yt=Xe=>Number.parseFloat(nIe(d.cssVarName("input-height"),Xe).value)-2;return zt(V,Et),zt([ae,ce],He),zt(W,()=>{Tr(()=>Rt())}),zt(ie,async()=>{await Tr();const Xe=x.value.input;a=yt(Xe)||a,Rt()}),zt(_e,Ft,{immediate:!0}),dr(()=>{const Xe=x.value.input,_t=yt(Xe);a=Xe.offsetHeight||_t,Ia(Xe,Rt)}),e({getCheckedNodes:Bt,cascaderPanelRef:I,togglePopperVisible:ft,contentRef:je}),(Xe,_t)=>(ve(),qt(T(_h),{ref_key:"tooltipRef",ref:C,visible:F.value,teleported:Xe.teleported,"popper-class":[T(o).e("dropdown"),Xe.popperClass],"popper-options":i,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${T(o).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:ke},{default:It(()=>[ci((ve(),Ue("div",{class:xe(T(Ie)),style:vr(T(ee)),onClick:_t[5]||(_t[5]=()=>ft(T(me)?void 0:!0)),onKeydown:Zt,onMouseenter:_t[6]||(_t[6]=Gt=>D.value=!0),onMouseleave:_t[7]||(_t[7]=Gt=>D.value=!1)},[pt(T(mh),{ref_key:"input",ref:x,modelValue:Q.value,"onUpdate:modelValue":_t[1]||(_t[1]=Gt=>Q.value=Gt),placeholder:T(le),readonly:T(me),disabled:T(ce),"validate-event":!1,size:T(ie),class:xe(T(Je)),tabindex:T(ue)&&Xe.filterable&&!T(ce)?-1:void 0,onCompositionstart:xt,onCompositionupdate:xt,onCompositionend:xt,onFocus:it,onBlur:bt,onInput:St},{suffix:It(()=>[T(be)?(ve(),qt(T(mr),{key:"clear",class:xe([T(d).e("icon"),"icon-circle-close"]),onClick:qr(un,["stop"])},{default:It(()=>[pt(T(x_))]),_:1},8,["class","onClick"])):(ve(),qt(T(mr),{key:"arrow-down",class:xe(T(Ne)),onClick:_t[0]||(_t[0]=qr(Gt=>ft(),["stop"]))},{default:It(()=>[pt(T(u0))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),T(ue)?(ve(),Ue("div",{key:0,ref_key:"tagWrapper",ref:M,class:xe([T(o).e("tags"),T(o).is("validate",!!T($e))])},[(ve(!0),Ue(_r,null,cs(W.value,Gt=>(ve(),qt(T(jI),{key:Gt.key,type:Xe.tagType,size:T(pe),hit:Gt.hitState,closable:Gt.closable,"disable-transitions":"",onClose:gt=>at(Gt)},{default:It(()=>[Gt.isCollapseTag===!1?(ve(),Ue("span",GUe,Nn(Gt.text),1)):(ve(),qt(T(_h),{key:1,disabled:F.value||!Xe.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:It(()=>[rt("span",null,Nn(Gt.text),1)]),content:It(()=>[rt("div",{class:xe(T(o).e("collapse-tags"))},[(ve(!0),Ue(_r,null,cs(te.value.slice(Xe.maxCollapseTags),(gt,hn)=>(ve(),Ue("div",{key:hn,class:xe(T(o).e("collapse-tag"))},[(ve(),qt(T(jI),{key:gt.key,class:"in-tooltip",type:Xe.tagType,size:T(pe),hit:gt.hitState,closable:gt.closable,"disable-transitions":"",onClose:rr=>at(gt)},{default:It(()=>[rt("span",null,Nn(gt.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),Xe.filterable&&!T(ce)?ci((ve(),Ue("input",{key:0,"onUpdate:modelValue":_t[2]||(_t[2]=Gt=>G.value=Gt),type:"text",class:xe(T(o).e("search-input")),placeholder:T(_e)?"":T(se),onInput:_t[3]||(_t[3]=Gt=>St(G.value,Gt)),onClick:_t[4]||(_t[4]=qr(Gt=>ft(!0),["stop"])),onKeydown:bo(ze,["delete"]),onCompositionstart:xt,onCompositionupdate:xt,onCompositionend:xt,onFocus:it,onBlur:bt},null,42,QUe)),[[j$,G.value]]):wt("v-if",!0)],2)):wt("v-if",!0)],38)),[[T(Yv),()=>ft(!1),T(je)]])]),content:It(()=>[ci(pt(T(Cue),{ref_key:"cascaderPanelRef",ref:I,modelValue:T(Re),"onUpdate:modelValue":_t[8]||(_t[8]=Gt=>Go(Re)?Re.value=Gt:null),options:Xe.options,props:r.props,border:!1,"render-label":Xe.$slots.default,onExpandChange:Ht,onClose:_t[9]||(_t[9]=Gt=>Xe.$nextTick(()=>ft(!1)))},null,8,["modelValue","options","props","render-label"]),[[Hs,!V.value]]),Xe.filterable?ci((ve(),qt(T(d0),{key:0,ref_key:"suggestionPanel",ref:P,tag:"ul",class:xe(T(o).e("suggestion-panel")),"view-class":T(o).e("suggestion-list"),onKeydown:Be},{default:It(()=>[q.value.length?(ve(!0),Ue(_r,{key:0},cs(q.value,Gt=>(ve(),Ue("li",{key:Gt.uid,class:xe([T(o).e("suggestion-item"),T(o).is("checked",Gt.checked)]),tabindex:-1,onClick:gt=>mt(Gt)},[rt("span",null,Nn(Gt.text),1),Gt.checked?(ve(),qt(T(mr),{key:0},{default:It(()=>[pt(T(GB))]),_:1})):wt("v-if",!0)],10,jUe))),128)):kt(Xe.$slots,"empty",{key:1},()=>[rt("li",{class:xe(T(o).e("empty-text"))},Nn(T(p)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Hs,V.value]]):wt("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var aF=Fn(qUe,[["__file","cascader.vue"]]);aF.install=t=>{t.component(aF.name,aF)};const YUe=aF,XUe=YUe,ZUe=Ln({checked:{type:Boolean,default:!1},type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),JUe={"update:checked":t=>Sl(t),[Qo]:t=>Sl(t)},e3e=Ge({name:"ElCheckTag"}),t3e=Ge({...e3e,props:ZUe,emits:JUe,setup(t,{emit:e}){const n=t,r=_n("check-tag"),i=oe(()=>[r.b(),r.is("checked",n.checked),r.m(n.type||"primary")]),s=()=>{const a=!n.checked;e(Qo,a),e("update:checked",a)};return(a,l)=>(ve(),Ue("span",{class:xe(T(i)),onClick:s},[kt(a.$slots,"default")],2))}});var n3e=Fn(t3e,[["__file","check-tag.vue"]]);const r3e=_i(n3e),Eue=Symbol("rowContextKey"),i3e=["start","center","end","space-around","space-between","space-evenly"],s3e=["top","middle","bottom"],o3e=Ln({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:i3e,default:"start"},align:{type:String,values:s3e}}),a3e=Ge({name:"ElRow"}),l3e=Ge({...a3e,props:o3e,setup(t){const e=t,n=_n("row"),r=oe(()=>e.gutter);Rr(Eue,{gutter:r});const i=oe(()=>{const a={};return e.gutter&&(a.marginRight=a.marginLeft=`-${e.gutter/2}px`),a}),s=oe(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,!!e.align)]);return(a,l)=>(ve(),qt(Mi(a.tag),{class:xe(T(s)),style:vr(T(i))},{default:It(()=>[kt(a.$slots,"default")]),_:3},8,["class","style"]))}});var c3e=Fn(l3e,[["__file","row.vue"]]);const u3e=_i(c3e),h3e=Ln({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Mt([Number,Object]),default:()=>Ba({})},sm:{type:Mt([Number,Object]),default:()=>Ba({})},md:{type:Mt([Number,Object]),default:()=>Ba({})},lg:{type:Mt([Number,Object]),default:()=>Ba({})},xl:{type:Mt([Number,Object]),default:()=>Ba({})}}),d3e=Ge({name:"ElCol"}),f3e=Ge({...d3e,props:h3e,setup(t){const e=t,{gutter:n}=mn(Eue,{gutter:oe(()=>0)}),r=_n("col"),i=oe(()=>{const a={};return n.value&&(a.paddingLeft=a.paddingRight=`${n.value/2}px`),a}),s=oe(()=>{const a=[];return["span","offset","pull","push"].forEach(d=>{const p=e[d];Hr(p)&&(d==="span"?a.push(r.b(`${e[d]}`)):p>0&&a.push(r.b(`${d}-${e[d]}`)))}),["xs","sm","md","lg","xl"].forEach(d=>{Hr(e[d])?a.push(r.b(`${d}-${e[d]}`)):xi(e[d])&&Object.entries(e[d]).forEach(([p,A])=>{a.push(p!=="span"?r.b(`${d}-${p}-${A}`):r.b(`${d}-${A}`))})}),n.value&&a.push(r.is("guttered")),[r.b(),a]});return(a,l)=>(ve(),qt(Mi(a.tag),{class:xe(T(s)),style:vr(T(i))},{default:It(()=>[kt(a.$slots,"default")]),_:3},8,["class","style"]))}});var p3e=Fn(f3e,[["__file","col.vue"]]);const A3e=_i(p3e),zZ=t=>Hr(t)||Xr(t)||Jn(t),g3e=Ln({accordion:Boolean,modelValue:{type:Mt([Array,String,Number]),default:()=>Ba([])}}),m3e={[Si]:zZ,[Qo]:zZ},Sue=Symbol("collapseContextKey"),v3e=(t,e)=>{const n=Me(t_(t.modelValue)),r=s=>{n.value=s;const a=t.accordion?n.value[0]:n.value;e(Si,a),e(Qo,a)},i=s=>{if(t.accordion)r([n.value[0]===s?"":s]);else{const a=[...n.value],l=a.indexOf(s);l>-1?a.splice(l,1):a.push(s),r(a)}};return zt(()=>t.modelValue,()=>n.value=t_(t.modelValue),{deep:!0}),Rr(Sue,{activeNames:n,handleItemClick:i}),{activeNames:n,setActiveNames:r}},y3e=()=>{const t=_n("collapse");return{rootKls:oe(()=>t.b())}},_3e=Ge({name:"ElCollapse"}),b3e=Ge({..._3e,props:g3e,emits:m3e,setup(t,{expose:e,emit:n}){const r=t,{activeNames:i,setActiveNames:s}=v3e(r,n),{rootKls:a}=y3e();return e({activeNames:i,setActiveNames:s}),(l,o)=>(ve(),Ue("div",{class:xe(T(a))},[kt(l.$slots,"default")],2))}});var w3e=Fn(b3e,[["__file","collapse.vue"]]);const x3e=Ge({name:"ElCollapseTransition"}),C3e=Ge({...x3e,setup(t){const e=_n("collapse-transition"),n=i=>{i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom},r={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.height&&(i.dataset.elExistsHeight=i.style.height),i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){requestAnimationFrame(()=>{i.dataset.oldOverflow=i.style.overflow,i.dataset.elExistsHeight?i.style.maxHeight=i.dataset.elExistsHeight:i.scrollHeight!==0?i.style.maxHeight=`${i.scrollHeight}px`:i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom,i.style.overflow="hidden"})},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},enterCancelled(i){n(i)},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){n(i)},leaveCancelled(i){n(i)}};return(i,s)=>(ve(),qt(fc,Gi({name:T(e).b()},yxe(r)),{default:It(()=>[kt(i.$slots,"default")]),_:3},16,["name"]))}});var lF=Fn(C3e,[["__file","collapse-transition.vue"]]);lF.install=t=>{t.component(lF.name,lF)};const _2=lF,E3e=_2,S3e=Ln({title:{type:String,default:""},name:{type:Mt([String,Number]),default:void 0},disabled:Boolean}),T3e=t=>{const e=mn(Sue),{namespace:n}=_n("collapse"),r=Me(!1),i=Me(!1),s=WV(),a=oe(()=>s.current++),l=oe(()=>{var v;return(v=t.name)!=null?v:`${n.value}-id-${s.prefix}-${T(a)}`}),o=oe(()=>e==null?void 0:e.activeNames.value.includes(T(l)));return{focusing:r,id:a,isActive:o,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:r.value=!0},50)},handleHeaderClick:()=>{t.disabled||(e==null||e.handleItemClick(T(l)),r.value=!1,i.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(T(l))}}},I3e=(t,{focusing:e,isActive:n,id:r})=>{const i=_n("collapse"),s=oe(()=>[i.b("item"),i.is("active",T(n)),i.is("disabled",t.disabled)]),a=oe(()=>[i.be("item","header"),i.is("active",T(n)),{focusing:T(e)&&!t.disabled}]),l=oe(()=>[i.be("item","arrow"),i.is("active",T(n))]),o=oe(()=>i.be("item","wrap")),d=oe(()=>i.be("item","content")),p=oe(()=>i.b(`content-${T(r)}`)),A=oe(()=>i.b(`head-${T(r)}`));return{arrowKls:l,headKls:a,rootKls:s,itemWrapperKls:o,itemContentKls:d,scopedContentId:p,scopedHeadId:A}},B3e=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],M3e=["id","aria-hidden","aria-labelledby"],L3e=Ge({name:"ElCollapseItem"}),R3e=Ge({...L3e,props:S3e,setup(t,{expose:e}){const n=t,{focusing:r,id:i,isActive:s,handleFocus:a,handleHeaderClick:l,handleEnterClick:o}=T3e(n),{arrowKls:d,headKls:p,rootKls:A,itemWrapperKls:v,itemContentKls:y,scopedContentId:C,scopedHeadId:x}=I3e(n,{focusing:r,isActive:s,id:i});return e({isActive:s}),(M,I)=>(ve(),Ue("div",{class:xe(T(A))},[rt("button",{id:T(x),class:xe(T(p)),"aria-expanded":T(s),"aria-controls":T(C),"aria-describedby":T(C),tabindex:M.disabled?-1:0,type:"button",onClick:I[0]||(I[0]=(...P)=>T(l)&&T(l)(...P)),onKeydown:I[1]||(I[1]=bo(qr((...P)=>T(o)&&T(o)(...P),["stop","prevent"]),["space","enter"])),onFocus:I[2]||(I[2]=(...P)=>T(a)&&T(a)(...P)),onBlur:I[3]||(I[3]=P=>r.value=!1)},[kt(M.$slots,"title",{},()=>[gs(Nn(M.title),1)]),pt(T(mr),{class:xe(T(d))},{default:It(()=>[pt(T(Uh))]),_:1},8,["class"])],42,B3e),pt(T(_2),null,{default:It(()=>[ci(rt("div",{id:T(C),role:"region",class:xe(T(v)),"aria-hidden":!T(s),"aria-labelledby":T(x)},[rt("div",{class:xe(T(y))},[kt(M.$slots,"default")],2)],10,M3e),[[Hs,T(s)]])]),_:3})],2))}});var Tue=Fn(R3e,[["__file","collapse-item.vue"]]);const P3e=_i(w3e,{CollapseItem:Tue}),F3e=Pa(Tue),O3e=Ln({color:{type:Mt(Object),required:!0},vertical:{type:Boolean,default:!1}});let XD=!1;function KI(t,e){if(!As)return;const n=function(s){var a;(a=e.drag)==null||a.call(e,s)},r=function(s){var a;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,XD=!1,(a=e.end)==null||a.call(e,s)},i=function(s){var a;XD||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),XD=!0,(a=e.start)==null||a.call(e,s))};t.addEventListener("mousedown",i),t.addEventListener("touchstart",i)}const N3e=t=>{const e=mi(),n=Ds(),r=Ds();function i(a){a.target!==n.value&&s(a)}function s(a){if(!r.value||!n.value)return;const o=e.vnode.el.getBoundingClientRect(),{clientX:d,clientY:p}=uV(a);if(t.vertical){let A=p-o.top;A=Math.max(n.value.offsetHeight/2,A),A=Math.min(A,o.height-n.value.offsetHeight/2),t.color.set("alpha",Math.round((A-n.value.offsetHeight/2)/(o.height-n.value.offsetHeight)*100))}else{let A=d-o.left;A=Math.max(n.value.offsetWidth/2,A),A=Math.min(A,o.width-n.value.offsetWidth/2),t.color.set("alpha",Math.round((A-n.value.offsetWidth/2)/(o.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:r,handleDrag:s,handleClick:i}},k3e=(t,{bar:e,thumb:n,handleDrag:r})=>{const i=mi(),s=_n("color-alpha-slider"),a=Me(0),l=Me(0),o=Me();function d(){if(!n.value||t.vertical)return 0;const P=i.vnode.el,F=t.color.get("alpha");return P?Math.round(F*(P.offsetWidth-n.value.offsetWidth/2)/100):0}function p(){if(!n.value)return 0;const P=i.vnode.el;if(!t.vertical)return 0;const F=t.color.get("alpha");return P?Math.round(F*(P.offsetHeight-n.value.offsetHeight/2)/100):0}function A(){if(t.color&&t.color.value){const{r:P,g:F,b:D}=t.color.toRgb();return`linear-gradient(to right, rgba(${P}, ${F}, ${D}, 0) 0%, rgba(${P}, ${F}, ${D}, 1) 100%)`}return""}function v(){a.value=d(),l.value=p(),o.value=A()}dr(()=>{if(!e.value||!n.value)return;const P={drag:F=>{r(F)},end:F=>{r(F)}};KI(e.value,P),KI(n.value,P),v()}),zt(()=>t.color.get("alpha"),()=>v()),zt(()=>t.color.value,()=>v());const y=oe(()=>[s.b(),s.is("vertical",t.vertical)]),C=oe(()=>s.e("bar")),x=oe(()=>s.e("thumb")),M=oe(()=>({background:o.value})),I=oe(()=>({left:Ja(a.value),top:Ja(l.value)}));return{rootKls:y,barKls:C,barStyle:M,thumbKls:x,thumbStyle:I,update:v}},D3e="ElColorAlphaSlider",U3e=Ge({name:D3e}),z3e=Ge({...U3e,props:O3e,setup(t,{expose:e}){const n=t,{bar:r,thumb:i,handleDrag:s,handleClick:a}=N3e(n),{rootKls:l,barKls:o,barStyle:d,thumbKls:p,thumbStyle:A,update:v}=k3e(n,{bar:r,thumb:i,handleDrag:s});return e({update:v,bar:r,thumb:i}),(y,C)=>(ve(),Ue("div",{class:xe(T(l))},[rt("div",{ref_key:"bar",ref:r,class:xe(T(o)),style:vr(T(d)),onClick:C[0]||(C[0]=(...x)=>T(a)&&T(a)(...x))},null,6),rt("div",{ref_key:"thumb",ref:i,class:xe(T(p)),style:vr(T(A))},null,6)],2))}});var $3e=Fn(z3e,[["__file","alpha-slider.vue"]]);const V3e=Ge({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=_n("color-hue-slider"),n=mi(),r=Me(),i=Me(),s=Me(0),a=Me(0),l=oe(()=>t.color.get("hue"));zt(()=>l.value,()=>{v()});function o(y){y.target!==r.value&&d(y)}function d(y){if(!i.value||!r.value)return;const x=n.vnode.el.getBoundingClientRect(),{clientX:M,clientY:I}=uV(y);let P;if(t.vertical){let F=I-x.top;F=Math.min(F,x.height-r.value.offsetHeight/2),F=Math.max(r.value.offsetHeight/2,F),P=Math.round((F-r.value.offsetHeight/2)/(x.height-r.value.offsetHeight)*360)}else{let F=M-x.left;F=Math.min(F,x.width-r.value.offsetWidth/2),F=Math.max(r.value.offsetWidth/2,F),P=Math.round((F-r.value.offsetWidth/2)/(x.width-r.value.offsetWidth)*360)}t.color.set("hue",P)}function p(){if(!r.value)return 0;const y=n.vnode.el;if(t.vertical)return 0;const C=t.color.get("hue");return y?Math.round(C*(y.offsetWidth-r.value.offsetWidth/2)/360):0}function A(){if(!r.value)return 0;const y=n.vnode.el;if(!t.vertical)return 0;const C=t.color.get("hue");return y?Math.round(C*(y.offsetHeight-r.value.offsetHeight/2)/360):0}function v(){s.value=p(),a.value=A()}return dr(()=>{if(!i.value||!r.value)return;const y={drag:C=>{d(C)},end:C=>{d(C)}};KI(i.value,y),KI(r.value,y),v()}),{bar:i,thumb:r,thumbLeft:s,thumbTop:a,hueValue:l,handleClick:o,update:v,ns:e}}});function H3e(t,e,n,r,i,s){return ve(),Ue("div",{class:xe([t.ns.b(),t.ns.is("vertical",t.vertical)])},[rt("div",{ref:"bar",class:xe(t.ns.e("bar")),onClick:e[0]||(e[0]=(...a)=>t.handleClick&&t.handleClick(...a))},null,2),rt("div",{ref:"thumb",class:xe(t.ns.e("thumb")),style:vr({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var G3e=Fn(V3e,[["render",H3e],["__file","hue-slider.vue"]]);const Q3e=Ln({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Nc,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:qc.teleported,predefine:{type:Mt(Array)},validateEvent:{type:Boolean,default:!0},...Eu(["ariaLabel"])}),j3e={[Si]:t=>Xr(t)||eu(t),[Qo]:t=>Xr(t)||eu(t),activeChange:t=>Xr(t)||eu(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},Iue=Symbol("colorPickerContextKey"),$Z=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},K3e=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},W3e=function(t){return typeof t=="string"&&t.includes("%")},hC=function(t,e){K3e(t)&&(t="100%");const n=W3e(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),n&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},VZ={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},cF=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return`${VZ[e]||e}${VZ[n]||n}`},HZ=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":`#${cF(t)}${cF(e)}${cF(n)}`},ZD={A:10,B:11,C:12,D:13,E:14,F:15},v1=function(t){return t.length===2?(ZD[t[0].toUpperCase()]||+t[0])*16+(ZD[t[1].toUpperCase()]||+t[1]):ZD[t[1].toUpperCase()]||+t[1]},q3e=function(t,e,n){e=e/100,n=n/100;let r=e;const i=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,r*=i<=1?i:2-i;const s=(n+e)/2,a=n===0?2*r/(i+r):2*e/(n+e);return{h:t,s:a*100,v:s*100}},GZ=(t,e,n)=>{t=hC(t,255),e=hC(e,255),n=hC(n,255);const r=Math.max(t,e,n),i=Math.min(t,e,n);let s;const a=r,l=r-i,o=r===0?0:l/r;if(r===i)s=0;else{switch(r){case t:{s=(e-n)/l+(e<n?6:0);break}case e:{s=(n-t)/l+2;break}case n:{s=(t-e)/l+4;break}}s/=6}return{h:s*360,s:o*100,v:a*100}},DS=function(t,e,n){t=hC(t,360)*6,e=hC(e,100),n=hC(n,100);const r=Math.floor(t),i=t-r,s=n*(1-e),a=n*(1-i*e),l=n*(1-(1-i)*e),o=r%6,d=[n,a,s,s,l,n][o],p=[l,n,n,a,s,s][o],A=[s,s,l,n,n,a][o];return{r:Math.round(d*255),g:Math.round(p*255),b:Math.round(A*255)}};class qT{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)vs(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const r in e)vs(e,r)&&this.set(r,e[r]);return}this[`_${e}`]=n,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return DS(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(r,i,s)=>{this._hue=Math.max(0,Math.min(360,r)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(e.includes("hsl")){const r=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,s)=>s>2?Number.parseFloat(i):Number.parseInt(i,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:i,s,v:a}=q3e(r[0],r[1],r[2]);n(i,s,a)}}else if(e.includes("hsv")){const r=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,s)=>s>2?Number.parseFloat(i):Number.parseInt(i,10));r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3&&n(r[0],r[1],r[2])}else if(e.includes("rgb")){const r=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,s)=>s>2?Number.parseFloat(i):Number.parseInt(i,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:i,s,v:a}=GZ(r[0],r[1],r[2]);n(i,s,a)}}else if(e.includes("#")){const r=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(r))return;let i,s,a;r.length===3?(i=v1(r[0]+r[0]),s=v1(r[1]+r[1]),a=v1(r[2]+r[2])):(r.length===6||r.length===8)&&(i=v1(r.slice(0,2)),s=v1(r.slice(2,4)),a=v1(r.slice(4,6))),r.length===8?this._alpha=v1(r.slice(6))/255*100:(r.length===3||r.length===6)&&(this._alpha=100);const{h:l,s:o,v:d}=GZ(i,s,a);n(l,o,d)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:r,_alpha:i,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const a=$Z(e,n/100,r/100);this.value=`hsla(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(n)}%, ${Math.round(r)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${HZ(DS(e,n,r))}${cF(i*255/100)}`;break}default:{const{r:a,g:l,b:o}=DS(e,n,r);this.value=`rgba(${a}, ${l}, ${o}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const a=$Z(e,n/100,r/100);this.value=`hsl(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(n)}%, ${Math.round(r)}%)`;break}case"rgb":{const{r:a,g:l,b:o}=DS(e,n,r);this.value=`rgb(${a}, ${l}, ${o})`;break}default:this.value=HZ(DS(e,n,r))}}}const Y3e=Ge({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(t){const e=_n("color-predefine"),{currentColor:n}=mn(Iue),r=Me(s(t.colors,t.color));zt(()=>n.value,a=>{const l=new qT;l.fromString(a),r.value.forEach(o=>{o.selected=l.compare(o)})}),bu(()=>{r.value=s(t.colors,t.color)});function i(a){t.color.fromString(t.colors[a])}function s(a,l){return a.map(o=>{const d=new qT;return d.enableAlpha=!0,d.format="rgba",d.fromString(o),d.selected=d.value===l.value,d})}return{rgbaColors:r,handleSelect:i,ns:e}}}),X3e=["onClick"];function Z3e(t,e,n,r,i,s){return ve(),Ue("div",{class:xe(t.ns.b())},[rt("div",{class:xe(t.ns.e("colors"))},[(ve(!0),Ue(_r,null,cs(t.rgbaColors,(a,l)=>(ve(),Ue("div",{key:t.colors[l],class:xe([t.ns.e("color-selector"),t.ns.is("alpha",a._alpha<100),{selected:a.selected}]),onClick:o=>t.handleSelect(l)},[rt("div",{style:vr({backgroundColor:a.value})},null,4)],10,X3e))),128))],2)],2)}var J3e=Fn(Y3e,[["render",Z3e],["__file","predefine.vue"]]);const e8e=Ge({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=_n("color-svpanel"),n=mi(),r=Me(0),i=Me(0),s=Me("hsl(0, 100%, 50%)"),a=oe(()=>{const d=t.color.get("hue"),p=t.color.get("value");return{hue:d,value:p}});function l(){const d=t.color.get("saturation"),p=t.color.get("value"),A=n.vnode.el,{clientWidth:v,clientHeight:y}=A;i.value=d*v/100,r.value=(100-p)*y/100,s.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function o(d){const A=n.vnode.el.getBoundingClientRect(),{clientX:v,clientY:y}=uV(d);let C=v-A.left,x=y-A.top;C=Math.max(0,C),C=Math.min(C,A.width),x=Math.max(0,x),x=Math.min(x,A.height),i.value=C,r.value=x,t.color.set({saturation:C/A.width*100,value:100-x/A.height*100})}return zt(()=>a.value,()=>{l()}),dr(()=>{KI(n.vnode.el,{drag:d=>{o(d)},end:d=>{o(d)}}),l()}),{cursorTop:r,cursorLeft:i,background:s,colorValue:a,handleDrag:o,update:l,ns:e}}}),t8e=rt("div",null,null,-1),n8e=[t8e];function r8e(t,e,n,r,i,s){return ve(),Ue("div",{class:xe(t.ns.b()),style:vr({backgroundColor:t.background})},[rt("div",{class:xe(t.ns.e("white"))},null,2),rt("div",{class:xe(t.ns.e("black"))},null,2),rt("div",{class:xe(t.ns.e("cursor")),style:vr({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},n8e,6)],6)}var i8e=Fn(e8e,[["render",r8e],["__file","sv-panel.vue"]]);const s8e=["onKeydown"],o8e=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],a8e=Ge({name:"ElColorPicker"}),l8e=Ge({...a8e,props:Q3e,emits:j3e,setup(t,{expose:e,emit:n}){const r=t,{t:i}=Ts(),s=_n("color"),{formItem:a}=bh(),l=Gl(),o=jh(),{inputId:d,isLabeledByFormItem:p}=jA(r,{formItemContext:a}),A=Me(),v=Me(),y=Me(),C=Me(),x=Me(),M=Me(),{isFocused:I,handleFocus:P,handleBlur:F}=p2(x,{beforeBlur(je){var ft;return(ft=C.value)==null?void 0:ft.isFocusInsideContent(je)},afterBlur(){le(!1),me()}}),D=je=>{if(o.value)return Je();P(je)};let V=!0;const H=Xs(new qT({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),Q=Me(!1),G=Me(!1),W=Me(""),te=oe(()=>!r.modelValue&&!G.value?"transparent":se(H,r.showAlpha)),q=oe(()=>!r.modelValue&&!G.value?"":H.value),Y=oe(()=>p.value?void 0:r.label||r.ariaLabel||i("el.colorpicker.defaultLabel"));Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},oe(()=>!!r.label));const ee=oe(()=>p.value?a==null?void 0:a.labelId:void 0),ce=oe(()=>[s.b("picker"),s.is("disabled",o.value),s.bm("picker",l.value),s.is("focused",I.value)]);function se(je,ft){if(!(je instanceof qT))throw new TypeError("color should be instance of _color Class");const{r:Et,g:ke,b:Ye}=je.toRgb();return ft?`rgba(${Et}, ${ke}, ${Ye}, ${je.get("alpha")/100})`:`rgb(${Et}, ${ke}, ${Ye})`}function le(je){Q.value=je}const ie=Rd(le,100,{leading:!0});function pe(){o.value||le(!0)}function ue(){ie(!1),me()}function me(){Tr(()=>{r.modelValue?H.fromString(r.modelValue):(H.value="",Tr(()=>{G.value=!1}))})}function Le(){o.value||ie(!Q.value)}function ae(){H.fromString(W.value)}function be(){const je=H.value;n(Si,je),n("change",je),r.validateEvent&&(a==null||a.validate("change").catch(ft=>void 0)),ie(!1),Tr(()=>{const ft=new qT({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});H.compare(ft)||me()})}function _e(){ie(!1),n(Si,null),n("change",null),r.modelValue!==null&&r.validateEvent&&(a==null||a.validate("change").catch(je=>void 0)),me()}function $e(je){if(Q.value&&(ue(),I.value)){const ft=new FocusEvent("focus",je);F(ft)}}function Re(je){je.preventDefault(),je.stopPropagation(),le(!1),me()}function Ie(je){switch(je.code){case Fr.enter:case Fr.space:je.preventDefault(),je.stopPropagation(),pe(),M.value.focus();break;case Fr.esc:Re(je);break}}function Ne(){x.value.focus()}function Je(){x.value.blur()}return dr(()=>{r.modelValue&&(W.value=q.value)}),zt(()=>r.modelValue,je=>{je?je&&je!==H.value&&(V=!1,H.fromString(je)):G.value=!1}),zt(()=>q.value,je=>{W.value=je,V&&n("activeChange",je),V=!0}),zt(()=>H.value,()=>{!r.modelValue&&!G.value&&(G.value=!0)}),zt(()=>Q.value,()=>{Tr(()=>{var je,ft,Et;(je=A.value)==null||je.update(),(ft=v.value)==null||ft.update(),(Et=y.value)==null||Et.update()})}),Rr(Iue,{currentColor:q}),e({color:H,show:pe,hide:ue,focus:Ne,blur:Je}),(je,ft)=>(ve(),qt(T(_h),{ref_key:"popper",ref:C,visible:Q.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[T(s).be("picker","panel"),T(s).b("dropdown"),je.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:je.teleported,transition:`${T(s).namespace.value}-zoom-in-top`,persistent:"",onHide:ft[2]||(ft[2]=Et=>le(!1))},{content:It(()=>[ci((ve(),Ue("div",{onKeydown:bo(Re,["esc"])},[rt("div",{class:xe(T(s).be("dropdown","main-wrapper"))},[pt(G3e,{ref_key:"hue",ref:A,class:"hue-slider",color:T(H),vertical:""},null,8,["color"]),pt(i8e,{ref_key:"sv",ref:v,color:T(H)},null,8,["color"])],2),je.showAlpha?(ve(),qt($3e,{key:0,ref_key:"alpha",ref:y,color:T(H)},null,8,["color"])):wt("v-if",!0),je.predefine?(ve(),qt(J3e,{key:1,ref:"predefine",color:T(H),colors:je.predefine},null,8,["color","colors"])):wt("v-if",!0),rt("div",{class:xe(T(s).be("dropdown","btns"))},[rt("span",{class:xe(T(s).be("dropdown","value"))},[pt(T(mh),{ref_key:"inputRef",ref:M,modelValue:W.value,"onUpdate:modelValue":ft[0]||(ft[0]=Et=>W.value=Et),"validate-event":!1,size:"small",onKeyup:bo(ae,["enter"]),onBlur:ae},null,8,["modelValue","onKeyup"])],2),pt(T(tu),{class:xe(T(s).be("dropdown","link-btn")),text:"",size:"small",onClick:_e},{default:It(()=>[gs(Nn(T(i)("el.colorpicker.clear")),1)]),_:1},8,["class"]),pt(T(tu),{plain:"",size:"small",class:xe(T(s).be("dropdown","btn")),onClick:be},{default:It(()=>[gs(Nn(T(i)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,s8e)),[[T(Yv),$e]])]),default:It(()=>[rt("div",{id:T(d),ref_key:"triggerRef",ref:x,class:xe(T(ce)),role:"button","aria-label":T(Y),"aria-labelledby":T(ee),"aria-description":T(i)("el.colorpicker.description",{color:je.modelValue||""}),"aria-disabled":T(o),tabindex:T(o)?-1:je.tabindex,onKeydown:Ie,onFocus:D,onBlur:ft[1]||(ft[1]=(...Et)=>T(F)&&T(F)(...Et))},[T(o)?(ve(),Ue("div",{key:0,class:xe(T(s).be("picker","mask"))},null,2)):wt("v-if",!0),rt("div",{class:xe(T(s).be("picker","trigger")),onClick:Le},[rt("span",{class:xe([T(s).be("picker","color"),T(s).is("alpha",je.showAlpha)])},[rt("span",{class:xe(T(s).be("picker","color-inner")),style:vr({backgroundColor:T(te)})},[ci(pt(T(mr),{class:xe([T(s).be("picker","icon"),T(s).is("icon-arrow-down")])},{default:It(()=>[pt(T(u0))]),_:1},8,["class"]),[[Hs,je.modelValue||G.value]]),ci(pt(T(mr),{class:xe([T(s).be("picker","empty"),T(s).is("icon-close")])},{default:It(()=>[pt(T(NA))]),_:1},8,["class"]),[[Hs,!je.modelValue&&!G.value]])],6)],2)],2)],42,o8e)]),_:1},8,["visible","popper-class","teleported","transition"]))}});var c8e=Fn(l8e,[["__file","color-picker.vue"]]);const u8e=_i(c8e),h8e=Ge({name:"ElContainer"}),d8e=Ge({...h8e,props:{direction:{type:String}},setup(t){const e=t,n=Uc(),r=_n("container"),i=oe(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:n&&n.default?n.default().some(a=>{const l=a.type.name;return l==="ElHeader"||l==="ElFooter"}):!1);return(s,a)=>(ve(),Ue("section",{class:xe([T(r).b(),T(r).is("vertical",T(i))])},[kt(s.$slots,"default")],2))}});var f8e=Fn(d8e,[["__file","container.vue"]]);const p8e=Ge({name:"ElAside"}),A8e=Ge({...p8e,props:{width:{type:String,default:null}},setup(t){const e=t,n=_n("aside"),r=oe(()=>e.width?n.cssVarBlock({width:e.width}):{});return(i,s)=>(ve(),Ue("aside",{class:xe(T(n).b()),style:vr(T(r))},[kt(i.$slots,"default")],6))}});var Bue=Fn(A8e,[["__file","aside.vue"]]);const g8e=Ge({name:"ElFooter"}),m8e=Ge({...g8e,props:{height:{type:String,default:null}},setup(t){const e=t,n=_n("footer"),r=oe(()=>e.height?n.cssVarBlock({height:e.height}):{});return(i,s)=>(ve(),Ue("footer",{class:xe(T(n).b()),style:vr(T(r))},[kt(i.$slots,"default")],6))}});var Mue=Fn(m8e,[["__file","footer.vue"]]);const v8e=Ge({name:"ElHeader"}),y8e=Ge({...v8e,props:{height:{type:String,default:null}},setup(t){const e=t,n=_n("header"),r=oe(()=>e.height?n.cssVarBlock({height:e.height}):{});return(i,s)=>(ve(),Ue("header",{class:xe(T(n).b()),style:vr(T(r))},[kt(i.$slots,"default")],6))}});var Lue=Fn(y8e,[["__file","header.vue"]]);const _8e=Ge({name:"ElMain"}),b8e=Ge({..._8e,setup(t){const e=_n("main");return(n,r)=>(ve(),Ue("main",{class:xe(T(e).b())},[kt(n.$slots,"default")],2))}});var Rue=Fn(b8e,[["__file","main.vue"]]);const w8e=_i(f8e,{Aside:Bue,Footer:Mue,Header:Lue,Main:Rue}),x8e=Pa(Bue),C8e=Pa(Mue),E8e=Pa(Lue),S8e=Pa(Rue);var Pue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){return function(n,r){var i=r.prototype,s=i.format;i.format=function(a){var l=this,o=this.$locale();if(!this.isValid())return s.bind(this)(a);var d=this.$utils(),p=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(A){switch(A){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return o.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return o.ordinal(l.week(),"W");case"w":case"ww":return d.s(l.week(),A==="w"?1:2,"0");case"W":case"WW":return d.s(l.isoWeek(),A==="W"?1:2,"0");case"k":case"kk":return d.s(String(l.$H===0?24:l.$H),A==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return A}});return s.bind(this)(p)}}})})(Pue);var T8e=Pue.exports;const I8e=kf(T8e);var Fue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){var n="week",r="year";return function(i,s,a){var l=s.prototype;l.week=function(o){if(o===void 0&&(o=null),o!==null)return this.add(7*(o-this.week()),"day");var d=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var p=a(this).startOf(r).add(1,r).date(d),A=a(this).endOf(n);if(p.isBefore(A))return 1}var v=a(this).startOf(r).date(d).startOf(n).subtract(1,"millisecond"),y=this.diff(v,n,!0);return y<0?a(this).startOf("week").week():Math.ceil(y)},l.weeks=function(o){return o===void 0&&(o=null),this.week(o)}}})})(Fue);var B8e=Fue.exports;const M8e=kf(B8e);var Oue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){return function(n,r){r.prototype.weekYear=function(){var i=this.month(),s=this.week(),a=this.year();return s===1&&i===11?a+1:i===0&&s>=52?a-1:a}}})})(Oue);var L8e=Oue.exports;const R8e=kf(L8e);var Nue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){return function(n,r,i){r.prototype.dayOfYear=function(s){var a=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return s==null?a:this.add(s-a,"day")}}})})(Nue);var P8e=Nue.exports;const F8e=kf(P8e);var kue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){return function(n,r){r.prototype.isSameOrAfter=function(i,s){return this.isSame(i,s)||this.isAfter(i,s)}}})})(kue);var O8e=kue.exports;const N8e=kf(O8e);var Due={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hm,function(){return function(n,r){r.prototype.isSameOrBefore=function(i,s){return this.isSame(i,s)||this.isBefore(i,s)}}})})(Due);var k8e=Due.exports;const D8e=kf(k8e),dH=Symbol(),U8e=Ln({...uH,type:{type:Mt(String),default:"date"}}),z8e=["date","dates","year","years","month","week","range"],fH=Ln({disabledDate:{type:Mt(Function)},date:{type:Mt(Object),required:!0},minDate:{type:Mt(Object)},maxDate:{type:Mt(Object)},parsedValue:{type:Mt([Object,Array])},rangeState:{type:Mt(Object),default:()=>({endDate:null,selecting:!1})}}),Uue=Ln({type:{type:Mt(String),required:!0,values:aOe},dateFormat:String,timeFormat:String}),zue=Ln({unlinkPanels:Boolean,parsedValue:{type:Mt(Array)}}),pH=t=>({type:String,values:z8e,default:t}),$8e=Ln({...Uue,parsedValue:{type:Mt([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),V8e=Ln({...fH,cellClassName:{type:Mt(Function)},showWeekNumber:Boolean,selectionMode:pH("date")}),H8e=["changerange","pick","select"],U3=t=>{if(!Jn(t))return!1;const[e,n]=t;return wi.isDayjs(e)&&wi.isDayjs(n)&&e.isSameOrBefore(n)},$ue=(t,{lang:e,unit:n,unlinkPanels:r})=>{let i;if(Jn(t)){let[s,a]=t.map(l=>wi(l).locale(e));return r||(a=s.add(1,n)),[s,a]}else t?i=wi(t):i=wi();return i=i.locale(e),[i,i.add(1,n)]},G8e=(t,e,{columnIndexOffset:n,startDate:r,nextEndDate:i,now:s,unit:a,relativeDateGetter:l,setCellMetadata:o,setRowMetadata:d})=>{for(let p=0;p<t.row;p++){const A=e[p];for(let v=0;v<t.column;v++){let y=A[v+n];y||(y={row:p,column:v,type:"normal",inRange:!1,start:!1,end:!1});const C=p*t.column+v,x=l(C);y.dayjs=x,y.date=x.toDate(),y.timestamp=x.valueOf(),y.type="normal",y.inRange=!!(r&&x.isSameOrAfter(r,a)&&i&&x.isSameOrBefore(i,a))||!!(r&&x.isSameOrBefore(r,a)&&i&&x.isSameOrAfter(i,a)),r!=null&&r.isSameOrAfter(i)?(y.start=!!i&&x.isSame(i,a),y.end=r&&x.isSame(r,a)):(y.start=!!r&&x.isSame(r,a),y.end=!!i&&x.isSame(i,a)),x.isSame(s,a)&&(y.type="today"),o==null||o(y,{rowIndex:p,columnIndex:v}),A[v+n]=y}d==null||d(A)}},z3=(t="")=>["normal","today"].includes(t),Q8e=(t,e)=>{const{lang:n}=Ts(),r=Me(),i=Me(),s=Me(),a=Me(),l=Me([[],[],[],[],[],[]]);let o=!1;const d=t.date.$locale().weekStart||7,p=t.date.locale("en").localeData().weekdaysShort().map(ue=>ue.toLowerCase()),A=oe(()=>d>3?7-d:-d),v=oe(()=>{const ue=t.date.startOf("month");return ue.subtract(ue.day()||7,"day")}),y=oe(()=>p.concat(p).slice(d,d+7)),C=oe(()=>tle(T(D)).some(ue=>ue.isCurrent)),x=oe(()=>{const ue=t.date.startOf("month"),me=ue.day()||7,Le=ue.daysInMonth(),ae=ue.subtract(1,"month").daysInMonth();return{startOfMonthDay:me,dateCountOfMonth:Le,dateCountOfLastMonth:ae}}),M=oe(()=>t.selectionMode==="dates"?Sf(t.parsedValue):[]),I=(ue,{count:me,rowIndex:Le,columnIndex:ae})=>{const{startOfMonthDay:be,dateCountOfMonth:_e,dateCountOfLastMonth:$e}=T(x),Re=T(A);if(Le>=0&&Le<=1){const Ie=be+Re<0?7+be+Re:be+Re;if(ae+Le*7>=Ie)return ue.text=me,!0;ue.text=$e-(Ie-ae%7)+1+Le*7,ue.type="prev-month"}else return me<=_e?ue.text=me:(ue.text=me-_e,ue.type="next-month"),!0;return!1},P=(ue,{columnIndex:me,rowIndex:Le},ae)=>{const{disabledDate:be,cellClassName:_e}=t,$e=T(M),Re=I(ue,{count:ae,rowIndex:Le,columnIndex:me}),Ie=ue.dayjs.toDate();return ue.selected=$e.find(Ne=>Ne.isSame(ue.dayjs,"day")),ue.isSelected=!!ue.selected,ue.isCurrent=H(ue),ue.disabled=be==null?void 0:be(Ie),ue.customClass=_e==null?void 0:_e(Ie),Re},F=ue=>{if(t.selectionMode==="week"){const[me,Le]=t.showWeekNumber?[1,7]:[0,6],ae=pe(ue[me+1]);ue[me].inRange=ae,ue[me].start=ae,ue[Le].inRange=ae,ue[Le].end=ae}},D=oe(()=>{const{minDate:ue,maxDate:me,rangeState:Le,showWeekNumber:ae}=t,be=T(A),_e=T(l),$e="day";let Re=1;if(ae)for(let Ie=0;Ie<6;Ie++)_e[Ie][0]||(_e[Ie][0]={type:"week",text:T(v).add(Ie*7+1,$e).week()});return G8e({row:6,column:7},_e,{startDate:ue,columnIndexOffset:ae?1:0,nextEndDate:Le.endDate||me||Le.selecting&&ue||null,now:wi().locale(T(n)).startOf($e),unit:$e,relativeDateGetter:Ie=>T(v).add(Ie-be,$e),setCellMetadata:(...Ie)=>{P(...Ie,Re)&&(Re+=1)},setRowMetadata:F}),_e});zt(()=>t.date,async()=>{var ue;(ue=T(r))!=null&&ue.contains(document.activeElement)&&(await Tr(),await V())});const V=async()=>{var ue;return(ue=T(i))==null?void 0:ue.focus()},H=ue=>t.selectionMode==="date"&&z3(ue.type)&&Q(ue,t.parsedValue),Q=(ue,me)=>me?wi(me).locale(T(n)).isSame(t.date.date(Number(ue.text)),"day"):!1,G=(ue,me)=>{const Le=ue*7+(me-(t.showWeekNumber?1:0))-T(A);return T(v).add(Le,"day")},W=ue=>{var me;if(!t.rangeState.selecting)return;let Le=ue.target;if(Le.tagName==="SPAN"&&(Le=(me=Le.parentNode)==null?void 0:me.parentNode),Le.tagName==="DIV"&&(Le=Le.parentNode),Le.tagName!=="TD")return;const ae=Le.parentNode.rowIndex-1,be=Le.cellIndex;T(D)[ae][be].disabled||(ae!==T(s)||be!==T(a))&&(s.value=ae,a.value=be,e("changerange",{selecting:!0,endDate:G(ae,be)}))},te=ue=>!T(C)&&(ue==null?void 0:ue.text)===1&&ue.type==="normal"||ue.isCurrent,q=ue=>{o||T(C)||t.selectionMode!=="date"||ie(ue,!0)},Y=ue=>{ue.target.closest("td")&&(o=!0)},ee=ue=>{ue.target.closest("td")&&(o=!1)},ce=ue=>{!t.rangeState.selecting||!t.minDate?(e("pick",{minDate:ue,maxDate:null}),e("select",!0)):(ue>=t.minDate?e("pick",{minDate:t.minDate,maxDate:ue}):e("pick",{minDate:ue,maxDate:t.minDate}),e("select",!1))},se=ue=>{const me=ue.week(),Le=`${ue.year()}w${me}`;e("pick",{year:ue.year(),week:me,value:Le,date:ue.startOf("week")})},le=(ue,me)=>{const Le=me?Sf(t.parsedValue).filter(ae=>(ae==null?void 0:ae.valueOf())!==ue.valueOf()):Sf(t.parsedValue).concat([ue]);e("pick",Le)},ie=(ue,me=!1)=>{const Le=ue.target.closest("td");if(!Le)return;const ae=Le.parentNode.rowIndex-1,be=Le.cellIndex,_e=T(D)[ae][be];if(_e.disabled||_e.type==="week")return;const $e=G(ae,be);switch(t.selectionMode){case"range":{ce($e);break}case"date":{e("pick",$e,me);break}case"week":{se($e);break}case"dates":{le($e,!!_e.selected);break}}},pe=ue=>{if(t.selectionMode!=="week")return!1;let me=t.date.startOf("day");if(ue.type==="prev-month"&&(me=me.subtract(1,"month")),ue.type==="next-month"&&(me=me.add(1,"month")),me=me.date(Number.parseInt(ue.text,10)),t.parsedValue&&!Array.isArray(t.parsedValue)){const Le=(t.parsedValue.day()-d+7)%7-1;return t.parsedValue.subtract(Le,"day").isSame(me,"day")}return!1};return{WEEKS:y,rows:D,tbodyRef:r,currentCellRef:i,focus:V,isCurrent:H,isWeekActive:pe,isSelectedCell:te,handlePickDate:ie,handleMouseUp:ee,handleMouseDown:Y,handleMouseMove:W,handleFocus:q}},j8e=(t,{isCurrent:e,isWeekActive:n})=>{const r=_n("date-table"),{t:i}=Ts(),s=oe(()=>[r.b(),{"is-week-mode":t.selectionMode==="week"}]),a=oe(()=>i("el.datepicker.dateTablePrompt")),l=oe(()=>i("el.datepicker.week"));return{tableKls:s,tableLabel:a,weekLabel:l,getCellClasses:p=>{const A=[];return z3(p.type)&&!p.disabled?(A.push("available"),p.type==="today"&&A.push("today")):A.push(p.type),e(p)&&A.push("current"),p.inRange&&(z3(p.type)||t.selectionMode==="week")&&(A.push("in-range"),p.start&&A.push("start-date"),p.end&&A.push("end-date")),p.disabled&&A.push("disabled"),p.selected&&A.push("selected"),p.customClass&&A.push(p.customClass),A.join(" ")},getRowKls:p=>[r.e("row"),{current:n(p)}],t:i}},K8e=Ln({cell:{type:Mt(Object)}});var W8e=Ge({name:"ElDatePickerCell",props:K8e,setup(t){const e=_n("date-table-cell"),{slots:n}=mn(dH);return()=>{const{cell:r}=t;return kt(n,"default",{...r},()=>[pt("div",{class:e.b()},[pt("span",{class:e.e("text")},[r==null?void 0:r.text])])])}}});const q8e=["aria-label"],Y8e={key:0,scope:"col"},X8e=["aria-label"],Z8e=["aria-current","aria-selected","tabindex"],J8e=Ge({__name:"basic-date-table",props:V8e,emits:H8e,setup(t,{expose:e,emit:n}){const r=t,{WEEKS:i,rows:s,tbodyRef:a,currentCellRef:l,focus:o,isCurrent:d,isWeekActive:p,isSelectedCell:A,handlePickDate:v,handleMouseUp:y,handleMouseDown:C,handleMouseMove:x,handleFocus:M}=Q8e(r,n),{tableLabel:I,tableKls:P,weekLabel:F,getCellClasses:D,getRowKls:V,t:H}=j8e(r,{isCurrent:d,isWeekActive:p});return e({focus:o}),(Q,G)=>(ve(),Ue("table",{"aria-label":T(I),class:xe(T(P)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:G[1]||(G[1]=(...W)=>T(v)&&T(v)(...W)),onMousemove:G[2]||(G[2]=(...W)=>T(x)&&T(x)(...W)),onMousedown:G[3]||(G[3]=qr((...W)=>T(C)&&T(C)(...W),["prevent"])),onMouseup:G[4]||(G[4]=(...W)=>T(y)&&T(y)(...W))},[rt("tbody",{ref_key:"tbodyRef",ref:a},[rt("tr",null,[Q.showWeekNumber?(ve(),Ue("th",Y8e,Nn(T(F)),1)):wt("v-if",!0),(ve(!0),Ue(_r,null,cs(T(i),(W,te)=>(ve(),Ue("th",{key:te,"aria-label":T(H)("el.datepicker.weeksFull."+W),scope:"col"},Nn(T(H)("el.datepicker.weeks."+W)),9,X8e))),128))]),(ve(!0),Ue(_r,null,cs(T(s),(W,te)=>(ve(),Ue("tr",{key:te,class:xe(T(V)(W[1]))},[(ve(!0),Ue(_r,null,cs(W,(q,Y)=>(ve(),Ue("td",{key:`${te}.${Y}`,ref_for:!0,ref:ee=>T(A)(q)&&(l.value=ee),class:xe(T(D)(q)),"aria-current":q.isCurrent?"date":void 0,"aria-selected":q.isCurrent,tabindex:T(A)(q)?0:-1,onFocus:G[0]||(G[0]=(...ee)=>T(M)&&T(M)(...ee))},[pt(T(W8e),{cell:q},null,8,["cell"])],42,Z8e))),128))],2))),128))],512)],42,q8e))}});var $3=Fn(J8e,[["__file","basic-date-table.vue"]]);const eze=Ln({...fH,selectionMode:pH("month")}),tze=["aria-label"],nze=["aria-selected","aria-label","tabindex","onKeydown"],rze={class:"cell"},ize=Ge({__name:"basic-month-table",props:eze,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const r=t,i=(D,V,H)=>{const Q=wi().locale(H).startOf("month").month(V).year(D),G=Q.daysInMonth();return Gy(G).map(W=>Q.add(W,"day").toDate())},s=_n("month-table"),{t:a,lang:l}=Ts(),o=Me(),d=Me(),p=Me(r.date.locale("en").localeData().monthsShort().map(D=>D.toLowerCase())),A=Me([[],[],[]]),v=Me(),y=Me(),C=oe(()=>{var D,V;const H=A.value,Q=wi().locale(l.value).startOf("month");for(let G=0;G<3;G++){const W=H[G];for(let te=0;te<4;te++){const q=W[te]||(W[te]={row:G,column:te,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});q.type="normal";const Y=G*4+te,ee=r.date.startOf("year").month(Y),ce=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;q.inRange=!!(r.minDate&&ee.isSameOrAfter(r.minDate,"month")&&ce&&ee.isSameOrBefore(ce,"month"))||!!(r.minDate&&ee.isSameOrBefore(r.minDate,"month")&&ce&&ee.isSameOrAfter(ce,"month")),(D=r.minDate)!=null&&D.isSameOrAfter(ce)?(q.start=!!(ce&&ee.isSame(ce,"month")),q.end=r.minDate&&ee.isSame(r.minDate,"month")):(q.start=!!(r.minDate&&ee.isSame(r.minDate,"month")),q.end=!!(ce&&ee.isSame(ce,"month"))),Q.isSame(ee)&&(q.type="today"),q.text=Y,q.disabled=((V=r.disabledDate)==null?void 0:V.call(r,ee.toDate()))||!1}}return H}),x=()=>{var D;(D=d.value)==null||D.focus()},M=D=>{const V={},H=r.date.year(),Q=new Date,G=D.text;return V.disabled=r.disabledDate?i(H,G,l.value).every(r.disabledDate):!1,V.current=Sf(r.parsedValue).findIndex(W=>wi.isDayjs(W)&&W.year()===H&&W.month()===G)>=0,V.today=Q.getFullYear()===H&&Q.getMonth()===G,D.inRange&&(V["in-range"]=!0,D.start&&(V["start-date"]=!0),D.end&&(V["end-date"]=!0)),V},I=D=>{const V=r.date.year(),H=D.text;return Sf(r.date).findIndex(Q=>Q.year()===V&&Q.month()===H)>=0},P=D=>{var V;if(!r.rangeState.selecting)return;let H=D.target;if(H.tagName==="SPAN"&&(H=(V=H.parentNode)==null?void 0:V.parentNode),H.tagName==="DIV"&&(H=H.parentNode),H.tagName!=="TD")return;const Q=H.parentNode.rowIndex,G=H.cellIndex;C.value[Q][G].disabled||(Q!==v.value||G!==y.value)&&(v.value=Q,y.value=G,n("changerange",{selecting:!0,endDate:r.date.startOf("year").month(Q*4+G)}))},F=D=>{var V;const H=(V=D.target)==null?void 0:V.closest("td");if((H==null?void 0:H.tagName)!=="TD"||bp(H,"disabled"))return;const Q=H.cellIndex,W=H.parentNode.rowIndex*4+Q,te=r.date.startOf("year").month(W);r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&te>=r.minDate?n("pick",{minDate:r.minDate,maxDate:te}):n("pick",{minDate:te,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:te,maxDate:null}),n("select",!0)):n("pick",W)};return zt(()=>r.date,async()=>{var D,V;(D=o.value)!=null&&D.contains(document.activeElement)&&(await Tr(),(V=d.value)==null||V.focus())}),e({focus:x}),(D,V)=>(ve(),Ue("table",{role:"grid","aria-label":T(a)("el.datepicker.monthTablePrompt"),class:xe(T(s).b()),onClick:F,onMousemove:P},[rt("tbody",{ref_key:"tbodyRef",ref:o},[(ve(!0),Ue(_r,null,cs(T(C),(H,Q)=>(ve(),Ue("tr",{key:Q},[(ve(!0),Ue(_r,null,cs(H,(G,W)=>(ve(),Ue("td",{key:W,ref_for:!0,ref:te=>I(G)&&(d.value=te),class:xe(M(G)),"aria-selected":`${I(G)}`,"aria-label":T(a)(`el.datepicker.month${+G.text+1}`),tabindex:I(G)?0:-1,onKeydown:[bo(qr(F,["prevent","stop"]),["space"]),bo(qr(F,["prevent","stop"]),["enter"])]},[rt("div",null,[rt("span",rze,Nn(T(a)("el.datepicker.months."+p.value[G.text])),1)])],42,nze))),128))]))),128))],512)],42,tze))}});var V3=Fn(ize,[["__file","basic-month-table.vue"]]);const{date:sze,disabledDate:oze,parsedValue:aze}=fH,lze=Ln({date:sze,disabledDate:oze,parsedValue:aze,selectionMode:pH("year")}),cze=["aria-label"],uze=["aria-selected","tabindex","onKeydown"],hze={class:"cell"},dze={key:1},fze=Ge({__name:"basic-year-table",props:lze,emits:["pick"],setup(t,{expose:e,emit:n}){const r=t,i=(x,M)=>{const I=wi(String(x)).locale(M).startOf("year"),F=I.endOf("year").dayOfYear();return Gy(F).map(D=>I.add(D,"day").toDate())},s=_n("year-table"),{t:a,lang:l}=Ts(),o=Me(),d=Me(),p=oe(()=>Math.floor(r.date.year()/10)*10),A=()=>{var x;(x=d.value)==null||x.focus()},v=x=>{const M={},I=wi().locale(l.value);return M.disabled=r.disabledDate?i(x,l.value).every(r.disabledDate):!1,M.current=Sf(r.parsedValue).findIndex(P=>P.year()===x)>=0,M.today=I.year()===x,M},y=x=>x===p.value&&r.date.year()<p.value&&r.date.year()>p.value+9||Sf(r.date).findIndex(M=>M.year()===x)>=0||Sf(r.parsedValue).findIndex(M=>(M==null?void 0:M.year())===x)>=0,C=x=>{const I=x.target.closest("td");if(I&&I.textContent){if(bp(I,"disabled"))return;const P=I.textContent||I.innerText;if(r.selectionMode==="years"){if(x.type==="keydown"){n("pick",Sf(r.parsedValue),!1);return}const F=bp(I,"current")?Sf(r.parsedValue).filter(D=>(D==null?void 0:D.year())!==Number(P)):Sf(r.parsedValue).concat([wi(P)]);n("pick",F)}else n("pick",Number(P))}};return zt(()=>r.date,async()=>{var x,M;(x=o.value)!=null&&x.contains(document.activeElement)&&(await Tr(),(M=d.value)==null||M.focus())}),e({focus:A}),(x,M)=>(ve(),Ue("table",{role:"grid","aria-label":T(a)("el.datepicker.yearTablePrompt"),class:xe(T(s).b()),onClick:C},[rt("tbody",{ref_key:"tbodyRef",ref:o},[(ve(),Ue(_r,null,cs(3,(I,P)=>rt("tr",{key:P},[(ve(),Ue(_r,null,cs(4,(F,D)=>(ve(),Ue(_r,{key:P+"_"+D},[P*4+D<10?(ve(),Ue("td",{key:0,ref_for:!0,ref:V=>y(T(p)+P*4+D)&&(d.value=V),class:xe(["available",v(T(p)+P*4+D)]),"aria-selected":`${y(T(p)+P*4+D)}`,tabindex:y(T(p)+P*4+D)?0:-1,onKeydown:[bo(qr(C,["prevent","stop"]),["space"]),bo(qr(C,["prevent","stop"]),["enter"])]},[rt("div",null,[rt("span",hze,Nn(T(p)+P*4+D),1)])],42,uze)):(ve(),Ue("td",dze))],64))),64))])),64))],512)],10,cze))}});var pze=Fn(fze,[["__file","basic-year-table.vue"]]);const Aze=["onClick"],gze=["aria-label"],mze=["aria-label"],vze=["aria-label"],yze=["aria-label"],_ze=Ge({__name:"panel-date-pick",props:$8e,emits:["pick","set-picker-option","panel-change"],setup(t,{emit:e}){const n=t,r=(Qe,St,yt)=>!0,i=_n("picker-panel"),s=_n("date-picker"),a=Ra(),l=Uc(),{t:o,lang:d}=Ts(),p=mn("EP_PICKER_BASE"),A=mn(v2),{shortcuts:v,disabledDate:y,cellClassName:C,defaultTime:x}=p.props,M=Io(p.props,"defaultValue"),I=Me(),P=Me(wi().locale(d.value)),F=Me(!1);let D=!1;const V=oe(()=>wi(x).locale(d.value)),H=oe(()=>P.value.month()),Q=oe(()=>P.value.year()),G=Me([]),W=Me(null),te=Me(null),q=Qe=>G.value.length>0?r(Qe,G.value,n.format||"HH:mm:ss"):!0,Y=Qe=>x&&!Ye.value&&!F.value&&!D?V.value.year(Qe.year()).month(Qe.month()).date(Qe.date()):Re.value?Qe.millisecond(0):Qe.startOf("day"),ee=(Qe,...St)=>{if(!Qe)e("pick",Qe,...St);else if(Jn(Qe)){const yt=Qe.map(Y);e("pick",yt,...St)}else e("pick",Y(Qe),...St);W.value=null,te.value=null,F.value=!1,D=!1},ce=async(Qe,St)=>{if(me.value==="date"){Qe=Qe;let yt=n.parsedValue?n.parsedValue.year(Qe.year()).month(Qe.month()).date(Qe.date()):Qe;q(yt)||(yt=G.value[0][0].year(Qe.year()).month(Qe.month()).date(Qe.date())),P.value=yt,ee(yt,Re.value||St),n.type==="datetime"&&(await Tr(),Be())}else me.value==="week"?ee(Qe.date):me.value==="dates"&&ee(Qe,!0)},se=Qe=>{const St=Qe?"add":"subtract";P.value=P.value[St](1,"month"),bt("month")},le=Qe=>{const St=P.value,yt=Qe?"add":"subtract";P.value=ie.value==="year"?St[yt](10,"year"):St[yt](1,"year"),bt("year")},ie=Me("date"),pe=oe(()=>{const Qe=o("el.datepicker.year");if(ie.value==="year"){const St=Math.floor(Q.value/10)*10;return Qe?`${St} ${Qe} - ${St+9} ${Qe}`:`${St} - ${St+9}`}return`${Q.value} ${Qe}`}),ue=Qe=>{const St=Gr(Qe.value)?Qe.value():Qe.value;if(St){D=!0,ee(wi(St).locale(d.value));return}Qe.onClick&&Qe.onClick({attrs:a,slots:l,emit:e})},me=oe(()=>{const{type:Qe}=n;return["week","month","year","years","dates"].includes(Qe)?Qe:"date"}),Le=oe(()=>me.value==="date"?ie.value:me.value),ae=oe(()=>!!v.length),be=async Qe=>{P.value=P.value.startOf("month").month(Qe),me.value==="month"?ee(P.value,!1):(ie.value="date",["month","year","date","week"].includes(me.value)&&(ee(P.value,!0),await Tr(),Be())),bt("month")},_e=async(Qe,St)=>{me.value==="year"?(P.value=P.value.startOf("year").year(Qe),ee(P.value,!1)):me.value==="years"?ee(Qe,St??!0):(P.value=P.value.year(Qe),ie.value="month",["month","year","date","week"].includes(me.value)&&(ee(P.value,!0),await Tr(),Be())),bt("year")},$e=async Qe=>{ie.value=Qe,await Tr(),Be()},Re=oe(()=>n.type==="datetime"||n.type==="datetimerange"),Ie=oe(()=>{const Qe=Re.value||me.value==="dates",St=me.value==="years",yt=ie.value==="date",Xe=ie.value==="year";return Qe&&yt||St&&Xe}),Ne=oe(()=>y?n.parsedValue?Jn(n.parsedValue)?y(n.parsedValue[0].toDate()):y(n.parsedValue.toDate()):!0:!1),Je=()=>{if(me.value==="dates"||me.value==="years")ee(n.parsedValue);else{let Qe=n.parsedValue;if(!Qe){const St=wi(x).locale(d.value),yt=mt();Qe=St.year(yt.year()).month(yt.month()).date(yt.date())}P.value=Qe,ee(Qe)}},je=oe(()=>y?y(wi().locale(d.value).toDate()):!1),ft=()=>{const St=wi().locale(d.value).toDate();F.value=!0,(!y||!y(St))&&q(St)&&(P.value=wi().locale(d.value),ee(P.value))},Et=oe(()=>n.timeFormat||Qce(n.format)),ke=oe(()=>n.dateFormat||Gce(n.format)),Ye=oe(()=>{if(te.value)return te.value;if(!(!n.parsedValue&&!M.value))return(n.parsedValue||P.value).format(Et.value)}),at=oe(()=>{if(W.value)return W.value;if(!(!n.parsedValue&&!M.value))return(n.parsedValue||P.value).format(ke.value)}),He=Me(!1),Tt=()=>{He.value=!0},Ut=()=>{He.value=!1},Rt=Qe=>({hour:Qe.hour(),minute:Qe.minute(),second:Qe.second(),year:Qe.year(),month:Qe.month(),date:Qe.date()}),Bt=(Qe,St,yt)=>{const{hour:Xe,minute:_t,second:Gt}=Rt(Qe),gt=n.parsedValue?n.parsedValue.hour(Xe).minute(_t).second(Gt):Qe;P.value=gt,ee(P.value,!0),yt||(He.value=St)},Ht=Qe=>{const St=wi(Qe,Et.value).locale(d.value);if(St.isValid()&&q(St)){const{year:yt,month:Xe,date:_t}=Rt(P.value);P.value=St.year(yt).month(Xe).date(_t),te.value=null,He.value=!1,ee(P.value,!0)}},xt=Qe=>{const St=wi(Qe,ke.value).locale(d.value);if(St.isValid()){if(y&&y(St.toDate()))return;const{hour:yt,minute:Xe,second:_t}=Rt(P.value);P.value=St.hour(yt).minute(Xe).second(_t),W.value=null,ee(P.value,!0)}},Zt=Qe=>wi.isDayjs(Qe)&&Qe.isValid()&&(y?!y(Qe.toDate()):!0),un=Qe=>Jn(Qe)?Qe.map(St=>St.format(n.format)):Qe.format(n.format),Ft=Qe=>wi(Qe,n.format).locale(d.value),mt=()=>{const Qe=wi(M.value).locale(d.value);if(!M.value){const St=V.value;return wi().hour(St.hour()).minute(St.minute()).second(St.second()).locale(d.value)}return Qe},Be=async()=>{var Qe;["week","month","year","date"].includes(me.value)&&((Qe=I.value)==null||Qe.focus(),me.value==="week"&&it(Fr.down))},ze=Qe=>{const{code:St}=Qe;[Fr.up,Fr.down,Fr.left,Fr.right,Fr.home,Fr.end,Fr.pageUp,Fr.pageDown].includes(St)&&(it(St),Qe.stopPropagation(),Qe.preventDefault()),[Fr.enter,Fr.space,Fr.numpadEnter].includes(St)&&W.value===null&&te.value===null&&(Qe.preventDefault(),ee(P.value,!1))},it=Qe=>{var St;const{up:yt,down:Xe,left:_t,right:Gt,home:gt,end:hn,pageUp:rr,pageDown:br}=Fr,Qr={year:{[yt]:-4,[Xe]:4,[_t]:-1,[Gt]:1,offset:(Kn,ur)=>Kn.setFullYear(Kn.getFullYear()+ur)},month:{[yt]:-4,[Xe]:4,[_t]:-1,[Gt]:1,offset:(Kn,ur)=>Kn.setMonth(Kn.getMonth()+ur)},week:{[yt]:-1,[Xe]:1,[_t]:-1,[Gt]:1,offset:(Kn,ur)=>Kn.setDate(Kn.getDate()+ur*7)},date:{[yt]:-7,[Xe]:7,[_t]:-1,[Gt]:1,[gt]:Kn=>-Kn.getDay(),[hn]:Kn=>-Kn.getDay()+6,[rr]:Kn=>-new Date(Kn.getFullYear(),Kn.getMonth(),0).getDate(),[br]:Kn=>new Date(Kn.getFullYear(),Kn.getMonth()+1,0).getDate(),offset:(Kn,ur)=>Kn.setDate(Kn.getDate()+ur)}},hr=P.value.toDate();for(;Math.abs(P.value.diff(hr,"year",!0))<1;){const Kn=Qr[Le.value];if(!Kn)return;if(Kn.offset(hr,Gr(Kn[Qe])?Kn[Qe](hr):(St=Kn[Qe])!=null?St:0),y&&y(hr))break;const ur=wi(hr).locale(d.value);P.value=ur,e("pick",ur,!0);break}},bt=Qe=>{e("panel-change",P.value.toDate(),Qe,ie.value)};return zt(()=>me.value,Qe=>{if(["month","year"].includes(Qe)){ie.value=Qe;return}else if(Qe==="years"){ie.value="year";return}ie.value="date"},{immediate:!0}),zt(()=>ie.value,()=>{A==null||A.updatePopper()}),zt(()=>M.value,Qe=>{Qe&&(P.value=mt())},{immediate:!0}),zt(()=>n.parsedValue,Qe=>{if(Qe){if(me.value==="dates"||me.value==="years"||Array.isArray(Qe))return;P.value=Qe}else P.value=mt()},{immediate:!0}),e("set-picker-option",["isValidValue",Zt]),e("set-picker-option",["formatToString",un]),e("set-picker-option",["parseUserInput",Ft]),e("set-picker-option",["handleFocusPicker",Be]),(Qe,St)=>(ve(),Ue("div",{class:xe([T(i).b(),T(s).b(),{"has-sidebar":Qe.$slots.sidebar||T(ae),"has-time":T(Re)}])},[rt("div",{class:xe(T(i).e("body-wrapper"))},[kt(Qe.$slots,"sidebar",{class:xe(T(i).e("sidebar"))}),T(ae)?(ve(),Ue("div",{key:0,class:xe(T(i).e("sidebar"))},[(ve(!0),Ue(_r,null,cs(T(v),(yt,Xe)=>(ve(),Ue("button",{key:Xe,type:"button",class:xe(T(i).e("shortcut")),onClick:_t=>ue(yt)},Nn(yt.text),11,Aze))),128))],2)):wt("v-if",!0),rt("div",{class:xe(T(i).e("body"))},[T(Re)?(ve(),Ue("div",{key:0,class:xe(T(s).e("time-header"))},[rt("span",{class:xe(T(s).e("editor-wrap"))},[pt(T(mh),{placeholder:T(o)("el.datepicker.selectDate"),"model-value":T(at),size:"small","validate-event":!1,onInput:St[0]||(St[0]=yt=>W.value=yt),onChange:xt},null,8,["placeholder","model-value"])],2),ci((ve(),Ue("span",{class:xe(T(s).e("editor-wrap"))},[pt(T(mh),{placeholder:T(o)("el.datepicker.selectTime"),"model-value":T(Ye),size:"small","validate-event":!1,onFocus:Tt,onInput:St[1]||(St[1]=yt=>te.value=yt),onChange:Ht},null,8,["placeholder","model-value"]),pt(T(AO),{visible:He.value,format:T(Et),"parsed-value":P.value,onPick:Bt},null,8,["visible","format","parsed-value"])],2)),[[T(Yv),Ut]])],2)):wt("v-if",!0),ci(rt("div",{class:xe([T(s).e("header"),(ie.value==="year"||ie.value==="month")&&T(s).e("header--bordered")])},[rt("span",{class:xe(T(s).e("prev-btn"))},[rt("button",{type:"button","aria-label":T(o)("el.datepicker.prevYear"),class:xe(["d-arrow-left",T(i).e("icon-btn")]),onClick:St[2]||(St[2]=yt=>le(!1))},[pt(T(mr),null,{default:It(()=>[pt(T(UC))]),_:1})],10,gze),ci(rt("button",{type:"button","aria-label":T(o)("el.datepicker.prevMonth"),class:xe([T(i).e("icon-btn"),"arrow-left"]),onClick:St[3]||(St[3]=yt=>se(!1))},[pt(T(mr),null,{default:It(()=>[pt(T(r_))]),_:1})],10,mze),[[Hs,ie.value==="date"]])],2),rt("span",{role:"button",class:xe(T(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:St[4]||(St[4]=bo(yt=>$e("year"),["enter"])),onClick:St[5]||(St[5]=yt=>$e("year"))},Nn(T(pe)),35),ci(rt("span",{role:"button","aria-live":"polite",tabindex:"0",class:xe([T(s).e("header-label"),{active:ie.value==="month"}]),onKeydown:St[6]||(St[6]=bo(yt=>$e("month"),["enter"])),onClick:St[7]||(St[7]=yt=>$e("month"))},Nn(T(o)(`el.datepicker.month${T(H)+1}`)),35),[[Hs,ie.value==="date"]]),rt("span",{class:xe(T(s).e("next-btn"))},[ci(rt("button",{type:"button","aria-label":T(o)("el.datepicker.nextMonth"),class:xe([T(i).e("icon-btn"),"arrow-right"]),onClick:St[8]||(St[8]=yt=>se(!0))},[pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})],10,vze),[[Hs,ie.value==="date"]]),rt("button",{type:"button","aria-label":T(o)("el.datepicker.nextYear"),class:xe([T(i).e("icon-btn"),"d-arrow-right"]),onClick:St[9]||(St[9]=yt=>le(!0))},[pt(T(mr),null,{default:It(()=>[pt(T(zC))]),_:1})],10,yze)],2)],2),[[Hs,ie.value!=="time"]]),rt("div",{class:xe(T(i).e("content")),onKeydown:ze},[ie.value==="date"?(ve(),qt($3,{key:0,ref_key:"currentViewRef",ref:I,"selection-mode":T(me),date:P.value,"parsed-value":Qe.parsedValue,"disabled-date":T(y),"cell-class-name":T(C),onPick:ce},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):wt("v-if",!0),ie.value==="year"?(ve(),qt(pze,{key:1,ref_key:"currentViewRef",ref:I,"selection-mode":T(me),date:P.value,"disabled-date":T(y),"parsed-value":Qe.parsedValue,onPick:_e},null,8,["selection-mode","date","disabled-date","parsed-value"])):wt("v-if",!0),ie.value==="month"?(ve(),qt(V3,{key:2,ref_key:"currentViewRef",ref:I,date:P.value,"parsed-value":Qe.parsedValue,"disabled-date":T(y),onPick:be},null,8,["date","parsed-value","disabled-date"])):wt("v-if",!0)],34)],2)],2),ci(rt("div",{class:xe(T(i).e("footer"))},[ci(pt(T(tu),{text:"",size:"small",class:xe(T(i).e("link-btn")),disabled:T(je),onClick:ft},{default:It(()=>[gs(Nn(T(o)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Hs,T(me)!=="dates"&&T(me)!=="years"]]),pt(T(tu),{plain:"",size:"small",class:xe(T(i).e("link-btn")),disabled:T(Ne),onClick:Je},{default:It(()=>[gs(Nn(T(o)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Hs,T(Ie)]])],2))}});var bze=Fn(_ze,[["__file","panel-date-pick.vue"]]);const wze=Ln({...Uue,...zue}),xze=t=>{const{emit:e}=mi(),n=Ra(),r=Uc();return s=>{const a=Gr(s.value)?s.value():s.value;if(a){e("pick",[wi(a[0]).locale(t.value),wi(a[1]).locale(t.value)]);return}s.onClick&&s.onClick({attrs:n,slots:r,emit:e})}},Vue=(t,{defaultValue:e,leftDate:n,rightDate:r,unit:i,onParsedValueChanged:s})=>{const{emit:a}=mi(),{pickerNs:l}=mn(dH),o=_n("date-range-picker"),{t:d,lang:p}=Ts(),A=xze(p),v=Me(),y=Me(),C=Me({endDate:null,selecting:!1}),x=F=>{C.value=F},M=(F=!1)=>{const D=T(v),V=T(y);U3([D,V])&&a("pick",[D,V],F)},I=F=>{C.value.selecting=F,F||(C.value.endDate=null)},P=()=>{const[F,D]=$ue(T(e),{lang:T(p),unit:i,unlinkPanels:t.unlinkPanels});v.value=void 0,y.value=void 0,n.value=F,r.value=D};return zt(e,F=>{F&&P()},{immediate:!0}),zt(()=>t.parsedValue,F=>{if(Jn(F)&&F.length===2){const[D,V]=F;v.value=D,n.value=D,y.value=V,s(T(v),T(y))}else P()},{immediate:!0}),{minDate:v,maxDate:y,rangeState:C,lang:p,ppNs:l,drpNs:o,handleChangeRange:x,handleRangeConfirm:M,handleShortcutClick:A,onSelect:I,t:d}},Cze=["onClick"],Eze=["aria-label"],Sze=["aria-label"],Tze=["disabled","aria-label"],Ize=["disabled","aria-label"],Bze=["disabled","aria-label"],Mze=["disabled","aria-label"],Lze=["aria-label"],Rze=["aria-label"],_R="month",Pze=Ge({__name:"panel-date-range",props:wze,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(t,{emit:e}){const n=t,r=mn("EP_PICKER_BASE"),{disabledDate:i,cellClassName:s,format:a,defaultTime:l,clearable:o}=r.props,d=Io(r.props,"shortcuts"),p=Io(r.props,"defaultValue"),{lang:A}=Ts(),v=Me(wi().locale(A.value)),y=Me(wi().locale(A.value).add(1,_R)),{minDate:C,maxDate:x,rangeState:M,ppNs:I,drpNs:P,handleChangeRange:F,handleRangeConfirm:D,handleShortcutClick:V,onSelect:H,t:Q}=Vue(n,{defaultValue:p,leftDate:v,rightDate:y,unit:_R,onParsedValueChanged:St}),G=Me({min:null,max:null}),W=Me({min:null,max:null}),te=oe(()=>`${v.value.year()} ${Q("el.datepicker.year")} ${Q(`el.datepicker.month${v.value.month()+1}`)}`),q=oe(()=>`${y.value.year()} ${Q("el.datepicker.year")} ${Q(`el.datepicker.month${y.value.month()+1}`)}`),Y=oe(()=>v.value.year()),ee=oe(()=>v.value.month()),ce=oe(()=>y.value.year()),se=oe(()=>y.value.month()),le=oe(()=>!!d.value.length),ie=oe(()=>G.value.min!==null?G.value.min:C.value?C.value.format(ae.value):""),pe=oe(()=>G.value.max!==null?G.value.max:x.value||C.value?(x.value||C.value).format(ae.value):""),ue=oe(()=>W.value.min!==null?W.value.min:C.value?C.value.format(Le.value):""),me=oe(()=>W.value.max!==null?W.value.max:x.value||C.value?(x.value||C.value).format(Le.value):""),Le=oe(()=>n.timeFormat||Qce(a)),ae=oe(()=>n.dateFormat||Gce(a)),be=yt=>U3(yt)&&(i?!i(yt[0].toDate())&&!i(yt[1].toDate()):!0),_e=()=>{v.value=v.value.subtract(1,"year"),n.unlinkPanels||(y.value=v.value.add(1,"month")),Et("year")},$e=()=>{v.value=v.value.subtract(1,"month"),n.unlinkPanels||(y.value=v.value.add(1,"month")),Et("month")},Re=()=>{n.unlinkPanels?y.value=y.value.add(1,"year"):(v.value=v.value.add(1,"year"),y.value=v.value.add(1,"month")),Et("year")},Ie=()=>{n.unlinkPanels?y.value=y.value.add(1,"month"):(v.value=v.value.add(1,"month"),y.value=v.value.add(1,"month")),Et("month")},Ne=()=>{v.value=v.value.add(1,"year"),Et("year")},Je=()=>{v.value=v.value.add(1,"month"),Et("month")},je=()=>{y.value=y.value.subtract(1,"year"),Et("year")},ft=()=>{y.value=y.value.subtract(1,"month"),Et("month")},Et=yt=>{e("panel-change",[v.value.toDate(),y.value.toDate()],yt)},ke=oe(()=>{const yt=(ee.value+1)%12,Xe=ee.value+1>=12?1:0;return n.unlinkPanels&&new Date(Y.value+Xe,yt)<new Date(ce.value,se.value)}),Ye=oe(()=>n.unlinkPanels&&ce.value*12+se.value-(Y.value*12+ee.value+1)>=12),at=oe(()=>!(C.value&&x.value&&!M.value.selecting&&U3([C.value,x.value]))),He=oe(()=>n.type==="datetime"||n.type==="datetimerange"),Tt=(yt,Xe)=>{if(yt)return l?wi(l[Xe]||l).locale(A.value).year(yt.year()).month(yt.month()).date(yt.date()):yt},Ut=(yt,Xe=!0)=>{const _t=yt.minDate,Gt=yt.maxDate,gt=Tt(_t,0),hn=Tt(Gt,1);x.value===hn&&C.value===gt||(e("calendar-change",[_t.toDate(),Gt&&Gt.toDate()]),x.value=hn,C.value=gt,!(!Xe||He.value)&&D())},Rt=Me(!1),Bt=Me(!1),Ht=()=>{Rt.value=!1},xt=()=>{Bt.value=!1},Zt=(yt,Xe)=>{G.value[Xe]=yt;const _t=wi(yt,ae.value).locale(A.value);if(_t.isValid()){if(i&&i(_t.toDate()))return;Xe==="min"?(v.value=_t,C.value=(C.value||v.value).year(_t.year()).month(_t.month()).date(_t.date()),!n.unlinkPanels&&(!x.value||x.value.isBefore(C.value))&&(y.value=_t.add(1,"month"),x.value=C.value.add(1,"month"))):(y.value=_t,x.value=(x.value||y.value).year(_t.year()).month(_t.month()).date(_t.date()),!n.unlinkPanels&&(!C.value||C.value.isAfter(x.value))&&(v.value=_t.subtract(1,"month"),C.value=x.value.subtract(1,"month")))}},un=(yt,Xe)=>{G.value[Xe]=null},Ft=(yt,Xe)=>{W.value[Xe]=yt;const _t=wi(yt,Le.value).locale(A.value);_t.isValid()&&(Xe==="min"?(Rt.value=!0,C.value=(C.value||v.value).hour(_t.hour()).minute(_t.minute()).second(_t.second()),(!x.value||x.value.isBefore(C.value))&&(x.value=C.value)):(Bt.value=!0,x.value=(x.value||y.value).hour(_t.hour()).minute(_t.minute()).second(_t.second()),y.value=x.value,x.value&&x.value.isBefore(C.value)&&(C.value=x.value)))},mt=(yt,Xe)=>{W.value[Xe]=null,Xe==="min"?(v.value=C.value,Rt.value=!1):(y.value=x.value,Bt.value=!1)},Be=(yt,Xe,_t)=>{W.value.min||(yt&&(v.value=yt,C.value=(C.value||v.value).hour(yt.hour()).minute(yt.minute()).second(yt.second())),_t||(Rt.value=Xe),(!x.value||x.value.isBefore(C.value))&&(x.value=C.value,y.value=yt))},ze=(yt,Xe,_t)=>{W.value.max||(yt&&(y.value=yt,x.value=(x.value||y.value).hour(yt.hour()).minute(yt.minute()).second(yt.second())),_t||(Bt.value=Xe),x.value&&x.value.isBefore(C.value)&&(C.value=x.value))},it=()=>{v.value=$ue(T(p),{lang:T(A),unit:"month",unlinkPanels:n.unlinkPanels})[0],y.value=v.value.add(1,"month"),x.value=void 0,C.value=void 0,e("pick",null)},bt=yt=>Jn(yt)?yt.map(Xe=>Xe.format(a)):yt.format(a),Qe=yt=>Jn(yt)?yt.map(Xe=>wi(Xe,a).locale(A.value)):wi(yt,a).locale(A.value);function St(yt,Xe){if(n.unlinkPanels&&Xe){const _t=(yt==null?void 0:yt.year())||0,Gt=(yt==null?void 0:yt.month())||0,gt=Xe.year(),hn=Xe.month();y.value=_t===gt&&Gt===hn?Xe.add(1,_R):Xe}else y.value=v.value.add(1,_R),Xe&&(y.value=y.value.hour(Xe.hour()).minute(Xe.minute()).second(Xe.second()))}return e("set-picker-option",["isValidValue",be]),e("set-picker-option",["parseUserInput",Qe]),e("set-picker-option",["formatToString",bt]),e("set-picker-option",["handleClear",it]),(yt,Xe)=>(ve(),Ue("div",{class:xe([T(I).b(),T(P).b(),{"has-sidebar":yt.$slots.sidebar||T(le),"has-time":T(He)}])},[rt("div",{class:xe(T(I).e("body-wrapper"))},[kt(yt.$slots,"sidebar",{class:xe(T(I).e("sidebar"))}),T(le)?(ve(),Ue("div",{key:0,class:xe(T(I).e("sidebar"))},[(ve(!0),Ue(_r,null,cs(T(d),(_t,Gt)=>(ve(),Ue("button",{key:Gt,type:"button",class:xe(T(I).e("shortcut")),onClick:gt=>T(V)(_t)},Nn(_t.text),11,Cze))),128))],2)):wt("v-if",!0),rt("div",{class:xe(T(I).e("body"))},[T(He)?(ve(),Ue("div",{key:0,class:xe(T(P).e("time-header"))},[rt("span",{class:xe(T(P).e("editors-wrap"))},[rt("span",{class:xe(T(P).e("time-picker-wrap"))},[pt(T(mh),{size:"small",disabled:T(M).selecting,placeholder:T(Q)("el.datepicker.startDate"),class:xe(T(P).e("editor")),"model-value":T(ie),"validate-event":!1,onInput:Xe[0]||(Xe[0]=_t=>Zt(_t,"min")),onChange:Xe[1]||(Xe[1]=_t=>un(_t,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),ci((ve(),Ue("span",{class:xe(T(P).e("time-picker-wrap"))},[pt(T(mh),{size:"small",class:xe(T(P).e("editor")),disabled:T(M).selecting,placeholder:T(Q)("el.datepicker.startTime"),"model-value":T(ue),"validate-event":!1,onFocus:Xe[2]||(Xe[2]=_t=>Rt.value=!0),onInput:Xe[3]||(Xe[3]=_t=>Ft(_t,"min")),onChange:Xe[4]||(Xe[4]=_t=>mt(_t,"min"))},null,8,["class","disabled","placeholder","model-value"]),pt(T(AO),{visible:Rt.value,format:T(Le),"datetime-role":"start","parsed-value":v.value,onPick:Be},null,8,["visible","format","parsed-value"])],2)),[[T(Yv),Ht]])],2),rt("span",null,[pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})]),rt("span",{class:xe([T(P).e("editors-wrap"),"is-right"])},[rt("span",{class:xe(T(P).e("time-picker-wrap"))},[pt(T(mh),{size:"small",class:xe(T(P).e("editor")),disabled:T(M).selecting,placeholder:T(Q)("el.datepicker.endDate"),"model-value":T(pe),readonly:!T(C),"validate-event":!1,onInput:Xe[5]||(Xe[5]=_t=>Zt(_t,"max")),onChange:Xe[6]||(Xe[6]=_t=>un(_t,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),ci((ve(),Ue("span",{class:xe(T(P).e("time-picker-wrap"))},[pt(T(mh),{size:"small",class:xe(T(P).e("editor")),disabled:T(M).selecting,placeholder:T(Q)("el.datepicker.endTime"),"model-value":T(me),readonly:!T(C),"validate-event":!1,onFocus:Xe[7]||(Xe[7]=_t=>T(C)&&(Bt.value=!0)),onInput:Xe[8]||(Xe[8]=_t=>Ft(_t,"max")),onChange:Xe[9]||(Xe[9]=_t=>mt(_t,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),pt(T(AO),{"datetime-role":"end",visible:Bt.value,format:T(Le),"parsed-value":y.value,onPick:ze},null,8,["visible","format","parsed-value"])],2)),[[T(Yv),xt]])],2)],2)):wt("v-if",!0),rt("div",{class:xe([[T(I).e("content"),T(P).e("content")],"is-left"])},[rt("div",{class:xe(T(P).e("header"))},[rt("button",{type:"button",class:xe([T(I).e("icon-btn"),"d-arrow-left"]),"aria-label":T(Q)("el.datepicker.prevYear"),onClick:_e},[pt(T(mr),null,{default:It(()=>[pt(T(UC))]),_:1})],10,Eze),rt("button",{type:"button",class:xe([T(I).e("icon-btn"),"arrow-left"]),"aria-label":T(Q)("el.datepicker.prevMonth"),onClick:$e},[pt(T(mr),null,{default:It(()=>[pt(T(r_))]),_:1})],10,Sze),yt.unlinkPanels?(ve(),Ue("button",{key:0,type:"button",disabled:!T(Ye),class:xe([[T(I).e("icon-btn"),{"is-disabled":!T(Ye)}],"d-arrow-right"]),"aria-label":T(Q)("el.datepicker.nextYear"),onClick:Ne},[pt(T(mr),null,{default:It(()=>[pt(T(zC))]),_:1})],10,Tze)):wt("v-if",!0),yt.unlinkPanels?(ve(),Ue("button",{key:1,type:"button",disabled:!T(ke),class:xe([[T(I).e("icon-btn"),{"is-disabled":!T(ke)}],"arrow-right"]),"aria-label":T(Q)("el.datepicker.nextMonth"),onClick:Je},[pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})],10,Ize)):wt("v-if",!0),rt("div",null,Nn(T(te)),1)],2),pt($3,{"selection-mode":"range",date:v.value,"min-date":T(C),"max-date":T(x),"range-state":T(M),"disabled-date":T(i),"cell-class-name":T(s),onChangerange:T(F),onPick:Ut,onSelect:T(H)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),rt("div",{class:xe([[T(I).e("content"),T(P).e("content")],"is-right"])},[rt("div",{class:xe(T(P).e("header"))},[yt.unlinkPanels?(ve(),Ue("button",{key:0,type:"button",disabled:!T(Ye),class:xe([[T(I).e("icon-btn"),{"is-disabled":!T(Ye)}],"d-arrow-left"]),"aria-label":T(Q)("el.datepicker.prevYear"),onClick:je},[pt(T(mr),null,{default:It(()=>[pt(T(UC))]),_:1})],10,Bze)):wt("v-if",!0),yt.unlinkPanels?(ve(),Ue("button",{key:1,type:"button",disabled:!T(ke),class:xe([[T(I).e("icon-btn"),{"is-disabled":!T(ke)}],"arrow-left"]),"aria-label":T(Q)("el.datepicker.prevMonth"),onClick:ft},[pt(T(mr),null,{default:It(()=>[pt(T(r_))]),_:1})],10,Mze)):wt("v-if",!0),rt("button",{type:"button","aria-label":T(Q)("el.datepicker.nextYear"),class:xe([T(I).e("icon-btn"),"d-arrow-right"]),onClick:Re},[pt(T(mr),null,{default:It(()=>[pt(T(zC))]),_:1})],10,Lze),rt("button",{type:"button",class:xe([T(I).e("icon-btn"),"arrow-right"]),"aria-label":T(Q)("el.datepicker.nextMonth"),onClick:Ie},[pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})],10,Rze),rt("div",null,Nn(T(q)),1)],2),pt($3,{"selection-mode":"range",date:y.value,"min-date":T(C),"max-date":T(x),"range-state":T(M),"disabled-date":T(i),"cell-class-name":T(s),onChangerange:T(F),onPick:Ut,onSelect:T(H)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),T(He)?(ve(),Ue("div",{key:0,class:xe(T(I).e("footer"))},[T(o)?(ve(),qt(T(tu),{key:0,text:"",size:"small",class:xe(T(I).e("link-btn")),onClick:it},{default:It(()=>[gs(Nn(T(Q)("el.datepicker.clear")),1)]),_:1},8,["class"])):wt("v-if",!0),pt(T(tu),{plain:"",size:"small",class:xe(T(I).e("link-btn")),disabled:T(at),onClick:Xe[10]||(Xe[10]=_t=>T(D)(!1))},{default:It(()=>[gs(Nn(T(Q)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):wt("v-if",!0)],2))}});var Fze=Fn(Pze,[["__file","panel-date-range.vue"]]);const Oze=Ln({...zue}),Nze=["pick","set-picker-option","calendar-change"],kze=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const{t:r}=Ts(),i=()=>{e.value=e.value.subtract(1,"year"),t.value||(n.value=n.value.subtract(1,"year"))},s=()=>{t.value||(e.value=e.value.add(1,"year")),n.value=n.value.add(1,"year")},a=()=>{e.value=e.value.add(1,"year")},l=()=>{n.value=n.value.subtract(1,"year")},o=oe(()=>`${e.value.year()} ${r("el.datepicker.year")}`),d=oe(()=>`${n.value.year()} ${r("el.datepicker.year")}`),p=oe(()=>e.value.year()),A=oe(()=>n.value.year()===e.value.year()?e.value.year()+1:n.value.year());return{leftPrevYear:i,rightNextYear:s,leftNextYear:a,rightPrevYear:l,leftLabel:o,rightLabel:d,leftYear:p,rightYear:A}},Dze=["onClick"],Uze=["disabled"],zze=["disabled"],bR="year",$ze=Ge({name:"DatePickerMonthRange"}),Vze=Ge({...$ze,props:Oze,emits:Nze,setup(t,{emit:e}){const n=t,{lang:r}=Ts(),i=mn("EP_PICKER_BASE"),{shortcuts:s,disabledDate:a,format:l}=i.props,o=Io(i.props,"defaultValue"),d=Me(wi().locale(r.value)),p=Me(wi().locale(r.value).add(1,bR)),{minDate:A,maxDate:v,rangeState:y,ppNs:C,drpNs:x,handleChangeRange:M,handleRangeConfirm:I,handleShortcutClick:P,onSelect:F}=Vue(n,{defaultValue:o,leftDate:d,rightDate:p,unit:bR,onParsedValueChanged:le}),D=oe(()=>!!s.length),{leftPrevYear:V,rightNextYear:H,leftNextYear:Q,rightPrevYear:G,leftLabel:W,rightLabel:te,leftYear:q,rightYear:Y}=kze({unlinkPanels:Io(n,"unlinkPanels"),leftDate:d,rightDate:p}),ee=oe(()=>n.unlinkPanels&&Y.value>q.value+1),ce=(ie,pe=!0)=>{const ue=ie.minDate,me=ie.maxDate;v.value===me&&A.value===ue||(e("calendar-change",[ue.toDate(),me&&me.toDate()]),v.value=me,A.value=ue,pe&&I())},se=ie=>ie.map(pe=>pe.format(l));function le(ie,pe){if(n.unlinkPanels&&pe){const ue=(ie==null?void 0:ie.year())||0,me=pe.year();p.value=ue===me?pe.add(1,bR):pe}else p.value=d.value.add(1,bR)}return e("set-picker-option",["formatToString",se]),(ie,pe)=>(ve(),Ue("div",{class:xe([T(C).b(),T(x).b(),{"has-sidebar":!!ie.$slots.sidebar||T(D)}])},[rt("div",{class:xe(T(C).e("body-wrapper"))},[kt(ie.$slots,"sidebar",{class:xe(T(C).e("sidebar"))}),T(D)?(ve(),Ue("div",{key:0,class:xe(T(C).e("sidebar"))},[(ve(!0),Ue(_r,null,cs(T(s),(ue,me)=>(ve(),Ue("button",{key:me,type:"button",class:xe(T(C).e("shortcut")),onClick:Le=>T(P)(ue)},Nn(ue.text),11,Dze))),128))],2)):wt("v-if",!0),rt("div",{class:xe(T(C).e("body"))},[rt("div",{class:xe([[T(C).e("content"),T(x).e("content")],"is-left"])},[rt("div",{class:xe(T(x).e("header"))},[rt("button",{type:"button",class:xe([T(C).e("icon-btn"),"d-arrow-left"]),onClick:pe[0]||(pe[0]=(...ue)=>T(V)&&T(V)(...ue))},[pt(T(mr),null,{default:It(()=>[pt(T(UC))]),_:1})],2),ie.unlinkPanels?(ve(),Ue("button",{key:0,type:"button",disabled:!T(ee),class:xe([[T(C).e("icon-btn"),{[T(C).is("disabled")]:!T(ee)}],"d-arrow-right"]),onClick:pe[1]||(pe[1]=(...ue)=>T(Q)&&T(Q)(...ue))},[pt(T(mr),null,{default:It(()=>[pt(T(zC))]),_:1})],10,Uze)):wt("v-if",!0),rt("div",null,Nn(T(W)),1)],2),pt(V3,{"selection-mode":"range",date:d.value,"min-date":T(A),"max-date":T(v),"range-state":T(y),"disabled-date":T(a),onChangerange:T(M),onPick:ce,onSelect:T(F)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),rt("div",{class:xe([[T(C).e("content"),T(x).e("content")],"is-right"])},[rt("div",{class:xe(T(x).e("header"))},[ie.unlinkPanels?(ve(),Ue("button",{key:0,type:"button",disabled:!T(ee),class:xe([[T(C).e("icon-btn"),{"is-disabled":!T(ee)}],"d-arrow-left"]),onClick:pe[2]||(pe[2]=(...ue)=>T(G)&&T(G)(...ue))},[pt(T(mr),null,{default:It(()=>[pt(T(UC))]),_:1})],10,zze)):wt("v-if",!0),rt("button",{type:"button",class:xe([T(C).e("icon-btn"),"d-arrow-right"]),onClick:pe[3]||(pe[3]=(...ue)=>T(H)&&T(H)(...ue))},[pt(T(mr),null,{default:It(()=>[pt(T(zC))]),_:1})],2),rt("div",null,Nn(T(te)),1)],2),pt(V3,{"selection-mode":"range",date:p.value,"min-date":T(A),"max-date":T(v),"range-state":T(y),"disabled-date":T(a),onChangerange:T(M),onPick:ce,onSelect:T(F)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var Hze=Fn(Vze,[["__file","panel-month-range.vue"]]);const Gze=function(t){switch(t){case"daterange":case"datetimerange":return Fze;case"monthrange":return Hze;default:return bze}};wi.extend(aue);wi.extend(I8e);wi.extend(cH);wi.extend(M8e);wi.extend(R8e);wi.extend(F8e);wi.extend(N8e);wi.extend(D8e);var Qze=Ge({name:"ElDatePicker",install:null,props:U8e,emits:["update:modelValue"],setup(t,{expose:e,emit:n,slots:r}){const i=_n("picker-panel");Rr("ElPopperOptions",Xs(Io(t,"popperOptions"))),Rr(dH,{slots:r,pickerNs:i});const s=Me();e({focus:(o=!0)=>{var d;(d=s.value)==null||d.focus(o)},handleOpen:()=>{var o;(o=s.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=s.value)==null||o.handleClose()}});const l=o=>{n("update:modelValue",o)};return()=>{var o;const d=(o=t.format)!=null?o:y4e[t.type]||xx,p=Gze(t.type);return pt(Wce,Gi(t,{format:d,type:t.type,ref:s,"onUpdate:modelValue":l}),{default:A=>pt(p,A,null),"range-separator":r["range-separator"]})}}});const uF=Qze;uF.install=t=>{t.component(uF.name,uF)};const jze=uF,AH=Symbol("elDescriptions");var US=Ge({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:mn(AH,{})}},render(){var t,e,n,r,i,s,a;const l=uOe(this.cell),o=(((t=this.cell)==null?void 0:t.dirs)||[]).map(V=>{const{dir:H,arg:Q,modifiers:G,value:W}=V;return[H,W,Q,G]}),{border:d,direction:p}=this.descriptions,A=p==="vertical",v=((r=(n=(e=this.cell)==null?void 0:e.children)==null?void 0:n.label)==null?void 0:r.call(n))||l.label,y=(a=(s=(i=this.cell)==null?void 0:i.children)==null?void 0:s.default)==null?void 0:a.call(s),C=l.span,x=l.align?`is-${l.align}`:"",M=l.labelAlign?`is-${l.labelAlign}`:x,I=l.className,P=l.labelClassName,F={width:Ja(l.width),minWidth:Ja(l.minWidth)},D=_n("descriptions");switch(this.type){case"label":return ci(Br(this.tag,{style:F,class:[D.e("cell"),D.e("label"),D.is("bordered-label",d),D.is("vertical-label",A),M,P],colSpan:A?C:1},v),o);case"content":return ci(Br(this.tag,{style:F,class:[D.e("cell"),D.e("content"),D.is("bordered-content",d),D.is("vertical-content",A),x,I],colSpan:A?C:C*2-1},y),o);default:return ci(Br("td",{style:F,class:[D.e("cell"),x],colSpan:C},[eu(v)?void 0:Br("span",{class:[D.e("label"),P]},v),Br("span",{class:[D.e("content"),I]},y)]),o)}}});const Kze=Ln({row:{type:Mt(Array),default:()=>[]}}),Wze={key:1},qze=Ge({name:"ElDescriptionsRow"}),Yze=Ge({...qze,props:Kze,setup(t){const e=mn(AH,{});return(n,r)=>T(e).direction==="vertical"?(ve(),Ue(_r,{key:0},[rt("tr",null,[(ve(!0),Ue(_r,null,cs(n.row,(i,s)=>(ve(),qt(T(US),{key:`tr1-${s}`,cell:i,tag:"th",type:"label"},null,8,["cell"]))),128))]),rt("tr",null,[(ve(!0),Ue(_r,null,cs(n.row,(i,s)=>(ve(),qt(T(US),{key:`tr2-${s}`,cell:i,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(ve(),Ue("tr",Wze,[(ve(!0),Ue(_r,null,cs(n.row,(i,s)=>(ve(),Ue(_r,{key:`tr3-${s}`},[T(e).border?(ve(),Ue(_r,{key:0},[pt(T(US),{cell:i,tag:"td",type:"label"},null,8,["cell"]),pt(T(US),{cell:i,tag:"td",type:"content"},null,8,["cell"])],64)):(ve(),qt(T(US),{key:1,cell:i,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Xze=Fn(Yze,[["__file","descriptions-row.vue"]]);const Zze=Ln({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:Nc,title:{type:String,default:""},extra:{type:String,default:""}}),Jze=Ge({name:"ElDescriptions"}),e$e=Ge({...Jze,props:Zze,setup(t){const e=t,n=_n("descriptions"),r=Gl(),i=Uc();Rr(AH,e);const s=oe(()=>[n.b(),n.m(r.value)]),a=(o,d,p,A=!1)=>(o.props||(o.props={}),d>p&&(o.props.span=p),A&&(o.props.span=d),o),l=()=>{if(!i.default)return[];const o=Hy(i.default()).filter(y=>{var C;return((C=y==null?void 0:y.type)==null?void 0:C.name)==="ElDescriptionsItem"}),d=[];let p=[],A=e.column,v=0;return o.forEach((y,C)=>{var x;const M=((x=y.props)==null?void 0:x.span)||1;if(C<o.length-1&&(v+=M>A?A:M),C===o.length-1){const I=e.column-v%e.column;p.push(a(y,I,A,!0)),d.push(p);return}M<A?(A-=M,p.push(y)):(p.push(a(y,M,A)),d.push(p),A=e.column,p=[])}),d};return(o,d)=>(ve(),Ue("div",{class:xe(T(s))},[o.title||o.extra||o.$slots.title||o.$slots.extra?(ve(),Ue("div",{key:0,class:xe(T(n).e("header"))},[rt("div",{class:xe(T(n).e("title"))},[kt(o.$slots,"title",{},()=>[gs(Nn(o.title),1)])],2),rt("div",{class:xe(T(n).e("extra"))},[kt(o.$slots,"extra",{},()=>[gs(Nn(o.extra),1)])],2)],2)):wt("v-if",!0),rt("div",{class:xe(T(n).e("body"))},[rt("table",{class:xe([T(n).e("table"),T(n).is("bordered",o.border)])},[rt("tbody",null,[(ve(!0),Ue(_r,null,cs(l(),(p,A)=>(ve(),qt(Xze,{key:A,row:p},null,8,["row"]))),128))])],2)],2)],2))}});var t$e=Fn(e$e,[["__file","description.vue"]]);const n$e=Ln({label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),Hue=Ge({name:"ElDescriptionsItem",props:n$e}),r$e=_i(t$e,{DescriptionsItem:Hue}),i$e=Pa(Hue),s$e=Ln({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Mt([String,Array,Object])},zIndex:{type:Mt([String,Number])}}),o$e={click:t=>t instanceof MouseEvent},a$e="overlay";var l$e=Ge({name:"ElOverlay",props:s$e,emits:o$e,setup(t,{slots:e,emit:n}){const r=_n(a$e),i=o=>{n("click",o)},{onClick:s,onMousedown:a,onMouseup:l}=KV(t.customMaskEvent?void 0:i);return()=>t.mask?pt("div",{class:[r.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:s,onMousedown:a,onMouseup:l},[kt(e,"default")],lp.STYLE|lp.CLASS|lp.PROPS,["onClick","onMouseup","onMousedown"]):Br("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[kt(e,"default")])}});const gH=l$e,Gue=Symbol("dialogInjectionKey"),Que=Ln({center:Boolean,alignCenter:Boolean,closeIcon:{type:wo},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),c$e={close:()=>!0},u$e=["aria-level"],h$e=["aria-label"],d$e=["id"],f$e=Ge({name:"ElDialogContent"}),p$e=Ge({...f$e,props:Que,emits:c$e,setup(t){const e=t,{t:n}=Ts(),{Close:r}=RV,{dialogRef:i,headerRef:s,bodyId:a,ns:l,style:o}=mn(Gue),{focusTrapRef:d}=mn(oH),p=oe(()=>[l.b(),l.is("fullscreen",e.fullscreen),l.is("draggable",e.draggable),l.is("align-center",e.alignCenter),{[l.m("center")]:e.center}]),A=u2(d,i),v=oe(()=>e.draggable),y=oe(()=>e.overflow);return Ule(i,s,v,y),(C,x)=>(ve(),Ue("div",{ref:T(A),class:xe(T(p)),style:vr(T(o)),tabindex:"-1"},[rt("header",{ref_key:"headerRef",ref:s,class:xe([T(l).e("header"),{"show-close":C.showClose}])},[kt(C.$slots,"header",{},()=>[rt("span",{role:"heading","aria-level":C.ariaLevel,class:xe(T(l).e("title"))},Nn(C.title),11,u$e)]),C.showClose?(ve(),Ue("button",{key:0,"aria-label":T(n)("el.dialog.close"),class:xe(T(l).e("headerbtn")),type:"button",onClick:x[0]||(x[0]=M=>C.$emit("close"))},[pt(T(mr),{class:xe(T(l).e("close"))},{default:It(()=>[(ve(),qt(Mi(C.closeIcon||T(r))))]),_:1},8,["class"])],10,h$e)):wt("v-if",!0)],2),rt("div",{id:T(a),class:xe(T(l).e("body"))},[kt(C.$slots,"default")],10,d$e),C.$slots.footer?(ve(),Ue("footer",{key:0,class:xe(T(l).e("footer"))},[kt(C.$slots,"footer")],2)):wt("v-if",!0)],6))}});var A$e=Fn(p$e,[["__file","dialog-content.vue"]]);const jue=Ln({...Que,appendToBody:Boolean,appendTo:{type:Mt(String),default:"body"},beforeClose:{type:Mt(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Kue={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Si]:t=>Sl(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Wue=(t,e)=>{var n;const i=mi().emit,{nextZIndex:s}=SE();let a="";const l=Hu(),o=Hu(),d=Me(!1),p=Me(!1),A=Me(!1),v=Me((n=t.zIndex)!=null?n:s());let y,C;const x=YB("namespace",QT),M=oe(()=>{const se={},le=`--${x.value}-dialog`;return t.fullscreen||(t.top&&(se[`${le}-margin-top`]=t.top),t.width&&(se[`${le}-width`]=Ja(t.width))),se}),I=oe(()=>t.alignCenter?{display:"flex"}:{});function P(){i("opened")}function F(){i("closed"),i(Si,!1),t.destroyOnClose&&(A.value=!1)}function D(){i("close")}function V(){C==null||C(),y==null||y(),t.openDelay&&t.openDelay>0?{stop:y}=_b(()=>W(),t.openDelay):W()}function H(){y==null||y(),C==null||C(),t.closeDelay&&t.closeDelay>0?{stop:C}=_b(()=>te(),t.closeDelay):te()}function Q(){function se(le){le||(p.value=!0,d.value=!1)}t.beforeClose?t.beforeClose(se):H()}function G(){t.closeOnClickModal&&Q()}function W(){As&&(d.value=!0)}function te(){d.value=!1}function q(){i("openAutoFocus")}function Y(){i("closeAutoFocus")}function ee(se){var le;((le=se.detail)==null?void 0:le.focusReason)==="pointer"&&se.preventDefault()}t.lockScroll&&DV(d);function ce(){t.closeOnPressEscape&&Q()}return zt(()=>t.modelValue,se=>{se?(p.value=!1,V(),A.value=!0,v.value=Sle(t.zIndex)?s():v.value++,Tr(()=>{i("open"),e.value&&(e.value.scrollTop=0)})):d.value&&H()}),zt(()=>t.fullscreen,se=>{e.value&&(se?(a=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=a)}),dr(()=>{t.modelValue&&(d.value=!0,A.value=!0,V())}),{afterEnter:P,afterLeave:F,beforeLeave:D,handleClose:Q,onModalClick:G,close:H,doClose:te,onOpenAutoFocus:q,onCloseAutoFocus:Y,onCloseRequested:ce,onFocusoutPrevented:ee,titleId:l,bodyId:o,closed:p,style:M,overlayDialogStyle:I,rendered:A,visible:d,zIndex:v}},g$e=["aria-label","aria-labelledby","aria-describedby"],m$e=Ge({name:"ElDialog",inheritAttrs:!1}),v$e=Ge({...m$e,props:jue,emits:Kue,setup(t,{expose:e}){const n=t,r=Uc();Jc({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},oe(()=>!!r.title));const i=_n("dialog"),s=Me(),a=Me(),l=Me(),{visible:o,titleId:d,bodyId:p,style:A,overlayDialogStyle:v,rendered:y,zIndex:C,afterEnter:x,afterLeave:M,beforeLeave:I,handleClose:P,onModalClick:F,onOpenAutoFocus:D,onCloseAutoFocus:V,onCloseRequested:H,onFocusoutPrevented:Q}=Wue(n,s);Rr(Gue,{dialogRef:s,headerRef:a,bodyId:p,ns:i,rendered:y,style:A});const G=KV(F),W=oe(()=>n.draggable&&!n.fullscreen);return e({visible:o,dialogContentRef:l}),(te,q)=>(ve(),qt(yE,{to:te.appendTo,disabled:te.appendTo!=="body"?!1:!te.appendToBody},[pt(fc,{name:"dialog-fade",onAfterEnter:T(x),onAfterLeave:T(M),onBeforeLeave:T(I),persisted:""},{default:It(()=>[ci(pt(T(gH),{"custom-mask-event":"",mask:te.modal,"overlay-class":te.modalClass,"z-index":T(C)},{default:It(()=>[rt("div",{role:"dialog","aria-modal":"true","aria-label":te.title||void 0,"aria-labelledby":te.title?void 0:T(d),"aria-describedby":T(p),class:xe(`${T(i).namespace.value}-overlay-dialog`),style:vr(T(v)),onClick:q[0]||(q[0]=(...Y)=>T(G).onClick&&T(G).onClick(...Y)),onMousedown:q[1]||(q[1]=(...Y)=>T(G).onMousedown&&T(G).onMousedown(...Y)),onMouseup:q[2]||(q[2]=(...Y)=>T(G).onMouseup&&T(G).onMouseup(...Y))},[pt(T(ZB),{loop:"",trapped:T(o),"focus-start-el":"container",onFocusAfterTrapped:T(D),onFocusAfterReleased:T(V),onFocusoutPrevented:T(Q),onReleaseRequested:T(H)},{default:It(()=>[T(y)?(ve(),qt(A$e,Gi({key:0,ref_key:"dialogContentRef",ref:l},te.$attrs,{center:te.center,"align-center":te.alignCenter,"close-icon":te.closeIcon,draggable:T(W),overflow:te.overflow,fullscreen:te.fullscreen,"show-close":te.showClose,title:te.title,"aria-level":te.headerAriaLevel,onClose:T(P)}),Gv({header:It(()=>[te.$slots.title?kt(te.$slots,"title",{key:1}):kt(te.$slots,"header",{key:0,close:T(P),titleId:T(d),titleClass:T(i).e("title")})]),default:It(()=>[kt(te.$slots,"default")]),_:2},[te.$slots.footer?{name:"footer",fn:It(()=>[kt(te.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):wt("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,g$e)]),_:3},8,["mask","overlay-class","z-index"]),[[Hs,T(o)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var y$e=Fn(v$e,[["__file","dialog.vue"]]);const _$e=_i(y$e),b$e=Ln({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Mt(String),default:"solid"}}),w$e=Ge({name:"ElDivider"}),x$e=Ge({...w$e,props:b$e,setup(t){const e=t,n=_n("divider"),r=oe(()=>n.cssVar({"border-style":e.borderStyle}));return(i,s)=>(ve(),Ue("div",{class:xe([T(n).b(),T(n).m(i.direction)]),style:vr(T(r)),role:"separator"},[i.$slots.default&&i.direction!=="vertical"?(ve(),Ue("div",{key:0,class:xe([T(n).e("text"),T(n).is(i.contentPosition)])},[kt(i.$slots,"default")],2)):wt("v-if",!0)],6))}});var C$e=Fn(x$e,[["__file","divider.vue"]]);const que=_i(C$e),E$e=Ln({...jue,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),S$e=Kue,T$e=["aria-label","aria-labelledby","aria-describedby"],I$e=["id","aria-level"],B$e=["aria-label"],M$e=["id"],L$e=Ge({name:"ElDrawer",inheritAttrs:!1}),R$e=Ge({...L$e,props:E$e,emits:S$e,setup(t,{expose:e}){const n=t,r=Uc();Jc({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},oe(()=>!!r.title));const i=Me(),s=Me(),a=_n("drawer"),{t:l}=Ts(),{afterEnter:o,afterLeave:d,beforeLeave:p,visible:A,rendered:v,titleId:y,bodyId:C,zIndex:x,onModalClick:M,onOpenAutoFocus:I,onCloseAutoFocus:P,onFocusoutPrevented:F,onCloseRequested:D,handleClose:V}=Wue(n,i),H=oe(()=>n.direction==="rtl"||n.direction==="ltr"),Q=oe(()=>Ja(n.size));return e({handleClose:V,afterEnter:o,afterLeave:d}),(G,W)=>(ve(),qt(yE,{to:"body",disabled:!G.appendToBody},[pt(fc,{name:T(a).b("fade"),onAfterEnter:T(o),onAfterLeave:T(d),onBeforeLeave:T(p),persisted:""},{default:It(()=>[ci(pt(T(gH),{mask:G.modal,"overlay-class":G.modalClass,"z-index":T(x),onClick:T(M)},{default:It(()=>[pt(T(ZB),{loop:"",trapped:T(A),"focus-trap-el":i.value,"focus-start-el":s.value,onFocusAfterTrapped:T(I),onFocusAfterReleased:T(P),onFocusoutPrevented:T(F),onReleaseRequested:T(D)},{default:It(()=>[rt("div",Gi({ref_key:"drawerRef",ref:i,"aria-modal":"true","aria-label":G.title||void 0,"aria-labelledby":G.title?void 0:T(y),"aria-describedby":T(C)},G.$attrs,{class:[T(a).b(),G.direction,T(A)&&"open"],style:T(H)?"width: "+T(Q):"height: "+T(Q),role:"dialog",onClick:W[1]||(W[1]=qr(()=>{},["stop"]))}),[rt("span",{ref_key:"focusStartRef",ref:s,class:xe(T(a).e("sr-focus")),tabindex:"-1"},null,2),G.withHeader?(ve(),Ue("header",{key:0,class:xe(T(a).e("header"))},[G.$slots.title?kt(G.$slots,"title",{key:1},()=>[wt(" DEPRECATED SLOT ")]):kt(G.$slots,"header",{key:0,close:T(V),titleId:T(y),titleClass:T(a).e("title")},()=>[G.$slots.title?wt("v-if",!0):(ve(),Ue("span",{key:0,id:T(y),role:"heading","aria-level":G.headerAriaLevel,class:xe(T(a).e("title"))},Nn(G.title),11,I$e))]),G.showClose?(ve(),Ue("button",{key:2,"aria-label":T(l)("el.drawer.close"),class:xe(T(a).e("close-btn")),type:"button",onClick:W[0]||(W[0]=(...te)=>T(V)&&T(V)(...te))},[pt(T(mr),{class:xe(T(a).e("close"))},{default:It(()=>[pt(T(NA))]),_:1},8,["class"])],10,B$e)):wt("v-if",!0)],2)):wt("v-if",!0),T(v)?(ve(),Ue("div",{key:1,id:T(C),class:xe(T(a).e("body"))},[kt(G.$slots,"default")],10,M$e)):wt("v-if",!0),G.$slots.footer?(ve(),Ue("div",{key:2,class:xe(T(a).e("footer"))},[kt(G.$slots,"footer")],2)):wt("v-if",!0)],16,T$e)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Hs,T(A)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var P$e=Fn(R$e,[["__file","drawer.vue"]]);const F$e=_i(P$e),O$e=Ge({inheritAttrs:!1});function N$e(t,e,n,r,i,s){return kt(t.$slots,"default")}var k$e=Fn(O$e,[["render",N$e],["__file","collection.vue"]]);const D$e=Ge({name:"ElCollectionItem",inheritAttrs:!1});function U$e(t,e,n,r,i,s){return kt(t.$slots,"default")}var z$e=Fn(D$e,[["render",U$e],["__file","collection-item.vue"]]);const Yue="data-el-collection-item",Xue=t=>{const e=`El${t}Collection`,n=`${e}Item`,r=Symbol(e),i=Symbol(n),s={...k$e,name:e,setup(){const l=Me(null),o=new Map;Rr(r,{itemMap:o,getItems:()=>{const p=T(l);if(!p)return[];const A=Array.from(p.querySelectorAll(`[${Yue}]`));return[...o.values()].sort((y,C)=>A.indexOf(y.ref)-A.indexOf(C.ref))},collectionRef:l})}},a={...z$e,name:n,setup(l,{attrs:o}){const d=Me(null),p=mn(r,void 0);Rr(i,{collectionItemRef:d}),dr(()=>{const A=T(d);A&&p.itemMap.set(A,{ref:A,...o})}),Do(()=>{const A=T(d);p.itemMap.delete(A)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:s,ElCollectionItem:a}},$$e=Ln({style:{type:Mt([String,Array,Object])},currentTabId:{type:Mt(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Mt(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:V$e,ElCollectionItem:H$e,COLLECTION_INJECTION_KEY:mH,COLLECTION_ITEM_INJECTION_KEY:G$e}=Xue("RovingFocusGroup"),vH=Symbol("elRovingFocusGroup"),Zue=Symbol("elRovingFocusGroupItem"),Q$e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},j$e=(t,e)=>t,K$e=(t,e,n)=>{const r=j$e(t.key);return Q$e[r]},W$e=(t,e)=>t.map((n,r)=>t[(r+e)%t.length]),yH=t=>{const{activeElement:e}=document;for(const n of t)if(n===e||(n.focus(),e!==document.activeElement))return},QZ="currentTabIdChange",jZ="rovingFocusGroup.entryFocus",q$e={bubbles:!1,cancelable:!0},Y$e=Ge({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:$$e,emits:[QZ,"entryFocus"],setup(t,{emit:e}){var n;const r=Me((n=t.currentTabId||t.defaultCurrentTabId)!=null?n:null),i=Me(!1),s=Me(!1),a=Me(null),{getItems:l}=mn(mH,void 0),o=oe(()=>[{outline:"none"},t.style]),d=x=>{e(QZ,x)},p=()=>{i.value=!0},A=Wa(x=>{var M;(M=t.onMousedown)==null||M.call(t,x)},()=>{s.value=!0}),v=Wa(x=>{var M;(M=t.onFocus)==null||M.call(t,x)},x=>{const M=!T(s),{target:I,currentTarget:P}=x;if(I===P&&M&&!T(i)){const F=new Event(jZ,q$e);if(P==null||P.dispatchEvent(F),!F.defaultPrevented){const D=l().filter(W=>W.focusable),V=D.find(W=>W.active),H=D.find(W=>W.id===T(r)),G=[V,H,...D].filter(Boolean).map(W=>W.ref);yH(G)}}s.value=!1}),y=Wa(x=>{var M;(M=t.onBlur)==null||M.call(t,x)},()=>{i.value=!1}),C=(...x)=>{e("entryFocus",...x)};Rr(vH,{currentTabbedId:vE(r),loop:Io(t,"loop"),tabIndex:oe(()=>T(i)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:o,orientation:Io(t,"orientation"),dir:Io(t,"dir"),onItemFocus:d,onItemShiftTab:p,onBlur:y,onFocus:v,onMousedown:A}),zt(()=>t.currentTabId,x=>{r.value=x??null}),Vo(a,jZ,C)}});function X$e(t,e,n,r,i,s){return kt(t.$slots,"default")}var Z$e=Fn(Y$e,[["render",X$e],["__file","roving-focus-group-impl.vue"]]);const J$e=Ge({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:V$e,ElRovingFocusGroupImpl:Z$e}});function eVe(t,e,n,r,i,s){const a=ui("el-roving-focus-group-impl"),l=ui("el-focus-group-collection");return ve(),qt(l,null,{default:It(()=>[pt(a,Tv(MC(t.$attrs)),{default:It(()=>[kt(t.$slots,"default")]),_:3},16)]),_:3})}var tVe=Fn(J$e,[["render",eVe],["__file","roving-focus-group.vue"]]);const nVe=Ge({components:{ElRovingFocusCollectionItem:H$e},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:e}){const{currentTabbedId:n,loop:r,onItemFocus:i,onItemShiftTab:s}=mn(vH,void 0),{getItems:a}=mn(mH,void 0),l=Hu(),o=Me(null),d=Wa(y=>{e("mousedown",y)},y=>{t.focusable?i(T(l)):y.preventDefault()}),p=Wa(y=>{e("focus",y)},()=>{i(T(l))}),A=Wa(y=>{e("keydown",y)},y=>{const{key:C,shiftKey:x,target:M,currentTarget:I}=y;if(C===Fr.tab&&x){s();return}if(M!==I)return;const P=K$e(y);if(P){y.preventDefault();let D=a().filter(V=>V.focusable).map(V=>V.ref);switch(P){case"last":{D.reverse();break}case"prev":case"next":{P==="prev"&&D.reverse();const V=D.indexOf(I);D=r.value?W$e(D,V+1):D.slice(V+1);break}}Tr(()=>{yH(D)})}}),v=oe(()=>n.value===T(l));return Rr(Zue,{rovingFocusGroupItemRef:o,tabIndex:oe(()=>T(v)?0:-1),handleMousedown:d,handleFocus:p,handleKeydown:A}),{id:l,handleKeydown:A,handleFocus:p,handleMousedown:d}}});function rVe(t,e,n,r,i,s){const a=ui("el-roving-focus-collection-item");return ve(),qt(a,{id:t.id,focusable:t.focusable,active:t.active},{default:It(()=>[kt(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var iVe=Fn(nVe,[["render",rVe],["__file","roving-focus-item.vue"]]);const hF=Ln({trigger:QI.trigger,effect:{...qc.effect,default:"light"},type:{type:Mt(String)},placement:{type:Mt(String),default:"bottom"},popperOptions:{type:Mt(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Mt([Number,String]),default:0},maxHeight:{type:Mt([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Mt(Object)},teleported:qc.teleported}),Jue=Ln({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:wo}}),sVe=Ln({onKeydown:{type:Mt(Function)}}),oVe=[Fr.down,Fr.pageDown,Fr.home],ehe=[Fr.up,Fr.pageUp,Fr.end],aVe=[...oVe,...ehe],{ElCollection:lVe,ElCollectionItem:cVe,COLLECTION_INJECTION_KEY:uVe,COLLECTION_ITEM_INJECTION_KEY:hVe}=Xue("Dropdown"),b2=Symbol("elDropdown"),{ButtonGroup:dVe}=tu,fVe=Ge({name:"ElDropdown",components:{ElButton:tu,ElButtonGroup:dVe,ElScrollbar:d0,ElDropdownCollection:lVe,ElTooltip:_h,ElRovingFocusGroup:tVe,ElOnlyChild:Sce,ElIcon:mr,ArrowDown:u0},props:hF,emits:["visible-change","click","command"],setup(t,{emit:e}){const n=mi(),r=_n("dropdown"),{t:i}=Ts(),s=Me(),a=Me(),l=Me(null),o=Me(null),d=Me(null),p=Me(null),A=Me(!1),v=[Fr.enter,Fr.space,Fr.down],y=oe(()=>({maxHeight:Ja(t.maxHeight)})),C=oe(()=>[r.m(V.value)]),x=oe(()=>t_(t.trigger)),M=Hu().value,I=oe(()=>t.id||M);zt([s,x],([ie,pe],[ue])=>{var me,Le,ae;(me=ue==null?void 0:ue.$el)!=null&&me.removeEventListener&&ue.$el.removeEventListener("pointerenter",Q),(Le=ie==null?void 0:ie.$el)!=null&&Le.removeEventListener&&ie.$el.removeEventListener("pointerenter",Q),(ae=ie==null?void 0:ie.$el)!=null&&ae.addEventListener&&pe.includes("hover")&&ie.$el.addEventListener("pointerenter",Q)},{immediate:!0}),Do(()=>{var ie,pe;(pe=(ie=s.value)==null?void 0:ie.$el)!=null&&pe.removeEventListener&&s.value.$el.removeEventListener("pointerenter",Q)});function P(){F()}function F(){var ie;(ie=l.value)==null||ie.onClose()}function D(){var ie;(ie=l.value)==null||ie.onOpen()}const V=Gl();function H(...ie){e("command",...ie)}function Q(){var ie,pe;(pe=(ie=s.value)==null?void 0:ie.$el)==null||pe.focus()}function G(){}function W(){const ie=T(o);x.value.includes("hover")&&(ie==null||ie.focus()),p.value=null}function te(ie){p.value=ie}function q(ie){A.value||(ie.preventDefault(),ie.stopImmediatePropagation())}function Y(){e("visible-change",!0)}function ee(ie){(ie==null?void 0:ie.type)==="keydown"&&o.value.focus()}function ce(){e("visible-change",!1)}return Rr(b2,{contentRef:o,role:oe(()=>t.role),triggerId:I,isUsingKeyboard:A,onItemEnter:G,onItemLeave:W}),Rr("elDropdown",{instance:n,dropdownSize:V,handleClick:P,commandHandler:H,trigger:Io(t,"trigger"),hideOnClick:Io(t,"hideOnClick")}),{t:i,ns:r,scrollbar:d,wrapStyle:y,dropdownTriggerKls:C,dropdownSize:V,triggerId:I,triggerKeys:v,currentTabId:p,handleCurrentTabIdChange:te,handlerMainButtonClick:ie=>{e("click",ie)},handleEntryFocus:q,handleClose:F,handleOpen:D,handleBeforeShowTooltip:Y,handleShowTooltip:ee,handleBeforeHideTooltip:ce,onFocusAfterTrapped:ie=>{var pe,ue;ie.preventDefault(),(ue=(pe=o.value)==null?void 0:pe.focus)==null||ue.call(pe,{preventScroll:!0})},popperRef:l,contentRef:o,triggeringElementRef:s,referenceElementRef:a}}});function pVe(t,e,n,r,i,s){var a;const l=ui("el-dropdown-collection"),o=ui("el-roving-focus-group"),d=ui("el-scrollbar"),p=ui("el-only-child"),A=ui("el-tooltip"),v=ui("el-button"),y=ui("arrow-down"),C=ui("el-icon"),x=ui("el-button-group");return ve(),Ue("div",{class:xe([t.ns.b(),t.ns.is("disabled",t.disabled)])},[pt(A,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(a=t.referenceElementRef)==null?void 0:a.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:"",onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},Gv({content:It(()=>[pt(d,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:It(()=>[pt(o,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:It(()=>[pt(l,null,{default:It(()=>[kt(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:It(()=>[pt(p,{id:t.triggerId,ref:"triggeringElementRef",role:"button",tabindex:t.tabindex},{default:It(()=>[kt(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?(ve(),qt(x,{key:0},{default:It(()=>[pt(v,Gi({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:It(()=>[kt(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),pt(v,Gi({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:It(()=>[pt(C,{class:xe(t.ns.e("icon"))},{default:It(()=>[pt(y)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):wt("v-if",!0)],2)}var AVe=Fn(fVe,[["render",pVe],["__file","dropdown.vue"]]);const gVe=Ge({name:"DropdownItemImpl",components:{ElIcon:mr},props:Jue,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:e}){const n=_n("dropdown"),{role:r}=mn(b2,void 0),{collectionItemRef:i}=mn(hVe,void 0),{collectionItemRef:s}=mn(G$e,void 0),{rovingFocusGroupItemRef:a,tabIndex:l,handleFocus:o,handleKeydown:d,handleMousedown:p}=mn(Zue,void 0),A=u2(i,s,a),v=oe(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),y=Wa(C=>{const{code:x}=C;if(x===Fr.enter||x===Fr.space)return C.preventDefault(),C.stopImmediatePropagation(),e("clickimpl",C),!0},d);return{ns:n,itemRef:A,dataset:{[Yue]:""},role:v,tabIndex:l,handleFocus:o,handleKeydown:y,handleMousedown:p}}}),mVe=["aria-disabled","tabindex","role"];function vVe(t,e,n,r,i,s){const a=ui("el-icon");return ve(),Ue(_r,null,[t.divided?(ve(),Ue("li",Gi({key:0,role:"separator",class:t.ns.bem("menu","item","divided")},t.$attrs),null,16)):wt("v-if",!0),rt("li",Gi({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:e[0]||(e[0]=l=>t.$emit("clickimpl",l)),onFocus:e[1]||(e[1]=(...l)=>t.handleFocus&&t.handleFocus(...l)),onKeydown:e[2]||(e[2]=qr((...l)=>t.handleKeydown&&t.handleKeydown(...l),["self"])),onMousedown:e[3]||(e[3]=(...l)=>t.handleMousedown&&t.handleMousedown(...l)),onPointermove:e[4]||(e[4]=l=>t.$emit("pointermove",l)),onPointerleave:e[5]||(e[5]=l=>t.$emit("pointerleave",l))}),[t.icon?(ve(),qt(a,{key:0},{default:It(()=>[(ve(),qt(Mi(t.icon)))]),_:1})):wt("v-if",!0),kt(t.$slots,"default")],16,mVe)],64)}var yVe=Fn(gVe,[["render",vVe],["__file","dropdown-item-impl.vue"]]);const the=()=>{const t=mn("elDropdown",{}),e=oe(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:e}},_Ve=Ge({name:"ElDropdownItem",components:{ElDropdownCollectionItem:cVe,ElRovingFocusItem:iVe,ElDropdownItemImpl:yVe},inheritAttrs:!1,props:Jue,emits:["pointermove","pointerleave","click"],setup(t,{emit:e,attrs:n}){const{elDropdown:r}=the(),i=mi(),s=Me(null),a=oe(()=>{var y,C;return(C=(y=T(s))==null?void 0:y.textContent)!=null?C:""}),{onItemEnter:l,onItemLeave:o}=mn(b2,void 0),d=Wa(y=>(e("pointermove",y),y.defaultPrevented),$Y(y=>{if(t.disabled){o(y);return}const C=y.currentTarget;C===document.activeElement||C.contains(document.activeElement)||(l(y),y.defaultPrevented||C==null||C.focus())})),p=Wa(y=>(e("pointerleave",y),y.defaultPrevented),$Y(y=>{o(y)})),A=Wa(y=>{if(!t.disabled)return e("click",y),y.type!=="keydown"&&y.defaultPrevented},y=>{var C,x,M;if(t.disabled){y.stopImmediatePropagation();return}(C=r==null?void 0:r.hideOnClick)!=null&&C.value&&((x=r.handleClick)==null||x.call(r)),(M=r.commandHandler)==null||M.call(r,t.command,i,y)}),v=oe(()=>({...t,...n}));return{handleClick:A,handlePointerMove:d,handlePointerLeave:p,textContent:a,propsAndAttrs:v}}});function bVe(t,e,n,r,i,s){var a;const l=ui("el-dropdown-item-impl"),o=ui("el-roving-focus-item"),d=ui("el-dropdown-collection-item");return ve(),qt(d,{disabled:t.disabled,"text-value":(a=t.textValue)!=null?a:t.textContent},{default:It(()=>[pt(o,{focusable:!t.disabled},{default:It(()=>[pt(l,Gi(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:It(()=>[kt(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var nhe=Fn(_Ve,[["render",bVe],["__file","dropdown-item.vue"]]);const wVe=Ge({name:"ElDropdownMenu",props:sVe,setup(t){const e=_n("dropdown"),{_elDropdownSize:n}=the(),r=n.value,{focusTrapRef:i,onKeydown:s}=mn(oH,void 0),{contentRef:a,role:l,triggerId:o}=mn(b2,void 0),{collectionRef:d,getItems:p}=mn(uVe,void 0),{rovingFocusGroupRef:A,rovingFocusGroupRootStyle:v,tabIndex:y,onBlur:C,onFocus:x,onMousedown:M}=mn(vH,void 0),{collectionRef:I}=mn(mH,void 0),P=oe(()=>[e.b("menu"),e.bm("menu",r==null?void 0:r.value)]),F=u2(a,d,i,A,I),D=Wa(H=>{var Q;(Q=t.onKeydown)==null||Q.call(t,H)},H=>{const{currentTarget:Q,code:G,target:W}=H;if(Q.contains(W),Fr.tab===G&&H.stopImmediatePropagation(),H.preventDefault(),W!==T(a)||!aVe.includes(G))return;const q=p().filter(Y=>!Y.disabled).map(Y=>Y.ref);ehe.includes(G)&&q.reverse(),yH(q)});return{size:r,rovingFocusGroupRootStyle:v,tabIndex:y,dropdownKls:P,role:l,triggerId:o,dropdownListWrapperRef:F,handleKeydown:H=>{D(H),s(H)},onBlur:C,onFocus:x,onMousedown:M}}}),xVe=["role","aria-labelledby"];function CVe(t,e,n,r,i,s){return ve(),Ue("ul",{ref:t.dropdownListWrapperRef,class:xe(t.dropdownKls),style:vr(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:e[0]||(e[0]=(...a)=>t.onBlur&&t.onBlur(...a)),onFocus:e[1]||(e[1]=(...a)=>t.onFocus&&t.onFocus(...a)),onKeydown:e[2]||(e[2]=qr((...a)=>t.handleKeydown&&t.handleKeydown(...a),["self"])),onMousedown:e[3]||(e[3]=qr((...a)=>t.onMousedown&&t.onMousedown(...a),["self"]))},[kt(t.$slots,"default")],46,xVe)}var rhe=Fn(wVe,[["render",CVe],["__file","dropdown-menu.vue"]]);const EVe=_i(AVe,{DropdownItem:nhe,DropdownMenu:rhe}),SVe=Pa(nhe),TVe=Pa(rhe),IVe={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},BVe=["id"],MVe=["stop-color"],LVe=["stop-color"],RVe=["id"],PVe=["stop-color"],FVe=["stop-color"],OVe=["id"],NVe={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},kVe={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},DVe={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},UVe=["fill"],zVe=["fill"],$Ve={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},VVe=["fill"],HVe=["fill"],GVe=["fill"],QVe=["fill"],jVe=["fill"],KVe={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},WVe=["fill","xlink:href"],qVe=["fill","mask"],YVe=["fill"],XVe=Ge({name:"ImgEmpty"}),ZVe=Ge({...XVe,setup(t){const e=_n("empty"),n=Hu();return(r,i)=>(ve(),Ue("svg",IVe,[rt("defs",null,[rt("linearGradient",{id:`linearGradient-1-${T(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[rt("stop",{"stop-color":`var(${T(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,MVe),rt("stop",{"stop-color":`var(${T(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,LVe)],8,BVe),rt("linearGradient",{id:`linearGradient-2-${T(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[rt("stop",{"stop-color":`var(${T(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,PVe),rt("stop",{"stop-color":`var(${T(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,FVe)],8,RVe),rt("rect",{id:`path-3-${T(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,OVe)]),rt("g",NVe,[rt("g",kVe,[rt("g",DVe,[rt("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${T(e).cssVarBlockName("fill-color-3")})`},null,8,UVe),rt("polygon",{id:"Rectangle-Copy-14",fill:`var(${T(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,zVe),rt("g",$Ve,[rt("polygon",{id:"Rectangle-Copy-10",fill:`var(${T(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,VVe),rt("polygon",{id:"Rectangle-Copy-11",fill:`var(${T(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,HVe),rt("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${T(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,GVe),rt("polygon",{id:"Rectangle-Copy-13",fill:`var(${T(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,QVe)]),rt("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${T(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,jVe),rt("g",KVe,[rt("use",{id:"Mask",fill:`var(${T(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${T(n)}`},null,8,WVe),rt("polygon",{id:"Rectangle-Copy",fill:`var(${T(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${T(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,qVe)]),rt("polygon",{id:"Rectangle-Copy-18",fill:`var(${T(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,YVe)])])])]))}});var JVe=Fn(ZVe,[["__file","img-empty.vue"]]);const eHe=Ln({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),tHe=["src"],nHe={key:1},rHe=Ge({name:"ElEmpty"}),iHe=Ge({...rHe,props:eHe,setup(t){const e=t,{t:n}=Ts(),r=_n("empty"),i=oe(()=>e.description||n("el.table.emptyText")),s=oe(()=>({width:Ja(e.imageSize)}));return(a,l)=>(ve(),Ue("div",{class:xe(T(r).b())},[rt("div",{class:xe(T(r).e("image")),style:vr(T(s))},[a.image?(ve(),Ue("img",{key:0,src:a.image,ondragstart:"return false"},null,8,tHe)):kt(a.$slots,"image",{key:1},()=>[pt(JVe)])],6),rt("div",{class:xe(T(r).e("description"))},[a.$slots.description?kt(a.$slots,"description",{key:0}):(ve(),Ue("p",nHe,Nn(T(i)),1))],2),a.$slots.default?(ve(),Ue("div",{key:0,class:xe(T(r).e("bottom"))},[kt(a.$slots,"default")],2)):wt("v-if",!0)],2))}});var sHe=Fn(iHe,[["__file","empty.vue"]]);const ihe=_i(sHe),oHe=Ln({urlList:{type:Mt(Array),default:()=>Ba([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Mt(String)}}),aHe={close:()=>!0,switch:t=>Hr(t),rotate:t=>Hr(t)},lHe=["src","crossorigin"],cHe=Ge({name:"ElImageViewer"}),uHe=Ge({...cHe,props:oHe,emits:aHe,setup(t,{expose:e,emit:n}){var r;const i=t,s={CONTAIN:{name:"contain",icon:sC(wFe)},ORIGINAL:{name:"original",icon:sC(VFe)}},{t:a}=Ts(),l=_n("image-viewer"),{nextZIndex:o}=SE(),d=Me(),p=Me([]),A=ywe(),v=Me(!0),y=Me(i.initialIndex),C=Ds(s.CONTAIN),x=Me({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),M=Me((r=i.zIndex)!=null?r:o()),I=oe(()=>{const{urlList:me}=i;return me.length<=1}),P=oe(()=>y.value===0),F=oe(()=>y.value===i.urlList.length-1),D=oe(()=>i.urlList[y.value]),V=oe(()=>[l.e("btn"),l.e("prev"),l.is("disabled",!i.infinite&&P.value)]),H=oe(()=>[l.e("btn"),l.e("next"),l.is("disabled",!i.infinite&&F.value)]),Q=oe(()=>{const{scale:me,deg:Le,offsetX:ae,offsetY:be,enableTransition:_e}=x.value;let $e=ae/me,Re=be/me;switch(Le%360){case 90:case-270:[$e,Re]=[Re,-$e];break;case 180:case-180:[$e,Re]=[-$e,-Re];break;case 270:case-90:[$e,Re]=[-Re,$e];break}const Ie={transform:`scale(${me}) rotate(${Le}deg) translate(${$e}px, ${Re}px)`,transition:_e?"transform .3s":""};return C.value.name===s.CONTAIN.name&&(Ie.maxWidth=Ie.maxHeight="100%"),Ie});function G(){te(),n("close")}function W(){const me=eb(ae=>{switch(ae.code){case Fr.esc:i.closeOnPressEscape&&G();break;case Fr.space:se();break;case Fr.left:ie();break;case Fr.up:ue("zoomIn");break;case Fr.right:pe();break;case Fr.down:ue("zoomOut");break}}),Le=eb(ae=>{const be=ae.deltaY||ae.deltaX;ue(be<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});A.run(()=>{Vo(document,"keydown",me),Vo(document,"wheel",Le)})}function te(){A.stop()}function q(){v.value=!1}function Y(me){v.value=!1,me.target.alt=a("el.image.error")}function ee(me){if(v.value||me.button!==0||!d.value)return;x.value.enableTransition=!1;const{offsetX:Le,offsetY:ae}=x.value,be=me.pageX,_e=me.pageY,$e=eb(Ie=>{x.value={...x.value,offsetX:Le+Ie.pageX-be,offsetY:ae+Ie.pageY-_e}}),Re=Vo(document,"mousemove",$e);Vo(document,"mouseup",()=>{Re()}),me.preventDefault()}function ce(){x.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function se(){if(v.value)return;const me=DC(s),Le=Object.values(s),ae=C.value.name,_e=(Le.findIndex($e=>$e.name===ae)+1)%me.length;C.value=s[me[_e]],ce()}function le(me){const Le=i.urlList.length;y.value=(me+Le)%Le}function ie(){P.value&&!i.infinite||le(y.value-1)}function pe(){F.value&&!i.infinite||le(y.value+1)}function ue(me,Le={}){if(v.value)return;const{minScale:ae,maxScale:be}=i,{zoomRate:_e,rotateDeg:$e,enableTransition:Re}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...Le};switch(me){case"zoomOut":x.value.scale>ae&&(x.value.scale=Number.parseFloat((x.value.scale/_e).toFixed(3)));break;case"zoomIn":x.value.scale<be&&(x.value.scale=Number.parseFloat((x.value.scale*_e).toFixed(3)));break;case"clockwise":x.value.deg+=$e,n("rotate",x.value.deg);break;case"anticlockwise":x.value.deg-=$e,n("rotate",x.value.deg);break}x.value.enableTransition=Re}return zt(D,()=>{Tr(()=>{const me=p.value[0];me!=null&&me.complete||(v.value=!0)})}),zt(y,me=>{ce(),n("switch",me)}),dr(()=>{var me,Le;W(),(Le=(me=d.value)==null?void 0:me.focus)==null||Le.call(me)}),e({setActiveItem:le}),(me,Le)=>(ve(),qt(yE,{to:"body",disabled:!me.teleported},[pt(fc,{name:"viewer-fade",appear:""},{default:It(()=>[rt("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:xe(T(l).e("wrapper")),style:vr({zIndex:M.value})},[rt("div",{class:xe(T(l).e("mask")),onClick:Le[0]||(Le[0]=qr(ae=>me.hideOnClickModal&&G(),["self"]))},null,2),wt(" CLOSE "),rt("span",{class:xe([T(l).e("btn"),T(l).e("close")]),onClick:G},[pt(T(mr),null,{default:It(()=>[pt(T(NA))]),_:1})],2),wt(" ARROW "),T(I)?wt("v-if",!0):(ve(),Ue(_r,{key:0},[rt("span",{class:xe(T(V)),onClick:ie},[pt(T(mr),null,{default:It(()=>[pt(T(r_))]),_:1})],2),rt("span",{class:xe(T(H)),onClick:pe},[pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})],2)],64)),wt(" ACTIONS "),rt("div",{class:xe([T(l).e("btn"),T(l).e("actions")])},[rt("div",{class:xe(T(l).e("actions__inner"))},[pt(T(mr),{onClick:Le[1]||(Le[1]=ae=>ue("zoomOut"))},{default:It(()=>[pt(T(iOe))]),_:1}),pt(T(mr),{onClick:Le[2]||(Le[2]=ae=>ue("zoomIn"))},{default:It(()=>[pt(T(Ole))]),_:1}),rt("i",{class:xe(T(l).e("actions__divider"))},null,2),pt(T(mr),{onClick:se},{default:It(()=>[(ve(),qt(Mi(T(C).icon)))]),_:1}),rt("i",{class:xe(T(l).e("actions__divider"))},null,2),pt(T(mr),{onClick:Le[3]||(Le[3]=ae=>ue("anticlockwise"))},{default:It(()=>[pt(T(DFe))]),_:1}),pt(T(mr),{onClick:Le[4]||(Le[4]=ae=>ue("clockwise"))},{default:It(()=>[pt(T(zFe))]),_:1})],2)],2),wt(" CANVAS "),rt("div",{class:xe(T(l).e("canvas"))},[(ve(!0),Ue(_r,null,cs(me.urlList,(ae,be)=>ci((ve(),Ue("img",{ref_for:!0,ref:_e=>p.value[be]=_e,key:ae,src:ae,style:vr(T(Q)),class:xe(T(l).e("img")),crossorigin:me.crossorigin,onLoad:q,onError:Y,onMousedown:ee},null,46,lHe)),[[Hs,be===y.value]])),128))],2),kt(me.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var hHe=Fn(uHe,[["__file","image-viewer.vue"]]);const she=_i(hHe),dHe=Ln({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Mt([String,Object])},previewSrcList:{type:Mt(Array),default:()=>Ba([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Mt(String)}}),fHe={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>Hr(t),close:()=>!0,show:()=>!0},pHe=["src","loading","crossorigin"],AHe={key:0},gHe=Ge({name:"ElImage",inheritAttrs:!1}),mHe=Ge({...gHe,props:dHe,emits:fHe,setup(t,{emit:e}){const n=t;let r="";const{t:i}=Ts(),s=_n("image"),a=Ra(),l=NV(),o=Me(),d=Me(!1),p=Me(!0),A=Me(!1),v=Me(),y=Me(),C=As&&"loading"in HTMLImageElement.prototype;let x,M;const I=oe(()=>[s.e("inner"),D.value&&s.e("preview"),p.value&&s.is("loading")]),P=oe(()=>a.style),F=oe(()=>{const{fit:pe}=n;return As&&pe?{objectFit:pe}:{}}),D=oe(()=>{const{previewSrcList:pe}=n;return Array.isArray(pe)&&pe.length>0}),V=oe(()=>{const{previewSrcList:pe,initialIndex:ue}=n;let me=ue;return ue>pe.length-1&&(me=0),me}),H=oe(()=>n.loading==="eager"?!1:!C&&n.loading==="lazy"||n.lazy),Q=()=>{As&&(p.value=!0,d.value=!1,o.value=n.src)};function G(pe){p.value=!1,d.value=!1,e("load",pe)}function W(pe){p.value=!1,d.value=!0,e("error",pe)}function te(){mIe(v.value,y.value)&&(Q(),ee())}const q=kae(te,200,!0);async function Y(){var pe;if(!As)return;await Tr();const{scrollContainer:ue}=n;Ep(ue)?y.value=ue:Xr(ue)&&ue!==""?y.value=(pe=document.querySelector(ue))!=null?pe:void 0:v.value&&(y.value=TV(v.value)),y.value&&(x=Vo(y,"scroll",q),setTimeout(()=>te(),100))}function ee(){!As||!y.value||!q||(x==null||x(),y.value=void 0)}function ce(pe){if(pe.ctrlKey){if(pe.deltaY<0)return pe.preventDefault(),!1;if(pe.deltaY>0)return pe.preventDefault(),!1}}function se(){D.value&&(M=Vo("wheel",ce,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",A.value=!0,e("show"))}function le(){M==null||M(),document.body.style.overflow=r,A.value=!1,e("close")}function ie(pe){e("switch",pe)}return zt(()=>n.src,()=>{H.value?(p.value=!0,d.value=!1,ee(),Y()):Q()}),dr(()=>{H.value?Y():Q()}),(pe,ue)=>(ve(),Ue("div",{ref_key:"container",ref:v,class:xe([T(s).b(),pe.$attrs.class]),style:vr(T(P))},[d.value?kt(pe.$slots,"error",{key:0},()=>[rt("div",{class:xe(T(s).e("error"))},Nn(T(i)("el.image.error")),3)]):(ve(),Ue(_r,{key:1},[o.value!==void 0?(ve(),Ue("img",Gi({key:0},T(l),{src:o.value,loading:pe.loading,style:T(F),class:T(I),crossorigin:pe.crossorigin,onClick:se,onLoad:G,onError:W}),null,16,pHe)):wt("v-if",!0),p.value?(ve(),Ue("div",{key:1,class:xe(T(s).e("wrapper"))},[kt(pe.$slots,"placeholder",{},()=>[rt("div",{class:xe(T(s).e("placeholder"))},null,2)])],2)):wt("v-if",!0)],64)),T(D)?(ve(),Ue(_r,{key:2},[A.value?(ve(),qt(T(she),{key:0,"z-index":pe.zIndex,"initial-index":T(V),infinite:pe.infinite,"zoom-rate":pe.zoomRate,"min-scale":pe.minScale,"max-scale":pe.maxScale,"url-list":pe.previewSrcList,"hide-on-click-modal":pe.hideOnClickModal,teleported:pe.previewTeleported,"close-on-press-escape":pe.closeOnPressEscape,onClose:le,onSwitch:ie},{default:It(()=>[pe.$slots.viewer?(ve(),Ue("div",AHe,[kt(pe.$slots,"viewer")])):wt("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):wt("v-if",!0)],64)):wt("v-if",!0)],6))}});var vHe=Fn(mHe,[["__file","image.vue"]]);const yHe=_i(vHe),_He=Ln({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Nc,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||Hr(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0},...Eu(["ariaLabel"])}),bHe={[Qo]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[zh]:t=>Hr(t)||eu(t),[Si]:t=>Hr(t)||eu(t)},wHe=["aria-label","onKeydown"],xHe=["aria-label","onKeydown"],CHe=Ge({name:"ElInputNumber"}),EHe=Ge({...CHe,props:_He,emits:bHe,setup(t,{expose:e,emit:n}){const r=t,{t:i}=Ts(),s=_n("input-number"),a=Me(),l=Xs({currentValue:r.modelValue,userInput:null}),{formItem:o}=bh(),d=oe(()=>Hr(r.modelValue)&&r.modelValue<=r.min),p=oe(()=>Hr(r.modelValue)&&r.modelValue>=r.max),A=oe(()=>{const se=I(r.step);return Cl(r.precision)?Math.max(I(r.modelValue),se):(se>r.precision,r.precision)}),v=oe(()=>r.controls&&r.controlsPosition==="right"),y=Gl(),C=jh(),x=oe(()=>{if(l.userInput!==null)return l.userInput;let se=l.currentValue;if(eu(se))return"";if(Hr(se)){if(Number.isNaN(se))return"";Cl(r.precision)||(se=se.toFixed(r.precision))}return se}),M=(se,le)=>{if(Cl(le)&&(le=A.value),le===0)return Math.round(se);let ie=String(se);const pe=ie.indexOf(".");if(pe===-1||!ie.replace(".","").split("")[pe+le])return se;const Le=ie.length;return ie.charAt(Le-1)==="5"&&(ie=`${ie.slice(0,Math.max(0,Le-1))}6`),Number.parseFloat(Number(ie).toFixed(le))},I=se=>{if(eu(se))return 0;const le=se.toString(),ie=le.indexOf(".");let pe=0;return ie!==-1&&(pe=le.length-ie-1),pe},P=(se,le=1)=>Hr(se)?M(se+r.step*le):l.currentValue,F=()=>{if(r.readonly||C.value||p.value)return;const se=Number(x.value)||0,le=P(se);H(le),n(zh,l.currentValue),ee()},D=()=>{if(r.readonly||C.value||d.value)return;const se=Number(x.value)||0,le=P(se,-1);H(le),n(zh,l.currentValue),ee()},V=(se,le)=>{const{max:ie,min:pe,step:ue,precision:me,stepStrictly:Le,valueOnClear:ae}=r;ie<pe&&pc("InputNumber","min should not be greater than max.");let be=Number(se);if(eu(se)||Number.isNaN(be))return null;if(se===""){if(ae===null)return null;be=Xr(ae)?{min:pe,max:ie}[ae]:ae}return Le&&(be=M(Math.round(be/ue)*ue,me)),Cl(me)||(be=M(be,me)),(be>ie||be<pe)&&(be=be>ie?ie:pe,le&&n(Si,be)),be},H=(se,le=!0)=>{var ie;const pe=l.currentValue,ue=V(se);if(!le){n(Si,ue);return}pe===ue&&se||(l.userInput=null,n(Si,ue),pe!==ue&&n(Qo,ue,pe),r.validateEvent&&((ie=o==null?void 0:o.validate)==null||ie.call(o,"change").catch(me=>void 0)),l.currentValue=ue)},Q=se=>{l.userInput=se;const le=se===""?null:Number(se);n(zh,le),H(le,!1)},G=se=>{const le=se!==""?Number(se):"";(Hr(le)&&!Number.isNaN(le)||se==="")&&H(le),ee(),l.userInput=null},W=()=>{var se,le;(le=(se=a.value)==null?void 0:se.focus)==null||le.call(se)},te=()=>{var se,le;(le=(se=a.value)==null?void 0:se.blur)==null||le.call(se)},q=se=>{n("focus",se)},Y=se=>{var le;l.userInput=null,n("blur",se),r.validateEvent&&((le=o==null?void 0:o.validate)==null||le.call(o,"blur").catch(ie=>void 0))},ee=()=>{l.currentValue!==r.modelValue&&(l.currentValue=r.modelValue)},ce=se=>{document.activeElement===se.target&&se.preventDefault()};return zt(()=>r.modelValue,(se,le)=>{const ie=V(se,!0);l.userInput===null&&ie!==le&&(l.currentValue=ie)},{immediate:!0}),dr(()=>{var se;const{min:le,max:ie,modelValue:pe}=r,ue=(se=a.value)==null?void 0:se.input;if(ue.setAttribute("role","spinbutton"),Number.isFinite(ie)?ue.setAttribute("aria-valuemax",String(ie)):ue.removeAttribute("aria-valuemax"),Number.isFinite(le)?ue.setAttribute("aria-valuemin",String(le)):ue.removeAttribute("aria-valuemin"),ue.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),ue.setAttribute("aria-disabled",String(C.value)),!Hr(pe)&&pe!=null){let me=Number(pe);Number.isNaN(me)&&(me=null),n(Si,me)}ue.addEventListener("wheel",ce,{passive:!1})}),o0(()=>{var se,le;const ie=(se=a.value)==null?void 0:se.input;ie==null||ie.setAttribute("aria-valuenow",`${(le=l.currentValue)!=null?le:""}`)}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},oe(()=>!!r.label)),e({focus:W,blur:te}),(se,le)=>(ve(),Ue("div",{class:xe([T(s).b(),T(s).m(T(y)),T(s).is("disabled",T(C)),T(s).is("without-controls",!se.controls),T(s).is("controls-right",T(v))]),onDragstart:le[0]||(le[0]=qr(()=>{},["prevent"]))},[se.controls?ci((ve(),Ue("span",{key:0,role:"button","aria-label":T(i)("el.inputNumber.decrease"),class:xe([T(s).e("decrease"),T(s).is("disabled",T(d))]),onKeydown:bo(D,["enter"])},[kt(se.$slots,"decrease-icon",{},()=>[pt(T(mr),null,{default:It(()=>[T(v)?(ve(),qt(T(u0),{key:0})):(ve(),qt(T(IFe),{key:1}))]),_:1})])],42,wHe)),[[T(pO),D]]):wt("v-if",!0),se.controls?ci((ve(),Ue("span",{key:1,role:"button","aria-label":T(i)("el.inputNumber.increase"),class:xe([T(s).e("increase"),T(s).is("disabled",T(p))]),onKeydown:bo(F,["enter"])},[kt(se.$slots,"increase-icon",{},()=>[pt(T(mr),null,{default:It(()=>[T(v)?(ve(),qt(T(IV),{key:0})):(ve(),qt(T(Ple),{key:1}))]),_:1})])],42,xHe)),[[T(pO),F]]):wt("v-if",!0),pt(T(mh),{id:se.id,ref_key:"input",ref:a,type:"number",step:se.step,"model-value":T(x),placeholder:se.placeholder,readonly:se.readonly,disabled:T(C),size:T(y),max:se.max,min:se.min,name:se.name,"aria-label":se.label||se.ariaLabel,"validate-event":!1,onKeydown:[bo(qr(F,["prevent"]),["up"]),bo(qr(D,["prevent"]),["down"])],onBlur:Y,onFocus:q,onInput:Q,onChange:G},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}});var SHe=Fn(EHe,[["__file","input-number.vue"]]);const ohe=_i(SHe),THe=Ln({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:wo}}),IHe={click:t=>t instanceof MouseEvent},BHe=["href","target"],MHe=Ge({name:"ElLink"}),LHe=Ge({...MHe,props:THe,emits:IHe,setup(t,{emit:e}){const n=t,r=_n("link"),i=oe(()=>[r.b(),r.m(n.type),r.is("disabled",n.disabled),r.is("underline",n.underline&&!n.disabled)]);function s(a){n.disabled||e("click",a)}return(a,l)=>(ve(),Ue("a",{class:xe(T(i)),href:a.disabled||!a.href?void 0:a.href,target:a.disabled||!a.href?void 0:a.target,onClick:s},[a.icon?(ve(),qt(T(mr),{key:0},{default:It(()=>[(ve(),qt(Mi(a.icon)))]),_:1})):wt("v-if",!0),a.$slots.default?(ve(),Ue("span",{key:1,class:xe(T(r).e("inner"))},[kt(a.$slots,"default")],2)):wt("v-if",!0),a.$slots.icon?kt(a.$slots,"icon",{key:2}):wt("v-if",!0)],10,BHe))}});var RHe=Fn(LHe,[["__file","link.vue"]]);const PHe=_i(RHe);let FHe=class{constructor(e,n){this.parent=e,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",r=>{let i=!1;switch(r.code){case Fr.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case Fr.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case Fr.tab:{XP(e,"mouseleave");break}case Fr.enter:case Fr.space:{i=!0,r.currentTarget.click();break}}return i&&(r.preventDefault(),r.stopPropagation()),!1})})}},OHe=class{constructor(e,n){this.domNode=e,this.submenu=null,this.submenu=null,this.init(n)}init(e){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${e}-menu`);n&&(this.submenu=new FHe(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let n=!1;switch(e.code){case Fr.down:{XP(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case Fr.up:{XP(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case Fr.tab:{XP(e.currentTarget,"mouseleave");break}case Fr.enter:case Fr.space:{n=!0,e.currentTarget.click();break}}n&&e.preventDefault()})}},NHe=class{constructor(e,n){this.domNode=e,this.init(n)}init(e){const n=this.domNode.childNodes;Array.from(n).forEach(r=>{r.nodeType===1&&new OHe(r,e)})}};const kHe=Ge({name:"ElMenuCollapseTransition",setup(){const t=_n("menu");return{listeners:{onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,r){pp(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",r()},onAfterEnter(n){yh(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),bp(n,t.m("collapse"))?(yh(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),pp(n,t.m("collapse"))):(pp(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),yh(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){pp(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}}}}});function DHe(t,e,n,r,i,s){return ve(),qt(fc,Gi({mode:"out-in"},t.listeners),{default:It(()=>[kt(t.$slots,"default")]),_:3},16)}var UHe=Fn(kHe,[["render",DHe],["__file","menu-collapse-transition.vue"]]);function ahe(t,e){const n=oe(()=>{let i=t.parent;const s=[e.value];for(;i.type.name!=="ElMenu";)i.props.index&&s.unshift(i.props.index),i=i.parent;return s});return{parentMenu:oe(()=>{let i=t.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:n}}function zHe(t){return oe(()=>{const n=t.backgroundColor;return n?new Uce(n).shade(20).toString():""})}const lhe=(t,e)=>{const n=_n("menu");return oe(()=>n.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":zHe(t).value||"","active-color":t.activeTextColor||"",level:`${e}`}))},$He=Ln({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:wo},expandOpenIcon:{type:wo},collapseCloseIcon:{type:wo},collapseOpenIcon:{type:wo}}),JD="ElSubMenu";var _H=Ge({name:JD,props:$He,setup(t,{slots:e,expose:n}){const r=mi(),{indexPath:i,parentMenu:s}=ahe(r,oe(()=>t.index)),a=_n("menu"),l=_n("sub-menu"),o=mn("rootMenu");o||pc(JD,"can not inject root menu");const d=mn(`subMenu:${s.value.uid}`);d||pc(JD,"can not inject sub menu");const p=Me({}),A=Me({});let v;const y=Me(!1),C=Me(),x=Me(null),M=oe(()=>G.value==="horizontal"&&P.value?"bottom-start":"right-start"),I=oe(()=>G.value==="horizontal"&&P.value||G.value==="vertical"&&!o.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?H.value?t.expandOpenIcon:t.expandCloseIcon:u0:t.collapseCloseIcon&&t.collapseOpenIcon?H.value?t.collapseOpenIcon:t.collapseCloseIcon:Uh),P=oe(()=>d.level===0),F=oe(()=>{const me=t.teleported;return me===void 0?P.value:me}),D=oe(()=>o.props.collapse?`${a.namespace.value}-zoom-in-left`:`${a.namespace.value}-zoom-in-top`),V=oe(()=>G.value==="horizontal"&&P.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),H=oe(()=>o.openedMenus.includes(t.index)),Q=oe(()=>{let me=!1;return Object.values(p.value).forEach(Le=>{Le.active&&(me=!0)}),Object.values(A.value).forEach(Le=>{Le.active&&(me=!0)}),me}),G=oe(()=>o.props.mode),W=Xs({index:t.index,indexPath:i,active:Q}),te=lhe(o.props,d.level+1),q=oe(()=>{var me;return(me=t.popperOffset)!=null?me:o.props.popperOffset}),Y=oe(()=>{var me;return(me=t.popperClass)!=null?me:o.props.popperClass}),ee=oe(()=>{var me;return(me=t.showTimeout)!=null?me:o.props.showTimeout}),ce=oe(()=>{var me;return(me=t.hideTimeout)!=null?me:o.props.hideTimeout}),se=()=>{var me,Le,ae;return(ae=(Le=(me=x.value)==null?void 0:me.popperRef)==null?void 0:Le.popperInstanceRef)==null?void 0:ae.destroy()},le=me=>{me||se()},ie=()=>{o.props.menuTrigger==="hover"&&o.props.mode==="horizontal"||o.props.collapse&&o.props.mode==="vertical"||t.disabled||o.handleSubMenuClick({index:t.index,indexPath:i.value,active:Q.value})},pe=(me,Le=ee.value)=>{var ae;if(me.type!=="focus"){if(o.props.menuTrigger==="click"&&o.props.mode==="horizontal"||!o.props.collapse&&o.props.mode==="vertical"||t.disabled){d.mouseInChild.value=!0;return}d.mouseInChild.value=!0,v==null||v(),{stop:v}=_b(()=>{o.openMenu(t.index,i.value)},Le),F.value&&((ae=s.value.vnode.el)==null||ae.dispatchEvent(new MouseEvent("mouseenter")))}},ue=(me=!1)=>{var Le;if(o.props.menuTrigger==="click"&&o.props.mode==="horizontal"||!o.props.collapse&&o.props.mode==="vertical"){d.mouseInChild.value=!1;return}v==null||v(),d.mouseInChild.value=!1,{stop:v}=_b(()=>!y.value&&o.closeMenu(t.index,i.value),ce.value),F.value&&me&&((Le=d.handleMouseleave)==null||Le.call(d,!0))};zt(()=>o.props.collapse,me=>le(!!me));{const me=ae=>{A.value[ae.index]=ae},Le=ae=>{delete A.value[ae.index]};Rr(`subMenu:${r.uid}`,{addSubMenu:me,removeSubMenu:Le,handleMouseleave:ue,mouseInChild:y,level:d.level+1})}return n({opened:H}),dr(()=>{o.addSubMenu(W),d.addSubMenu(W)}),Do(()=>{d.removeSubMenu(W),o.removeSubMenu(W)}),()=>{var me;const Le=[(me=e.title)==null?void 0:me.call(e),Br(mr,{class:l.e("icon-arrow"),style:{transform:H.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&o.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Xr(I.value)?Br(r.appContext.components[I.value]):Br(I.value)})],ae=o.isMenuPopup?Br(_h,{ref:x,visible:H.value,effect:"light",pure:!0,offset:q.value,showArrow:!1,persistent:!0,popperClass:Y.value,placement:M.value,teleported:F.value,fallbackPlacements:V.value,transition:D.value,gpuAcceleration:!1},{content:()=>{var be;return Br("div",{class:[a.m(G.value),a.m("popup-container"),Y.value],onMouseenter:_e=>pe(_e,100),onMouseleave:()=>ue(!0),onFocus:_e=>pe(_e,100)},[Br("ul",{class:[a.b(),a.m("popup"),a.m(`popup-${M.value}`)],style:te.value},[(be=e.default)==null?void 0:be.call(e)])])},default:()=>Br("div",{class:l.e("title"),onClick:ie},Le)}):Br(_r,{},[Br("div",{class:l.e("title"),ref:C,onClick:ie},Le),Br(_2,{},{default:()=>{var be;return ci(Br("ul",{role:"menu",class:[a.b(),a.m("inline")],style:te.value},[(be=e.default)==null?void 0:be.call(e)]),[[Hs,H.value]])}})]);return Br("li",{class:[l.b(),l.is("active",Q.value),l.is("opened",H.value),l.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:H.value,onMouseenter:pe,onMouseleave:()=>ue(),onFocus:pe},[ae])}}});const VHe=Ln({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Mt(Array),default:()=>Ba([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:wo,default:()=>LFe},popperEffect:{type:String,values:["dark","light"],default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),e4=t=>Array.isArray(t)&&t.every(e=>Xr(e)),HHe={close:(t,e)=>Xr(t)&&e4(e),open:(t,e)=>Xr(t)&&e4(e),select:(t,e,n,r)=>Xr(t)&&e4(e)&&xi(n)&&(r===void 0||r instanceof Promise)};var GHe=Ge({name:"ElMenu",props:VHe,emits:HHe,setup(t,{emit:e,slots:n,expose:r}){const i=mi(),s=i.appContext.config.globalProperties.$router,a=Me(),l=_n("menu"),o=_n("sub-menu"),d=Me(-1),p=Me(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),A=Me(t.defaultActive),v=Me({}),y=Me({}),C=oe(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),x=()=>{const ce=A.value&&v.value[A.value];if(!ce||t.mode==="horizontal"||t.collapse)return;ce.indexPath.forEach(le=>{const ie=y.value[le];ie&&M(le,ie.indexPath)})},M=(ce,se)=>{p.value.includes(ce)||(t.uniqueOpened&&(p.value=p.value.filter(le=>se.includes(le))),p.value.push(ce),e("open",ce,se))},I=ce=>{const se=p.value.indexOf(ce);se!==-1&&p.value.splice(se,1)},P=(ce,se)=>{I(ce),e("close",ce,se)},F=({index:ce,indexPath:se})=>{p.value.includes(ce)?P(ce,se):M(ce,se)},D=ce=>{(t.mode==="horizontal"||t.collapse)&&(p.value=[]);const{index:se,indexPath:le}=ce;if(!(eu(se)||eu(le)))if(t.router&&s){const ie=ce.route||se,pe=s.push(ie).then(ue=>(ue||(A.value=se),ue));e("select",se,le,{index:se,indexPath:le,route:ie},pe)}else A.value=se,e("select",se,le,{index:se,indexPath:le})},V=ce=>{const se=v.value,le=se[ce]||A.value&&se[A.value]||se[t.defaultActive];le?A.value=le.index:A.value=ce},H=ce=>{const se=getComputedStyle(ce),le=Number.parseInt(se.marginLeft,10),ie=Number.parseInt(se.marginRight,10);return ce.offsetWidth+le+ie||0},Q=()=>{var ce,se;if(!a.value)return-1;const le=Array.from((se=(ce=a.value)==null?void 0:ce.childNodes)!=null?se:[]).filter(_e=>_e.nodeName!=="#comment"&&(_e.nodeName!=="#text"||_e.nodeValue)),ie=64,pe=getComputedStyle(a.value),ue=Number.parseInt(pe.paddingLeft,10),me=Number.parseInt(pe.paddingRight,10),Le=a.value.clientWidth-ue-me;let ae=0,be=0;return le.forEach((_e,$e)=>{ae+=H(_e),ae<=Le-ie&&(be=$e+1)}),be===le.length?-1:be},G=ce=>y.value[ce].indexPath,W=(ce,se=33.34)=>{let le;return()=>{le&&clearTimeout(le),le=setTimeout(()=>{ce()},se)}};let te=!0;const q=()=>{if(d.value===Q())return;const ce=()=>{d.value=-1,Tr(()=>{d.value=Q()})};te?ce():W(ce)(),te=!1};zt(()=>t.defaultActive,ce=>{v.value[ce]||(A.value=""),V(ce)}),zt(()=>t.collapse,ce=>{ce&&(p.value=[])}),zt(v.value,x);let Y;bu(()=>{t.mode==="horizontal"&&t.ellipsis?Y=Ia(a,q).stop:Y==null||Y()});const ee=Me(!1);{const ce=pe=>{y.value[pe.index]=pe},se=pe=>{delete y.value[pe.index]};Rr("rootMenu",Xs({props:t,openedMenus:p,items:v,subMenus:y,activeIndex:A,isMenuPopup:C,addMenuItem:pe=>{v.value[pe.index]=pe},removeMenuItem:pe=>{delete v.value[pe.index]},addSubMenu:ce,removeSubMenu:se,openMenu:M,closeMenu:P,handleMenuItemClick:D,handleSubMenuClick:F})),Rr(`subMenu:${i.uid}`,{addSubMenu:ce,removeSubMenu:se,mouseInChild:ee,level:0})}return dr(()=>{t.mode==="horizontal"&&new NHe(i.vnode.el,l.namespace.value)}),r({open:se=>{const{indexPath:le}=y.value[se];le.forEach(ie=>M(ie,le))},close:I,handleResize:q}),()=>{var ce,se;let le=(se=(ce=n.default)==null?void 0:ce.call(n))!=null?se:[];const ie=[];if(t.mode==="horizontal"&&a.value){const Le=Hy(le),ae=d.value===-1?Le:Le.slice(0,d.value),be=d.value===-1?[]:Le.slice(d.value);be!=null&&be.length&&t.ellipsis&&(le=ae,ie.push(Br(_H,{index:"sub-menu-more",class:o.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>Br(mr,{class:o.e("icon-more")},{default:()=>Br(t.ellipsisIcon)}),default:()=>be})))}const pe=lhe(t,0),ue=t.closeOnClickOutside?[[Yv,()=>{p.value.length&&(ee.value||(p.value.forEach(Le=>e("close",Le,G(Le))),p.value=[]))}]]:[],me=ci(Br("ul",{key:String(t.collapse),role:"menubar",ref:a,style:pe.value,class:{[l.b()]:!0,[l.m(t.mode)]:!0,[l.m("collapse")]:t.collapse}},[...le,...ie]),ue);return t.collapseTransition&&t.mode==="vertical"?Br(UHe,()=>me):me}}});const QHe=Ln({index:{type:Mt([String,null]),default:null},route:{type:Mt([String,Object])},disabled:Boolean}),jHe={click:t=>Xr(t.index)&&Array.isArray(t.indexPath)},t4="ElMenuItem",KHe=Ge({name:t4,components:{ElTooltip:_h},props:QHe,emits:jHe,setup(t,{emit:e}){const n=mi(),r=mn("rootMenu"),i=_n("menu"),s=_n("menu-item");r||pc(t4,"can not inject root menu");const{parentMenu:a,indexPath:l}=ahe(n,Io(t,"index")),o=mn(`subMenu:${a.value.uid}`);o||pc(t4,"can not inject sub menu");const d=oe(()=>t.index===r.activeIndex),p=Xs({index:t.index,indexPath:l,active:d}),A=()=>{t.disabled||(r.handleMenuItemClick({index:t.index,indexPath:l.value,route:t.route}),e("click",p))};return dr(()=>{o.addSubMenu(p),r.addMenuItem(p)}),Do(()=>{o.removeSubMenu(p),r.removeMenuItem(p)}),{parentMenu:a,rootMenu:r,active:d,nsMenu:i,nsMenuItem:s,handleClick:A}}});function WHe(t,e,n,r,i,s){const a=ui("el-tooltip");return ve(),Ue("li",{class:xe([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...l)=>t.handleClick&&t.handleClick(...l))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(ve(),qt(a,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:It(()=>[kt(t.$slots,"title")]),default:It(()=>[rt("div",{class:xe(t.nsMenu.be("tooltip","trigger"))},[kt(t.$slots,"default")],2)]),_:3},8,["effect"])):(ve(),Ue(_r,{key:1},[kt(t.$slots,"default"),kt(t.$slots,"title")],64))],2)}var che=Fn(KHe,[["render",WHe],["__file","menu-item.vue"]]);const qHe={title:String},YHe="ElMenuItemGroup",XHe=Ge({name:YHe,props:qHe,setup(){return{ns:_n("menu-item-group")}}});function ZHe(t,e,n,r,i,s){return ve(),Ue("li",{class:xe(t.ns.b())},[rt("div",{class:xe(t.ns.e("title"))},[t.$slots.title?kt(t.$slots,"title",{key:1}):(ve(),Ue(_r,{key:0},[gs(Nn(t.title),1)],64))],2),rt("ul",null,[kt(t.$slots,"default")])],2)}var uhe=Fn(XHe,[["render",ZHe],["__file","menu-item-group.vue"]]);const JHe=_i(GHe,{MenuItem:che,MenuItemGroup:uhe,SubMenu:_H}),eGe=Pa(che),tGe=Pa(uhe),nGe=Pa(_H),rGe=Ln({icon:{type:wo,default:()=>tFe},title:String,content:{type:String,default:""}}),iGe={back:()=>!0},sGe=["aria-label"],oGe=Ge({name:"ElPageHeader"}),aGe=Ge({...oGe,props:rGe,emits:iGe,setup(t,{emit:e}){const n=Uc(),{t:r}=Ts(),i=_n("page-header"),s=oe(()=>[i.b(),{[i.m("has-breadcrumb")]:!!n.breadcrumb,[i.m("has-extra")]:!!n.extra,[i.is("contentful")]:!!n.default}]);function a(){e("back")}return(l,o)=>(ve(),Ue("div",{class:xe(T(s))},[l.$slots.breadcrumb?(ve(),Ue("div",{key:0,class:xe(T(i).e("breadcrumb"))},[kt(l.$slots,"breadcrumb")],2)):wt("v-if",!0),rt("div",{class:xe(T(i).e("header"))},[rt("div",{class:xe(T(i).e("left"))},[rt("div",{class:xe(T(i).e("back")),role:"button",tabindex:"0",onClick:a},[l.icon||l.$slots.icon?(ve(),Ue("div",{key:0,"aria-label":l.title||T(r)("el.pageHeader.title"),class:xe(T(i).e("icon"))},[kt(l.$slots,"icon",{},()=>[l.icon?(ve(),qt(T(mr),{key:0},{default:It(()=>[(ve(),qt(Mi(l.icon)))]),_:1})):wt("v-if",!0)])],10,sGe)):wt("v-if",!0),rt("div",{class:xe(T(i).e("title"))},[kt(l.$slots,"title",{},()=>[gs(Nn(l.title||T(r)("el.pageHeader.title")),1)])],2)],2),pt(T(que),{direction:"vertical"}),rt("div",{class:xe(T(i).e("content"))},[kt(l.$slots,"content",{},()=>[gs(Nn(l.content),1)])],2)],2),l.$slots.extra?(ve(),Ue("div",{key:0,class:xe(T(i).e("extra"))},[kt(l.$slots,"extra")],2)):wt("v-if",!0)],2),l.$slots.default?(ve(),Ue("div",{key:1,class:xe(T(i).e("main"))},[kt(l.$slots,"default")],2)):wt("v-if",!0)],2))}});var lGe=Fn(aGe,[["__file","page-header.vue"]]);const cGe=_i(lGe),hhe=Symbol("elPaginationKey"),uGe=Ln({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:wo}}),hGe={click:t=>t instanceof MouseEvent},dGe=["disabled","aria-label","aria-disabled"],fGe={key:0},pGe=Ge({name:"ElPaginationPrev"}),AGe=Ge({...pGe,props:uGe,emits:hGe,setup(t){const e=t,{t:n}=Ts(),r=oe(()=>e.disabled||e.currentPage<=1);return(i,s)=>(ve(),Ue("button",{type:"button",class:"btn-prev",disabled:T(r),"aria-label":i.prevText||T(n)("el.pagination.prev"),"aria-disabled":T(r),onClick:s[0]||(s[0]=a=>i.$emit("click",a))},[i.prevText?(ve(),Ue("span",fGe,Nn(i.prevText),1)):(ve(),qt(T(mr),{key:1},{default:It(()=>[(ve(),qt(Mi(i.prevIcon)))]),_:1}))],8,dGe))}});var gGe=Fn(AGe,[["__file","prev.vue"]]);const mGe=Ln({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:wo}}),vGe=["disabled","aria-label","aria-disabled"],yGe={key:0},_Ge=Ge({name:"ElPaginationNext"}),bGe=Ge({..._Ge,props:mGe,emits:["click"],setup(t){const e=t,{t:n}=Ts(),r=oe(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(i,s)=>(ve(),Ue("button",{type:"button",class:"btn-next",disabled:T(r),"aria-label":i.nextText||T(n)("el.pagination.next"),"aria-disabled":T(r),onClick:s[0]||(s[0]=a=>i.$emit("click",a))},[i.nextText?(ve(),Ue("span",yGe,Nn(i.nextText),1)):(ve(),qt(T(mr),{key:1},{default:It(()=>[(ve(),qt(Mi(i.nextIcon)))]),_:1}))],8,vGe))}});var wGe=Fn(bGe,[["__file","next.vue"]]);const dhe=Symbol("ElSelectGroup"),JB=Symbol("ElSelect");function xGe(t,e){const n=mn(JB),r=mn(dhe,{disabled:!1}),i=oe(()=>n.props.multiple?p(n.props.modelValue,t.value):p([n.props.modelValue],t.value)),s=oe(()=>{if(n.props.multiple){const y=n.props.modelValue||[];return!i.value&&y.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),a=oe(()=>t.label||(xi(t.value)?"":t.value)),l=oe(()=>t.value||t.label||""),o=oe(()=>t.disabled||e.groupDisabled||s.value),d=mi(),p=(y=[],C)=>{if(xi(t.value)){const x=n.props.valueKey;return y&&y.some(M=>fo(ll(M,x))===ll(C,x))}else return y&&y.includes(C)},A=()=>{!t.disabled&&!r.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(d.proxy))},v=y=>{const C=new RegExp(SV(y),"i");e.visible=C.test(a.value)||t.created};return zt(()=>a.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),zt(()=>t.value,(y,C)=>{const{remote:x,valueKey:M}=n.props;if(vh(y,C)||(n.onOptionDestroy(C,d.proxy),n.onOptionCreate(d.proxy)),!t.created&&!x){if(M&&xi(y)&&xi(C)&&y[M]===C[M])return;n.setSelected()}}),zt(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0}),{select:n,currentLabel:a,currentValue:l,itemSelected:i,isDisabled:o,hoverItem:A,updateOption:v}}const CGe=Ge({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const e=_n("select"),n=Hu(),r=oe(()=>[e.be("dropdown","item"),e.is("disabled",T(l)),e.is("selected",T(a)),e.is("hovering",T(v))]),i=Xs({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:l,select:o,hoverItem:d,updateOption:p}=xGe(t,i),{visible:A,hover:v}=dc(i),y=mi().proxy;o.onOptionCreate(y),Do(()=>{const x=y.value,{selected:M}=o.states,P=(o.props.multiple?M:[M]).some(F=>F.value===y.value);Tr(()=>{o.states.cachedOptions.get(x)===y&&!P&&o.states.cachedOptions.delete(x)}),o.onOptionDestroy(x,y)});function C(){t.disabled!==!0&&i.groupDisabled!==!0&&o.handleOptionSelect(y)}return{ns:e,id:n,containerKls:r,currentLabel:s,itemSelected:a,isDisabled:l,select:o,hoverItem:d,updateOption:p,visible:A,hover:v,selectOptionClick:C,states:i}}}),EGe=["id","aria-disabled","aria-selected"];function SGe(t,e,n,r,i,s){return ci((ve(),Ue("li",{id:t.id,class:xe(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:e[0]||(e[0]=(...a)=>t.hoverItem&&t.hoverItem(...a)),onClick:e[1]||(e[1]=qr((...a)=>t.selectOptionClick&&t.selectOptionClick(...a),["stop"]))},[kt(t.$slots,"default",{},()=>[rt("span",null,Nn(t.currentLabel),1)])],42,EGe)),[[Hs,t.visible]])}var bH=Fn(CGe,[["render",SGe],["__file","option.vue"]]);const TGe=Ge({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=mn(JB),e=_n("select"),n=oe(()=>t.props.popperClass),r=oe(()=>t.props.multiple),i=oe(()=>t.props.fitInputWidth),s=Me("");function a(){var l;s.value=`${(l=t.selectRef)==null?void 0:l.offsetWidth}px`}return dr(()=>{a(),Ia(t.selectRef,a)}),{ns:e,minWidth:s,popperClass:n,isMultiple:r,isFitInputWidth:i}}});function IGe(t,e,n,r,i,s){return ve(),Ue("div",{class:xe([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:vr({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(ve(),Ue("div",{key:0,class:xe(t.ns.be("dropdown","header"))},[kt(t.$slots,"header")],2)):wt("v-if",!0),kt(t.$slots,"default"),t.$slots.footer?(ve(),Ue("div",{key:1,class:xe(t.ns.be("dropdown","footer"))},[kt(t.$slots,"footer")],2)):wt("v-if",!0)],6)}var BGe=Fn(TGe,[["render",IGe],["__file","select-dropdown.vue"]]);function fhe(t){const e=Me(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:s=>{const a=s.target.value,l=a[a.length-1]||"";e.value=!OV(l)},handleCompositionEnd:s=>{e.value&&(e.value=!1,Gr(t)&&t(s))}}}const MGe=11,LGe=(t,e)=>{const{t:n}=Ts(),r=Hu(),i=_n("select"),s=_n("input"),a=Xs({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),l=Me(null),o=Me(null),d=Me(null),p=Me(null),A=Me(null),v=Me(null),y=Me(null),C=Me(null),x=Me(null),M=Me(null),I=Me(null),P=Me(null),{wrapperRef:F,isFocused:D,handleFocus:V,handleBlur:H}=p2(A,{afterFocus(){t.automaticDropdown&&!Q.value&&(Q.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(Dt){var sn,Mn;return((sn=d.value)==null?void 0:sn.isFocusInsideContent(Dt))||((Mn=p.value)==null?void 0:Mn.isFocusInsideContent(Dt))},afterBlur(){Q.value=!1,a.menuVisibleOnFocus=!1}}),Q=Me(!1),G=Me(),{form:W,formItem:te}=bh(),{inputId:q}=jA(t,{formItemContext:te}),{valueOnClear:Y,isEmptyValue:ee}=A2(t),ce=oe(()=>t.disabled||(W==null?void 0:W.disabled)),se=oe(()=>t.multiple?Jn(t.modelValue)&&t.modelValue.length>0:!ee(t.modelValue)),le=oe(()=>t.clearable&&!ce.value&&a.inputHovering&&se.value),ie=oe(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),pe=oe(()=>i.is("reverse",ie.value&&Q.value)),ue=oe(()=>(te==null?void 0:te.validateState)||""),me=oe(()=>FV[ue.value]),Le=oe(()=>t.remote?300:0),ae=oe(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!a.inputValue&&a.options.size===0?!1:t.filterable&&a.inputValue&&a.options.size>0&&be.value===0?t.noMatchText||n("el.select.noMatch"):a.options.size===0?t.noDataText||n("el.select.noData"):null),be=oe(()=>_e.value.filter(Dt=>Dt.visible).length),_e=oe(()=>{const Dt=Array.from(a.options.values()),sn=[];return a.optionValues.forEach(Mn=>{const Rn=Dt.findIndex(er=>er.value===Mn);Rn>-1&&sn.push(Dt[Rn])}),sn.length>=Dt.length?sn:Dt}),$e=oe(()=>Array.from(a.cachedOptions.values())),Re=oe(()=>{const Dt=_e.value.filter(sn=>!sn.created).some(sn=>sn.currentLabel===a.inputValue);return t.filterable&&t.allowCreate&&a.inputValue!==""&&!Dt}),Ie=()=>{t.filterable&&Gr(t.filterMethod)||t.filterable&&t.remote&&Gr(t.remoteMethod)||_e.value.forEach(Dt=>{var sn;(sn=Dt.updateOption)==null||sn.call(Dt,a.inputValue)})},Ne=Gl(),Je=oe(()=>["small"].includes(Ne.value)?"small":"default"),je=oe({get(){return Q.value&&ae.value!==!1},set(Dt){Q.value=Dt}}),ft=oe(()=>Jn(t.modelValue)?t.modelValue.length===0&&!a.inputValue:t.filterable?!a.inputValue:!0),Et=oe(()=>{var Dt;const sn=(Dt=t.placeholder)!=null?Dt:n("el.select.placeholder");return t.multiple||!se.value?sn:a.selectedLabel});zt(()=>t.modelValue,(Dt,sn)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(a.inputValue="",ke("")),at(),!vh(Dt,sn)&&t.validateEvent&&(te==null||te.validate("change").catch(Mn=>void 0))},{flush:"post",deep:!0}),zt(()=>Q.value,Dt=>{Dt?ke(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),e("visible-change",Dt)}),zt(()=>a.options.entries(),()=>{var Dt;if(!As)return;const sn=((Dt=l.value)==null?void 0:Dt.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!Cl(t.modelValue)||!Array.from(sn).includes(document.activeElement))&&at(),t.defaultFirstOption&&(t.filterable||t.remote)&&be.value&&Ye()},{flush:"post"}),zt(()=>a.hoveringIndex,Dt=>{Hr(Dt)&&Dt>-1?G.value=_e.value[Dt]||{}:G.value={},_e.value.forEach(sn=>{sn.hover=G.value===sn})}),bu(()=>{a.isBeforeHide||Ie()});const ke=Dt=>{a.previousQuery!==Dt&&(a.previousQuery=Dt,t.filterable&&Gr(t.filterMethod)?t.filterMethod(Dt):t.filterable&&t.remote&&Gr(t.remoteMethod)&&t.remoteMethod(Dt),t.defaultFirstOption&&(t.filterable||t.remote)&&be.value?Tr(Ye):Tr(Tt))},Ye=()=>{const Dt=_e.value.filter(Rn=>Rn.visible&&!Rn.disabled&&!Rn.states.groupDisabled),sn=Dt.find(Rn=>Rn.created),Mn=Dt[0];a.hoveringIndex=St(_e.value,sn||Mn)},at=()=>{if(t.multiple)a.selectedLabel="";else{const sn=He(t.modelValue);a.selectedLabel=sn.currentLabel,a.selected=sn;return}const Dt=[];Jn(t.modelValue)&&t.modelValue.forEach(sn=>{Dt.push(He(sn))}),a.selected=Dt},He=Dt=>{let sn;const Mn=GP(Dt).toLowerCase()==="object",Rn=GP(Dt).toLowerCase()==="null",er=GP(Dt).toLowerCase()==="undefined";for(let si=a.cachedOptions.size-1;si>=0;si--){const Tn=$e.value[si];if(Mn?ll(Tn.value,t.valueKey)===ll(Dt,t.valueKey):Tn.value===Dt){sn={value:Dt,currentLabel:Tn.currentLabel,get isDisabled(){return Tn.isDisabled}};break}}if(sn)return sn;const Qn=Mn?Dt.label:!Rn&&!er?Dt:"";return{value:Dt,currentLabel:Qn}},Tt=()=>{t.multiple?a.hoveringIndex=_e.value.findIndex(Dt=>a.selected.some(sn=>is(sn)===is(Dt))):a.hoveringIndex=_e.value.findIndex(Dt=>is(Dt)===is(a.selected))},Ut=()=>{a.selectionWidth=o.value.getBoundingClientRect().width},Rt=()=>{a.calculatorWidth=v.value.getBoundingClientRect().width},Bt=()=>{a.collapseItemWidth=I.value.getBoundingClientRect().width},Ht=()=>{var Dt,sn;(sn=(Dt=d.value)==null?void 0:Dt.updatePopper)==null||sn.call(Dt)},xt=()=>{var Dt,sn;(sn=(Dt=p.value)==null?void 0:Dt.updatePopper)==null||sn.call(Dt)},Zt=()=>{a.inputValue.length>0&&!Q.value&&(Q.value=!0),ke(a.inputValue)},un=Dt=>{if(a.inputValue=Dt.target.value,t.remote)Ft();else return Zt()},Ft=Rd(()=>{Zt()},Le.value),mt=Dt=>{vh(t.modelValue,Dt)||e(Qo,Dt)},Be=Dt=>Ele(Dt,sn=>!a.disabledOptions.has(sn)),ze=Dt=>{if(t.multiple&&Dt.code!==Fr.delete&&Dt.target.value.length<=0){const sn=t.modelValue.slice(),Mn=Be(sn);if(Mn<0)return;sn.splice(Mn,1),e(Si,sn),mt(sn)}},it=(Dt,sn)=>{const Mn=a.selected.indexOf(sn);if(Mn>-1&&!ce.value){const Rn=t.modelValue.slice();Rn.splice(Mn,1),e(Si,Rn),mt(Rn),e("remove-tag",sn.value)}Dt.stopPropagation(),Qr()},bt=Dt=>{Dt.stopPropagation();const sn=t.multiple?[]:Y.value;if(t.multiple)for(const Mn of a.selected)Mn.isDisabled&&sn.push(Mn.value);e(Si,sn),mt(sn),a.hoveringIndex=-1,Q.value=!1,e("clear"),Qr()},Qe=Dt=>{if(t.multiple){const sn=(t.modelValue||[]).slice(),Mn=St(sn,Dt.value);Mn>-1?sn.splice(Mn,1):(t.multipleLimit<=0||sn.length<t.multipleLimit)&&sn.push(Dt.value),e(Si,sn),mt(sn),Dt.created&&ke(""),t.filterable&&!t.reserveKeyword&&(a.inputValue="")}else e(Si,Dt.value),mt(Dt.value),Q.value=!1;Qr(),!Q.value&&Tr(()=>{yt(Dt)})},St=(Dt=[],sn)=>{if(!xi(sn))return Dt.indexOf(sn);const Mn=t.valueKey;let Rn=-1;return Dt.some((er,Qn)=>fo(ll(er,Mn))===ll(sn,Mn)?(Rn=Qn,!0):!1),Rn},yt=Dt=>{var sn,Mn,Rn,er,Qn;const Nr=Jn(Dt)?Dt[0]:Dt;let si=null;if(Nr!=null&&Nr.value){const Tn=_e.value.filter(jt=>jt.value===Nr.value);Tn.length>0&&(si=Tn[0].$el)}if(d.value&&si){const Tn=(er=(Rn=(Mn=(sn=d.value)==null?void 0:sn.popperRef)==null?void 0:Mn.contentRef)==null?void 0:Rn.querySelector)==null?void 0:er.call(Rn,`.${i.be("dropdown","wrap")}`);Tn&&Mle(Tn,si)}(Qn=P.value)==null||Qn.handleScroll()},Xe=Dt=>{a.options.set(Dt.value,Dt),a.cachedOptions.set(Dt.value,Dt),Dt.disabled&&a.disabledOptions.set(Dt.value,Dt)},_t=(Dt,sn)=>{a.options.get(Dt)===sn&&a.options.delete(Dt)},{handleCompositionStart:Gt,handleCompositionUpdate:gt,handleCompositionEnd:hn}=fhe(Dt=>un(Dt)),rr=oe(()=>{var Dt,sn;return(sn=(Dt=d.value)==null?void 0:Dt.popperRef)==null?void 0:sn.contentRef}),br=()=>{a.isBeforeHide=!1,Tr(()=>yt(a.selected))},Qr=()=>{var Dt;(Dt=A.value)==null||Dt.focus()},hr=()=>{ur()},Kn=Dt=>{bt(Dt)},ur=Dt=>{if(Q.value=!1,D.value){const sn=new FocusEvent("focus",Dt);Tr(()=>H(sn))}},ni=()=>{a.inputValue.length>0?a.inputValue="":Q.value=!1},us=()=>{ce.value||(a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:Q.value=!Q.value)},bi=()=>{Q.value?_e.value[a.hoveringIndex]&&Qe(_e.value[a.hoveringIndex]):us()},is=Dt=>xi(Dt.value)?ll(Dt.value,t.valueKey):Dt.value,Fs=oe(()=>_e.value.filter(Dt=>Dt.visible).every(Dt=>Dt.disabled)),zr=oe(()=>t.multiple?t.collapseTags?a.selected.slice(0,t.maxCollapseTags):a.selected:[]),ss=oe(()=>t.multiple?t.collapseTags?a.selected.slice(t.maxCollapseTags):[]:[]),Zi=Dt=>{if(!Q.value){Q.value=!0;return}if(!(a.options.size===0||be.value===0)&&!Fs.value){Dt==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):Dt==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const sn=_e.value[a.hoveringIndex];(sn.disabled===!0||sn.states.groupDisabled===!0||!sn.visible)&&Zi(Dt),Tr(()=>yt(G.value))}},en=()=>{if(!o.value)return 0;const Dt=window.getComputedStyle(o.value);return Number.parseFloat(Dt.gap||"6px")},dn=oe(()=>{const Dt=en();return{maxWidth:`${I.value&&t.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-Dt:a.selectionWidth}px`}}),En=oe(()=>({maxWidth:`${a.selectionWidth}px`})),Vn=oe(()=>({width:`${Math.max(a.calculatorWidth,MGe)}px`}));return t.multiple&&!Jn(t.modelValue)&&e(Si,[]),!t.multiple&&Jn(t.modelValue)&&e(Si,""),Ia(o,Ut),Ia(v,Rt),Ia(x,Ht),Ia(F,Ht),Ia(M,xt),Ia(I,Bt),dr(()=>{at()}),{inputId:q,contentId:r,nsSelect:i,nsInput:s,states:a,isFocused:D,expanded:Q,optionsArray:_e,hoverOption:G,selectSize:Ne,filteredOptionsCount:be,resetCalculatorWidth:Rt,updateTooltip:Ht,updateTagTooltip:xt,debouncedOnInputChange:Ft,onInput:un,deletePrevTag:ze,deleteTag:it,deleteSelected:bt,handleOptionSelect:Qe,scrollToOption:yt,hasModelValue:se,shouldShowPlaceholder:ft,currentPlaceholder:Et,showClose:le,iconComponent:ie,iconReverse:pe,validateState:ue,validateIcon:me,showNewOption:Re,updateOptions:Ie,collapseTagSize:Je,setSelected:at,selectDisabled:ce,emptyText:ae,handleCompositionStart:Gt,handleCompositionUpdate:gt,handleCompositionEnd:hn,onOptionCreate:Xe,onOptionDestroy:_t,handleMenuEnter:br,handleFocus:V,focus:Qr,blur:hr,handleBlur:H,handleClearClick:Kn,handleClickOutside:ur,handleEsc:ni,toggleMenu:us,selectOption:bi,getValueKey:is,navigateOptions:Zi,dropdownMenuVisible:je,showTagList:zr,collapseTagList:ss,tagStyle:dn,collapseTagStyle:En,inputStyle:Vn,popperRef:rr,inputRef:A,tooltipRef:d,tagTooltipRef:p,calculatorRef:v,prefixRef:y,suffixRef:C,selectRef:l,wrapperRef:F,selectionRef:o,scrollbarRef:P,menuRef:x,tagMenuRef:M,collapseItemRef:I}};var RGe=Ge({name:"ElOptions",setup(t,{slots:e}){const n=mn(JB);let r=[];return()=>{var i,s;const a=(i=e.default)==null?void 0:i.call(e),l=[];function o(d){Jn(d)&&d.forEach(p=>{var A,v,y,C;const x=(A=(p==null?void 0:p.type)||{})==null?void 0:A.name;x==="ElOptionGroup"?o(!Xr(p.children)&&!Jn(p.children)&&Gr((v=p.children)==null?void 0:v.default)?(y=p.children)==null?void 0:y.default():p.children):x==="ElOption"?l.push((C=p.props)==null?void 0:C.value):Jn(p.children)&&o(p.children)})}return a.length&&o((s=a[0])==null?void 0:s.children),vh(l,r)||(r=l,n&&(n.states.optionValues=l)),a}}});const PGe=Ln({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Nc,effect:{type:Mt(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Mt(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:qc.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:wo,default:x_},fitInputWidth:Boolean,suffixIcon:{type:wo,default:u0},tagType:{...y2.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:Mt(String),values:zb,default:"bottom-start"},fallbackPlacements:{type:Mt(Array),default:["bottom-start","top-start","right","left"]},...IE,...Eu(["ariaLabel"])}),KZ="ElSelect",FGe=Ge({name:KZ,componentName:KZ,components:{ElInput:mh,ElSelectMenu:BGe,ElOption:bH,ElOptions:RGe,ElTag:jI,ElScrollbar:d0,ElTooltip:_h,ElIcon:mr},directives:{ClickOutside:Yv},props:PGe,emits:[Si,Qo,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=LGe(t,e);return Rr(JB,Xs({props:t,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected})),{...n}}}),OGe=["id","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],NGe=["textContent"];function kGe(t,e,n,r,i,s){const a=ui("el-tag"),l=ui("el-tooltip"),o=ui("el-icon"),d=ui("el-option"),p=ui("el-options"),A=ui("el-scrollbar"),v=ui("el-select-menu"),y=G5("click-outside");return ci((ve(),Ue("div",{ref:"selectRef",class:xe([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:e[16]||(e[16]=C=>t.states.inputHovering=!0),onMouseleave:e[17]||(e[17]=C=>t.states.inputHovering=!1),onClick:e[18]||(e[18]=qr((...C)=>t.toggleMenu&&t.toggleMenu(...C),["prevent","stop"]))},[pt(l,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[15]||(e[15]=C=>t.states.isBeforeHide=!1)},{default:It(()=>{var C;return[rt("div",{ref:"wrapperRef",class:xe([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(ve(),Ue("div",{key:0,ref:"prefixRef",class:xe(t.nsSelect.e("prefix"))},[kt(t.$slots,"prefix")],2)):wt("v-if",!0),rt("div",{ref:"selectionRef",class:xe([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?kt(t.$slots,"tag",{key:0},()=>[(ve(!0),Ue(_r,null,cs(t.showTagList,x=>(ve(),Ue("div",{key:t.getValueKey(x),class:xe(t.nsSelect.e("selected-item"))},[pt(a,{closable:!t.selectDisabled&&!x.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:vr(t.tagStyle),onClose:M=>t.deleteTag(M,x)},{default:It(()=>[rt("span",{class:xe(t.nsSelect.e("tags-text"))},Nn(x.currentLabel),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(ve(),qt(l,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:It(()=>[rt("div",{ref:"collapseItemRef",class:xe(t.nsSelect.e("selected-item"))},[pt(a,{closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:vr(t.collapseTagStyle)},{default:It(()=>[rt("span",{class:xe(t.nsSelect.e("tags-text"))}," + "+Nn(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:It(()=>[rt("div",{ref:"tagMenuRef",class:xe(t.nsSelect.e("selection"))},[(ve(!0),Ue(_r,null,cs(t.collapseTagList,x=>(ve(),Ue("div",{key:t.getValueKey(x),class:xe(t.nsSelect.e("selected-item"))},[pt(a,{class:"in-tooltip",closable:!t.selectDisabled&&!x.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:M=>t.deleteTag(M,x)},{default:It(()=>[rt("span",{class:xe(t.nsSelect.e("tags-text"))},Nn(x.currentLabel),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):wt("v-if",!0)]):wt("v-if",!0),t.selectDisabled?wt("v-if",!0):(ve(),Ue("div",{key:1,class:xe([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[ci(rt("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=x=>t.states.inputValue=x),type:"text",class:xe([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:vr(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((C=t.hoverOption)==null?void 0:C.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:e[1]||(e[1]=(...x)=>t.handleFocus&&t.handleFocus(...x)),onBlur:e[2]||(e[2]=(...x)=>t.handleBlur&&t.handleBlur(...x)),onKeydown:[e[3]||(e[3]=bo(qr(x=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[4]||(e[4]=bo(qr(x=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),e[5]||(e[5]=bo(qr((...x)=>t.handleEsc&&t.handleEsc(...x),["stop","prevent"]),["esc"])),e[6]||(e[6]=bo(qr((...x)=>t.selectOption&&t.selectOption(...x),["stop","prevent"]),["enter"])),e[7]||(e[7]=bo(qr((...x)=>t.deletePrevTag&&t.deletePrevTag(...x),["stop"]),["delete"]))],onCompositionstart:e[8]||(e[8]=(...x)=>t.handleCompositionStart&&t.handleCompositionStart(...x)),onCompositionupdate:e[9]||(e[9]=(...x)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...x)),onCompositionend:e[10]||(e[10]=(...x)=>t.handleCompositionEnd&&t.handleCompositionEnd(...x)),onInput:e[11]||(e[11]=(...x)=>t.onInput&&t.onInput(...x)),onClick:e[12]||(e[12]=qr((...x)=>t.toggleMenu&&t.toggleMenu(...x),["stop"]))},null,46,OGe),[[j$,t.states.inputValue]]),t.filterable?(ve(),Ue("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:xe(t.nsSelect.e("input-calculator")),textContent:Nn(t.states.inputValue)},null,10,NGe)):wt("v-if",!0)],2)),t.shouldShowPlaceholder?(ve(),Ue("div",{key:2,class:xe([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[rt("span",null,Nn(t.currentPlaceholder),1)],2)):wt("v-if",!0)],2),rt("div",{ref:"suffixRef",class:xe(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(ve(),qt(o,{key:0,class:xe([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:It(()=>[(ve(),qt(Mi(t.iconComponent)))]),_:1},8,["class"])):wt("v-if",!0),t.showClose&&t.clearIcon?(ve(),qt(o,{key:1,class:xe([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:It(()=>[(ve(),qt(Mi(t.clearIcon)))]),_:1},8,["class","onClick"])):wt("v-if",!0),t.validateState&&t.validateIcon?(ve(),qt(o,{key:2,class:xe([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:It(()=>[(ve(),qt(Mi(t.validateIcon)))]),_:1},8,["class"])):wt("v-if",!0)],2)],2)]}),content:It(()=>[pt(v,{ref:"menuRef"},{default:It(()=>[t.$slots.header?(ve(),Ue("div",{key:0,class:xe(t.nsSelect.be("dropdown","header")),onClick:e[13]||(e[13]=qr(()=>{},["stop"]))},[kt(t.$slots,"header")],2)):wt("v-if",!0),ci(pt(A,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:xe([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:It(()=>[t.showNewOption?(ve(),qt(d,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):wt("v-if",!0),pt(p,null,{default:It(()=>[kt(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Hs,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(ve(),Ue("div",{key:1,class:xe(t.nsSelect.be("dropdown","loading"))},[kt(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(ve(),Ue("div",{key:2,class:xe(t.nsSelect.be("dropdown","empty"))},[kt(t.$slots,"empty",{},()=>[rt("span",null,Nn(t.emptyText),1)])],2)):wt("v-if",!0),t.$slots.footer?(ve(),Ue("div",{key:3,class:xe(t.nsSelect.be("dropdown","footer")),onClick:e[14]||(e[14]=qr(()=>{},["stop"]))},[kt(t.$slots,"footer")],2)):wt("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],34)),[[y,t.handleClickOutside,t.popperRef]])}var DGe=Fn(FGe,[["render",kGe],["__file","select.vue"]]);const UGe=Ge({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=_n("select"),n=Me(null),r=mi(),i=Me([]);Rr(dhe,Xs({...dc(t)}));const s=oe(()=>i.value.some(d=>d.visible===!0)),a=d=>{var p,A;return((p=d.type)==null?void 0:p.name)==="ElOption"&&!!((A=d.component)!=null&&A.proxy)},l=d=>{const p=t_(d),A=[];return p.forEach(v=>{var y,C;a(v)?A.push(v.component.proxy):(y=v.children)!=null&&y.length?A.push(...l(v.children)):(C=v.component)!=null&&C.subTree&&A.push(...l(v.component.subTree))}),A},o=()=>{i.value=l(r.subTree)};return dr(()=>{o()}),Uae(n,o,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:s,ns:e}}});function zGe(t,e,n,r,i,s){return ci((ve(),Ue("ul",{ref:"groupRef",class:xe(t.ns.be("group","wrap"))},[rt("li",{class:xe(t.ns.be("group","title"))},Nn(t.label),3),rt("li",null,[rt("ul",{class:xe(t.ns.b("group"))},[kt(t.$slots,"default")],2)])],2)),[[Hs,t.visible]])}var phe=Fn(UGe,[["render",zGe],["__file","option-group.vue"]]);const Sb=_i(DGe,{Option:bH,OptionGroup:phe}),gO=Pa(bH),$Ge=Pa(phe),wH=()=>mn(hhe,{}),VGe=Ln({pageSize:{type:Number,required:!0},pageSizes:{type:Mt(Array),default:()=>Ba([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:dm}}),HGe=Ge({name:"ElPaginationSizes"}),GGe=Ge({...HGe,props:VGe,emits:["page-size-change"],setup(t,{emit:e}){const n=t,{t:r}=Ts(),i=_n("pagination"),s=wH(),a=Me(n.pageSize);zt(()=>n.pageSizes,(d,p)=>{if(!vh(d,p)&&Array.isArray(d)){const A=d.includes(n.pageSize)?n.pageSize:n.pageSizes[0];e("page-size-change",A)}}),zt(()=>n.pageSize,d=>{a.value=d});const l=oe(()=>n.pageSizes);function o(d){var p;d!==a.value&&(a.value=d,(p=s.handleSizeChange)==null||p.call(s,Number(d)))}return(d,p)=>(ve(),Ue("span",{class:xe(T(i).e("sizes"))},[pt(T(Sb),{"model-value":a.value,disabled:d.disabled,"popper-class":d.popperClass,size:d.size,teleported:d.teleported,"validate-event":!1,onChange:o},{default:It(()=>[(ve(!0),Ue(_r,null,cs(T(l),A=>(ve(),qt(T(gO),{key:A,value:A,label:A+T(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var QGe=Fn(GGe,[["__file","sizes.vue"]]);const jGe=Ln({size:{type:String,values:dm}}),KGe=["disabled"],WGe=Ge({name:"ElPaginationJumper"}),qGe=Ge({...WGe,props:jGe,setup(t){const{t:e}=Ts(),n=_n("pagination"),{pageCount:r,disabled:i,currentPage:s,changeEvent:a}=wH(),l=Me(),o=oe(()=>{var A;return(A=l.value)!=null?A:s==null?void 0:s.value});function d(A){l.value=A?+A:""}function p(A){A=Math.trunc(+A),a==null||a(A),l.value=void 0}return(A,v)=>(ve(),Ue("span",{class:xe(T(n).e("jump")),disabled:T(i)},[rt("span",{class:xe([T(n).e("goto")])},Nn(T(e)("el.pagination.goto")),3),pt(T(mh),{size:A.size,class:xe([T(n).e("editor"),T(n).is("in-pagination")]),min:1,max:T(r),disabled:T(i),"model-value":T(o),"validate-event":!1,label:T(e)("el.pagination.page"),type:"number","onUpdate:modelValue":d,onChange:p},null,8,["size","class","max","disabled","model-value","label"]),rt("span",{class:xe([T(n).e("classifier")])},Nn(T(e)("el.pagination.pageClassifier")),3)],10,KGe))}});var YGe=Fn(qGe,[["__file","jumper.vue"]]);const XGe=Ln({total:{type:Number,default:1e3}}),ZGe=["disabled"],JGe=Ge({name:"ElPaginationTotal"}),e7e=Ge({...JGe,props:XGe,setup(t){const{t:e}=Ts(),n=_n("pagination"),{disabled:r}=wH();return(i,s)=>(ve(),Ue("span",{class:xe(T(n).e("total")),disabled:T(r)},Nn(T(e)("el.pagination.total",{total:i.total})),11,ZGe))}});var t7e=Fn(e7e,[["__file","total.vue"]]);const n7e=Ln({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),r7e=["onKeyup"],i7e=["aria-current","aria-label","tabindex"],s7e=["tabindex","aria-label"],o7e=["aria-current","aria-label","tabindex"],a7e=["tabindex","aria-label"],l7e=["aria-current","aria-label","tabindex"],c7e=Ge({name:"ElPaginationPager"}),u7e=Ge({...c7e,props:n7e,emits:["change"],setup(t,{emit:e}){const n=t,r=_n("pager"),i=_n("icon"),{t:s}=Ts(),a=Me(!1),l=Me(!1),o=Me(!1),d=Me(!1),p=Me(!1),A=Me(!1),v=oe(()=>{const D=n.pagerCount,V=(D-1)/2,H=Number(n.currentPage),Q=Number(n.pageCount);let G=!1,W=!1;Q>D&&(H>D-V&&(G=!0),H<Q-V&&(W=!0));const te=[];if(G&&!W){const q=Q-(D-2);for(let Y=q;Y<Q;Y++)te.push(Y)}else if(!G&&W)for(let q=2;q<D;q++)te.push(q);else if(G&&W){const q=Math.floor(D/2)-1;for(let Y=H-q;Y<=H+q;Y++)te.push(Y)}else for(let q=2;q<Q;q++)te.push(q);return te}),y=oe(()=>["more","btn-quickprev",i.b(),r.is("disabled",n.disabled)]),C=oe(()=>["more","btn-quicknext",i.b(),r.is("disabled",n.disabled)]),x=oe(()=>n.disabled?-1:0);bu(()=>{const D=(n.pagerCount-1)/2;a.value=!1,l.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-D&&(a.value=!0),n.currentPage<n.pageCount-D&&(l.value=!0))});function M(D=!1){n.disabled||(D?o.value=!0:d.value=!0)}function I(D=!1){D?p.value=!0:A.value=!0}function P(D){const V=D.target;if(V.tagName.toLowerCase()==="li"&&Array.from(V.classList).includes("number")){const H=Number(V.textContent);H!==n.currentPage&&e("change",H)}else V.tagName.toLowerCase()==="li"&&Array.from(V.classList).includes("more")&&F(D)}function F(D){const V=D.target;if(V.tagName.toLowerCase()==="ul"||n.disabled)return;let H=Number(V.textContent);const Q=n.pageCount,G=n.currentPage,W=n.pagerCount-2;V.className.includes("more")&&(V.className.includes("quickprev")?H=G-W:V.className.includes("quicknext")&&(H=G+W)),Number.isNaN(+H)||(H<1&&(H=1),H>Q&&(H=Q)),H!==G&&e("change",H)}return(D,V)=>(ve(),Ue("ul",{class:xe(T(r).b()),onClick:F,onKeyup:bo(P,["enter"])},[D.pageCount>0?(ve(),Ue("li",{key:0,class:xe([[T(r).is("active",D.currentPage===1),T(r).is("disabled",D.disabled)],"number"]),"aria-current":D.currentPage===1,"aria-label":T(s)("el.pagination.currentPage",{pager:1}),tabindex:T(x)}," 1 ",10,i7e)):wt("v-if",!0),a.value?(ve(),Ue("li",{key:1,class:xe(T(y)),tabindex:T(x),"aria-label":T(s)("el.pagination.prevPages",{pager:D.pagerCount-2}),onMouseenter:V[0]||(V[0]=H=>M(!0)),onMouseleave:V[1]||(V[1]=H=>o.value=!1),onFocus:V[2]||(V[2]=H=>I(!0)),onBlur:V[3]||(V[3]=H=>p.value=!1)},[(o.value||p.value)&&!D.disabled?(ve(),qt(T(UC),{key:0})):(ve(),qt(T(OX),{key:1}))],42,s7e)):wt("v-if",!0),(ve(!0),Ue(_r,null,cs(T(v),H=>(ve(),Ue("li",{key:H,class:xe([[T(r).is("active",D.currentPage===H),T(r).is("disabled",D.disabled)],"number"]),"aria-current":D.currentPage===H,"aria-label":T(s)("el.pagination.currentPage",{pager:H}),tabindex:T(x)},Nn(H),11,o7e))),128)),l.value?(ve(),Ue("li",{key:2,class:xe(T(C)),tabindex:T(x),"aria-label":T(s)("el.pagination.nextPages",{pager:D.pagerCount-2}),onMouseenter:V[4]||(V[4]=H=>M()),onMouseleave:V[5]||(V[5]=H=>d.value=!1),onFocus:V[6]||(V[6]=H=>I()),onBlur:V[7]||(V[7]=H=>A.value=!1)},[(d.value||A.value)&&!D.disabled?(ve(),qt(T(zC),{key:0})):(ve(),qt(T(OX),{key:1}))],42,a7e)):wt("v-if",!0),D.pageCount>1?(ve(),Ue("li",{key:3,class:xe([[T(r).is("active",D.currentPage===D.pageCount),T(r).is("disabled",D.disabled)],"number"]),"aria-current":D.currentPage===D.pageCount,"aria-label":T(s)("el.pagination.currentPage",{pager:D.pageCount}),tabindex:T(x)},Nn(D.pageCount),11,l7e)):wt("v-if",!0)],42,r7e))}});var h7e=Fn(u7e,[["__file","pager.vue"]]);const Lh=t=>typeof t!="number",d7e=Ln({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>Hr(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Mt(Array),default:()=>Ba([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:wo,default:()=>r_},nextText:{type:String,default:""},nextIcon:{type:wo,default:()=>Uh},teleported:{type:Boolean,default:!0},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),f7e={"update:current-page":t=>Hr(t),"update:page-size":t=>Hr(t),"size-change":t=>Hr(t),change:(t,e)=>Hr(t)&&Hr(e),"current-change":t=>Hr(t),"prev-click":t=>Hr(t),"next-click":t=>Hr(t)},WZ="ElPagination";var p7e=Ge({name:WZ,props:d7e,emits:f7e,setup(t,{emit:e,slots:n}){const{t:r}=Ts(),i=_n("pagination"),s=mi().vnode.props||{},a="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,l="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,o=oe(()=>{if(Lh(t.total)&&Lh(t.pageCount)||!Lh(t.currentPage)&&!a)return!1;if(t.layout.includes("sizes")){if(Lh(t.pageCount)){if(!Lh(t.total)&&!Lh(t.pageSize)&&!l)return!1}else if(!l)return!1}return!0}),d=Me(Lh(t.defaultPageSize)?10:t.defaultPageSize),p=Me(Lh(t.defaultCurrentPage)?1:t.defaultCurrentPage),A=oe({get(){return Lh(t.pageSize)?d.value:t.pageSize},set(F){Lh(t.pageSize)&&(d.value=F),l&&(e("update:page-size",F),e("size-change",F))}}),v=oe(()=>{let F=0;return Lh(t.pageCount)?Lh(t.total)||(F=Math.max(1,Math.ceil(t.total/A.value))):F=t.pageCount,F}),y=oe({get(){return Lh(t.currentPage)?p.value:t.currentPage},set(F){let D=F;F<1?D=1:F>v.value&&(D=v.value),Lh(t.currentPage)&&(p.value=D),a&&(e("update:current-page",D),e("current-change",D))}});zt(v,F=>{y.value>F&&(y.value=F)}),zt([y,A],F=>{e("change",...F)},{flush:"post"});function C(F){y.value=F}function x(F){A.value=F;const D=v.value;y.value>D&&(y.value=D)}function M(){t.disabled||(y.value-=1,e("prev-click",y.value))}function I(){t.disabled||(y.value+=1,e("next-click",y.value))}function P(F,D){F&&(F.props||(F.props={}),F.props.class=[F.props.class,D].join(" "))}return Rr(hhe,{pageCount:v,disabled:oe(()=>t.disabled),currentPage:y,changeEvent:C,handleSizeChange:x}),()=>{var F,D;if(!o.value)return r("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&v.value<=1)return null;const V=[],H=[],Q=Br("div",{class:i.e("rightwrapper")},H),G={prev:Br(gGe,{disabled:t.disabled,currentPage:y.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:M}),jumper:Br(YGe,{size:t.small?"small":"default"}),pager:Br(h7e,{currentPage:y.value,pageCount:v.value,pagerCount:t.pagerCount,onChange:C,disabled:t.disabled}),next:Br(wGe,{disabled:t.disabled,currentPage:y.value,pageCount:v.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:I}),sizes:Br(QGe,{pageSize:A.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:t.small?"small":"default"}),slot:(D=(F=n==null?void 0:n.default)==null?void 0:F.call(n))!=null?D:null,total:Br(t7e,{total:Lh(t.total)?0:t.total})},W=t.layout.split(",").map(q=>q.trim());let te=!1;return W.forEach(q=>{if(q==="->"){te=!0;return}te?H.push(G[q]):V.push(G[q])}),P(V[0],i.is("first")),P(V[V.length-1],i.is("last")),te&&H.length>0&&(P(H[0],i.is("first")),P(H[H.length-1],i.is("last")),V.push(Q)),Br("div",{class:[i.b(),i.is("background",t.background),{[i.m("small")]:t.small}]},V)}}});const A7e=_i(p7e),g7e=Ln({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:w3,default:"primary"},cancelButtonType:{type:String,values:w3,default:"text"},icon:{type:wo,default:()=>NFe},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:qc.teleported,persistent:qc.persistent,width:{type:[String,Number],default:150}}),m7e={confirm:t=>t instanceof MouseEvent,cancel:t=>t instanceof MouseEvent},v7e=Ge({name:"ElPopconfirm"}),y7e=Ge({...v7e,props:g7e,emits:m7e,setup(t,{emit:e}){const n=t,{t:r}=Ts(),i=_n("popconfirm"),s=Me(),a=()=>{var v,y;(y=(v=s.value)==null?void 0:v.onClose)==null||y.call(v)},l=oe(()=>({width:Ja(n.width)})),o=v=>{e("confirm",v),a()},d=v=>{e("cancel",v),a()},p=oe(()=>n.confirmButtonText||r("el.popconfirm.confirmButtonText")),A=oe(()=>n.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(v,y)=>(ve(),qt(T(_h),Gi({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},v.$attrs,{"popper-class":`${T(i).namespace.value}-popover`,"popper-style":T(l),teleported:v.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":v.hideAfter,persistent:v.persistent}),{content:It(()=>[rt("div",{class:xe(T(i).b())},[rt("div",{class:xe(T(i).e("main"))},[!v.hideIcon&&v.icon?(ve(),qt(T(mr),{key:0,class:xe(T(i).e("icon")),style:vr({color:v.iconColor})},{default:It(()=>[(ve(),qt(Mi(v.icon)))]),_:1},8,["class","style"])):wt("v-if",!0),gs(" "+Nn(v.title),1)],2),rt("div",{class:xe(T(i).e("action"))},[pt(T(tu),{size:"small",type:v.cancelButtonType==="text"?"":v.cancelButtonType,text:v.cancelButtonType==="text",onClick:d},{default:It(()=>[gs(Nn(T(A)),1)]),_:1},8,["type","text"]),pt(T(tu),{size:"small",type:v.confirmButtonType==="text"?"":v.confirmButtonType,text:v.confirmButtonType==="text",onClick:o},{default:It(()=>[gs(Nn(T(p)),1)]),_:1},8,["type","text"])],2)],2)]),default:It(()=>[v.$slots.reference?kt(v.$slots,"reference",{key:0}):wt("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var _7e=Fn(y7e,[["__file","popconfirm.vue"]]);const b7e=_i(_7e),w7e=Ln({trigger:QI.trigger,placement:hF.placement,disabled:QI.disabled,visible:qc.visible,transition:qc.transition,popperOptions:hF.popperOptions,tabindex:hF.tabindex,content:qc.content,popperStyle:qc.popperStyle,popperClass:qc.popperClass,enterable:{...qc.enterable,default:!0},effect:{...qc.effect,default:"light"},teleported:qc.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),x7e={"update:visible":t=>Sl(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},C7e="onUpdate:visible",E7e=Ge({name:"ElPopover"}),S7e=Ge({...E7e,props:w7e,emits:x7e,setup(t,{expose:e,emit:n}){const r=t,i=oe(()=>r[C7e]),s=_n("popover"),a=Me(),l=oe(()=>{var M;return(M=T(a))==null?void 0:M.popperRef}),o=oe(()=>[{width:Ja(r.width)},r.popperStyle]),d=oe(()=>[s.b(),r.popperClass,{[s.m("plain")]:!!r.content}]),p=oe(()=>r.transition===`${s.namespace.value}-fade-in-linear`),A=()=>{var M;(M=a.value)==null||M.hide()},v=()=>{n("before-enter")},y=()=>{n("before-leave")},C=()=>{n("after-enter")},x=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:l,hide:A}),(M,I)=>(ve(),qt(T(_h),Gi({ref_key:"tooltipRef",ref:a},M.$attrs,{trigger:M.trigger,placement:M.placement,disabled:M.disabled,visible:M.visible,transition:M.transition,"popper-options":M.popperOptions,tabindex:M.tabindex,content:M.content,offset:M.offset,"show-after":M.showAfter,"hide-after":M.hideAfter,"auto-close":M.autoClose,"show-arrow":M.showArrow,"aria-label":M.title,effect:M.effect,enterable:M.enterable,"popper-class":T(d),"popper-style":T(o),teleported:M.teleported,persistent:M.persistent,"gpu-acceleration":T(p),"onUpdate:visible":T(i),onBeforeShow:v,onBeforeHide:y,onShow:C,onHide:x}),{content:It(()=>[M.title?(ve(),Ue("div",{key:0,class:xe(T(s).e("title")),role:"title"},Nn(M.title),3)):wt("v-if",!0),kt(M.$slots,"default",{},()=>[gs(Nn(M.content),1)])]),default:It(()=>[M.$slots.reference?kt(M.$slots,"reference",{key:0}):wt("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var T7e=Fn(S7e,[["__file","popover.vue"]]);const qZ=(t,e)=>{const n=e.arg||e.value,r=n==null?void 0:n.popperRef;r&&(r.triggerRef=t)};var I7e={mounted(t,e){qZ(t,e)},updated(t,e){qZ(t,e)}};const B7e="popover",Ahe=oOe(I7e,B7e),M7e=_i(T7e,{directive:Ahe}),L7e=Ln({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Mt(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Mt([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Mt(Function),default:t=>`${t}%`}}),R7e=["aria-valuenow"],P7e={viewBox:"0 0 100 100"},F7e=["d","stroke","stroke-linecap","stroke-width"],O7e=["d","stroke","opacity","stroke-linecap","stroke-width"],N7e={key:0},k7e=Ge({name:"ElProgress"}),D7e=Ge({...k7e,props:L7e,setup(t){const e=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=_n("progress"),i=oe(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,background:P(e.percentage)})),s=oe(()=>(e.strokeWidth/e.width*100).toFixed(1)),a=oe(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),l=oe(()=>{const F=a.value,D=e.type==="dashboard";return`
          M 50 50
          m 0 ${D?"":"-"}${F}
          a ${F} ${F} 0 1 1 0 ${D?"-":""}${F*2}
          a ${F} ${F} 0 1 1 0 ${D?"":"-"}${F*2}
          `}),o=oe(()=>2*Math.PI*a.value),d=oe(()=>e.type==="dashboard"?.75:1),p=oe(()=>`${-1*o.value*(1-d.value)/2}px`),A=oe(()=>({strokeDasharray:`${o.value*d.value}px, ${o.value}px`,strokeDashoffset:p.value})),v=oe(()=>({strokeDasharray:`${o.value*d.value*(e.percentage/100)}px, ${o.value}px`,strokeDashoffset:p.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),y=oe(()=>{let F;return e.color?F=P(e.percentage):F=n[e.status]||n.default,F}),C=oe(()=>e.status==="warning"?c2:e.type==="line"?e.status==="success"?BV:x_:e.status==="success"?GB:NA),x=oe(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),M=oe(()=>e.format(e.percentage));function I(F){const D=100/F.length;return F.map((H,Q)=>Xr(H)?{color:H,percentage:(Q+1)*D}:H).sort((H,Q)=>H.percentage-Q.percentage)}const P=F=>{var D;const{color:V}=e;if(Gr(V))return V(F);if(Xr(V))return V;{const H=I(V);for(const Q of H)if(Q.percentage>F)return Q.color;return(D=H[H.length-1])==null?void 0:D.color}};return(F,D)=>(ve(),Ue("div",{class:xe([T(r).b(),T(r).m(F.type),T(r).is(F.status),{[T(r).m("without-text")]:!F.showText,[T(r).m("text-inside")]:F.textInside}]),role:"progressbar","aria-valuenow":F.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[F.type==="line"?(ve(),Ue("div",{key:0,class:xe(T(r).b("bar"))},[rt("div",{class:xe(T(r).be("bar","outer")),style:vr({height:`${F.strokeWidth}px`})},[rt("div",{class:xe([T(r).be("bar","inner"),{[T(r).bem("bar","inner","indeterminate")]:F.indeterminate},{[T(r).bem("bar","inner","striped")]:F.striped},{[T(r).bem("bar","inner","striped-flow")]:F.stripedFlow}]),style:vr(T(i))},[(F.showText||F.$slots.default)&&F.textInside?(ve(),Ue("div",{key:0,class:xe(T(r).be("bar","innerText"))},[kt(F.$slots,"default",{percentage:F.percentage},()=>[rt("span",null,Nn(T(M)),1)])],2)):wt("v-if",!0)],6)],6)],2)):(ve(),Ue("div",{key:1,class:xe(T(r).b("circle")),style:vr({height:`${F.width}px`,width:`${F.width}px`})},[(ve(),Ue("svg",P7e,[rt("path",{class:xe(T(r).be("circle","track")),d:T(l),stroke:`var(${T(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":F.strokeLinecap,"stroke-width":T(s),fill:"none",style:vr(T(A))},null,14,F7e),rt("path",{class:xe(T(r).be("circle","path")),d:T(l),stroke:T(y),fill:"none",opacity:F.percentage?1:0,"stroke-linecap":F.strokeLinecap,"stroke-width":T(s),style:vr(T(v))},null,14,O7e)]))],6)),(F.showText||F.$slots.default)&&!F.textInside?(ve(),Ue("div",{key:2,class:xe(T(r).e("text")),style:vr({fontSize:`${T(x)}px`})},[kt(F.$slots,"default",{percentage:F.percentage},()=>[F.status?(ve(),qt(T(mr),{key:1},{default:It(()=>[(ve(),qt(Mi(T(C))))]),_:1})):(ve(),Ue("span",N7e,Nn(T(M)),1))])],6)):wt("v-if",!0)],10,R7e))}});var U7e=Fn(D7e,[["__file","progress.vue"]]);const ghe=_i(U7e),z7e=Ln({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Mt([Array,Object]),default:()=>Ba(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Mt([Array,Object]),default:()=>[cR,cR,cR]},voidIcon:{type:wo,default:()=>XFe},disabledVoidIcon:{type:wo,default:()=>cR},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Mt(Array),default:()=>Ba(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:Nc,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1},...Eu(["ariaLabel"])}),$7e={[Qo]:t=>Hr(t),[Si]:t=>Hr(t)},V7e=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],H7e=["onMousemove","onClick"],G7e=Ge({name:"ElRate"}),Q7e=Ge({...G7e,props:z7e,emits:$7e,setup(t,{expose:e,emit:n}){const r=t;function i(le,ie){const pe=Le=>xi(Le),ue=Object.keys(ie).map(Le=>+Le).filter(Le=>{const ae=ie[Le];return(pe(ae)?ae.excluded:!1)?le<Le:le<=Le}).sort((Le,ae)=>Le-ae),me=ie[ue[0]];return pe(me)&&me.value||me}const s=mn($b,void 0),a=mn(om,void 0),l=Gl(),o=_n("rate"),{inputId:d,isLabeledByFormItem:p}=jA(r,{formItemContext:a}),A=Me(r.modelValue),v=Me(-1),y=Me(!0),C=oe(()=>[o.b(),o.m(l.value)]),x=oe(()=>r.disabled||(s==null?void 0:s.disabled)),M=oe(()=>o.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":D.value})),I=oe(()=>{let le="";return r.showScore?le=r.scoreTemplate.replace(/\{\s*value\s*\}/,x.value?`${r.modelValue}`:`${A.value}`):r.showText&&(le=r.texts[Math.ceil(A.value)-1]),le}),P=oe(()=>r.modelValue*100-Math.floor(r.modelValue)*100),F=oe(()=>Jn(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),D=oe(()=>{const le=i(A.value,F.value);return xi(le)?"":le}),V=oe(()=>{let le="";return x.value?le=`${P.value}%`:r.allowHalf&&(le="50%"),{color:D.value,width:le}}),H=oe(()=>{let le=Jn(r.icons)?[...r.icons]:{...r.icons};return le=sC(le),Jn(le)?{[r.lowThreshold]:le[0],[r.highThreshold]:{value:le[1],excluded:!0},[r.max]:le[2]}:le}),Q=oe(()=>i(r.modelValue,H.value)),G=oe(()=>x.value?Xr(r.disabledVoidIcon)?r.disabledVoidIcon:sC(r.disabledVoidIcon):Xr(r.voidIcon)?r.voidIcon:sC(r.voidIcon)),W=oe(()=>i(A.value,H.value));function te(le){const ie=x.value&&P.value>0&&le-1<r.modelValue&&le>r.modelValue,pe=r.allowHalf&&y.value&&le-.5<=A.value&&le>A.value;return ie||pe}function q(le){r.clearable&&le===r.modelValue&&(le=0),n(Si,le),r.modelValue!==le&&n("change",le)}function Y(le){x.value||(r.allowHalf&&y.value?q(A.value):q(le))}function ee(le){if(x.value)return;let ie=A.value;const pe=le.code;return pe===Fr.up||pe===Fr.right?(r.allowHalf?ie+=.5:ie+=1,le.stopPropagation(),le.preventDefault()):(pe===Fr.left||pe===Fr.down)&&(r.allowHalf?ie-=.5:ie-=1,le.stopPropagation(),le.preventDefault()),ie=ie<0?0:ie,ie=ie>r.max?r.max:ie,n(Si,ie),n("change",ie),ie}function ce(le,ie){if(!x.value){if(r.allowHalf&&ie){let pe=ie.target;bp(pe,o.e("item"))&&(pe=pe.querySelector(`.${o.e("icon")}`)),(pe.clientWidth===0||bp(pe,o.e("decimal")))&&(pe=pe.parentNode),y.value=ie.offsetX*2<=pe.clientWidth,A.value=y.value?le-.5:le}else A.value=le;v.value=le}}function se(){x.value||(r.allowHalf&&(y.value=r.modelValue!==Math.floor(r.modelValue)),A.value=r.modelValue,v.value=-1)}return zt(()=>r.modelValue,le=>{A.value=le,y.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||n(Si,0),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-rate",ref:"https://element-plus.org/en-US/component/rate.html"},oe(()=>!!r.label)),e({setCurrentValue:ce,resetCurrentValue:se}),(le,ie)=>{var pe;return ve(),Ue("div",{id:T(d),class:xe([T(C),T(o).is("disabled",T(x))]),role:"slider","aria-label":T(p)?void 0:le.label||le.ariaLabel||"rating","aria-labelledby":T(p)?(pe=T(a))==null?void 0:pe.labelId:void 0,"aria-valuenow":A.value,"aria-valuetext":T(I)||void 0,"aria-valuemin":"0","aria-valuemax":le.max,tabindex:"0",style:vr(T(M)),onKeydown:ee},[(ve(!0),Ue(_r,null,cs(le.max,(ue,me)=>(ve(),Ue("span",{key:me,class:xe(T(o).e("item")),onMousemove:Le=>ce(ue,Le),onMouseleave:se,onClick:Le=>Y(ue)},[pt(T(mr),{class:xe([T(o).e("icon"),{hover:v.value===ue},T(o).is("active",ue<=A.value)])},{default:It(()=>[te(ue)?wt("v-if",!0):(ve(),Ue(_r,{key:0},[ci((ve(),qt(Mi(T(W)),null,null,512)),[[Hs,ue<=A.value]]),ci((ve(),qt(Mi(T(G)),null,null,512)),[[Hs,!(ue<=A.value)]])],64)),te(ue)?(ve(),Ue(_r,{key:1},[(ve(),qt(Mi(T(G)),{class:xe([T(o).em("decimal","box")])},null,8,["class"])),pt(T(mr),{style:vr(T(V)),class:xe([T(o).e("icon"),T(o).e("decimal")])},{default:It(()=>[(ve(),qt(Mi(T(Q))))]),_:1},8,["style","class"])],64)):wt("v-if",!0)]),_:2},1032,["class"])],42,H7e))),128)),le.showText||le.showScore?(ve(),Ue("span",{key:0,class:xe(T(o).e("text")),style:vr({color:le.textColor})},Nn(T(I)),7)):wt("v-if",!0)],46,V7e)}}});var j7e=Fn(Q7e,[["__file","rate.vue"]]);const K7e=_i(j7e),Ux={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},YZ={[Ux.success]:cFe,[Ux.warning]:c2,[Ux.error]:MV,[Ux.info]:LV},W7e=Ln({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),q7e=Ge({name:"ElResult"}),Y7e=Ge({...q7e,props:W7e,setup(t){const e=t,n=_n("result"),r=oe(()=>{const i=e.icon,s=i&&Ux[i]?Ux[i]:"icon-info",a=YZ[s]||YZ["icon-info"];return{class:s,component:a}});return(i,s)=>(ve(),Ue("div",{class:xe(T(n).b())},[rt("div",{class:xe(T(n).e("icon"))},[kt(i.$slots,"icon",{},()=>[T(r).component?(ve(),qt(Mi(T(r).component),{key:0,class:xe(T(r).class)},null,8,["class"])):wt("v-if",!0)])],2),i.title||i.$slots.title?(ve(),Ue("div",{key:0,class:xe(T(n).e("title"))},[kt(i.$slots,"title",{},()=>[rt("p",null,Nn(i.title),1)])],2)):wt("v-if",!0),i.subTitle||i.$slots["sub-title"]?(ve(),Ue("div",{key:1,class:xe(T(n).e("subtitle"))},[kt(i.$slots,"sub-title",{},()=>[rt("p",null,Nn(i.subTitle),1)])],2)):wt("v-if",!0),i.$slots.extra?(ve(),Ue("div",{key:2,class:xe(T(n).e("extra"))},[kt(i.$slots,"extra")],2)):wt("v-if",!0)],2))}});var X7e=Fn(Y7e,[["__file","result.vue"]]);const Z7e=_i(X7e);var XZ=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function J7e(t,e){return!!(t===e||XZ(t)&&XZ(e))}function eQe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!J7e(t[n],e[n]))return!1;return!0}function tQe(t,e){e===void 0&&(e=eQe);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var a=t.apply(this,i);return n={lastResult:a,lastArgs:i,lastThis:this},a}return r.clear=function(){n=null},r}const mhe=()=>{const e=mi().proxy.$props;return oe(()=>{const n=(r,i,s)=>({});return e.perfMode?s2(n):tQe(n)})},H3=50,mO="itemRendered",vO="scroll",zx="forward",yO="backward",Ap="auto",w2="smart",WI="start",Qg="center",qI="end",WC="horizontal",xH="vertical",nQe="ltr",dC="rtl",YI="negative",CH="positive-ascending",EH="positive-descending",rQe={[WC]:"left",[xH]:"top"},iQe=20,sQe={[WC]:"deltaX",[xH]:"deltaY"},oQe=({atEndEdge:t,atStartEdge:e,layout:n},r)=>{let i,s=0;const a=o=>o<0&&e.value||o>0&&t.value;return{hasReachedEdge:a,onWheel:o=>{xb(i);const d=o[sQe[n.value]];a(s)&&a(s+d)||(s+=d,$ae()||o.preventDefault(),i=n_(()=>{r(s),s=0}))}}},G3=GA({type:Mt([Number,Function]),required:!0}),Q3=GA({type:Number}),j3=GA({type:Number,default:2}),aQe=GA({type:String,values:["ltr","rtl"],default:"ltr"}),K3=GA({type:Number,default:0}),_O=GA({type:Number,required:!0}),vhe=GA({type:String,values:["horizontal","vertical"],default:xH}),yhe=Ln({className:{type:String,default:""},containerElement:{type:Mt([String,Object]),default:"div"},data:{type:Mt(Array),default:()=>Ba([])},direction:aQe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Mt([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),_he=Ln({cache:j3,estimatedItemSize:Q3,layout:vhe,initScrollOffset:K3,total:_O,itemSize:G3,...yhe}),W3={type:Number,default:6},bhe={type:Number,default:0},whe={type:Number,default:2},rb=Ln({columnCache:j3,columnWidth:G3,estimatedColumnWidth:Q3,estimatedRowHeight:Q3,initScrollLeft:K3,initScrollTop:K3,itemKey:{type:Mt(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:j3,rowHeight:G3,totalColumn:_O,totalRow:_O,hScrollbarSize:W3,vScrollbarSize:W3,scrollbarStartGap:bhe,scrollbarEndGap:whe,role:String,...yhe}),xhe=Ln({alwaysOn:Boolean,class:String,layout:vhe,total:_O,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:W3,startGap:bhe,endGap:whe,visible:Boolean}),V1=(t,e)=>t<e?zx:yO,XI=t=>t===nQe||t===dC||t===WC,ZZ=t=>t===dC;let qw=null;function bO(t=!1){if(qw===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?qw=EH:(e.scrollLeft=1,e.scrollLeft===0?qw=YI:qw=CH),document.body.removeChild(e),qw}return qw}function lQe({move:t,size:e,bar:n},r){const i={},s=`translate${n.axis}(${t}px)`;return i[n.size]=e,i.transform=s,i.msTransform=s,i.webkitTransform=s,r==="horizontal"?i.height="100%":i.width="100%",i}const q3=Ge({name:"ElVirtualScrollBar",props:xhe,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=oe(()=>t.startGap+t.endGap),r=_n("virtual-scrollbar"),i=_n("scrollbar"),s=Me(),a=Me();let l=null,o=null;const d=Xs({isDragging:!1,traveled:0}),p=oe(()=>wce[t.layout]),A=oe(()=>t.clientSize-T(n)),v=oe(()=>({position:"absolute",width:`${WC===t.layout?A.value:t.scrollbarSize}px`,height:`${WC===t.layout?t.scrollbarSize:A.value}px`,[rQe[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),y=oe(()=>{const H=t.ratio,Q=t.clientSize;if(H>=100)return Number.POSITIVE_INFINITY;if(H>=50)return H*Q/100;const G=Q/3;return Math.floor(Math.min(Math.max(H*Q,iQe),G))}),C=oe(()=>{if(!Number.isFinite(y.value))return{display:"none"};const H=`${y.value}px`;return lQe({bar:p.value,size:H,move:d.traveled},t.layout)}),x=oe(()=>Math.floor(t.clientSize-y.value-T(n))),M=()=>{window.addEventListener("mousemove",D),window.addEventListener("mouseup",F);const H=T(a);H&&(o=document.onselectstart,document.onselectstart=()=>!1,H.addEventListener("touchmove",D),H.addEventListener("touchend",F))},I=()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",F),document.onselectstart=o,o=null;const H=T(a);H&&(H.removeEventListener("touchmove",D),H.removeEventListener("touchend",F))},P=H=>{H.stopImmediatePropagation(),!(H.ctrlKey||[1,2].includes(H.button))&&(d.isDragging=!0,d[p.value.axis]=H.currentTarget[p.value.offset]-(H[p.value.client]-H.currentTarget.getBoundingClientRect()[p.value.direction]),e("start-move"),M())},F=()=>{d.isDragging=!1,d[p.value.axis]=0,e("stop-move"),I()},D=H=>{const{isDragging:Q}=d;if(!Q||!a.value||!s.value)return;const G=d[p.value.axis];if(!G)return;xb(l);const W=(s.value.getBoundingClientRect()[p.value.direction]-H[p.value.client])*-1,te=a.value[p.value.offset]-G,q=W-te;l=n_(()=>{d.traveled=Math.max(t.startGap,Math.min(q,x.value)),e("scroll",q,x.value)})},V=H=>{const Q=Math.abs(H.target.getBoundingClientRect()[p.value.direction]-H[p.value.client]),G=a.value[p.value.offset]/2,W=Q-G;d.traveled=Math.max(0,Math.min(W,x.value)),e("scroll",W,x.value)};return zt(()=>t.scrollFrom,H=>{d.isDragging||(d.traveled=Math.ceil(H*x.value))}),Do(()=>{I()}),()=>Br("div",{role:"presentation",ref:s,class:[r.b(),t.class,(t.alwaysOn||d.isDragging)&&"always-on"],style:v.value,onMousedown:qr(V,["stop","prevent"]),onTouchstartPrevent:P},Br("div",{ref:a,class:i.e("thumb"),style:C.value,onMousedown:P},[]))}}),Che=({name:t,getOffset:e,getItemSize:n,getItemOffset:r,getEstimatedTotalSize:i,getStartIndexForOffset:s,getStopIndexForStartIndex:a,initCache:l,clearCache:o,validateProps:d})=>Ge({name:t??"ElVirtualList",props:_he,emits:[mO,vO],setup(p,{emit:A,expose:v}){d(p);const y=mi(),C=_n("vl"),x=Me(l(p,y)),M=mhe(),I=Me(),P=Me(),F=Me(),D=Me({isScrolling:!1,scrollDir:"forward",scrollOffset:Hr(p.initScrollOffset)?p.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:p.scrollbarAlwaysOn}),V=oe(()=>{const{total:be,cache:_e}=p,{isScrolling:$e,scrollDir:Re,scrollOffset:Ie}=T(D);if(be===0)return[0,0,0,0];const Ne=s(p,Ie,T(x)),Je=a(p,Ne,Ie,T(x)),je=!$e||Re===yO?Math.max(1,_e):1,ft=!$e||Re===zx?Math.max(1,_e):1;return[Math.max(0,Ne-je),Math.max(0,Math.min(be-1,Je+ft)),Ne,Je]}),H=oe(()=>i(p,T(x))),Q=oe(()=>XI(p.layout)),G=oe(()=>[{position:"relative",[`overflow-${Q.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:p.direction,height:Hr(p.height)?`${p.height}px`:p.height,width:Hr(p.width)?`${p.width}px`:p.width},p.style]),W=oe(()=>{const be=T(H),_e=T(Q);return{height:_e?"100%":`${be}px`,pointerEvents:T(D).isScrolling?"none":void 0,width:_e?`${be}px`:"100%"}}),te=oe(()=>Q.value?p.width:p.height),{onWheel:q}=oQe({atStartEdge:oe(()=>D.value.scrollOffset<=0),atEndEdge:oe(()=>D.value.scrollOffset>=H.value),layout:oe(()=>p.layout)},be=>{var _e,$e;($e=(_e=F.value).onMouseUp)==null||$e.call(_e),ie(Math.min(D.value.scrollOffset+be,H.value-te.value))}),Y=()=>{const{total:be}=p;if(be>0){const[Ie,Ne,Je,je]=T(V);A(mO,Ie,Ne,Je,je)}const{scrollDir:_e,scrollOffset:$e,updateRequested:Re}=T(D);A(vO,_e,$e,Re)},ee=be=>{const{clientHeight:_e,scrollHeight:$e,scrollTop:Re}=be.currentTarget,Ie=T(D);if(Ie.scrollOffset===Re)return;const Ne=Math.max(0,Math.min(Re,$e-_e));D.value={...Ie,isScrolling:!0,scrollDir:V1(Ie.scrollOffset,Ne),scrollOffset:Ne,updateRequested:!1},Tr(me)},ce=be=>{const{clientWidth:_e,scrollLeft:$e,scrollWidth:Re}=be.currentTarget,Ie=T(D);if(Ie.scrollOffset===$e)return;const{direction:Ne}=p;let Je=$e;if(Ne===dC)switch(bO()){case YI:{Je=-$e;break}case EH:{Je=Re-_e-$e;break}}Je=Math.max(0,Math.min(Je,Re-_e)),D.value={...Ie,isScrolling:!0,scrollDir:V1(Ie.scrollOffset,Je),scrollOffset:Je,updateRequested:!1},Tr(me)},se=be=>{T(Q)?ce(be):ee(be),Y()},le=(be,_e)=>{const $e=(H.value-te.value)/_e*be;ie(Math.min(H.value-te.value,$e))},ie=be=>{be=Math.max(be,0),be!==T(D).scrollOffset&&(D.value={...T(D),scrollOffset:be,scrollDir:V1(T(D).scrollOffset,be),updateRequested:!0},Tr(me))},pe=(be,_e=Ap)=>{const{scrollOffset:$e}=T(D);be=Math.max(0,Math.min(be,p.total-1)),ie(e(p,be,_e,$e,T(x)))},ue=be=>{const{direction:_e,itemSize:$e,layout:Re}=p,Ie=M.value(o&&$e,o&&Re,o&&_e);let Ne;if(vs(Ie,String(be)))Ne=Ie[be];else{const Je=r(p,be,T(x)),je=n(p,be,T(x)),ft=T(Q),Et=_e===dC,ke=ft?Je:0;Ie[be]=Ne={position:"absolute",left:Et?void 0:`${ke}px`,right:Et?`${ke}px`:void 0,top:ft?0:`${Je}px`,height:ft?"100%":`${je}px`,width:ft?`${je}px`:"100%"}}return Ne},me=()=>{D.value.isScrolling=!1,Tr(()=>{M.value(-1,null,null)})},Le=()=>{const be=I.value;be&&(be.scrollTop=0)};dr(()=>{if(!As)return;const{initScrollOffset:be}=p,_e=T(I);Hr(be)&&_e&&(T(Q)?_e.scrollLeft=be:_e.scrollTop=be),Y()}),o0(()=>{const{direction:be,layout:_e}=p,{scrollOffset:$e,updateRequested:Re}=T(D),Ie=T(I);if(Re&&Ie)if(_e===WC)if(be===dC)switch(bO()){case YI:{Ie.scrollLeft=-$e;break}case CH:{Ie.scrollLeft=$e;break}default:{const{clientWidth:Ne,scrollWidth:Je}=Ie;Ie.scrollLeft=Je-Ne-$e;break}}else Ie.scrollLeft=$e;else Ie.scrollTop=$e});const ae={ns:C,clientSize:te,estimatedTotalSize:H,windowStyle:G,windowRef:I,innerRef:P,innerStyle:W,itemsToRender:V,scrollbarRef:F,states:D,getItemStyle:ue,onScroll:se,onScrollbarScroll:le,onWheel:q,scrollTo:ie,scrollToItem:pe,resetScrollTop:Le};return v({windowRef:I,innerRef:P,getItemStyleCache:M,scrollTo:ie,scrollToItem:pe,resetScrollTop:Le,states:D}),ae},render(p){var A;const{$slots:v,className:y,clientSize:C,containerElement:x,data:M,getItemStyle:I,innerElement:P,itemsToRender:F,innerStyle:D,layout:V,total:H,onScroll:Q,onScrollbarScroll:G,onWheel:W,states:te,useIsScrolling:q,windowStyle:Y,ns:ee}=p,[ce,se]=F,le=Mi(x),ie=Mi(P),pe=[];if(H>0)for(let ae=ce;ae<=se;ae++)pe.push((A=v.default)==null?void 0:A.call(v,{data:M,key:ae,index:ae,isScrolling:q?te.isScrolling:void 0,style:I(ae)}));const ue=[Br(ie,{style:D,ref:"innerRef"},Xr(ie)?pe:{default:()=>pe})],me=Br(q3,{ref:"scrollbarRef",clientSize:C,layout:V,onScroll:G,ratio:C*100/this.estimatedTotalSize,scrollFrom:te.scrollOffset/(this.estimatedTotalSize-C),total:H}),Le=Br(le,{class:[ee.e("window"),y],style:Y,onScroll:Q,onWheel:W,ref:"windowRef",key:0},Xr(le)?[ue]:{default:()=>[ue]});return Br("div",{key:0,class:[ee.e("wrapper"),te.scrollbarAlwaysOn?"always-on":""]},[Le,me])}}),Ehe=Che({name:"ElFixedSizeList",getItemOffset:({itemSize:t},e)=>e*t,getItemSize:({itemSize:t})=>t,getEstimatedTotalSize:({total:t,itemSize:e})=>e*t,getOffset:({height:t,total:e,itemSize:n,layout:r,width:i},s,a,l)=>{const o=XI(r)?i:t,d=Math.max(0,e*n-o),p=Math.min(d,s*n),A=Math.max(0,(s+1)*n-o);switch(a===w2&&(l>=A-o&&l<=p+o?a=Ap:a=Qg),a){case WI:return p;case qI:return A;case Qg:{const v=Math.round(A+(p-A)/2);return v<Math.ceil(o/2)?0:v>d+Math.floor(o/2)?d:v}case Ap:default:return l>=A&&l<=p?l:l<A?A:p}},getStartIndexForOffset:({total:t,itemSize:e},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getStopIndexForStartIndex:({height:t,total:e,itemSize:n,layout:r,width:i},s,a)=>{const l=s*n,o=XI(r)?i:t,d=Math.ceil((o+a-l)/n);return Math.max(0,Math.min(e-1,s+d-1))},initCache(){},clearCache:!0,validateProps(){}}),$x=(t,e,n)=>{const{itemSize:r}=t,{items:i,lastVisitedIndex:s}=n;if(e>s){let a=0;if(s>=0){const l=i[s];a=l.offset+l.size}for(let l=s+1;l<=e;l++){const o=r(l);i[l]={offset:a,size:o},a+=o}n.lastVisitedIndex=e}return i[e]},cQe=(t,e,n)=>{const{items:r,lastVisitedIndex:i}=e;return(i>0?r[i].offset:0)>=n?She(t,e,0,i,n):uQe(t,e,Math.max(0,i),n)},She=(t,e,n,r,i)=>{for(;n<=r;){const s=n+Math.floor((r-n)/2),a=$x(t,s,e).offset;if(a===i)return s;a<i?n=s+1:a>i&&(r=s-1)}return Math.max(0,n-1)},uQe=(t,e,n,r)=>{const{total:i}=t;let s=1;for(;n<i&&$x(t,n,e).offset<r;)n+=s,s*=2;return She(t,e,Math.floor(n/2),Math.min(n,i-1),r)},JZ=({total:t},{items:e,estimatedItemSize:n,lastVisitedIndex:r})=>{let i=0;if(r>=t&&(r=t-1),r>=0){const l=e[r];i=l.offset+l.size}const a=(t-r-1)*n;return i+a},hQe=Che({name:"ElDynamicSizeList",getItemOffset:(t,e,n)=>$x(t,e,n).offset,getItemSize:(t,e,{items:n})=>n[e].size,getEstimatedTotalSize:JZ,getOffset:(t,e,n,r,i)=>{const{height:s,layout:a,width:l}=t,o=XI(a)?l:s,d=$x(t,e,i),p=JZ(t,i),A=Math.max(0,Math.min(p-o,d.offset)),v=Math.max(0,d.offset-o+d.size);switch(n===w2&&(r>=v-o&&r<=A+o?n=Ap:n=Qg),n){case WI:return A;case qI:return v;case Qg:return Math.round(v+(A-v)/2);case Ap:default:return r>=v&&r<=A?r:r<v?v:A}},getStartIndexForOffset:(t,e,n)=>cQe(t,n,e),getStopIndexForStartIndex:(t,e,n,r)=>{const{height:i,total:s,layout:a,width:l}=t,o=XI(a)?l:i,d=$x(t,e,r),p=n+o;let A=d.offset+d.size,v=e;for(;v<s-1&&A<p;)v++,A+=$x(t,v,r).size;return v},initCache({estimatedItemSize:t=H3},e){const n={items:{},estimatedItemSize:t,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(r,i=!0)=>{var s,a;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,r-1),(s=e.exposed)==null||s.getItemStyleCache(-1),i&&((a=e.proxy)==null||a.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:t})=>{}}),dQe=({atXEndEdge:t,atXStartEdge:e,atYEndEdge:n,atYStartEdge:r},i)=>{let s=null,a=0,l=0;const o=(p,A)=>{const v=p<=0&&e.value||p>=0&&t.value,y=A<=0&&r.value||A>=0&&n.value;return v&&y};return{hasReachedEdge:o,onWheel:p=>{xb(s);let A=p.deltaX,v=p.deltaY;Math.abs(A)>Math.abs(v)?v=0:A=0,p.shiftKey&&v!==0&&(A=v,v=0),!(o(a,l)&&o(a+A,l+v))&&(a+=A,l+=v,p.preventDefault(),s=n_(()=>{i(a,l),a=0,l=0}))}}},The=({name:t,clearCache:e,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:i,getEstimatedTotalHeight:s,getEstimatedTotalWidth:a,getColumnOffset:l,getRowOffset:o,getRowPosition:d,getRowStartIndexForOffset:p,getRowStopIndexForStartIndex:A,initCache:v,injectToInstance:y,validateProps:C})=>Ge({name:t??"ElVirtualList",props:rb,emits:[mO,vO],setup(x,{emit:M,expose:I,slots:P}){const F=_n("vl");C(x);const D=mi(),V=Me(v(x,D));y==null||y(D,V);const H=Me(),Q=Me(),G=Me(),W=Me(null),te=Me({isScrolling:!1,scrollLeft:Hr(x.initScrollLeft)?x.initScrollLeft:0,scrollTop:Hr(x.initScrollTop)?x.initScrollTop:0,updateRequested:!1,xAxisScrollDir:zx,yAxisScrollDir:zx}),q=mhe(),Y=oe(()=>Number.parseInt(`${x.height}`,10)),ee=oe(()=>Number.parseInt(`${x.width}`,10)),ce=oe(()=>{const{totalColumn:Tt,totalRow:Ut,columnCache:Rt}=x,{isScrolling:Bt,xAxisScrollDir:Ht,scrollLeft:xt}=T(te);if(Tt===0||Ut===0)return[0,0,0,0];const Zt=r(x,xt,T(V)),un=i(x,Zt,xt,T(V)),Ft=!Bt||Ht===yO?Math.max(1,Rt):1,mt=!Bt||Ht===zx?Math.max(1,Rt):1;return[Math.max(0,Zt-Ft),Math.max(0,Math.min(Tt-1,un+mt)),Zt,un]}),se=oe(()=>{const{totalColumn:Tt,totalRow:Ut,rowCache:Rt}=x,{isScrolling:Bt,yAxisScrollDir:Ht,scrollTop:xt}=T(te);if(Tt===0||Ut===0)return[0,0,0,0];const Zt=p(x,xt,T(V)),un=A(x,Zt,xt,T(V)),Ft=!Bt||Ht===yO?Math.max(1,Rt):1,mt=!Bt||Ht===zx?Math.max(1,Rt):1;return[Math.max(0,Zt-Ft),Math.max(0,Math.min(Ut-1,un+mt)),Zt,un]}),le=oe(()=>s(x,T(V))),ie=oe(()=>a(x,T(V))),pe=oe(()=>{var Tt;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:x.direction,height:Hr(x.height)?`${x.height}px`:x.height,width:Hr(x.width)?`${x.width}px`:x.width},(Tt=x.style)!=null?Tt:{}]}),ue=oe(()=>{const Tt=`${T(ie)}px`;return{height:`${T(le)}px`,pointerEvents:T(te).isScrolling?"none":void 0,width:Tt}}),me=()=>{const{totalColumn:Tt,totalRow:Ut}=x;if(Tt>0&&Ut>0){const[un,Ft,mt,Be]=T(ce),[ze,it,bt,Qe]=T(se);M(mO,{columnCacheStart:un,columnCacheEnd:Ft,rowCacheStart:ze,rowCacheEnd:it,columnVisibleStart:mt,columnVisibleEnd:Be,rowVisibleStart:bt,rowVisibleEnd:Qe})}const{scrollLeft:Rt,scrollTop:Bt,updateRequested:Ht,xAxisScrollDir:xt,yAxisScrollDir:Zt}=T(te);M(vO,{xAxisScrollDir:xt,scrollLeft:Rt,yAxisScrollDir:Zt,scrollTop:Bt,updateRequested:Ht})},Le=Tt=>{const{clientHeight:Ut,clientWidth:Rt,scrollHeight:Bt,scrollLeft:Ht,scrollTop:xt,scrollWidth:Zt}=Tt.currentTarget,un=T(te);if(un.scrollTop===xt&&un.scrollLeft===Ht)return;let Ft=Ht;if(ZZ(x.direction))switch(bO()){case YI:Ft=-Ht;break;case EH:Ft=Zt-Rt-Ht;break}te.value={...un,isScrolling:!0,scrollLeft:Ft,scrollTop:Math.max(0,Math.min(xt,Bt-Ut)),updateRequested:!0,xAxisScrollDir:V1(un.scrollLeft,Ft),yAxisScrollDir:V1(un.scrollTop,xt)},Tr(()=>Ne()),Je(),me()},ae=(Tt,Ut)=>{const Rt=T(Y),Bt=(le.value-Rt)/Ut*Tt;$e({scrollTop:Math.min(le.value-Rt,Bt)})},be=(Tt,Ut)=>{const Rt=T(ee),Bt=(ie.value-Rt)/Ut*Tt;$e({scrollLeft:Math.min(ie.value-Rt,Bt)})},{onWheel:_e}=dQe({atXStartEdge:oe(()=>te.value.scrollLeft<=0),atXEndEdge:oe(()=>te.value.scrollLeft>=ie.value-T(ee)),atYStartEdge:oe(()=>te.value.scrollTop<=0),atYEndEdge:oe(()=>te.value.scrollTop>=le.value-T(Y))},(Tt,Ut)=>{var Rt,Bt,Ht,xt;(Bt=(Rt=Q.value)==null?void 0:Rt.onMouseUp)==null||Bt.call(Rt),(xt=(Ht=G.value)==null?void 0:Ht.onMouseUp)==null||xt.call(Ht);const Zt=T(ee),un=T(Y);$e({scrollLeft:Math.min(te.value.scrollLeft+Tt,ie.value-Zt),scrollTop:Math.min(te.value.scrollTop+Ut,le.value-un)})}),$e=({scrollLeft:Tt=te.value.scrollLeft,scrollTop:Ut=te.value.scrollTop})=>{Tt=Math.max(Tt,0),Ut=Math.max(Ut,0);const Rt=T(te);Ut===Rt.scrollTop&&Tt===Rt.scrollLeft||(te.value={...Rt,xAxisScrollDir:V1(Rt.scrollLeft,Tt),yAxisScrollDir:V1(Rt.scrollTop,Ut),scrollLeft:Tt,scrollTop:Ut,updateRequested:!0},Tr(()=>Ne()),Je(),me())},Re=(Tt=0,Ut=0,Rt=Ap)=>{const Bt=T(te);Ut=Math.max(0,Math.min(Ut,x.totalColumn-1)),Tt=Math.max(0,Math.min(Tt,x.totalRow-1));const Ht=Ble(F.namespace.value),xt=T(V),Zt=s(x,xt),un=a(x,xt);$e({scrollLeft:l(x,Ut,Rt,Bt.scrollLeft,xt,un>x.width?Ht:0),scrollTop:o(x,Tt,Rt,Bt.scrollTop,xt,Zt>x.height?Ht:0)})},Ie=(Tt,Ut)=>{const{columnWidth:Rt,direction:Bt,rowHeight:Ht}=x,xt=q.value(e&&Rt,e&&Ht,e&&Bt),Zt=`${Tt},${Ut}`;if(vs(xt,Zt))return xt[Zt];{const[,un]=n(x,Ut,T(V)),Ft=T(V),mt=ZZ(Bt),[Be,ze]=d(x,Tt,Ft),[it]=n(x,Ut,Ft);return xt[Zt]={position:"absolute",left:mt?void 0:`${un}px`,right:mt?`${un}px`:void 0,top:`${ze}px`,height:`${Be}px`,width:`${it}px`},xt[Zt]}},Ne=()=>{te.value.isScrolling=!1,Tr(()=>{q.value(-1,null,null)})};dr(()=>{if(!As)return;const{initScrollLeft:Tt,initScrollTop:Ut}=x,Rt=T(H);Rt&&(Hr(Tt)&&(Rt.scrollLeft=Tt),Hr(Ut)&&(Rt.scrollTop=Ut)),me()});const Je=()=>{const{direction:Tt}=x,{scrollLeft:Ut,scrollTop:Rt,updateRequested:Bt}=T(te),Ht=T(H);if(Bt&&Ht){if(Tt===dC)switch(bO()){case YI:{Ht.scrollLeft=-Ut;break}case CH:{Ht.scrollLeft=Ut;break}default:{const{clientWidth:xt,scrollWidth:Zt}=Ht;Ht.scrollLeft=Zt-xt-Ut;break}}else Ht.scrollLeft=Math.max(0,Ut);Ht.scrollTop=Math.max(0,Rt)}},{resetAfterColumnIndex:je,resetAfterRowIndex:ft,resetAfter:Et}=D.proxy;I({windowRef:H,innerRef:W,getItemStyleCache:q,scrollTo:$e,scrollToItem:Re,states:te,resetAfterColumnIndex:je,resetAfterRowIndex:ft,resetAfter:Et});const ke=()=>{const{scrollbarAlwaysOn:Tt,scrollbarStartGap:Ut,scrollbarEndGap:Rt,totalColumn:Bt,totalRow:Ht}=x,xt=T(ee),Zt=T(Y),un=T(ie),Ft=T(le),{scrollLeft:mt,scrollTop:Be}=T(te),ze=Br(q3,{ref:Q,alwaysOn:Tt,startGap:Ut,endGap:Rt,class:F.e("horizontal"),clientSize:xt,layout:"horizontal",onScroll:be,ratio:xt*100/un,scrollFrom:mt/(un-xt),total:Ht,visible:!0}),it=Br(q3,{ref:G,alwaysOn:Tt,startGap:Ut,endGap:Rt,class:F.e("vertical"),clientSize:Zt,layout:"vertical",onScroll:ae,ratio:Zt*100/Ft,scrollFrom:Be/(Ft-Zt),total:Bt,visible:!0});return{horizontalScrollbar:ze,verticalScrollbar:it}},Ye=()=>{var Tt;const[Ut,Rt]=T(ce),[Bt,Ht]=T(se),{data:xt,totalColumn:Zt,totalRow:un,useIsScrolling:Ft,itemKey:mt}=x,Be=[];if(un>0&&Zt>0)for(let ze=Bt;ze<=Ht;ze++)for(let it=Ut;it<=Rt;it++)Be.push((Tt=P.default)==null?void 0:Tt.call(P,{columnIndex:it,data:xt,key:mt({columnIndex:it,data:xt,rowIndex:ze}),isScrolling:Ft?T(te).isScrolling:void 0,style:Ie(ze,it),rowIndex:ze}));return Be},at=()=>{const Tt=Mi(x.innerElement),Ut=Ye();return[Br(Tt,{style:T(ue),ref:W},Xr(Tt)?Ut:{default:()=>Ut})]};return()=>{const Tt=Mi(x.containerElement),{horizontalScrollbar:Ut,verticalScrollbar:Rt}=ke(),Bt=at();return Br("div",{key:0,class:F.e("wrapper"),role:x.role},[Br(Tt,{class:x.className,style:T(pe),onScroll:Le,onWheel:_e,ref:H},Xr(Tt)?Bt:{default:()=>Bt}),Ut,Rt])}}}),fQe=The({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:t},e)=>[t,e*t],getRowPosition:({rowHeight:t},e)=>[t,e*t],getEstimatedTotalHeight:({totalRow:t,rowHeight:e})=>e*t,getEstimatedTotalWidth:({totalColumn:t,columnWidth:e})=>e*t,getColumnOffset:({totalColumn:t,columnWidth:e,width:n},r,i,s,a,l)=>{n=Number(n);const o=Math.max(0,t*e-n),d=Math.min(o,r*e),p=Math.max(0,r*e-n+l+e);switch(i==="smart"&&(s>=p-n&&s<=d+n?i=Ap:i=Qg),i){case WI:return d;case qI:return p;case Qg:{const A=Math.round(p+(d-p)/2);return A<Math.ceil(n/2)?0:A>o+Math.floor(n/2)?o:A}case Ap:default:return s>=p&&s<=d?s:p>d||s<p?p:d}},getRowOffset:({rowHeight:t,height:e,totalRow:n},r,i,s,a,l)=>{e=Number(e);const o=Math.max(0,n*t-e),d=Math.min(o,r*t),p=Math.max(0,r*t-e+l+t);switch(i===w2&&(s>=p-e&&s<=d+e?i=Ap:i=Qg),i){case WI:return d;case qI:return p;case Qg:{const A=Math.round(p+(d-p)/2);return A<Math.ceil(e/2)?0:A>o+Math.floor(e/2)?o:A}case Ap:default:return s>=p&&s<=d?s:p>d||s<p?p:d}},getColumnStartIndexForOffset:({columnWidth:t,totalColumn:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getColumnStopIndexForStartIndex:({columnWidth:t,totalColumn:e,width:n},r,i)=>{const s=r*t,a=Math.ceil((n+i-s)/t);return Math.max(0,Math.min(e-1,r+a-1))},getRowStartIndexForOffset:({rowHeight:t,totalRow:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getRowStopIndexForStartIndex:({rowHeight:t,totalRow:e,height:n},r,i)=>{const s=r*t,a=Math.ceil((n+i-s)/t);return Math.max(0,Math.min(e-1,r+a-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:t,rowHeight:e})=>{}}),{max:wO,min:Ihe,floor:Bhe}=Math,pQe={column:"columnWidth",row:"rowHeight"},Y3={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},wv=(t,e,n,r)=>{const[i,s,a]=[n[r],t[pQe[r]],n[Y3[r]]];if(e>a){let l=0;if(a>=0){const o=i[a];l=o.offset+o.size}for(let o=a+1;o<=e;o++){const d=s(o);i[o]={offset:l,size:d},l+=d}n[Y3[r]]=e}return i[e]},Mhe=(t,e,n,r,i,s)=>{for(;n<=r;){const a=n+Bhe((r-n)/2),l=wv(t,a,e,s).offset;if(l===i)return a;l<i?n=a+1:r=a-1}return wO(0,n-1)},AQe=(t,e,n,r,i)=>{const s=i==="column"?t.totalColumn:t.totalRow;let a=1;for(;n<s&&wv(t,n,e,i).offset<r;)n+=a,a*=2;return Mhe(t,e,Bhe(n/2),Ihe(n,s-1),r,i)},eJ=(t,e,n,r)=>{const[i,s]=[e[r],e[Y3[r]]];return(s>0?i[s].offset:0)>=n?Mhe(t,e,0,s,n,r):AQe(t,e,wO(0,s),n,r)},Lhe=({totalRow:t},{estimatedRowHeight:e,lastVisitedRowIndex:n,row:r})=>{let i=0;if(n>=t&&(n=t-1),n>=0){const l=r[n];i=l.offset+l.size}const a=(t-n-1)*e;return i+a},Rhe=({totalColumn:t},{column:e,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let i=0;if(r>t&&(r=t-1),r>=0){const l=e[r];i=l.offset+l.size}const a=(t-r-1)*n;return i+a},gQe={column:Rhe,row:Lhe},tJ=(t,e,n,r,i,s,a)=>{const[l,o]=[s==="row"?t.height:t.width,gQe[s]],d=wv(t,e,i,s),p=o(t,i),A=wO(0,Ihe(p-l,d.offset)),v=wO(0,d.offset-l+a+d.size);switch(n===w2&&(r>=v-l&&r<=A+l?n=Ap:n=Qg),n){case WI:return A;case qI:return v;case Qg:return Math.round(v+(A-v)/2);case Ap:default:return r>=v&&r<=A?r:v>A||r<v?v:A}},mQe=The({name:"ElDynamicSizeGrid",getColumnPosition:(t,e,n)=>{const r=wv(t,e,n,"column");return[r.size,r.offset]},getRowPosition:(t,e,n)=>{const r=wv(t,e,n,"row");return[r.size,r.offset]},getColumnOffset:(t,e,n,r,i,s)=>tJ(t,e,n,r,i,"column",s),getRowOffset:(t,e,n,r,i,s)=>tJ(t,e,n,r,i,"row",s),getColumnStartIndexForOffset:(t,e,n)=>eJ(t,n,e,"column"),getColumnStopIndexForStartIndex:(t,e,n,r)=>{const i=wv(t,e,r,"column"),s=n+t.width;let a=i.offset+i.size,l=e;for(;l<t.totalColumn-1&&a<s;)l++,a+=wv(t,e,r,"column").size;return l},getEstimatedTotalHeight:Lhe,getEstimatedTotalWidth:Rhe,getRowStartIndexForOffset:(t,e,n)=>eJ(t,n,e,"row"),getRowStopIndexForStartIndex:(t,e,n,r)=>{const{totalRow:i,height:s}=t,a=wv(t,e,r,"row"),l=n+s;let o=a.size+a.offset,d=e;for(;d<i-1&&o<l;)d++,o+=wv(t,d,r,"row").size;return d},injectToInstance:(t,e)=>{const n=({columnIndex:s,rowIndex:a},l)=>{var o,d;l=Cl(l)?!0:l,Hr(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),Hr(a)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,a-1)),(o=t.exposed)==null||o.getItemStyleCache.value(-1,null,null),l&&((d=t.proxy)==null||d.$forceUpdate())},r=(s,a)=>{n({columnIndex:s},a)},i=(s,a)=>{n({rowIndex:s},a)};Object.assign(t.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:i,resetAfter:n})},initCache:({estimatedColumnWidth:t=H3,estimatedRowHeight:e=H3})=>({column:{},estimatedColumnWidth:t,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:t,rowHeight:e})=>{}}),vQe=Ge({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:_n("select")}}});function yQe(t,e,n,r,i,s){return t.item.isTitle?(ve(),Ue("div",{key:0,class:xe(t.ns.be("group","title")),style:vr([t.style,{lineHeight:`${t.height}px`}])},Nn(t.item.label),7)):(ve(),Ue("div",{key:1,class:xe(t.ns.be("group","split")),style:vr(t.style)},[rt("span",{class:xe(t.ns.be("group","split-dash")),style:vr({top:`${t.height/2}px`})},null,6)],6))}var _Qe=Fn(vQe,[["render",yQe],["__file","group-item.vue"]]);function bQe(t,{emit:e}){return{hoverItem:()=>{t.disabled||e("hover",t.index)},selectOptionClick:()=>{t.disabled||e("select",t.item,t.index)}}}const Phe={label:"label",value:"value",disabled:"disabled",options:"options"};function x2(t){const e=oe(()=>({...Phe,...t.props}));return{aliasProps:e,getLabel:a=>ll(a,e.value.label),getValue:a=>ll(a,e.value.value),getDisabled:a=>ll(a,e.value.disabled),getOptions:a=>ll(a,e.value.options)}}const wQe=Ln({allowCreate:Boolean,autocomplete:{type:Mt(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:wo,default:x_},effect:{type:Mt(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Mt([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Mt(Array),required:!0},placeholder:{type:String},teleported:qc.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Mt(Object),default:()=>({})},remote:Boolean,size:Nc,props:{type:Mt(Object),default:()=>Phe},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},placement:{type:Mt(String),values:zb,default:"bottom-start"},fallbackPlacements:{type:Mt(Array),default:["bottom-start","top-start","right","left"]},tagType:{...y2.type,default:"info"},...IE,...Eu(["ariaLabel"])}),xQe=Ln({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Mt(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),SH=Symbol("ElSelectV2Injection"),CQe=Ge({props:xQe,emits:["select","hover"],setup(t,{emit:e}){const n=mn(SH),r=_n("select"),{hoverItem:i,selectOptionClick:s}=bQe(t,{emit:e}),{getLabel:a}=x2(n.props);return{ns:r,hoverItem:i,selectOptionClick:s,getLabel:a}}}),EQe=["aria-selected"];function SQe(t,e,n,r,i,s){return ve(),Ue("li",{"aria-selected":t.selected,style:vr(t.style),class:xe([t.ns.be("dropdown","item"),t.ns.is("selected",t.selected),t.ns.is("disabled",t.disabled),t.ns.is("created",t.created),t.ns.is("hovering",t.hovering)]),onMouseenter:e[0]||(e[0]=(...a)=>t.hoverItem&&t.hoverItem(...a)),onClick:e[1]||(e[1]=qr((...a)=>t.selectOptionClick&&t.selectOptionClick(...a),["stop"]))},[kt(t.$slots,"default",{item:t.item,index:t.index,disabled:t.disabled},()=>[rt("span",null,Nn(t.getLabel(t.item)),1)])],46,EQe)}var TQe=Fn(CQe,[["render",SQe],["__file","option-item.vue"]]),IQe=Ge({name:"ElSelectDropdown",props:{loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(t,{slots:e,expose:n}){const r=mn(SH),i=_n("select"),{getLabel:s,getValue:a,getDisabled:l}=x2(r.props),o=Me([]),d=Me(),p=oe(()=>t.data.length);zt(()=>p.value,()=>{var q,Y;(Y=(q=r.tooltipRef.value).updatePopper)==null||Y.call(q)});const A=oe(()=>Cl(r.props.estimatedOptionHeight)),v=oe(()=>A.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:q=>o.value[q]}),y=(q=[],Y)=>{const{props:{valueKey:ee}}=r;return xi(Y)?q&&q.some(ce=>fo(ll(ce,ee))===ll(Y,ee)):q.includes(Y)},C=(q,Y)=>{if(xi(Y)){const{valueKey:ee}=r.props;return ll(q,ee)===ll(Y,ee)}else return q===Y},x=(q,Y)=>r.props.multiple?y(q,a(Y)):C(q,a(Y)),M=(q,Y)=>{const{disabled:ee,multiple:ce,multipleLimit:se}=r.props;return ee||!Y&&(ce?se>0&&q.length>=se:!1)},I=q=>t.hoveringIndex===q;n({listRef:d,isSized:A,isItemDisabled:M,isItemHovering:I,isItemSelected:x,scrollToItem:q=>{const Y=d.value;Y&&Y.scrollToItem(q)},resetScrollTop:()=>{const q=d.value;q&&q.resetScrollTop()}});const D=q=>{const{index:Y,data:ee,style:ce}=q,se=T(A),{itemSize:le,estimatedSize:ie}=T(v),{modelValue:pe}=r.props,{onSelect:ue,onHover:me}=r,Le=ee[Y];if(Le.type==="Group")return pt(_Qe,{item:Le,style:ce,height:se?le:ie},null);const ae=x(pe,Le),be=M(pe,ae),_e=I(Y);return pt(TQe,Gi(q,{selected:ae,disabled:l(Le)||be,created:!!Le.created,hovering:_e,item:Le,onSelect:ue,onHover:me}),{default:$e=>{var Re;return((Re=e.default)==null?void 0:Re.call(e,$e))||pt("span",null,[s(Le)])}})},{onKeyboardNavigate:V,onKeyboardSelect:H}=r,Q=()=>{V("forward")},G=()=>{V("backward")},W=()=>{r.expanded=!1},te=q=>{const{code:Y}=q,{tab:ee,esc:ce,down:se,up:le,enter:ie}=Fr;switch(Y!==ee&&(q.preventDefault(),q.stopPropagation()),Y){case ee:case ce:{W();break}case se:{Q();break}case le:{G();break}case ie:{H();break}}};return()=>{var q,Y,ee,ce;const{data:se,width:le}=t,{height:ie,multiple:pe,scrollbarAlwaysOn:ue}=r.props,me=T(A)?Ehe:hQe;return pt("div",{class:[i.b("dropdown"),i.is("multiple",pe)],style:{width:`${le}px`}},[(q=e.header)==null?void 0:q.call(e),((Y=e.loading)==null?void 0:Y.call(e))||((ee=e.empty)==null?void 0:ee.call(e))||pt(me,Gi({ref:d},T(v),{className:i.be("dropdown","list"),scrollbarAlwaysOn:ue,data:se,height:ie,width:le,total:se.length,onKeydown:te}),{default:Le=>pt(D,Le,null)}),(ce=e.footer)==null?void 0:ce.call(e)])}}});function BQe(t,e){const{aliasProps:n,getLabel:r,getValue:i}=x2(t),s=Me(0),a=Me(null),l=oe(()=>t.allowCreate&&t.filterable);function o(y){const C=x=>r(x)===y;return t.options&&t.options.some(C)||e.createdOptions.some(C)}function d(y){l.value&&(t.multiple&&y.created?s.value++:a.value=y)}function p(y){if(l.value)if(y&&y.length>0){if(o(y))return;const C={[n.value.value]:y,[n.value.label]:y,created:!0,[n.value.disabled]:!1};e.createdOptions.length>=s.value?e.createdOptions[s.value]=C:e.createdOptions.push(C)}else if(t.multiple)e.createdOptions.length=s.value;else{const C=a.value;e.createdOptions.length=0,C&&C.created&&e.createdOptions.push(C)}}function A(y){if(!l.value||!y||!y.created||y.created&&t.reserveKeyword&&e.inputValue===r(y))return;const C=e.createdOptions.findIndex(x=>i(x)===i(y));~C&&(e.createdOptions.splice(C,1),s.value--)}function v(){l.value&&(e.createdOptions.length=0,s.value=0)}return{createNewOption:p,removeNewOption:A,selectNewOption:d,clearAllNewOption:v}}const MQe=11,LQe=(t,e)=>{const{t:n}=Ts(),r=_n("select"),i=_n("input"),{form:s,formItem:a}=bh(),{inputId:l}=jA(t,{formItemContext:a}),{aliasProps:o,getLabel:d,getValue:p,getDisabled:A,getOptions:v}=x2(t),{valueOnClear:y,isEmptyValue:C}=A2(t),x=Xs({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),M=Me(-1),I=Me(null),P=Me(null),F=Me(null),D=Me(null),V=Me(null),H=Me(null),Q=Me(null),G=Me(null),W=Me(null),te=Me(null),q=Me(null),{wrapperRef:Y,isFocused:ee,handleFocus:ce,handleBlur:se}=p2(V,{afterFocus(){t.automaticDropdown&&!pe.value&&(pe.value=!0,x.menuVisibleOnFocus=!0)},beforeBlur(Vt){var Xn,Ur;return((Xn=F.value)==null?void 0:Xn.isFocusInsideContent(Vt))||((Ur=D.value)==null?void 0:Ur.isFocusInsideContent(Vt))},afterBlur(){pe.value=!1,x.menuVisibleOnFocus=!1}}),le=Me([]),ie=Me([]),pe=Me(!1),ue=oe(()=>t.disabled||(s==null?void 0:s.disabled)),me=oe(()=>{const Vt=ie.value.length*t.itemHeight;return Vt>t.height?t.height:Vt}),Le=oe(()=>t.multiple?Jn(t.modelValue)&&t.modelValue.length>0:!C(t.modelValue)),ae=oe(()=>t.clearable&&!ue.value&&x.inputHovering&&Le.value),be=oe(()=>t.remote&&t.filterable?"":u0),_e=oe(()=>be.value&&r.is("reverse",pe.value)),$e=oe(()=>(a==null?void 0:a.validateState)||""),Re=oe(()=>FV[$e.value]),Ie=oe(()=>t.remote?300:0),Ne=oe(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!x.inputValue&&le.value.length===0?!1:t.filterable&&x.inputValue&&le.value.length>0&&ie.value.length===0?t.noMatchText||n("el.select.noMatch"):le.value.length===0?t.noDataText||n("el.select.noData"):null),Je=Vt=>{const Xn=Ur=>{if(t.filterable&&Gr(t.filterMethod)||t.filterable&&t.remote&&Gr(t.remoteMethod))return!0;const Cr=new RegExp(SV(Vt),"i");return Vt?Cr.test(d(Ur)||""):!0};return t.loading?[]:[...x.createdOptions,...t.options].reduce((Ur,Cr)=>{const Is=v(Cr);if(Jn(Is)){const Bo=Is.filter(Xn);Bo.length>0&&Ur.push({label:d(Cr),isTitle:!0,type:"Group"},...Bo,{type:"Group"})}else(t.remote||Xn(Cr))&&Ur.push(Cr);return Ur},[])},je=()=>{le.value=Je(""),ie.value=Je(x.inputValue)},ft=oe(()=>{const Vt=new Map;return le.value.forEach((Xn,Ur)=>{Vt.set(Kn(p(Xn)),{option:Xn,index:Ur})}),Vt}),Et=oe(()=>{const Vt=new Map;return ie.value.forEach((Xn,Ur)=>{Vt.set(Kn(p(Xn)),{option:Xn,index:Ur})}),Vt}),ke=oe(()=>ie.value.every(Vt=>A(Vt))),Ye=Gl(),at=oe(()=>Ye.value==="small"?"small":"default"),He=()=>{var Vt;M.value=((Vt=I.value)==null?void 0:Vt.offsetWidth)||200},Tt=()=>{if(!P.value)return 0;const Vt=window.getComputedStyle(P.value);return Number.parseFloat(Vt.gap||"6px")},Ut=oe(()=>{const Vt=Tt();return{maxWidth:`${q.value&&t.maxCollapseTags===1?x.selectionWidth-x.collapseItemWidth-Vt:x.selectionWidth}px`}}),Rt=oe(()=>({maxWidth:`${x.selectionWidth}px`})),Bt=oe(()=>({width:`${Math.max(x.calculatorWidth,MQe)}px`})),Ht=oe(()=>Jn(t.modelValue)?t.modelValue.length===0&&!x.inputValue:t.filterable?!x.inputValue:!0),xt=oe(()=>{var Vt;const Xn=(Vt=t.placeholder)!=null?Vt:n("el.select.placeholder");return t.multiple||!Le.value?Xn:x.selectedLabel}),Zt=oe(()=>{var Vt,Xn;return(Xn=(Vt=F.value)==null?void 0:Vt.popperRef)==null?void 0:Xn.contentRef}),un=oe(()=>{if(t.multiple){const Vt=t.modelValue.length;if(t.modelValue.length>0&&Et.value.has(t.modelValue[Vt-1])){const{index:Xn}=Et.value.get(t.modelValue[Vt-1]);return Xn}}else if(t.modelValue&&Et.value.has(t.modelValue)){const{index:Vt}=Et.value.get(t.modelValue);return Vt}return-1}),Ft=oe({get(){return pe.value&&Ne.value!==!1},set(Vt){pe.value=Vt}}),mt=oe(()=>t.multiple?t.collapseTags?x.cachedOptions.slice(0,t.maxCollapseTags):x.cachedOptions:[]),Be=oe(()=>t.multiple?t.collapseTags?x.cachedOptions.slice(t.maxCollapseTags):[]:[]),{createNewOption:ze,removeNewOption:it,selectNewOption:bt,clearAllNewOption:Qe}=BQe(t,x),{handleCompositionStart:St,handleCompositionUpdate:yt,handleCompositionEnd:Xe}=fhe(Vt=>Qn(Vt)),_t=()=>{ue.value||(x.menuVisibleOnFocus?x.menuVisibleOnFocus=!1:pe.value=!pe.value)},Gt=()=>{x.inputValue.length>0&&!pe.value&&(pe.value=!0),ze(x.inputValue),hn(x.inputValue)},gt=Rd(Gt,Ie.value),hn=Vt=>{x.previousQuery!==Vt&&(x.previousQuery=Vt,t.filterable&&Gr(t.filterMethod)?t.filterMethod(Vt):t.filterable&&t.remote&&Gr(t.remoteMethod)&&t.remoteMethod(Vt),t.defaultFirstOption&&(t.filterable||t.remote)&&ie.value.length?Tr(rr):Tr(er))},rr=()=>{const Vt=ie.value.filter(Cr=>!Cr.disabled&&Cr.type!=="Group"),Xn=Vt.find(Cr=>Cr.created),Ur=Vt[0];x.hoveringIndex=hr(ie.value,Xn||Ur)},br=Vt=>{vh(t.modelValue,Vt)||e(Qo,Vt)},Qr=Vt=>{e(Si,Vt),br(Vt),x.previousValue=t.multiple?String(Vt):Vt},hr=(Vt=[],Xn)=>{if(!xi(Xn))return Vt.indexOf(Xn);const Ur=t.valueKey;let Cr=-1;return Vt.some((Is,Bo)=>ll(Is,Ur)===ll(Xn,Ur)?(Cr=Bo,!0):!1),Cr},Kn=Vt=>xi(Vt)?ll(Vt,t.valueKey):Vt,ur=()=>{He()},ni=()=>{x.selectionWidth=P.value.getBoundingClientRect().width},us=()=>{x.calculatorWidth=H.value.getBoundingClientRect().width},bi=()=>{x.collapseItemWidth=q.value.getBoundingClientRect().width},is=()=>{var Vt,Xn;(Xn=(Vt=F.value)==null?void 0:Vt.updatePopper)==null||Xn.call(Vt)},Fs=()=>{var Vt,Xn;(Xn=(Vt=D.value)==null?void 0:Vt.updatePopper)==null||Xn.call(Vt)},zr=Vt=>{if(t.multiple){let Xn=t.modelValue.slice();const Ur=hr(Xn,p(Vt));Ur>-1?(Xn=[...Xn.slice(0,Ur),...Xn.slice(Ur+1)],x.cachedOptions.splice(Ur,1),it(Vt)):(t.multipleLimit<=0||Xn.length<t.multipleLimit)&&(Xn=[...Xn,p(Vt)],x.cachedOptions.push(Vt),bt(Vt)),Qr(Xn),Vt.created&&hn(""),t.filterable&&!t.reserveKeyword&&(x.inputValue="")}else x.selectedLabel=d(Vt),Qr(p(Vt)),pe.value=!1,bt(Vt),Vt.created||Qe();Zi()},ss=(Vt,Xn)=>{let Ur=t.modelValue.slice();const Cr=hr(Ur,p(Xn));Cr>-1&&!ue.value&&(Ur=[...t.modelValue.slice(0,Cr),...t.modelValue.slice(Cr+1)],x.cachedOptions.splice(Cr,1),Qr(Ur),e("remove-tag",p(Xn)),it(Xn)),Vt.stopPropagation(),Zi()},Zi=()=>{var Vt;(Vt=V.value)==null||Vt.focus()},en=()=>{var Vt;(Vt=V.value)==null||Vt.blur()},dn=()=>{x.inputValue.length>0?x.inputValue="":pe.value=!1},En=Vt=>Ele(Vt,Xn=>!x.cachedOptions.some(Ur=>p(Ur)===Xn&&A(Ur))),Vn=Vt=>{if(t.multiple&&Vt.code!==Fr.delete&&x.inputValue.length===0){Vt.preventDefault();const Xn=t.modelValue.slice(),Ur=En(Xn);if(Ur<0)return;Xn.splice(Ur,1);const Cr=x.cachedOptions[Ur];x.cachedOptions.splice(Ur,1),it(Cr),Qr(Xn)}},Dt=()=>{let Vt;Jn(t.modelValue)?Vt=[]:Vt=y.value,t.multiple?x.cachedOptions=[]:x.selectedLabel="",pe.value=!1,Qr(Vt),e("clear"),Qe(),Zi()},sn=(Vt,Xn=void 0)=>{const Ur=ie.value;if(!["forward","backward"].includes(Vt)||ue.value||Ur.length<=0||ke.value)return;if(!pe.value)return _t();Xn===void 0&&(Xn=x.hoveringIndex);let Cr=-1;Vt==="forward"?(Cr=Xn+1,Cr>=Ur.length&&(Cr=0)):Vt==="backward"&&(Cr=Xn-1,(Cr<0||Cr>=Ur.length)&&(Cr=Ur.length-1));const Is=Ur[Cr];if(A(Is)||Is.type==="Group")return sn(Vt,Cr);x.hoveringIndex=Cr,Tn(Cr)},Mn=()=>{if(pe.value)~x.hoveringIndex&&ie.value[x.hoveringIndex]&&zr(ie.value[x.hoveringIndex]);else return _t()},Rn=Vt=>{x.hoveringIndex=Vt},er=()=>{t.multiple?x.hoveringIndex=ie.value.findIndex(Vt=>t.modelValue.some(Xn=>Kn(Xn)===Kn(Vt))):x.hoveringIndex=ie.value.findIndex(Vt=>Kn(Vt)===Kn(t.modelValue))},Qn=Vt=>{if(x.inputValue=Vt.target.value,t.remote)gt();else return Gt()},Nr=Vt=>{if(pe.value=!1,ee.value){const Xn=new FocusEvent("focus",Vt);se(Xn)}},si=()=>(x.isBeforeHide=!1,Tr(()=>{~un.value&&Tn(x.hoveringIndex)})),Tn=Vt=>{W.value.scrollToItem(Vt)},jt=Vt=>{const Xn=Kn(Vt);if(ft.value.has(Xn)){const{option:Ur}=ft.value.get(Xn);return Ur}return{[o.value.value]:Vt,[o.value.label]:Vt}},Zn=()=>{if(t.multiple)if(t.modelValue.length>0){x.cachedOptions.length=0,x.previousValue=t.modelValue.toString();for(const Vt of t.modelValue){const Xn=jt(Vt);x.cachedOptions.push(Xn)}}else x.cachedOptions=[],x.previousValue=void 0;else if(Le.value){x.previousValue=t.modelValue;const Vt=ie.value,Xn=Vt.findIndex(Ur=>Kn(p(Ur))===Kn(t.modelValue));~Xn?x.selectedLabel=d(Vt[Xn]):x.selectedLabel=Kn(t.modelValue)}else x.selectedLabel="",x.previousValue=void 0;Qe(),He()};return zt(pe,Vt=>{Vt?hn(""):(x.inputValue="",x.previousQuery=null,x.isBeforeHide=!0,ze("")),e("visible-change",Vt)}),zt(()=>t.modelValue,(Vt,Xn)=>{var Ur;(!Vt||t.multiple&&Vt.toString()!==x.previousValue||!t.multiple&&Kn(Vt)!==Kn(x.previousValue))&&Zn(),!vh(Vt,Xn)&&t.validateEvent&&((Ur=a==null?void 0:a.validate)==null||Ur.call(a,"change").catch(Cr=>void 0))},{deep:!0}),zt(()=>t.options,()=>{const Vt=V.value;(!Vt||Vt&&document.activeElement!==Vt)&&Zn()},{deep:!0,flush:"post"}),zt(()=>ie.value,()=>W.value&&Tr(W.value.resetScrollTop)),bu(()=>{x.isBeforeHide||je()}),bu(()=>{const{valueKey:Vt,options:Xn}=t,Ur=new Map;for(const Cr of Xn){const Is=p(Cr);let Bo=Is;if(xi(Bo)&&(Bo=ll(Is,Vt)),Ur.get(Bo))break;Ur.set(Bo,!0)}}),dr(()=>{Zn()}),Ia(I,ur),Ia(P,ni),Ia(H,us),Ia(W,is),Ia(Y,is),Ia(te,Fs),Ia(q,bi),{inputId:l,collapseTagSize:at,currentPlaceholder:xt,expanded:pe,emptyText:Ne,popupHeight:me,debounce:Ie,allOptions:le,filteredOptions:ie,iconComponent:be,iconReverse:_e,tagStyle:Ut,collapseTagStyle:Rt,inputStyle:Bt,popperSize:M,dropdownMenuVisible:Ft,hasModelValue:Le,shouldShowPlaceholder:Ht,selectDisabled:ue,selectSize:Ye,showClearBtn:ae,states:x,isFocused:ee,nsSelect:r,nsInput:i,calculatorRef:H,inputRef:V,menuRef:W,tagMenuRef:te,tooltipRef:F,tagTooltipRef:D,selectRef:I,wrapperRef:Y,selectionRef:P,prefixRef:Q,suffixRef:G,collapseItemRef:q,popperRef:Zt,validateState:$e,validateIcon:Re,showTagList:mt,collapseTagList:Be,debouncedOnInputChange:gt,deleteTag:ss,getLabel:d,getValue:p,getDisabled:A,getValueKey:Kn,handleBlur:se,handleClear:Dt,handleClickOutside:Nr,handleDel:Vn,handleEsc:dn,handleFocus:ce,focus:Zi,blur:en,handleMenuEnter:si,handleResize:ur,resetSelectionWidth:ni,resetCalculatorWidth:us,updateTooltip:is,updateTagTooltip:Fs,updateOptions:je,toggleMenu:_t,scrollTo:Tn,onInput:Qn,onKeyboardNavigate:sn,onKeyboardSelect:Mn,onSelect:zr,onHover:Rn,handleCompositionStart:St,handleCompositionEnd:Xe,handleCompositionUpdate:yt}},RQe=Ge({name:"ElSelectV2",components:{ElSelectMenu:IQe,ElTag:jI,ElTooltip:_h,ElIcon:mr},directives:{ClickOutside:Yv},props:wQe,emits:[Si,Qo,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=oe(()=>{const{modelValue:i,multiple:s}=t,a=s?[]:void 0;return Jn(i)?s?i:a:s?a:i}),r=LQe(Xs({...dc(t),modelValue:n}),e);return Rr(SH,{props:Xs({...dc(t),height:r.popupHeight,modelValue:n}),tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect}),{...r,modelValue:n}}}),PQe=["id","autocomplete","aria-expanded","aria-label","disabled","readonly","name"],FQe=["textContent"];function OQe(t,e,n,r,i,s){const a=ui("el-tag"),l=ui("el-tooltip"),o=ui("el-icon"),d=ui("el-select-menu"),p=G5("click-outside");return ci((ve(),Ue("div",{ref:"selectRef",class:xe([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:e[14]||(e[14]=A=>t.states.inputHovering=!0),onMouseleave:e[15]||(e[15]=A=>t.states.inputHovering=!1),onClick:e[16]||(e[16]=qr((...A)=>t.toggleMenu&&t.toggleMenu(...A),["prevent","stop"]))},[pt(l,{ref:"tooltipRef",visible:t.dropdownMenuVisible,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,placement:t.placement,pure:"",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[13]||(e[13]=A=>t.states.isBeforeHide=!1)},{default:It(()=>[rt("div",{ref:"wrapperRef",class:xe([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(ve(),Ue("div",{key:0,ref:"prefixRef",class:xe(t.nsSelect.e("prefix"))},[kt(t.$slots,"prefix")],2)):wt("v-if",!0),rt("div",{ref:"selectionRef",class:xe([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.modelValue.length)])},[t.multiple?kt(t.$slots,"tag",{key:0},()=>[(ve(!0),Ue(_r,null,cs(t.showTagList,A=>(ve(),Ue("div",{key:t.getValueKey(t.getValue(A)),class:xe(t.nsSelect.e("selected-item"))},[pt(a,{closable:!t.selectDisabled&&!t.getDisabled(A),size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:vr(t.tagStyle),onClose:v=>t.deleteTag(v,A)},{default:It(()=>[rt("span",{class:xe(t.nsSelect.e("tags-text"))},Nn(t.getLabel(A)),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.modelValue.length>t.maxCollapseTags?(ve(),qt(l,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:It(()=>[rt("div",{ref:"collapseItemRef",class:xe(t.nsSelect.e("selected-item"))},[pt(a,{closable:!1,size:t.collapseTagSize,type:t.tagType,style:vr(t.collapseTagStyle),"disable-transitions":""},{default:It(()=>[rt("span",{class:xe(t.nsSelect.e("tags-text"))}," + "+Nn(t.modelValue.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:It(()=>[rt("div",{ref:"tagMenuRef",class:xe(t.nsSelect.e("selection"))},[(ve(!0),Ue(_r,null,cs(t.collapseTagList,A=>(ve(),Ue("div",{key:t.getValueKey(t.getValue(A)),class:xe(t.nsSelect.e("selected-item"))},[pt(a,{class:"in-tooltip",closable:!t.selectDisabled&&!t.getDisabled(A),size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:v=>t.deleteTag(v,A)},{default:It(()=>[rt("span",{class:xe(t.nsSelect.e("tags-text"))},Nn(t.getLabel(A)),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):wt("v-if",!0)]):wt("v-if",!0),t.selectDisabled?wt("v-if",!0):(ve(),Ue("div",{key:1,class:xe([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[ci(rt("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=A=>t.states.inputValue=A),style:vr(t.inputStyle),autocomplete:t.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":t.expanded,"aria-label":t.ariaLabel,class:xe([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",name:t.name,onFocus:e[1]||(e[1]=(...A)=>t.handleFocus&&t.handleFocus(...A)),onBlur:e[2]||(e[2]=(...A)=>t.handleBlur&&t.handleBlur(...A)),onInput:e[3]||(e[3]=(...A)=>t.onInput&&t.onInput(...A)),onCompositionstart:e[4]||(e[4]=(...A)=>t.handleCompositionStart&&t.handleCompositionStart(...A)),onCompositionupdate:e[5]||(e[5]=(...A)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...A)),onCompositionend:e[6]||(e[6]=(...A)=>t.handleCompositionEnd&&t.handleCompositionEnd(...A)),onKeydown:[e[7]||(e[7]=bo(qr(A=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[8]||(e[8]=bo(qr(A=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[9]||(e[9]=bo(qr((...A)=>t.onKeyboardSelect&&t.onKeyboardSelect(...A),["stop","prevent"]),["enter"])),e[10]||(e[10]=bo(qr((...A)=>t.handleEsc&&t.handleEsc(...A),["stop","prevent"]),["esc"])),e[11]||(e[11]=bo(qr((...A)=>t.handleDel&&t.handleDel(...A),["stop"]),["delete"]))],onClick:e[12]||(e[12]=qr((...A)=>t.toggleMenu&&t.toggleMenu(...A),["stop"]))},null,46,PQe),[[j$,t.states.inputValue]]),t.filterable?(ve(),Ue("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:xe(t.nsSelect.e("input-calculator")),textContent:Nn(t.states.inputValue)},null,10,FQe)):wt("v-if",!0)],2)),t.shouldShowPlaceholder?(ve(),Ue("div",{key:2,class:xe([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[rt("span",null,Nn(t.currentPlaceholder),1)],2)):wt("v-if",!0)],2),rt("div",{ref:"suffixRef",class:xe(t.nsSelect.e("suffix"))},[t.iconComponent?ci((ve(),qt(o,{key:0,class:xe([t.nsSelect.e("caret"),t.nsInput.e("icon"),t.iconReverse])},{default:It(()=>[(ve(),qt(Mi(t.iconComponent)))]),_:1},8,["class"])),[[Hs,!t.showClearBtn]]):wt("v-if",!0),t.showClearBtn&&t.clearIcon?(ve(),qt(o,{key:1,class:xe([t.nsSelect.e("caret"),t.nsInput.e("icon")]),onClick:qr(t.handleClear,["prevent","stop"])},{default:It(()=>[(ve(),qt(Mi(t.clearIcon)))]),_:1},8,["class","onClick"])):wt("v-if",!0),t.validateState&&t.validateIcon?(ve(),qt(o,{key:2,class:xe([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:It(()=>[(ve(),qt(Mi(t.validateIcon)))]),_:1},8,["class"])):wt("v-if",!0)],2)],2)]),content:It(()=>[pt(d,{ref:"menuRef",data:t.filteredOptions,width:t.popperSize,"hovering-index":t.states.hoveringIndex,"scrollbar-always-on":t.scrollbarAlwaysOn},Gv({default:It(A=>[kt(t.$slots,"default",Tv(MC(A)))]),_:2},[t.$slots.header?{name:"header",fn:It(()=>[rt("div",{class:xe(t.nsSelect.be("dropdown","header"))},[kt(t.$slots,"header")],2)])}:void 0,t.$slots.loading&&t.loading?{name:"loading",fn:It(()=>[rt("div",{class:xe(t.nsSelect.be("dropdown","loading"))},[kt(t.$slots,"loading")],2)])}:t.loading||t.filteredOptions.length===0?{name:"empty",fn:It(()=>[rt("div",{class:xe(t.nsSelect.be("dropdown","empty"))},[kt(t.$slots,"empty",{},()=>[rt("span",null,Nn(t.emptyText),1)])],2)])}:void 0,t.$slots.footer?{name:"footer",fn:It(()=>[rt("div",{class:xe(t.nsSelect.be("dropdown","footer"))},[kt(t.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","onBeforeShow"])],34)),[[p,t.handleClickOutside,t.popperRef]])}var dF=Fn(RQe,[["render",OQe],["__file","select.vue"]]);dF.install=t=>{t.component(dF.name,dF)};const NQe=dF,kQe=NQe,DQe=Ln({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),UQe=Ln({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),zQe=Ge({name:"ElSkeletonItem"}),$Qe=Ge({...zQe,props:UQe,setup(t){const e=_n("skeleton");return(n,r)=>(ve(),Ue("div",{class:xe([T(e).e("item"),T(e).e(n.variant)])},[n.variant==="image"?(ve(),qt(T(PFe),{key:0})):wt("v-if",!0)],2))}});var xO=Fn($Qe,[["__file","skeleton-item.vue"]]);const VQe=Ge({name:"ElSkeleton"}),HQe=Ge({...VQe,props:DQe,setup(t,{expose:e}){const n=t,r=_n("skeleton"),i=S5e(Io(n,"loading"),n.throttle);return e({uiLoading:i}),(s,a)=>T(i)?(ve(),Ue("div",Gi({key:0,class:[T(r).b(),T(r).is("animated",s.animated)]},s.$attrs),[(ve(!0),Ue(_r,null,cs(s.count,l=>(ve(),Ue(_r,{key:l},[s.loading?kt(s.$slots,"template",{key:l},()=>[pt(xO,{class:xe(T(r).is("first")),variant:"p"},null,8,["class"]),(ve(!0),Ue(_r,null,cs(s.rows,o=>(ve(),qt(xO,{key:o,class:xe([T(r).e("paragraph"),T(r).is("last",o===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):wt("v-if",!0)],64))),128))],16)):kt(s.$slots,"default",Tv(Gi({key:1},s.$attrs)))}});var GQe=Fn(HQe,[["__file","skeleton.vue"]]);const QQe=_i(GQe,{SkeletonItem:xO}),jQe=Pa(xO),Fhe=Symbol("sliderContextKey"),KQe=Ln({modelValue:{type:Mt([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Nc,inputSize:Nc,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Mt(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Mt(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:zb,default:"top"},marks:{type:Mt(Object)},validateEvent:{type:Boolean,default:!0},...Eu(["ariaLabel"])}),n4=t=>Hr(t)||Jn(t)&&t.every(Hr),WQe={[Si]:n4,[zh]:n4,[Qo]:n4},qQe=(t,e,n)=>{const r=Me();return dr(async()=>{t.range?(Array.isArray(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof t.modelValue!="number"||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),Vo(window,"resize",n),await Tr(),n()}),{sliderWrapper:r}},YQe=t=>oe(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((n,r)=>n-r).filter(n=>n<=t.max&&n>=t.min).map(n=>({point:n,position:(n-t.min)*100/(t.max-t.min),mark:t.marks[n]})):[]),XQe=(t,e,n)=>{const{form:r,formItem:i}=bh(),s=Ds(),a=Me(),l=Me(),o={firstButton:a,secondButton:l},d=oe(()=>t.disabled||(r==null?void 0:r.disabled)||!1),p=oe(()=>Math.min(e.firstValue,e.secondValue)),A=oe(()=>Math.max(e.firstValue,e.secondValue)),v=oe(()=>t.range?`${100*(A.value-p.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),y=oe(()=>t.range?`${100*(p.value-t.min)/(t.max-t.min)}%`:"0%"),C=oe(()=>t.vertical?{height:t.height}:{}),x=oe(()=>t.vertical?{height:v.value,bottom:y.value}:{width:v.value,left:y.value}),M=()=>{s.value&&(e.sliderSize=s.value[`client${t.vertical?"Height":"Width"}`])},I=q=>{const Y=t.min+q*(t.max-t.min)/100;if(!t.range)return a;let ee;return Math.abs(p.value-Y)<Math.abs(A.value-Y)?ee=e.firstValue<e.secondValue?"firstButton":"secondButton":ee=e.firstValue>e.secondValue?"firstButton":"secondButton",o[ee]},P=q=>{const Y=I(q);return Y.value.setPosition(q),Y},F=q=>{e.firstValue=q,V(t.range?[p.value,A.value]:q)},D=q=>{e.secondValue=q,t.range&&V([p.value,A.value])},V=q=>{n(Si,q),n(zh,q)},H=async()=>{await Tr(),n(Qo,t.range?[p.value,A.value]:t.modelValue)},Q=q=>{var Y,ee,ce,se,le,ie;if(d.value||e.dragging)return;M();let pe=0;if(t.vertical){const ue=(ce=(ee=(Y=q.touches)==null?void 0:Y.item(0))==null?void 0:ee.clientY)!=null?ce:q.clientY;pe=(s.value.getBoundingClientRect().bottom-ue)/e.sliderSize*100}else{const ue=(ie=(le=(se=q.touches)==null?void 0:se.item(0))==null?void 0:le.clientX)!=null?ie:q.clientX,me=s.value.getBoundingClientRect().left;pe=(ue-me)/e.sliderSize*100}if(!(pe<0||pe>100))return P(pe)};return{elFormItem:i,slider:s,firstButton:a,secondButton:l,sliderDisabled:d,minValue:p,maxValue:A,runwayStyle:C,barStyle:x,resetSize:M,setPosition:P,emitChange:H,onSliderWrapperPrevent:q=>{var Y,ee;((Y=o.firstButton.value)!=null&&Y.dragging||(ee=o.secondButton.value)!=null&&ee.dragging)&&q.preventDefault()},onSliderClick:q=>{Q(q)&&H()},onSliderDown:async q=>{const Y=Q(q);Y&&(await Tr(),Y.value.onButtonDown(q))},setFirstValue:F,setSecondValue:D}},{left:ZQe,down:JQe,right:eje,up:tje,home:nje,end:rje,pageUp:ije,pageDown:sje}=Fr,oje=(t,e,n)=>{const r=Me(),i=Me(!1),s=oe(()=>e.value instanceof Function),a=oe(()=>s.value&&e.value(t.modelValue)||t.modelValue),l=Rd(()=>{n.value&&(i.value=!0)},50),o=Rd(()=>{n.value&&(i.value=!1)},50);return{tooltip:r,tooltipVisible:i,formatValue:a,displayTooltip:l,hideTooltip:o}},aje=(t,e,n)=>{const{disabled:r,min:i,max:s,step:a,showTooltip:l,precision:o,sliderSize:d,formatTooltip:p,emitChange:A,resetSize:v,updateDragging:y}=mn(Fhe),{tooltip:C,tooltipVisible:x,formatValue:M,displayTooltip:I,hideTooltip:P}=oje(t,p,l),F=Me(),D=oe(()=>`${(t.modelValue-i.value)/(s.value-i.value)*100}%`),V=oe(()=>t.vertical?{bottom:D.value}:{left:D.value}),H=()=>{e.hovering=!0,I()},Q=()=>{e.hovering=!1,e.dragging||P()},G=ae=>{r.value||(ae.preventDefault(),pe(ae),window.addEventListener("mousemove",ue),window.addEventListener("touchmove",ue),window.addEventListener("mouseup",me),window.addEventListener("touchend",me),window.addEventListener("contextmenu",me),F.value.focus())},W=ae=>{r.value||(e.newPosition=Number.parseFloat(D.value)+ae/(s.value-i.value)*100,Le(e.newPosition),A())},te=()=>{W(-a.value)},q=()=>{W(a.value)},Y=()=>{W(-a.value*4)},ee=()=>{W(a.value*4)},ce=()=>{r.value||(Le(0),A())},se=()=>{r.value||(Le(100),A())},le=ae=>{let be=!0;[ZQe,JQe].includes(ae.key)?te():[eje,tje].includes(ae.key)?q():ae.key===nje?ce():ae.key===rje?se():ae.key===sje?Y():ae.key===ije?ee():be=!1,be&&ae.preventDefault()},ie=ae=>{let be,_e;return ae.type.startsWith("touch")?(_e=ae.touches[0].clientY,be=ae.touches[0].clientX):(_e=ae.clientY,be=ae.clientX),{clientX:be,clientY:_e}},pe=ae=>{e.dragging=!0,e.isClick=!0;const{clientX:be,clientY:_e}=ie(ae);t.vertical?e.startY=_e:e.startX=be,e.startPosition=Number.parseFloat(D.value),e.newPosition=e.startPosition},ue=ae=>{if(e.dragging){e.isClick=!1,I(),v();let be;const{clientX:_e,clientY:$e}=ie(ae);t.vertical?(e.currentY=$e,be=(e.startY-e.currentY)/d.value*100):(e.currentX=_e,be=(e.currentX-e.startX)/d.value*100),e.newPosition=e.startPosition+be,Le(e.newPosition)}},me=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||P(),e.isClick||Le(e.newPosition),A()},0),window.removeEventListener("mousemove",ue),window.removeEventListener("touchmove",ue),window.removeEventListener("mouseup",me),window.removeEventListener("touchend",me),window.removeEventListener("contextmenu",me))},Le=async ae=>{if(ae===null||Number.isNaN(+ae))return;ae<0?ae=0:ae>100&&(ae=100);const be=100/((s.value-i.value)/a.value);let $e=Math.round(ae/be)*be*(s.value-i.value)*.01+i.value;$e=Number.parseFloat($e.toFixed(o.value)),$e!==t.modelValue&&n(Si,$e),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),await Tr(),e.dragging&&I(),C.value.updatePopper()};return zt(()=>e.dragging,ae=>{y(ae)}),{disabled:r,button:F,tooltip:C,tooltipVisible:x,showTooltip:l,wrapperStyle:V,formatValue:M,handleMouseEnter:H,handleMouseLeave:Q,onButtonDown:G,onKeyDown:le,setPosition:Le}},lje=(t,e,n,r)=>({stops:oe(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const a=(t.max-t.min)/t.step,l=100*t.step/(t.max-t.min),o=Array.from({length:a-1}).map((d,p)=>(p+1)*l);return t.range?o.filter(d=>d<100*(n.value-t.min)/(t.max-t.min)||d>100*(r.value-t.min)/(t.max-t.min)):o.filter(d=>d>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:a=>t.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),cje=(t,e,n,r,i,s)=>{const a=d=>{i(Si,d),i(zh,d)},l=()=>t.range?![n.value,r.value].every((d,p)=>d===e.oldValue[p]):t.modelValue!==e.oldValue,o=()=>{var d,p;t.min>t.max&&pc("Slider","min should not be greater than max.");const A=t.modelValue;t.range&&Array.isArray(A)?A[1]<t.min?a([t.min,t.min]):A[0]>t.max?a([t.max,t.max]):A[0]<t.min?a([t.min,A[1]]):A[1]>t.max?a([A[0],t.max]):(e.firstValue=A[0],e.secondValue=A[1],l()&&(t.validateEvent&&((d=s==null?void 0:s.validate)==null||d.call(s,"change").catch(v=>void 0)),e.oldValue=A.slice())):!t.range&&typeof A=="number"&&!Number.isNaN(A)&&(A<t.min?a(t.min):A>t.max?a(t.max):(e.firstValue=A,l()&&(t.validateEvent&&((p=s==null?void 0:s.validate)==null||p.call(s,"change").catch(v=>void 0)),e.oldValue=A)))};o(),zt(()=>e.dragging,d=>{d||o()}),zt(()=>t.modelValue,(d,p)=>{e.dragging||Array.isArray(d)&&Array.isArray(p)&&d.every((A,v)=>A===p[v])&&e.firstValue===d[0]&&e.secondValue===d[1]||o()},{deep:!0}),zt(()=>[t.min,t.max],()=>{o()})},uje=Ln({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:zb,default:"top"}}),hje={[Si]:t=>Hr(t)},dje=["tabindex"],fje=Ge({name:"ElSliderButton"}),pje=Ge({...fje,props:uje,emits:hje,setup(t,{expose:e,emit:n}){const r=t,i=_n("slider"),s=Xs({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),{disabled:a,button:l,tooltip:o,showTooltip:d,tooltipVisible:p,wrapperStyle:A,formatValue:v,handleMouseEnter:y,handleMouseLeave:C,onButtonDown:x,onKeyDown:M,setPosition:I}=aje(r,s,n),{hovering:P,dragging:F}=dc(s);return e({onButtonDown:x,onKeyDown:M,setPosition:I,hovering:P,dragging:F}),(D,V)=>(ve(),Ue("div",{ref_key:"button",ref:l,class:xe([T(i).e("button-wrapper"),{hover:T(P),dragging:T(F)}]),style:vr(T(A)),tabindex:T(a)?-1:0,onMouseenter:V[0]||(V[0]=(...H)=>T(y)&&T(y)(...H)),onMouseleave:V[1]||(V[1]=(...H)=>T(C)&&T(C)(...H)),onMousedown:V[2]||(V[2]=(...H)=>T(x)&&T(x)(...H)),onTouchstart:V[3]||(V[3]=(...H)=>T(x)&&T(x)(...H)),onFocus:V[4]||(V[4]=(...H)=>T(y)&&T(y)(...H)),onBlur:V[5]||(V[5]=(...H)=>T(C)&&T(C)(...H)),onKeydown:V[6]||(V[6]=(...H)=>T(M)&&T(M)(...H))},[pt(T(_h),{ref_key:"tooltip",ref:o,visible:T(p),placement:D.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":D.tooltipClass,disabled:!T(d),persistent:""},{content:It(()=>[rt("span",null,Nn(T(v)),1)]),default:It(()=>[rt("div",{class:xe([T(i).e("button"),{hover:T(P),dragging:T(F)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,dje))}});var nJ=Fn(pje,[["__file","button.vue"]]);const Aje=Ln({mark:{type:Mt([String,Object]),default:void 0}});var gje=Ge({name:"ElSliderMarker",props:Aje,setup(t){const e=_n("slider"),n=oe(()=>Xr(t.mark)?t.mark:t.mark.label),r=oe(()=>Xr(t.mark)?void 0:t.mark.style);return()=>Br("div",{class:e.e("marks-text"),style:r.value},n.value)}});const mje=["id","role","aria-label","aria-labelledby"],vje={key:1},yje=Ge({name:"ElSlider"}),_je=Ge({...yje,props:KQe,emits:WQe,setup(t,{expose:e,emit:n}){const r=t,i=_n("slider"),{t:s}=Ts(),a=Xs({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:l,slider:o,firstButton:d,secondButton:p,sliderDisabled:A,minValue:v,maxValue:y,runwayStyle:C,barStyle:x,resetSize:M,emitChange:I,onSliderWrapperPrevent:P,onSliderClick:F,onSliderDown:D,setFirstValue:V,setSecondValue:H}=XQe(r,a,n),{stops:Q,getStopStyle:G}=lje(r,a,v,y),{inputId:W,isLabeledByFormItem:te}=jA(r,{formItemContext:l}),q=Gl(),Y=oe(()=>r.inputSize||q.value),ee=oe(()=>r.label||r.ariaLabel||s("el.slider.defaultLabel",{min:r.min,max:r.max})),ce=oe(()=>r.range?r.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):ee.value),se=oe(()=>r.formatValueText?r.formatValueText(ae.value):`${ae.value}`),le=oe(()=>r.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),ie=oe(()=>r.formatValueText?r.formatValueText(be.value):`${be.value}`),pe=oe(()=>[i.b(),i.m(q.value),i.is("vertical",r.vertical),{[i.m("with-input")]:r.showInput}]),ue=YQe(r);cje(r,a,v,y,n,l);const me=oe(()=>{const Re=[r.min,r.max,r.step].map(Ie=>{const Ne=`${Ie}`.split(".")[1];return Ne?Ne.length:0});return Math.max.apply(null,Re)}),{sliderWrapper:Le}=qQe(r,a,M),{firstValue:ae,secondValue:be,sliderSize:_e}=dc(a),$e=Re=>{a.dragging=Re};return Rr(Fhe,{...dc(r),sliderSize:_e,disabled:A,precision:me,emitChange:I,resetSize:M,updateDragging:$e}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},oe(()=>!!r.label)),e({onSliderClick:F}),(Re,Ie)=>{var Ne,Je;return ve(),Ue("div",{id:Re.range?T(W):void 0,ref_key:"sliderWrapper",ref:Le,class:xe(T(pe)),role:Re.range?"group":void 0,"aria-label":Re.range&&!T(te)?T(ee):void 0,"aria-labelledby":Re.range&&T(te)?(Ne=T(l))==null?void 0:Ne.labelId:void 0,onTouchstart:Ie[2]||(Ie[2]=(...je)=>T(P)&&T(P)(...je)),onTouchmove:Ie[3]||(Ie[3]=(...je)=>T(P)&&T(P)(...je))},[rt("div",{ref_key:"slider",ref:o,class:xe([T(i).e("runway"),{"show-input":Re.showInput&&!Re.range},T(i).is("disabled",T(A))]),style:vr(T(C)),onMousedown:Ie[0]||(Ie[0]=(...je)=>T(D)&&T(D)(...je)),onTouchstart:Ie[1]||(Ie[1]=(...je)=>T(D)&&T(D)(...je))},[rt("div",{class:xe(T(i).e("bar")),style:vr(T(x))},null,6),pt(nJ,{id:Re.range?void 0:T(W),ref_key:"firstButton",ref:d,"model-value":T(ae),vertical:Re.vertical,"tooltip-class":Re.tooltipClass,placement:Re.placement,role:"slider","aria-label":Re.range||!T(te)?T(ce):void 0,"aria-labelledby":!Re.range&&T(te)?(Je=T(l))==null?void 0:Je.labelId:void 0,"aria-valuemin":Re.min,"aria-valuemax":Re.range?T(be):Re.max,"aria-valuenow":T(ae),"aria-valuetext":T(se),"aria-orientation":Re.vertical?"vertical":"horizontal","aria-disabled":T(A),"onUpdate:modelValue":T(V)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Re.range?(ve(),qt(nJ,{key:0,ref_key:"secondButton",ref:p,"model-value":T(be),vertical:Re.vertical,"tooltip-class":Re.tooltipClass,placement:Re.placement,role:"slider","aria-label":T(le),"aria-valuemin":T(ae),"aria-valuemax":Re.max,"aria-valuenow":T(be),"aria-valuetext":T(ie),"aria-orientation":Re.vertical?"vertical":"horizontal","aria-disabled":T(A),"onUpdate:modelValue":T(H)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):wt("v-if",!0),Re.showStops?(ve(),Ue("div",vje,[(ve(!0),Ue(_r,null,cs(T(Q),(je,ft)=>(ve(),Ue("div",{key:ft,class:xe(T(i).e("stop")),style:vr(T(G)(je))},null,6))),128))])):wt("v-if",!0),T(ue).length>0?(ve(),Ue(_r,{key:2},[rt("div",null,[(ve(!0),Ue(_r,null,cs(T(ue),(je,ft)=>(ve(),Ue("div",{key:ft,style:vr(T(G)(je.position)),class:xe([T(i).e("stop"),T(i).e("marks-stop")])},null,6))),128))]),rt("div",{class:xe(T(i).e("marks"))},[(ve(!0),Ue(_r,null,cs(T(ue),(je,ft)=>(ve(),qt(T(gje),{key:ft,mark:je.mark,style:vr(T(G)(je.position))},null,8,["mark","style"]))),128))],2)],64)):wt("v-if",!0)],38),Re.showInput&&!Re.range?(ve(),qt(T(ohe),{key:0,ref:"input","model-value":T(ae),class:xe(T(i).e("input")),step:Re.step,disabled:T(A),controls:Re.showInputControls,min:Re.min,max:Re.max,debounce:Re.debounce,size:T(Y),"onUpdate:modelValue":T(V),onChange:T(I)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):wt("v-if",!0)],42,mje)}}});var bje=Fn(_je,[["__file","slider.vue"]]);const wje=_i(bje),xje=Ln({prefixCls:{type:String}}),rJ=Ge({name:"ElSpaceItem",props:xje,setup(t,{slots:e}){const n=_n("space"),r=oe(()=>`${t.prefixCls||n.b()}__item`);return()=>Br("div",{class:r.value},kt(e,"default"))}}),iJ={small:8,default:12,large:16};function Cje(t){const e=_n("space"),n=oe(()=>[e.b(),e.m(t.direction),t.class]),r=Me(0),i=Me(0),s=oe(()=>{const l=t.wrap||t.fill?{flexWrap:"wrap"}:{},o={alignItems:t.alignment},d={rowGap:`${i.value}px`,columnGap:`${r.value}px`};return[l,o,d,t.style]}),a=oe(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return bu(()=>{const{size:l="small",wrap:o,direction:d,fill:p}=t;if(Jn(l)){const[A=0,v=0]=l;r.value=A,i.value=v}else{let A;Hr(l)?A=l:A=iJ[l||"small"]||iJ.small,(o||p)&&d==="horizontal"?r.value=i.value=A:d==="horizontal"?(r.value=A,i.value=0):(i.value=A,r.value=0)}}),{classes:n,containerStyle:s,itemStyle:a}}const Eje=Ln({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Mt([String,Object,Array]),default:""},style:{type:Mt([String,Array,Object]),default:""},alignment:{type:Mt(String),default:"center"},prefixCls:{type:String},spacer:{type:Mt([Object,String,Number,Array]),default:null,validator:t=>ya(t)||Hr(t)||Xr(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:dm,validator:t=>Hr(t)||Jn(t)&&t.length===2&&t.every(Hr)}}),Sje=Ge({name:"ElSpace",props:Eje,setup(t,{slots:e}){const{classes:n,containerStyle:r,itemStyle:i}=Cje(t);function s(a,l="",o=[]){const{prefixCls:d}=t;return a.forEach((p,A)=>{d3(p)?Jn(p.children)&&p.children.forEach((v,y)=>{d3(v)&&Jn(v.children)?s(v.children,`${l+y}-`,o):o.push(pt(rJ,{style:i.value,prefixCls:d,key:`nested-${l+y}`},{default:()=>[v]},lp.PROPS|lp.STYLE,["style","prefixCls"]))}):cOe(p)&&o.push(pt(rJ,{style:i.value,prefixCls:d,key:`LoopKey${l+A}`},{default:()=>[p]},lp.PROPS|lp.STYLE,["style","prefixCls"]))}),o}return()=>{var a;const{spacer:l,direction:o}=t,d=kt(e,"default",{key:0},()=>[]);if(((a=d.children)!=null?a:[]).length===0)return null;if(Jn(d.children)){let p=s(d.children);if(l){const A=p.length-1;p=p.reduce((v,y,C)=>{const x=[...v,y];return C!==A&&x.push(pt("span",{style:[i.value,o==="vertical"?"width: 100%":null],key:C},[ya(l)?l:gs(l,lp.TEXT)],lp.STYLE)),x},[])}return pt("div",{class:n.value,style:r.value},p,lp.STYLE|lp.CLASS)}return d.children}}}),Tje=_i(Sje),Ije=Ln({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Mt([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Mt([String,Object,Array])}}),Bje=Ge({name:"ElStatistic"}),Mje=Ge({...Bje,props:Ije,setup(t,{expose:e}){const n=t,r=_n("statistic"),i=oe(()=>{const{value:s,formatter:a,precision:l,decimalSeparator:o,groupSeparator:d}=n;if(Gr(a))return a(s);if(!Hr(s))return s;let[p,A=""]=String(s).split(".");return A=A.padEnd(l,"0").slice(0,l>0?l:0),p=p.replace(/\B(?=(\d{3})+(?!\d))/g,d),[p,A].join(A?o:"")});return e({displayValue:i}),(s,a)=>(ve(),Ue("div",{class:xe(T(r).b())},[s.$slots.title||s.title?(ve(),Ue("div",{key:0,class:xe(T(r).e("head"))},[kt(s.$slots,"title",{},()=>[gs(Nn(s.title),1)])],2)):wt("v-if",!0),rt("div",{class:xe(T(r).e("content"))},[s.$slots.prefix||s.prefix?(ve(),Ue("div",{key:0,class:xe(T(r).e("prefix"))},[kt(s.$slots,"prefix",{},()=>[rt("span",null,Nn(s.prefix),1)])],2)):wt("v-if",!0),rt("span",{class:xe(T(r).e("number")),style:vr(s.valueStyle)},Nn(T(i)),7),s.$slots.suffix||s.suffix?(ve(),Ue("div",{key:1,class:xe(T(r).e("suffix"))},[kt(s.$slots,"suffix",{},()=>[rt("span",null,Nn(s.suffix),1)])],2)):wt("v-if",!0)],2)],2))}});var Lje=Fn(Mje,[["__file","statistic.vue"]]);const Ohe=_i(Lje),Rje=Ln({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Mt([Number,Object]),default:0},valueStyle:{type:Mt([String,Object,Array])}}),Pje={finish:()=>!0,[Qo]:t=>Hr(t)},Fje=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],sJ=t=>Hr(t)?new Date(t).getTime():t.valueOf(),oJ=(t,e)=>{let n=t;const r=/\[([^\]]*)]/g;return Fje.reduce((s,[a,l])=>{const o=new RegExp(`${a}+(?![^\\[\\]]*\\])`,"g");if(o.test(s)){const d=Math.floor(n/l);return n-=d*l,s.replace(o,p=>String(d).padStart(p.length,"0"))}return s},e).replace(r,"$1")},Oje=Ge({name:"ElCountdown"}),Nje=Ge({...Oje,props:Rje,emits:Pje,setup(t,{expose:e,emit:n}){const r=t;let i;const s=Me(sJ(r.value)-Date.now()),a=oe(()=>oJ(s.value,r.format)),l=p=>oJ(p,r.format),o=()=>{i&&(xb(i),i=void 0)},d=()=>{const p=sJ(r.value),A=()=>{let v=p-Date.now();n("change",v),v<=0?(v=0,o(),n("finish")):i=n_(A),s.value=v};i=n_(A)};return zt(()=>[r.value,r.format],()=>{o(),d()},{immediate:!0}),Do(()=>{o()}),e({displayValue:a}),(p,A)=>(ve(),qt(T(Ohe),{value:s.value,title:p.title,prefix:p.prefix,suffix:p.suffix,"value-style":p.valueStyle,formatter:l},Gv({_:2},[cs(p.$slots,(v,y)=>({name:y,fn:It(()=>[kt(p.$slots,y)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var kje=Fn(Nje,[["__file","countdown.vue"]]);const Dje=_i(kje),Uje=Ln({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),zje={[Qo]:(t,e)=>[t,e].every(Hr)},$je=Ge({name:"ElSteps"}),Vje=Ge({...$je,props:Uje,emits:zje,setup(t,{emit:e}){const n=t,r=_n("steps"),{children:i,addChild:s,removeChild:a}=nH(mi(),"ElStep");return zt(i,()=>{i.value.forEach((l,o)=>{l.setIndex(o)})}),Rr("ElSteps",{props:n,steps:i,addStep:s,removeStep:a}),zt(()=>n.active,(l,o)=>{e(Qo,l,o)}),(l,o)=>(ve(),Ue("div",{class:xe([T(r).b(),T(r).m(l.simple?"simple":l.direction)])},[kt(l.$slots,"default")],2))}});var Hje=Fn(Vje,[["__file","steps.vue"]]);const Gje=Ln({title:{type:String,default:""},icon:{type:wo},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Qje=Ge({name:"ElStep"}),jje=Ge({...Qje,props:Gje,setup(t){const e=t,n=_n("step"),r=Me(-1),i=Me({}),s=Me(""),a=mn("ElSteps"),l=mi();dr(()=>{zt([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([H])=>{D(H)},{immediate:!0})}),Do(()=>{a.removeStep(V.uid)});const o=oe(()=>e.status||s.value),d=oe(()=>{const H=a.steps.value[r.value-1];return H?H.currentStatus:"wait"}),p=oe(()=>a.props.alignCenter),A=oe(()=>a.props.direction==="vertical"),v=oe(()=>a.props.simple),y=oe(()=>a.steps.value.length),C=oe(()=>{var H;return((H=a.steps.value[y.value-1])==null?void 0:H.uid)===(l==null?void 0:l.uid)}),x=oe(()=>v.value?"":a.props.space),M=oe(()=>[n.b(),n.is(v.value?"simple":a.props.direction),n.is("flex",C.value&&!x.value&&!p.value),n.is("center",p.value&&!A.value&&!v.value)]),I=oe(()=>{const H={flexBasis:Hr(x.value)?`${x.value}px`:x.value?x.value:`${100/(y.value-(p.value?0:1))}%`};return A.value||C.value&&(H.maxWidth=`${100/y.value}%`),H}),P=H=>{r.value=H},F=H=>{const Q=H==="wait",G={transitionDelay:`${Q?"-":""}${150*r.value}ms`},W=H===a.props.processStatus||Q?0:100;G.borderWidth=W&&!v.value?"1px":0,G[a.props.direction==="vertical"?"height":"width"]=`${W}%`,i.value=G},D=H=>{H>r.value?s.value=a.props.finishStatus:H===r.value&&d.value!=="error"?s.value=a.props.processStatus:s.value="wait";const Q=a.steps.value[r.value-1];Q&&Q.calcProgress(s.value)},V=Xs({uid:l.uid,currentStatus:o,setIndex:P,calcProgress:F});return a.addStep(V),(H,Q)=>(ve(),Ue("div",{style:vr(T(I)),class:xe(T(M))},[wt(" icon & line "),rt("div",{class:xe([T(n).e("head"),T(n).is(T(o))])},[T(v)?wt("v-if",!0):(ve(),Ue("div",{key:0,class:xe(T(n).e("line"))},[rt("i",{class:xe(T(n).e("line-inner")),style:vr(i.value)},null,6)],2)),rt("div",{class:xe([T(n).e("icon"),T(n).is(H.icon||H.$slots.icon?"icon":"text")])},[kt(H.$slots,"icon",{},()=>[H.icon?(ve(),qt(T(mr),{key:0,class:xe(T(n).e("icon-inner"))},{default:It(()=>[(ve(),qt(Mi(H.icon)))]),_:1},8,["class"])):T(o)==="success"?(ve(),qt(T(mr),{key:1,class:xe([T(n).e("icon-inner"),T(n).is("status")])},{default:It(()=>[pt(T(GB))]),_:1},8,["class"])):T(o)==="error"?(ve(),qt(T(mr),{key:2,class:xe([T(n).e("icon-inner"),T(n).is("status")])},{default:It(()=>[pt(T(NA))]),_:1},8,["class"])):T(v)?wt("v-if",!0):(ve(),Ue("div",{key:3,class:xe(T(n).e("icon-inner"))},Nn(r.value+1),3))])],2)],2),wt(" title & description "),rt("div",{class:xe(T(n).e("main"))},[rt("div",{class:xe([T(n).e("title"),T(n).is(T(o))])},[kt(H.$slots,"title",{},()=>[gs(Nn(H.title),1)])],2),T(v)?(ve(),Ue("div",{key:0,class:xe(T(n).e("arrow"))},null,2)):(ve(),Ue("div",{key:1,class:xe([T(n).e("description"),T(n).is(T(o))])},[kt(H.$slots,"description",{},()=>[gs(Nn(H.description),1)])],2))],2)],6))}});var Nhe=Fn(jje,[["__file","item.vue"]]);const Kje=_i(Hje,{Step:Nhe}),Wje=Pa(Nhe),qje=Ln({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Dle},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:wo},activeActionIcon:{type:wo},activeIcon:{type:wo},inactiveIcon:{type:wo},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Mt(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...Eu(["ariaLabel"])}),Yje={[Si]:t=>Sl(t)||Xr(t)||Hr(t),[Qo]:t=>Sl(t)||Xr(t)||Hr(t),[zh]:t=>Sl(t)||Xr(t)||Hr(t)},Xje=["onClick"],Zje=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],Jje=["aria-hidden"],e9e=["aria-hidden"],t9e=["aria-hidden"],khe="ElSwitch",n9e=Ge({name:khe}),r9e=Ge({...n9e,props:qje,emits:Yje,setup(t,{expose:e,emit:n}){const r=t,{formItem:i}=bh(),s=Gl(),a=_n("switch"),{inputId:l}=jA(r,{formItemContext:i}),o=jh(oe(()=>r.loading)),d=Me(r.modelValue!==!1),p=Me(),A=Me(),v=oe(()=>[a.b(),a.m(s.value),a.is("disabled",o.value),a.is("checked",I.value)]),y=oe(()=>[a.e("label"),a.em("label","left"),a.is("active",!I.value)]),C=oe(()=>[a.e("label"),a.em("label","right"),a.is("active",I.value)]),x=oe(()=>({width:Ja(r.width)}));zt(()=>r.modelValue,()=>{d.value=!0});const M=oe(()=>d.value?r.modelValue:!1),I=oe(()=>M.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(M.value)||(n(Si,r.inactiveValue),n(Qo,r.inactiveValue),n(zh,r.inactiveValue)),zt(I,V=>{var H;p.value.checked=V,r.validateEvent&&((H=i==null?void 0:i.validate)==null||H.call(i,"change").catch(Q=>void 0))});const P=()=>{const V=I.value?r.inactiveValue:r.activeValue;n(Si,V),n(Qo,V),n(zh,V),Tr(()=>{p.value.checked=I.value})},F=()=>{if(o.value)return;const{beforeChange:V}=r;if(!V){P();return}const H=V();[bI(H),Sl(H)].includes(!0)||pc(khe,"beforeChange must return type `Promise<boolean>` or `boolean`"),bI(H)?H.then(G=>{G&&P()}).catch(G=>{}):H&&P()},D=()=>{var V,H;(H=(V=p.value)==null?void 0:V.focus)==null||H.call(V)};return dr(()=>{p.value.checked=I.value}),Jc({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},oe(()=>!!r.label)),e({focus:D,checked:I}),(V,H)=>(ve(),Ue("div",{class:xe(T(v)),onClick:qr(F,["prevent"])},[rt("input",{id:T(l),ref_key:"input",ref:p,class:xe(T(a).e("input")),type:"checkbox",role:"switch","aria-checked":T(I),"aria-disabled":T(o),"aria-label":V.label||V.ariaLabel,name:V.name,"true-value":V.activeValue,"false-value":V.inactiveValue,disabled:T(o),tabindex:V.tabindex,onChange:P,onKeydown:bo(F,["enter"])},null,42,Zje),!V.inlinePrompt&&(V.inactiveIcon||V.inactiveText)?(ve(),Ue("span",{key:0,class:xe(T(y))},[V.inactiveIcon?(ve(),qt(T(mr),{key:0},{default:It(()=>[(ve(),qt(Mi(V.inactiveIcon)))]),_:1})):wt("v-if",!0),!V.inactiveIcon&&V.inactiveText?(ve(),Ue("span",{key:1,"aria-hidden":T(I)},Nn(V.inactiveText),9,Jje)):wt("v-if",!0)],2)):wt("v-if",!0),rt("span",{ref_key:"core",ref:A,class:xe(T(a).e("core")),style:vr(T(x))},[V.inlinePrompt?(ve(),Ue("div",{key:0,class:xe(T(a).e("inner"))},[V.activeIcon||V.inactiveIcon?(ve(),qt(T(mr),{key:0,class:xe(T(a).is("icon"))},{default:It(()=>[(ve(),qt(Mi(T(I)?V.activeIcon:V.inactiveIcon)))]),_:1},8,["class"])):V.activeText||V.inactiveText?(ve(),Ue("span",{key:1,class:xe(T(a).is("text")),"aria-hidden":!T(I)},Nn(T(I)?V.activeText:V.inactiveText),11,e9e)):wt("v-if",!0)],2)):wt("v-if",!0),rt("div",{class:xe(T(a).e("action"))},[V.loading?(ve(),qt(T(mr),{key:0,class:xe(T(a).is("loading"))},{default:It(()=>[pt(T(C_))]),_:1},8,["class"])):T(I)?kt(V.$slots,"active-action",{key:1},()=>[V.activeActionIcon?(ve(),qt(T(mr),{key:0},{default:It(()=>[(ve(),qt(Mi(V.activeActionIcon)))]),_:1})):wt("v-if",!0)]):T(I)?wt("v-if",!0):kt(V.$slots,"inactive-action",{key:2},()=>[V.inactiveActionIcon?(ve(),qt(T(mr),{key:0},{default:It(()=>[(ve(),qt(Mi(V.inactiveActionIcon)))]),_:1})):wt("v-if",!0)])],2)],6),!V.inlinePrompt&&(V.activeIcon||V.activeText)?(ve(),Ue("span",{key:1,class:xe(T(C))},[V.activeIcon?(ve(),qt(T(mr),{key:0},{default:It(()=>[(ve(),qt(Mi(V.activeIcon)))]),_:1})):wt("v-if",!0),!V.activeIcon&&V.activeText?(ve(),Ue("span",{key:1,"aria-hidden":!T(I)},Nn(V.activeText),9,t9e)):wt("v-if",!0)],2)):wt("v-if",!0)],10,Xje))}});var i9e=Fn(r9e,[["__file","switch.vue"]]);const s9e=_i(i9e),r4=function(t){var e;return(e=t.target)==null?void 0:e.closest("td")},o9e=function(t,e,n,r,i){if(!e&&!r&&(!i||Array.isArray(i)&&!i.length))return t;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const s=r?null:function(l,o){return i?(Array.isArray(i)||(i=[i]),i.map(d=>typeof d=="string"?ll(l,d):d(l,o,t))):(e!=="$key"&&xi(l)&&"$value"in l&&(l=l.$value),[xi(l)?ll(l,e):l])},a=function(l,o){if(r)return r(l.value,o.value);for(let d=0,p=l.key.length;d<p;d++){if(l.key[d]<o.key[d])return-1;if(l.key[d]>o.key[d])return 1}return 0};return t.map((l,o)=>({value:l,index:o,key:s?s(l,o):null})).sort((l,o)=>{let d=a(l,o);return d||(d=l.index-o.index),d*+n}).map(l=>l.value)},Dhe=function(t,e){let n=null;return t.columns.forEach(r=>{r.id===e&&(n=r)}),n},a9e=function(t,e){let n=null;for(let r=0;r<t.columns.length;r++){const i=t.columns[r];if(i.columnKey===e){n=i;break}}return n||pc("ElTable",`No column matching with column-key: ${e}`),n},aJ=function(t,e,n){const r=(e.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return r?Dhe(t,r[0]):null},Uu=(t,e)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${t[e]}`;const n=e.split(".");let r=t;for(const i of n)r=r[i];return`${r}`}else if(typeof e=="function")return e.call(null,t)},H1=function(t,e){const n={};return(t||[]).forEach((r,i)=>{n[Uu(r,e)]={row:r,index:i}}),n};function l9e(t,e){const n={};let r;for(r in t)n[r]=t[r];for(r in e)if(vs(e,r)){const i=e[r];typeof i<"u"&&(n[r]=i)}return n}function TH(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function Uhe(t){return t===""||t!==void 0&&(t=TH(t),Number.isNaN(t)&&(t=80)),t}function c9e(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function u9e(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function YT(t,e,n){let r=!1;const i=t.indexOf(e),s=i!==-1,a=l=>{l==="add"?t.push(e):t.splice(i,1),r=!0,Jn(e.children)&&e.children.forEach(o=>{YT(t,o,n??!s)})};return Sl(n)?n&&!s?a("add"):!n&&s&&a("remove"):a(s?"remove":"add"),r}function h9e(t,e,n="children",r="hasChildren"){const i=a=>!(Array.isArray(a)&&a.length);function s(a,l,o){e(a,l,o),l.forEach(d=>{if(d[r]){e(d,null,o+1);return}const p=d[n];i(p)||s(d,p,o+1)})}t.forEach(a=>{if(a[r]){e(a,null,0);return}const l=a[n];i(l)||s(a,l,0)})}let sp=null;function d9e(t,e,n,r){if((sp==null?void 0:sp.trigger)===n)return;sp==null||sp();const i=r==null?void 0:r.refs.tableWrapper,s=i==null?void 0:i.dataset.prefix,a={strategy:"fixed",...t.popperOptions},l=pt(_h,{content:e,virtualTriggering:!0,virtualRef:n,appendTo:i,placement:"top",transition:"none",offset:0,hideAfter:0,...t,popperOptions:a,onHide:()=>{sp==null||sp()}});l.appContext={...r.appContext,...r};const o=document.createElement("div");Yy(l,o),l.component.exposed.onOpen();const d=i==null?void 0:i.querySelector(`.${s}-scrollbar__wrap`);sp=()=>{Yy(null,o),d==null||d.removeEventListener("scroll",sp),sp=null},sp.trigger=n,d==null||d.addEventListener("scroll",sp)}function zhe(t){return t.children?SPe(t.children,zhe):[t]}function lJ(t,e){return t+e.colSpan}const $he=(t,e,n,r)=>{let i=0,s=t;const a=n.states.columns.value;if(r){const o=zhe(r[t]);i=a.slice(0,a.indexOf(o[0])).reduce(lJ,0),s=i+o.reduce(lJ,0)-1}else i=t;let l;switch(e){case"left":s<n.states.fixedLeafColumnsLength.value&&(l="left");break;case"right":i>=a.length-n.states.rightFixedLeafColumnsLength.value&&(l="right");break;default:s<n.states.fixedLeafColumnsLength.value?l="left":i>=a.length-n.states.rightFixedLeafColumnsLength.value&&(l="right")}return l?{direction:l,start:i,after:s}:{}},IH=(t,e,n,r,i,s=0)=>{const a=[],{direction:l,start:o,after:d}=$he(e,n,r,i);if(l){const p=l==="left";a.push(`${t}-fixed-column--${l}`),p&&d+s===r.states.fixedLeafColumnsLength.value-1?a.push("is-last-column"):!p&&o-s===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&a.push("is-first-column")}return a};function cJ(t,e){return t+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const BH=(t,e,n,r)=>{const{direction:i,start:s=0,after:a=0}=$he(t,e,n,r);if(!i)return;const l={},o=i==="left",d=n.states.columns.value;return o?l.left=d.slice(0,s).reduce(cJ,0):l.right=d.slice(a+1).reverse().reduce(cJ,0),l},qC=(t,e)=>{t&&(Number.isNaN(t[e])||(t[e]=`${t[e]}px`))};function f9e(t){const e=mi(),n=Me(!1),r=Me([]);return{updateExpandRows:()=>{const o=t.data.value||[],d=t.rowKey.value;if(n.value)r.value=o.slice();else if(d){const p=H1(r.value,d);r.value=o.reduce((A,v)=>{const y=Uu(v,d);return p[y]&&A.push(v),A},[])}else r.value=[]},toggleRowExpansion:(o,d)=>{YT(r.value,o,d)&&e.emit("expand-change",o,r.value.slice())},setExpandRowKeys:o=>{e.store.assertRowKey();const d=t.data.value||[],p=t.rowKey.value,A=H1(d,p);r.value=o.reduce((v,y)=>{const C=A[y];return C&&v.push(C.row),v},[])},isRowExpanded:o=>{const d=t.rowKey.value;return d?!!H1(r.value,d)[Uu(o,d)]:r.value.includes(o)},states:{expandRows:r,defaultExpandAll:n}}}function p9e(t){const e=mi(),n=Me(null),r=Me(null),i=d=>{e.store.assertRowKey(),n.value=d,a(d)},s=()=>{n.value=null},a=d=>{const{data:p,rowKey:A}=t;let v=null;A.value&&(v=(T(p)||[]).find(y=>Uu(y,A.value)===d)),r.value=v,e.emit("current-change",r.value,null)};return{setCurrentRowKey:i,restoreCurrentRowKey:s,setCurrentRowByKey:a,updateCurrentRow:d=>{const p=r.value;if(d&&d!==p){r.value=d,e.emit("current-change",r.value,p);return}!d&&p&&(r.value=null,e.emit("current-change",null,p))},updateCurrentRowData:()=>{const d=t.rowKey.value,p=t.data.value||[],A=r.value;if(!p.includes(A)&&A){if(d){const v=Uu(A,d);a(v)}else r.value=null;r.value===null&&e.emit("current-change",null,A)}else n.value&&(a(n.value),s())},states:{_currentRowKey:n,currentRow:r}}}function A9e(t){const e=Me([]),n=Me({}),r=Me(16),i=Me(!1),s=Me({}),a=Me("hasChildren"),l=Me("children"),o=mi(),d=oe(()=>{if(!t.rowKey.value)return{};const I=t.data.value||[];return A(I)}),p=oe(()=>{const I=t.rowKey.value,P=Object.keys(s.value),F={};return P.length&&P.forEach(D=>{if(s.value[D].length){const V={children:[]};s.value[D].forEach(H=>{const Q=Uu(H,I);V.children.push(Q),H[a.value]&&!F[Q]&&(F[Q]={children:[]})}),F[D]=V}}),F}),A=I=>{const P=t.rowKey.value,F={};return h9e(I,(D,V,H)=>{const Q=Uu(D,P);Array.isArray(V)?F[Q]={children:V.map(G=>Uu(G,P)),level:H}:i.value&&(F[Q]={children:[],lazy:!0,level:H})},l.value,a.value),F},v=(I=!1,P=(F=>(F=o.store)==null?void 0:F.states.defaultExpandAll.value)())=>{var F;const D=d.value,V=p.value,H=Object.keys(D),Q={};if(H.length){const G=T(n),W=[],te=(Y,ee)=>{if(I)return e.value?P||e.value.includes(ee):!!(P||Y!=null&&Y.expanded);{const ce=P||e.value&&e.value.includes(ee);return!!(Y!=null&&Y.expanded||ce)}};H.forEach(Y=>{const ee=G[Y],ce={...D[Y]};if(ce.expanded=te(ee,Y),ce.lazy){const{loaded:se=!1,loading:le=!1}=ee||{};ce.loaded=!!se,ce.loading=!!le,W.push(Y)}Q[Y]=ce});const q=Object.keys(V);i.value&&q.length&&W.length&&q.forEach(Y=>{const ee=G[Y],ce=V[Y].children;if(W.includes(Y)){if(Q[Y].children.length!==0)throw new Error("[ElTable]children must be an empty array.");Q[Y].children=ce}else{const{loaded:se=!1,loading:le=!1}=ee||{};Q[Y]={lazy:!0,loaded:!!se,loading:!!le,expanded:te(ee,Y),children:ce,level:""}}})}n.value=Q,(F=o.store)==null||F.updateTableScrollY()};zt(()=>e.value,()=>{v(!0)}),zt(()=>d.value,()=>{v()}),zt(()=>p.value,()=>{v()});const y=I=>{e.value=I,v()},C=(I,P)=>{o.store.assertRowKey();const F=t.rowKey.value,D=Uu(I,F),V=D&&n.value[D];if(D&&V&&"expanded"in V){const H=V.expanded;P=typeof P>"u"?!V.expanded:P,n.value[D].expanded=P,H!==P&&o.emit("expand-change",I,P),o.store.updateTableScrollY()}},x=I=>{o.store.assertRowKey();const P=t.rowKey.value,F=Uu(I,P),D=n.value[F];i.value&&D&&"loaded"in D&&!D.loaded?M(I,F,D):C(I,void 0)},M=(I,P,F)=>{const{load:D}=o.props;D&&!n.value[P].loaded&&(n.value[P].loading=!0,D(I,F,V=>{if(!Array.isArray(V))throw new TypeError("[ElTable] data must be an array");n.value[P].loading=!1,n.value[P].loaded=!0,n.value[P].expanded=!0,V.length&&(s.value[P]=V),o.emit("expand-change",I,!0)}))};return{loadData:M,loadOrToggle:x,toggleTreeExpansion:C,updateTreeExpandKeys:y,updateTreeData:v,normalize:A,states:{expandRowKeys:e,treeData:n,indent:r,lazy:i,lazyTreeNodeMap:s,lazyColumnIdentifier:a,childrenColumnName:l}}}const g9e=(t,e)=>{const n=e.sortingColumn;return!n||typeof n.sortable=="string"?t:o9e(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy)},fF=t=>{const e=[];return t.forEach(n=>{n.children&&n.children.length>0?e.push.apply(e,fF(n.children)):e.push(n)}),e};function m9e(){var t;const e=mi(),{size:n}=dc((t=e.proxy)==null?void 0:t.$props),r=Me(null),i=Me([]),s=Me([]),a=Me(!1),l=Me([]),o=Me([]),d=Me([]),p=Me([]),A=Me([]),v=Me([]),y=Me([]),C=Me([]),x=[],M=Me(0),I=Me(0),P=Me(0),F=Me(!1),D=Me([]),V=Me(!1),H=Me(!1),Q=Me(null),G=Me({}),W=Me(null),te=Me(null),q=Me(null),Y=Me(null),ee=Me(null);zt(i,()=>e.state&&ie(!1),{deep:!0});const ce=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},se=bt=>{var Qe;(Qe=bt.children)==null||Qe.forEach(St=>{St.fixed=bt.fixed,se(St)})},le=()=>{l.value.forEach(Xe=>{se(Xe)}),p.value=l.value.filter(Xe=>Xe.fixed===!0||Xe.fixed==="left"),A.value=l.value.filter(Xe=>Xe.fixed==="right"),p.value.length>0&&l.value[0]&&l.value[0].type==="selection"&&!l.value[0].fixed&&(l.value[0].fixed=!0,p.value.unshift(l.value[0]));const bt=l.value.filter(Xe=>!Xe.fixed);o.value=[].concat(p.value).concat(bt).concat(A.value);const Qe=fF(bt),St=fF(p.value),yt=fF(A.value);M.value=Qe.length,I.value=St.length,P.value=yt.length,d.value=[].concat(St).concat(Qe).concat(yt),a.value=p.value.length>0||A.value.length>0},ie=(bt,Qe=!1)=>{bt&&le(),Qe?e.state.doLayout():e.state.debouncedUpdateLayout()},pe=bt=>D.value.includes(bt),ue=()=>{F.value=!1,D.value.length&&(D.value=[],e.emit("selection-change",[]))},me=()=>{let bt;if(r.value){bt=[];const Qe=H1(D.value,r.value),St=H1(i.value,r.value);for(const yt in Qe)vs(Qe,yt)&&!St[yt]&&bt.push(Qe[yt].row)}else bt=D.value.filter(Qe=>!i.value.includes(Qe));if(bt.length){const Qe=D.value.filter(St=>!bt.includes(St));D.value=Qe,e.emit("selection-change",Qe.slice())}},Le=()=>(D.value||[]).slice(),ae=(bt,Qe=void 0,St=!0)=>{if(YT(D.value,bt,Qe)){const Xe=(D.value||[]).slice();St&&e.emit("select",Xe,bt),e.emit("selection-change",Xe)}},be=()=>{var bt,Qe;const St=H.value?!F.value:!(F.value||D.value.length);F.value=St;let yt=!1,Xe=0;const _t=(Qe=(bt=e==null?void 0:e.store)==null?void 0:bt.states)==null?void 0:Qe.rowKey.value;i.value.forEach((Gt,gt)=>{const hn=gt+Xe;Q.value?Q.value.call(null,Gt,hn)&&YT(D.value,Gt,St)&&(yt=!0):YT(D.value,Gt,St)&&(yt=!0),Xe+=Re(Uu(Gt,_t))}),yt&&e.emit("selection-change",D.value?D.value.slice():[]),e.emit("select-all",D.value)},_e=()=>{const bt=H1(D.value,r.value);i.value.forEach(Qe=>{const St=Uu(Qe,r.value),yt=bt[St];yt&&(D.value[yt.index]=Qe)})},$e=()=>{var bt,Qe,St;if(((bt=i.value)==null?void 0:bt.length)===0){F.value=!1;return}let yt;r.value&&(yt=H1(D.value,r.value));const Xe=function(hn){return yt?!!yt[Uu(hn,r.value)]:D.value.includes(hn)};let _t=!0,Gt=0,gt=0;for(let hn=0,rr=(i.value||[]).length;hn<rr;hn++){const br=(St=(Qe=e==null?void 0:e.store)==null?void 0:Qe.states)==null?void 0:St.rowKey.value,Qr=hn+gt,hr=i.value[hn],Kn=Q.value&&Q.value.call(null,hr,Qr);if(Xe(hr))Gt++;else if(!Q.value||Kn){_t=!1;break}gt+=Re(Uu(hr,br))}Gt===0&&(_t=!1),F.value=_t},Re=bt=>{var Qe;if(!e||!e.store)return 0;const{treeData:St}=e.store.states;let yt=0;const Xe=(Qe=St.value[bt])==null?void 0:Qe.children;return Xe&&(yt+=Xe.length,Xe.forEach(_t=>{yt+=Re(_t)})),yt},Ie=(bt,Qe)=>{Array.isArray(bt)||(bt=[bt]);const St={};return bt.forEach(yt=>{G.value[yt.id]=Qe,St[yt.columnKey||yt.id]=Qe}),St},Ne=(bt,Qe,St)=>{te.value&&te.value!==bt&&(te.value.order=null),te.value=bt,q.value=Qe,Y.value=St},Je=()=>{let bt=T(s);Object.keys(G.value).forEach(Qe=>{const St=G.value[Qe];if(!St||St.length===0)return;const yt=Dhe({columns:d.value},Qe);yt&&yt.filterMethod&&(bt=bt.filter(Xe=>St.some(_t=>yt.filterMethod.call(null,_t,Xe,yt))))}),W.value=bt},je=()=>{i.value=g9e(W.value,{sortingColumn:te.value,sortProp:q.value,sortOrder:Y.value})},ft=(bt=void 0)=>{bt&&bt.filter||Je(),je()},Et=bt=>{const{tableHeaderRef:Qe}=e.refs;if(!Qe)return;const St=Object.assign({},Qe.filterPanels),yt=Object.keys(St);if(yt.length)if(typeof bt=="string"&&(bt=[bt]),Array.isArray(bt)){const Xe=bt.map(_t=>a9e({columns:d.value},_t));yt.forEach(_t=>{const Gt=Xe.find(gt=>gt.id===_t);Gt&&(Gt.filteredValue=[])}),e.store.commit("filterChange",{column:Xe,values:[],silent:!0,multi:!0})}else yt.forEach(Xe=>{const _t=d.value.find(Gt=>Gt.id===Xe);_t&&(_t.filteredValue=[])}),G.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},ke=()=>{te.value&&(Ne(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Ye,toggleRowExpansion:at,updateExpandRows:He,states:Tt,isRowExpanded:Ut}=f9e({data:i,rowKey:r}),{updateTreeExpandKeys:Rt,toggleTreeExpansion:Bt,updateTreeData:Ht,loadOrToggle:xt,states:Zt}=A9e({data:i,rowKey:r}),{updateCurrentRowData:un,updateCurrentRow:Ft,setCurrentRowKey:mt,states:Be}=p9e({data:i,rowKey:r});return{assertRowKey:ce,updateColumns:le,scheduleLayout:ie,isSelected:pe,clearSelection:ue,cleanSelection:me,getSelectionRows:Le,toggleRowSelection:ae,_toggleAllSelection:be,toggleAllSelection:null,updateSelectionByRowKey:_e,updateAllSelected:$e,updateFilters:Ie,updateCurrentRow:Ft,updateSort:Ne,execFilter:Je,execSort:je,execQuery:ft,clearFilter:Et,clearSort:ke,toggleRowExpansion:at,setExpandRowKeysAdapter:bt=>{Ye(bt),Rt(bt)},setCurrentRowKey:mt,toggleRowExpansionAdapter:(bt,Qe)=>{d.value.some(({type:yt})=>yt==="expand")?at(bt,Qe):Bt(bt,Qe)},isRowExpanded:Ut,updateExpandRows:He,updateCurrentRowData:un,loadOrToggle:xt,updateTreeData:Ht,states:{tableSize:n,rowKey:r,data:i,_data:s,isComplex:a,_columns:l,originColumns:o,columns:d,fixedColumns:p,rightFixedColumns:A,leafColumns:v,fixedLeafColumns:y,rightFixedLeafColumns:C,updateOrderFns:x,leafColumnsLength:M,fixedLeafColumnsLength:I,rightFixedLeafColumnsLength:P,isAllSelected:F,selection:D,reserveSelection:V,selectOnIndeterminate:H,selectable:Q,filters:G,filteredData:W,sortingColumn:te,sortProp:q,sortOrder:Y,hoverRow:ee,...Tt,...Zt,...Be}}}function X3(t,e){return t.map(n=>{var r;return n.id===e.id?e:((r=n.children)!=null&&r.length&&(n.children=X3(n.children,e)),n)})}function Z3(t){t.forEach(e=>{var n,r;e.no=(n=e.getColumnIndex)==null?void 0:n.call(e),(r=e.children)!=null&&r.length&&Z3(e.children)}),t.sort((e,n)=>e.no-n.no)}function v9e(){const t=mi(),e=m9e();return{ns:_n("table"),...e,mutations:{setData(a,l){const o=T(a._data)!==l;a.data.value=l,a._data.value=l,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),T(a.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):o?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(a,l,o,d){const p=T(a._columns);let A=[];o?(o&&!o.children&&(o.children=[]),o.children.push(l),A=X3(p,o)):(p.push(l),A=p),Z3(A),a._columns.value=A,a.updateOrderFns.push(d),l.type==="selection"&&(a.selectable.value=l.selectable,a.reserveSelection.value=l.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(a,l){var o;((o=l.getColumnIndex)==null?void 0:o.call(l))!==l.no&&(Z3(a._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(a,l,o,d){const p=T(a._columns)||[];if(o)o.children.splice(o.children.findIndex(v=>v.id===l.id),1),Tr(()=>{var v;((v=o.children)==null?void 0:v.length)===0&&delete o.children}),a._columns.value=X3(p,o);else{const v=p.indexOf(l);v>-1&&(p.splice(v,1),a._columns.value=p)}const A=a.updateOrderFns.indexOf(d);A>-1&&a.updateOrderFns.splice(A,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(a,l){const{prop:o,order:d,init:p}=l;if(o){const A=T(a.columns).find(v=>v.property===o);A&&(A.order=d,t.store.updateSort(A,o,d),t.store.commit("changeSortCondition",{init:p}))}},changeSortCondition(a,l){const{sortingColumn:o,sortProp:d,sortOrder:p}=a,A=T(o),v=T(d),y=T(p);y===null&&(a.sortingColumn.value=null,a.sortProp.value=null);const C={filter:!0};t.store.execQuery(C),(!l||!(l.silent||l.init))&&t.emit("sort-change",{column:A,prop:v,order:y}),t.store.updateTableScrollY()},filterChange(a,l){const{column:o,values:d,silent:p}=l,A=t.store.updateFilters(o,d);t.store.execQuery(),p||t.emit("filter-change",A),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(a,l){t.store.toggleRowSelection(l),t.store.updateAllSelected()},setHoverRow(a,l){a.hoverRow.value=l},setCurrentRow(a,l){t.store.updateCurrentRow(l)}},commit:function(a,...l){const o=t.store.mutations;if(o[a])o[a].apply(t,[t.store.states].concat(l));else throw new Error(`Action not found: ${a}`)},updateTableScrollY:function(){Tr(()=>t.layout.updateScrollY.apply(t.layout))}}}const XT={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function y9e(t,e){if(!t)throw new Error("Table is required.");const n=v9e();return n.toggleAllSelection=Rd(n._toggleAllSelection,10),Object.keys(XT).forEach(r=>{Vhe(Hhe(e,r),r,n)}),_9e(n,e),n}function _9e(t,e){Object.keys(XT).forEach(n=>{zt(()=>Hhe(e,n),r=>{Vhe(r,n,t)})})}function Vhe(t,e,n){let r=t,i=XT[e];typeof XT[e]=="object"&&(i=i.key,r=r||XT[e].default),n.states[i].value=r}function Hhe(t,e){if(e.includes(".")){const n=e.split(".");let r=t;return n.forEach(i=>{r=r[i]}),r}else return t[e]}class b9e{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=Me(null),this.scrollX=Me(!1),this.scrollY=Me(!1),this.bodyWidth=Me(null),this.fixedWidth=Me(null),this.rightFixedWidth=Me(null),this.gutterWidth=0;for(const n in e)vs(e,n)&&(Go(this[n])?this[n].value=e[n]:this[n]=e[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(n!=null&&n.wrapRef)){let r=!0;const i=this.scrollY.value;return r=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=r,i!==r}return!1}setHeight(e,n="height"){if(!As)return;const r=this.table.vnode.el;if(e=c9e(e),this.height.value=Number(e),!r&&(e||e===0))return Tr(()=>this.setHeight(e,n));typeof e=="number"?(r.style[n]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(r.style[n]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?e.push.apply(e,r.columns):e.push(r)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let n=e;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!As)return;const e=this.fit,n=this.table.vnode.el.clientWidth;let r=0;const i=this.getFlattenColumns(),s=i.filter(o=>typeof o.width!="number");if(i.forEach(o=>{typeof o.width=="number"&&o.realWidth&&(o.realWidth=null)}),s.length>0&&e){if(i.forEach(o=>{r+=Number(o.width||o.minWidth||80)}),r<=n){this.scrollX.value=!1;const o=n-r;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+o;else{const d=s.reduce((v,y)=>v+Number(y.minWidth||80),0),p=o/d;let A=0;s.forEach((v,y)=>{if(y===0)return;const C=Math.floor(Number(v.minWidth||80)*p);A+=C,v.realWidth=Number(v.minWidth||80)+C}),s[0].realWidth=Number(s[0].minWidth||80)+o-A}}else this.scrollX.value=!0,s.forEach(o=>{o.realWidth=Number(o.minWidth)});this.bodyWidth.value=Math.max(r,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else i.forEach(o=>{!o.width&&!o.minWidth?o.realWidth=80:o.realWidth=Number(o.width||o.minWidth),r+=o.realWidth}),this.scrollX.value=r>n,this.bodyWidth.value=r;const a=this.store.states.fixedColumns.value;if(a.length>0){let o=0;a.forEach(d=>{o+=Number(d.realWidth||d.width)}),this.fixedWidth.value=o}const l=this.store.states.rightFixedColumns.value;if(l.length>0){let o=0;l.forEach(d=>{o+=Number(d.realWidth||d.width)}),this.rightFixedWidth.value=o}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}notifyObservers(e){this.observers.forEach(r=>{var i,s;switch(e){case"columns":(i=r.state)==null||i.onColumnsChange(this);break;case"scrollable":(s=r.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:w9e}=Ip,x9e=Ge({name:"ElTableFilterPanel",components:{ElCheckbox:Ip,ElCheckboxGroup:w9e,ElScrollbar:d0,ElTooltip:_h,ElIcon:mr,ArrowDown:u0,ArrowUp:IV},directives:{ClickOutside:Yv},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const e=mi(),{t:n}=Ts(),r=_n("table-filter"),i=e==null?void 0:e.parent;i.filterPanels.value[t.column.id]||(i.filterPanels.value[t.column.id]=e);const s=Me(!1),a=Me(null),l=oe(()=>t.column&&t.column.filters),o=oe(()=>t.column.filterClassName?`${r.b()} ${t.column.filterClassName}`:r.b()),d=oe({get:()=>{var V;return(((V=t.column)==null?void 0:V.filteredValue)||[])[0]},set:V=>{p.value&&(typeof V<"u"&&V!==null?p.value.splice(0,1,V):p.value.splice(0,1))}}),p=oe({get(){return t.column?t.column.filteredValue||[]:[]},set(V){t.column&&t.upDataColumn("filteredValue",V)}}),A=oe(()=>t.column?t.column.filterMultiple:!0),v=V=>V.value===d.value,y=()=>{s.value=!1},C=V=>{V.stopPropagation(),s.value=!s.value},x=()=>{s.value=!1},M=()=>{F(p.value),y()},I=()=>{p.value=[],F(p.value),y()},P=V=>{d.value=V,F(typeof V<"u"&&V!==null?p.value:[]),y()},F=V=>{t.store.commit("filterChange",{column:t.column,values:V}),t.store.updateAllSelected()};zt(s,V=>{t.column&&t.upDataColumn("filterOpened",V)},{immediate:!0});const D=oe(()=>{var V,H;return(H=(V=a.value)==null?void 0:V.popperRef)==null?void 0:H.contentRef});return{tooltipVisible:s,multiple:A,filterClassName:o,filteredValue:p,filterValue:d,filters:l,handleConfirm:M,handleReset:I,handleSelect:P,isActive:v,t:n,ns:r,showFilterPanel:C,hideFilterPanel:x,popperPaneRef:D,tooltip:a}}}),C9e={key:0},E9e=["disabled"],S9e=["label","onClick"];function T9e(t,e,n,r,i,s){const a=ui("el-checkbox"),l=ui("el-checkbox-group"),o=ui("el-scrollbar"),d=ui("arrow-up"),p=ui("arrow-down"),A=ui("el-icon"),v=ui("el-tooltip"),y=G5("click-outside");return ve(),qt(v,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:""},{content:It(()=>[t.multiple?(ve(),Ue("div",C9e,[rt("div",{class:xe(t.ns.e("content"))},[pt(o,{"wrap-class":t.ns.e("wrap")},{default:It(()=>[pt(l,{modelValue:t.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=C=>t.filteredValue=C),class:xe(t.ns.e("checkbox-group"))},{default:It(()=>[(ve(!0),Ue(_r,null,cs(t.filters,C=>(ve(),qt(a,{key:C.value,value:C.value},{default:It(()=>[gs(Nn(C.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),rt("div",{class:xe(t.ns.e("bottom"))},[rt("button",{class:xe({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...C)=>t.handleConfirm&&t.handleConfirm(...C))},Nn(t.t("el.table.confirmFilter")),11,E9e),rt("button",{type:"button",onClick:e[2]||(e[2]=(...C)=>t.handleReset&&t.handleReset(...C))},Nn(t.t("el.table.resetFilter")),1)],2)])):(ve(),Ue("ul",{key:1,class:xe(t.ns.e("list"))},[rt("li",{class:xe([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:e[3]||(e[3]=C=>t.handleSelect(null))},Nn(t.t("el.table.clearFilter")),3),(ve(!0),Ue(_r,null,cs(t.filters,C=>(ve(),Ue("li",{key:C.value,class:xe([t.ns.e("list-item"),t.ns.is("active",t.isActive(C))]),label:C.value,onClick:x=>t.handleSelect(C.value)},Nn(C.text),11,S9e))),128))],2))]),default:It(()=>[ci((ve(),Ue("span",{class:xe([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...C)=>t.showFilterPanel&&t.showFilterPanel(...C))},[pt(A,null,{default:It(()=>[t.column.filterOpened?(ve(),qt(d,{key:0})):(ve(),qt(p,{key:1}))]),_:1})],2)),[[y,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var I9e=Fn(x9e,[["render",T9e],["__file","filter-panel.vue"]]);function Ghe(t){const e=mi();K5(()=>{n.value.addObserver(e)}),dr(()=>{r(n.value),i(n.value)}),o0(()=>{r(n.value),i(n.value)}),Ss(()=>{n.value.removeObserver(e)});const n=oe(()=>{const s=t.layout;if(!s)throw new Error("Can not find table layout.");return s}),r=s=>{var a;const l=((a=t.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col"))||[];if(!l.length)return;const o=s.getFlattenColumns(),d={};o.forEach(p=>{d[p.id]=p});for(let p=0,A=l.length;p<A;p++){const v=l[p],y=v.getAttribute("name"),C=d[y];C&&v.setAttribute("width",C.realWidth||C.width)}},i=s=>{var a,l;const o=((a=t.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let p=0,A=o.length;p<A;p++)o[p].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const d=((l=t.vnode.el)==null?void 0:l.querySelectorAll("th.gutter"))||[];for(let p=0,A=d.length;p<A;p++){const v=d[p];v.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",v.style.display=s.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:r,onScrollableChange:i}}const fm=Symbol("ElTable");function B9e(t,e){const n=mi(),r=mn(fm),i=x=>{x.stopPropagation()},s=(x,M)=>{!M.filters&&M.sortable?C(x,M,!1):M.filterable&&!M.sortable&&i(x),r==null||r.emit("header-click",M,x)},a=(x,M)=>{r==null||r.emit("header-contextmenu",M,x)},l=Me(null),o=Me(!1),d=Me({}),p=(x,M)=>{if(As&&!(M.children&&M.children.length>0)&&l.value&&t.border){o.value=!0;const I=r;e("set-drag-visible",!0);const F=(I==null?void 0:I.vnode.el).getBoundingClientRect().left,D=n.vnode.el.querySelector(`th.${M.id}`),V=D.getBoundingClientRect(),H=V.left-F+30;pp(D,"noclick"),d.value={startMouseLeft:x.clientX,startLeft:V.right-F,startColumnLeft:V.left-F,tableLeft:F};const Q=I==null?void 0:I.refs.resizeProxy;Q.style.left=`${d.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const G=te=>{const q=te.clientX-d.value.startMouseLeft,Y=d.value.startLeft+q;Q.style.left=`${Math.max(H,Y)}px`},W=()=>{if(o.value){const{startColumnLeft:te,startLeft:q}=d.value,ee=Number.parseInt(Q.style.left,10)-te;M.width=M.realWidth=ee,I==null||I.emit("header-dragend",M.width,q-te,M,x),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",o.value=!1,l.value=null,d.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",W),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{yh(D,"noclick")},0)};document.addEventListener("mousemove",G),document.addEventListener("mouseup",W)}},A=(x,M)=>{if(M.children&&M.children.length>0)return;const I=x.target;if(!Ep(I))return;const P=I==null?void 0:I.closest("th");if(!(!M||!M.resizable)&&!o.value&&t.border){const F=P.getBoundingClientRect(),D=document.body.style;F.width>12&&F.right-x.pageX<8?(D.cursor="col-resize",bp(P,"is-sortable")&&(P.style.cursor="col-resize"),l.value=M):o.value||(D.cursor="",bp(P,"is-sortable")&&(P.style.cursor="pointer"),l.value=null)}},v=()=>{As&&(document.body.style.cursor="")},y=({order:x,sortOrders:M})=>{if(x==="")return M[0];const I=M.indexOf(x||null);return M[I>M.length-2?0:I+1]},C=(x,M,I)=>{var P;x.stopPropagation();const F=M.order===I?null:I||y(M),D=(P=x.target)==null?void 0:P.closest("th");if(D&&bp(D,"noclick")){yh(D,"noclick");return}if(!M.sortable)return;const V=t.store.states;let H=V.sortProp.value,Q;const G=V.sortingColumn.value;(G!==M||G===M&&G.order===null)&&(G&&(G.order=null),V.sortingColumn.value=M,H=M.property),F?Q=M.order=F:Q=M.order=null,V.sortProp.value=H,V.sortOrder.value=Q,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:a,handleMouseDown:p,handleMouseMove:A,handleMouseOut:v,handleSortClick:C,handleFilterClick:i}}function M9e(t){const e=mn(fm),n=_n("table");return{getHeaderRowStyle:l=>{const o=e==null?void 0:e.props.headerRowStyle;return typeof o=="function"?o.call(null,{rowIndex:l}):o},getHeaderRowClass:l=>{const o=[],d=e==null?void 0:e.props.headerRowClassName;return typeof d=="string"?o.push(d):typeof d=="function"&&o.push(d.call(null,{rowIndex:l})),o.join(" ")},getHeaderCellStyle:(l,o,d,p)=>{var A;let v=(A=e==null?void 0:e.props.headerCellStyle)!=null?A:{};typeof v=="function"&&(v=v.call(null,{rowIndex:l,columnIndex:o,row:d,column:p}));const y=BH(o,p.fixed,t.store,d);return qC(y,"left"),qC(y,"right"),Object.assign({},v,y)},getHeaderCellClass:(l,o,d,p)=>{const A=IH(n.b(),o,p.fixed,t.store,d),v=[p.id,p.order,p.headerAlign,p.className,p.labelClassName,...A];p.children||v.push("is-leaf"),p.sortable&&v.push("is-sortable");const y=e==null?void 0:e.props.headerCellClassName;return typeof y=="string"?v.push(y):typeof y=="function"&&v.push(y.call(null,{rowIndex:l,columnIndex:o,row:d,column:p})),v.push(n.e("cell")),v.filter(C=>!!C).join(" ")}}}const Qhe=t=>{const e=[];return t.forEach(n=>{n.children?(e.push(n),e.push.apply(e,Qhe(n.children))):e.push(n)}),e},L9e=t=>{let e=1;const n=(s,a)=>{if(a&&(s.level=a.level+1,e<s.level&&(e=s.level)),s.children){let l=0;s.children.forEach(o=>{n(o,s),l+=o.colSpan}),s.colSpan=l}else s.colSpan=1};t.forEach(s=>{s.level=1,n(s,void 0)});const r=[];for(let s=0;s<e;s++)r.push([]);return Qhe(t).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(a=>a.isSubColumn=!0)):s.rowSpan=e-s.level+1,r[s.level-1].push(s)}),r};function R9e(t){const e=mn(fm),n=oe(()=>L9e(t.store.states.originColumns.value));return{isGroup:oe(()=>{const s=n.value.length>1;return s&&e&&(e.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:n}}var P9e=Ge({name:"ElTableHeader",components:{ElCheckbox:Ip},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:e}){const n=mi(),r=mn(fm),i=_n("table"),s=Me({}),{onColumnsChange:a,onScrollableChange:l}=Ghe(r);dr(async()=>{await Tr(),await Tr();const{prop:H,order:Q}=t.defaultSort;r==null||r.store.commit("sort",{prop:H,order:Q,init:!0})});const{handleHeaderClick:o,handleHeaderContextMenu:d,handleMouseDown:p,handleMouseMove:A,handleMouseOut:v,handleSortClick:y,handleFilterClick:C}=B9e(t,e),{getHeaderRowStyle:x,getHeaderRowClass:M,getHeaderCellStyle:I,getHeaderCellClass:P}=M9e(t),{isGroup:F,toggleAllSelection:D,columnRows:V}=R9e(t);return n.state={onColumnsChange:a,onScrollableChange:l},n.filterPanels=s,{ns:i,filterPanels:s,onColumnsChange:a,onScrollableChange:l,columnRows:V,getHeaderRowClass:M,getHeaderRowStyle:x,getHeaderCellClass:P,getHeaderCellStyle:I,handleHeaderClick:o,handleHeaderContextMenu:d,handleMouseDown:p,handleMouseMove:A,handleMouseOut:v,handleSortClick:y,handleFilterClick:C,isGroup:F,toggleAllSelection:D}},render(){const{ns:t,isGroup:e,columnRows:n,getHeaderCellStyle:r,getHeaderCellClass:i,getHeaderRowClass:s,getHeaderRowStyle:a,handleHeaderClick:l,handleHeaderContextMenu:o,handleMouseDown:d,handleMouseMove:p,handleSortClick:A,handleMouseOut:v,store:y,$parent:C}=this;let x=1;return Br("thead",{class:{[t.is("group")]:e}},n.map((M,I)=>Br("tr",{class:s(I),key:I,style:a(I)},M.map((P,F)=>(P.rowSpan>x&&(x=P.rowSpan),Br("th",{class:i(I,F,M,P),colspan:P.colSpan,key:`${P.id}-thead`,rowspan:P.rowSpan,style:r(I,F,M,P),onClick:D=>l(D,P),onContextmenu:D=>o(D,P),onMousedown:D=>d(D,P),onMousemove:D=>p(D,P),onMouseout:v},[Br("div",{class:["cell",P.filteredValue&&P.filteredValue.length>0?"highlight":""]},[P.renderHeader?P.renderHeader({column:P,$index:F,store:y,_self:C}):P.label,P.sortable&&Br("span",{onClick:D=>A(D,P),class:"caret-wrapper"},[Br("i",{onClick:D=>A(D,P,"ascending"),class:"sort-caret ascending"}),Br("i",{onClick:D=>A(D,P,"descending"),class:"sort-caret descending"})]),P.filterable&&Br(I9e,{store:y,placement:P.filterPlacement||"bottom-start",column:P,upDataColumn:(D,V)=>{P[D]=V}})])]))))))}});function F9e(t){const e=mn(fm),n=Me(""),r=Me(Br("div")),i=(C,x,M)=>{var I;const P=e,F=r4(C);let D;const V=(I=P==null?void 0:P.vnode.el)==null?void 0:I.dataset.prefix;F&&(D=aJ({columns:t.store.states.columns.value},F,V),D&&(P==null||P.emit(`cell-${M}`,x,D,F,C))),P==null||P.emit(`row-${M}`,x,D,C)},s=(C,x)=>{i(C,x,"dblclick")},a=(C,x)=>{t.store.commit("setCurrentRow",x),i(C,x,"click")},l=(C,x)=>{i(C,x,"contextmenu")},o=Rd(C=>{t.store.commit("setHoverRow",C)},30),d=Rd(()=>{t.store.commit("setHoverRow",null)},30),p=C=>{const x=window.getComputedStyle(C,null),M=Number.parseInt(x.paddingLeft,10)||0,I=Number.parseInt(x.paddingRight,10)||0,P=Number.parseInt(x.paddingTop,10)||0,F=Number.parseInt(x.paddingBottom,10)||0;return{left:M,right:I,top:P,bottom:F}},A=(C,x,M)=>{let I=x.target.parentNode;for(;C>1&&(I=I==null?void 0:I.nextSibling,!(!I||I.nodeName!=="TR"));)M(I,"hover-row hover-fixed-row"),C--};return{handleDoubleClick:s,handleClick:a,handleContextMenu:l,handleMouseEnter:o,handleMouseLeave:d,handleCellMouseEnter:(C,x,M)=>{var I;const P=e,F=r4(C),D=(I=P==null?void 0:P.vnode.el)==null?void 0:I.dataset.prefix;if(F){const ue=aJ({columns:t.store.states.columns.value},F,D);F.rowSpan>1&&A(F.rowSpan,C,pp);const me=P.hoverState={cell:F,column:ue,row:x};P==null||P.emit("cell-mouse-enter",me.row,me.column,me.cell,C)}if(!M)return;const V=C.target.querySelector(".cell");if(!(bp(V,`${D}-tooltip`)&&V.childNodes.length))return;const H=document.createRange();H.setStart(V,0),H.setEnd(V,V.childNodes.length);let Q=H.getBoundingClientRect().width,G=H.getBoundingClientRect().height;const W=Q-Math.floor(Q),{width:te,height:q}=V.getBoundingClientRect();W<.001&&(Q=Math.floor(Q)),G-Math.floor(G)<.001&&(G=Math.floor(G));const{top:ee,left:ce,right:se,bottom:le}=p(V),ie=ce+se,pe=ee+le;(Q+ie>te||G+pe>q||V.scrollWidth>te)&&d9e(M,F.innerText||F.textContent,F,P)},handleCellMouseLeave:C=>{const x=r4(C);if(!x)return;x.rowSpan>1&&A(x.rowSpan,C,yh);const M=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",M==null?void 0:M.row,M==null?void 0:M.column,M==null?void 0:M.cell,C)},tooltipContent:n,tooltipTrigger:r}}function O9e(t){const e=mn(fm),n=_n("table");return{getRowStyle:(d,p)=>{const A=e==null?void 0:e.props.rowStyle;return typeof A=="function"?A.call(null,{row:d,rowIndex:p}):A||null},getRowClass:(d,p)=>{const A=[n.e("row")];e!=null&&e.props.highlightCurrentRow&&d===t.store.states.currentRow.value&&A.push("current-row"),t.stripe&&p%2===1&&A.push(n.em("row","striped"));const v=e==null?void 0:e.props.rowClassName;return typeof v=="string"?A.push(v):typeof v=="function"&&A.push(v.call(null,{row:d,rowIndex:p})),A},getCellStyle:(d,p,A,v)=>{const y=e==null?void 0:e.props.cellStyle;let C=y??{};typeof y=="function"&&(C=y.call(null,{rowIndex:d,columnIndex:p,row:A,column:v}));const x=BH(p,t==null?void 0:t.fixed,t.store);return qC(x,"left"),qC(x,"right"),Object.assign({},C,x)},getCellClass:(d,p,A,v,y)=>{const C=IH(n.b(),p,t==null?void 0:t.fixed,t.store,void 0,y),x=[v.id,v.align,v.className,...C],M=e==null?void 0:e.props.cellClassName;return typeof M=="string"?x.push(M):typeof M=="function"&&x.push(M.call(null,{rowIndex:d,columnIndex:p,row:A,column:v})),x.push(n.e("cell")),x.filter(I=>!!I).join(" ")},getSpan:(d,p,A,v)=>{let y=1,C=1;const x=e==null?void 0:e.props.spanMethod;if(typeof x=="function"){const M=x({row:d,column:p,rowIndex:A,columnIndex:v});Array.isArray(M)?(y=M[0],C=M[1]):typeof M=="object"&&(y=M.rowspan,C=M.colspan)}return{rowspan:y,colspan:C}},getColspanRealWidth:(d,p,A)=>{if(p<1)return d[A].realWidth;const v=d.map(({realWidth:y,width:C})=>y||C).slice(A,A+p);return Number(v.reduce((y,C)=>Number(y)+Number(C),-1))}}}function N9e(t){const e=mn(fm),n=_n("table"),{handleDoubleClick:r,handleClick:i,handleContextMenu:s,handleMouseEnter:a,handleMouseLeave:l,handleCellMouseEnter:o,handleCellMouseLeave:d,tooltipContent:p,tooltipTrigger:A}=F9e(t),{getRowStyle:v,getRowClass:y,getCellStyle:C,getCellClass:x,getSpan:M,getColspanRealWidth:I}=O9e(t),P=oe(()=>t.store.states.columns.value.findIndex(({type:Q})=>Q==="default")),F=(Q,G)=>{const W=e.props.rowKey;return W?Uu(Q,W):G},D=(Q,G,W,te=!1)=>{const{tooltipEffect:q,tooltipOptions:Y,store:ee}=t,{indent:ce,columns:se}=ee.states,le=y(Q,G);let ie=!0;return W&&(le.push(n.em("row",`level-${W.level}`)),ie=W.display),Br("tr",{style:[ie?null:{display:"none"},v(Q,G)],class:le,key:F(Q,G),onDblclick:ue=>r(ue,Q),onClick:ue=>i(ue,Q),onContextmenu:ue=>s(ue,Q),onMouseenter:()=>a(G),onMouseleave:l},se.value.map((ue,me)=>{const{rowspan:Le,colspan:ae}=M(Q,ue,G,me);if(!Le||!ae)return null;const be=Object.assign({},ue);be.realWidth=I(se.value,ae,me);const _e={store:t.store,_self:t.context||e,column:be,row:Q,$index:G,cellIndex:me,expanded:te};me===P.value&&W&&(_e.treeNode={indent:W.level*ce.value,level:W.level},typeof W.expanded=="boolean"&&(_e.treeNode.expanded=W.expanded,"loading"in W&&(_e.treeNode.loading=W.loading),"noLazyChildren"in W&&(_e.treeNode.noLazyChildren=W.noLazyChildren)));const $e=`${F(Q,G)},${me}`,Re=be.columnKey||be.rawColumnKey||"",Ie=V(me,ue,_e),Ne=ue.showOverflowTooltip&&MPe({effect:q},Y,ue.showOverflowTooltip);return Br("td",{style:C(G,me,Q,ue),class:x(G,me,Q,ue,ae-1),key:`${Re}${$e}`,rowspan:Le,colspan:ae,onMouseenter:Je=>o(Je,Q,Ne),onMouseleave:d},[Ie])}))},V=(Q,G,W)=>G.renderCell(W);return{wrappedRowRender:(Q,G)=>{const W=t.store,{isRowExpanded:te,assertRowKey:q}=W,{treeData:Y,lazyTreeNodeMap:ee,childrenColumnName:ce,rowKey:se}=W.states,le=W.states.columns.value;if(le.some(({type:pe})=>pe==="expand")){const pe=te(Q),ue=D(Q,G,void 0,pe),me=e.renderExpanded;return pe?me?[[ue,Br("tr",{key:`expanded-row__${ue.key}`},[Br("td",{colspan:le.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[me({row:Q,$index:G,store:W,expanded:pe})])])]]:(console.error("[Element Error]renderExpanded is required."),ue):[[ue]]}else if(Object.keys(Y.value).length){q();const pe=Uu(Q,se.value);let ue=Y.value[pe],me=null;ue&&(me={expanded:ue.expanded,level:ue.level,display:!0},typeof ue.lazy=="boolean"&&(typeof ue.loaded=="boolean"&&ue.loaded&&(me.noLazyChildren=!(ue.children&&ue.children.length)),me.loading=ue.loading));const Le=[D(Q,G,me)];if(ue){let ae=0;const be=($e,Re)=>{$e&&$e.length&&Re&&$e.forEach(Ie=>{const Ne={display:Re.display&&Re.expanded,level:Re.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Je=Uu(Ie,se.value);if(Je==null)throw new Error("For nested data item, row-key is required.");if(ue={...Y.value[Je]},ue&&(Ne.expanded=ue.expanded,ue.level=ue.level||Ne.level,ue.display=!!(ue.expanded&&Ne.display),typeof ue.lazy=="boolean"&&(typeof ue.loaded=="boolean"&&ue.loaded&&(Ne.noLazyChildren=!(ue.children&&ue.children.length)),Ne.loading=ue.loading)),ae++,Le.push(D(Ie,G+ae,Ne)),ue){const je=ee.value[Je]||Ie[ce.value];be(je,ue)}})};ue.display=!0;const _e=ee.value[pe]||Q[ce.value];be(_e,ue)}return Le}else return D(Q,G,void 0)},tooltipContent:p,tooltipTrigger:A}}const k9e={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var D9e=Ge({name:"ElTableBody",props:k9e,setup(t){const e=mi(),n=mn(fm),r=_n("table"),{wrappedRowRender:i,tooltipContent:s,tooltipTrigger:a}=N9e(t),{onColumnsChange:l,onScrollableChange:o}=Ghe(n),d=[];return zt(t.store.states.hoverRow,(p,A)=>{var v;const y=e==null?void 0:e.vnode.el,C=Array.from((y==null?void 0:y.children)||[]).filter(I=>I==null?void 0:I.classList.contains(`${r.e("row")}`));let x=p;const M=(v=C[x])==null?void 0:v.childNodes;if(M!=null&&M.length){let I=0;Array.from(M).reduce((F,D,V)=>{var H,Q;return((H=M[V])==null?void 0:H.colSpan)>1&&(I=(Q=M[V])==null?void 0:Q.colSpan),D.nodeName!=="TD"&&I===0&&F.push(V),I>0&&I--,F},[]).forEach(F=>{var D;for(x=p;x>0;){const V=(D=C[x-1])==null?void 0:D.childNodes;if(V[F]&&V[F].nodeName==="TD"&&V[F].rowSpan>1){pp(V[F],"hover-cell"),d.push(V[F]);break}x--}})}else d.forEach(I=>yh(I,"hover-cell")),d.length=0;!t.store.states.isComplex.value||!As||n_(()=>{const I=C[A],P=C[p];I&&!I.classList.contains("hover-fixed-row")&&yh(I,"hover-row"),P&&pp(P,"hover-row")})}),Ss(()=>{var p;(p=sp)==null||p()}),{ns:r,onColumnsChange:l,onScrollableChange:o,wrappedRowRender:i,tooltipContent:s,tooltipTrigger:a}},render(){const{wrappedRowRender:t,store:e}=this,n=e.states.data.value||[];return Br("tbody",{tabIndex:-1},[n.reduce((r,i)=>r.concat(t(i,r.length)),[])])}});function U9e(){const t=mn(fm),e=t==null?void 0:t.store,n=oe(()=>e.states.fixedLeafColumnsLength.value),r=oe(()=>e.states.rightFixedColumns.value.length),i=oe(()=>e.states.columns.value.length),s=oe(()=>e.states.fixedColumns.value.length),a=oe(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:r,columnsCount:i,leftFixedCount:s,rightFixedCount:a,columns:e.states.columns}}function z9e(t){const{columns:e}=U9e(),n=_n("table");return{getCellClasses:(s,a)=>{const l=s[a],o=[n.e("cell"),l.id,l.align,l.labelClassName,...IH(n.b(),a,l.fixed,t.store)];return l.className&&o.push(l.className),l.children||o.push(n.is("leaf")),o},getCellStyles:(s,a)=>{const l=BH(a,s.fixed,t.store);return qC(l,"left"),qC(l,"right"),l},columns:e}}var $9e=Ge({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:e,getCellStyles:n,columns:r}=z9e(t);return{ns:_n("table"),getCellClasses:e,getCellStyles:n,columns:r}},render(){const{columns:t,getCellStyles:e,getCellClasses:n,summaryMethod:r,sumText:i}=this,s=this.store.states.data.value;let a=[];return r?a=r({columns:t,data:s}):t.forEach((l,o)=>{if(o===0){a[o]=i;return}const d=s.map(y=>Number(y[l.property])),p=[];let A=!0;d.forEach(y=>{if(!Number.isNaN(+y)){A=!1;const C=`${y}`.split(".")[1];p.push(C?C.length:0)}});const v=Math.max.apply(null,p);A?a[o]="":a[o]=d.reduce((y,C)=>{const x=Number(C);return Number.isNaN(+x)?y:Number.parseFloat((y+C).toFixed(Math.min(v,20)))},0)}),Br(Br("tfoot",[Br("tr",{},[...t.map((l,o)=>Br("td",{key:o,colspan:l.colSpan,rowspan:l.rowSpan,class:n(t,o),style:e(l,o)},[Br("div",{class:["cell",l.labelClassName]},[a[o]])]))])]))}});function V9e(t){return{setCurrentRow:p=>{t.commit("setCurrentRow",p)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(p,A)=>{t.toggleRowSelection(p,A,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:p=>{t.clearFilter(p)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(p,A)=>{t.toggleRowExpansionAdapter(p,A)},clearSort:()=>{t.clearSort()},sort:(p,A)=>{t.commit("sort",{prop:p,order:A})}}}function H9e(t,e,n,r){const i=Me(!1),s=Me(null),a=Me(!1),l=ue=>{a.value=ue},o=Me({width:null,height:null,headerHeight:null}),d=Me(!1),p={display:"inline-block",verticalAlign:"middle"},A=Me(),v=Me(0),y=Me(0),C=Me(0),x=Me(0),M=Me(0);bu(()=>{e.setHeight(t.height)}),bu(()=>{e.setMaxHeight(t.maxHeight)}),zt(()=>[t.currentRowKey,n.states.rowKey],([ue,me])=>{!T(me)||!T(ue)||n.setCurrentRowKey(`${ue}`)},{immediate:!0}),zt(()=>t.data,ue=>{r.store.commit("setData",ue)},{immediate:!0,deep:!0}),bu(()=>{t.expandRowKeys&&n.setExpandRowKeysAdapter(t.expandRowKeys)});const I=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},P=(ue,me)=>{const{pixelX:Le,pixelY:ae}=me;Math.abs(Le)>=Math.abs(ae)&&(r.refs.bodyWrapper.scrollLeft+=me.pixelX/5)},F=oe(()=>t.height||t.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),D=oe(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),V=()=>{F.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(W)};dr(async()=>{await Tr(),n.updateColumns(),te(),requestAnimationFrame(V);const ue=r.vnode.el,me=r.refs.headerWrapper;t.flexible&&ue&&ue.parentElement&&(ue.parentElement.style.minWidth="0"),o.value={width:A.value=ue.offsetWidth,height:ue.offsetHeight,headerHeight:t.showHeader&&me?me.offsetHeight:null},n.states.columns.value.forEach(Le=>{Le.filteredValue&&Le.filteredValue.length&&r.store.commit("filterChange",{column:Le,values:Le.filteredValue,silent:!0})}),r.$ready=!0});const H=(ue,me)=>{if(!ue)return;const Le=Array.from(ue.classList).filter(ae=>!ae.startsWith("is-scrolling-"));Le.push(e.scrollX.value?me:"is-scrolling-none"),ue.className=Le.join(" ")},Q=ue=>{const{tableWrapper:me}=r.refs;H(me,ue)},G=ue=>{const{tableWrapper:me}=r.refs;return!!(me&&me.classList.contains(ue))},W=function(){if(!r.refs.scrollBarRef)return;if(!e.scrollX.value){const Re="is-scrolling-none";G(Re)||Q(Re);return}const ue=r.refs.scrollBarRef.wrapRef;if(!ue)return;const{scrollLeft:me,offsetWidth:Le,scrollWidth:ae}=ue,{headerWrapper:be,footerWrapper:_e}=r.refs;be&&(be.scrollLeft=me),_e&&(_e.scrollLeft=me);const $e=ae-Le-1;me>=$e?Q("is-scrolling-right"):Q(me===0?"is-scrolling-left":"is-scrolling-middle")},te=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&Vo(r.refs.scrollBarRef.wrapRef,"scroll",W,{passive:!0}),t.fit?Ia(r.vnode.el,q):Vo(window,"resize",q),Ia(r.refs.bodyWrapper,()=>{var ue,me;q(),(me=(ue=r.refs)==null?void 0:ue.scrollBarRef)==null||me.update()}))},q=()=>{var ue,me,Le,ae;const be=r.vnode.el;if(!r.$ready||!be)return;let _e=!1;const{width:$e,height:Re,headerHeight:Ie}=o.value,Ne=A.value=be.offsetWidth;$e!==Ne&&(_e=!0);const Je=be.offsetHeight;(t.height||F.value)&&Re!==Je&&(_e=!0);const je=t.tableLayout==="fixed"?r.refs.headerWrapper:(ue=r.refs.tableHeaderRef)==null?void 0:ue.$el;t.showHeader&&(je==null?void 0:je.offsetHeight)!==Ie&&(_e=!0),v.value=((me=r.refs.tableWrapper)==null?void 0:me.scrollHeight)||0,C.value=(je==null?void 0:je.scrollHeight)||0,x.value=((Le=r.refs.footerWrapper)==null?void 0:Le.offsetHeight)||0,M.value=((ae=r.refs.appendWrapper)==null?void 0:ae.offsetHeight)||0,y.value=v.value-C.value-x.value-M.value,_e&&(o.value={width:Ne,height:Je,headerHeight:t.showHeader&&(je==null?void 0:je.offsetHeight)||0},V())},Y=Gl(),ee=oe(()=>{const{bodyWidth:ue,scrollY:me,gutterWidth:Le}=e;return ue.value?`${ue.value-(me.value?Le:0)}px`:""}),ce=oe(()=>t.maxHeight?"fixed":t.tableLayout),se=oe(()=>{if(t.data&&t.data.length)return null;let ue="100%";t.height&&y.value&&(ue=`${y.value}px`);const me=A.value;return{width:me?`${me}px`:"",height:ue}}),le=oe(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),ie=oe(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${C.value+x.value}px)`}:{maxHeight:`${t.maxHeight-C.value-x.value}px`}:{});return{isHidden:i,renderExpanded:s,setDragVisible:l,isGroup:d,handleMouseLeave:I,handleHeaderFooterMousewheel:P,tableSize:Y,emptyBlockStyle:se,handleFixedMousewheel:(ue,me)=>{const Le=r.refs.bodyWrapper;if(Math.abs(me.spinY)>0){const ae=Le.scrollTop;me.pixelY<0&&ae!==0&&ue.preventDefault(),me.pixelY>0&&Le.scrollHeight-Le.clientHeight>ae&&ue.preventDefault(),Le.scrollTop+=Math.ceil(me.pixelY/5)}else Le.scrollLeft+=Math.ceil(me.pixelX/5)},resizeProxyVisible:a,bodyWidth:ee,resizeState:o,doLayout:V,tableBodyStyles:D,tableLayout:ce,scrollbarViewStyle:p,tableInnerStyle:le,scrollbarStyle:ie}}function G9e(t){const e=Me(),n=()=>{const i=t.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},a=t.store.states.updateOrderFns;e.value=new MutationObserver(()=>{a.forEach(l=>l())}),e.value.observe(i,s)};dr(()=>{n()}),Ss(()=>{var r;(r=e.value)==null||r.disconnect()})}var Q9e={data:{type:Array,default:()=>[]},size:Nc,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function jhe(t){const e=t.tableLayout==="auto";let n=t.columns||[];e&&n.every(i=>i.width===void 0)&&(n=[]);const r=i=>{const s={key:`${t.tableLayout}_${i.id}`,style:{},name:void 0};return e?s.style={width:`${i.width}px`}:s.name=i.id,s};return Br("colgroup",{},n.map(i=>Br("col",r(i))))}jhe.props=["columns","tableLayout"];const j9e=()=>{const t=Me(),e=(s,a)=>{const l=t.value;l&&l.scrollTo(s,a)},n=(s,a)=>{const l=t.value;l&&Hr(a)&&["Top","Left"].includes(s)&&l[`setScroll${s}`](a)};return{scrollBarRef:t,scrollTo:e,setScrollTop:s=>n("Top",s),setScrollLeft:s=>n("Left",s)}};let K9e=1;const W9e=Ge({name:"ElTable",directives:{Mousewheel:F4e},components:{TableHeader:P9e,TableBody:D9e,TableFooter:$9e,ElScrollbar:d0,hColgroup:jhe},props:Q9e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:e}=Ts(),n=_n("table"),r=mi();Rr(fm,r);const i=y9e(r,t);r.store=i;const s=new b9e({store:r.store,table:r,fit:t.fit,showHeader:t.showHeader});r.layout=s;const a=oe(()=>(i.states.data.value||[]).length===0),{setCurrentRow:l,getSelectionRows:o,toggleRowSelection:d,clearSelection:p,clearFilter:A,toggleAllSelection:v,toggleRowExpansion:y,clearSort:C,sort:x}=V9e(i),{isHidden:M,renderExpanded:I,setDragVisible:P,isGroup:F,handleMouseLeave:D,handleHeaderFooterMousewheel:V,tableSize:H,emptyBlockStyle:Q,handleFixedMousewheel:G,resizeProxyVisible:W,bodyWidth:te,resizeState:q,doLayout:Y,tableBodyStyles:ee,tableLayout:ce,scrollbarViewStyle:se,tableInnerStyle:le,scrollbarStyle:ie}=H9e(t,s,i,r),{scrollBarRef:pe,scrollTo:ue,setScrollLeft:me,setScrollTop:Le}=j9e(),ae=Rd(Y,50),be=`${n.namespace.value}-table_${K9e++}`;r.tableId=be,r.state={isGroup:F,resizeState:q,doLayout:Y,debouncedUpdateLayout:ae};const _e=oe(()=>t.sumText||e("el.table.sumText")),$e=oe(()=>t.emptyText||e("el.table.emptyText"));return G9e(r),{ns:n,layout:s,store:i,handleHeaderFooterMousewheel:V,handleMouseLeave:D,tableId:be,tableSize:H,isHidden:M,isEmpty:a,renderExpanded:I,resizeProxyVisible:W,resizeState:q,isGroup:F,bodyWidth:te,tableBodyStyles:ee,emptyBlockStyle:Q,debouncedUpdateLayout:ae,handleFixedMousewheel:G,setCurrentRow:l,getSelectionRows:o,toggleRowSelection:d,clearSelection:p,clearFilter:A,toggleAllSelection:v,toggleRowExpansion:y,clearSort:C,doLayout:Y,sort:x,t:e,setDragVisible:P,context:r,computedSumText:_e,computedEmptyText:$e,tableLayout:ce,scrollbarViewStyle:se,tableInnerStyle:le,scrollbarStyle:ie,scrollBarRef:pe,scrollTo:ue,setScrollLeft:me,setScrollTop:Le}}}),q9e=["data-prefix"],Y9e={ref:"hiddenColumns",class:"hidden-columns"};function X9e(t,e,n,r,i,s){const a=ui("hColgroup"),l=ui("table-header"),o=ui("table-body"),d=ui("table-footer"),p=ui("el-scrollbar"),A=G5("mousewheel");return ve(),Ue("div",{ref:"tableWrapper",class:xe([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:vr(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:e[0]||(e[0]=(...v)=>t.handleMouseLeave&&t.handleMouseLeave(...v))},[rt("div",{class:xe(t.ns.e("inner-wrapper")),style:vr(t.tableInnerStyle)},[rt("div",Y9e,[kt(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?ci((ve(),Ue("div",{key:0,ref:"headerWrapper",class:xe(t.ns.e("header-wrapper"))},[rt("table",{ref:"tableHeader",class:xe(t.ns.e("header")),style:vr(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[pt(a,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),pt(l,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[A,t.handleHeaderFooterMousewheel]]):wt("v-if",!0),rt("div",{ref:"bodyWrapper",class:xe(t.ns.e("body-wrapper"))},[pt(p,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:It(()=>[rt("table",{ref:"tableBody",class:xe(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:vr({width:t.bodyWidth,tableLayout:t.tableLayout})},[pt(a,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(ve(),qt(l,{key:0,ref:"tableHeaderRef",class:xe(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):wt("v-if",!0),pt(o,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(ve(),qt(d,{key:1,class:xe(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):wt("v-if",!0)],6),t.isEmpty?(ve(),Ue("div",{key:0,ref:"emptyBlock",style:vr(t.emptyBlockStyle),class:xe(t.ns.e("empty-block"))},[rt("span",{class:xe(t.ns.e("empty-text"))},[kt(t.$slots,"empty",{},()=>[gs(Nn(t.computedEmptyText),1)])],2)],6)):wt("v-if",!0),t.$slots.append?(ve(),Ue("div",{key:1,ref:"appendWrapper",class:xe(t.ns.e("append-wrapper"))},[kt(t.$slots,"append")],2)):wt("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary&&t.tableLayout==="fixed"?ci((ve(),Ue("div",{key:1,ref:"footerWrapper",class:xe(t.ns.e("footer-wrapper"))},[rt("table",{class:xe(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:vr(t.tableBodyStyles)},[pt(a,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),pt(d,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Hs,!t.isEmpty],[A,t.handleHeaderFooterMousewheel]]):wt("v-if",!0),t.border||t.isGroup?(ve(),Ue("div",{key:2,class:xe(t.ns.e("border-left-patch"))},null,2)):wt("v-if",!0)],6),ci(rt("div",{ref:"resizeProxy",class:xe(t.ns.e("column-resize-proxy"))},null,2),[[Hs,t.resizeProxyVisible]])],46,q9e)}var Z9e=Fn(W9e,[["render",X9e],["__file","table.vue"]]);const J9e={selection:"table-column--selection",expand:"table__expand-column"},eKe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},tKe=t=>J9e[t]||"",nKe={selection:{renderHeader({store:t,column:e}){function n(){return t.states.data.value&&t.states.data.value.length===0}return Br(Ip,{disabled:n(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:t,column:e,store:n,$index:r}){return Br(Ip,{disabled:e.selectable?!e.selectable.call(null,t,r):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",t)},onClick:i=>i.stopPropagation(),modelValue:n.isSelected(t),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:e}){let n=e+1;const r=t.index;return typeof r=="number"?n=e+r:typeof r=="function"&&(n=r(e)),Br("div",{},[n])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:e,expanded:n}){const{ns:r}=e,i=[r.e("expand-icon")];return n&&i.push(r.em("expand-icon","expanded")),Br("div",{class:i,onClick:function(a){a.stopPropagation(),e.toggleRowExpansion(t)}},{default:()=>[Br(mr,null,{default:()=>[Br(Uh)]})]})},sortable:!1,resizable:!1}};function rKe({row:t,column:e,$index:n}){var r;const i=e.property,s=i&&JP(t,i).value;return e&&e.formatter?e.formatter(t,e,s,n):((r=s==null?void 0:s.toString)==null?void 0:r.call(s))||""}function iKe({row:t,treeNode:e,store:n},r=!1){const{ns:i}=n;if(!e)return r?[Br("span",{class:i.e("placeholder")})]:null;const s=[],a=function(l){l.stopPropagation(),!e.loading&&n.loadOrToggle(t)};if(e.indent&&s.push(Br("span",{class:i.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const l=[i.e("expand-icon"),e.expanded?i.em("expand-icon","expanded"):""];let o=Uh;e.loading&&(o=C_),s.push(Br("div",{class:l,onClick:a},{default:()=>[Br(mr,{class:{[i.is("loading")]:e.loading}},{default:()=>[Br(o)]})]}))}else s.push(Br("span",{class:i.e("placeholder")}));return s}function uJ(t,e){return t.reduce((n,r)=>(n[r]=r,n),e)}function sKe(t,e){const n=mi();return{registerComplexWatchers:()=>{const s=["fixed"],a={realWidth:"width",realMinWidth:"minWidth"},l=uJ(s,a);Object.keys(l).forEach(o=>{const d=a[o];vs(e,d)&&zt(()=>e[d],p=>{let A=p;d==="width"&&o==="realWidth"&&(A=TH(p)),d==="minWidth"&&o==="realMinWidth"&&(A=Uhe(p)),n.columnConfig.value[d]=A,n.columnConfig.value[o]=A;const v=d==="fixed";t.value.store.scheduleLayout(v)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],a={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},l=uJ(s,a);Object.keys(l).forEach(o=>{const d=a[o];vs(e,d)&&zt(()=>e[d],p=>{n.columnConfig.value[o]=p})})}}}function oKe(t,e,n){const r=mi(),i=Me(""),s=Me(!1),a=Me(),l=Me(),o=_n("table");bu(()=>{a.value=t.align?`is-${t.align}`:null,a.value}),bu(()=>{l.value=t.headerAlign?`is-${t.headerAlign}`:a.value,l.value});const d=oe(()=>{let D=r.vnode.vParent||r.parent;for(;D&&!D.tableId&&!D.columnId;)D=D.vnode.vParent||D.parent;return D}),p=oe(()=>{const{store:D}=r.parent;if(!D)return!1;const{treeData:V}=D.states,H=V.value;return H&&Object.keys(H).length>0}),A=Me(TH(t.width)),v=Me(Uhe(t.minWidth)),y=D=>(A.value&&(D.width=A.value),v.value&&(D.minWidth=v.value),!A.value&&v.value&&(D.width=void 0),D.minWidth||(D.minWidth=80),D.realWidth=Number(D.width===void 0?D.minWidth:D.width),D),C=D=>{const V=D.type,H=nKe[V]||{};Object.keys(H).forEach(G=>{const W=H[G];G!=="className"&&W!==void 0&&(D[G]=W)});const Q=tKe(V);if(Q){const G=`${T(o.namespace)}-${Q}`;D.className=D.className?`${D.className} ${G}`:G}return D},x=D=>{Array.isArray(D)?D.forEach(H=>V(H)):V(D);function V(H){var Q;((Q=H==null?void 0:H.type)==null?void 0:Q.name)==="ElTableColumn"&&(H.vParent=r)}};return{columnId:i,realAlign:a,isSubColumn:s,realHeaderAlign:l,columnOrTableParent:d,setColumnWidth:y,setColumnForcedProps:C,setColumnRenders:D=>{t.renderHeader||D.type!=="selection"&&(D.renderHeader=H=>(r.columnConfig.value.label,kt(e,"header",H,()=>[D.label])));let V=D.renderCell;return D.type==="expand"?(D.renderCell=H=>Br("div",{class:"cell"},[V(H)]),n.value.renderExpanded=H=>e.default?e.default(H):e.default):(V=V||rKe,D.renderCell=H=>{let Q=null;if(e.default){const ee=e.default(H);Q=ee.some(ce=>ce.type!==gh)?ee:V(H)}else Q=V(H);const{columns:G}=n.value.store.states,W=G.value.findIndex(ee=>ee.type==="default"),te=p.value&&H.cellIndex===W,q=iKe(H,te),Y={class:"cell",style:{}};return D.showOverflowTooltip&&(Y.class=`${Y.class} ${T(o.namespace)}-tooltip`,Y.style={width:`${(H.column.realWidth||Number(H.column.width))-1}px`}),x(Q),Br("div",Y,[q,Q])}),D},getPropsData:(...D)=>D.reduce((V,H)=>(Array.isArray(H)&&H.forEach(Q=>{V[Q]=t[Q]}),V),{}),getColumnElIndex:(D,V)=>Array.prototype.indexOf.call(D,V),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var aKe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(e=>["ascending","descending",null].includes(e))}};let lKe=1;var Khe=Ge({name:"ElTableColumn",components:{ElCheckbox:Ip},props:aKe,setup(t,{slots:e}){const n=mi(),r=Me({}),i=oe(()=>{let F=n.parent;for(;F&&!F.tableId;)F=F.parent;return F}),{registerNormalWatchers:s,registerComplexWatchers:a}=sKe(i,t),{columnId:l,isSubColumn:o,realHeaderAlign:d,columnOrTableParent:p,setColumnWidth:A,setColumnForcedProps:v,setColumnRenders:y,getPropsData:C,getColumnElIndex:x,realAlign:M,updateColumnOrder:I}=oKe(t,e,i),P=p.value;l.value=`${P.tableId||P.columnId}_column_${lKe++}`,K5(()=>{o.value=i.value!==P;const F=t.type||"default",D=t.sortable===""?!0:t.sortable,V=Cl(t.showOverflowTooltip)?P.props.showOverflowTooltip:t.showOverflowTooltip,H={...eKe[F],id:l.value,type:F,property:t.prop||t.property,align:M,headerAlign:d,showOverflowTooltip:V,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:D,index:t.index,rawColumnKey:n.vnode.key};let q=C(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);q=l9e(H,q),q=u9e(y,A,v)(q),r.value=q,s(),a()}),dr(()=>{var F;const D=p.value,V=o.value?D.vnode.el.children:(F=D.refs.hiddenColumns)==null?void 0:F.children,H=()=>x(V||[],n.vnode.el);r.value.getColumnIndex=H,H()>-1&&i.value.store.commit("insertColumn",r.value,o.value?D.columnConfig.value:null,I)}),Do(()=>{r.value.getColumnIndex()>-1&&i.value.store.commit("removeColumn",r.value,o.value?P.columnConfig.value:null,I)}),n.columnId=l.value,n.columnConfig=r},render(){var t,e,n;try{const r=(e=(t=this.$slots).default)==null?void 0:e.call(t,{row:{},column:{},$index:-1}),i=[];if(Array.isArray(r))for(const a of r)((n=a.type)==null?void 0:n.name)==="ElTableColumn"||a.shapeFlag&2?i.push(a):a.type===_r&&Array.isArray(a.children)&&a.children.forEach(l=>{(l==null?void 0:l.patchFlag)!==1024&&!Xr(l==null?void 0:l.children)&&i.push(l)});return Br("div",i)}catch{return Br("div",[])}}});const cKe=_i(Z9e,{TableColumn:Khe}),uKe=Pa(Khe);var ZI=(t=>(t.ASC="asc",t.DESC="desc",t))(ZI||{}),JI=(t=>(t.CENTER="center",t.RIGHT="right",t))(JI||{}),Whe=(t=>(t.LEFT="left",t.RIGHT="right",t))(Whe||{});const J3={asc:"desc",desc:"asc"},eB=Symbol("placeholder"),hKe=(t,e,n)=>{var r;const i={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:t.flexGrow||0,flexShrink:t.flexShrink||1}};n||(i.flexShrink=1);const s={...(r=t.style)!=null?r:{},...i,flexBasis:"auto",width:t.width};return e||(t.maxWidth&&(s.maxWidth=t.maxWidth),t.minWidth&&(s.minWidth=t.minWidth)),s};function dKe(t,e,n){const r=oe(()=>T(e).filter(x=>!x.hidden)),i=oe(()=>T(r).filter(x=>x.fixed==="left"||x.fixed===!0)),s=oe(()=>T(r).filter(x=>x.fixed==="right")),a=oe(()=>T(r).filter(x=>!x.fixed)),l=oe(()=>{const x=[];return T(i).forEach(M=>{x.push({...M,placeholderSign:eB})}),T(a).forEach(M=>{x.push(M)}),T(s).forEach(M=>{x.push({...M,placeholderSign:eB})}),x}),o=oe(()=>T(i).length||T(s).length),d=oe(()=>T(e).reduce((M,I)=>(M[I.key]=hKe(I,T(n),t.fixed),M),{})),p=oe(()=>T(r).reduce((x,M)=>x+M.width,0)),A=x=>T(e).find(M=>M.key===x),v=x=>T(d)[x],y=(x,M)=>{x.width=M};function C(x){var M;const{key:I}=x.currentTarget.dataset;if(!I)return;const{sortState:P,sortBy:F}=t;let D=ZI.ASC;xi(P)?D=J3[P[I]]:D=J3[F.order],(M=t.onColumnSort)==null||M.call(t,{column:A(I),key:I,order:D})}return{columns:e,columnsStyles:d,columnsTotalWidth:p,fixedColumnsOnLeft:i,fixedColumnsOnRight:s,hasFixedColumns:o,mainColumns:l,normalColumns:a,visibleColumns:r,getColumn:A,getColumnStyle:v,updateColumnWidth:y,onColumnSorted:C}}const fKe=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:i})=>{const s=Me({scrollLeft:0,scrollTop:0});function a(y){var C,x,M;const{scrollTop:I}=y;(C=e.value)==null||C.scrollTo(y),(x=n.value)==null||x.scrollToTop(I),(M=r.value)==null||M.scrollToTop(I)}function l(y){s.value=y,a(y)}function o(y){s.value.scrollTop=y,a(T(s))}function d(y){var C,x;s.value.scrollLeft=y,(x=(C=e.value)==null?void 0:C.scrollTo)==null||x.call(C,T(s))}function p(y){var C;l(y),(C=t.onScroll)==null||C.call(t,y)}function A({scrollTop:y}){const{scrollTop:C}=T(s);y!==C&&o(y)}function v(y,C="auto"){var x;(x=e.value)==null||x.scrollToRow(y,C)}return zt(()=>T(s).scrollTop,(y,C)=>{y>C&&i()}),{scrollPos:s,scrollTo:l,scrollToLeft:d,scrollToTop:o,scrollToRow:v,onScroll:p,onVerticalScroll:A}},pKe=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,tableInstance:i,ns:s,isScrolling:a})=>{const l=mi(),{emit:o}=l,d=Ds(!1),p=Me(t.defaultExpandedRowKeys||[]),A=Me(-1),v=Ds(null),y=Me({}),C=Me({}),x=Ds({}),M=Ds({}),I=Ds({}),P=oe(()=>Hr(t.estimatedRowHeight));function F(te){var q;(q=t.onRowsRendered)==null||q.call(t,te),te.rowCacheEnd>T(A)&&(A.value=te.rowCacheEnd)}function D({hovered:te,rowKey:q}){if(a.value)return;i.vnode.el.querySelectorAll(`[rowkey=${q}]`).forEach(ce=>{te?ce.classList.add(s.is("hovered")):ce.classList.remove(s.is("hovered"))})}function V({expanded:te,rowData:q,rowIndex:Y,rowKey:ee}){var ce,se;const le=[...T(p)],ie=le.indexOf(ee);te?ie===-1&&le.push(ee):ie>-1&&le.splice(ie,1),p.value=le,o("update:expandedRowKeys",le),(ce=t.onRowExpand)==null||ce.call(t,{expanded:te,rowData:q,rowIndex:Y,rowKey:ee}),(se=t.onExpandedRowsChange)==null||se.call(t,le)}const H=Rd(()=>{var te,q,Y,ee;d.value=!0,y.value={...T(y),...T(C)},Q(T(v),!1),C.value={},v.value=null,(te=e.value)==null||te.forceUpdate(),(q=n.value)==null||q.forceUpdate(),(Y=r.value)==null||Y.forceUpdate(),(ee=l.proxy)==null||ee.$forceUpdate(),d.value=!1},0);function Q(te,q=!1){T(P)&&[e,n,r].forEach(Y=>{const ee=T(Y);ee&&ee.resetAfterRowIndex(te,q)})}function G(te,q,Y){const ee=T(v);(ee===null||ee>Y)&&(v.value=Y),C.value[te]=q}function W({rowKey:te,height:q,rowIndex:Y},ee){ee?ee===Whe.RIGHT?I.value[te]=q:x.value[te]=q:M.value[te]=q;const ce=Math.max(...[x,I,M].map(se=>se.value[te]||0));T(y)[te]!==ce&&(G(te,ce,Y),H())}return{expandedRowKeys:p,lastRenderedRowIndex:A,isDynamic:P,isResetting:d,rowHeights:y,resetAfterIndex:Q,onRowExpanded:V,onRowHovered:D,onRowsRendered:F,onRowHeightChange:W}},AKe=(t,{expandedRowKeys:e,lastRenderedRowIndex:n,resetAfterIndex:r})=>{const i=Me({}),s=oe(()=>{const l={},{data:o,rowKey:d}=t,p=T(e);if(!p||!p.length)return o;const A=[],v=new Set;p.forEach(C=>v.add(C));let y=o.slice();for(y.forEach(C=>l[C[d]]=0);y.length>0;){const C=y.shift();A.push(C),v.has(C[d])&&Array.isArray(C.children)&&C.children.length>0&&(y=[...C.children,...y],C.children.forEach(x=>l[x[d]]=l[C[d]]+1))}return i.value=l,A}),a=oe(()=>{const{data:l,expandColumnKey:o}=t;return o?T(s):l});return zt(a,(l,o)=>{l!==o&&(n.value=-1,r(0,!0))}),{data:a,depthMap:i}},gKe=(t,e)=>t+e,pF=t=>Jn(t)?t.reduce(gKe,0):t,Tb=(t,e,n={})=>Gr(t)?t(e):t??n,Ly=t=>(["width","maxWidth","minWidth","height"].forEach(e=>{t[e]=Ja(t[e])}),t),qhe=t=>ya(t)?e=>Br(t,e):t,mKe=(t,{columnsTotalWidth:e,data:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:i})=>{const s=oe(()=>{const{fixed:F,width:D,vScrollbarSize:V}=t,H=D-V;return F?Math.max(Math.round(T(e)),H):H}),a=oe(()=>T(s)+t.vScrollbarSize),l=oe(()=>{const{height:F=0,maxHeight:D=0,footerHeight:V,hScrollbarSize:H}=t;if(D>0){const Q=T(C),G=T(o),te=T(y)+Q+G+H;return Math.min(te,D-V)}return F-V}),o=oe(()=>{const{rowHeight:F,estimatedRowHeight:D}=t,V=T(n);return Hr(D)?V.length*D:V.length*F}),d=oe(()=>{const{maxHeight:F}=t,D=T(l);if(Hr(F)&&F>0)return D;const V=T(o)+T(y)+T(C);return Math.min(D,V)}),p=F=>F.width,A=oe(()=>pF(T(r).map(p))),v=oe(()=>pF(T(i).map(p))),y=oe(()=>pF(t.headerHeight)),C=oe(()=>{var F;return(((F=t.fixedData)==null?void 0:F.length)||0)*t.rowHeight}),x=oe(()=>T(l)-T(y)-T(C)),M=oe(()=>{const{style:F={},height:D,width:V}=t;return Ly({...F,height:D,width:V})}),I=oe(()=>Ly({height:t.footerHeight})),P=oe(()=>({top:Ja(T(y)),bottom:Ja(t.footerHeight),width:Ja(t.width)}));return{bodyWidth:s,fixedTableHeight:d,mainTableHeight:l,leftTableWidth:A,rightTableWidth:v,headerWidth:a,rowsHeight:o,windowHeight:x,footerHeight:I,emptyStyle:P,rootStyle:M,headerHeight:y}},vKe=t=>{const e=Me(),n=Me(0),r=Me(0);let i;return dr(()=>{i=Ia(e,([s])=>{const{width:a,height:l}=s.contentRect,{paddingLeft:o,paddingRight:d,paddingTop:p,paddingBottom:A}=getComputedStyle(s.target),v=Number.parseInt(o)||0,y=Number.parseInt(d)||0,C=Number.parseInt(p)||0,x=Number.parseInt(A)||0;n.value=a-v-y,r.value=l-C-x}).stop}),Do(()=>{i==null||i()}),zt([n,r],([s,a])=>{var l;(l=t.onResize)==null||l.call(t,{width:s,height:a})}),{sizer:e,width:n,height:r}};function yKe(t){const e=Me(),n=Me(),r=Me(),{columns:i,columnsStyles:s,columnsTotalWidth:a,fixedColumnsOnLeft:l,fixedColumnsOnRight:o,hasFixedColumns:d,mainColumns:p,onColumnSorted:A}=dKe(t,Io(t,"columns"),Io(t,"fixed")),{scrollTo:v,scrollToLeft:y,scrollToTop:C,scrollToRow:x,onScroll:M,onVerticalScroll:I,scrollPos:P}=fKe(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:ke}),F=_n("table-v2"),D=mi(),V=Ds(!1),{expandedRowKeys:H,lastRenderedRowIndex:Q,isDynamic:G,isResetting:W,rowHeights:te,resetAfterIndex:q,onRowExpanded:Y,onRowHeightChange:ee,onRowHovered:ce,onRowsRendered:se}=pKe(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,tableInstance:D,ns:F,isScrolling:V}),{data:le,depthMap:ie}=AKe(t,{expandedRowKeys:H,lastRenderedRowIndex:Q,resetAfterIndex:q}),{bodyWidth:pe,fixedTableHeight:ue,mainTableHeight:me,leftTableWidth:Le,rightTableWidth:ae,headerWidth:be,rowsHeight:_e,windowHeight:$e,footerHeight:Re,emptyStyle:Ie,rootStyle:Ne,headerHeight:Je}=mKe(t,{columnsTotalWidth:a,data:le,fixedColumnsOnLeft:l,fixedColumnsOnRight:o}),je=Me(),ft=oe(()=>{const Ye=T(le).length===0;return Jn(t.fixedData)?t.fixedData.length===0&&Ye:Ye});function Et(Ye){const{estimatedRowHeight:at,rowHeight:He,rowKey:Tt}=t;return at?T(te)[T(le)[Ye][Tt]]||at:He}function ke(){const{onEndReached:Ye}=t;if(!Ye)return;const{scrollTop:at}=T(P),He=T(_e),Tt=T($e),Ut=He-(at+Tt)+t.hScrollbarSize;T(Q)>=0&&He===at+T(me)-T(Je)&&Ye(Ut)}return zt(()=>t.expandedRowKeys,Ye=>H.value=Ye,{deep:!0}),{columns:i,containerRef:je,mainTableRef:e,leftTableRef:n,rightTableRef:r,isDynamic:G,isResetting:W,isScrolling:V,hasFixedColumns:d,columnsStyles:s,columnsTotalWidth:a,data:le,expandedRowKeys:H,depthMap:ie,fixedColumnsOnLeft:l,fixedColumnsOnRight:o,mainColumns:p,bodyWidth:pe,emptyStyle:Ie,rootStyle:Ne,headerWidth:be,footerHeight:Re,mainTableHeight:me,fixedTableHeight:ue,leftTableWidth:Le,rightTableWidth:ae,showEmpty:ft,getRowHeight:Et,onColumnSorted:A,onRowHovered:ce,onRowExpanded:Y,onRowsRendered:se,onRowHeightChange:ee,scrollTo:v,scrollToLeft:y,scrollToTop:C,scrollToRow:x,onScroll:M,onVerticalScroll:I}}const MH=Symbol("tableV2"),Yhe=String,eM={type:Mt(Array),required:!0},LH={type:Mt(Array)},Xhe={...LH,required:!0},_Ke=String,hJ={type:Mt(Array),default:()=>Ba([])},R1={type:Number,required:!0},Zhe={type:Mt([String,Number,Symbol]),default:"id"},dJ={type:Mt(Object)},G1=Ln({class:String,columns:eM,columnsStyles:{type:Mt(Object),required:!0},depth:Number,expandColumnKey:_Ke,estimatedRowHeight:{...rb.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Mt(Function)},onRowHover:{type:Mt(Function)},onRowHeightChange:{type:Mt(Function)},rowData:{type:Mt(Object),required:!0},rowEventHandlers:{type:Mt(Object)},rowIndex:{type:Number,required:!0},rowKey:Zhe,style:{type:Mt(Object)}}),i4={type:Number,required:!0},RH=Ln({class:String,columns:eM,fixedHeaderData:{type:Mt(Array)},headerData:{type:Mt(Array),required:!0},headerHeight:{type:Mt([Number,Array]),default:50},rowWidth:i4,rowHeight:{type:Number,default:50},height:i4,width:i4}),AF=Ln({columns:eM,data:Xhe,fixedData:LH,estimatedRowHeight:G1.estimatedRowHeight,width:R1,height:R1,headerWidth:R1,headerHeight:RH.headerHeight,bodyWidth:R1,rowHeight:R1,cache:_he.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:rb.scrollbarAlwaysOn,scrollbarStartGap:rb.scrollbarStartGap,scrollbarEndGap:rb.scrollbarEndGap,class:Yhe,style:dJ,containerStyle:dJ,getRowHeight:{type:Mt(Function),required:!0},rowKey:G1.rowKey,onRowsRendered:{type:Mt(Function)},onScroll:{type:Mt(Function)}}),bKe=Ln({cache:AF.cache,estimatedRowHeight:G1.estimatedRowHeight,rowKey:Zhe,headerClass:{type:Mt([String,Function])},headerProps:{type:Mt([Object,Function])},headerCellProps:{type:Mt([Object,Function])},headerHeight:RH.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Mt([String,Function])},rowProps:{type:Mt([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Mt([Object,Function])},columns:eM,data:Xhe,dataGetter:{type:Mt(Function)},fixedData:LH,expandColumnKey:G1.expandColumnKey,expandedRowKeys:hJ,defaultExpandedRowKeys:hJ,class:Yhe,fixed:Boolean,style:{type:Mt(Object)},width:R1,height:R1,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:rb.hScrollbarSize,vScrollbarSize:rb.vScrollbarSize,scrollbarAlwaysOn:xhe.alwaysOn,sortBy:{type:Mt(Object),default:()=>({})},sortState:{type:Mt(Object),default:void 0},onColumnSort:{type:Mt(Function)},onExpandedRowsChange:{type:Mt(Function)},onEndReached:{type:Mt(Function)},onRowExpand:G1.onRowExpand,onScroll:AF.onScroll,onRowsRendered:AF.onRowsRendered,rowEventHandlers:G1.rowEventHandlers}),PH=(t,{slots:e})=>{var n;const{cellData:r,style:i}=t,s=((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||"",a=kt(e,"default",t,()=>[s]);return pt("div",{class:t.class,title:s,style:i},[a])};PH.displayName="ElTableV2Cell";PH.inheritAttrs=!1;const FH=(t,{slots:e})=>kt(e,"default",t,()=>{var n,r;return[pt("div",{class:t.class,title:(n=t.column)==null?void 0:n.title},[(r=t.column)==null?void 0:r.title])]});FH.displayName="ElTableV2HeaderCell";FH.inheritAttrs=!1;const wKe=Ln({class:String,columns:eM,columnsStyles:{type:Mt(Object),required:!0},headerIndex:Number,style:{type:Mt(Object)}}),xKe=Ge({name:"ElTableV2HeaderRow",props:wKe,setup(t,{slots:e}){return()=>{const{columns:n,columnsStyles:r,headerIndex:i,style:s}=t;let a=n.map((l,o)=>e.cell({columns:n,column:l,columnIndex:o,headerIndex:i,style:r[l.key]}));return e.header&&(a=e.header({cells:a.map(l=>Jn(l)&&l.length===1?l[0]:l),columns:n,headerIndex:i})),pt("div",{class:t.class,style:s,role:"row"},[a])}}}),CKe="ElTableV2Header",EKe=Ge({name:CKe,props:RH,setup(t,{slots:e,expose:n}){const r=_n("table-v2"),i=Me(),s=oe(()=>Ly({width:t.width,height:t.height})),a=oe(()=>Ly({width:t.rowWidth,height:t.height})),l=oe(()=>t_(T(t.headerHeight))),o=A=>{const v=T(i);Tr(()=>{v!=null&&v.scroll&&v.scroll({left:A})})},d=()=>{const A=r.e("fixed-header-row"),{columns:v,fixedHeaderData:y,rowHeight:C}=t;return y==null?void 0:y.map((x,M)=>{var I;const P=Ly({height:C,width:"100%"});return(I=e.fixed)==null?void 0:I.call(e,{class:A,columns:v,rowData:x,rowIndex:-(M+1),style:P})})},p=()=>{const A=r.e("dynamic-header-row"),{columns:v}=t;return T(l).map((y,C)=>{var x;const M=Ly({width:"100%",height:y});return(x=e.dynamic)==null?void 0:x.call(e,{class:A,columns:v,headerIndex:C,style:M})})};return n({scrollToLeft:o}),()=>{if(!(t.height<=0))return pt("div",{ref:i,class:t.class,style:T(s),role:"rowgroup"},[pt("div",{style:T(a),class:r.e("header")},[p(),d()])])}}}),SKe=t=>{const{isScrolling:e}=mn(MH),n=Me(!1),r=Me(),i=oe(()=>Hr(t.estimatedRowHeight)&&t.rowIndex>=0),s=(o=!1)=>{const d=T(r);if(!d)return;const{columns:p,onRowHeightChange:A,rowKey:v,rowIndex:y,style:C}=t,{height:x}=d.getBoundingClientRect();n.value=!0,Tr(()=>{if(o||x!==Number.parseInt(C.height)){const M=p[0],I=(M==null?void 0:M.placeholderSign)===eB;A==null||A({rowKey:v,height:x,rowIndex:y},M&&!I&&M.fixed)}})},a=oe(()=>{const{rowData:o,rowIndex:d,rowKey:p,onRowHover:A}=t,v=t.rowEventHandlers||{},y={};return Object.entries(v).forEach(([C,x])=>{Gr(x)&&(y[C]=M=>{x({event:M,rowData:o,rowIndex:d,rowKey:p})})}),A&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:C,hovered:x})=>{const M=y[C];y[C]=I=>{A({event:I,hovered:x,rowData:o,rowIndex:d,rowKey:p}),M==null||M(I)}}),y}),l=o=>{const{onRowExpand:d,rowData:p,rowIndex:A,rowKey:v}=t;d==null||d({expanded:o,rowData:p,rowIndex:A,rowKey:v})};return dr(()=>{T(i)&&s(!0)}),{isScrolling:e,measurable:i,measured:n,rowRef:r,eventHandlers:a,onExpand:l}},TKe="ElTableV2TableRow",IKe=Ge({name:TKe,props:G1,setup(t,{expose:e,slots:n,attrs:r}){const{eventHandlers:i,isScrolling:s,measurable:a,measured:l,rowRef:o,onExpand:d}=SKe(t);return e({onExpand:d}),()=>{const{columns:p,columnsStyles:A,expandColumnKey:v,depth:y,rowData:C,rowIndex:x,style:M}=t;let I=p.map((P,F)=>{const D=Jn(C.children)&&C.children.length>0&&P.key===v;return n.cell({column:P,columns:p,columnIndex:F,depth:y,style:A[P.key],rowData:C,rowIndex:x,isScrolling:T(s),expandIconProps:D?{rowData:C,rowIndex:x,onExpand:d}:void 0})});if(n.row&&(I=n.row({cells:I.map(P=>Jn(P)&&P.length===1?P[0]:P),style:M,columns:p,depth:y,rowData:C,rowIndex:x,isScrolling:T(s)})),T(a)){const{height:P,...F}=M||{},D=T(l);return pt("div",Gi({ref:o,class:t.class,style:D?M:F,role:"row"},r,T(i)),[I])}return pt("div",Gi(r,{ref:o,class:t.class,style:M,role:"row"},T(i)),[I])}}}),BKe=t=>{const{sortOrder:e}=t;return pt(mr,{size:14,class:t.class},{default:()=>[e===ZI.ASC?pt(WFe,null,null):pt(jFe,null,null)]})},MKe=t=>{const{expanded:e,expandable:n,onExpand:r,style:i,size:s}=t,a={onClick:n?()=>r(!e):void 0,class:t.class};return pt(mr,Gi(a,{size:s,style:i}),{default:()=>[pt(Uh,null,null)]})},LKe="ElTableV2Grid",RKe=t=>{const e=Me(),n=Me(),r=oe(()=>{const{data:x,rowHeight:M,estimatedRowHeight:I}=t;if(!I)return x.length*M}),i=oe(()=>{const{fixedData:x,rowHeight:M}=t;return((x==null?void 0:x.length)||0)*M}),s=oe(()=>pF(t.headerHeight)),a=oe(()=>{const{height:x}=t;return Math.max(0,x-T(s)-T(i))}),l=oe(()=>T(s)+T(i)>0),o=({data:x,rowIndex:M})=>x[M][t.rowKey];function d({rowCacheStart:x,rowCacheEnd:M,rowVisibleStart:I,rowVisibleEnd:P}){var F;(F=t.onRowsRendered)==null||F.call(t,{rowCacheStart:x,rowCacheEnd:M,rowVisibleStart:I,rowVisibleEnd:P})}function p(x,M){var I;(I=n.value)==null||I.resetAfterRowIndex(x,M)}function A(x,M){const I=T(e),P=T(n);xi(x)?(I==null||I.scrollToLeft(x.scrollLeft),P==null||P.scrollTo(x)):(I==null||I.scrollToLeft(x),P==null||P.scrollTo({scrollLeft:x,scrollTop:M}))}function v(x){var M;(M=T(n))==null||M.scrollTo({scrollTop:x})}function y(x,M){var I;(I=T(n))==null||I.scrollToItem(x,1,M)}function C(){var x,M;(x=T(n))==null||x.$forceUpdate(),(M=T(e))==null||M.$forceUpdate()}return{bodyRef:n,forceUpdate:C,fixedRowHeight:i,gridHeight:a,hasHeader:l,headerHeight:s,headerRef:e,totalHeight:r,itemKey:o,onItemRendered:d,resetAfterRowIndex:p,scrollTo:A,scrollToTop:v,scrollToRow:y}},OH=Ge({name:LKe,props:AF,setup(t,{slots:e,expose:n}){const{ns:r}=mn(MH),{bodyRef:i,fixedRowHeight:s,gridHeight:a,hasHeader:l,headerRef:o,headerHeight:d,totalHeight:p,forceUpdate:A,itemKey:v,onItemRendered:y,resetAfterRowIndex:C,scrollTo:x,scrollToTop:M,scrollToRow:I}=RKe(t);n({forceUpdate:A,totalHeight:p,scrollTo:x,scrollToTop:M,scrollToRow:I,resetAfterRowIndex:C});const P=()=>t.bodyWidth;return()=>{const{cache:F,columns:D,data:V,fixedData:H,useIsScrolling:Q,scrollbarAlwaysOn:G,scrollbarEndGap:W,scrollbarStartGap:te,style:q,rowHeight:Y,bodyWidth:ee,estimatedRowHeight:ce,headerWidth:se,height:le,width:ie,getRowHeight:pe,onScroll:ue}=t,me=Hr(ce),Le=me?mQe:fQe,ae=T(d);return pt("div",{role:"table",class:[r.e("table"),t.class],style:q},[pt(Le,{ref:i,data:V,useIsScrolling:Q,itemKey:v,columnCache:0,columnWidth:me?P:ee,totalColumn:1,totalRow:V.length,rowCache:F,rowHeight:me?pe:Y,width:ie,height:T(a),class:r.e("body"),role:"rowgroup",scrollbarStartGap:te,scrollbarEndGap:W,scrollbarAlwaysOn:G,onScroll:ue,onItemRendered:y,perfMode:!1},{default:be=>{var _e;const $e=V[be.rowIndex];return(_e=e.row)==null?void 0:_e.call(e,{...be,columns:D,rowData:$e})}}),T(l)&&pt(EKe,{ref:o,class:r.e("header-wrapper"),columns:D,headerData:V,headerHeight:t.headerHeight,fixedHeaderData:H,rowWidth:se,rowHeight:Y,width:ie,height:Math.min(ae+T(s),le)},{dynamic:e.header,fixed:e.row})])}}});function PKe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ya(t)}const FKe=(t,{slots:e})=>{const{mainTableRef:n,...r}=t;return pt(OH,Gi({ref:n},r),PKe(e)?e:{default:()=>[e]})};function OKe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ya(t)}const NKe=(t,{slots:e})=>{if(!t.columns.length)return;const{leftTableRef:n,...r}=t;return pt(OH,Gi({ref:n},r),OKe(e)?e:{default:()=>[e]})};function kKe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ya(t)}const DKe=(t,{slots:e})=>{if(!t.columns.length)return;const{rightTableRef:n,...r}=t;return pt(OH,Gi({ref:n},r),kKe(e)?e:{default:()=>[e]})};function UKe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ya(t)}const zKe=(t,{slots:e})=>{const{columns:n,columnsStyles:r,depthMap:i,expandColumnKey:s,expandedRowKeys:a,estimatedRowHeight:l,hasFixedColumns:o,rowData:d,rowIndex:p,style:A,isScrolling:v,rowProps:y,rowClass:C,rowKey:x,rowEventHandlers:M,ns:I,onRowHovered:P,onRowExpanded:F}=t,D=Tb(C,{columns:n,rowData:d,rowIndex:p},""),V=Tb(y,{columns:n,rowData:d,rowIndex:p}),H=d[x],Q=i[H]||0,G=!!s,W=p<0,te=[I.e("row"),D,{[I.e(`row-depth-${Q}`)]:G&&p>=0,[I.is("expanded")]:G&&a.includes(H),[I.is("fixed")]:!Q&&W,[I.is("customized")]:!!e.row}],q=o?P:void 0,Y={...V,columns:n,columnsStyles:r,class:te,depth:Q,expandColumnKey:s,estimatedRowHeight:W?void 0:l,isScrolling:v,rowIndex:p,rowData:d,rowKey:H,rowEventHandlers:M,style:A};return pt(IKe,Gi(Y,{onRowExpand:F,onMouseenter:se=>{q==null||q({hovered:!0,rowKey:H,event:se,rowData:d,rowIndex:p})},onMouseleave:se=>{q==null||q({hovered:!1,rowKey:H,event:se,rowData:d,rowIndex:p})},rowkey:H}),UKe(e)?e:{default:()=>[e]})},e8=({columns:t,column:e,columnIndex:n,depth:r,expandIconProps:i,isScrolling:s,rowData:a,rowIndex:l,style:o,expandedRowKeys:d,ns:p,cellProps:A,expandColumnKey:v,indentSize:y,iconSize:C,rowKey:x},{slots:M})=>{const I=Ly(o);if(e.placeholderSign===eB)return pt("div",{class:p.em("row-cell","placeholder"),style:I},null);const{cellRenderer:P,dataKey:F,dataGetter:D}=e,V=Gr(D)?D({columns:t,column:e,columnIndex:n,rowData:a,rowIndex:l}):ll(a,F??""),H=Tb(A,{cellData:V,columns:t,column:e,columnIndex:n,rowIndex:l,rowData:a}),Q={class:p.e("cell-text"),columns:t,column:e,columnIndex:n,cellData:V,isScrolling:s,rowData:a,rowIndex:l},G=qhe(P),W=G?G(Q):kt(M,"default",Q,()=>[pt(PH,Q,null)]),te=[p.e("row-cell"),e.class,e.align===JI.CENTER&&p.is("align-center"),e.align===JI.RIGHT&&p.is("align-right")],q=l>=0&&v&&e.key===v,Y=l>=0&&d.includes(a[x]);let ee;const ce=`margin-inline-start: ${r*y}px;`;return q&&(xi(i)?ee=pt(MKe,Gi(i,{class:[p.e("expand-icon"),p.is("expanded",Y)],size:C,expanded:Y,style:ce,expandable:!0}),null):ee=pt("div",{style:[ce,`width: ${C}px; height: ${C}px;`].join(" ")},null)),pt("div",Gi({class:te,style:I},H,{role:"cell"}),[ee,W])};e8.inheritAttrs=!1;function $Ke(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ya(t)}const VKe=({columns:t,columnsStyles:e,headerIndex:n,style:r,headerClass:i,headerProps:s,ns:a},{slots:l})=>{const o={columns:t,headerIndex:n},d=[a.e("header-row"),Tb(i,o,""),{[a.is("customized")]:!!l.header}],p={...Tb(s,o),columnsStyles:e,class:d,columns:t,headerIndex:n,style:r};return pt(xKe,p,$Ke(l)?l:{default:()=>[l]})},fJ=(t,{slots:e})=>{const{column:n,ns:r,style:i,onColumnSorted:s}=t,a=Ly(i);if(n.placeholderSign===eB)return pt("div",{class:r.em("header-row-cell","placeholder"),style:a},null);const{headerCellRenderer:l,headerClass:o,sortable:d}=n,p={...t,class:r.e("header-cell-text")},A=qhe(l),v=A?A(p):kt(e,"default",p,()=>[pt(FH,p,null)]),{sortBy:y,sortState:C,headerCellProps:x}=t;let M,I;if(C){const D=C[n.key];M=!!J3[D],I=M?D:ZI.ASC}else M=n.key===y.key,I=M?y.order:ZI.ASC;const P=[r.e("header-cell"),Tb(o,t,""),n.align===JI.CENTER&&r.is("align-center"),n.align===JI.RIGHT&&r.is("align-right"),d&&r.is("sortable")],F={...Tb(x,t),onClick:n.sortable?s:void 0,class:P,style:a,"data-key":n.key};return pt("div",Gi(F,{role:"columnheader"}),[v,d&&pt(BKe,{class:[r.e("sort-icon"),M&&r.is("sorting")],sortOrder:I},null)])},Jhe=(t,{slots:e})=>{var n;return pt("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};Jhe.displayName="ElTableV2Footer";const ede=(t,{slots:e})=>{const n=kt(e,"default",{},()=>[pt(ihe,null,null)]);return pt("div",{class:t.class,style:t.style},[n])};ede.displayName="ElTableV2Empty";const tde=(t,{slots:e})=>{var n;return pt("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};tde.displayName="ElTableV2Overlay";function zS(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ya(t)}const HKe="ElTableV2",GKe=Ge({name:HKe,props:bKe,setup(t,{slots:e,expose:n}){const r=_n("table-v2"),{columnsStyles:i,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,mainColumns:l,mainTableHeight:o,fixedTableHeight:d,leftTableWidth:p,rightTableWidth:A,data:v,depthMap:y,expandedRowKeys:C,hasFixedColumns:x,mainTableRef:M,leftTableRef:I,rightTableRef:P,isDynamic:F,isResetting:D,isScrolling:V,bodyWidth:H,emptyStyle:Q,rootStyle:G,headerWidth:W,footerHeight:te,showEmpty:q,scrollTo:Y,scrollToLeft:ee,scrollToTop:ce,scrollToRow:se,getRowHeight:le,onColumnSorted:ie,onRowHeightChange:pe,onRowHovered:ue,onRowExpanded:me,onRowsRendered:Le,onScroll:ae,onVerticalScroll:be}=yKe(t);return n({scrollTo:Y,scrollToLeft:ee,scrollToTop:ce,scrollToRow:se}),Rr(MH,{ns:r,isResetting:D,isScrolling:V}),()=>{const{cache:_e,cellProps:$e,estimatedRowHeight:Re,expandColumnKey:Ie,fixedData:Ne,headerHeight:Je,headerClass:je,headerProps:ft,headerCellProps:Et,sortBy:ke,sortState:Ye,rowHeight:at,rowClass:He,rowEventHandlers:Tt,rowKey:Ut,rowProps:Rt,scrollbarAlwaysOn:Bt,indentSize:Ht,iconSize:xt,useIsScrolling:Zt,vScrollbarSize:un,width:Ft}=t,mt=T(v),Be={cache:_e,class:r.e("main"),columns:T(l),data:mt,fixedData:Ne,estimatedRowHeight:Re,bodyWidth:T(H)+un,headerHeight:Je,headerWidth:T(W),height:T(o),mainTableRef:M,rowKey:Ut,rowHeight:at,scrollbarAlwaysOn:Bt,scrollbarStartGap:2,scrollbarEndGap:un,useIsScrolling:Zt,width:Ft,getRowHeight:le,onRowsRendered:Le,onScroll:ae},ze=T(p),it=T(d),bt={cache:_e,class:r.e("left"),columns:T(s),data:mt,estimatedRowHeight:Re,leftTableRef:I,rowHeight:at,bodyWidth:ze,headerWidth:ze,headerHeight:Je,height:it,rowKey:Ut,scrollbarAlwaysOn:Bt,scrollbarStartGap:2,scrollbarEndGap:un,useIsScrolling:Zt,width:ze,getRowHeight:le,onScroll:be},St=T(A)+un,yt={cache:_e,class:r.e("right"),columns:T(a),data:mt,estimatedRowHeight:Re,rightTableRef:P,rowHeight:at,bodyWidth:St,headerWidth:St,headerHeight:Je,height:it,rowKey:Ut,scrollbarAlwaysOn:Bt,scrollbarStartGap:2,scrollbarEndGap:un,width:St,style:`--${T(r.namespace)}-table-scrollbar-size: ${un}px`,useIsScrolling:Zt,getRowHeight:le,onScroll:be},Xe=T(i),_t={ns:r,depthMap:T(y),columnsStyles:Xe,expandColumnKey:Ie,expandedRowKeys:T(C),estimatedRowHeight:Re,hasFixedColumns:T(x),rowProps:Rt,rowClass:He,rowKey:Ut,rowEventHandlers:Tt,onRowHovered:ue,onRowExpanded:me,onRowHeightChange:pe},Gt={cellProps:$e,expandColumnKey:Ie,indentSize:Ht,iconSize:xt,rowKey:Ut,expandedRowKeys:T(C),ns:r},gt={ns:r,headerClass:je,headerProps:ft,columnsStyles:Xe},hn={ns:r,sortBy:ke,sortState:Ye,headerCellProps:Et,onColumnSorted:ie},rr={row:hr=>pt(zKe,Gi(hr,_t),{row:e.row,cell:Kn=>{let ur;return e.cell?pt(e8,Gi(Kn,Gt,{style:Xe[Kn.column.key]}),zS(ur=e.cell(Kn))?ur:{default:()=>[ur]}):pt(e8,Gi(Kn,Gt,{style:Xe[Kn.column.key]}),null)}}),header:hr=>pt(VKe,Gi(hr,gt),{header:e.header,cell:Kn=>{let ur;return e["header-cell"]?pt(fJ,Gi(Kn,hn,{style:Xe[Kn.column.key]}),zS(ur=e["header-cell"](Kn))?ur:{default:()=>[ur]}):pt(fJ,Gi(Kn,hn,{style:Xe[Kn.column.key]}),null)}})},br=[t.class,r.b(),r.e("root"),{[r.is("dynamic")]:T(F)}],Qr={class:r.e("footer"),style:T(te)};return pt("div",{class:br,style:T(G)},[pt(FKe,Be,zS(rr)?rr:{default:()=>[rr]}),pt(NKe,bt,zS(rr)?rr:{default:()=>[rr]}),pt(DKe,yt,zS(rr)?rr:{default:()=>[rr]}),e.footer&&pt(Jhe,Qr,{default:e.footer}),T(q)&&pt(ede,{class:r.e("empty"),style:T(Q)},{default:e.empty}),e.overlay&&pt(tde,{class:r.e("overlay")},{default:e.overlay})])}}}),QKe=Ln({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Mt(Function)}}),jKe=Ge({name:"ElAutoResizer",props:QKe,setup(t,{slots:e}){const n=_n("auto-resizer"),{height:r,width:i,sizer:s}=vKe(t),a={width:"100%",height:"100%"};return()=>{var l;return pt("div",{ref:s,class:n.b(),style:a},[(l=e.default)==null?void 0:l.call(e,{height:r.value,width:i.value})])}}}),KKe=_i(GKe),WKe=_i(jKe),C2=Symbol("tabsRootContextKey"),qKe=Ln({tabs:{type:Mt(Array),default:()=>Ba([])}}),nde="ElTabBar",YKe=Ge({name:nde}),XKe=Ge({...YKe,props:qKe,setup(t,{expose:e}){const n=t,r=mi(),i=mn(C2);i||pc(nde,"<el-tabs><el-tab-bar /></el-tabs>");const s=_n("tabs"),a=Me(),l=Me(),o=()=>{let p=0,A=0;const v=["top","bottom"].includes(i.props.tabPosition)?"width":"height",y=v==="width"?"x":"y",C=y==="x"?"left":"top";return n.tabs.every(x=>{var M,I;const P=(I=(M=r.parent)==null?void 0:M.refs)==null?void 0:I[`tab-${x.uid}`];if(!P)return!1;if(!x.active)return!0;p=P[`offset${$g(C)}`],A=P[`client${$g(v)}`];const F=window.getComputedStyle(P);return v==="width"&&(n.tabs.length>1&&(A-=Number.parseFloat(F.paddingLeft)+Number.parseFloat(F.paddingRight)),p+=Number.parseFloat(F.paddingLeft)),!1}),{[v]:`${A}px`,transform:`translate${$g(y)}(${p}px)`}},d=()=>l.value=o();return zt(()=>n.tabs,async()=>{await Tr(),d()},{immediate:!0}),Ia(a,()=>d()),e({ref:a,update:d}),(p,A)=>(ve(),Ue("div",{ref_key:"barRef",ref:a,class:xe([T(s).e("active-bar"),T(s).is(T(i).props.tabPosition)]),style:vr(l.value)},null,6))}});var ZKe=Fn(XKe,[["__file","tab-bar.vue"]]);const JKe=Ln({panes:{type:Mt(Array),default:()=>Ba([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),eWe={tabClick:(t,e,n)=>n instanceof Event,tabRemove:(t,e)=>e instanceof Event},pJ="ElTabNav",tWe=Ge({name:pJ,props:JKe,emits:eWe,setup(t,{expose:e,emit:n}){const r=mi(),i=mn(C2);i||pc(pJ,"<el-tabs><tab-nav /></el-tabs>");const s=_n("tabs"),a=rIe(),l=AIe(),o=Me(),d=Me(),p=Me(),A=Me(),v=Me(!1),y=Me(0),C=Me(!1),x=Me(!0),M=oe(()=>["top","bottom"].includes(i.props.tabPosition)?"width":"height"),I=oe(()=>({transform:`translate${M.value==="width"?"X":"Y"}(-${y.value}px)`})),P=()=>{if(!o.value)return;const W=o.value[`offset${$g(M.value)}`],te=y.value;if(!te)return;const q=te>W?te-W:0;y.value=q},F=()=>{if(!o.value||!d.value)return;const W=d.value[`offset${$g(M.value)}`],te=o.value[`offset${$g(M.value)}`],q=y.value;if(W-q<=te)return;const Y=W-q>te*2?q+te:W-te;y.value=Y},D=async()=>{const W=d.value;if(!v.value||!p.value||!o.value||!W)return;await Tr();const te=p.value.querySelector(".is-active");if(!te)return;const q=o.value,Y=["top","bottom"].includes(i.props.tabPosition),ee=te.getBoundingClientRect(),ce=q.getBoundingClientRect(),se=Y?W.offsetWidth-ce.width:W.offsetHeight-ce.height,le=y.value;let ie=le;Y?(ee.left<ce.left&&(ie=le-(ce.left-ee.left)),ee.right>ce.right&&(ie=le+ee.right-ce.right)):(ee.top<ce.top&&(ie=le-(ce.top-ee.top)),ee.bottom>ce.bottom&&(ie=le+(ee.bottom-ce.bottom))),ie=Math.max(ie,0),y.value=Math.min(ie,se)},V=()=>{var W;if(!d.value||!o.value)return;t.stretch&&((W=A.value)==null||W.update());const te=d.value[`offset${$g(M.value)}`],q=o.value[`offset${$g(M.value)}`],Y=y.value;q<te?(v.value=v.value||{},v.value.prev=Y,v.value.next=Y+q<te,te-Y<q&&(y.value=te-q)):(v.value=!1,Y>0&&(y.value=0))},H=W=>{const te=W.code,{up:q,down:Y,left:ee,right:ce}=Fr;if(![q,Y,ee,ce].includes(te))return;const se=Array.from(W.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),le=se.indexOf(W.target);let ie;te===ee||te===q?le===0?ie=se.length-1:ie=le-1:le<se.length-1?ie=le+1:ie=0,se[ie].focus({preventScroll:!0}),se[ie].click(),Q()},Q=()=>{x.value&&(C.value=!0)},G=()=>C.value=!1;return zt(a,W=>{W==="hidden"?x.value=!1:W==="visible"&&setTimeout(()=>x.value=!0,50)}),zt(l,W=>{W?setTimeout(()=>x.value=!0,50):x.value=!1}),Ia(p,V),dr(()=>setTimeout(()=>D(),0)),o0(()=>V()),e({scrollToActiveTab:D,removeFocus:G}),zt(()=>t.panes,()=>r.update(),{flush:"post",deep:!0}),()=>{const W=v.value?[pt("span",{class:[s.e("nav-prev"),s.is("disabled",!v.value.prev)],onClick:P},[pt(mr,null,{default:()=>[pt(r_,null,null)]})]),pt("span",{class:[s.e("nav-next"),s.is("disabled",!v.value.next)],onClick:F},[pt(mr,null,{default:()=>[pt(Uh,null,null)]})])]:null,te=t.panes.map((q,Y)=>{var ee,ce,se,le;const ie=q.uid,pe=q.props.disabled,ue=(ce=(ee=q.props.name)!=null?ee:q.index)!=null?ce:`${Y}`,me=!pe&&(q.isClosable||t.editable);q.index=`${Y}`;const Le=me?pt(mr,{class:"is-icon-close",onClick:_e=>n("tabRemove",q,_e)},{default:()=>[pt(NA,null,null)]}):null,ae=((le=(se=q.slots).label)==null?void 0:le.call(se))||q.props.label,be=!pe&&q.active?0:-1;return pt("div",{ref:`tab-${ie}`,class:[s.e("item"),s.is(i.props.tabPosition),s.is("active",q.active),s.is("disabled",pe),s.is("closable",me),s.is("focus",C.value)],id:`tab-${ue}`,key:`tab-${ie}`,"aria-controls":`pane-${ue}`,role:"tab","aria-selected":q.active,tabindex:be,onFocus:()=>Q(),onBlur:()=>G(),onClick:_e=>{G(),n("tabClick",q,ue,_e)},onKeydown:_e=>{me&&(_e.code===Fr.delete||_e.code===Fr.backspace)&&n("tabRemove",q,_e)}},[ae,Le])});return pt("div",{ref:p,class:[s.e("nav-wrap"),s.is("scrollable",!!v.value),s.is(i.props.tabPosition)]},[W,pt("div",{class:s.e("nav-scroll"),ref:o},[pt("div",{class:[s.e("nav"),s.is(i.props.tabPosition),s.is("stretch",t.stretch&&["top","bottom"].includes(i.props.tabPosition))],ref:d,style:I.value,role:"tablist",onKeydown:H},[t.type?null:pt(ZKe,{ref:A,tabs:[...t.panes]},null),te])])])}}}),nWe=Ln({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Mt(Function),default:()=>!0},stretch:Boolean}),s4=t=>Xr(t)||Hr(t),rWe={[Si]:t=>s4(t),tabClick:(t,e)=>e instanceof Event,tabChange:t=>s4(t),edit:(t,e)=>["remove","add"].includes(e),tabRemove:t=>s4(t),tabAdd:()=>!0},iWe=Ge({name:"ElTabs",props:nWe,emits:rWe,setup(t,{emit:e,slots:n,expose:r}){var i;const s=_n("tabs"),{children:a,addChild:l,removeChild:o}=nH(mi(),"ElTabPane"),d=Me(),p=Me((i=t.modelValue)!=null?i:"0"),A=async(x,M=!1)=>{var I,P,F;if(!(p.value===x||Cl(x)))try{await((I=t.beforeLeave)==null?void 0:I.call(t,x,p.value))!==!1&&(p.value=x,M&&(e(Si,x),e("tabChange",x)),(F=(P=d.value)==null?void 0:P.removeFocus)==null||F.call(P))}catch{}},v=(x,M,I)=>{x.props.disabled||(A(M,!0),e("tabClick",x,I))},y=(x,M)=>{x.props.disabled||Cl(x.props.name)||(M.stopPropagation(),e("edit",x.props.name,"remove"),e("tabRemove",x.props.name))},C=()=>{e("edit",void 0,"add"),e("tabAdd")};return zt(()=>t.modelValue,x=>A(x)),zt(p,async()=>{var x;await Tr(),(x=d.value)==null||x.scrollToActiveTab()}),Rr(C2,{props:t,currentName:p,registerPane:l,unregisterPane:o}),r({currentName:p}),()=>{const x=n["add-icon"],M=t.editable||t.addable?pt("span",{class:s.e("new-tab"),tabindex:"0",onClick:C,onKeydown:F=>{F.code===Fr.enter&&C()}},[x?kt(n,"add-icon"):pt(mr,{class:s.is("icon-plus")},{default:()=>[pt(Ple,null,null)]})]):null,I=pt("div",{class:[s.e("header"),s.is(t.tabPosition)]},[M,pt(tWe,{ref:d,currentName:p.value,editable:t.editable,type:t.type,panes:a.value,stretch:t.stretch,onTabClick:v,onTabRemove:y},null)]),P=pt("div",{class:s.e("content")},[kt(n,"default")]);return pt("div",{class:[s.b(),s.m(t.tabPosition),{[s.m("card")]:t.type==="card",[s.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[I,P]:[P,I]])}}}),sWe=Ln({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),oWe=["id","aria-hidden","aria-labelledby"],rde="ElTabPane",aWe=Ge({name:rde}),lWe=Ge({...aWe,props:sWe,setup(t){const e=t,n=mi(),r=Uc(),i=mn(C2);i||pc(rde,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=_n("tab-pane"),a=Me(),l=oe(()=>e.closable||i.props.closable),o=GY(()=>{var y;return i.currentName.value===((y=e.name)!=null?y:a.value)}),d=Me(o.value),p=oe(()=>{var y;return(y=e.name)!=null?y:a.value}),A=GY(()=>!e.lazy||d.value||o.value);zt(o,y=>{y&&(d.value=!0)});const v=Xs({uid:n.uid,slots:r,props:e,paneName:p,active:o,index:a,isClosable:l});return dr(()=>{i.registerPane(v)}),Ss(()=>{i.unregisterPane(v.uid)}),(y,C)=>T(A)?ci((ve(),Ue("div",{key:0,id:`pane-${T(p)}`,class:xe(T(s).b()),role:"tabpanel","aria-hidden":!T(o),"aria-labelledby":`tab-${T(p)}`},[kt(y.$slots,"default")],10,oWe)),[[Hs,T(o)]]):wt("v-if",!0)}});var ide=Fn(lWe,[["__file","tab-pane.vue"]]);const cWe=_i(iWe,{TabPane:ide}),uWe=Pa(ide),hWe=Ln({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:dm,default:""},truncated:{type:Boolean},lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),dWe=Ge({name:"ElText"}),fWe=Ge({...dWe,props:hWe,setup(t){const e=t,n=Gl(),r=_n("text"),i=oe(()=>[r.b(),r.m(e.type),r.m(n.value),r.is("truncated",e.truncated),r.is("line-clamp",!Cl(e.lineClamp))]);return(s,a)=>(ve(),qt(Mi(s.tag),{class:xe(T(i)),style:vr({"-webkit-line-clamp":s.lineClamp})},{default:It(()=>[kt(s.$slots,"default")]),_:3},8,["class","style"]))}});var pWe=Fn(fWe,[["__file","text.vue"]]);const AWe=_i(pWe),gWe=Ln({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:Nc,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Mt([String,Object]),default:()=>Rle},clearIcon:{type:Mt([String,Object]),default:()=>x_},...IE}),Sv=t=>{const e=(t||"").split(":");if(e.length>=2){let n=Number.parseInt(e[0],10);const r=Number.parseInt(e[1],10),i=t.toUpperCase();return i.includes("AM")&&n===12?n=0:i.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:r}}return null},o4=(t,e)=>{const n=Sv(t);if(!n)return-1;const r=Sv(e);if(!r)return-1;const i=n.minutes+n.hours*60,s=r.minutes+r.hours*60;return i===s?0:i>s?1:-1},AJ=t=>`${t}`.padStart(2,"0"),Cx=t=>`${AJ(t.hours)}:${AJ(t.minutes)}`,mWe=(t,e)=>{const n=Sv(t);if(!n)return"";const r=Sv(e);if(!r)return"";const i={hours:n.hours,minutes:n.minutes};return i.minutes+=r.minutes,i.hours+=r.hours,i.hours+=Math.floor(i.minutes/60),i.minutes=i.minutes%60,Cx(i)},vWe=Ge({name:"ElTimeSelect"}),yWe=Ge({...vWe,props:gWe,emits:["change","blur","focus","update:modelValue"],setup(t,{expose:e}){const n=t;wi.extend(cH);const{Option:r}=Sb,i=_n("input"),s=Me(),a=jh(),{lang:l}=Ts(),o=oe(()=>n.modelValue),d=oe(()=>{const I=Sv(n.start);return I?Cx(I):null}),p=oe(()=>{const I=Sv(n.end);return I?Cx(I):null}),A=oe(()=>{const I=Sv(n.step);return I?Cx(I):null}),v=oe(()=>{const I=Sv(n.minTime||"");return I?Cx(I):null}),y=oe(()=>{const I=Sv(n.maxTime||"");return I?Cx(I):null}),C=oe(()=>{const I=[];if(n.start&&n.end&&n.step){let P=d.value,F;for(;P&&p.value&&o4(P,p.value)<=0;)F=wi(P,"HH:mm").locale(l.value).format(n.format),I.push({value:F,disabled:o4(P,v.value||"-1:-1")<=0||o4(P,y.value||"100:100")>=0}),P=mWe(P,A.value)}return I});return e({blur:()=>{var I,P;(P=(I=s.value)==null?void 0:I.blur)==null||P.call(I)},focus:()=>{var I,P;(P=(I=s.value)==null?void 0:I.focus)==null||P.call(I)}}),(I,P)=>(ve(),qt(T(Sb),{ref_key:"select",ref:s,"model-value":T(o),disabled:T(a),clearable:I.clearable,"clear-icon":I.clearIcon,size:I.size,effect:I.effect,placeholder:I.placeholder,"default-first-option":"",filterable:I.editable,"empty-values":I.emptyValues,"value-on-clear":I.valueOnClear,"onUpdate:modelValue":P[0]||(P[0]=F=>I.$emit("update:modelValue",F)),onChange:P[1]||(P[1]=F=>I.$emit("change",F)),onBlur:P[2]||(P[2]=F=>I.$emit("blur",F)),onFocus:P[3]||(P[3]=F=>I.$emit("focus",F))},{prefix:It(()=>[I.prefixIcon?(ve(),qt(T(mr),{key:0,class:xe(T(i).e("prefix-icon"))},{default:It(()=>[(ve(),qt(Mi(I.prefixIcon)))]),_:1},8,["class"])):wt("v-if",!0)]),default:It(()=>[(ve(!0),Ue(_r,null,cs(T(C),F=>(ve(),qt(T(r),{key:F.value,label:F.value,value:F.value,disabled:F.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear"]))}});var gF=Fn(yWe,[["__file","time-select.vue"]]);gF.install=t=>{t.component(gF.name,gF)};const _We=gF,bWe=_We,wWe=Ge({name:"ElTimeline",setup(t,{slots:e}){const n=_n("timeline");return Rr("timeline",e),()=>Br("ul",{class:[n.b()]},[kt(e,"default")])}}),xWe=Ln({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:wo},hollow:{type:Boolean,default:!1}}),CWe=Ge({name:"ElTimelineItem"}),EWe=Ge({...CWe,props:xWe,setup(t){const e=t,n=_n("timeline-item"),r=oe(()=>[n.e("node"),n.em("node",e.size||""),n.em("node",e.type||""),n.is("hollow",e.hollow)]);return(i,s)=>(ve(),Ue("li",{class:xe([T(n).b(),{[T(n).e("center")]:i.center}])},[rt("div",{class:xe(T(n).e("tail"))},null,2),i.$slots.dot?wt("v-if",!0):(ve(),Ue("div",{key:0,class:xe(T(r)),style:vr({backgroundColor:i.color})},[i.icon?(ve(),qt(T(mr),{key:0,class:xe(T(n).e("icon"))},{default:It(()=>[(ve(),qt(Mi(i.icon)))]),_:1},8,["class"])):wt("v-if",!0)],6)),i.$slots.dot?(ve(),Ue("div",{key:1,class:xe(T(n).e("dot"))},[kt(i.$slots,"dot")],2)):wt("v-if",!0),rt("div",{class:xe(T(n).e("wrapper"))},[!i.hideTimestamp&&i.placement==="top"?(ve(),Ue("div",{key:0,class:xe([T(n).e("timestamp"),T(n).is("top")])},Nn(i.timestamp),3)):wt("v-if",!0),rt("div",{class:xe(T(n).e("content"))},[kt(i.$slots,"default")],2),!i.hideTimestamp&&i.placement==="bottom"?(ve(),Ue("div",{key:1,class:xe([T(n).e("timestamp"),T(n).is("bottom")])},Nn(i.timestamp),3)):wt("v-if",!0)],2)],2))}});var sde=Fn(EWe,[["__file","timeline-item.vue"]]);const SWe=_i(wWe,{TimelineItem:sde}),TWe=Pa(sde),ode=Ln({nowrap:Boolean});var ade=(t=>(t.top="top",t.bottom="bottom",t.left="left",t.right="right",t))(ade||{});const IWe=Object.values(ade),NH=Ln({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Mt(Object),default:null}}),BWe=Ln({side:{type:Mt(String),values:IWe,required:!0}}),MWe=["absolute","fixed"],LWe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],kH=Ln({arrowPadding:{type:Mt(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:Mt(String),values:LWe,default:"bottom"},reference:{type:Mt(Object),default:null},offset:{type:Number,default:8},strategy:{type:Mt(String),values:MWe,default:"absolute"},showArrow:{type:Boolean,default:!1},...Eu(["ariaLabel"])}),DH=Ln({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Mt(Function)},"onUpdate:open":{type:Mt(Function)}}),Yw={type:Mt(Function)},UH=Ln({onBlur:Yw,onClick:Yw,onFocus:Yw,onMouseDown:Yw,onMouseEnter:Yw,onMouseLeave:Yw}),RWe=Ln({...DH,...NH,...UH,...kH,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Mt(Object),default:null},teleported:Boolean,to:{type:Mt(String),default:"body"}}),E2=Symbol("tooltipV2"),lde=Symbol("tooltipV2Content"),a4="tooltip_v2.open",PWe=Ge({name:"ElTooltipV2Root"}),FWe=Ge({...PWe,props:DH,setup(t,{expose:e}){const n=t,r=Me(n.defaultOpen),i=Me(null),s=oe({get:()=>wb(n.open)?r.value:n.open,set:M=>{var I;r.value=M,(I=n["onUpdate:open"])==null||I.call(n,M)}}),a=oe(()=>Hr(n.delayDuration)&&n.delayDuration>0),{start:l,stop:o}=_b(()=>{s.value=!0},oe(()=>n.delayDuration),{immediate:!1}),d=_n("tooltip-v2"),p=Hu(),A=()=>{o(),s.value=!0},v=()=>{T(a)?l():A()},y=A,C=()=>{o(),s.value=!1};return zt(s,M=>{var I;M&&(document.dispatchEvent(new CustomEvent(a4)),y()),(I=n.onOpenChange)==null||I.call(n,M)}),dr(()=>{document.addEventListener(a4,C)}),Do(()=>{o(),document.removeEventListener(a4,C)}),Rr(E2,{contentId:p,triggerRef:i,ns:d,onClose:C,onDelayOpen:v,onOpen:y}),e({onOpen:y,onClose:C}),(M,I)=>kt(M.$slots,"default",{open:T(s)})}});var OWe=Fn(FWe,[["__file","root.vue"]]);const NWe=Ge({name:"ElTooltipV2Arrow"}),kWe=Ge({...NWe,props:{...NH,...BWe},setup(t){const e=t,{ns:n}=mn(E2),{arrowRef:r}=mn(lde),i=oe(()=>{const{style:s,width:a,height:l}=e,o=n.namespace.value;return{[`--${o}-tooltip-v2-arrow-width`]:`${a}px`,[`--${o}-tooltip-v2-arrow-height`]:`${l}px`,[`--${o}-tooltip-v2-arrow-border-width`]:`${a/2}px`,[`--${o}-tooltip-v2-arrow-cover-width`]:a/2-1,...s||{}}});return(s,a)=>(ve(),Ue("span",{ref_key:"arrowRef",ref:r,style:vr(T(i)),class:xe(T(n).e("arrow"))},null,6))}});var gJ=Fn(kWe,[["__file","arrow.vue"]]);const DWe=Ln({style:{type:Mt([String,Object,Array]),default:()=>({})}}),UWe=Ge({name:"ElVisuallyHidden"}),zWe=Ge({...UWe,props:DWe,setup(t){const e=t,n=oe(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,i)=>(ve(),Ue("span",Gi(r.$attrs,{style:T(n)}),[kt(r.$slots,"default")],16))}});var $We=Fn(zWe,[["__file","visual-hidden.vue"]]);const VWe=["data-side"],HWe=Ge({name:"ElTooltipV2Content"}),GWe=Ge({...HWe,props:{...kH,...ode},setup(t){const e=t,{triggerRef:n,contentId:r}=mn(E2),i=Me(e.placement),s=Me(e.strategy),a=Me(null),{referenceRef:l,contentRef:o,middlewareData:d,x:p,y:A,update:v}=m2e({placement:i,strategy:s,middleware:oe(()=>{const F=[pce(e.offset)];return e.showArrow&&F.push(v2e({arrowRef:a})),F})}),y=SE().nextZIndex(),C=_n("tooltip-v2"),x=oe(()=>i.value.split("-")[0]),M=oe(()=>({position:T(s),top:`${T(A)||0}px`,left:`${T(p)||0}px`,zIndex:y})),I=oe(()=>{if(!e.showArrow)return{};const{arrow:F}=T(d);return{[`--${C.namespace.value}-tooltip-v2-arrow-x`]:`${F==null?void 0:F.x}px`||"",[`--${C.namespace.value}-tooltip-v2-arrow-y`]:`${F==null?void 0:F.y}px`||""}}),P=oe(()=>[C.e("content"),C.is("dark",e.effect==="dark"),C.is(T(s)),e.contentClass]);return zt(a,()=>v()),zt(()=>e.placement,F=>i.value=F),dr(()=>{zt(()=>e.reference||n.value,F=>{l.value=F||void 0},{immediate:!0})}),Rr(lde,{arrowRef:a}),(F,D)=>(ve(),Ue("div",{ref_key:"contentRef",ref:o,style:vr(T(M)),"data-tooltip-v2-root":""},[F.nowrap?wt("v-if",!0):(ve(),Ue("div",{key:0,"data-side":T(x),class:xe(T(P))},[kt(F.$slots,"default",{contentStyle:T(M),contentClass:T(P)}),pt(T($We),{id:T(r),role:"tooltip"},{default:It(()=>[F.ariaLabel?(ve(),Ue(_r,{key:0},[gs(Nn(F.ariaLabel),1)],64)):kt(F.$slots,"default",{key:1})]),_:3},8,["id"]),kt(F.$slots,"arrow",{style:vr(T(I)),side:T(x)})],10,VWe))],4))}});var mJ=Fn(GWe,[["__file","content.vue"]]);const QWe=Ln({setRef:{type:Mt(Function),required:!0},onlyChild:Boolean});var jWe=Ge({props:QWe,setup(t,{slots:e}){const n=Me(),r=u2(n,i=>{i?t.setRef(i.nextElementSibling):t.setRef(null)});return()=>{var i;const[s]=((i=e.default)==null?void 0:i.call(e))||[],a=t.onlyChild?hOe(s.children):s.children;return pt(_r,{ref:r},[a])}}});const KWe=Ge({name:"ElTooltipV2Trigger"}),WWe=Ge({...KWe,props:{...ode,...UH},setup(t){const e=t,{onClose:n,onOpen:r,onDelayOpen:i,triggerRef:s,contentId:a}=mn(E2);let l=!1;const o=P=>{s.value=P},d=()=>{l=!1},p=Wa(e.onMouseEnter,i),A=Wa(e.onMouseLeave,n),v=Wa(e.onMouseDown,()=>{n(),l=!0,document.addEventListener("mouseup",d,{once:!0})}),y=Wa(e.onFocus,()=>{l||r()}),C=Wa(e.onBlur,n),x=Wa(e.onClick,P=>{P.detail===0&&n()}),M={blur:C,click:x,focus:y,mousedown:v,mouseenter:p,mouseleave:A},I=(P,F,D)=>{P&&Object.entries(F).forEach(([V,H])=>{P[D](V,H)})};return zt(s,(P,F)=>{I(P,M,"addEventListener"),I(F,M,"removeEventListener"),P&&P.setAttribute("aria-describedby",a.value)}),Do(()=>{I(s.value,M,"removeEventListener"),document.removeEventListener("mouseup",d)}),(P,F)=>P.nowrap?(ve(),qt(T(jWe),{key:0,"set-ref":o,"only-child":""},{default:It(()=>[kt(P.$slots,"default")]),_:3})):(ve(),Ue("button",Gi({key:1,ref_key:"triggerRef",ref:s},P.$attrs),[kt(P.$slots,"default")],16))}});var qWe=Fn(WWe,[["__file","trigger.vue"]]);const YWe=Ge({name:"ElTooltipV2"}),XWe=Ge({...YWe,props:RWe,setup(t){const n=dc(t),r=Xs(Gg(n,Object.keys(NH))),i=Xs(Gg(n,Object.keys(kH))),s=Xs(Gg(n,Object.keys(DH))),a=Xs(Gg(n,Object.keys(UH)));return(l,o)=>(ve(),qt(OWe,Tv(MC(s)),{default:It(({open:d})=>[pt(qWe,Gi(a,{nowrap:""}),{default:It(()=>[kt(l.$slots,"trigger")]),_:3},16),(ve(),qt(yE,{to:l.to,disabled:!l.teleported},[l.fullTransition?(ve(),qt(fc,Tv(Gi({key:0},l.transitionProps)),{default:It(()=>[l.alwaysOn||d?(ve(),qt(mJ,Tv(Gi({key:0},i)),{arrow:It(({style:p,side:A})=>[l.showArrow?(ve(),qt(gJ,Gi({key:0},r,{style:p,side:A}),null,16,["style","side"])):wt("v-if",!0)]),default:It(()=>[kt(l.$slots,"default")]),_:3},16)):wt("v-if",!0)]),_:2},1040)):(ve(),Ue(_r,{key:1},[l.alwaysOn||d?(ve(),qt(mJ,Tv(Gi({key:0},i)),{arrow:It(({style:p,side:A})=>[l.showArrow?(ve(),qt(gJ,Gi({key:0},r,{style:p,side:A}),null,16,["style","side"])):wt("v-if",!0)]),default:It(()=>[kt(l.$slots,"default")]),_:3},16)):wt("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var ZWe=Fn(XWe,[["__file","tooltip.vue"]]);const JWe=_i(ZWe),cde="left-check-change",ude="right-check-change",Ex=Ln({data:{type:Mt(Array),default:()=>[]},titles:{type:Mt(Array),default:()=>[]},buttonTexts:{type:Mt(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Mt(Function)},leftDefaultChecked:{type:Mt(Array),default:()=>[]},rightDefaultChecked:{type:Mt(Array),default:()=>[]},renderContent:{type:Mt(Function)},modelValue:{type:Mt(Array),default:()=>[]},format:{type:Mt(Object),default:()=>({})},filterable:Boolean,props:{type:Mt(Object),default:()=>Ba({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),t8=(t,e)=>[t,e].every(Jn)||Jn(t)&&eu(e),eqe={[Qo]:(t,e,n)=>[t,n].every(Jn)&&["left","right"].includes(e),[Si]:t=>Jn(t),[cde]:t8,[ude]:t8},n8="checked-change",tqe=Ln({data:Ex.data,optionRender:{type:Mt(Function)},placeholder:String,title:String,filterable:Boolean,format:Ex.format,filterMethod:Ex.filterMethod,defaultChecked:Ex.leftDefaultChecked,props:Ex.props}),nqe={[n8]:t8},tM=t=>{const e={label:"label",key:"key",disabled:"disabled"};return oe(()=>({...e,...t.props}))},rqe=(t,e,n)=>{const r=tM(t),i=oe(()=>t.data.filter(p=>Gr(t.filterMethod)?t.filterMethod(e.query,p):String(p[r.value.label]||p[r.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=oe(()=>i.value.filter(p=>!p[r.value.disabled])),a=oe(()=>{const p=e.checked.length,A=t.data.length,{noChecked:v,hasChecked:y}=t.format;return v&&y?p>0?y.replace(/\${checked}/g,p.toString()).replace(/\${total}/g,A.toString()):v.replace(/\${total}/g,A.toString()):`${p}/${A}`}),l=oe(()=>{const p=e.checked.length;return p>0&&p<s.value.length}),o=()=>{const p=s.value.map(A=>A[r.value.key]);e.allChecked=p.length>0&&p.every(A=>e.checked.includes(A))},d=p=>{e.checked=p?s.value.map(A=>A[r.value.key]):[]};return zt(()=>e.checked,(p,A)=>{if(o(),e.checkChangeByUser){const v=p.concat(A).filter(y=>!p.includes(y)||!A.includes(y));n(n8,p,v)}else n(n8,p),e.checkChangeByUser=!0}),zt(s,()=>{o()}),zt(()=>t.data,()=>{const p=[],A=i.value.map(v=>v[r.value.key]);e.checked.forEach(v=>{A.includes(v)&&p.push(v)}),e.checkChangeByUser=!1,e.checked=p}),zt(()=>t.defaultChecked,(p,A)=>{if(A&&p.length===A.length&&p.every(C=>A.includes(C)))return;const v=[],y=s.value.map(C=>C[r.value.key]);p.forEach(C=>{y.includes(C)&&v.push(C)}),e.checkChangeByUser=!1,e.checked=v},{immediate:!0}),{filteredData:i,checkableData:s,checkedSummary:a,isIndeterminate:l,updateAllChecked:o,handleAllCheckedChange:d}},iqe=(t,e)=>({onSourceCheckedChange:(i,s)=>{t.leftChecked=i,s&&e(cde,i,s)},onTargetCheckedChange:(i,s)=>{t.rightChecked=i,s&&e(ude,i,s)}}),sqe=t=>{const e=tM(t),n=oe(()=>t.data.reduce((s,a)=>(s[a[e.value.key]]=a)&&s,{})),r=oe(()=>t.data.filter(s=>!t.modelValue.includes(s[e.value.key]))),i=oe(()=>t.targetOrder==="original"?t.data.filter(s=>t.modelValue.includes(s[e.value.key])):t.modelValue.reduce((s,a)=>{const l=n.value[a];return l&&s.push(l),s},[]));return{sourceData:r,targetData:i}},oqe=(t,e,n)=>{const r=tM(t),i=(l,o,d)=>{n(Si,l),n(Qo,l,o,d)};return{addToLeft:()=>{const l=t.modelValue.slice();e.rightChecked.forEach(o=>{const d=l.indexOf(o);d>-1&&l.splice(d,1)}),i(l,"left",e.rightChecked)},addToRight:()=>{let l=t.modelValue.slice();const o=t.data.filter(d=>{const p=d[r.value.key];return e.leftChecked.includes(p)&&!t.modelValue.includes(p)}).map(d=>d[r.value.key]);l=t.targetOrder==="unshift"?o.concat(l):l.concat(o),t.targetOrder==="original"&&(l=t.data.filter(d=>l.includes(d[r.value.key])).map(d=>d[r.value.key])),i(l,"right",e.leftChecked)}}},aqe=Ge({name:"ElTransferPanel"}),lqe=Ge({...aqe,props:tqe,emits:nqe,setup(t,{expose:e,emit:n}){const r=t,i=Uc(),s=({option:F})=>F,{t:a}=Ts(),l=_n("transfer"),o=Xs({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),d=tM(r),{filteredData:p,checkedSummary:A,isIndeterminate:v,handleAllCheckedChange:y}=rqe(r,o,n),C=oe(()=>!up(o.query)&&up(p.value)),x=oe(()=>!up(i.default()[0].children)),{checked:M,allChecked:I,query:P}=dc(o);return e({query:P}),(F,D)=>(ve(),Ue("div",{class:xe(T(l).b("panel"))},[rt("p",{class:xe(T(l).be("panel","header"))},[pt(T(Ip),{modelValue:T(I),"onUpdate:modelValue":D[0]||(D[0]=V=>Go(I)?I.value=V:null),indeterminate:T(v),"validate-event":!1,onChange:T(y)},{default:It(()=>[gs(Nn(F.title)+" ",1),rt("span",null,Nn(T(A)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),rt("div",{class:xe([T(l).be("panel","body"),T(l).is("with-footer",T(x))])},[F.filterable?(ve(),qt(T(mh),{key:0,modelValue:T(P),"onUpdate:modelValue":D[1]||(D[1]=V=>Go(P)?P.value=V:null),class:xe(T(l).be("panel","filter")),size:"default",placeholder:F.placeholder,"prefix-icon":T(GFe),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):wt("v-if",!0),ci(pt(T(Aue),{modelValue:T(M),"onUpdate:modelValue":D[2]||(D[2]=V=>Go(M)?M.value=V:null),"validate-event":!1,class:xe([T(l).is("filterable",F.filterable),T(l).be("panel","list")])},{default:It(()=>[(ve(!0),Ue(_r,null,cs(T(p),V=>(ve(),qt(T(Ip),{key:V[T(d).key],class:xe(T(l).be("panel","item")),value:V[T(d).key],disabled:V[T(d).disabled],"validate-event":!1},{default:It(()=>{var H;return[pt(s,{option:(H=F.optionRender)==null?void 0:H.call(F,V)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Hs,!T(C)&&!T(up)(F.data)]]),ci(rt("p",{class:xe(T(l).be("panel","empty"))},Nn(T(C)?T(a)("el.transfer.noMatch"):T(a)("el.transfer.noData")),3),[[Hs,T(C)||T(up)(F.data)]])],2),T(x)?(ve(),Ue("p",{key:0,class:xe(T(l).be("panel","footer"))},[kt(F.$slots,"default")],2)):wt("v-if",!0)],2))}});var vJ=Fn(lqe,[["__file","transfer-panel.vue"]]);const cqe={key:0},uqe={key:0},hqe=Ge({name:"ElTransfer"}),dqe=Ge({...hqe,props:Ex,emits:eqe,setup(t,{expose:e,emit:n}){const r=t,i=Uc(),{t:s}=Ts(),a=_n("transfer"),{formItem:l}=bh(),o=Xs({leftChecked:[],rightChecked:[]}),d=tM(r),{sourceData:p,targetData:A}=sqe(r),{onSourceCheckedChange:v,onTargetCheckedChange:y}=iqe(o,n),{addToLeft:C,addToRight:x}=oqe(r,o,n),M=Me(),I=Me(),P=G=>{switch(G){case"left":M.value.query="";break;case"right":I.value.query="";break}},F=oe(()=>r.buttonTexts.length===2),D=oe(()=>r.titles[0]||s("el.transfer.titles.0")),V=oe(()=>r.titles[1]||s("el.transfer.titles.1")),H=oe(()=>r.filterPlaceholder||s("el.transfer.filterPlaceholder"));zt(()=>r.modelValue,()=>{var G;r.validateEvent&&((G=l==null?void 0:l.validate)==null||G.call(l,"change").catch(W=>void 0))});const Q=oe(()=>G=>r.renderContent?r.renderContent(Br,G):i.default?i.default({option:G}):Br("span",G[d.value.label]||G[d.value.key]));return e({clearQuery:P,leftPanel:M,rightPanel:I}),(G,W)=>(ve(),Ue("div",{class:xe(T(a).b())},[pt(vJ,{ref_key:"leftPanel",ref:M,data:T(p),"option-render":T(Q),placeholder:T(H),title:T(D),filterable:G.filterable,format:G.format,"filter-method":G.filterMethod,"default-checked":G.leftDefaultChecked,props:r.props,onCheckedChange:T(v)},{default:It(()=>[kt(G.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),rt("div",{class:xe(T(a).e("buttons"))},[pt(T(tu),{type:"primary",class:xe([T(a).e("button"),T(a).is("with-texts",T(F))]),disabled:T(up)(o.rightChecked),onClick:T(C)},{default:It(()=>[pt(T(mr),null,{default:It(()=>[pt(T(r_))]),_:1}),T(Cl)(G.buttonTexts[0])?wt("v-if",!0):(ve(),Ue("span",cqe,Nn(G.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),pt(T(tu),{type:"primary",class:xe([T(a).e("button"),T(a).is("with-texts",T(F))]),disabled:T(up)(o.leftChecked),onClick:T(x)},{default:It(()=>[T(Cl)(G.buttonTexts[1])?wt("v-if",!0):(ve(),Ue("span",uqe,Nn(G.buttonTexts[1]),1)),pt(T(mr),null,{default:It(()=>[pt(T(Uh))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),pt(vJ,{ref_key:"rightPanel",ref:I,data:T(A),"option-render":T(Q),placeholder:T(H),filterable:G.filterable,format:G.format,"filter-method":G.filterMethod,title:T(V),"default-checked":G.rightDefaultChecked,props:r.props,onCheckedChange:T(y)},{default:It(()=>[kt(G.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var fqe=Fn(dqe,[["__file","transfer.vue"]]);const pqe=_i(fqe),fC="$treeNodeId",yJ=function(t,e){!e||e[fC]||Object.defineProperty(e,fC,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},zH=function(t,e){return t?e[t]:e[fC]},r8=(t,e,n)=>{const r=t.value.currentNode;n();const i=t.value.currentNode;r!==i&&e("current-change",i?i.data:null,i)},i8=t=>{let e=!0,n=!0,r=!0;for(let i=0,s=t.length;i<s;i++){const a=t[i];(a.checked!==!0||a.indeterminate)&&(e=!1,a.disabled||(r=!1)),(a.checked!==!1||a.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:r,half:!e&&!n}},dT=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:r}=i8(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):r?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const i=t.parent;!i||i.level===0||t.store.checkStrictly||dT(i)},wR=function(t,e){const n=t.store.props,r=t.data||{},i=n[e];if(typeof i=="function")return i(r,t);if(typeof i=="string")return r[i];if(typeof i>"u"){const s=r[e];return s===void 0?"":s}};let Aqe=0,s8=class mF{constructor(e){this.id=Aqe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)vs(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const s=wR(this,"isLeaf");typeof s=="boolean"&&(this.isLeafByUser=s)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||yJ(this,this.data),!this.data)return;const r=e.defaultExpandedKeys,i=e.key;i&&r&&r.includes(this.key)&&this.expand(null,e.autoExpandParent),i&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||yJ(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=wR(this,"children")||[];for(let r=0,i=n.length;r<i;r++)this.insertChild({data:n[r]})}get label(){return wR(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return wR(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(r=>r===e||n&&r.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,r){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof mF)){if(!r){const i=this.getChildren(!0);i.includes(e.data)||(typeof n>"u"||n<0?i.push(e.data):i.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Xs(new mF(e)),e instanceof mF&&e.initialize()}e.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let r;n&&(r=this.childNodes.indexOf(n)),this.insertChild(e,r)}insertAfter(e,n){let r;n&&(r=this.childNodes.indexOf(n),r!==-1&&(r+=1)),this.insertChild(e,r)}removeChild(e){const n=this.getChildren()||[],r=n.indexOf(e.data);r>-1&&n.splice(r,1);const i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===e){n=this.childNodes[r];break}n&&this.removeChild(n)}expand(e,n){const r=()=>{if(n){let i=this.parent;for(;i.level>0;)i.expanded=!0,i=i.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(i=>{i.canFocus=!0})};this.shouldLoadData()?this.loadData(i=>{Array.isArray(i)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||dT(this),r())}):r()}doCreateChildren(e,n={}){e.forEach(r=>{this.insertChild(Object.assign({data:r},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,r,i){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:l}=i8(this.childNodes);!this.isLeaf&&!a&&l&&(this.checked=!1,e=!1);const o=()=>{if(n){const d=this.childNodes;for(let v=0,y=d.length;v<y;v++){const C=d[v];i=i||e!==!1;const x=C.disabled?C.checked:i;C.setChecked(x,n,!0,i)}const{half:p,all:A}=i8(d);A||(this.checked=A,this.indeterminate=p)}};if(this.shouldLoadData()){this.loadData(()=>{o(),dT(this)},{checked:e!==!1});return}else o()}const s=this.parent;!s||s.level===0||r||dT(s)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const r=this.store.props;let i="children";return r&&(i=r.children||"children"),n[i]===void 0&&(n[i]=null),e&&!n[i]&&(n[i]=[]),n[i]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(s=>s.data),r={},i=[];e.forEach((s,a)=>{const l=s[fC];!!l&&n.findIndex(d=>d[fC]===l)>=0?r[l]={index:a,data:s}:i.push({index:a,data:s})}),this.store.lazy||n.forEach(s=>{r[s[fC]]||this.removeChildByData(s)}),i.forEach(({index:s,data:a})=>{this.insertChild({data:a},s)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const r=s=>{this.childNodes=[],this.doCreateChildren(s,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)},i=()=>{this.loading=!1};this.store.load(this,r,i)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const r=n.shift();n.unshift(...r.childNodes),e(r)}}reInitChecked(){this.store.checkStrictly||dT(this)}};class gqe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)vs(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new s8({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,r=this.lazy,i=function(s){const a=s.root?s.root.childNodes:s.childNodes;if(a.forEach(l=>{l.visible=n.call(l,e,l.data,l),i(l)}),!s.visible&&a.length){let l=!0;l=!a.some(o=>o.visible),s.root?s.root.visible=l===!1:s.visible=l===!1}e&&s.visible&&!s.isLeaf&&(!r||s.loaded)&&s.expand()};i(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof s8)return e;const n=xi(e)?zH(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const r=this.getNode(n);r.parent.insertBefore({data:e},r)}insertAfter(e,n){const r=this.getNode(n);r.parent.insertAfter({data:e},r)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const r=wb(n)?this.root:this.getNode(n);r&&r.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(r=>{const i=n[r];i&&i.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const r=[],i=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(l=>{(l.checked||n&&l.indeterminate)&&(!e||e&&l.isLeaf)&&r.push(l.data),i(l)})};return i(this),r}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(s=>{s.indeterminate&&e.push(s.data),n(s)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const r in n)vs(n,r)&&e.push(n[r]);return e}updateChildren(e,n){const r=this.nodesMap[e];if(!r)return;const i=r.childNodes;for(let s=i.length-1;s>=0;s--){const a=i[s];this.remove(a.data)}for(let s=0,a=n.length;s<a;s++){const l=n[s];this.append(l,r.data)}}_setCheckedKeys(e,n=!1,r){const i=this._getAllNodes().sort((o,d)=>o.level-d.level),s=Object.create(null),a=Object.keys(r);i.forEach(o=>o.setChecked(!1,!1));const l=o=>{o.childNodes.forEach(d=>{var p;s[d.data[e]]=!0,(p=d.childNodes)!=null&&p.length&&l(d)})};for(let o=0,d=i.length;o<d;o++){const p=i[o],A=p.data[e].toString();if(!a.includes(A)){p.checked&&!s[A]&&p.setChecked(!1,!1);continue}if(p.childNodes.length&&l(p),p.isLeaf||this.checkStrictly){p.setChecked(!0,!1);continue}if(p.setChecked(!0,!0),n){p.setChecked(!1,!1);const y=function(C){C.childNodes.forEach(M=>{M.isLeaf||M.setChecked(!1,!1),y(M)})};y(p)}}}setCheckedNodes(e,n=!1){const r=this.key,i={};e.forEach(s=>{i[(s||{})[r]]=!0}),this._setCheckedKeys(r,n,i)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const r=this.key,i={};e.forEach(s=>{i[s]=!0}),this._setCheckedKeys(r,n,i)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const r=this.getNode(n);r&&r.expand(null,this.autoExpandParent)})}setChecked(e,n,r){const i=this.getNode(e);i&&i.setChecked(!!n,r)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const r=e[this.key],i=this.nodesMap[r];this.setCurrentNode(i),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const r=this.getNode(e);r&&(this.setCurrentNode(r),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const mqe=Ge({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=_n("tree"),n=mn("NodeInstance"),r=mn("RootTree");return()=>{const i=t.node,{data:s,store:a}=i;return t.renderContent?t.renderContent(Br,{_self:n,node:i,data:s,store:a}):kt(r.ctx.slots,"default",{node:i,data:s},()=>[Br("span",{class:e.be("node","label")},[i.label])])}}});var vqe=Fn(mqe,[["__file","tree-node-content.vue"]]);function hde(t){const e=mn("TreeNodeMap",null),n={treeNodeExpand:r=>{t.node!==r&&t.node.collapse()},children:[]};return e&&e.children.push(n),Rr("TreeNodeMap",n),{broadcastExpanded:r=>{if(t.accordion)for(const i of n.children)i.treeNodeExpand(r)}}}const dde=Symbol("dragEvents");function yqe({props:t,ctx:e,el$:n,dropIndicator$:r,store:i}){const s=_n("tree"),a=Me({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Rr(dde,{treeNodeDragStart:({event:p,treeNode:A})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(A.node))return p.preventDefault(),!1;p.dataTransfer.effectAllowed="move";try{p.dataTransfer.setData("text/plain","")}catch{}a.value.draggingNode=A,e.emit("node-drag-start",A.node,p)},treeNodeDragOver:({event:p,treeNode:A})=>{const v=A,y=a.value.dropNode;y&&y.node.id!==v.node.id&&yh(y.$el,s.is("drop-inner"));const C=a.value.draggingNode;if(!C||!v)return;let x=!0,M=!0,I=!0,P=!0;typeof t.allowDrop=="function"&&(x=t.allowDrop(C.node,v.node,"prev"),P=M=t.allowDrop(C.node,v.node,"inner"),I=t.allowDrop(C.node,v.node,"next")),p.dataTransfer.dropEffect=M||x||I?"move":"none",(x||M||I)&&(y==null?void 0:y.node.id)!==v.node.id&&(y&&e.emit("node-drag-leave",C.node,y.node,p),e.emit("node-drag-enter",C.node,v.node,p)),x||M||I?a.value.dropNode=v:a.value.dropNode=null,v.node.nextSibling===C.node&&(I=!1),v.node.previousSibling===C.node&&(x=!1),v.node.contains(C.node,!1)&&(M=!1),(C.node===v.node||C.node.contains(v.node))&&(x=!1,M=!1,I=!1);const F=v.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),D=n.value.getBoundingClientRect();let V;const H=x?M?.25:I?.45:1:-1,Q=I?M?.75:x?.55:0:1;let G=-9999;const W=p.clientY-F.top;W<F.height*H?V="before":W>F.height*Q?V="after":M?V="inner":V="none";const te=v.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),q=r.value;V==="before"?G=te.top-D.top:V==="after"&&(G=te.bottom-D.top),q.style.top=`${G}px`,q.style.left=`${te.right-D.left}px`,V==="inner"?pp(v.$el,s.is("drop-inner")):yh(v.$el,s.is("drop-inner")),a.value.showDropIndicator=V==="before"||V==="after",a.value.allowDrop=a.value.showDropIndicator||P,a.value.dropType=V,e.emit("node-drag-over",C.node,v.node,p)},treeNodeDragEnd:p=>{const{draggingNode:A,dropType:v,dropNode:y}=a.value;if(p.preventDefault(),p.dataTransfer.dropEffect="move",A&&y){const C={data:A.node.data};v!=="none"&&A.node.remove(),v==="before"?y.node.parent.insertBefore(C,y.node):v==="after"?y.node.parent.insertAfter(C,y.node):v==="inner"&&y.node.insertChild(C),v!=="none"&&(i.value.registerNode(C),i.value.key&&A.node.eachNode(x=>{var M;(M=i.value.nodesMap[x.data[i.value.key]])==null||M.setChecked(x.checked,!i.value.checkStrictly)})),yh(y.$el,s.is("drop-inner")),e.emit("node-drag-end",A.node,y.node,v,p),v!=="none"&&e.emit("node-drop",A.node,y.node,v,p)}A&&!y&&e.emit("node-drag-end",A.node,null,v,p),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}const _qe=Ge({name:"ElTreeNode",components:{ElCollapseTransition:_2,ElCheckbox:Ip,NodeContent:vqe,ElIcon:mr,Loading:C_},props:{node:{type:s8,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=_n("tree"),{broadcastExpanded:r}=hde(t),i=mn("RootTree"),s=Me(!1),a=Me(!1),l=Me(null),o=Me(null),d=Me(null),p=mn(dde),A=mi();Rr("NodeInstance",A),t.node.expanded&&(s.value=!0,a.value=!0);const v=i.props.props.children||"children";zt(()=>{const W=t.node.data[v];return W&&[...W]},()=>{t.node.updateChildren()}),zt(()=>t.node.indeterminate,W=>{x(t.node.checked,W)}),zt(()=>t.node.checked,W=>{x(W,t.node.indeterminate)}),zt(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),zt(()=>t.node.expanded,W=>{Tr(()=>s.value=W),W&&(a.value=!0)});const y=W=>zH(i.props.nodeKey,W.data),C=W=>{const te=t.props.class;if(!te)return{};let q;if(Gr(te)){const{data:Y}=W;q=te(Y,W)}else q=te;return Xr(q)?{[q]:!0}:q},x=(W,te)=>{(l.value!==W||o.value!==te)&&i.ctx.emit("check-change",t.node.data,W,te),l.value=W,o.value=te},M=W=>{r8(i.store,i.ctx.emit,()=>i.store.value.setCurrentNode(t.node)),i.currentNode.value=t.node,i.props.expandOnClickNode&&P(),i.props.checkOnClickNode&&!t.node.disabled&&F(null,{target:{checked:!t.node.checked}}),i.ctx.emit("node-click",t.node.data,t.node,A,W)},I=W=>{i.instance.vnode.props.onNodeContextmenu&&(W.stopPropagation(),W.preventDefault()),i.ctx.emit("node-contextmenu",W,t.node.data,t.node,A)},P=()=>{t.node.isLeaf||(s.value?(i.ctx.emit("node-collapse",t.node.data,t.node,A),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,A)))},F=(W,te)=>{t.node.setChecked(te.target.checked,!i.props.checkStrictly),Tr(()=>{const q=i.store.value;i.ctx.emit("check",t.node.data,{checkedNodes:q.getCheckedNodes(),checkedKeys:q.getCheckedKeys(),halfCheckedNodes:q.getHalfCheckedNodes(),halfCheckedKeys:q.getHalfCheckedKeys()})})};return{ns:n,node$:d,tree:i,expanded:s,childNodeRendered:a,oldChecked:l,oldIndeterminate:o,getNodeKey:y,getNodeClass:C,handleSelectChange:x,handleClick:M,handleContextMenu:I,handleExpandIconClick:P,handleCheckChange:F,handleChildNodeExpand:(W,te,q)=>{r(te),i.ctx.emit("node-expand",W,te,q)},handleDragStart:W=>{i.props.draggable&&p.treeNodeDragStart({event:W,treeNode:t})},handleDragOver:W=>{W.preventDefault(),i.props.draggable&&p.treeNodeDragOver({event:W,treeNode:{$el:d.value,node:t.node}})},handleDrop:W=>{W.preventDefault()},handleDragEnd:W=>{i.props.draggable&&p.treeNodeDragEnd(W)},CaretRight:Lle}}}),bqe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],wqe=["aria-expanded"];function xqe(t,e,n,r,i,s){const a=ui("el-icon"),l=ui("el-checkbox"),o=ui("loading"),d=ui("node-content"),p=ui("el-tree-node"),A=ui("el-collapse-transition");return ci((ve(),Ue("div",{ref:"node$",class:xe([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=qr((...v)=>t.handleClick&&t.handleClick(...v),["stop"])),onContextmenu:e[2]||(e[2]=(...v)=>t.handleContextMenu&&t.handleContextMenu(...v)),onDragstart:e[3]||(e[3]=qr((...v)=>t.handleDragStart&&t.handleDragStart(...v),["stop"])),onDragover:e[4]||(e[4]=qr((...v)=>t.handleDragOver&&t.handleDragOver(...v),["stop"])),onDragend:e[5]||(e[5]=qr((...v)=>t.handleDragEnd&&t.handleDragEnd(...v),["stop"])),onDrop:e[6]||(e[6]=qr((...v)=>t.handleDrop&&t.handleDrop(...v),["stop"]))},[rt("div",{class:xe(t.ns.be("node","content")),style:vr({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(ve(),qt(a,{key:0,class:xe([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:qr(t.handleExpandIconClick,["stop"])},{default:It(()=>[(ve(),qt(Mi(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):wt("v-if",!0),t.showCheckbox?(ve(),qt(l,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=qr(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):wt("v-if",!0),t.node.loading?(ve(),qt(a,{key:2,class:xe([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:It(()=>[pt(o)]),_:1},8,["class"])):wt("v-if",!0),pt(d,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),pt(A,null,{default:It(()=>[!t.renderAfterExpand||t.childNodeRendered?ci((ve(),Ue("div",{key:0,class:xe(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(ve(!0),Ue(_r,null,cs(t.node.childNodes,v=>(ve(),qt(p,{key:t.getNodeKey(v),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:v,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,wqe)),[[Hs,t.expanded]]):wt("v-if",!0)]),_:1})],42,bqe)),[[Hs,t.node.visible]])}var Cqe=Fn(_qe,[["render",xqe],["__file","tree-node.vue"]]);function Eqe({el$:t},e){const n=_n("tree"),r=Ds([]),i=Ds([]);dr(()=>{a()}),o0(()=>{r.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),i.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),zt(i,l=>{l.forEach(o=>{o.setAttribute("tabindex","-1")})}),Vo(t,"keydown",l=>{const o=l.target;if(!o.className.includes(n.b("node")))return;const d=l.code;r.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const p=r.value.indexOf(o);let A;if([Fr.up,Fr.down].includes(d)){if(l.preventDefault(),d===Fr.up){A=p===-1?0:p!==0?p-1:r.value.length-1;const y=A;for(;!e.value.getNode(r.value[A].dataset.key).canFocus;){if(A--,A===y){A=-1;break}A<0&&(A=r.value.length-1)}}else{A=p===-1?0:p<r.value.length-1?p+1:0;const y=A;for(;!e.value.getNode(r.value[A].dataset.key).canFocus;){if(A++,A===y){A=-1;break}A>=r.value.length&&(A=0)}}A!==-1&&r.value[A].focus()}[Fr.left,Fr.right].includes(d)&&(l.preventDefault(),o.click());const v=o.querySelector('[type="checkbox"]');[Fr.enter,Fr.space].includes(d)&&v&&(l.preventDefault(),v.click())});const a=()=>{var l;r.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),i.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const o=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(o.length){o[0].setAttribute("tabindex","0");return}(l=r.value[0])==null||l.setAttribute("tabindex","0")}}const Sqe=Ge({name:"ElTree",components:{ElTreeNode:Cqe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:wo}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Ts(),r=_n("tree"),i=Me(new gqe({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));i.value.initialize();const s=Me(i.value.root),a=Me(null),l=Me(null),o=Me(null),{broadcastExpanded:d}=hde(t),{dragState:p}=yqe({props:t,ctx:e,el$:l,dropIndicator$:o,store:i});Eqe({el$:l},i);const A=oe(()=>{const{childNodes:ie}=s.value;return!ie||ie.length===0||ie.every(({visible:pe})=>!pe)});zt(()=>t.currentNodeKey,ie=>{i.value.setCurrentNodeKey(ie)}),zt(()=>t.defaultCheckedKeys,ie=>{i.value.setDefaultCheckedKey(ie)}),zt(()=>t.defaultExpandedKeys,ie=>{i.value.setDefaultExpandedKeys(ie)}),zt(()=>t.data,ie=>{i.value.setData(ie)},{deep:!0}),zt(()=>t.checkStrictly,ie=>{i.value.checkStrictly=ie});const v=ie=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");i.value.filter(ie)},y=ie=>zH(t.nodeKey,ie.data),C=ie=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const pe=i.value.getNode(ie);if(!pe)return[];const ue=[pe.data];let me=pe.parent;for(;me&&me!==s.value;)ue.push(me.data),me=me.parent;return ue.reverse()},x=(ie,pe)=>i.value.getCheckedNodes(ie,pe),M=ie=>i.value.getCheckedKeys(ie),I=()=>{const ie=i.value.getCurrentNode();return ie?ie.data:null},P=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const ie=I();return ie?ie[t.nodeKey]:null},F=(ie,pe)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");i.value.setCheckedNodes(ie,pe)},D=(ie,pe)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");i.value.setCheckedKeys(ie,pe)},V=(ie,pe,ue)=>{i.value.setChecked(ie,pe,ue)},H=()=>i.value.getHalfCheckedNodes(),Q=()=>i.value.getHalfCheckedKeys(),G=(ie,pe=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");r8(i,e.emit,()=>i.value.setUserCurrentNode(ie,pe))},W=(ie,pe=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");r8(i,e.emit,()=>i.value.setCurrentNodeKey(ie,pe))},te=ie=>i.value.getNode(ie),q=ie=>{i.value.remove(ie)},Y=(ie,pe)=>{i.value.append(ie,pe)},ee=(ie,pe)=>{i.value.insertBefore(ie,pe)},ce=(ie,pe)=>{i.value.insertAfter(ie,pe)},se=(ie,pe,ue)=>{d(pe),e.emit("node-expand",ie,pe,ue)},le=(ie,pe)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");i.value.updateChildren(ie,pe)};return Rr("RootTree",{ctx:e,props:t,store:i,root:s,currentNode:a,instance:mi()}),Rr(om,void 0),{ns:r,store:i,root:s,currentNode:a,dragState:p,el$:l,dropIndicator$:o,isEmpty:A,filter:v,getNodeKey:y,getNodePath:C,getCheckedNodes:x,getCheckedKeys:M,getCurrentNode:I,getCurrentKey:P,setCheckedNodes:F,setCheckedKeys:D,setChecked:V,getHalfCheckedNodes:H,getHalfCheckedKeys:Q,setCurrentNode:G,setCurrentKey:W,t:n,getNode:te,remove:q,append:Y,insertBefore:ee,insertAfter:ce,handleNodeExpand:se,updateKeyChildren:le}}});function Tqe(t,e,n,r,i,s){const a=ui("el-tree-node");return ve(),Ue("div",{ref:"el$",class:xe([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(ve(!0),Ue(_r,null,cs(t.root.childNodes,l=>(ve(),qt(a,{key:t.getNodeKey(l),node:l,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(ve(),Ue("div",{key:0,class:xe(t.ns.e("empty-block"))},[kt(t.$slots,"empty",{},()=>{var l;return[rt("span",{class:xe(t.ns.e("empty-text"))},Nn((l=t.emptyText)!=null?l:t.t("el.tree.emptyText")),3)]})],2)):wt("v-if",!0),ci(rt("div",{ref:"dropIndicator$",class:xe(t.ns.e("drop-indicator"))},null,2),[[Hs,t.dragState.showDropIndicator]])],2)}var vF=Fn(Sqe,[["render",Tqe],["__file","tree.vue"]]);vF.install=t=>{t.component(vF.name,vF)};const CO=vF,Iqe=CO,Bqe=(t,{attrs:e,emit:n},{select:r,tree:i,key:s})=>{const a=_n("tree-select");return zt(()=>t.data,()=>{t.filterable&&Tr(()=>{var o,d;(d=i.value)==null||d.filter((o=r.value)==null?void 0:o.states.inputValue)})},{flush:"post"}),{...Gg(dc(t),Object.keys(Sb.props)),...e,"onUpdate:modelValue":o=>n(Si,o),valueKey:s,popperClass:oe(()=>{const o=[a.e("popper")];return t.popperClass&&o.push(t.popperClass),o.join(" ")}),filterMethod:(o="")=>{var d;t.filterMethod?t.filterMethod(o):t.remoteMethod?t.remoteMethod(o):(d=i.value)==null||d.filter(o)}}},Mqe=Ge({extends:gO,setup(t,e){const n=gO.setup(t,e);delete n.selectOptionClick;const r=mi().proxy;return Tr(()=>{n.select.states.cachedOptions.get(r.value)||n.select.onOptionCreate(r)}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function o8(t){return t||t===0}function $H(t){return Array.isArray(t)&&t.length}function $S(t){return Array.isArray(t)?t:o8(t)?[t]:[]}function yF(t,e,n,r,i){for(let s=0;s<t.length;s++){const a=t[s];if(e(a,s,t,i))return r?r(a,s,t,i):a;{const l=n(a);if($H(l)){const o=yF(l,e,n,r,a);if(o)return o}}}}function a8(t,e,n,r){for(let i=0;i<t.length;i++){const s=t[i];e(s,i,t,r);const a=n(s);$H(a)&&a8(a,e,n,s)}}const Lqe=(t,{attrs:e,slots:n,emit:r},{select:i,tree:s,key:a})=>{zt(()=>t.modelValue,()=>{t.showCheckbox&&Tr(()=>{const A=s.value;A&&!vh(A.getCheckedKeys(),$S(t.modelValue))&&A.setCheckedKeys($S(t.modelValue))})},{immediate:!0,deep:!0});const l=oe(()=>({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...t.props})),o=(A,v)=>{var y;const C=l.value[A];return Gr(C)?C(v,(y=s.value)==null?void 0:y.getNode(o("value",v))):v[C]},d=$S(t.modelValue).map(A=>yF(t.data||[],v=>o("value",v)===A,v=>o("children",v),(v,y,C,x)=>x&&o("value",x))).filter(A=>o8(A)),p=oe(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const A=[];return a8(t.data.concat(t.cacheData),v=>{const y=o("value",v);A.push({value:y,currentLabel:o("label",v),isDisabled:o("disabled",v)})},v=>o("children",v)),A});return{...Gg(dc(t),Object.keys(CO.props)),...e,nodeKey:a,expandOnClickNode:oe(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:oe(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(d):d),renderContent:(A,{node:v,data:y,store:C})=>A(Mqe,{value:o("value",y),label:o("label",y),disabled:o("disabled",y)},t.renderContent?()=>t.renderContent(A,{node:v,data:y,store:C}):n.default?()=>n.default({node:v,data:y,store:C}):void 0),filterNodeMethod:(A,v,y)=>t.filterNodeMethod?t.filterNodeMethod(A,v,y):A?new RegExp(SV(A),"i").test(o("label",v)||""):!0,onNodeClick:(A,v,y)=>{var C,x,M,I;if((C=e.onNodeClick)==null||C.call(e,A,v,y),!(t.showCheckbox&&t.checkOnClickNode)){if(!t.showCheckbox&&(t.checkStrictly||v.isLeaf)){if(!o("disabled",A)){const P=(x=i.value)==null?void 0:x.states.options.get(o("value",A));(M=i.value)==null||M.handleOptionSelect(P)}}else t.expandOnClickNode&&y.proxy.handleExpandIconClick();(I=i.value)==null||I.focus()}},onCheck:(A,v)=>{var y;if(!t.showCheckbox)return;const C=o("value",A),x={};a8([s.value.store.root],F=>x[F.key]=F,F=>F.childNodes);const M=v.checkedKeys,I=t.multiple?$S(t.modelValue).filter(F=>!(F in x)&&!M.includes(F)):[],P=I.concat(M);if(t.checkStrictly)r(Si,t.multiple?P:P.includes(C)?C:void 0);else if(t.multiple)r(Si,I.concat(s.value.getCheckedKeys(!0)));else{const F=yF([A],H=>!$H(o("children",H))&&!o("disabled",H),H=>o("children",H)),D=F?o("value",F):void 0,V=o8(t.modelValue)&&!!yF([A],H=>o("value",H)===t.modelValue,H=>o("children",H));r(Si,D===t.modelValue||V?void 0:D)}Tr(()=>{var F;const D=$S(t.modelValue);s.value.setCheckedKeys(D),(F=e.onCheck)==null||F.call(e,A,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(y=i.value)==null||y.focus()},cacheOptions:p}};var Rqe=Ge({props:{data:{type:Array,default:()=>[]}},setup(t){const e=mn(JB);return zt(()=>t.data,()=>{var n;t.data.forEach(i=>{e.states.cachedOptions.has(i.value)||e.states.cachedOptions.set(i.value,i)});const r=((n=e.selectRef)==null?void 0:n.querySelectorAll("input"))||[];Array.from(r).includes(document.activeElement)||e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Pqe=Ge({name:"ElTreeSelect",inheritAttrs:!1,props:{...Sb.props,...CO.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:r}=e,i=Me(),s=Me(),a=oe(()=>t.nodeKey||t.valueKey||"value"),l=Bqe(t,e,{select:i,tree:s,key:a}),{cacheOptions:o,...d}=Lqe(t,e,{select:i,tree:s,key:a}),p=Xs({});return r(p),dr(()=>{Object.assign(p,{...Gg(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Gg(i.value,["focus","blur"])})}),()=>Br(Sb,Xs({...l,ref:A=>i.value=A}),{...n,default:()=>[Br(Rqe,{data:o.value}),Br(CO,Xs({...d,ref:A=>s.value=A}))]})}});var _F=Fn(Pqe,[["__file","tree-select.vue"]]);_F.install=t=>{t.component(_F.name,_F)};const Fqe=_F,Oqe=Fqe,VH=Symbol(),Nqe={key:-1,level:-1,data:{}};var fT=(t=>(t.KEY="id",t.LABEL="label",t.CHILDREN="children",t.DISABLED="disabled",t))(fT||{}),l8=(t=>(t.ADD="add",t.DELETE="delete",t))(l8||{});const fde={type:Number,default:26},kqe=Ln({data:{type:Mt(Array),default:()=>Ba([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Mt(Object),default:()=>Ba({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Mt(Array),default:()=>Ba([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Mt(Array),default:()=>Ba([])},indent:{type:Number,default:16},itemSize:fde,icon:{type:wo},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Mt([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Mt(Function)},perfMode:{type:Boolean,default:!0}}),Dqe=Ln({node:{type:Mt(Object),default:()=>Ba(Nqe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:fde}),Uqe=Ln({node:{type:Mt(Object),required:!0}}),pde="node-click",Ade="node-expand",gde="node-collapse",mde="current-change",vde="check",yde="check-change",_de="node-contextmenu",zqe={[pde]:(t,e,n)=>t&&e&&n,[Ade]:(t,e)=>t&&e,[gde]:(t,e)=>t&&e,[mde]:(t,e)=>t&&e,[vde]:(t,e)=>t&&e,[yde]:(t,e)=>t&&typeof e=="boolean",[_de]:(t,e,n)=>t&&e&&n},$qe={click:(t,e)=>!!(t&&e),toggle:t=>!!t,check:(t,e)=>t&&typeof e=="boolean"};function Vqe(t,e){const n=Me(new Set),r=Me(new Set),{emit:i}=mi();zt([()=>e.value,()=>t.defaultCheckedKeys],()=>Tr(()=>{P(t.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!t.showCheckbox||t.checkStrictly)return;const{levelTreeNodeMap:F,maxLevel:D}=e.value,V=n.value,H=new Set;for(let Q=D-1;Q>=1;--Q){const G=F.get(Q);G&&G.forEach(W=>{const te=W.children;if(te){let q=!0,Y=!1;for(const ee of te){const ce=ee.key;if(V.has(ce))Y=!0;else if(H.has(ce)){q=!1,Y=!0;break}else q=!1}q?V.add(W.key):Y?(H.add(W.key),V.delete(W.key)):(V.delete(W.key),H.delete(W.key))}})}r.value=H},a=F=>n.value.has(F.key),l=F=>r.value.has(F.key),o=(F,D,V=!0)=>{const H=n.value,Q=(G,W)=>{H[W?l8.ADD:l8.DELETE](G.key);const te=G.children;!t.checkStrictly&&te&&te.forEach(q=>{q.disabled||Q(q,W)})};Q(F,D),s(),V&&d(F,D)},d=(F,D)=>{const{checkedNodes:V,checkedKeys:H}=C(),{halfCheckedNodes:Q,halfCheckedKeys:G}=x();i(vde,F.data,{checkedKeys:H,checkedNodes:V,halfCheckedKeys:G,halfCheckedNodes:Q}),i(yde,F.data,D)};function p(F=!1){return C(F).checkedKeys}function A(F=!1){return C(F).checkedNodes}function v(){return x().halfCheckedKeys}function y(){return x().halfCheckedNodes}function C(F=!1){const D=[],V=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:H}=e.value;n.value.forEach(Q=>{const G=H.get(Q);G&&(!F||F&&G.isLeaf)&&(V.push(Q),D.push(G.data))})}return{checkedKeys:V,checkedNodes:D}}function x(){const F=[],D=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:V}=e.value;r.value.forEach(H=>{const Q=V.get(H);Q&&(D.push(H),F.push(Q.data))})}return{halfCheckedNodes:F,halfCheckedKeys:D}}function M(F){n.value.clear(),r.value.clear(),Tr(()=>{P(F)})}function I(F,D){if(e!=null&&e.value&&t.showCheckbox){const V=e.value.treeNodeMap.get(F);V&&o(V,D,!1)}}function P(F){if(e!=null&&e.value){const{treeNodeMap:D}=e.value;if(t.showCheckbox&&D&&F)for(const V of F){const H=D.get(V);H&&!a(H)&&o(H,!0,!1)}}}return{updateCheckedKeys:s,toggleCheckbox:o,isChecked:a,isIndeterminate:l,getCheckedKeys:p,getCheckedNodes:A,getHalfCheckedKeys:v,getHalfCheckedNodes:y,setChecked:I,setCheckedKeys:M}}function Hqe(t,e){const n=Me(new Set([])),r=Me(new Set([])),i=oe(()=>Gr(t.filterMethod));function s(l){var o;if(!i.value)return;const d=new Set,p=r.value,A=n.value,v=[],y=((o=e.value)==null?void 0:o.treeNodes)||[],C=t.filterMethod;A.clear();function x(M){M.forEach(I=>{v.push(I),C!=null&&C(l,I.data)?v.forEach(F=>{d.add(F.key)}):I.isLeaf&&A.add(I.key);const P=I.children;if(P&&x(P),!I.isLeaf){if(!d.has(I.key))A.add(I.key);else if(P){let F=!0;for(const D of P)if(!A.has(D.key)){F=!1;break}F?p.add(I.key):p.delete(I.key)}}v.pop()})}return x(y),d}function a(l){return r.value.has(l.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:n,doFilter:s,isForceHiddenExpandIcon:a}}function Gqe(t,e){const n=Me(new Set(t.defaultExpandedKeys)),r=Me(),i=Ds();zt(()=>t.currentNodeKey,Ne=>{r.value=Ne},{immediate:!0}),zt(()=>t.data,Ne=>{Re(Ne)},{immediate:!0});const{isIndeterminate:s,isChecked:a,toggleCheckbox:l,getCheckedKeys:o,getCheckedNodes:d,getHalfCheckedKeys:p,getHalfCheckedNodes:A,setChecked:v,setCheckedKeys:y}=Vqe(t,i),{doFilter:C,hiddenNodeKeySet:x,isForceHiddenExpandIcon:M}=Hqe(t,i),I=oe(()=>{var Ne;return((Ne=t.props)==null?void 0:Ne.value)||fT.KEY}),P=oe(()=>{var Ne;return((Ne=t.props)==null?void 0:Ne.children)||fT.CHILDREN}),F=oe(()=>{var Ne;return((Ne=t.props)==null?void 0:Ne.disabled)||fT.DISABLED}),D=oe(()=>{var Ne;return((Ne=t.props)==null?void 0:Ne.label)||fT.LABEL}),V=oe(()=>{const Ne=n.value,Je=x.value,je=[],ft=i.value&&i.value.treeNodes||[];function Et(){const ke=[];for(let Ye=ft.length-1;Ye>=0;--Ye)ke.push(ft[Ye]);for(;ke.length;){const Ye=ke.pop();if(Ye&&(Je.has(Ye.key)||je.push(Ye),Ne.has(Ye.key))){const at=Ye.children;if(at){const He=at.length;for(let Tt=He-1;Tt>=0;--Tt)ke.push(at[Tt])}}}}return Et(),je}),H=oe(()=>V.value.length>0);function Q(Ne){const Je=new Map,je=new Map;let ft=1;function Et(Ye,at=1,He=void 0){var Tt;const Ut=[];for(const Rt of Ye){const Bt=te(Rt),Ht={level:at,key:Bt,data:Rt};Ht.label=Y(Rt),Ht.parent=He;const xt=W(Rt);Ht.disabled=q(Rt),Ht.isLeaf=!xt||xt.length===0,xt&&xt.length&&(Ht.children=Et(xt,at+1,Ht)),Ut.push(Ht),Je.set(Bt,Ht),je.has(at)||je.set(at,[]),(Tt=je.get(at))==null||Tt.push(Ht)}return at>ft&&(ft=at),Ut}const ke=Et(Ne);return{treeNodeMap:Je,levelTreeNodeMap:je,maxLevel:ft,treeNodes:ke}}function G(Ne){const Je=C(Ne);Je&&(n.value=Je)}function W(Ne){return Ne[P.value]}function te(Ne){return Ne?Ne[I.value]:""}function q(Ne){return Ne[F.value]}function Y(Ne){return Ne[D.value]}function ee(Ne){n.value.has(Ne.key)?ue(Ne):pe(Ne)}function ce(Ne){n.value=new Set(Ne)}function se(Ne,Je){e(pde,Ne.data,Ne,Je),le(Ne),t.expandOnClickNode&&ee(Ne),t.showCheckbox&&t.checkOnClickNode&&!Ne.disabled&&l(Ne,!a(Ne),!0)}function le(Ne){ae(Ne)||(r.value=Ne.key,e(mde,Ne.data,Ne))}function ie(Ne,Je){l(Ne,Je)}function pe(Ne){const Je=n.value;if(i.value&&t.accordion){const{treeNodeMap:je}=i.value;Je.forEach(ft=>{const Et=je.get(ft);Ne&&Ne.level===(Et==null?void 0:Et.level)&&Je.delete(ft)})}Je.add(Ne.key),e(Ade,Ne.data,Ne)}function ue(Ne){n.value.delete(Ne.key),e(gde,Ne.data,Ne)}function me(Ne){return n.value.has(Ne.key)}function Le(Ne){return!!Ne.disabled}function ae(Ne){const Je=r.value;return Je!==void 0&&Je===Ne.key}function be(){var Ne,Je;if(r.value)return(Je=(Ne=i.value)==null?void 0:Ne.treeNodeMap.get(r.value))==null?void 0:Je.data}function _e(){return r.value}function $e(Ne){r.value=Ne}function Re(Ne){Tr(()=>i.value=Q(Ne))}function Ie(Ne){var Je;const je=xi(Ne)?te(Ne):Ne;return(Je=i.value)==null?void 0:Je.treeNodeMap.get(je)}return{tree:i,flattenTree:V,isNotEmpty:H,getKey:te,getChildren:W,toggleExpand:ee,toggleCheckbox:l,isExpanded:me,isChecked:a,isIndeterminate:s,isDisabled:Le,isCurrent:ae,isForceHiddenExpandIcon:M,handleNodeClick:se,handleNodeCheck:ie,getCurrentNode:be,getCurrentKey:_e,setCurrentKey:$e,getCheckedKeys:o,getCheckedNodes:d,getHalfCheckedKeys:p,getHalfCheckedNodes:A,setChecked:v,setCheckedKeys:y,filter:G,setData:Re,getNode:Ie,expandNode:pe,collapseNode:ue,setExpandedKeys:ce}}var Qqe=Ge({name:"ElTreeNodeContent",props:Uqe,setup(t){const e=mn(VH),n=_n("tree");return()=>{const r=t.node,{data:i}=r;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:r,data:i}):Br("span",{class:n.be("node","label")},[r==null?void 0:r.label])}}});const jqe=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],Kqe=Ge({name:"ElTreeNode"}),Wqe=Ge({...Kqe,props:Dqe,emits:$qe,setup(t,{emit:e}){const n=t,r=mn(VH),i=_n("tree"),s=oe(()=>{var A;return(A=r==null?void 0:r.props.indent)!=null?A:16}),a=oe(()=>{var A;return(A=r==null?void 0:r.props.icon)!=null?A:Lle}),l=A=>{e("click",n.node,A)},o=()=>{e("toggle",n.node)},d=A=>{e("check",n.node,A)},p=A=>{var v,y,C,x;(C=(y=(v=r==null?void 0:r.instance)==null?void 0:v.vnode)==null?void 0:y.props)!=null&&C.onNodeContextmenu&&(A.stopPropagation(),A.preventDefault()),r==null||r.ctx.emit(_de,A,(x=n.node)==null?void 0:x.data,n.node)};return(A,v)=>{var y,C,x;return ve(),Ue("div",{ref:"node$",class:xe([T(i).b("node"),T(i).is("expanded",A.expanded),T(i).is("current",A.current),T(i).is("focusable",!A.disabled),T(i).is("checked",!A.disabled&&A.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":A.expanded,"aria-disabled":A.disabled,"aria-checked":A.checked,"data-key":(y=A.node)==null?void 0:y.key,onClick:qr(l,["stop"]),onContextmenu:p},[rt("div",{class:xe(T(i).be("node","content")),style:vr({paddingLeft:`${(A.node.level-1)*T(s)}px`,height:A.itemSize+"px"})},[T(a)?(ve(),qt(T(mr),{key:0,class:xe([T(i).is("leaf",!!((C=A.node)!=null&&C.isLeaf)),T(i).is("hidden",A.hiddenExpandIcon),{expanded:!((x=A.node)!=null&&x.isLeaf)&&A.expanded},T(i).be("node","expand-icon")]),onClick:qr(o,["stop"])},{default:It(()=>[(ve(),qt(Mi(T(a))))]),_:1},8,["class","onClick"])):wt("v-if",!0),A.showCheckbox?(ve(),qt(T(Ip),{key:1,"model-value":A.checked,indeterminate:A.indeterminate,disabled:A.disabled,onChange:d,onClick:v[0]||(v[0]=qr(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):wt("v-if",!0),pt(T(Qqe),{node:A.node},null,8,["node"])],6)],42,jqe)}}});var qqe=Fn(Wqe,[["__file","tree-node.vue"]]);const Yqe=Ge({name:"ElTreeV2"}),Xqe=Ge({...Yqe,props:kqe,emits:zqe,setup(t,{expose:e,emit:n}){const r=t,i=Uc(),s=oe(()=>r.itemSize);Rr(VH,{ctx:{emit:n,slots:i},props:r,instance:mi()}),Rr(om,void 0);const{t:a}=Ts(),l=_n("tree"),{flattenTree:o,isNotEmpty:d,toggleExpand:p,isExpanded:A,isIndeterminate:v,isChecked:y,isDisabled:C,isCurrent:x,isForceHiddenExpandIcon:M,handleNodeClick:I,handleNodeCheck:P,toggleCheckbox:F,getCurrentNode:D,getCurrentKey:V,setCurrentKey:H,getCheckedKeys:Q,getCheckedNodes:G,getHalfCheckedKeys:W,getHalfCheckedNodes:te,setChecked:q,setCheckedKeys:Y,filter:ee,setData:ce,getNode:se,expandNode:le,collapseNode:ie,setExpandedKeys:pe}=Gqe(r,n);return e({toggleCheckbox:F,getCurrentNode:D,getCurrentKey:V,setCurrentKey:H,getCheckedKeys:Q,getCheckedNodes:G,getHalfCheckedKeys:W,getHalfCheckedNodes:te,setChecked:q,setCheckedKeys:Y,filter:ee,setData:ce,getNode:se,expandNode:le,collapseNode:ie,setExpandedKeys:pe}),(ue,me)=>{var Le;return ve(),Ue("div",{class:xe([T(l).b(),{[T(l).m("highlight-current")]:ue.highlightCurrent}]),role:"tree"},[T(d)?(ve(),qt(T(Ehe),{key:0,"class-name":T(l).b("virtual-list"),data:T(o),total:T(o).length,height:ue.height,"item-size":T(s),"perf-mode":ue.perfMode},{default:It(({data:ae,index:be,style:_e})=>[(ve(),qt(qqe,{key:ae[be].key,style:vr(_e),node:ae[be],expanded:T(A)(ae[be]),"show-checkbox":ue.showCheckbox,checked:T(y)(ae[be]),indeterminate:T(v)(ae[be]),"item-size":T(s),disabled:T(C)(ae[be]),current:T(x)(ae[be]),"hidden-expand-icon":T(M)(ae[be]),onClick:T(I),onToggle:T(p),onCheck:T(P)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(ve(),Ue("div",{key:1,class:xe(T(l).e("empty-block"))},[rt("span",{class:xe(T(l).e("empty-text"))},Nn((Le=ue.emptyText)!=null?Le:T(a)("el.tree.emptyText")),3)],2))],2)}}});var Zqe=Fn(Xqe,[["__file","tree.vue"]]);const Jqe=_i(Zqe),bde=Symbol("uploadContextKey"),eYe="ElUpload";class tYe extends Error{constructor(e,n,r,i){super(e),this.name="UploadAjaxError",this.status=n,this.method=r,this.url=i}}function _J(t,e,n){let r;return n.response?r=`${n.response.error||n.response}`:n.responseText?r=`${n.responseText}`:r=`fail to ${e.method} ${t} ${n.status}`,new tYe(r,n.status,e.method,t)}function nYe(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const rYe=t=>{typeof XMLHttpRequest>"u"&&pc(eYe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",s=>{const a=s;a.percent=s.total>0?s.loaded/s.total*100:0,t.onProgress(a)});const r=new FormData;if(t.data)for(const[s,a]of Object.entries(t.data))Jn(a)&&a.length?r.append(s,...a):r.append(s,a);r.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(_J(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(_J(n,t,e));t.onSuccess(nYe(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const i=t.headers||{};if(i instanceof Headers)i.forEach((s,a)=>e.setRequestHeader(a,s));else for(const[s,a]of Object.entries(i))eu(a)||e.setRequestHeader(s,String(a));return e.send(r),e},wde=["text","picture","picture-card"];let iYe=1;const c8=()=>Date.now()+iYe++,xde=Ln({action:{type:String,default:"#"},headers:{type:Mt(Object)},method:{type:String,default:"post"},data:{type:Mt([Object,Function,Promise]),default:()=>Ba({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Mt(Array),default:()=>Ba([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:wde,default:"text"},httpRequest:{type:Mt(Function),default:rYe},disabled:Boolean,limit:Number}),sYe=Ln({...xde,beforeUpload:{type:Mt(Function),default:co},beforeRemove:{type:Mt(Function)},onRemove:{type:Mt(Function),default:co},onChange:{type:Mt(Function),default:co},onPreview:{type:Mt(Function),default:co},onSuccess:{type:Mt(Function),default:co},onProgress:{type:Mt(Function),default:co},onError:{type:Mt(Function),default:co},onExceed:{type:Mt(Function),default:co},crossorigin:{type:Mt(String)}}),oYe=Ln({files:{type:Mt(Array),default:()=>Ba([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Mt(Function),default:co},listType:{type:String,values:wde,default:"text"},crossorigin:{type:Mt(String)}}),aYe={remove:t=>!!t},lYe=["onKeydown"],cYe=["src","crossorigin"],uYe=["onClick"],hYe=["title"],dYe=["onClick"],fYe=["onClick"],pYe=Ge({name:"ElUploadList"}),AYe=Ge({...pYe,props:oYe,emits:aYe,setup(t,{emit:e}){const n=t,{t:r}=Ts(),i=_n("upload"),s=_n("icon"),a=_n("list"),l=jh(),o=Me(!1),d=oe(()=>[i.b("list"),i.bm("list",n.listType),i.is("disabled",n.disabled)]),p=A=>{e("remove",A)};return(A,v)=>(ve(),qt($oe,{tag:"ul",class:xe(T(d)),name:T(a).b()},{default:It(()=>[(ve(!0),Ue(_r,null,cs(A.files,y=>(ve(),Ue("li",{key:y.uid||y.name,class:xe([T(i).be("list","item"),T(i).is(y.status),{focusing:o.value}]),tabindex:"0",onKeydown:bo(C=>!T(l)&&p(y),["delete"]),onFocus:v[0]||(v[0]=C=>o.value=!0),onBlur:v[1]||(v[1]=C=>o.value=!1),onClick:v[2]||(v[2]=C=>o.value=!1)},[kt(A.$slots,"default",{file:y},()=>[A.listType==="picture"||y.status!=="uploading"&&A.listType==="picture-card"?(ve(),Ue("img",{key:0,class:xe(T(i).be("list","item-thumbnail")),src:y.url,crossorigin:A.crossorigin,alt:""},null,10,cYe)):wt("v-if",!0),y.status==="uploading"||A.listType!=="picture-card"?(ve(),Ue("div",{key:1,class:xe(T(i).be("list","item-info"))},[rt("a",{class:xe(T(i).be("list","item-name")),onClick:qr(C=>A.handlePreview(y),["prevent"])},[pt(T(mr),{class:xe(T(s).m("document"))},{default:It(()=>[pt(T(_Fe))]),_:1},8,["class"]),rt("span",{class:xe(T(i).be("list","item-file-name")),title:y.name},Nn(y.name),11,hYe)],10,uYe),y.status==="uploading"?(ve(),qt(T(ghe),{key:0,type:A.listType==="picture-card"?"circle":"line","stroke-width":A.listType==="picture-card"?6:2,percentage:Number(y.percentage),style:vr(A.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):wt("v-if",!0)],2)):wt("v-if",!0),rt("label",{class:xe(T(i).be("list","item-status-label"))},[A.listType==="text"?(ve(),qt(T(mr),{key:0,class:xe([T(s).m("upload-success"),T(s).m("circle-check")])},{default:It(()=>[pt(T(BV))]),_:1},8,["class"])):["picture-card","picture"].includes(A.listType)?(ve(),qt(T(mr),{key:1,class:xe([T(s).m("upload-success"),T(s).m("check")])},{default:It(()=>[pt(T(GB))]),_:1},8,["class"])):wt("v-if",!0)],2),T(l)?wt("v-if",!0):(ve(),qt(T(mr),{key:2,class:xe(T(s).m("close")),onClick:C=>p(y)},{default:It(()=>[pt(T(NA))]),_:2},1032,["class","onClick"])),wt(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),wt(" This is a bug which needs to be fixed "),wt(" TODO: Fix the incorrect navigation interaction "),T(l)?wt("v-if",!0):(ve(),Ue("i",{key:3,class:xe(T(s).m("close-tip"))},Nn(T(r)("el.upload.deleteTip")),3)),A.listType==="picture-card"?(ve(),Ue("span",{key:4,class:xe(T(i).be("list","item-actions"))},[rt("span",{class:xe(T(i).be("list","item-preview")),onClick:C=>A.handlePreview(y)},[pt(T(mr),{class:xe(T(s).m("zoom-in"))},{default:It(()=>[pt(T(Ole))]),_:1},8,["class"])],10,dYe),T(l)?wt("v-if",!0):(ve(),Ue("span",{key:0,class:xe(T(i).be("list","item-delete")),onClick:C=>p(y)},[pt(T(mr),{class:xe(T(s).m("delete"))},{default:It(()=>[pt(T(vFe))]),_:1},8,["class"])],10,fYe))],2)):wt("v-if",!0)])],42,lYe))),128)),kt(A.$slots,"append")]),_:3},8,["class","name"]))}});var bJ=Fn(AYe,[["__file","upload-list.vue"]]);const gYe=Ln({disabled:{type:Boolean,default:!1}}),mYe={file:t=>Jn(t)},vYe=["onDrop","onDragover"],Cde="ElUploadDrag",yYe=Ge({name:Cde}),_Ye=Ge({...yYe,props:gYe,emits:mYe,setup(t,{emit:e}){mn(bde)||pc(Cde,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=_n("upload"),i=Me(!1),s=jh(),a=o=>{if(s.value)return;i.value=!1,o.stopPropagation();const d=Array.from(o.dataTransfer.files);e("file",d)},l=()=>{s.value||(i.value=!0)};return(o,d)=>(ve(),Ue("div",{class:xe([T(r).b("dragger"),T(r).is("dragover",i.value)]),onDrop:qr(a,["prevent"]),onDragover:qr(l,["prevent"]),onDragleave:d[0]||(d[0]=qr(p=>i.value=!1,["prevent"]))},[kt(o.$slots,"default")],42,vYe))}});var bYe=Fn(_Ye,[["__file","upload-dragger.vue"]]);const wYe=Ln({...xde,beforeUpload:{type:Mt(Function),default:co},onRemove:{type:Mt(Function),default:co},onStart:{type:Mt(Function),default:co},onSuccess:{type:Mt(Function),default:co},onProgress:{type:Mt(Function),default:co},onError:{type:Mt(Function),default:co},onExceed:{type:Mt(Function),default:co}}),xYe=["onKeydown"],CYe=["name","multiple","accept"],EYe=Ge({name:"ElUploadContent",inheritAttrs:!1}),SYe=Ge({...EYe,props:wYe,setup(t,{expose:e}){const n=t,r=_n("upload"),i=jh(),s=Ds({}),a=Ds(),l=x=>{if(x.length===0)return;const{autoUpload:M,limit:I,fileList:P,multiple:F,onStart:D,onExceed:V}=n;if(I&&P.length+x.length>I){V(x,P);return}F||(x=x.slice(0,1));for(const H of x){const Q=H;Q.uid=c8(),D(Q),M&&o(Q)}},o=async x=>{if(a.value.value="",!n.beforeUpload)return p(x);let M,I={};try{const F=n.data,D=n.beforeUpload(x);I=KF(n.data)?aO(n.data):n.data,M=await D,KF(n.data)&&vh(F,I)&&(I=aO(n.data))}catch{M=!1}if(M===!1){n.onRemove(x);return}let P=x;M instanceof Blob&&(M instanceof File?P=M:P=new File([M],x.name,{type:x.type})),p(Object.assign(P,{uid:x.uid}),I)},d=async(x,M)=>Gr(x)?x(M):x,p=async(x,M)=>{const{headers:I,data:P,method:F,withCredentials:D,name:V,action:H,onProgress:Q,onSuccess:G,onError:W,httpRequest:te}=n;try{M=await d(M??P,x)}catch{n.onRemove(x);return}const{uid:q}=x,Y={headers:I||{},withCredentials:D,file:x,data:M,method:F,filename:V,action:H,onProgress:ce=>{Q(ce,x)},onSuccess:ce=>{G(ce,x),delete s.value[q]},onError:ce=>{W(ce,x),delete s.value[q]}},ee=te(Y);s.value[q]=ee,ee instanceof Promise&&ee.then(Y.onSuccess,Y.onError)},A=x=>{const M=x.target.files;M&&l(Array.from(M))},v=()=>{i.value||(a.value.value="",a.value.click())},y=()=>{v()};return e({abort:x=>{jPe(s.value).filter(x?([I])=>String(x.uid)===I:()=>!0).forEach(([I,P])=>{P instanceof XMLHttpRequest&&P.abort(),delete s.value[I]})},upload:o}),(x,M)=>(ve(),Ue("div",{class:xe([T(r).b(),T(r).m(x.listType),T(r).is("drag",x.drag)]),tabindex:"0",onClick:v,onKeydown:bo(qr(y,["self"]),["enter","space"])},[x.drag?(ve(),qt(bYe,{key:0,disabled:T(i),onFile:l},{default:It(()=>[kt(x.$slots,"default")]),_:3},8,["disabled"])):kt(x.$slots,"default",{key:1}),rt("input",{ref_key:"inputRef",ref:a,class:xe(T(r).e("input")),name:x.name,multiple:x.multiple,accept:x.accept,type:"file",onChange:A,onClick:M[0]||(M[0]=qr(()=>{},["stop"]))},null,42,CYe)],42,xYe))}});var wJ=Fn(SYe,[["__file","upload-content.vue"]]);const xJ="ElUpload",CJ=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},TYe=(t,e)=>{const n=zae(t,"fileList",void 0,{passive:!0}),r=v=>n.value.find(y=>y.uid===v.uid);function i(v){var y;(y=e.value)==null||y.abort(v)}function s(v=["ready","uploading","success","fail"]){n.value=n.value.filter(y=>!v.includes(y.status))}const a=(v,y)=>{const C=r(y);C&&(console.error(v),C.status="fail",n.value.splice(n.value.indexOf(C),1),t.onError(v,C,n.value),t.onChange(C,n.value))},l=(v,y)=>{const C=r(y);C&&(t.onProgress(v,C,n.value),C.status="uploading",C.percentage=Math.round(v.percent))},o=(v,y)=>{const C=r(y);C&&(C.status="success",C.response=v,t.onSuccess(v,C,n.value),t.onChange(C,n.value))},d=v=>{eu(v.uid)&&(v.uid=c8());const y={name:v.name,percentage:0,status:"ready",size:v.size,raw:v,uid:v.uid};if(t.listType==="picture-card"||t.listType==="picture")try{y.url=URL.createObjectURL(v)}catch(C){C.message,t.onError(C,y,n.value)}n.value=[...n.value,y],t.onChange(y,n.value)},p=async v=>{const y=v instanceof File?r(v):v;y||pc(xJ,"file to be removed not found");const C=x=>{i(x);const M=n.value;M.splice(M.indexOf(x),1),t.onRemove(x,M),CJ(x)};t.beforeRemove?await t.beforeRemove(y,n.value)!==!1&&C(y):C(y)};function A(){n.value.filter(({status:v})=>v==="ready").forEach(({raw:v})=>{var y;return v&&((y=e.value)==null?void 0:y.upload(v))})}return zt(()=>t.listType,v=>{v!=="picture-card"&&v!=="picture"||(n.value=n.value.map(y=>{const{raw:C,url:x}=y;if(!x&&C)try{y.url=URL.createObjectURL(C)}catch(M){t.onError(M,y,n.value)}return y}))}),zt(n,v=>{for(const y of v)y.uid||(y.uid=c8()),y.status||(y.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:i,clearFiles:s,handleError:a,handleProgress:l,handleStart:d,handleSuccess:o,handleRemove:p,submit:A,revokeFileObjectURL:CJ}},IYe=Ge({name:"ElUpload"}),BYe=Ge({...IYe,props:sYe,setup(t,{expose:e}){const n=t,r=jh(),i=Ds(),{abort:s,submit:a,clearFiles:l,uploadFiles:o,handleStart:d,handleError:p,handleRemove:A,handleSuccess:v,handleProgress:y,revokeFileObjectURL:C}=TYe(n,i),x=oe(()=>n.listType==="picture-card"),M=oe(()=>({...n,fileList:o.value,onStart:d,onProgress:y,onSuccess:v,onError:p,onRemove:A}));return Do(()=>{o.value.forEach(C)}),Rr(bde,{accept:Io(n,"accept")}),e({abort:s,submit:a,clearFiles:l,handleStart:d,handleRemove:A}),(I,P)=>(ve(),Ue("div",null,[T(x)&&I.showFileList?(ve(),qt(bJ,{key:0,disabled:T(r),"list-type":I.listType,files:T(o),crossorigin:I.crossorigin,"handle-preview":I.onPreview,onRemove:T(A)},Gv({append:It(()=>[pt(wJ,Gi({ref_key:"uploadRef",ref:i},T(M)),{default:It(()=>[I.$slots.trigger?kt(I.$slots,"trigger",{key:0}):wt("v-if",!0),!I.$slots.trigger&&I.$slots.default?kt(I.$slots,"default",{key:1}):wt("v-if",!0)]),_:3},16)]),_:2},[I.$slots.file?{name:"default",fn:It(({file:F})=>[kt(I.$slots,"file",{file:F})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):wt("v-if",!0),!T(x)||T(x)&&!I.showFileList?(ve(),qt(wJ,Gi({key:1,ref_key:"uploadRef",ref:i},T(M)),{default:It(()=>[I.$slots.trigger?kt(I.$slots,"trigger",{key:0}):wt("v-if",!0),!I.$slots.trigger&&I.$slots.default?kt(I.$slots,"default",{key:1}):wt("v-if",!0)]),_:3},16)):wt("v-if",!0),I.$slots.trigger?kt(I.$slots,"default",{key:2}):wt("v-if",!0),kt(I.$slots,"tip"),!T(x)&&I.showFileList?(ve(),qt(bJ,{key:3,disabled:T(r),"list-type":I.listType,files:T(o),crossorigin:I.crossorigin,"handle-preview":I.onPreview,onRemove:T(A)},Gv({_:2},[I.$slots.file?{name:"default",fn:It(({file:F})=>[kt(I.$slots,"file",{file:F})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):wt("v-if",!0)]))}});var MYe=Fn(BYe,[["__file","upload.vue"]]);const LYe=_i(MYe),RYe=Ln({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Mt([String,Array]),default:"Element Plus"},font:{type:Mt(Object)},gap:{type:Mt(Array),default:()=>[100,100]},offset:{type:Mt(Array)}});function PYe(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function FYe(t){return Object.keys(t).map(e=>`${PYe(e)}: ${t[e]};`).join(" ")}function OYe(){return window.devicePixelRatio||1}const NYe=(t,e)=>{let n=!1;return t.removedNodes.length&&e&&(n=Array.from(t.removedNodes).includes(e)),t.type==="attributes"&&t.target===e&&(n=!0),n},Ede=3;function l4(t,e,n=1){const r=document.createElement("canvas"),i=r.getContext("2d"),s=t*n,a=e*n;return r.setAttribute("width",`${s}px`),r.setAttribute("height",`${a}px`),i.save(),[i,r,s,a]}function kYe(){function t(e,n,r,i,s,a,l,o){const[d,p,A,v]=l4(i,s,r);if(e instanceof HTMLImageElement)d.drawImage(e,0,0,A,v);else{const{color:Le,fontSize:ae,fontStyle:be,fontWeight:_e,fontFamily:$e,textAlign:Re,textBaseline:Ie}=a,Ne=Number(ae)*r;d.font=`${be} normal ${_e} ${Ne}px/${s}px ${$e}`,d.fillStyle=Le,d.textAlign=Re,d.textBaseline=Ie;const Je=Array.isArray(e)?e:[e];Je==null||Je.forEach((je,ft)=>{d.fillText(je??"",A/2,ft*(Ne+Ede*r))})}const y=Math.PI/180*Number(n),C=Math.max(i,s),[x,M,I]=l4(C,C,r);x.translate(I/2,I/2),x.rotate(y),A>0&&v>0&&x.drawImage(p,-A/2,-v/2);function P(Le,ae){const be=Le*Math.cos(y)-ae*Math.sin(y),_e=Le*Math.sin(y)+ae*Math.cos(y);return[be,_e]}let F=0,D=0,V=0,H=0;const Q=A/2,G=v/2;[[0-Q,0-G],[0+Q,0-G],[0+Q,0+G],[0-Q,0+G]].forEach(([Le,ae])=>{const[be,_e]=P(Le,ae);F=Math.min(F,be),D=Math.max(D,be),V=Math.min(V,_e),H=Math.max(H,_e)});const te=F+I/2,q=V+I/2,Y=D-F,ee=H-V,ce=l*r,se=o*r,le=(Y+ce)*2,ie=ee+se,[pe,ue]=l4(le,ie);function me(Le=0,ae=0){pe.drawImage(M,te,q,Y,ee,Le,ae,Y,ee)}return me(),me(Y+ce,-ee/2-se/2),me(Y+ce,+ee/2+se/2),[ue.toDataURL(),le/r,ie/r]}return t}const DYe=Ge({name:"ElWatermark"}),UYe=Ge({...DYe,props:RYe,setup(t){const e=t,n={position:"relative"},r=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.color)!=null?q:"rgba(0,0,0,.15)"}),i=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.fontSize)!=null?q:16}),s=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.fontWeight)!=null?q:"normal"}),a=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.fontStyle)!=null?q:"normal"}),l=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.fontFamily)!=null?q:"sans-serif"}),o=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.textAlign)!=null?q:"center"}),d=oe(()=>{var te,q;return(q=(te=e.font)==null?void 0:te.textBaseline)!=null?q:"top"}),p=oe(()=>e.gap[0]),A=oe(()=>e.gap[1]),v=oe(()=>p.value/2),y=oe(()=>A.value/2),C=oe(()=>{var te,q;return(q=(te=e.offset)==null?void 0:te[0])!=null?q:v.value}),x=oe(()=>{var te,q;return(q=(te=e.offset)==null?void 0:te[1])!=null?q:y.value}),M=()=>{const te={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let q=C.value-v.value,Y=x.value-y.value;return q>0&&(te.left=`${q}px`,te.width=`calc(100% - ${q}px)`,q=0),Y>0&&(te.top=`${Y}px`,te.height=`calc(100% - ${Y}px)`,Y=0),te.backgroundPosition=`${q}px ${Y}px`,te},I=Ds(null),P=Ds(),F=Me(!1),D=()=>{P.value&&(P.value.remove(),P.value=void 0)},V=(te,q)=>{var Y;I.value&&P.value&&(F.value=!0,P.value.setAttribute("style",FYe({...M(),backgroundImage:`url('${te}')`,backgroundSize:`${Math.floor(q)}px`})),(Y=I.value)==null||Y.append(P.value),setTimeout(()=>{F.value=!1}))},H=te=>{let q=120,Y=64;const ee=e.image,ce=e.content,se=e.width,le=e.height;if(!ee&&te.measureText){te.font=`${Number(i.value)}px ${l.value}`;const ie=Array.isArray(ce)?ce:[ce],pe=ie.map(ue=>{const me=te.measureText(ue);return[me.width,me.fontBoundingBoxAscent!==void 0?me.fontBoundingBoxAscent+me.fontBoundingBoxDescent:me.actualBoundingBoxAscent+me.actualBoundingBoxDescent]});q=Math.ceil(Math.max(...pe.map(ue=>ue[0]))),Y=Math.ceil(Math.max(...pe.map(ue=>ue[1])))*ie.length+(ie.length-1)*Ede}return[se??q,le??Y]},Q=kYe(),G=()=>{const q=document.createElement("canvas").getContext("2d"),Y=e.image,ee=e.content,ce=e.rotate;if(q){P.value||(P.value=document.createElement("div"));const se=OYe(),[le,ie]=H(q),pe=ue=>{const[me,Le]=Q(ue||"",ce,se,le,ie,{color:r.value,fontSize:i.value,fontStyle:a.value,fontWeight:s.value,fontFamily:l.value,textAlign:o.value,textBaseline:d.value},p.value,A.value);V(me,Le)};if(Y){const ue=new Image;ue.onload=()=>{pe(ue)},ue.onerror=()=>{pe(ee)},ue.crossOrigin="anonymous",ue.referrerPolicy="no-referrer",ue.src=Y}else pe(ee)}};return dr(()=>{G()}),zt(()=>e,()=>{G()},{deep:!0,flush:"post"}),Do(()=>{D()}),Uae(I,te=>{F.value||te.forEach(q=>{NYe(q,P.value)&&(D(),G())})},{attributes:!0,subtree:!0,childList:!0}),(te,q)=>(ve(),Ue("div",{ref_key:"containerRef",ref:I,style:vr([n])},[kt(te.$slots,"default")],4))}});var zYe=Fn(UYe,[["__file","watermark.vue"]]);const $Ye=_i(zYe),VYe=Ln({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Mt(Object)},targetAreaClickable:{type:Boolean,default:!0}}),HYe=(t,e,n,r,i)=>{const s=Me(null),a=()=>{let A;return Xr(t.value)?A=document.querySelector(t.value):Gr(t.value)?A=t.value():A=t.value,A},l=()=>{const A=a();if(!A||!e.value){s.value=null;return}!GYe(A)&&e.value&&A.scrollIntoView(i.value);const{left:v,top:y,width:C,height:x}=A.getBoundingClientRect();s.value={left:v,top:y,width:C,height:x,radius:0}};dr(()=>{zt([e,t],()=>{l()},{immediate:!0}),window.addEventListener("resize",l)}),Do(()=>{window.removeEventListener("resize",l)});const o=A=>{var v;return(v=Jn(n.value.offset)?n.value.offset[A]:n.value.offset)!=null?v:6},d=oe(()=>{var A;if(!s.value)return s.value;const v=o(0),y=o(1),C=((A=n.value)==null?void 0:A.radius)||2;return{left:s.value.left-v,top:s.value.top-y,width:s.value.width+v*2,height:s.value.height+y*2,radius:C}}),p=oe(()=>{const A=a();return!r.value||!A||!window.DOMRect?A||void 0:{getBoundingClientRect(){var v,y,C,x;return window.DOMRect.fromRect({width:((v=d.value)==null?void 0:v.width)||0,height:((y=d.value)==null?void 0:y.height)||0,x:((C=d.value)==null?void 0:C.left)||0,y:((x=d.value)==null?void 0:x.top)||0})}}});return{mergedPosInfo:d,triggerTarget:p}},S2=Symbol("ElTour");function GYe(t){const e=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:r,right:i,bottom:s,left:a}=t.getBoundingClientRect();return r>=0&&a>=0&&i<=e&&s<=n}const QYe=(t,e,n,r,i,s,a,l)=>{const o=Me(),d=Me(),p=Me({}),A={x:o,y:d,placement:r,strategy:i,middlewareData:p},v=oe(()=>{const I=[pce(T(s)),A2e(),p2e(),jYe()];return T(l)&&T(n)&&I.push(Ace({element:T(n)})),I}),y=async()=>{if(!As)return;const I=T(t),P=T(e);if(!I||!P)return;const F=await gce(I,P,{placement:T(r),strategy:T(i),middleware:T(v)});DC(A).forEach(D=>{A[D].value=F[D]})},C=oe(()=>{if(!T(t))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:T(a)};const{overflow:I}=T(p);return{position:T(i),zIndex:T(a),top:T(d)!=null?`${T(d)}px`:"",left:T(o)!=null?`${T(o)}px`:"",maxWidth:I!=null&&I.maxWidth?`${I==null?void 0:I.maxWidth}px`:""}}),x=oe(()=>{if(!T(l))return{};const{arrow:I}=T(p);return{left:(I==null?void 0:I.x)!=null?`${I==null?void 0:I.x}px`:"",top:(I==null?void 0:I.y)!=null?`${I==null?void 0:I.y}px`:""}});let M;return dr(()=>{const I=T(t),P=T(e);I&&P&&(M=d2e(I,P,y)),bu(()=>{y()})}),Do(()=>{M&&M()}),{update:y,contentStyle:C,arrowStyle:x}},jYe=()=>({name:"overflow",async fn(t){const e=await f2e(t);let n=0;return e.left>0&&(n=e.left),e.right>0&&(n=e.right),{data:{maxWidth:t.rects.floating.width-n}}}}),KYe={style:{width:"100%",height:"100%"}},WYe=["d"],qYe=Ge({name:"ElTourMask",inheritAttrs:!1}),YYe=Ge({...qYe,props:VYe,setup(t){const e=t,{ns:n}=mn(S2),r=oe(()=>{var l,o;return(o=(l=e.pos)==null?void 0:l.radius)!=null?o:2}),i=oe(()=>{const l=r.value,o=`a${l},${l} 0 0 1`;return{topRight:`${o} ${l},${l}`,bottomRight:`${o} ${-l},${l}`,bottomLeft:`${o} ${-l},${-l}`,topLeft:`${o} ${l},${-l}`}}),s=oe(()=>{const l=window.innerWidth,o=window.innerHeight,d=i.value,p=`M${l},0 L0,0 L0,${o} L${l},${o} L${l},0 Z`,A=r.value;return e.pos?`${p} M${e.pos.left+A},${e.pos.top} h${e.pos.width-A*2} ${d.topRight} v${e.pos.height-A*2} ${d.bottomRight} h${-e.pos.width+A*2} ${d.bottomLeft} v${-e.pos.height+A*2} ${d.topLeft} z`:p}),a=oe(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return DV(Io(e,"visible"),{ns:n}),(l,o)=>l.visible?(ve(),Ue("div",Gi({key:0,class:T(n).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:l.zIndex,pointerEvents:l.pos&&l.targetAreaClickable?"none":"auto"}},l.$attrs),[(ve(),Ue("svg",KYe,[rt("path",{class:xe(T(n).e("hollow")),style:vr(T(a)),d:T(s)},null,14,WYe)]))],16)):wt("v-if",!0)}});var XYe=Fn(YYe,[["__file","mask.vue"]]);const ZYe=["absolute","fixed"],JYe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],HH=Ln({placement:{type:Mt(String),values:JYe,default:"bottom"},reference:{type:Mt(Object),default:null},strategy:{type:Mt(String),values:ZYe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),eXe={close:()=>!0},tXe=["data-side"],nXe=Ge({name:"ElTourContent"}),rXe=Ge({...nXe,props:HH,emits:eXe,setup(t,{emit:e}){const n=t,r=Me(n.placement),i=Me(n.strategy),s=Me(null),a=Me(null);zt(()=>n.placement,()=>{r.value=n.placement});const{contentStyle:l,arrowStyle:o}=QYe(Io(n,"reference"),s,a,r,i,Io(n,"offset"),Io(n,"zIndex"),Io(n,"showArrow")),d=oe(()=>r.value.split("-")[0]),{ns:p}=mn(S2),A=()=>{e("close")},v=y=>{y.detail.focusReason==="pointer"&&y.preventDefault()};return(y,C)=>(ve(),Ue("div",{ref_key:"contentRef",ref:s,style:vr(T(l)),class:xe(T(p).e("content")),"data-side":T(d),tabindex:"-1"},[pt(T(ZB),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":s.value||void 0,onReleaseRequested:A,onFocusoutPrevented:v},{default:It(()=>[kt(y.$slots,"default")]),_:3},8,["focus-trap-el"]),y.showArrow?(ve(),Ue("span",{key:0,ref_key:"arrowRef",ref:a,style:vr(T(o)),class:xe(T(p).e("arrow"))},null,6)):wt("v-if",!0)],14,tXe))}});var iXe=Fn(rXe,[["__file","content.vue"]]),sXe=Ge({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(t,{slots:e,emit:n}){let r=0;return()=>{var i,s;const a=(i=e.default)==null?void 0:i.call(e),l=[];let o=0;function d(p){Jn(p)&&p.forEach(A=>{var v;((v=(A==null?void 0:A.type)||{})==null?void 0:v.name)==="ElTourStep"&&(l.push(A),o+=1)})}return a.length&&d(Hy((s=a[0])==null?void 0:s.children)),r!==o&&(r=o,n("update-total",o)),l.length?l[t.current]:null}}});const oXe=Ln({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:wo},placement:HH.placement,contentStyle:{type:Mt([Object])},mask:{type:Mt([Boolean,Object]),default:!0},gap:{type:Mt(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Mt([Boolean,Object]),default:()=>({block:"center"})},type:{type:Mt(String)},appendTo:{type:Mt([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),aXe={[Si]:t=>Sl(t),"update:current":t=>Hr(t),close:t=>Hr(t),finish:()=>!0,change:t=>Hr(t)},lXe=Ge({name:"ElTour"}),cXe=Ge({...lXe,props:oXe,emits:aXe,setup(t,{emit:e}){const n=t,r=_n("tour"),i=Me(0),s=Me(),a=zae(n,"current",e,{passive:!0}),l=oe(()=>{var W;return(W=s.value)==null?void 0:W.target}),o=oe(()=>[r.b(),M.value==="primary"?r.m("primary"):""]),d=oe(()=>{var W;return((W=s.value)==null?void 0:W.placement)||n.placement}),p=oe(()=>{var W,te;return(te=(W=s.value)==null?void 0:W.contentStyle)!=null?te:n.contentStyle}),A=oe(()=>{var W,te;return(te=(W=s.value)==null?void 0:W.mask)!=null?te:n.mask}),v=oe(()=>!!A.value&&n.modelValue),y=oe(()=>Sl(A.value)?void 0:A.value),C=oe(()=>{var W,te;return!!l.value&&((te=(W=s.value)==null?void 0:W.showArrow)!=null?te:n.showArrow)}),x=oe(()=>{var W,te;return(te=(W=s.value)==null?void 0:W.scrollIntoViewOptions)!=null?te:n.scrollIntoViewOptions}),M=oe(()=>{var W,te;return(te=(W=s.value)==null?void 0:W.type)!=null?te:n.type}),{nextZIndex:I}=SE(),P=I(),F=oe(()=>{var W;return(W=n.zIndex)!=null?W:P}),{mergedPosInfo:D,triggerTarget:V}=HYe(l,Io(n,"modelValue"),Io(n,"gap"),A,x);zt(()=>n.modelValue,W=>{W||(a.value=0)});const H=()=>{n.closeOnPressEscape&&(e("update:modelValue",!1),e("close",a.value))},Q=W=>{i.value=W},G=Uc();return Rr(S2,{currentStep:s,current:a,total:i,showClose:Io(n,"showClose"),closeIcon:Io(n,"closeIcon"),mergedType:M,ns:r,slots:G,updateModelValue(W){e("update:modelValue",W)},onClose(){e("close",a.value)},onFinish(){e("finish")},onChange(){e("change",a.value)}}),(W,te)=>{var q,Y;return ve(),Ue(_r,null,[(ve(),qt(yE,{to:W.appendTo},[rt("div",Gi({class:T(o)},W.$attrs),[pt(XYe,{visible:T(v),fill:(q=T(y))==null?void 0:q.color,style:vr((Y=T(y))==null?void 0:Y.style),pos:T(D),"z-index":T(F),"target-area-clickable":W.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),W.modelValue?(ve(),qt(iXe,{key:T(a),reference:T(V),placement:T(d),"show-arrow":T(C),"z-index":T(F),style:vr(T(p)),onClose:H},{default:It(()=>[pt(T(sXe),{current:T(a),onUpdateTotal:Q},{default:It(()=>[kt(W.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):wt("v-if",!0)],16)],8,["to"])),wt(" just for IDE "),wt("v-if",!0)],64)}}});var uXe=Fn(cXe,[["__file","tour.vue"]]);const hXe=Ln({target:{type:Mt([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:wo},showArrow:{type:Boolean,default:void 0},placement:HH.placement,mask:{type:Mt([Boolean,Object]),default:void 0},contentStyle:{type:Mt([Object])},prevButtonProps:{type:Mt(Object)},nextButtonProps:{type:Mt(Object)},scrollIntoViewOptions:{type:Mt([Boolean,Object]),default:void 0},type:{type:Mt(String)}}),dXe={close:()=>!0},fXe=Ge({name:"ElTourStep"}),pXe=Ge({...fXe,props:hXe,emits:dXe,setup(t,{emit:e}){const n=t,{Close:r}=RV,{t:i}=Ts(),{currentStep:s,current:a,total:l,showClose:o,closeIcon:d,mergedType:p,ns:A,slots:v,updateModelValue:y,onClose:C,onFinish:x,onChange:M}=mn(S2);zt(n,G=>{s.value=G},{immediate:!0});const I=oe(()=>{var G;return(G=n.showClose)!=null?G:o.value}),P=oe(()=>{var G,W;return(W=(G=n.closeIcon)!=null?G:d.value)!=null?W:r}),F=G=>{if(G)return NPe(G,["children","onClick"])},D=()=>{var G,W;a.value-=1,(G=n.prevButtonProps)!=null&&G.onClick&&((W=n.prevButtonProps)==null||W.onClick()),M()},V=()=>{var G;a.value>=l.value-1?H():a.value+=1,(G=n.nextButtonProps)!=null&&G.onClick&&n.nextButtonProps.onClick(),M()},H=()=>{Q(),x()},Q=()=>{y(!1),C(),e("close")};return(G,W)=>(ve(),Ue(_r,null,[T(I)?(ve(),Ue("button",{key:0,"aria-label":"Close",class:xe(T(A).e("closebtn")),type:"button",onClick:Q},[pt(T(mr),{class:xe(T(A).e("close"))},{default:It(()=>[(ve(),qt(Mi(T(P))))]),_:1},8,["class"])],2)):wt("v-if",!0),rt("header",{class:xe([T(A).e("header"),{"show-close":T(o)}])},[kt(G.$slots,"header",{},()=>[rt("span",{role:"heading",class:xe(T(A).e("title"))},Nn(G.title),3)])],2),rt("div",{class:xe(T(A).e("body"))},[kt(G.$slots,"default",{},()=>[rt("span",null,Nn(G.description),1)])],2),rt("footer",{class:xe(T(A).e("footer"))},[rt("div",{class:xe(T(A).b("indicators"))},[T(v).indicators?(ve(),qt(Mi(T(v).indicators),{key:0,current:T(a),total:T(l)},null,8,["current","total"])):(ve(!0),Ue(_r,{key:1},cs(T(l),(te,q)=>(ve(),Ue("span",{key:te,class:xe([T(A).b("indicator"),q===T(a)?"is-active":""])},null,2))),128))],2),rt("div",{class:xe(T(A).b("buttons"))},[T(a)>0?(ve(),qt(T(tu),Gi({key:0,size:"small",type:T(p)},F(G.prevButtonProps),{onClick:D}),{default:It(()=>{var te,q;return[gs(Nn((q=(te=G.prevButtonProps)==null?void 0:te.children)!=null?q:T(i)("el.tour.previous")),1)]}),_:1},16,["type"])):wt("v-if",!0),T(a)<=T(l)-1?(ve(),qt(T(tu),Gi({key:1,size:"small",type:T(p)==="primary"?"default":"primary"},F(G.nextButtonProps),{onClick:V}),{default:It(()=>{var te,q;return[gs(Nn((q=(te=G.nextButtonProps)==null?void 0:te.children)!=null?q:T(a)===T(l)-1?T(i)("el.tour.finish"):T(i)("el.tour.next")),1)]}),_:1},16,["type"])):wt("v-if",!0)],2)],2)],64))}});var Sde=Fn(pXe,[["__file","step.vue"]]);const AXe=_i(uXe,{TourStep:Sde}),gXe=Pa(Sde),mXe=Ln({container:{type:Mt([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Mt(String),default:"default"},direction:{type:Mt(String),default:"vertical"}}),vXe={change:t=>Xr(t),click:(t,e)=>t instanceof MouseEvent&&(Xr(e)||Cl(e))},Tde=Symbol("anchor"),yXe=Ge({name:"ElAnchor"}),_Xe=Ge({...yXe,props:mXe,emits:vXe,setup(t,{expose:e,emit:n}){const r=t,i=Me(""),s=Me(null),a=Me(null),l=Me(),o={};let d=!1,p=0;const A=_n("anchor"),v=oe(()=>[A.b(),r.type==="underline"?A.m("underline"):"",A.m(r.direction)]),y=G=>{o[G.href]=G.el},C=G=>{delete o[G]},x=G=>{i.value!==G&&(i.value=G,n("change",G))};let M=null;const I=G=>{if(!l.value)return;const W=lR(G);if(!W)return;M&&M(),d=!0;const te=PX(W,l.value),q=s3(W,te),Y=te.scrollHeight-te.clientHeight,ee=Math.min(q-r.offset,Y);M=qPe(l.value,p,ee,r.duration,()=>{setTimeout(()=>{d=!1},20)})},P=G=>{G&&(x(G),I(G))},F=(G,W)=>{n("click",G,W),P(W)},D=dOe(()=>{l.value&&(p=FX(l.value));const G=V();d||Cl(G)||x(G)}),V=()=>{if(!l.value)return;const G=FX(l.value),W=[];for(const te of Object.keys(o)){const q=lR(te);if(!q)continue;const Y=PX(q,l.value),ee=s3(q,Y);W.push({top:ee-r.offset-r.bound,href:te})}W.sort((te,q)=>te.top-q.top);for(let te=0;te<W.length;te++){const q=W[te],Y=W[te+1];if(te===0&&G===0)return"";if(q.top<=G&&(!Y||Y.top>G))return q.href}},H=()=>{const G=lR(r.container);!G||l2(G)?l.value=window:l.value=G};Vo(l,"scroll",D);const Q=oe(()=>{if(!s.value||!a.value||!i.value)return{};const G=o[i.value];if(!G)return{};const W=s.value.getBoundingClientRect(),te=a.value.getBoundingClientRect(),q=G.getBoundingClientRect();return r.direction==="horizontal"?{left:`${q.left-W.left}px`,width:`${q.width}px`,opacity:1}:{top:`${q.top-W.top+(q.height-te.height)/2}px`,opacity:1}});return dr(()=>{H();const G=decodeURIComponent(window.location.hash);lR(G)?P(G):D()}),zt(()=>r.container,()=>{H()}),Rr(Tde,{ns:A,direction:r.direction,currentAnchor:i,addLink:y,removeLink:C,handleClick:F}),e({scrollTo:P}),(G,W)=>(ve(),Ue("div",{ref_key:"anchorRef",ref:s,class:xe(T(v))},[G.marker?(ve(),Ue("div",{key:0,ref_key:"markerRef",ref:a,class:xe(T(A).e("marker")),style:vr(T(Q))},null,6)):wt("v-if",!0),rt("div",{class:xe(T(A).e("list"))},[kt(G.$slots,"default")],2)],2))}});var bXe=Fn(_Xe,[["__file","anchor.vue"]]);const wXe=Ln({title:String,href:String}),xXe=["href"],CXe=Ge({name:"ElAnchorLink"}),EXe=Ge({...CXe,props:wXe,setup(t){const e=t,n=Me(null),{ns:r,direction:i,currentAnchor:s,addLink:a,removeLink:l,handleClick:o}=mn(Tde),d=oe(()=>[r.e("link"),r.is("active",s.value===e.href)]),p=A=>{o(A,e.href)};return zt(()=>e.href,(A,v)=>{Tr(()=>{v&&l(v),A&&a({href:A,el:n.value})})}),dr(()=>{const{href:A}=e;A&&a({href:A,el:n.value})}),Do(()=>{const{href:A}=e;A&&l(A)}),(A,v)=>(ve(),Ue("div",{class:xe(T(r).e("item"))},[rt("a",{ref_key:"linkRef",ref:n,class:xe(T(d)),href:A.href,onClick:p},[kt(A.$slots,"default",{},()=>[gs(Nn(A.title),1)])],10,xXe),A.$slots["sub-link"]&&T(i)==="vertical"?(ve(),Ue("div",{key:0,class:xe(T(r).e("list"))},[kt(A.$slots,"sub-link")],2)):wt("v-if",!0)],2))}});var Ide=Fn(EXe,[["__file","anchor-link.vue"]]);const SXe=_i(bXe,{AnchorLink:Ide}),TXe=Pa(Ide),IXe=Ln({options:{type:Mt(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:Nc,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...Eu(["ariaLabel"])}),BXe={[Si]:t=>Xr(t)||Hr(t),[Qo]:t=>Xr(t)||Hr(t)},MXe=["id","aria-label","aria-labelledby"],LXe=["name","disabled","checked","onChange"],RXe=Ge({name:"ElSegmented"}),PXe=Ge({...RXe,props:IXe,emits:BXe,setup(t,{emit:e}){const n=t,r=_n("segmented"),i=Hu(),s=Gl(),a=jh(),{formItem:l}=bh(),{inputId:o,isLabeledByFormItem:d}=jA(n,{formItemContext:l}),p=Me(null),A=eIe(),v=Xs({isInit:!1,width:0,translateX:0,disabled:!1,focusVisible:!1}),y=W=>{const te=C(W);e(Si,te),e(Qo,te)},C=W=>xi(W)?W.value:W,x=W=>xi(W)?W.label:W,M=W=>!!(a.value||xi(W)&&W.disabled),I=W=>n.modelValue===C(W),P=W=>n.options.find(te=>C(te)===W),F=W=>[r.e("item"),r.is("selected",I(W)),r.is("disabled",M(W))],D=()=>{if(!p.value)return;const W=p.value.querySelector(".is-selected"),te=p.value.querySelector(".is-selected input");if(!W||!te){v.width=0,v.translateX=0,v.disabled=!1,v.focusVisible=!1;return}const q=W.getBoundingClientRect();v.isInit=!0,v.width=q.width,v.translateX=W.offsetLeft,v.disabled=M(P(n.modelValue));try{v.focusVisible=te.matches(":focus-visible")}catch{}},V=oe(()=>[r.b(),r.m(s.value),r.is("block",n.block)]),H=oe(()=>({width:`${v.width}px`,transform:`translateX(${v.translateX}px)`,display:v.isInit?"block":"none"})),Q=oe(()=>[r.e("item-selected"),r.is("disabled",v.disabled),r.is("focus-visible",v.focusVisible)]),G=oe(()=>n.name||i.value);return Ia(p,D),zt(A,D),zt(()=>n.modelValue,()=>{var W;D(),n.validateEvent&&((W=l==null?void 0:l.validate)==null||W.call(l,"change").catch(te=>void 0))},{flush:"post"}),(W,te)=>(ve(),Ue("div",{id:T(o),ref_key:"segmentedRef",ref:p,class:xe(T(V)),role:"radiogroup","aria-label":T(d)?void 0:W.ariaLabel||"segmented","aria-labelledby":T(d)?T(l).labelId:void 0},[rt("div",{class:xe(T(r).e("group"))},[rt("div",{style:vr(T(H)),class:xe(T(Q))},null,6),(ve(!0),Ue(_r,null,cs(W.options,(q,Y)=>(ve(),Ue("label",{key:Y,class:xe(F(q))},[rt("input",{class:xe(T(r).e("item-input")),type:"radio",name:T(G),disabled:M(q),checked:I(q),onChange:ee=>y(q)},null,42,LXe),rt("div",{class:xe(T(r).e("item-label"))},[kt(W.$slots,"default",{item:q},()=>[gs(Nn(x(q)),1)])],2)],2))),128))],2)],10,MXe))}});var FXe=Fn(PXe,[["__file","segmented.vue"]]);const OXe=_i(FXe);var NXe=[N2e,K2e,yDe,WKe,SDe,PDe,Fce,KDe,WDe,tu,$ce,f6e,v6e,D6e,U6e,XUe,kUe,r3e,Ip,rUe,Aue,A3e,P3e,F3e,E3e,u8e,I2e,w8e,x8e,C8e,E8e,S8e,jze,r$e,i$e,_$e,que,F$e,EVe,SVe,TVe,ihe,zNe,$Ne,mr,yHe,she,mh,ohe,PHe,JHe,eGe,tGe,nGe,cGe,A7e,b7e,M7e,Lce,ghe,wue,yUe,vUe,K7e,Z7e,u3e,d0,Sb,gO,$Ge,kQe,QQe,jQe,wje,Tje,Ohe,Dje,Kje,Wje,s9e,cKe,uKe,KKe,cWe,uWe,jI,AWe,Q4e,bWe,SWe,TWe,_h,JWe,pqe,Iqe,Oqe,Jqe,LYe,$Ye,AXe,gXe,SXe,TXe,OXe];const TA="ElInfiniteScroll",kXe=50,DXe=200,UXe=0,zXe={delay:{type:Number,default:DXe},distance:{type:Number,default:UXe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},GH=(t,e)=>Object.entries(zXe).reduce((n,[r,i])=>{var s,a;const{type:l,default:o}=i,d=t.getAttribute(`infinite-scroll-${r}`);let p=(a=(s=e[d])!=null?s:d)!=null?a:o;return p=p==="false"?!1:p,p=l(p),n[r]=Number.isNaN(p)?o:p,n},{}),Bde=t=>{const{observer:e}=t[TA];e&&(e.disconnect(),delete t[TA].observer)},$Xe=(t,e)=>{const{container:n,containerEl:r,instance:i,observer:s,lastScrollTop:a}=t[TA],{disabled:l,distance:o}=GH(t,i),{clientHeight:d,scrollHeight:p,scrollTop:A}=r,v=A-a;if(t[TA].lastScrollTop=A,s||l||v<0)return;let y=!1;if(n===t)y=p-(d+A)<=o;else{const{clientTop:C,scrollHeight:x}=t,M=s3(t,r);y=A+d>=M+C+x-o}y&&e.call(i)};function c4(t,e){const{containerEl:n,instance:r}=t[TA],{disabled:i}=GH(t,r);i||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(r):Bde(t))}const VXe={async mounted(t,e){const{instance:n,value:r}=e;Gr(r)||pc(TA,"'v-infinite-scroll' binding value must be a function"),await Tr();const{delay:i,immediate:s}=GH(t,n),a=TV(t,!0),l=a===window?document.documentElement:a,o=eb($Xe.bind(null,t,r),i);if(a){if(t[TA]={instance:n,container:a,containerEl:l,delay:i,cb:r,onScroll:o,lastScrollTop:l.scrollTop},s){const d=new MutationObserver(eb(c4.bind(null,t,r),kXe));t[TA].observer=d,d.observe(t,{childList:!0,subtree:!0}),c4(t,r)}a.addEventListener("scroll",o)}},unmounted(t){const{container:e,onScroll:n}=t[TA];e==null||e.removeEventListener("scroll",n),Bde(t)},async updated(t){if(!t[TA])await Tr();else{const{containerEl:e,cb:n,observer:r}=t[TA];e.clientHeight&&r&&c4(t,n)}}},u8=VXe;u8.install=t=>{t.directive("InfiniteScroll",u8)};const HXe=u8;function GXe(t){let e;const n=Me(!1),r=Xs({...t,originalPosition:"",originalOverflow:"",visible:!1});function i(v){r.text=v}function s(){const v=r.parent,y=A.ns;if(!v.vLoadingAddClassList){let C=v.getAttribute("loading-number");C=Number.parseInt(C)-1,C?v.setAttribute("loading-number",C.toString()):(yh(v,y.bm("parent","relative")),v.removeAttribute("loading-number")),yh(v,y.bm("parent","hidden"))}a(),p.unmount()}function a(){var v,y;(y=(v=A.$el)==null?void 0:v.parentNode)==null||y.removeChild(A.$el)}function l(){var v;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=window.setTimeout(o,400),r.visible=!1,(v=t.closed)==null||v.call(t))}function o(){if(!n.value)return;const v=r.parent;n.value=!1,v.vLoadingAddClassList=void 0,s()}const p=joe(Ge({name:"ElLoading",setup(v,{expose:y}){const{ns:C,zIndex:x}=g2("loading");return y({ns:C,zIndex:x}),()=>{const M=r.spinner||r.svg,I=Br("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...M?{innerHTML:M}:{}},[Br("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),P=r.text?Br("p",{class:C.b("text")},[r.text]):void 0;return Br(fc,{name:C.b("fade"),onAfterLeave:o},{default:It(()=>[ci(pt("div",{style:{backgroundColor:r.background||""},class:[C.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[Br("div",{class:C.b("spinner")},[I,P])]),[[Hs,r.visible]])])})}}})),A=p.mount(document.createElement("div"));return{...dc(r),setText:i,removeElLoadingChild:a,close:l,handleAfterLeave:o,vm:A,get $el(){return A.$el}}}let xR;const h8=function(t={}){if(!As)return;const e=QXe(t);if(e.fullscreen&&xR)return xR;const n=GXe({...e,closed:()=>{var i;(i=e.closed)==null||i.call(e),e.fullscreen&&(xR=void 0)}});jXe(e,e.parent,n),EJ(e,e.parent,n),e.parent.vLoadingAddClassList=()=>EJ(e,e.parent,n);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(n.$el),Tr(()=>n.visible.value=e.visible),e.fullscreen&&(xR=n),n},QXe=t=>{var e,n,r,i;let s;return Xr(t.target)?s=(e=document.querySelector(t.target))!=null?e:document.body:s=t.target||document.body,{parent:s===document.body||t.body?document.body:s,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:s===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(r=t.lock)!=null?r:!1,customClass:t.customClass||"",visible:(i=t.visible)!=null?i:!0,target:s}},jXe=async(t,e,n)=>{const{nextZIndex:r}=n.vm.zIndex||n.vm._.exposed.zIndex,i={};if(t.fullscreen)n.originalPosition.value=Sy(document.body,"position"),n.originalOverflow.value=Sy(document.body,"overflow"),i.zIndex=r();else if(t.parent===document.body){n.originalPosition.value=Sy(document.body,"position"),await Tr();for(const s of["top","left"]){const a=s==="top"?"scrollTop":"scrollLeft";i[s]=`${t.target.getBoundingClientRect()[s]+document.body[a]+document.documentElement[a]-Number.parseInt(Sy(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])i[s]=`${t.target.getBoundingClientRect()[s]}px`}else n.originalPosition.value=Sy(e,"position");for(const[s,a]of Object.entries(i))n.$el.style[s]=a},EJ=(t,e,n)=>{const r=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?yh(e,r.bm("parent","relative")):pp(e,r.bm("parent","relative")),t.fullscreen&&t.lock?pp(e,r.bm("parent","hidden")):yh(e,r.bm("parent","hidden"))},bF=Symbol("ElLoading"),SJ=(t,e)=>{var n,r,i,s;const a=e.instance,l=v=>xi(e.value)?e.value[v]:void 0,o=v=>{const y=Xr(v)&&(a==null?void 0:a[v])||v;return y&&Me(y)},d=v=>o(l(v)||t.getAttribute(`element-loading-${y_(v)}`)),p=(n=l("fullscreen"))!=null?n:e.modifiers.fullscreen,A={text:d("text"),svg:d("svg"),svgViewBox:d("svgViewBox"),spinner:d("spinner"),background:d("background"),customClass:d("customClass"),fullscreen:p,target:(r=l("target"))!=null?r:p?void 0:t,body:(i=l("body"))!=null?i:e.modifiers.body,lock:(s=l("lock"))!=null?s:e.modifiers.lock};t[bF]={options:A,instance:h8(A)}},KXe=(t,e)=>{for(const n of Object.keys(e))Go(e[n])&&(e[n].value=t[n])},TJ={mounted(t,e){e.value&&SJ(t,e)},updated(t,e){const n=t[bF];e.oldValue!==e.value&&(e.value&&!e.oldValue?SJ(t,e):e.value&&e.oldValue?xi(e.value)&&KXe(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[bF])==null||e.instance.close(),t[bF]=null}},WXe={install(t){t.directive("loading",TJ),t.config.globalProperties.$loading=h8},directive:TJ,service:h8},Mde=["success","info","warning","error"],ch=Ba({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:As?document.body:void 0}),qXe=Ln({customClass:{type:String,default:ch.customClass},center:{type:Boolean,default:ch.center},dangerouslyUseHTMLString:{type:Boolean,default:ch.dangerouslyUseHTMLString},duration:{type:Number,default:ch.duration},icon:{type:wo,default:ch.icon},id:{type:String,default:ch.id},message:{type:Mt([String,Object,Function]),default:ch.message},onClose:{type:Mt(Function),default:ch.onClose},showClose:{type:Boolean,default:ch.showClose},type:{type:String,values:Mde,default:ch.type},plain:{type:Boolean,default:ch.plain},offset:{type:Number,default:ch.offset},zIndex:{type:Number,default:ch.zIndex},grouping:{type:Boolean,default:ch.grouping},repeatNum:{type:Number,default:ch.repeatNum}}),YXe={destroy:()=>!0},LA=R$([]),XXe=t=>{const e=LA.findIndex(i=>i.id===t),n=LA[e];let r;return e>0&&(r=LA[e-1]),{current:n,prev:r}},ZXe=t=>{const{prev:e}=XXe(t);return e?e.vm.exposed.bottom.value:0},JXe=(t,e)=>LA.findIndex(r=>r.id===t)>0?16:e,eZe=["id"],tZe=["innerHTML"],nZe=Ge({name:"ElMessage"}),rZe=Ge({...nZe,props:qXe,emits:YXe,setup(t,{expose:e}){const n=t,{Close:r}=PV,{ns:i,zIndex:s}=g2("message"),{currentZIndex:a,nextZIndex:l}=s,o=Me(),d=Me(!1),p=Me(0);let A;const v=oe(()=>n.type?n.type==="error"?"danger":n.type:"info"),y=oe(()=>{const Q=n.type;return{[i.bm("icon",Q)]:Q&&i_[Q]}}),C=oe(()=>n.icon||i_[n.type]||""),x=oe(()=>ZXe(n.id)),M=oe(()=>JXe(n.id,n.offset)+x.value),I=oe(()=>p.value+M.value),P=oe(()=>({top:`${M.value}px`,zIndex:a.value}));function F(){n.duration!==0&&({stop:A}=_b(()=>{V()},n.duration))}function D(){A==null||A()}function V(){d.value=!1}function H({code:Q}){Q===Fr.esc&&V()}return dr(()=>{F(),l(),d.value=!0}),zt(()=>n.repeatNum,()=>{D(),F()}),Vo(document,"keydown",H),Ia(o,()=>{p.value=o.value.getBoundingClientRect().height}),e({visible:d,bottom:I,close:V}),(Q,G)=>(ve(),qt(fc,{name:T(i).b("fade"),onBeforeLeave:Q.onClose,onAfterLeave:G[0]||(G[0]=W=>Q.$emit("destroy")),persisted:""},{default:It(()=>[ci(rt("div",{id:Q.id,ref_key:"messageRef",ref:o,class:xe([T(i).b(),{[T(i).m(Q.type)]:Q.type},T(i).is("center",Q.center),T(i).is("closable",Q.showClose),T(i).is("plain",Q.plain),Q.customClass]),style:vr(T(P)),role:"alert",onMouseenter:D,onMouseleave:F},[Q.repeatNum>1?(ve(),qt(T(Fce),{key:0,value:Q.repeatNum,type:T(v),class:xe(T(i).e("badge"))},null,8,["value","type","class"])):wt("v-if",!0),T(C)?(ve(),qt(T(mr),{key:1,class:xe([T(i).e("icon"),T(y)])},{default:It(()=>[(ve(),qt(Mi(T(C))))]),_:1},8,["class"])):wt("v-if",!0),kt(Q.$slots,"default",{},()=>[Q.dangerouslyUseHTMLString?(ve(),Ue(_r,{key:1},[wt(" Caution here, message could've been compromised, never use user's input as message "),rt("p",{class:xe(T(i).e("content")),innerHTML:Q.message},null,10,tZe)],2112)):(ve(),Ue("p",{key:0,class:xe(T(i).e("content"))},Nn(Q.message),3))]),Q.showClose?(ve(),qt(T(mr),{key:2,class:xe(T(i).e("closeBtn")),onClick:qr(V,["stop"])},{default:It(()=>[pt(T(r))]),_:1},8,["class","onClick"])):wt("v-if",!0)],46,eZe),[[Hs,d.value]])]),_:3},8,["name","onBeforeLeave"]))}});var iZe=Fn(rZe,[["__file","message.vue"]]);let sZe=1;const Lde=t=>{const e=!t||Xr(t)||ya(t)||Gr(t)?{message:t}:t,n={...ch,...e};if(!n.appendTo)n.appendTo=document.body;else if(Xr(n.appendTo)){let r=document.querySelector(n.appendTo);Ep(r)||(r=document.body),n.appendTo=r}return n},oZe=t=>{const e=LA.indexOf(t);if(e===-1)return;LA.splice(e,1);const{handler:n}=t;n.close()},aZe=({appendTo:t,...e},n)=>{const r=`message_${sZe++}`,i=e.onClose,s=document.createElement("div"),a={...e,id:r,onClose:()=>{i==null||i(),oZe(p)},onDestroy:()=>{Yy(null,s)}},l=pt(iZe,a,Gr(a.message)||ya(a.message)?{default:Gr(a.message)?a.message:()=>a.message}:null);l.appContext=n||YC._context,Yy(l,s),t.appendChild(s.firstElementChild);const o=l.component,p={id:r,vnode:l,vm:o,handler:{close:()=>{o.exposed.visible.value=!1}},props:l.component.props};return p},YC=(t={},e)=>{if(!As)return{close:()=>{}};if(Hr(g3.max)&&LA.length>=g3.max)return{close:()=>{}};const n=Lde(t);if(n.grouping&&LA.length){const i=LA.find(({vnode:s})=>{var a;return((a=s.props)==null?void 0:a.message)===n.message});if(i)return i.props.repeatNum+=1,i.props.type=n.type,i.handler}const r=aZe(n,e);return LA.push(r),r.handler};Mde.forEach(t=>{YC[t]=(e={},n)=>{const r=Lde(e);return YC({...r,type:t},n)}});function lZe(t){for(const e of LA)(!t||t===e.props.type)&&e.handler.close()}YC.closeAll=lZe;YC._context=null;const cZe=kle(YC,"$message"),uZe=Ge({name:"ElMessageBox",directives:{TrapFocus:T4e},components:{ElButton:tu,ElFocusTrap:ZB,ElInput:mh,ElOverlay:gH,ElIcon:mr,...PV},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Dle},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:r,ns:i,size:s}=g2("message-box",oe(()=>t.buttonSize)),{t:a}=n,{nextZIndex:l}=r,o=Me(!1),d=Xs({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),p=oe(()=>{const le=d.type;return{[i.bm("icon",le)]:le&&i_[le]}}),A=Hu(),v=Hu(),y=oe(()=>d.icon||i_[d.type]||""),C=oe(()=>!!d.message),x=Me(),M=Me(),I=Me(),P=Me(),F=Me(),D=oe(()=>d.confirmButtonClass);zt(()=>d.inputValue,async le=>{await Tr(),t.boxType==="prompt"&&le!==null&&Y()},{immediate:!0}),zt(()=>o.value,le=>{var ie,pe;le&&(t.boxType!=="prompt"&&(d.autofocus?I.value=(pe=(ie=F.value)==null?void 0:ie.$el)!=null?pe:x.value:I.value=x.value),d.zIndex=l()),t.boxType==="prompt"&&(le?Tr().then(()=>{var ue;P.value&&P.value.$el&&(d.autofocus?I.value=(ue=ee())!=null?ue:x.value:I.value=x.value)}):(d.editorErrorMessage="",d.validateError=!1))});const V=oe(()=>t.draggable),H=oe(()=>t.overflow);Ule(x,M,V,H),dr(async()=>{await Tr(),t.closeOnHashChange&&window.addEventListener("hashchange",Q)}),Do(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",Q)});function Q(){o.value&&(o.value=!1,Tr(()=>{d.action&&e("action",d.action)}))}const G=()=>{t.closeOnClickModal&&q(d.distinguishCancelAndClose?"close":"cancel")},W=KV(G),te=le=>{if(d.inputType!=="textarea")return le.preventDefault(),q("confirm")},q=le=>{var ie;t.boxType==="prompt"&&le==="confirm"&&!Y()||(d.action=le,d.beforeClose?(ie=d.beforeClose)==null||ie.call(d,le,d,Q):Q())},Y=()=>{if(t.boxType==="prompt"){const le=d.inputPattern;if(le&&!le.test(d.inputValue||""))return d.editorErrorMessage=d.inputErrorMessage||a("el.messagebox.error"),d.validateError=!0,!1;const ie=d.inputValidator;if(typeof ie=="function"){const pe=ie(d.inputValue);if(pe===!1)return d.editorErrorMessage=d.inputErrorMessage||a("el.messagebox.error"),d.validateError=!0,!1;if(typeof pe=="string")return d.editorErrorMessage=pe,d.validateError=!0,!1}}return d.editorErrorMessage="",d.validateError=!1,!0},ee=()=>{const le=P.value.$refs;return le.input||le.textarea},ce=()=>{q("close")},se=()=>{t.closeOnPressEscape&&ce()};return t.lockScroll&&DV(o),{...dc(d),ns:i,overlayEvent:W,visible:o,hasMessage:C,typeClass:p,contentId:A,inputId:v,btnSize:s,iconComponent:y,confirmButtonClasses:D,rootRef:x,focusStartRef:I,headerRef:M,inputRef:P,confirmRef:F,doClose:Q,handleClose:ce,onCloseRequested:se,handleWrapperClick:G,handleInputEnter:te,handleAction:q,t:a}}}),hZe=["aria-label","aria-describedby"],dZe=["aria-label"],fZe=["id"];function pZe(t,e,n,r,i,s){const a=ui("el-icon"),l=ui("close"),o=ui("el-input"),d=ui("el-button"),p=ui("el-focus-trap"),A=ui("el-overlay");return ve(),qt(fc,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=v=>t.$emit("vanish")),persisted:""},{default:It(()=>[ci(pt(A,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:It(()=>[rt("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:xe(`${t.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...v)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...v)),onMousedown:e[9]||(e[9]=(...v)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...v)),onMouseup:e[10]||(e[10]=(...v)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...v))},[pt(p,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:It(()=>[rt("div",{ref:"rootRef",class:xe([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:vr(t.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=qr(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(ve(),Ue("div",{key:0,ref:"headerRef",class:xe([t.ns.e("header"),{"show-close":t.showClose}])},[rt("div",{class:xe(t.ns.e("title"))},[t.iconComponent&&t.center?(ve(),qt(a,{key:0,class:xe([t.ns.e("status"),t.typeClass])},{default:It(()=>[(ve(),qt(Mi(t.iconComponent)))]),_:1},8,["class"])):wt("v-if",!0),rt("span",null,Nn(t.title),1)],2),t.showClose?(ve(),Ue("button",{key:0,type:"button",class:xe(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:e[0]||(e[0]=v=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=bo(qr(v=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[pt(a,{class:xe(t.ns.e("close"))},{default:It(()=>[pt(l)]),_:1},8,["class"])],42,dZe)):wt("v-if",!0)],2)):wt("v-if",!0),rt("div",{id:t.contentId,class:xe(t.ns.e("content"))},[rt("div",{class:xe(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(ve(),qt(a,{key:0,class:xe([t.ns.e("status"),t.typeClass])},{default:It(()=>[(ve(),qt(Mi(t.iconComponent)))]),_:1},8,["class"])):wt("v-if",!0),t.hasMessage?(ve(),Ue("div",{key:1,class:xe(t.ns.e("message"))},[kt(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(ve(),qt(Mi(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(ve(),qt(Mi(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:It(()=>[gs(Nn(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):wt("v-if",!0)],2),ci(rt("div",{class:xe(t.ns.e("input"))},[pt(o,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":e[2]||(e[2]=v=>t.inputValue=v),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:xe({invalid:t.validateError}),onKeydown:bo(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),rt("div",{class:xe(t.ns.e("errormsg")),style:vr({visibility:t.editorErrorMessage?"visible":"hidden"})},Nn(t.editorErrorMessage),7)],2),[[Hs,t.showInput]])],10,fZe),rt("div",{class:xe(t.ns.e("btns"))},[t.showCancelButton?(ve(),qt(d,{key:0,loading:t.cancelButtonLoading,class:xe([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:e[3]||(e[3]=v=>t.handleAction("cancel")),onKeydown:e[4]||(e[4]=bo(qr(v=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:It(()=>[gs(Nn(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):wt("v-if",!0),ci(pt(d,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:xe([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:e[5]||(e[5]=v=>t.handleAction("confirm")),onKeydown:e[6]||(e[6]=bo(qr(v=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:It(()=>[gs(Nn(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Hs,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,hZe)]),_:3},8,["z-index","overlay-class","mask"]),[[Hs,t.visible]])]),_:3})}var AZe=Fn(uZe,[["render",pZe],["__file","index.vue"]]);const tB=new Map,gZe=t=>{let e=document.body;return t.appendTo&&(Xr(t.appendTo)&&(e=document.querySelector(t.appendTo)),Ep(t.appendTo)&&(e=t.appendTo),Ep(e)||(e=document.body)),e},mZe=(t,e,n=null)=>{const r=pt(AZe,t,Gr(t.message)||ya(t.message)?{default:Gr(t.message)?t.message:()=>t.message}:null);return r.appContext=n,Yy(r,e),gZe(t).appendChild(e.firstElementChild),r.component},vZe=()=>document.createElement("div"),yZe=(t,e)=>{const n=vZe();t.onVanish=()=>{Yy(null,n),tB.delete(i)},t.onAction=s=>{const a=tB.get(i);let l;t.showInput?l={value:i.inputValue,action:s}:l=s,t.callback?t.callback(l,r.proxy):s==="cancel"||s==="close"?t.distinguishCancelAndClose&&s!=="cancel"?a.reject("close"):a.reject("cancel"):a.resolve(l)};const r=mZe(t,n,e),i=r.proxy;for(const s in t)vs(t,s)&&!vs(i.$props,s)&&(i[s]=t[s]);return i.visible=!0,i};function ME(t,e=null){if(!As)return Promise.reject();let n;return Xr(t)||ya(t)?t={message:t}:n=t.callback,new Promise((r,i)=>{const s=yZe(t,e??ME._context);tB.set(s,{options:t,callback:n,resolve:r,reject:i})})}const _Ze=["alert","confirm","prompt"],bZe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};_Ze.forEach(t=>{ME[t]=wZe(t)});function wZe(t){return(e,n,r,i)=>{let s="";return xi(n)?(r=n,s=""):Cl(n)?s="":s=n,ME(Object.assign({title:s,message:e,type:"",...bZe[t]},r,{boxType:t}),i)}}ME.close=()=>{tB.forEach((t,e)=>{e.doClose()}),tB.clear()};ME._context=null;const fy=ME;fy.install=t=>{fy._context=t._context,t.config.globalProperties.$msgbox=fy,t.config.globalProperties.$messageBox=fy,t.config.globalProperties.$alert=fy.alert,t.config.globalProperties.$confirm=fy.confirm,t.config.globalProperties.$prompt=fy.prompt};const xZe=fy,Rde=["success","info","warning","error"],CZe=Ln({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:wo},id:{type:String,default:""},message:{type:Mt([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Mt(Function),default:()=>{}},onClose:{type:Mt(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Rde,""],default:""},zIndex:Number}),EZe={destroy:()=>!0},SZe=["id"],TZe=["textContent"],IZe={key:0},BZe=["innerHTML"],MZe=Ge({name:"ElNotification"}),LZe=Ge({...MZe,props:CZe,emits:EZe,setup(t,{expose:e}){const n=t,{ns:r,zIndex:i}=g2("notification"),{nextZIndex:s,currentZIndex:a}=i,{Close:l}=RV,o=Me(!1);let d;const p=oe(()=>{const F=n.type;return F&&i_[n.type]?r.m(F):""}),A=oe(()=>n.type&&i_[n.type]||n.icon),v=oe(()=>n.position.endsWith("right")?"right":"left"),y=oe(()=>n.position.startsWith("top")?"top":"bottom"),C=oe(()=>{var F;return{[y.value]:`${n.offset}px`,zIndex:(F=n.zIndex)!=null?F:a.value}});function x(){n.duration>0&&({stop:d}=_b(()=>{o.value&&I()},n.duration))}function M(){d==null||d()}function I(){o.value=!1}function P({code:F}){F===Fr.delete||F===Fr.backspace?M():F===Fr.esc?o.value&&I():x()}return dr(()=>{x(),s(),o.value=!0}),Vo(document,"keydown",P),e({visible:o,close:I}),(F,D)=>(ve(),qt(fc,{name:T(r).b("fade"),onBeforeLeave:F.onClose,onAfterLeave:D[1]||(D[1]=V=>F.$emit("destroy")),persisted:""},{default:It(()=>[ci(rt("div",{id:F.id,class:xe([T(r).b(),F.customClass,T(v)]),style:vr(T(C)),role:"alert",onMouseenter:M,onMouseleave:x,onClick:D[0]||(D[0]=(...V)=>F.onClick&&F.onClick(...V))},[T(A)?(ve(),qt(T(mr),{key:0,class:xe([T(r).e("icon"),T(p)])},{default:It(()=>[(ve(),qt(Mi(T(A))))]),_:1},8,["class"])):wt("v-if",!0),rt("div",{class:xe(T(r).e("group"))},[rt("h2",{class:xe(T(r).e("title")),textContent:Nn(F.title)},null,10,TZe),ci(rt("div",{class:xe(T(r).e("content")),style:vr(F.title?void 0:{margin:0})},[kt(F.$slots,"default",{},()=>[F.dangerouslyUseHTMLString?(ve(),Ue(_r,{key:1},[wt(" Caution here, message could've been compromised, never use user's input as message "),rt("p",{innerHTML:F.message},null,8,BZe)],2112)):(ve(),Ue("p",IZe,Nn(F.message),1))])],6),[[Hs,F.message]]),F.showClose?(ve(),qt(T(mr),{key:0,class:xe(T(r).e("closeBtn")),onClick:qr(I,["stop"])},{default:It(()=>[pt(T(l))]),_:1},8,["class","onClick"])):wt("v-if",!0)],2)],46,SZe),[[Hs,o.value]])]),_:3},8,["name","onBeforeLeave"]))}});var RZe=Fn(LZe,[["__file","notification.vue"]]);const EO={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},d8=16;let PZe=1;const XC=function(t={},e=null){if(!As)return{close:()=>{}};(typeof t=="string"||ya(t))&&(t={message:t});const n=t.position||"top-right";let r=t.offset||0;EO[n].forEach(({vm:p})=>{var A;r+=(((A=p.el)==null?void 0:A.offsetHeight)||0)+d8}),r+=d8;const i=`notification_${PZe++}`,s=t.onClose,a={...t,offset:r,id:i,onClose:()=>{FZe(i,n,s)}};let l=document.body;Ep(t.appendTo)?l=t.appendTo:Xr(t.appendTo)&&(l=document.querySelector(t.appendTo)),Ep(l)||(l=document.body);const o=document.createElement("div"),d=pt(RZe,a,ya(a.message)?{default:()=>a.message}:null);return d.appContext=e??XC._context,d.props.onDestroy=()=>{Yy(null,o)},Yy(d,o),EO[n].push({vm:d}),l.appendChild(o.firstElementChild),{close:()=>{d.component.exposed.visible.value=!1}}};Rde.forEach(t=>{XC[t]=(e={})=>((typeof e=="string"||ya(e))&&(e={message:e}),XC({...e,type:t}))});function FZe(t,e,n){const r=EO[e],i=r.findIndex(({vm:d})=>{var p;return((p=d.component)==null?void 0:p.props.id)===t});if(i===-1)return;const{vm:s}=r[i];if(!s)return;n==null||n(s);const a=s.el.offsetHeight,l=e.split("-")[0];r.splice(i,1);const o=r.length;if(!(o<1))for(let d=i;d<o;d++){const{el:p,component:A}=r[d].vm,v=Number.parseInt(p.style[l],10)-a-d8;A.props.offset=v}}function OZe(){for(const t of Object.values(EO))t.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}XC.closeAll=OZe;XC._context=null;const NZe=kle(XC,"$notify");var kZe=[HXe,WXe,cZe,xZe,NZe,Ahe],DZe=M2e([...NXe,...kZe]);class Kh{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function UZe(t){t.stopPropagation()}const Ib={PROPERTYCHANGE:"propertychange"};class T2{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function zZe(t,e,n){let r,i;n=n||Zg;let s=0,a=t.length,l=!1;for(;s<a;)r=s+(a-s>>1),i=+n(t[r],e),i<0?s=r+1:(a=r,l=!i);return l?s:~s}function Zg(t,e){return t>e?1:t<e?-1:0}function $Ze(t,e){return t<e?1:t>e?-1:0}function I2(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const s=t[i];if(s===e)return i;if(s<e)return n(e,t[i-1],s)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function VZe(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function yo(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function pm(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function HZe(t,e,n){const r=e||Zg;return t.every(function(i,s){if(s===0)return!0;const a=r(t[s-1],i);return!(a>0||a===0)})}function Xv(){return!0}function Vb(){return!1}function ZC(){}function Pde(t){let e=!1,n,r,i;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==i||!pm(s,r))&&(e=!0,i=this,r=s,n=t.apply(this,arguments)),n}}function QH(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function Hb(t){for(const e in t)delete t[e]}function Zv(t){let e;for(e in t)return!1;return!e}class LE extends T2{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=n?new Kh(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,l[r]=0),++a[r];let o;for(let d=0,p=i.length;d<p;++d)if("handleEvent"in i[d]?o=i[d].handleEvent(s):o=i[d].call(this,s),o===!1||s.propagationStopped){o=!1;break}if(--a[r]===0){let d=l[r];for(delete l[r];d--;)this.removeEventListener(r,ZC);delete a[r]}return o}disposeInternal(){this.listeners_&&Hb(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=ZC,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}const pi={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Yi(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){const a=n;n=function(){t.removeEventListener(e,n),a.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function nB(t,e,n,r){return Yi(t,e,n,r,!0)}function xo(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Hb(t))}class nM extends LE{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(pi.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Yi(this,e[s],n);return i}return Yi(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=nB(this,e[s],n)}else r=nB(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)Rf(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}nM.prototype.on;nM.prototype.once;nM.prototype.un;function Rf(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)xo(t[e]);else xo(t)}function Xi(){throw new Error("Unimplemented abstract method.")}let GZe=0;function Vr(t){return t.ol_uid||(t.ol_uid=String(++GZe))}const QZe="9.1.0";class IJ extends Kh{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class Od extends nM{constructor(e){super(),this.on,this.once,this.un,Vr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new IJ(r,e,n)),r=Ib.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new IJ(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const s=i[e];i[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Zv(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}function zs(t,e){if(!t)throw new Error(e)}class Ys extends Od{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Ys(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(xo(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Yi(e,pi.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?jZe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function jZe(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(zs(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}const jH=new Array(6);function Ya(){return[1,0,0,1,0,0]}function f8(t){return B2(t,1,0,0,1,0,0)}function Gb(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],l=t[5],o=e[0],d=e[1],p=e[2],A=e[3],v=e[4],y=e[5];return t[0]=n*o+i*d,t[1]=r*o+s*d,t[2]=n*p+i*A,t[3]=r*p+s*A,t[4]=n*v+i*y+a,t[5]=r*v+s*y+l,t}function B2(t,e,n,r,i,s,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=a,t}function Fde(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ta(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function KZe(t,e){const n=Math.cos(e),r=Math.sin(e);return Gb(t,B2(jH,n,r,-r,n,0,0))}function ZT(t,e,n){return Gb(t,B2(jH,e,0,0,n,0,0))}function M2(t,e,n){return Gb(t,B2(jH,1,0,0,1,e,n))}function Hh(t,e,n,r,i,s,a,l){const o=Math.sin(s),d=Math.cos(s);return t[0]=r*d,t[1]=i*o,t[2]=-r*o,t[3]=i*d,t[4]=a*r*d-l*r*o+e,t[5]=a*i*o+l*i*d+n,t}function a_(t,e){const n=WZe(e);zs(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],l=e[4],o=e[5];return t[0]=a/n,t[1]=-i/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*o-a*l)/n,t[5]=-(r*o-i*l)/n,t}function WZe(t){return t[0]*t[3]-t[1]*t[2]}const BJ=[1e6,1e6,1e6,1e6,2,2];function KH(t){return"matrix("+t.map((n,r)=>Math.round(n*BJ[r])/BJ[r]).join(", ")+")"}const mu={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function sc(t){const e=Ql();for(let n=0,r=t.length;n<r;++n)ob(e,t[n]);return e}function qZe(t,e,n){const r=Math.min.apply(null,t),i=Math.min.apply(null,e),s=Math.max.apply(null,t),a=Math.max.apply(null,e);return Ff(r,i,s,a,n)}function Oc(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function WH(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function S_(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function DA(t,e){return L2(t,e[0],e[1])}function Cd(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function L2(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function SO(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],a=e[0],l=e[1];let o=mu.UNKNOWN;return a<n?o=o|mu.LEFT:a>i&&(o=o|mu.RIGHT),l<r?o=o|mu.BELOW:l>s&&(o=o|mu.ABOVE),o===mu.UNKNOWN&&(o=mu.INTERSECTING),o}function Ql(){return[1/0,1/0,-1/0,-1/0]}function Ff(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function f0(t){return Ff(1/0,1/0,-1/0,-1/0,t)}function ib(t,e){const n=t[0],r=t[1];return Ff(n,r,n,r,e)}function YZe(t,e){const n=f0(e);return qH(n,t)}function R2(t,e,n,r,i){const s=f0(i);return YH(s,t,e,n,r)}function XZe(t,e){const n=f0(e);return Ode(n,t)}function UA(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ZZe(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function sb(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function ob(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function qH(t,e){for(let n=0,r=e.length;n<r;++n)ob(t,e[n]);return t}function YH(t,e,n,r,i){for(;n<r;n+=i)Nde(t,e[n],e[n+1]);return t}function Ode(t,e){for(let n=0,r=e.length;n<r;++n)qH(t,e[n]);return t}function Nde(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function P2(t,e){let n;return n=e(rM(t)),n||(n=e(RE(t)),n)||(n=e(iM(t)),n)||(n=e(KA(t)),n)?n:!1}function Bb(t){let e=0;return Am(t)||(e=no(t)*Xa(t)),e}function rM(t){return[t[0],t[1]]}function RE(t){return[t[2],t[1]]}function Gu(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function kde(t,e){let n;if(e==="bottom-left")n=rM(t);else if(e==="bottom-right")n=RE(t);else if(e==="top-left")n=KA(t);else if(e==="top-right")n=iM(t);else throw new Error("Invalid corner");return n}function JZe(t,e){const n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),i=Math.max(t[2],e[2]),s=Math.max(t[3],e[3]);return(i-n)*(s-r)}function JC(t,e,n,r,i){const[s,a,l,o,d,p,A,v]=TO(t,e,n,r);return Ff(Math.min(s,l,d,A),Math.min(a,o,p,v),Math.max(s,l,d,A),Math.max(a,o,p,v),i)}function TO(t,e,n,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(n),l=Math.sin(n),o=i*a,d=i*l,p=s*a,A=s*l,v=t[0],y=t[1];return[v-o+A,y-d-p,v-o-A,y-d+p,v+o-A,y+d+p,v+o+A,y+d-p,v-o+A,y-d-p]}function Xa(t){return t[3]-t[1]}function eJe(t,e){const n=wu(t,e);return Bb(n)}function wu(t,e,n){const r=n||Ql();return Ua(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):f0(r),r}function tJe(t){return no(t)+Xa(t)}function nJe(t){return[t[2]-t[0],t[3]-t[1]]}function KA(t){return[t[0],t[3]]}function iM(t){return[t[2],t[3]]}function no(t){return t[2]-t[0]}function Ua(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Am(t){return t[2]<t[0]||t[3]<t[1]}function Dde(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function XH(t,e){const n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}function Ude(t,e,n){let r=!1;const i=SO(t,e),s=SO(t,n);if(i===mu.INTERSECTING||s===mu.INTERSECTING)r=!0;else{const a=t[0],l=t[1],o=t[2],d=t[3],p=e[0],A=e[1],v=n[0],y=n[1],C=(y-A)/(v-p);let x,M;s&mu.ABOVE&&!(i&mu.ABOVE)&&(x=v-(y-d)/C,r=x>=a&&x<=o),!r&&s&mu.RIGHT&&!(i&mu.RIGHT)&&(M=y-(v-o)*C,r=M>=l&&M<=d),!r&&s&mu.BELOW&&!(i&mu.BELOW)&&(x=v-(y-l)/C,r=x>=a&&x<=o),!r&&s&mu.LEFT&&!(i&mu.LEFT)&&(M=y-(v-a)*C,r=M>=l&&M<=d)}return r}function F2(t,e,n,r){if(Am(t))return f0(n);let i=[];if(r>1){const l=t[2]-t[0],o=t[3]-t[1];for(let d=0;d<r;++d)i.push(t[0]+l*d/r,t[1],t[2],t[1]+o*d/r,t[2]-l*d/r,t[3],t[0],t[3]-o*d/r)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);const s=[],a=[];for(let l=0,o=i.length;l<o;l+=2)s.push(i[l]),a.push(i[l+1]);return qZe(s,a,n)}function ZH(t,e){const n=e.getExtent(),r=Gu(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=no(n),a=Math.floor((r[0]-n[0])/i)*i;t[0]-=a,t[2]-=a}return t}function zde(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];ZH(t,e);const r=no(n);if(no(t)>r)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+r,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-r,t[3]]]}return[t]}const rJe=Object.freeze(Object.defineProperty({__proto__:null,applyTransform:F2,approximatelyEquals:ZZe,boundingExtent:sc,buffer:Oc,clone:WH,closestSquaredDistanceXY:S_,containsCoordinate:DA,containsExtent:Cd,containsXY:L2,coordinateRelationship:SO,createEmpty:Ql,createOrUpdate:Ff,createOrUpdateEmpty:f0,createOrUpdateFromCoordinate:ib,createOrUpdateFromCoordinates:YZe,createOrUpdateFromFlatCoordinates:R2,createOrUpdateFromRings:XZe,equals:UA,extend:sb,extendCoordinate:ob,extendCoordinates:qH,extendFlatCoordinates:YH,extendRings:Ode,extendXY:Nde,forEachCorner:P2,getArea:Bb,getBottomLeft:rM,getBottomRight:RE,getCenter:Gu,getCorner:kde,getEnlargedArea:JZe,getForViewAndSize:JC,getHeight:Xa,getIntersection:wu,getIntersectionArea:eJe,getMargin:tJe,getRotatedViewport:TO,getSize:nJe,getTopLeft:KA,getTopRight:iM,getWidth:no,intersects:Ua,intersectsSegment:Ude,isEmpty:Am,returnOrUpdate:Dde,scaleFromCenter:XH,wrapAndSliceX:zde,wrapX:ZH},Symbol.toStringTag,{value:"Module"})),iJe={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function MJ(t){return iJe[t]}const eE={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Jv=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||eE[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const sM=6378137,Vx=Math.PI*sM,sJe=[-Vx,-Vx,Vx,Vx],oJe=[-180,-85,180,85],CR=sM*Math.log(Math.tan(Math.PI/2));class Xw extends Jv{constructor(e){super({code:e,units:"m",extent:sJe,global:!0,worldExtent:oJe,getPointResolution:function(n,r){return n/Math.cosh(r[1]/sM)}})}}const LJ=[new Xw("EPSG:3857"),new Xw("EPSG:102100"),new Xw("EPSG:102113"),new Xw("EPSG:900913"),new Xw("http://www.opengis.net/def/crs/EPSG/0/3857"),new Xw("http://www.opengis.net/gml/srs/epsg.xml#3857")];function aJe(t,e,n){const r=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let i=0;i<r;i+=n){e[i]=Vx*t[i]/180;let s=sM*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));s>CR?s=CR:s<-CR&&(s=-CR),e[i+1]=s}return e}function lJe(t,e,n){const r=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let i=0;i<r;i+=n)e[i]=180*t[i]/Vx,e[i+1]=360*Math.atan(Math.exp(t[i+1]/sM))/Math.PI-90;return e}const cJe=6378137,RJ=[-180,-90,180,90],uJe=Math.PI*cJe/180;class y1 extends Jv{constructor(e,n){super({code:e,units:"degrees",extent:RJ,axisOrientation:n,global:!0,metersPerUnit:uJe,worldExtent:RJ})}}const PJ=[new y1("CRS:84"),new y1("EPSG:4326","neu"),new y1("urn:ogc:def:crs:OGC:1.3:CRS84"),new y1("urn:ogc:def:crs:OGC:2:84"),new y1("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new y1("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new y1("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let p8={};function hJe(t){return p8[t]||p8[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function dJe(t,e){p8[t]=e}let pC={};function tE(t,e,n){const r=t.getCode(),i=e.getCode();r in pC||(pC[r]={}),pC[r][i]=n}function $de(t,e){let n;return t in pC&&e in pC[t]&&(n=pC[t][e]),n}function va(t,e,n){return Math.min(Math.max(t,e),n)}function fJe(t,e,n,r,i,s){const a=i-n,l=s-r;if(a!==0||l!==0){const o=((t-n)*a+(e-r)*l)/(a*a+l*l);o>1?(n=i,r=s):o>0&&(n+=a*o,r+=l*o)}return Pv(t,e,n,r)}function Pv(t,e,n,r){const i=n-t,s=r-e;return i*i+s*s}function pJe(t){const e=t.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(t[r][r]);for(let l=r+1;l<e;l++){const o=Math.abs(t[l][r]);o>s&&(s=o,i=l)}if(s===0)return null;const a=t[i];t[i]=t[r],t[r]=a;for(let l=r+1;l<e;l++){const o=-t[l][r]/t[r][r];for(let d=r;d<e+1;d++)r==d?t[l][d]=0:t[l][d]+=o*t[r][d]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function FJ(t){return t*180/Math.PI}function Qy(t){return t*Math.PI/180}function Fv(t,e){const n=t%e;return n*e<0?n+e:n}function Tf(t,e,n){return t+n*(e-t)}function PE(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function IO(t,e){return Math.round(PE(t,e))}function Hx(t,e){return Math.floor(PE(t,e))}function Ry(t,e){return Math.ceil(PE(t,e))}function VS(t,e,n){const r=n!==void 0?t.toFixed(n):""+t;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function JH(t,e){const n=(""+t).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(n.length,r.length);i++){const s=parseInt(n[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function Vde(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function AJe(t,e){const n=e.getRadius(),r=e.getCenter(),i=r[0],s=r[1],a=t[0],l=t[1];let o=a-i;const d=l-s;o===0&&d===0&&(o=1);const p=Math.sqrt(o*o+d*d),A=i+n*o/p,v=s+n*d/p;return[A,v]}function eG(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],a=i[0],l=i[1],o=s[0],d=s[1],p=o-a,A=d-l,v=p===0&&A===0?0:(p*(n-a)+A*(r-l))/(p*p+A*A||0);let y,C;return v<=0?(y=a,C=l):v>=1?(y=o,C=d):(y=a+v*p,C=l+v*A),[y,C]}function CA(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function tG(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,s=t[1]*n+t[0]*r;return t[0]=i,t[1]=s,t}function Hde(t,e){return t[0]*=e,t[1]*=e,t}function Ov(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function BO(t,e){return Math.sqrt(Ov(t,e))}function gJe(t,e){return Ov(t,eG(t,e))}function O2(t,e){if(e.canWrapX()){const n=no(e.getExtent()),r=Gde(t,e,n);r&&(t[0]-=r*n)}return t}function Gde(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||no(r),i=Math.floor((t[0]-r[0])/n)),i}const Qde=63710088e-1;function rB(t,e,n){n=n||Qde;const r=Qy(t[1]),i=Qy(e[1]),s=(i-r)/2,a=Qy(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function mJe(t,e,n,r){r=r||Qde;const i=Qy(t[1]),s=Qy(t[0]),a=e/r,l=Math.asin(Math.sin(i)*Math.cos(a)+Math.cos(i)*Math.sin(a)*Math.cos(n)),o=s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(i),Math.cos(a)-Math.sin(i)*Math.sin(l));return[FJ(o),FJ(l)]}function jde(...t){console.warn(...t)}function OJ(...t){console.error(...t)}let A8=!0;function vJe(t){A8=!1}function nG(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function N2(t,e){if(e!==void 0&&t!==e){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function Kde(t){dJe(t.getCode(),t),tE(t,t,nG)}function yJe(t){t.forEach(Kde)}function Oi(t){return typeof t=="string"?hJe(t):t||null}function MO(t,e,n,r){t=Oi(t);let i;const s=t.getPointResolutionFunc();if(s){if(i=s(e,n),r&&r!==t.getUnits()){const a=t.getMetersPerUnit();a&&(i=i*a/eE[r])}}else{const a=t.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const l=T_(t,Oi("EPSG:4326"));if(l===N2&&a!=="degrees")i=e*t.getMetersPerUnit();else{let d=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];d=l(d,d,2);const p=rB(d.slice(0,2),d.slice(2,4)),A=rB(d.slice(4,6),d.slice(6,8));i=(p+A)/2}const o=r?eE[r]:t.getMetersPerUnit();o!==void 0&&(i/=o)}}return i}function g8(t){yJe(t),t.forEach(function(e){t.forEach(function(n){e!==n&&tE(e,n,nG)})})}function _Je(t,e,n,r){t.forEach(function(i){e.forEach(function(s){tE(i,s,n),tE(s,i,r)})})}function rG(t,e){return t?typeof t=="string"?Oi(t):t:Oi(e)}function NJ(t){return function(e,n,r){const i=e.length;r=r!==void 0?r:2,n=n!==void 0?n:new Array(i);for(let s=0;s<i;s+=r){const a=t(e.slice(s,s+r)),l=a.length;for(let o=0,d=r;o<d;++o)n[s+o]=o>=l?e[s+o]:a[o]}return n}}function bJe(t,e,n,r){const i=Oi(t),s=Oi(e);tE(i,s,NJ(n)),tE(s,i,NJ(r))}function bd(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||T_(t,e)===nG)&&n}function T_(t,e){const n=t.getCode(),r=e.getCode();let i=$de(n,r);return i||(i=N2),i}function nE(t,e){const n=Oi(t),r=Oi(e);return T_(n,r)}function am(t,e,n){return nE(e,n)(t,void 0,t.length)}function m8(t,e,n,r){const i=nE(e,n);return F2(t,i,void 0,r)}let wJe=null;function xJe(){return wJe}function l_(t,e){return t}function ol(t,e){return A8&&!CA(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(A8=!1,jde("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function Qb(t,e){return t}function Ed(t,e){return t}function CJe(t,e){return t}function kJ(t,e,n){return function(r){let i,s;if(t.canWrapX()){const a=t.getExtent(),l=no(a);r=r.slice(0),s=Gde(r,t,l),s&&(r[0]=r[0]-s*l),r[0]=va(r[0],a[0],a[2]),r[1]=va(r[1],a[1],a[3]),i=n(r)}else i=n(r);return s&&e.canWrapX()&&(i[0]+=s*no(e.getExtent())),i}}function EJe(){g8(LJ),g8(PJ),_Je(PJ,LJ,aJe,lJe)}EJe();function Jg(t,e,n,r,i,s){s=s||[];let a=0;for(let l=e;l<n;l+=r){const o=t[l],d=t[l+1];s[a++]=i[0]*o+i[2]*d+i[4],s[a++]=i[1]*o+i[3]*d+i[5]}return s&&s.length!=a&&(s.length=a),s}function iG(t,e,n,r,i,s,a){a=a||[];const l=Math.cos(i),o=Math.sin(i),d=s[0],p=s[1];let A=0;for(let v=e;v<n;v+=r){const y=t[v]-d,C=t[v+1]-p;a[A++]=d+y*l-C*o,a[A++]=p+y*o+C*l;for(let x=v+2;x<v+r;++x)a[A++]=t[x]}return a&&a.length!=A&&(a.length=A),a}function SJe(t,e,n,r,i,s,a,l){l=l||[];const o=a[0],d=a[1];let p=0;for(let A=e;A<n;A+=r){const v=t[A]-o,y=t[A+1]-d;l[p++]=o+i*v,l[p++]=d+s*y;for(let C=A+2;C<A+r;++C)l[p++]=t[C]}return l&&l.length!=p&&(l.length=p),l}function TJe(t,e,n,r,i,s,a){a=a||[];let l=0;for(let o=e;o<n;o+=r){a[l++]=t[o]+i,a[l++]=t[o+1]+s;for(let d=o+2;d<o+r;++d)a[l++]=t[d]}return a&&a.length!=l&&(a.length=l),a}const DJ=Ya();class k2 extends Od{constructor(){super(),this.extent_=Ql(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Pde((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return Xi()}closestPointXY(e,n,r,i){return Xi()}containsXY(e,n){const r=this.getClosestPoint([e,n]);return r[0]===e&&r[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Xi()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&f0(n),this.extentRevision_=this.getRevision()}return Dde(this.extent_,e)}rotate(e,n){Xi()}scale(e,n,r){Xi()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Xi()}getType(){return Xi()}applyTransform(e){Xi()}intersectsExtent(e){return Xi()}translate(e,n){Xi()}transform(e,n){const r=Oi(e),i=r.getUnits()=="tile-pixels"?function(s,a,l){const o=r.getExtent(),d=r.getWorldExtent(),p=Xa(d)/Xa(o);return Hh(DJ,d[0],d[3],p,-p,0,0,0),Jg(s,0,s.length,l,DJ,a),nE(r,n)(s,a,l)}:nE(r,n);return this.applyTransform(i),this}}class zA extends k2{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return R2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Xi()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=iB(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){Xi()}setLayout(e,n,r){let i;if(e)i=iB(e);else{for(let s=0;s<r;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=jb(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();iG(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=Gu(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();SJe(i,0,i.length,s,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();TJe(r,0,r.length,i,e,n,r),this.changed()}}}function jb(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function iB(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function IJe(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return Jg(r,0,r.length,i,e,n)}function UJ(t,e,n,r,i,s,a){const l=t[e],o=t[e+1],d=t[n]-l,p=t[n+1]-o;let A;if(d===0&&p===0)A=e;else{const v=((i-l)*d+(s-o)*p)/(d*d+p*p);if(v>1)A=n;else if(v>0){for(let y=0;y<r;++y)a[y]=Tf(t[e+y],t[n+y],v);a.length=r;return}else A=e}for(let v=0;v<r;++v)a[v]=t[A+v];a.length=r}function sG(t,e,n,r,i){let s=t[e],a=t[e+1];for(e+=r;e<n;e+=r){const l=t[e],o=t[e+1],d=Pv(s,a,l,o);d>i&&(i=d),s=l,a=o}return i}function oG(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){const l=n[s];i=sG(t,e,l,r,i),e=l}return i}function BJe(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){const l=n[s];i=oG(t,e,l,r,i),e=l[l.length-1]}return i}function aG(t,e,n,r,i,s,a,l,o,d,p){if(e==n)return d;let A,v;if(i===0){if(v=Pv(a,l,t[e],t[e+1]),v<d){for(A=0;A<r;++A)o[A]=t[e+A];return o.length=r,v}return d}p=p||[NaN,NaN];let y=e+r;for(;y<n;)if(UJ(t,y-r,y,r,a,l,p),v=Pv(a,l,p[0],p[1]),v<d){for(d=v,A=0;A<r;++A)o[A]=p[A];o.length=r,y+=r}else y+=r*Math.max((Math.sqrt(v)-Math.sqrt(d))/i|0,1);if(s&&(UJ(t,n-r,e,r,a,l,p),v=Pv(a,l,p[0],p[1]),v<d)){for(d=v,A=0;A<r;++A)o[A]=p[A];o.length=r}return d}function lG(t,e,n,r,i,s,a,l,o,d,p){p=p||[NaN,NaN];for(let A=0,v=n.length;A<v;++A){const y=n[A];d=aG(t,e,y,r,i,s,a,l,o,d,p),e=y}return d}function MJe(t,e,n,r,i,s,a,l,o,d,p){p=p||[NaN,NaN];for(let A=0,v=n.length;A<v;++A){const y=n[A];d=lG(t,e,y,r,i,s,a,l,o,d,p),e=y[y.length-1]}return d}function Wde(t,e,n,r){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}function oM(t,e,n,r){for(let i=0,s=n.length;i<s;++i){const a=n[i];for(let l=0;l<r;++l)t[e++]=a[l]}return e}function aM(t,e,n,r,i){i=i||[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=oM(t,e,n[a],r);i[s++]=o,e=o}return i.length=s,i}function qde(t,e,n,r,i){i=i||[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=aM(t,e,n[a],r,i[s]);o.length===0&&(o[0]=e),i[s++]=o,e=o[o.length-1]}return i.length=s,i}function D2(t,e,n,r,i,s,a){const l=(n-e)/r;if(l<3){for(;e<n;e+=r)s[a++]=t[e],s[a++]=t[e+1];return a}const o=new Array(l);o[0]=1,o[l-1]=1;const d=[e,n-r];let p=0;for(;d.length>0;){const A=d.pop(),v=d.pop();let y=0;const C=t[v],x=t[v+1],M=t[A],I=t[A+1];for(let P=v+r;P<A;P+=r){const F=t[P],D=t[P+1],V=fJe(F,D,C,x,M,I);V>y&&(p=P,y=V)}y>i&&(o[(p-e)/r]=1,v+r<p&&d.push(v,p),p+r<A&&d.push(p,A))}for(let A=0;A<l;++A)o[A]&&(s[a++]=t[e+A*r],s[a++]=t[e+A*r+1]);return a}function Yde(t,e,n,r,i,s,a,l){for(let o=0,d=n.length;o<d;++o){const p=n[o];a=D2(t,e,p,r,i,s,a),l.push(a),e=p}return a}function T1(t,e){return e*Math.round(t/e)}function LJe(t,e,n,r,i,s,a){if(e==n)return a;let l=T1(t[e],i),o=T1(t[e+1],i);e+=r,s[a++]=l,s[a++]=o;let d,p;do if(d=T1(t[e],i),p=T1(t[e+1],i),e+=r,e==n)return s[a++]=d,s[a++]=p,a;while(d==l&&p==o);for(;e<n;){const A=T1(t[e],i),v=T1(t[e+1],i);if(e+=r,A==d&&v==p)continue;const y=d-l,C=p-o,x=A-l,M=v-o;if(y*M==C*x&&(y<0&&x<y||y==x||y>0&&x>y)&&(C<0&&M<C||C==M||C>0&&M>C)){d=A,p=v;continue}s[a++]=d,s[a++]=p,l=d,o=p,d=A,p=v}return s[a++]=d,s[a++]=p,a}function cG(t,e,n,r,i,s,a,l){for(let o=0,d=n.length;o<d;++o){const p=n[o];a=LJe(t,e,p,r,i,s,a),l.push(a),e=p}return a}function RJe(t,e,n,r,i,s,a,l){for(let o=0,d=n.length;o<d;++o){const p=n[o],A=[];a=cG(t,e,p,r,i,s,a,A),l.push(A),e=p[p.length-1]}return a}function Iv(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<n;a+=r)i[s++]=t.slice(a,a+r);return i.length=s,i}function sB(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a];i[s++]=Iv(t,e,o,r,i[s]),e=o}return i.length=s,i}function v8(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a];i[s++]=o.length===1&&o[0]===e?[]:sB(t,e,o,r,i[s]),e=o[o.length-1]}return i.length=s,i}function Xde(t,e,n,r){let i=0,s=t[n-r],a=t[n-r+1];for(;e<n;e+=r){const l=t[e],o=t[e+1];i+=a*l-s*o,s=l,a=o}return i/2}function Zde(t,e,n,r){let i=0;for(let s=0,a=n.length;s<a;++s){const l=n[s];i+=Xde(t,e,l,r),e=l}return i}function PJe(t,e,n,r){let i=0;for(let s=0,a=n.length;s<a;++s){const l=n[s];i+=Zde(t,e,l,r),e=l[l.length-1]}return i}class e0 extends zA{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new e0(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<S_(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return Xde(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Iv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=D2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new e0(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oM(this.flatCoordinates,0,e,this.stride),this.changed()}}let So=class Jde extends zA{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Jde(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,a=Pv(e,n,s[0],s[1]);if(a<i){const l=this.stride;for(let o=0;o<l;++o)r[o]=s[o];return r.length=l,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return ib(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return L2(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Wde(this.flatCoordinates,0,e,this.stride),this.changed()}};function FJe(t,e,n,r,i){return!P2(i,function(a){return!Q1(t,e,n,r,a[0],a[1])})}function Q1(t,e,n,r,i,s){let a=0,l=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const d=t[e],p=t[e+1];o<=s?p>s&&(d-l)*(s-o)-(i-l)*(p-o)>0&&a++:p<=s&&(d-l)*(s-o)-(i-l)*(p-o)<0&&a--,l=d,o=p}return a!==0}function uG(t,e,n,r,i,s){if(n.length===0||!Q1(t,e,n[0],r,i,s))return!1;for(let a=1,l=n.length;a<l;++a)if(Q1(t,n[a-1],n[a],r,i,s))return!1;return!0}function OJe(t,e,n,r,i,s){if(n.length===0)return!1;for(let a=0,l=n.length;a<l;++a){const o=n[a];if(uG(t,e,o,r,i,s))return!0;e=o[o.length-1]}return!1}function hG(t,e,n,r,i,s,a){let l,o,d,p,A,v,y;const C=i[s+1],x=[];for(let P=0,F=n.length;P<F;++P){const D=n[P];for(p=t[D-r],v=t[D-r+1],l=e;l<D;l+=r)A=t[l],y=t[l+1],(C<=v&&y<=C||v<=C&&C<=y)&&(d=(C-v)/(y-v)*(A-p)+p,x.push(d)),p=A,v=y}let M=NaN,I=-1/0;for(x.sort(Zg),p=x[0],l=1,o=x.length;l<o;++l){A=x[l];const P=Math.abs(A-p);P>I&&(d=(p+A)/2,uG(t,e,n,r,d,C)&&(M=d,I=P)),p=A}return isNaN(M)&&(M=i[s]),a?(a.push(M,C,I),a):[M,C,I]}function efe(t,e,n,r,i){let s=[];for(let a=0,l=n.length;a<l;++a){const o=n[a];s=hG(t,e,o,r,i,2*a,s),e=o[o.length-1]}return s}function tfe(t,e,n,r,i){let s;for(e+=r;e<n;e+=r)if(s=i(t.slice(e-r,e),t.slice(e,e+r)),s)return s;return!1}function U2(t,e,n,r,i){const s=YH(Ql(),t,e,n,r);return Ua(i,s)?Cd(i,s)||s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:tfe(t,e,n,r,function(a,l){return Ude(i,a,l)}):!1}function NJe(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){if(U2(t,e,n[s],r,i))return!0;e=n[s]}return!1}function nfe(t,e,n,r,i){return!!(U2(t,e,n,r,i)||Q1(t,e,n,r,i[0],i[1])||Q1(t,e,n,r,i[0],i[3])||Q1(t,e,n,r,i[2],i[1])||Q1(t,e,n,r,i[2],i[3]))}function rfe(t,e,n,r,i){if(!nfe(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let s=1,a=n.length;s<a;++s)if(FJe(t,n[s-1],n[s],r,i)&&!U2(t,n[s-1],n[s],r,i))return!1;return!0}function kJe(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){const l=n[s];if(rfe(t,e,l,r,i))return!0;e=l[l.length-1]}return!1}function DJe(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const s=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=s}e+=r,n-=r}}function z2(t,e,n,r){let i=0,s=t[n-r],a=t[n-r+1];for(;e<n;e+=r){const l=t[e],o=t[e+1];i+=(l-s)*(o+a),s=l,a=o}return i===0?void 0:i>0}function dG(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,a=n.length;s<a;++s){const l=n[s],o=z2(t,e,l,r);if(s===0){if(i&&o||!i&&!o)return!1}else if(i&&!o||!i&&o)return!1;e=l}return!0}function ife(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){const l=n[s];if(!dG(t,e,l,r,i))return!1;l.length&&(e=l[l.length-1])}return!0}function LO(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,a=n.length;s<a;++s){const l=n[s],o=z2(t,e,l,r);(s===0?i&&o||!i&&!o:i&&!o||!i&&o)&&DJe(t,e,l,r),e=l}return e}function y8(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s)e=LO(t,e,n[s],r,i);return e}function fG(t,e){const n=[];let r=0,i=0,s;for(let a=0,l=e.length;a<l;++a){const o=e[a],d=z2(t,r,o,2);if(s===void 0&&(s=d),d===s)n.push(e.slice(i,a+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=a+1,r=o}return n}class La extends zA{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?yo(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new La(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<S_(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return uG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return Zde(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),LO(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,sB(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Gu(this.getExtent());this.flatInteriorPoint_=hG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new So(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new e0(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,l=r.length;a<l;++a){const o=r[a],d=new e0(n.slice(s,o),e);i.push(d),s=o}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;dG(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=LO(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=cG(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new La(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return rfe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=aM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function UJe(t,e,n,r){n=n||32;const i=[];for(let s=0;s<n;++s)yo(i,mJe(t,e,2*Math.PI*s/n,r));return i.push(i[0],i[1]),new La(i,"XY",[i.length])}function Py(t){if(Am(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],s=[e,n,e,i,r,i,r,n,e,n];return new La(s,"XY",[s.length])}function zJe(t,e,n){e=e||32;const r=t.getStride(),i=t.getLayout(),s=t.getCenter(),a=r*(e+1),l=new Array(a);for(let p=0;p<a;p+=r){l[p]=0,l[p+1]=0;for(let A=2;A<r;A++)l[p+A]=s[A]}const o=[l.length],d=new La(l,i,o);return $Je(d,s,t.getRadius()),d}function $Je(t,e,n,r){const i=t.getFlatCoordinates(),s=t.getStride(),a=i.length/s-1,l=0;for(let o=0;o<=a;++o){const d=o*s,p=l+Fv(o,a)*2*Math.PI/a;i[d]=e[0]+n*Math.cos(p),i[d+1]=e[1]+n*Math.sin(p)}t.changed()}const bl={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},VJe={ERROR:"error"};class HJe extends Kh{constructor(e){super(VJe.ERROR),this.code=e.code,this.message=e.message}}class GJe extends Od{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=N2,this.watchId_=void 0,this.addChangeListener(bl.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(bl.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=T_(Oi("EPSG:4326"),e),this.position_&&this.set(bl.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const n=e.coords;this.set(bl.ACCURACY,n.accuracy),this.set(bl.ALTITUDE,n.altitude===null?void 0:n.altitude),this.set(bl.ALTITUDE_ACCURACY,n.altitudeAccuracy===null?void 0:n.altitudeAccuracy),this.set(bl.HEADING,n.heading===null?void 0:Qy(n.heading)),this.position_?(this.position_[0]=n.longitude,this.position_[1]=n.latitude):this.position_=[n.longitude,n.latitude];const r=this.transform_(this.position_);this.set(bl.POSITION,r.slice()),this.set(bl.SPEED,n.speed===null?void 0:n.speed);const i=UJe(this.position_,n.accuracy);i.applyTransform(this.transform_),this.set(bl.ACCURACY_GEOMETRY,i),this.changed()}positionError_(e){this.dispatchEvent(new HJe(e))}getAccuracy(){return this.get(bl.ACCURACY)}getAccuracyGeometry(){return this.get(bl.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(bl.ALTITUDE)}getAltitudeAccuracy(){return this.get(bl.ALTITUDE_ACCURACY)}getHeading(){return this.get(bl.HEADING)}getPosition(){return this.get(bl.POSITION)}getProjection(){return this.get(bl.PROJECTION)}getSpeed(){return this.get(bl.SPEED)}getTracking(){return this.get(bl.TRACKING)}getTrackingOptions(){return this.get(bl.TRACKING_OPTIONS)}setProjection(e){this.set(bl.PROJECTION,Oi(e))}setTracking(e){this.set(bl.TRACKING,e)}setTrackingOptions(e){this.set(bl.TRACKING_OPTIONS,e)}}const zl={ADD:"add",REMOVE:"remove"},zJ={LENGTH:"length"};class ER extends Kh{constructor(e,n,r){super(e),this.element=n,this.index=r}}class _u extends Od{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(zJ.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new ER(zl.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ER(zl.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new ER(zl.REMOVE,i,e)),this.dispatchEvent(new ER(zl.ADD,n,e))}updateLength_(){this.set(zJ.LENGTH,this.array_.length)}assertUnique_(e,n){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==n)throw new Error("Duplicate item added to a unique collection")}}const Jo={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class pG extends Od{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[Jo.OPACITY]=e.opacity!==void 0?e.opacity:1,zs(typeof n[Jo.OPACITY]=="number","Layer opacity must be a number"),n[Jo.VISIBLE]=e.visible!==void 0?e.visible:!0,n[Jo.Z_INDEX]=e.zIndex,n[Jo.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[Jo.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[Jo.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[Jo.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=va(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return Xi()}getLayerStatesArray(e){return Xi()}getExtent(){return this.get(Jo.EXTENT)}getMaxResolution(){return this.get(Jo.MAX_RESOLUTION)}getMinResolution(){return this.get(Jo.MIN_RESOLUTION)}getMinZoom(){return this.get(Jo.MIN_ZOOM)}getMaxZoom(){return this.get(Jo.MAX_ZOOM)}getOpacity(){return this.get(Jo.OPACITY)}getSourceState(){return Xi()}getVisible(){return this.get(Jo.VISIBLE)}getZIndex(){return this.get(Jo.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Jo.EXTENT,e)}setMaxResolution(e){this.set(Jo.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Jo.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Jo.MAX_ZOOM,e)}setMinZoom(e){this.set(Jo.MIN_ZOOM,e)}setOpacity(e){zs(typeof e=="number","Layer opacity must be a number"),this.set(Jo.OPACITY,e)}setVisible(e){this.set(Jo.VISIBLE,e)}setZIndex(e){this.set(Jo.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const yu={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},da={ANIMATING:0,INTERACTING:1},Cf={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},sfe=42,AG=256;function $J(t,e,n){return function(r,i,s,a,l){if(!r)return;if(!i&&!e)return r;const o=e?0:s[0]*i,d=e?0:s[1]*i,p=l?l[0]:0,A=l?l[1]:0;let v=t[0]+o/2+p,y=t[2]-o/2+p,C=t[1]+d/2+A,x=t[3]-d/2+A;v>y&&(v=(y+v)/2,y=v),C>x&&(C=(x+C)/2,x=C);let M=va(r[0],v,y),I=va(r[1],C,x);if(a&&n&&i){const P=30*i;M+=-P*Math.log(1+Math.max(0,v-r[0])/P)+P*Math.log(1+Math.max(0,r[0]-y)/P),I+=-P*Math.log(1+Math.max(0,C-r[1])/P)+P*Math.log(1+Math.max(0,r[1]-x)/P)}return[M,I]}}function QJe(t){return t}function gG(t,e,n,r){const i=no(e)/n[0],s=Xa(e)/n[1];return r?Math.min(t,Math.max(i,s)):Math.min(t,Math.min(i,s))}function mG(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),va(r,n/2,e*2)}function jJe(t,e,n,r){return e=e!==void 0?e:!0,function(i,s,a,l){if(i!==void 0){const o=t[0],d=t[t.length-1],p=n?gG(o,n,a,r):o;if(l)return e?mG(i,p,d):va(i,d,p);const A=Math.min(p,i),v=Math.floor(I2(t,A,s));return t[v]>p&&v<t.length-1?t[v+1]:t[v]}}}function KJe(t,e,n,r,i,s){return r=r!==void 0?r:!0,n=n!==void 0?n:0,function(a,l,o,d){if(a!==void 0){const p=i?gG(e,i,o,s):e;if(d)return r?mG(a,p,n):va(a,n,p);const A=1e-9,v=Math.ceil(Math.log(e/p)/Math.log(t)-A),y=-l*(.5-A)+.5,C=Math.min(p,a),x=Math.floor(Math.log(e/C)/Math.log(t)+y),M=Math.max(v,x),I=e/Math.pow(t,M);return va(I,n,p)}}}function VJ(t,e,n,r,i){return n=n!==void 0?n:!0,function(s,a,l,o){if(s!==void 0){const d=r?gG(t,r,l,i):t;return!n||!o?va(s,e,d):mG(s,d,e)}}}function vG(t){if(t!==void 0)return 0}function HJ(t){if(t!==void 0)return t}function WJe(t){const e=2*Math.PI/t;return function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function qJe(t){const e=Qy(5);return function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n}}function yG(t){return Math.pow(t,3)}function Mp(t){return 1-yG(1-t)}function RO(t){return 3*t*t-2*t*t*t}function _G(t){return t}function YJe(t){return t<.5?RO(2*t):1-RO(2*(t-.5))}const XJe=Object.freeze(Object.defineProperty({__proto__:null,easeIn:yG,easeOut:Mp,inAndOut:RO,linear:_G,upAndDown:YJe},Symbol.toStringTag,{value:"Module"})),u4=0;class hp extends Od{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rG(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&vJe(),e.center&&(e.center=ol(e.center,this.projection_)),e.extent&&(e.extent=Ed(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const l in Cf)delete n[l];this.setProperties(n,!0);const r=JJe(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=ZJe(e),s=r.constraint,a=eet(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-n[3]+n[1]-i[1]),l=s/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-l])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=ol(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ol(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const p=arguments[i];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(i===n){r&&SR(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),l=this.targetResolution_,o=this.targetRotation_;const d=[];for(;i<n;++i){const p=arguments[i],A={start:s,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||RO,callback:r};if(p.center&&(A.sourceCenter=a,A.targetCenter=p.center.slice(),a=A.targetCenter),p.zoom!==void 0?(A.sourceResolution=l,A.targetResolution=this.getResolutionForZoom(p.zoom),l=A.targetResolution):p.resolution&&(A.sourceResolution=l,A.targetResolution=p.resolution,l=A.targetResolution),p.rotation!==void 0){A.sourceRotation=o;const v=Fv(p.rotation-o+Math.PI,2*Math.PI)-Math.PI;A.targetRotation=o+v,o=A.targetRotation}tet(A)?A.complete=!0:s+=A.duration,d.push(A)}this.animations_.push(d),this.setHint(da.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[da.ANIMATING]>0}getInteracting(){return this.hints_[da.INTERACTING]>0}cancelAnimations(){this.setHint(da.ANIMATING,-this.hints_[da.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&SR(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const l=i[s];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,l=i.length;a<l;++a){const o=i[a];if(o.complete)continue;const d=e-o.start;let p=o.duration>0?d/o.duration:1;p>=1?(o.complete=!0,p=1):s=!1;const A=o.easing(p);if(o.sourceCenter){const v=o.sourceCenter[0],y=o.sourceCenter[1],C=o.targetCenter[0],x=o.targetCenter[1];this.nextCenter_=o.targetCenter;const M=v+A*(C-v),I=y+A*(x-y);this.targetCenter_=[M,I]}if(o.sourceResolution&&o.targetResolution){const v=A===1?o.targetResolution:o.sourceResolution+A*(o.targetResolution-o.sourceResolution);if(o.anchor){const y=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(v,0,y,!0);this.targetCenter_=this.calculateCenterZoom(C,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(o.sourceRotation!==void 0&&o.targetRotation!==void 0){const v=A===1?Fv(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+A*(o.targetRotation-o.sourceRotation);if(o.anchor){const y=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(y,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),n=!0,!o.complete)break}if(s){this.animations_[r]=null,this.setHint(da.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&SR(a,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],tG(r,e-this.getRotation()),Vde(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=n[0]-e*(n[0]-i[0])/s,l=n[1]-e*(n[1]-i[1])/s;r=[a,l]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&l_(e,this.getProjection())}getCenterInternal(){return this.get(Cf.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return Qb(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();zs(n,"The view center is not defined");const r=this.getResolution();zs(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return zs(i!==void 0,"The view rotation is not defined"),JC(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Cf.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Ed(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=no(e)/n[0],i=Xa(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(s){return n/Math.pow(e,s*i)}}getRotation(){return this.get(Cf.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/n;return function(a){return Math.log(r/a)/n/s}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=h4(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const s=I2(this.resolutions_,e,1);n=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=va(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,va(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(zs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){zs(!Am(e),"Cannot fit empty extent provided as `geometry`");const i=Ed(e,this.getProjection());r=Py(i)}else if(e.getType()==="Circle"){const i=Ed(e.getExtent(),this.getProjection());r=Py(i),r.rotate(this.getRotation(),Gu(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),s=e.getFlatCoordinates(),a=e.getStride();let l=1/0,o=1/0,d=-1/0,p=-1/0;for(let A=0,v=s.length;A<v;A+=a){const y=s[A]*r-s[A+1]*i,C=s[A]*i+s[A+1]*r;l=Math.min(l,y),o=Math.min(o,C),d=Math.max(d,y),p=Math.max(p,C)}return[l,o,d,p]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let a;n.minResolution!==void 0?a=n.minResolution:n.maxZoom!==void 0?a=this.getResolutionForZoom(n.maxZoom):a=0;const l=this.rotatedExtentForGeometry(e);let o=this.getResolutionForExtentInternal(l,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);o=isNaN(o)?a:Math.max(o,a),o=this.getConstrainedResolution(o,s?0:1);const d=this.getRotation(),p=Math.sin(d),A=Math.cos(d),v=Gu(l);v[0]+=(i[1]-i[3])/2*o,v[1]+=(i[0]-i[2])/2*o;const y=v[0]*A-v[1]*p,C=v[1]*A+v[0]*p,x=this.getConstrainedCenter([y,C],o),M=n.callback?n.callback:ZC;n.duration!==void 0?this.animateInternal({resolution:o,center:x,duration:n.duration,easing:n.easing},M):(this.targetResolution_=o,this.targetCenter_=x,this.applyTargetState_(!1,!0),SR(M,!0))}centerOn(e,n,r){this.centerOnInternal(ol(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(h4(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let s;const a=this.padding_;if(a&&e){const l=this.getViewportSizeMinusPadding_(-r),o=h4(e,i,[l[0]/2+a[3],l[1]/2+a[0]],n,r);s=[e[0]-o[0],e[1]-o[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=l_(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&ol(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=ol(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ol(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),l=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(Cf.ROTATION)!==i&&this.set(Cf.ROTATION,i),this.get(Cf.RESOLUTION)!==a&&(this.set(Cf.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Cf.CENTER)||!CA(this.get(Cf.CENTER),l))&&this.set(Cf.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,i,a),o=this.constraints_.center(this.targetCenter_,l,a,!1,this.calculateCenterShift(this.targetCenter_,l,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=o,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!CA(this.getCenterInternal(),o))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:o,resolution:l,duration:e,easing:Mp,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(da.INTERACTING,1)}endInteraction(e,n,r){r=r&&ol(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(da.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function SR(t,e){setTimeout(function(){t(e)},0)}function ZJe(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return $J(t.extent,t.constrainOnlyCenter,n)}const e=rG(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,$J(n,!1,!1)}return QJe}function JJe(t){let e,n,r,a=t.minZoom!==void 0?t.minZoom:u4,l=t.maxZoom!==void 0?t.maxZoom:28;const o=t.zoomFactor!==void 0?t.zoomFactor:2,d=t.multiWorld!==void 0?t.multiWorld:!1,p=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,A=t.showFullExtent!==void 0?t.showFullExtent:!1,v=rG(t.projection,"EPSG:3857"),y=v.getExtent();let C=t.constrainOnlyCenter,x=t.extent;if(!d&&!x&&v.isGlobal()&&(C=!1,x=y),t.resolutions!==void 0){const M=t.resolutions;n=M[a],r=M[l]!==void 0?M[l]:M[M.length-1],t.constrainResolution?e=jJe(M,p,!C&&x,A):e=VJ(n,r,p,!C&&x,A)}else{const I=(y?Math.max(no(y),Xa(y)):360*eE.degrees/v.getMetersPerUnit())/AG/Math.pow(2,u4),P=I/Math.pow(2,28-u4);n=t.maxResolution,n!==void 0?a=0:n=I/Math.pow(o,a),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(o,l):r=I/Math.pow(o,l):r=P),l=a+Math.floor(Math.log(n/r)/Math.log(o)),r=n/Math.pow(o,l-a),t.constrainResolution?e=KJe(o,n,r,p,!C&&x,A):e=VJ(n,r,p,!C&&x,A)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:a,zoomFactor:o}}function eet(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?qJe():n===!1?HJ:typeof n=="number"?WJe(n):HJ}return vG}function tet(t){return!(t.sourceCenter&&t.targetCenter&&!CA(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function h4(t,e,n,r,i){const s=Math.cos(-i);let a=Math.sin(-i),l=t[0]*s-t[1]*a,o=t[1]*s+t[0]*a;l+=(e[0]/2-n[0])*r,o+=(n[1]-e[1]/2)*r,a=-a;const d=l*s-o*a,p=o*s+l*a;return[d,p]}class Kb extends pG{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Jo.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Jo.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(xo(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Yi(e,pi.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof hp?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;n.layerStatesArray?i=n.layerStatesArray.find(a=>a.layer===this):i=this.getLayerState();const s=this.getExtent();return bG(i,n.viewState)&&(!s||Ua(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n;const r=this.getSource();if(r&&(n=r.getAttributions()),!n)return[];const i=e instanceof hp?e.getViewStateAndExtent():e;let s=n(i);return Array.isArray(s)||(s=[s]),s}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Jo.MAP,e)}getMapInternal(){return this.get(Jo.MAP)}setMap(e){this.mapPrecomposeKey_&&(xo(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(xo(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Yi(e,yu.PRECOMPOSE,function(n){const i=n.frameState.layerStatesArray,s=this.getLayerState(!1);zs(!i.some(function(a){return a.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(s)},this),this.mapRenderKey_=Yi(this,pi.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Jo.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function bG(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}function net(t,e,n,r,i){ofe(t,e,n||0,r||t.length-1,i||ret)}function ofe(t,e,n,r,i){for(;r>n;){if(r-n>600){var s=r-n+1,a=e-n+1,l=Math.log(s),o=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*o*(s-o)/s)*(a-s/2<0?-1:1),p=Math.max(n,Math.floor(e-a*o/s+d)),A=Math.min(r,Math.floor(e+(s-a)*o/s+d));ofe(t,e,p,A,i)}var v=t[e],y=n,C=r;for(HS(t,n,e),i(t[r],v)>0&&HS(t,n,r);y<C;){for(HS(t,y,C),y++,C--;i(t[y],v)<0;)y++;for(;i(t[C],v)>0;)C--}i(t[n],v)===0?HS(t,n,C):(C++,HS(t,C,r)),C<=e&&(n=C+1),e<=C&&(r=C-1)}}function HS(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ret(t,e){return t<e?-1:t>e?1:0}let wG=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!IR(e,n))return r;const i=this.toBBox,s=[];for(;n;){for(let a=0;a<n.children.length;a++){const l=n.children[a],o=n.leaf?i(l):l;IR(e,o)&&(n.leaf?r.push(l):f4(e,o)?this._all(l,r):s.push(l))}n=s.pop()}return r}collides(e){let n=this.data;if(!IR(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const s=n.children[i],a=n.leaf?this.toBBox(s):s;if(IR(e,a)){if(n.leaf||f4(e,a))return!0;r.push(s)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Sx([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let l,o,d;for(;r||s.length;){if(r||(r=s.pop(),o=s[s.length-1],l=a.pop(),d=!0),r.leaf){const p=iet(e,r.children,n);if(p!==-1)return r.children.splice(p,1),s.push(r),this._condense(s),this}!d&&!r.leaf&&f4(r,i)?(s.push(r),a.push(l),l=0,o=r,r=r.children[0]):o?(l++,r=o.children[l],d=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const s=r-n+1;let a=this._maxEntries,l;if(s<=a)return l=Sx(e.slice(n,r+1)),Zw(l,this.toBBox),l;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),l=Sx([]),l.leaf=!1,l.height=i;const o=Math.ceil(s/a),d=o*Math.ceil(Math.sqrt(a));GJ(e,n,r,d,this.compareMinX);for(let p=n;p<=r;p+=d){const A=Math.min(p+d-1,r);GJ(e,p,A,o,this.compareMinY);for(let v=p;v<=A;v+=o){const y=Math.min(v+o-1,A);l.children.push(this._build(e,v,y,i-1))}}return Zw(l,this.toBBox),l}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let s=1/0,a=1/0,l;for(let o=0;o<n.children.length;o++){const d=n.children[o],p=d4(d),A=aet(e,d)-p;A<a?(a=A,s=p<s?p:s,l=d):A===a&&p<s&&(s=p,l=d)}n=l||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,n,s);for(a.children.push(e),AT(a,i);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(i,s,n)}_split(e,n){const r=e[n],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),l=Sx(r.children.splice(a,r.children.length-a));l.height=r.height,l.leaf=r.leaf,Zw(r,this.toBBox),Zw(l,this.toBBox),n?e[n-1].children.push(l):this._splitRoot(r,l)}_splitRoot(e,n){this.data=Sx([e,n]),this.data.height=e.height+1,this.data.leaf=!1,Zw(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,s=1/0,a=1/0;for(let l=n;l<=r-n;l++){const o=pT(e,0,l,this.toBBox),d=pT(e,l,r,this.toBBox),p=cet(o,d),A=d4(o)+d4(d);p<s?(s=p,i=l,a=A<a?A:a):p===s&&A<a&&(a=A,i=l)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:set,s=e.leaf?this.compareMinY:oet,a=this._allDistMargin(e,n,r,i),l=this._allDistMargin(e,n,r,s);a<l&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const s=this.toBBox,a=pT(e,0,n,s),l=pT(e,r-n,r,s);let o=TR(a)+TR(l);for(let d=n;d<r-n;d++){const p=e.children[d];AT(a,e.leaf?s(p):p),o+=TR(a)}for(let d=r-n-1;d>=n;d--){const p=e.children[d];AT(l,e.leaf?s(p):p),o+=TR(l)}return o}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)AT(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():Zw(e[n],this.toBBox)}};function iet(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Zw(t,e){pT(t,0,t.children.length,e,t)}function pT(t,e,n,r,i){i||(i=Sx(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<n;s++){const a=t.children[s];AT(i,t.leaf?r(a):a)}return i}function AT(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function set(t,e){return t.minX-e.minX}function oet(t,e){return t.minY-e.minY}function d4(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function TR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function aet(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function cet(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function f4(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function IR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Sx(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function GJ(t,e,n,r,i){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=r)continue;const a=e+Math.ceil((n-e)/r/2)*r;net(t,a,e,n,i),s.push(e,a,a,n)}}const hi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function QJ(t){return t[0]>0&&t[1]>0}function afe(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function El(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class $2{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=El(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new $2({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Xi()}getImage(e){return Xi()}getHitDetectionImage(){return Xi()}getPixelRatio(e){return 1}getImageState(){return Xi()}getImageSize(){return Xi()}getOrigin(){return Xi()}getSize(){return Xi()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=El(e)}listenImageChange(e){Xi()}load(){Xi()}unlistenImageChange(e){Xi()}ready(){return Promise.resolve()}}const oB={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var zu={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};zu.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};zu.max=zu.whitepoint[2].D65;zu.rgb=function(t,e){e=e||zu.whitepoint[2].E;var n=t[0]/e[0],r=t[1]/e[1],i=t[2]/e[2],s,a,l;return s=n*3.240969941904521+r*-1.537383177570093+i*-.498610760293,a=n*-.96924363628087+r*1.87596750150772+i*.041555057407175,l=n*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),l=Math.min(Math.max(0,l),1),[s*255,a*255,l*255]};oB.xyz=function(t,e){var n=t[0]/255,r=t[1]/255,i=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=n*.41239079926595+r*.35758433938387+i*.18048078840183,a=n*.21263900587151+r*.71516867876775+i*.072192315360733,l=n*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||zu.whitepoint[2].E,[s*e[0],a*e[1],l*e[2]]};const xG={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var r,i,s,a,l,o,d,p,A,v,y,C,x;if(s=t[0],a=t[1],l=t[2],s===0)return[0,0,0];var M=.0011070564598794539;return e=e||"D65",n=n||2,A=zu.whitepoint[n][e][0],v=zu.whitepoint[n][e][1],y=zu.whitepoint[n][e][2],C=4*A/(A+15*v+3*y),x=9*v/(A+15*v+3*y),r=a/(13*s)+C||0,i=l/(13*s)+x||0,d=s>8?v*Math.pow((s+16)/116,3):v*s*M,o=d*9*r/(4*i)||0,p=d*(12-3*r-20*i)/(4*i)||0,[o,d,p]}};zu.luv=function(t,e,n){var r,i,s,a,l,o,d,p,A,v,y,C,x,M=.008856451679035631,I=903.2962962962961;e=e||"D65",n=n||2,A=zu.whitepoint[n][e][0],v=zu.whitepoint[n][e][1],y=zu.whitepoint[n][e][2],C=4*A/(A+15*v+3*y),x=9*v/(A+15*v+3*y),o=t[0],d=t[1],p=t[2],r=4*o/(o+15*d+3*p)||0,i=9*d/(o+15*d+3*p)||0;var P=d/v;return s=P<=M?I*P:116*Math.pow(P,1/3)-16,a=13*s*(r-C),l=13*s*(i-x),[s,a,l]};var lfe={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],r=t[2],i,s,a;return a=r/360*2*Math.PI,i=n*Math.cos(a),s=n*Math.sin(a),[e,i,s]},xyz:function(t){return xG.xyz(lfe.luv(t))}};xG.lchuv=function(t){var e=t[0],n=t[1],r=t[2],i=Math.sqrt(n*n+r*r),s=Math.atan2(r,n),a=s*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};zu.lchuv=function(t){return xG.lchuv(zu.luv(t))};const jJ={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var KJ={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function uet(t){var p,A;var e,n=[],r=1,i;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),jJ[t])n=jJ[t].slice(),i="rgb";else if(t==="transparent")r=0,i="rgb",n=[0,0,0];else if(t[0]==="#"){var s=t.slice(1),a=s.length,l=a<=4;r=1,l?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(r=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(r=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var o=e[1];i=o.replace(/a$/,"");var d=i==="cmyk"?4:i==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=n.shift()),n=n.map(function(v,y){if(v[v.length-1]==="%")return v=parseFloat(v)/100,y===3?v:i==="rgb"?v*255:i[0]==="h"||i[0]==="l"&&!y?v*100:i==="lab"?v*125:i==="lch"?y<2?v*150:v*360:i[0]==="o"&&!y?v:i==="oklab"?v*.4:i==="oklch"?y<2?v*.4:v*360:v;if(i[y]==="h"||y===2&&i[i.length-1]==="h"){if(KJ[v]!==void 0)return KJ[v];if(v.endsWith("deg"))return parseFloat(v);if(v.endsWith("turn"))return parseFloat(v)*360;if(v.endsWith("grad"))return parseFloat(v)*360/400;if(v.endsWith("rad"))return parseFloat(v)*180/Math.PI}return v==="none"?0:parseFloat(v)}),r=n.length>d?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(v){return parseFloat(v)}),i=((A=(p=t.match(/([a-z])/ig))==null?void 0:p.join(""))==null?void 0:A.toLowerCase())||"rgb");return{space:i,values:n,alpha:r}}const p4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100,i,s,a,l,o,d=0;if(n===0)return o=r*255,[o,o,o];for(s=r<.5?r*(1+n):r+n-r*n,i=2*r-s,l=[0,0,0];d<3;)a=e+1/3*-(d-1),a<0?a++:a>1&&a--,o=6*a<1?i+(s-i)*6*a:2*a<1?s:3*a<2?i+(s-i)*(2/3-a)*6:i,l[d++]=o*255;return l}};oB.hsl=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=s-i,l,o,d;return s===i?l=0:e===s?l=(n-r)/a:n===s?l=2+(r-e)/a:r===s&&(l=4+(e-n)/a),l=Math.min(l*60,360),l<0&&(l+=360),d=(i+s)/2,s===i?o=0:d<=.5?o=a/(s+i):o=a/(2-s-i),[l,o*100,d*100]};function het(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=uet(t);if(!n.space)return[];const r=n.space[0]==="h"?p4.min:oB.min,i=n.space[0]==="h"?p4.max:oB.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(n.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(n.values[2],r[2]),i[2]),n.space[0]==="h"&&(e=p4.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function ab(t){return typeof t=="string"?t:EG(t)}const det=1024,GS={};let A4=0;function fet(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function WJ(t){const e=zu.lchuv(oB.xyz(t));return e[3]=t[3],e}function pet(t){const e=zu.rgb(lfe.xyz(t));return e[3]=t[3],e}function CG(t){if(GS.hasOwnProperty(t))return GS[t];if(A4>=det){let n=0;for(const r in GS)n++&3||(delete GS[r],--A4)}const e=het(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return cfe(e),GS[t]=e,++A4,e}function Of(t){return Array.isArray(t)?t:CG(t)}function cfe(t){return t[0]=va(t[0]+.5|0,0,255),t[1]=va(t[1]+.5|0,0,255),t[2]=va(t[2]+.5|0,0,255),t[3]=va(t[3],0,1),t}function EG(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}function Aet(t){try{return CG(t),!0}catch{return!1}}const c_=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",get=c_.includes("firefox"),met=c_.includes("safari")&&!c_.includes("chrom"),vet=met&&(c_.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(c_)),yet=c_.includes("webkit")&&!c_.includes("edge"),SG=c_.includes("macintosh"),ufe=typeof devicePixelRatio<"u"?devicePixelRatio:1,hfe=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,TG=typeof Image<"u"&&Image.prototype.decode,_et=typeof createImageBitmap=="function",dfe=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function Il(t,e,n,r){let i;return n&&n.length?i=n.shift():hfe?i=new OffscreenCanvas(t||300,e||300):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let g4;function _8(){return g4||(g4=Il(1,1)),g4}function Mb(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function bet(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function wet(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function rE(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function PO(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function ffe(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function xet(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){t.appendChild(s);continue}if(!s){t.removeChild(i),--r;continue}t.insertBefore(s,i)}}}class V2 extends LE{constructor(e,n,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=n,this.state=typeof i=="function"?hi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(pi.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==hi.IDLE&&this.loader){this.state=hi.LOADING,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;QH(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=hi.LOADED}).catch(r=>{this.state=hi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Cet(t,e,n){const r=t;let i=!0,s=!1,a=!1;const l=[nB(r,pi.LOAD,function(){a=!0,s||e()})];return r.src&&TG?(s=!0,r.decode().then(function(){i&&e()}).catch(function(o){i&&(a?e():n())})):l.push(nB(r,pi.ERROR,n)),function(){i=!1,l.forEach(xo)}}function Eet(t,e){return new Promise((n,r)=>{function i(){a(),n(t)}function s(){a(),r(new Error("Image load error"))}function a(){t.removeEventListener("load",i),t.removeEventListener("error",s)}t.addEventListener("load",i),t.addEventListener("error",s)})}function pfe(t,e){return e&&(t.src=e),t.src&&TG?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):Eet(t)}function H2(t,e){return e&&(t.src=e),t.src&&TG&&_et?t.decode().then(()=>createImageBitmap(t)).catch(n=>{if(t.complete&&t.width)return t;throw n}):pfe(t)}class Tet{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];!(e++&3)&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,r){const i=m4(e,n,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,n,r){const i=m4(e,n,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,n,r,i,s){const a=m4(e,n,r),l=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===hi.IDLE&&i.load(),i.getImageState()===hi.LOADING?i.ready().then(()=>{this.patternCache_[a]=_8().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=_8().createPattern(i.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function m4(t,e,n){const r=n?Of(n):"null";return e+":"+t+":"+r}const jg=new Tet;let QS=null;class Iet extends LE{constructor(e,n,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?hi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===hi.LOADED){QS||(QS=Il(1,1,void 0,{willReadFrequently:!0})),QS.drawImage(this.image_,0,0);try{QS.getImageData(0,0,1,1),this.tainted_=!1}catch{QS=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(pi.CHANGE)}handleImageError_(){this.imageState_=hi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=hi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=Il(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===hi.IDLE){this.image_||this.initializeImage_(),this.imageState_=hi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&pfe(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==hi.LOADED)return;const n=this.image_,r=document.createElement("canvas");r.width=Math.ceil(n.width*e),r.height=Math.ceil(n.height*e);const i=r.getContext("2d");i.scale(e,e),i.drawImage(n,0,0),i.globalCompositeOperation="multiply",i.fillStyle=ab(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===hi.LOADED||this.imageState_===hi.ERROR?e():this.addEventListener(pi.CHANGE,function n(){(this.imageState_===hi.LOADED||this.imageState_===hi.ERROR)&&(this.removeEventListener(pi.CHANGE,n),e())})})),this.ready_}}function IG(t,e,n,r,i,s){let a=e===void 0?void 0:jg.get(e,n,i);return a||(a=new Iet(t,t instanceof HTMLImageElement?t.src||void 0:e,n,r,i),jg.set(e,n,i,a,s)),s&&a&&!jg.getPattern(e,n,i)&&jg.set(e,n,i,a,s),a}function Kg(t){return t?Array.isArray(t)?EG(t):typeof t=="object"&&"src"in t?Bet(t):t:null}function Bet(t){if(!t.offset||!t.size)return jg.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=jg.getPattern(e,void 0,t.color);if(n)return n;const r=jg.get(t.src,"anonymous",null);if(r.getImageState()!==hi.LOADED)return null;const i=Il(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),IG(i.canvas,e,void 0,hi.LOADED,t.color,!0),jg.getPattern(e,void 0,t.color)}const BR="ol-hidden",Met="ol-selectable",lm="ol-unselectable",qJ="ol-unsupported",Wb="ol-control",FO="ol-collapsed",Let=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),YJ=["style","variant","weight","size","lineHeight","family"],Afe=function(t){const e=t.match(Let);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=YJ.length;r<i;++r){const s=e[r+1];s!==void 0&&(n[YJ[r]]=s)}return n.families=n.family.split(/,\s?/),n},gfe="10px sans-serif",_d="#000",iE="round",Nv=[],kv=0,sE="round",aB=10,lB="#000",cB="center",OO="middle",j1=[0,0,0,0],uB=1,bv=new Od;let Tx=null,b8;const w8={},Ret=function(){const e="32px ",n=["monospace","serif"],r=n.length,i="wmytzilWMYTZIL@#/&?$%10";let s,a;function l(d,p,A){let v=!0;for(let y=0;y<r;++y){const C=n[y];if(a=NO(d+" "+p+" "+e+C,i),A!=C){const x=NO(d+" "+p+" "+e+A+","+C,i);v=v&&x!=a}}return!!v}function o(){let d=!0;const p=bv.getKeys();for(let A=0,v=p.length;A<v;++A){const y=p[A];bv.get(y)<100&&(l.apply(this,y.split(`
`))?(Hb(w8),Tx=null,b8=void 0,bv.set(y,100)):(bv.set(y,bv.get(y)+1,!0),d=!1))}d&&(clearInterval(s),s=void 0)}return function(d){const p=Afe(d);if(!p)return;const A=p.families;for(let v=0,y=A.length;v<y;++v){const C=A[v],x=p.style+`
`+p.weight+`
`+C;bv.get(x)===void 0&&(bv.set(x,100,!0),l(p.style,p.weight,C)||(bv.set(x,0,!0),s===void 0&&(s=setInterval(o,32))))}}}(),Pet=function(){let t;return function(e){let n=w8[e];if(n==null){if(hfe){const r=Afe(e),i=mfe(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);w8[e]=n}return n}}();function mfe(t,e){return Tx||(Tx=Il(1,1)),t!=b8&&(Tx.font=t,b8=Tx.font),Tx.measureText(e)}function NO(t,e){return mfe(t,e).width}function XJ(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,NO(t,s)),0);return n[e]=r,r}function Fet(t,e){const n=[],r=[],i=[];let s=0,a=0,l=0,o=0;for(let d=0,p=e.length;d<=p;d+=2){const A=e[d];if(A===`
`||d===p){s=Math.max(s,a),i.push(a),a=0,l+=o;continue}const v=e[d+1]||t.font,y=NO(v,A);n.push(y),a+=y;const C=Pet(v);r.push(C),o=Math.max(o,C)}return{width:s,height:l,widths:n,heights:r,lineWidths:i}}function Oet(t,e,n,r,i,s,a,l,o,d,p){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=A=>A.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(o,d),t.scale(p[0],p[1]),Net(r,t)):p[0]<0||p[1]<0?(t.translate(o,d),t.scale(p[0],p[1]),t.drawImage(r,i,s,a,l,0,0,a,l)):t.drawImage(r,i,s,a,l,o,d,a*p[0],l*p[1]),t.restore()}function Net(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class lb extends $2{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?hi.LOADING:hi.LOADED,this.imageState_===hi.LOADING&&this.ready().then(()=>this.imageState_=hi.LOADED),this.render()}clone(){const e=this.getScale(),n=new lb({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){const r=this.renderOptions_,i=Il(r.size*e,r.size*e);this.draw_(r,i,e),n=i.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius_,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const H=i;i=s,s=H}const a=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/a,o=s*Math.sin(l),d=Math.sqrt(s*s-o*o),p=i-d,A=Math.sqrt(o*o+p*p),v=A/o;if(e==="miter"&&v<=r)return v*n;const y=n/2/v,C=n/2*(p/A),M=Math.sqrt((i+y)*(i+y)+C*C)-i;if(this.radius2_===void 0||e==="bevel")return M*2;const I=i*Math.sin(l),P=Math.sqrt(i*i-I*I),F=s-P,V=Math.sqrt(I*I+F*F)/I;if(V<=r){const H=V*n/2-s-i;return 2*Math.max(M,H)}return M*2}createRenderOptions(){let e=iE,n=sE,r=0,i=null,s=0,a,l=0;this.stroke_&&(a=Kg(this.stroke_.getColor()??lB),l=this.stroke_.getWidth()??uB,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??sE,e=this.stroke_.getLineCap()??iE,r=this.stroke_.getMiterLimit()??aB);const o=this.calculateLineJoinSize_(n,l,r),d=Math.max(this.radius_,this.radius2_||0),p=Math.ceil(2*d+o);return{strokeStyle:a,strokeWidth:l,size:p,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=_d),n.fillStyle=Kg(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Of(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Il(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius_;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/n;for(let l=0;l<n;l++){const o=s+l*a,d=l%2===0?r:i;e.lineTo(d*Math.cos(o),d*Math.sin(o))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=_d,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class I_ extends lb{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new I_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}}class Hl{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Hl({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=IG(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===hi.IDLE&&n.load(),n.getImageState()===hi.LOADING&&(this.patternImage_=n)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Za{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Za({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class No{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ZJ,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new No({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ZJ,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function ket(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(zs(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let v4=null;function Det(t,e){if(!v4){const n=new Hl({color:"rgba(255,255,255,0.4)"}),r=new Za({color:"#3399CC",width:1.25});v4=[new No({image:new I_({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return v4}function BG(){const t={},e=[255,255,255,1],n=[0,153,255,1],r=3;return t.Polygon=[new No({fill:new Hl({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new No({stroke:new Za({color:e,width:r+2})}),new No({stroke:new Za({color:n,width:r})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new No({image:new I_({radius:r*2,fill:new Hl({color:n}),stroke:new Za({color:e,width:r/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function ZJ(t){return t.getGeometry()}function JJ(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}class B_ extends $2{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let l=e.src;zs(!(l!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&a&&(l=a.src||Vr(a)),zs(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),zs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let o;if(e.src!==void 0?o=hi.IDLE:a!==void 0&&(a instanceof HTMLImageElement?a.complete?o=a.src?hi.LOADED:hi.IDLE:o=hi.LOADING:o=hi.LOADED),this.color_=e.color!==void 0?Of(e.color):null,this.iconImage_=IG(a,l,this.crossOrigin_,o,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let d,p;if(e.size)[d,p]=e.size;else{const A=this.getImage(1);if(A.width&&A.height)d=A.width,p=A.height;else if(A instanceof HTMLImageElement){this.initialOptions_=e;const v=()=>{if(this.unlistenImageChange(v),!this.initialOptions_)return;const y=this.iconImage_.getSize();this.setScale(JJ(y[0],y[1],e.width,e.height))};this.listenImageChange(v);return}}d!==void 0&&this.setScale(JJ(d,p,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new B_({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==hi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==hi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(pi.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(pi.CHANGE,e)}ready(){return this.iconImage_.ready()}}const Uet="#333";class Pf{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=El(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Hl({color:Uet}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Pf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=El(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let FE=0;const qb=0,Ka=1<<FE++,$r=1<<FE++,Yc=1<<FE++,ta=1<<FE++,uc=1<<FE++,uh=Math.pow(2,FE)-1,vfe={[Ka]:"boolean",[$r]:"number",[Yc]:"string",[ta]:"color",[uc]:"number[]"},zet=Object.keys(vfe).map(Number).sort(Zg);function nu(t){const e=[];for(const n of zet)$et(t,n)&&e.push(vfe[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function $et(t,e){return(t&e)===e}function PA(t,e){return!!(t&e)}function lM(t,e){return t===e}class Fy{constructor(e,n){this.type=e,this.value=n}}class yfe{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function MG(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function Vet(t){switch(t){case"string":return Yc;case"color":return ta;case"number":return $r;case"boolean":return Ka;case"number[]":return uc;default:throw new Error(`Unrecognized type hint: ${t}`)}}function ea(t,e,n){switch(typeof t){case"boolean":return new Fy(Ka,t);case"number":return new Fy($r,t);case"string":{let i=Yc;return Aet(t)&&(i|=ta),lM(i&n,qb)||(i&=n),new Fy(i,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return ett(t,e,n);for(const i of t)if(typeof i!="number")throw new Error("Expected an array of numbers");let r=uc;return(t.length===3||t.length===4)&&(r|=ta),n&&(r&=n),new Fy(r,t)}const Pn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},Het={[Pn.Get]:Vs(([t,e])=>e!==void 0?Vet(e.value):uh,oo(1,2),Get),[Pn.Var]:Vs(([t])=>t.type,oo(1,1),Qet),[Pn.Id]:Vs($r|Yc,jS,jet),[Pn.Concat]:Vs(Yc,oo(2,1/0),Oo(uh)),[Pn.GeometryType]:Vs(Yc,jS,Ket),[Pn.Resolution]:Vs($r,jS),[Pn.Zoom]:Vs($r,jS),[Pn.Time]:Vs($r,jS),[Pn.Any]:Vs(Ka,oo(2,1/0),Oo(Ka)),[Pn.All]:Vs(Ka,oo(2,1/0),Oo(Ka)),[Pn.Not]:Vs(Ka,oo(1,1),Oo(Ka)),[Pn.Equal]:Vs(Ka,oo(2,2),Oo(uh),ty),[Pn.NotEqual]:Vs(Ka,oo(2,2),Oo(uh),ty),[Pn.GreaterThan]:Vs(Ka,oo(2,2),Oo(uh),ty),[Pn.GreaterThanOrEqualTo]:Vs(Ka,oo(2,2),Oo(uh),ty),[Pn.LessThan]:Vs(Ka,oo(2,2),Oo(uh),ty),[Pn.LessThanOrEqualTo]:Vs(Ka,oo(2,2),Oo(uh),ty),[Pn.Multiply]:Vs(t=>{let e=$r|ta;for(let n=0;n<t.length;n++)e&=t[n].type;return e},oo(2,1/0),Oo($r|ta),ty),[Pn.Coalesce]:Vs(t=>{let e=uh;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},oo(2,1/0),Oo(uh),ty),[Pn.Divide]:Vs($r,oo(2,2),Oo($r)),[Pn.Add]:Vs($r,oo(2,1/0),Oo($r)),[Pn.Subtract]:Vs($r,oo(2,2),Oo($r)),[Pn.Clamp]:Vs($r,oo(3,3),Oo($r)),[Pn.Mod]:Vs($r,oo(2,2),Oo($r)),[Pn.Pow]:Vs($r,oo(2,2),Oo($r)),[Pn.Abs]:Vs($r,oo(1,1),Oo($r)),[Pn.Floor]:Vs($r,oo(1,1),Oo($r)),[Pn.Ceil]:Vs($r,oo(1,1),Oo($r)),[Pn.Round]:Vs($r,oo(1,1),Oo($r)),[Pn.Sin]:Vs($r,oo(1,1),Oo($r)),[Pn.Cos]:Vs($r,oo(1,1),Oo($r)),[Pn.Atan]:Vs($r,oo(1,2),Oo($r)),[Pn.Sqrt]:Vs($r,oo(1,1),Oo($r)),[Pn.Match]:Vs(t=>{let e=uh;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},oo(4,1/0),eee,qet),[Pn.Between]:Vs(Ka,oo(3,3),Oo($r)),[Pn.Interpolate]:Vs(t=>{let e=ta|$r;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},oo(6,1/0),eee,Yet),[Pn.Case]:Vs(t=>{let e=uh;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},oo(3,1/0),Wet,Xet),[Pn.In]:Vs(Ka,oo(2,2),Zet),[Pn.Number]:Vs($r,oo(1,1/0),Oo(uh)),[Pn.String]:Vs(Yc,oo(1,1/0),Oo(uh)),[Pn.Array]:Vs(t=>t.length===3||t.length===4?uc|ta:uc,oo(1,1/0),Oo($r)),[Pn.Color]:Vs(ta,oo(1,4),Oo($r)),[Pn.Band]:Vs($r,oo(1,3),Oo($r)),[Pn.Palette]:Vs(ta,oo(2,2),Jet),[Pn.ToString]:Vs(Yc,oo(1,1),Oo(Ka|$r|Yc|ta))};function Get(t,e){const n=ea(t[1],e);if(!(n instanceof Fy))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){const r=ea(t[2],e);return[n,r]}return[n]}function Qet(t,e,n,r){const i=t[1];if(typeof i!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(i),!("variables"in e.style)||e.style.variables[i]===void 0)return[new Fy(uh,i)];const s=e.style.variables[i],a=ea(s,e);if(a.value=i,r&&!PA(r,a.type))throw new Error(`The variable ${i} has type ${nu(a.type)} but the following type was expected: ${nu(r)}`);return[a]}function jet(t,e){e.featureId=!0}function Ket(t,e){e.geometryType=!0}function jS(t,e){const n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function oo(t,e){return function(n,r){const i=n[0],s=n.length-1;if(t===e){if(s!==t){const a=t===1?"":"s";throw new Error(`Expected ${t} argument${a} for ${i}, got ${s}`)}}else if(s<t||s>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${a} arguments for ${i}, got ${s}`)}}}function Oo(t){return function(e,n){const r=e[0],i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const l=ea(e[a+1],n);if(!PA(t,l.type)){const o=nu(t),d=nu(l.type);throw new Error(`Unexpected type for argument ${a} of ${r} operation, got ${o} but expected ${d}`)}l.type&=t,s[a]=l}return s}}function ty(t,e,n){const r=t[0],i=t.length-1;let s=uh;for(let l=0;l<n.length;++l)s&=n[l].type;if(s===qb)throw new Error(`No common type could be found for arguments of ${r} operation`);const a=new Array(i);for(let l=0;l<i;++l)a[l]=ea(t[l+1],e,s);return a}function Wet(t,e){const n=t[0],r=t.length-1;if(r%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(r)} instead`)}function eee(t,e){const n=t[0],r=t.length-1;if(r%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(r)} instead`)}function qet(t,e,n,r){const i=t.length-1;let a=ea(t[1],e).type;const l=ea(t[t.length-1],e);let o=r!==void 0?r&l.type:l.type;const d=new Array(i-2);for(let A=0;A<i-2;A+=2){const v=ea(t[A+2],e),y=ea(t[A+3],e);a&=v.type,o&=y.type,d[A]=v,d[A+1]=y}const p=Yc|$r|Ka;if(!PA(p,a))throw new Error(`Expected an input of type ${nu(p)} for the interpolate operation, got ${nu(a)} instead`);if(lM(o,qb))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let A=0;A<i-2;A+=2){const v=ea(t[A+2],e,a),y=ea(t[A+3],e,o);d[A]=v,d[A+1]=y}return[ea(t[1],e,a),...d,ea(t[t.length-1],e,o)]}function Yet(t,e,n,r){const i=t[1];let s;switch(i[0]){case"linear":s=1;break;case"exponential":if(s=i[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(i)}`);s=ea(s,e);let a=ea(t[2],e);if(!PA($r,a.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${nu(a.type)} instead`);a=ea(t[2],e,$r);const l=new Array(t.length-3);for(let o=0;o<l.length;o+=2){let d=ea(t[o+3],e);if(!PA($r,d.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${nu(d.type)} at position ${o+2} instead`);let p=ea(t[o+4],e);if(!PA($r|ta,p.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${nu(p.type)} at position ${o+3} instead`);d=ea(t[o+3],e,$r),p=ea(t[o+4],e,$r|ta),l[o]=d,l[o+1]=p}return[s,a,...l]}function Xet(t,e,n,r){const i=ea(t[t.length-1],e);let s=r!==void 0?r&i.type:i.type;const a=new Array(t.length-1);for(let l=0;l<a.length-1;l+=2){const o=ea(t[l+1],e),d=ea(t[l+2],e);if(!PA(Ka,o.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${nu(o.type)} at position ${l} instead`);s&=d.type,a[l]=o,a[l+1]=d}if(lM(s,qb))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let l=0;l<a.length-1;l+=2)a[l+1]=ea(t[l+2],e,s);return a[a.length-1]=ea(t[t.length-1],e,s),a}function Zet(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let r=Yc|$r;const i=new Array(n.length);for(let a=0;a<i.length;a++){const l=ea(n[a],e);r&=l.type,i[a]=l}if(lM(r,qb))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[ea(t[1],e,r),...i]}function Jet(t,e){const n=ea(t[1],e,$r);if(n.type!==$r)throw new Error(`The first argument of palette must be an number, got ${nu(n.type)} instead`);const r=t[2];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");const i=new Array(r.length);for(let s=0;s<i.length;s++){const a=ea(r[s],e,ta);if(!(a instanceof Fy))throw new Error(`The palette color at index ${s} must be a literal value`);if(!PA(a.type,ta))throw new Error(`The palette color at index ${s} should be of type color, got ${nu(a.type)} instead`);i[s]=a}return[n,...i]}function Vs(t,...e){return function(n,r,i){const s=n[0];let a=[];for(let o=0;o<e.length;o++)a=e[o](n,r,a,i)||a;let l=typeof t=="function"?t(a):t;if(i!==void 0){if(!PA(l,i))throw new Error(`The following expression was expected to return ${nu(i)}, but returns ${nu(l)} instead: ${JSON.stringify(n)}`);l&=i}if(l===qb)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new yfe(l,s,...a)}}function ett(t,e,n){const r=t[0],i=Het[r];if(!i)throw new Error(`Unknown operator: ${r}`);return i(t,e,n)}function LG(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return LG(t.getGeometries()[0]);default:return""}}function _fe(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function p0(t,e,n){const r=ea(t,n);if(!PA(e,r.type)){const i=nu(e),s=nu(r.type);throw new Error(`Expected expression to be of type ${i}, got ${s}`)}return $A(r)}function $A(t,e){if(t instanceof Fy){if(t.type===ta&&typeof t.value=="string"){const r=CG(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case Pn.Number:case Pn.String:case Pn.Coalesce:return ttt(t);case Pn.Get:case Pn.Var:return ntt(t);case Pn.Id:return r=>r.featureId;case Pn.GeometryType:return r=>r.geometryType;case Pn.Concat:{const r=t.args.map(i=>$A(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Pn.Resolution:return r=>r.resolution;case Pn.Any:case Pn.All:case Pn.Between:case Pn.In:case Pn.Not:return itt(t);case Pn.Equal:case Pn.NotEqual:case Pn.LessThan:case Pn.LessThanOrEqualTo:case Pn.GreaterThan:case Pn.GreaterThanOrEqualTo:return rtt(t);case Pn.Multiply:case Pn.Divide:case Pn.Add:case Pn.Subtract:case Pn.Clamp:case Pn.Mod:case Pn.Pow:case Pn.Abs:case Pn.Floor:case Pn.Ceil:case Pn.Round:case Pn.Sin:case Pn.Cos:case Pn.Atan:case Pn.Sqrt:return stt(t);case Pn.Case:return ott(t);case Pn.Match:return att(t);case Pn.Interpolate:return ltt(t);case Pn.ToString:return ctt(t);default:throw new Error(`Unsupported operator ${n}`)}}function ttt(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=$A(t.args[s]);switch(n){case Pn.Coalesce:return s=>{for(let a=0;a<r;++a){const l=i[a](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case Pn.Number:case Pn.String:return s=>{for(let a=0;a<r;++a){const l=i[a](s);if(typeof l===n)return l}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function ntt(t,e){const r=t.args[0].value;switch(t.operator){case Pn.Get:return i=>i.properties[r];case Pn.Var:return i=>i.variables[r];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function rtt(t,e){const n=t.operator,r=$A(t.args[0]),i=$A(t.args[1]);switch(n){case Pn.Equal:return s=>r(s)===i(s);case Pn.NotEqual:return s=>r(s)!==i(s);case Pn.LessThan:return s=>r(s)<i(s);case Pn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Pn.GreaterThan:return s=>r(s)>i(s);case Pn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function itt(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=$A(t.args[s]);switch(n){case Pn.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Pn.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Pn.Between:return s=>{const a=i[0](s),l=i[1](s),o=i[2](s);return a>=l&&a<=o};case Pn.In:return s=>{const a=i[0](s);for(let l=1;l<r;++l)if(a===i[l](s))return!0;return!1};case Pn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function stt(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=$A(t.args[s]);switch(n){case Pn.Multiply:return s=>{let a=1;for(let l=0;l<r;++l)a*=i[l](s);return a};case Pn.Divide:return s=>i[0](s)/i[1](s);case Pn.Add:return s=>{let a=0;for(let l=0;l<r;++l)a+=i[l](s);return a};case Pn.Subtract:return s=>i[0](s)-i[1](s);case Pn.Clamp:return s=>{const a=i[0](s),l=i[1](s);if(a<l)return l;const o=i[2](s);return a>o?o:a};case Pn.Mod:return s=>i[0](s)%i[1](s);case Pn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Pn.Abs:return s=>Math.abs(i[0](s));case Pn.Floor:return s=>Math.floor(i[0](s));case Pn.Ceil:return s=>Math.ceil(i[0](s));case Pn.Round:return s=>Math.round(i[0](s));case Pn.Sin:return s=>Math.sin(i[0](s));case Pn.Cos:return s=>Math.cos(i[0](s));case Pn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Pn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function ott(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=$A(t.args[i]);return i=>{for(let s=0;s<n-1;s+=2)if(r[s](i))return r[s+1](i);return r[n-1](i)}}function att(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=$A(t.args[i]);return i=>{const s=r[0](i);for(let a=1;a<n;a+=2)if(s===r[a](i))return r[a+1](i);return r[n-1](i)}}function ltt(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=$A(t.args[i]);return i=>{const s=r[0](i),a=r[1](i);let l,o;for(let d=2;d<n;d+=2){const p=r[d](i);let A=r[d+1](i);const v=Array.isArray(A);if(v&&(A=fet(A)),p>=a)return d===2?A:v?utt(s,a,l,o,p,A):gT(s,a,l,o,p,A);l=p,o=A}return o}}function ctt(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=$A(t.args[s]);switch(n){case Pn.ToString:return s=>{const a=i[0](s);return t.args[0].type===ta?EG(a):a.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function gT(t,e,n,r,i,s){const a=i-n;if(a===0)return r;const l=e-n,o=t===1?l/a:(Math.pow(t,l)-1)/(Math.pow(t,a)-1);return r+o*(s-r)}function utt(t,e,n,r,i,s){if(i-n===0)return r;const l=WJ(r),o=WJ(s);let d=o[2]-l[2];d>180?d-=360:d<-180&&(d+=360);const p=[gT(t,e,n,l[0],i,o[0]),gT(t,e,n,l[1],i,o[1]),l[2]+gT(t,e,n,0,i,d),gT(t,e,n,r[3],i,s[3])];return cfe(pet(p))}function htt(t){return!0}function dtt(t){const e=MG(),n=ftt(t,e),r=_fe();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=LG(i.getGeometry())),n(r)}}function tee(t){const e=MG(),n=t.length,r=new Array(n);for(let a=0;a<n;++a)r[a]=x8(t[a],e);const i=_fe(),s=new Array(n);return function(a,l){if(i.properties=a.getPropertiesInternal(),i.resolution=l,e.featureId){const d=a.getId();d!==void 0?i.featureId=d:i.featureId=null}let o=0;for(let d=0;d<n;++d){const p=r[d](i);p&&(s[o]=p,o+=1)}return s.length=o,s}}function ftt(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const s=t[i],a="filter"in s?p0(s.filter,Ka,e):htt;let l;if(Array.isArray(s.style)){const o=s.style.length;l=new Array(o);for(let d=0;d<o;++d)l[d]=x8(s.style[d],e)}else l=[x8(s.style,e)];r[i]={filter:a,styles:l}}return function(i){const s=[];let a=!1;for(let l=0;l<n;++l){const o=r[l].filter;if(o(i)&&!(t[l].else&&a)){a=!0;for(const d of r[l].styles){const p=d(i);p&&s.push(p)}}}return s}}function x8(t,e){const n=hB(t,"",e),r=dB(t,"",e),i=ptt(t,e),s=Att(t,e),a=wd(t,"z-index",e);if(!n&&!r&&!i&&!s&&!Zv(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const l=new No;return function(o){let d=!0;if(n){const p=n(o);p&&(d=!1),l.setFill(p)}if(r){const p=r(o);p&&(d=!1),l.setStroke(p)}if(i){const p=i(o);p&&(d=!1),l.setText(p)}if(s){const p=s(o);p&&(d=!1),l.setImage(p)}return a&&l.setZIndex(a(o)),d?null:l}}function hB(t,e,n){let r;if(e+"fill-pattern-src"in t?r=ytt(t,e+"fill-",n):r=RG(t,e+"fill-color",n),!r)return null;const i=new Hl;return function(s){const a=r(s);return a==="none"?null:(i.setColor(a),i)}}function dB(t,e,n){const r=wd(t,e+"stroke-width",n),i=RG(t,e+"stroke-color",n);if(!r&&!i)return null;const s=xv(t,e+"stroke-line-cap",n),a=xv(t,e+"stroke-line-join",n),l=bfe(t,e+"stroke-line-dash",n),o=wd(t,e+"stroke-line-dash-offset",n),d=wd(t,e+"stroke-miter-limit",n),p=new Za;return function(A){if(i){const v=i(A);if(v==="none")return null;p.setColor(v)}if(r&&p.setWidth(r(A)),s){const v=s(A);if(v!=="butt"&&v!=="round"&&v!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(v)}if(a){const v=a(A);if(v!=="bevel"&&v!=="round"&&v!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(v)}return l&&p.setLineDash(l(A)),o&&p.setLineDashOffset(o(A)),d&&p.setMiterLimit(d(A)),p}}function ptt(t,e){const n="text-",r=xv(t,n+"value",e);if(!r)return null;const i=hB(t,n,e),s=hB(t,n+"background-",e),a=dB(t,n,e),l=dB(t,n+"background-",e),o=xv(t,n+"font",e),d=wd(t,n+"max-angle",e),p=wd(t,n+"offset-x",e),A=wd(t,n+"offset-y",e),v=fB(t,n+"overflow",e),y=xv(t,n+"placement",e),C=wd(t,n+"repeat",e),x=G2(t,n+"scale",e),M=fB(t,n+"rotate-with-view",e),I=wd(t,n+"rotation",e),P=xv(t,n+"align",e),F=xv(t,n+"justify",e),D=xv(t,n+"baseline",e),V=bfe(t,n+"padding",e),H=Q2(t,n+"declutter-mode"),Q=new Pf({declutterMode:H});return function(G){if(Q.setText(r(G)),i&&Q.setFill(i(G)),s&&Q.setBackgroundFill(s(G)),a&&Q.setStroke(a(G)),l&&Q.setBackgroundStroke(l(G)),o&&Q.setFont(o(G)),d&&Q.setMaxAngle(d(G)),p&&Q.setOffsetX(p(G)),A&&Q.setOffsetY(A(G)),v&&Q.setOverflow(v(G)),y){const W=y(G);if(W!=="point"&&W!=="line")throw new Error("Expected point or line for text-placement");Q.setPlacement(W)}if(C&&Q.setRepeat(C(G)),x&&Q.setScale(x(G)),M&&Q.setRotateWithView(M(G)),I&&Q.setRotation(I(G)),P){const W=P(G);if(W!=="left"&&W!=="center"&&W!=="right"&&W!=="end"&&W!=="start")throw new Error("Expected left, right, center, start, or end for text-align");Q.setTextAlign(W)}if(F){const W=F(G);if(W!=="left"&&W!=="right"&&W!=="center")throw new Error("Expected left, right, or center for text-justify");Q.setJustify(W)}if(D){const W=D(G);if(W!=="bottom"&&W!=="top"&&W!=="middle"&&W!=="alphabetic"&&W!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Q.setTextBaseline(W)}return V&&Q.setPadding(V(G)),Q}}function Att(t,e){return"icon-src"in t?gtt(t,e):"shape-points"in t?mtt(t,e):"circle-radius"in t?vtt(t,e):null}function gtt(t,e){const n="icon-",r=n+"src",i=wfe(t[r],r),s=kO(t,n+"anchor",e),a=G2(t,n+"scale",e),l=wd(t,n+"opacity",e),o=kO(t,n+"displacement",e),d=wd(t,n+"rotation",e),p=fB(t,n+"rotate-with-view",e),A=ree(t,n+"anchor-origin"),v=iee(t,n+"anchor-x-units"),y=iee(t,n+"anchor-y-units"),C=xtt(t,n+"color"),x=btt(t,n+"cross-origin"),M=wtt(t,n+"offset"),I=ree(t,n+"offset-origin"),P=DO(t,n+"width"),F=DO(t,n+"height"),D=_tt(t,n+"size"),V=Q2(t,n+"declutter-mode"),H=new B_({src:i,anchorOrigin:A,anchorXUnits:v,anchorYUnits:y,color:C,crossOrigin:x,offset:M,offsetOrigin:I,height:F,width:P,size:D,declutterMode:V});return function(Q){return l&&H.setOpacity(l(Q)),o&&H.setDisplacement(o(Q)),d&&H.setRotation(d(Q)),p&&H.setRotateWithView(p(Q)),a&&H.setScale(a(Q)),s&&H.setAnchor(s(Q)),H}}function mtt(t,e){const n="shape-",r=n+"points",i=n+"radius",s=C8(t[r],r),a=C8(t[i],i),l=hB(t,n,e),o=dB(t,n,e),d=G2(t,n+"scale",e),p=kO(t,n+"displacement",e),A=wd(t,n+"rotation",e),v=fB(t,n+"rotate-with-view",e),y=DO(t,n+"radius2"),C=DO(t,n+"angle"),x=Q2(t,n+"declutter-mode"),M=new lb({points:s,radius:a,radius2:y,angle:C,declutterMode:x});return function(I){return l&&M.setFill(l(I)),o&&M.setStroke(o(I)),p&&M.setDisplacement(p(I)),A&&M.setRotation(A(I)),v&&M.setRotateWithView(v(I)),d&&M.setScale(d(I)),M}}function vtt(t,e){const n="circle-",r=hB(t,n,e),i=dB(t,n,e),s=wd(t,n+"radius",e),a=G2(t,n+"scale",e),l=kO(t,n+"displacement",e),o=wd(t,n+"rotation",e),d=fB(t,n+"rotate-with-view",e),p=Q2(t,n+"declutter-mode"),A=new I_({radius:5,declutterMode:p});return function(v){return s&&A.setRadius(s(v)),r&&A.setFill(r(v)),i&&A.setStroke(i(v)),l&&A.setDisplacement(l(v)),o&&A.setRotation(o(v)),d&&A.setRotateWithView(d(v)),a&&A.setScale(a(v)),A}}function wd(t,e,n){if(!(e in t))return;const r=p0(t[e],$r,n);return function(i){return C8(r(i),e)}}function xv(t,e,n){if(!(e in t))return null;const r=p0(t[e],Yc,n);return function(i){return wfe(r(i),e)}}function ytt(t,e,n){const r=xv(t,e+"pattern-src",n),i=nee(t,e+"pattern-offset",n),s=nee(t,e+"pattern-size",n),a=RG(t,e+"color",n);return function(l){return{src:r(l),offset:i&&i(l),size:s&&s(l),color:a&&a(l)}}}function fB(t,e,n){if(!(e in t))return null;const r=p0(t[e],Ka,n);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function RG(t,e,n){if(!(e in t))return null;const r=p0(t[e],ta|Yc,n);return function(i){return xfe(r(i),e)}}function bfe(t,e,n){if(!(e in t))return null;const r=p0(t[e],uc,n);return function(i){return cM(r(i),e)}}function kO(t,e,n){if(!(e in t))return null;const r=p0(t[e],uc,n);return function(i){const s=cM(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function nee(t,e,n){if(!(e in t))return null;const r=p0(t[e],uc,n);return function(i){return Cfe(r(i),e)}}function G2(t,e,n){if(!(e in t))return null;const r=p0(t[e],uc|$r,n);return function(i){return Ctt(r(i),e)}}function DO(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function _tt(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return El(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function btt(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function ree(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function iee(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function wtt(t,e){const n=t[e];if(n!==void 0)return cM(n,e)}function Q2(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function xtt(t,e){const n=t[e];if(n!==void 0)return xfe(n,e)}function cM(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function wfe(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function C8(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function xfe(t,e){if(typeof t=="string")return t;const n=cM(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function Cfe(t,e){const n=cM(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function Ctt(t,e){return typeof t=="number"?t:Cfe(t,e)}const see={RENDER_ORDER:"renderOrder"};class Yb extends Kb{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(see.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new wG(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(see.RENDER_ORDER,e)}setStyle(e){this.style_=Ett(e),this.styleFunction_=e===null?void 0:ket(this.style_),this.changed()}}function Ett(t){if(t===void 0)return Det;if(!t)return null;if(typeof t=="function"||t instanceof No)return t;if(!Array.isArray(t))return tee([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof No){const i=new Array(e);for(let s=0;s<e;++s){const a=t[s];if(!(a instanceof No))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in n){const i=new Array(e);for(let s=0;s<e;++s){const a=t[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return dtt(i)}return tee(t)}class Stt extends T2{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){Xi()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Hh(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),a_(i,r)}forEachFeatureAtCoordinate(e,n,r,i,s,a,l,o){let d;const p=n.viewState;function A(D,V,H,Q){return s.call(a,V,D?H:null,Q)}const v=p.projection,y=O2(e.slice(),v),C=[[0,0]];if(v.canWrapX()&&i){const D=v.getExtent(),V=no(D);C.push([-V,0],[V,0])}const x=n.layerStatesArray,M=x.length,I=[],P=[];for(let D=0;D<C.length;D++)for(let V=M-1;V>=0;--V){const H=x[V],Q=H.layer;if(Q.hasRenderer()&&bG(H,p)&&l.call(o,Q)){const G=Q.getRenderer(),W=Q.getSource();if(G&&W){const te=W.getWrapX()?y:e,q=A.bind(null,H.managed);P[0]=te[0]+C[D][0],P[1]=te[1]+C[D][1],d=G.forEachFeatureAtCoordinate(P,n,r,q,I)}if(d)return d}}if(I.length===0)return;const F=1/I.length;return I.forEach((D,V)=>D.distanceSq+=V*F),I.sort((D,V)=>D.distanceSq-V.distanceSq),I.some(D=>d=D.callback(D.feature,D.layer,D.geometry)),d}hasFeatureAtCoordinate(e,n,r,i,s,a){return this.forEachFeatureAtCoordinate(e,n,r,i,Xv,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){Xi()}scheduleExpireIconCache(e){jg.canExpireCache()&&e.postRenderFunctions.push(Ttt)}}function Ttt(t,e){jg.expire()}class JT extends Kh{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}class Itt extends Stt{constructor(e){super(e),this.fontChangeListenerKey_=Yi(bv,Ib.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=lm+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new JT(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){xo(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(yu.PRECOMPOSE,e);const n=e.layerStatesArray.sort(function(l,o){return l.zIndex-o.zIndex});n.some(l=>l.layer instanceof Yb&&l.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let l=0,o=n.length;l<o;++l){const d=n[l];e.layerIndex=l;const p=d.layer,A=p.getSourceState();if(!bG(d,i)||A!="ready"&&A!="undefined"){p.unrender();continue}const v=p.render(e,a);v&&(v!==a&&(this.children_.push(v),a=v),s.push(d))}this.declutter(e,s),xet(this.element_,this.children_),this.dispatchRenderEvent(yu.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){for(let r=n.length-1;r>=0;--r){const i=n[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}class wy extends Kh{constructor(e,n){super(e),this.layer=n}}const y4={LAYERS:"layers"};class M_ extends pG{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(y4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new _u(r.slice(),{unique:!0}):zs(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new _u(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(xo),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Yi(e,zl.ADD,this.handleLayersAdd_,this),Yi(e,zl.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(xo);Hb(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const s=n[r];this.registerLayerListeners_(s),this.dispatchEvent(new wy("addlayer",s))}this.changed()}registerLayerListeners_(e){const n=[Yi(e,Ib.PROPERTYCHANGE,this.handleLayerChange_,this),Yi(e,pi.CHANGE,this.handleLayerChange_,this)];e instanceof M_&&n.push(Yi(e,"addlayer",this.handleLayerGroupAdd_,this),Yi(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Vr(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new wy("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new wy("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new wy("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=Vr(n);this.listenerKeys_[r].forEach(xo),delete this.listenerKeys_[r],this.dispatchEvent(new wy("removelayer",n)),this.changed()}getLayers(){return this.get(y4.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new wy("removelayer",r[i]))}this.set(y4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(n)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,l=n.length;a<l;a++){const o=n[a];o.opacity*=i.opacity,o.visible=o.visible&&i.visible,o.maxResolution=Math.min(o.maxResolution,i.maxResolution),o.minResolution=Math.max(o.minResolution,i.minResolution),o.minZoom=Math.max(o.minZoom,i.minZoom),o.maxZoom=Math.min(o.maxZoom,i.maxZoom),i.extent!==void 0&&(o.extent!==void 0?o.extent=wu(o.extent,i.extent):o.extent=i.extent),o.zIndex===void 0&&(o.zIndex=s)}return n}getSourceState(){return"ready"}}class Ix extends Kh{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class Dg extends Ix{constructor(e,n,r,i,s,a){super(e,n,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const _o={SINGLECLICK:"singleclick",CLICK:pi.CLICK,DBLCLICK:pi.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Vg={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Btt extends LE{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Yi(r,Vg.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Yi(r,Vg.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(pi.TOUCHMOVE,this.boundHandleTouchMove_,dfe?{passive:!1}:!1)}emulateClick_(e){let n=new Dg(_o.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Dg(_o.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Dg(_o.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==_o.POINTERUP||n.type==_o.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==_o.POINTERDOWN||n.type==_o.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Dg(_o.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(xo),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Dg(_o.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Yi(r,_o.POINTERMOVE,this.handlePointerMove_,this),Yi(r,_o.POINTERUP,this.handlePointerUp_,this),Yi(this.element_,_o.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Yi(this.element_.getRootNode(),_o.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Dg(_o.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Dg(_o.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(xo(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(pi.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(xo(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(xo),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const EA={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},rc={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},UO=1/0;class Mtt{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Hb(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){zs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=UO?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,s=n[e],a=r[e],l=e;for(;e<i>>1;){const o=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),p=d<i&&r[d]<r[o]?d:o;n[e]=n[p],r[e]=r[p],e=p}n[e]=s,r[e]=a,this.siftDown_(l,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,s=r[n],a=i[n];for(;n>e;){const l=this.getParentIndex_(n);if(i[l]>a)r[n]=r[l],i[n]=i[l],n=l;else break}r[n]=s,i[n]=a}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const s=n.length;let a,l,o;for(l=0;l<s;++l)a=n[l],o=e(a),o==UO?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=o,n[i++]=a);n.length=i,r.length=i,this.heapify_()}}const Ar={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ltt extends Mtt{constructor(e,n){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(pi.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===Ar.LOADED||r===Ar.ERROR||r===Ar.EMPTY){r!==Ar.ERROR&&n.removeEventListener(pi.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0,i,s,a;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;)s=this.dequeue()[0],a=s.getKey(),i=s.getState(),i===Ar.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++r,s.load())}}function Rtt(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return UO;const s=t.viewState.center,a=r[0]-s[0],l=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+l*l)/i}let jl=class extends Od{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){PO(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&PO(this.element);for(let n=0,r=this.listenerKeys.length;n<r;++n)xo(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ZC&&this.listenerKeys.push(Yi(e,EA.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}};class Efe extends jl{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const l=e.label!==void 0?e.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=i):this.label_=l;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(o),this.toggleButton_.addEventListener(pi.CLICK,this.handleClick_.bind(this),!1);const d=n+" "+lm+" "+Wb+(this.collapsed_&&this.collapsible_?" "+FO:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=d,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(i=>i.getAttributions(e)))),r=!this.getMap().getAllLayers().some(i=>i.getSource()&&i.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(r),n}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>QH(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!pm(n,this.renderedAttributions_)){ffe(this.ulElement_);for(let i=0,s=n.length;i<s;++i){const a=document.createElement("li");a.innerHTML=n[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(FO),this.collapsed_?rE(this.collapseLabel_,this.label_):rE(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}let Sfe=class extends jl{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=n+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(pi.CLICK,this.handleClick_.bind(this),!1);const l=n+" "+lm+" "+Wb,o=this.element;o.className=l,o.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(BR)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Mp}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(BR);!s&&r===0?this.element.classList.add(BR):s&&r!==0&&this.element.classList.remove(BR)}this.label_.style.transform=i}this.rotation_=r}};class Tfe extends jl{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",l=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",o=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=i,p.setAttribute("type","button"),p.title=o,p.appendChild(typeof a=="string"?document.createTextNode(a):a),p.addEventListener(pi.CLICK,this.handleClick_.bind(this,r),!1);const A=document.createElement("button");A.className=s,A.setAttribute("type","button"),A.title=d,A.appendChild(typeof l=="string"?document.createTextNode(l):l),A.addEventListener(pi.CLICK,this.handleClick_.bind(this,-r),!1);const v=n+" "+lm+" "+Wb,y=this.element;y.className=v,y.appendChild(p),y.appendChild(A),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Mp})):r.setZoom(s)}}}function Ptt(t){t=t||{};const e=new _u;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new Tfe(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new Sfe(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Efe(t.attributionOptions)),e}const E8={ACTIVE:"active"};class Xb extends Od{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(E8.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(E8.ACTIVE,e)}setMap(e){this.map_=e}}function Ftt(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:_G,center:t.getConstrainedCenter(i)})}}function PG(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const s=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:r!==void 0?r:250,easing:Mp})}class Ott extends Xb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==_o.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,l=i.getView();PG(l,a,s,this.duration_),r.preventDefault(),n=!0}return!n}}class WA extends Xb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==_o.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==_o.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==_o.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==_o.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function FG(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}function zO(t){const e=arguments;return function(n){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](n),!!r);++i);return r}}const Ife=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Bfe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Mfe=function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},OG=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?Mfe(t):!0},pB=Xv,Ntt=function(t){return t.type==_o.CLICK},NG=function(t){const e=t.originalEvent;return e.button==0&&!(yet&&SG&&e.ctrlKey)},$O=Vb,ktt=function(t){return t.type=="pointermove"},j2=function(t){return t.type==_o.SINGLECLICK},Dtt=function(t){return t.type==_o.DBLCLICK},K2=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Utt=function(t){const e=t.originalEvent;return!e.altKey&&(SG?e.metaKey:e.ctrlKey)&&!e.shiftKey},Lfe=function(t){const e=t.originalEvent;return SG?e.metaKey:e.ctrlKey},uM=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},kG=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},cb=function(t){const e=t.originalEvent;return zs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},ztt=function(t){const e=t.originalEvent;return zs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType==="touch"},$tt=function(t){const e=t.originalEvent;return zs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType==="pen"},DG=function(t){const e=t.originalEvent;return zs(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0},Vtt=Object.freeze(Object.defineProperty({__proto__:null,all:zO,altKeyOnly:Ife,altShiftKeysOnly:Bfe,always:pB,click:Ntt,doubleClick:Dtt,focus:Mfe,focusWithTabindex:OG,mouseActionButton:NG,mouseOnly:cb,never:$O,noModifierKeys:K2,penOnly:$tt,platformModifierKey:Lfe,platformModifierKeyOnly:Utt,pointerMove:ktt,primaryAction:DG,shiftKeyOnly:uM,singleClick:j2,targetNotEditable:kG,touchOnly:ztt},Symbol.toStringTag,{value:"Module"}));class Htt extends WA{constructor(e){super({stopDown:Vb}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:zO(K2,DG);this.condition_=e.onFocusOnly?zO(OG,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(FG(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=e.map.getView();Hde(s,l.getResolution()),tG(s,l.getRotation()),l.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),l=n.getPixelFromCoordinateInternal(a),o=n.getCoordinateFromPixelInternal([l[0]-i*Math.cos(s),l[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(o),duration:500,easing:Mp})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Rfe extends WA{constructor(e){e=e||{},super({stopDown:Vb}),this.condition_=e.condition?e.condition:Bfe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!cb(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===vG)return;const i=n.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const l=a-this.lastAngle_;r.adjustRotationInternal(-l)}this.lastAngle_=a}handleUpEvent(e){return cb(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return cb(e)&&NG(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Gtt extends T2{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new La([i])}getGeometry(){return this.geometry_}}const MR={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class _4 extends Kh{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class Pfe extends WA{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Gtt(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:NG,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],s=r[1]-n[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new _4(MR.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new _4(n?MR.BOXEND:MR.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _4(MR.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class Qtt extends Pfe{constructor(e){e=e||{};const n=e.condition?e.condition:uM;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),l=r.getResolution()/a;i=i.clone(),i.scale(l*l)}r.fitInternal(i,{duration:this.duration_,easing:Mp})}}const _1={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class jtt extends Xb{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return K2(n)&&kG(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==pi.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==_1.DOWN||i==_1.LEFT||i==_1.RIGHT||i==_1.UP)){const a=e.map.getView(),l=a.getResolution()*this.pixelDelta_;let o=0,d=0;i==_1.DOWN?d=-l:i==_1.LEFT?o=-l:i==_1.RIGHT?o=l:d=l;const p=[o,d];tG(p,a.getRotation()),Ftt(a,p,this.duration_),r.preventDefault(),n=!0}}return!n}}class Ktt extends Xb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!Lfe(n)&&kG(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==pi.KEYDOWN||e.type==pi.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,l=s.getView();PG(l,a,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}class Wtt{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[n]-this.points_[r],a=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class qtt extends Xb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:pB;this.condition_=e.onFocusOnly?zO(OG,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==pi.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==pi.WHEEL&&(s=i.deltaY,get&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=ufe),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const l=r.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=s;const o=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),o),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-va(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),PG(n,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Ytt extends WA{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Vb),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const o=s-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=o}this.lastAngle_=s;const a=e.map,l=a.getView();l.getConstraints().rotation!==vG&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(FG(this.targetPointers))),this.rotating_&&(a.render(),l.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class Xtt extends WA{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Vb),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,l=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(n=this.lastDistance_/l),this.lastDistance_=l;const o=e.map,d=o.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(FG(this.targetPointers))),o.render(),d.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function Ztt(t){t=t||{};const e=new _u,n=new Wtt(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new Rfe),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new Ott({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new Htt({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new Ytt),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new Xtt({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new jtt),e.push(new Ktt({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new qtt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new Qtt({duration:t.zoomDuration})),e}function Ffe(t){if(t instanceof Kb){t.setMapInternal(null);return}t instanceof M_&&t.getLayers().forEach(Ffe)}function Ofe(t,e){if(t instanceof Kb){t.setMapInternal(e);return}if(t instanceof M_){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)Ofe(n[r],e)}}let Bv=class extends Od{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=Jtt(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:ufe,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ya(),this.pixelToCoordinateTransform_=Ya(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||Ptt(),this.interactions=n.interactions||Ztt({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Ltt(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(rc.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(rc.VIEW,this.handleViewChanged_),this.addChangeListener(rc.SIZE,this.handleSizeChanged_),this.addChangeListener(rc.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof hp)&&e.view.then(function(i){r.setView(new hp(i))}),this.controls.addEventListener(zl.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(zl.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(zl.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(zl.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(zl.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(zl.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Ofe(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:Xv,l=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,l,n,null,a,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof M_?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Xv,s=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],l="changedTouches"in e?e.changedTouches[0]:e;return[(l.clientX-r.left)/s,(l.clientY-r.top)/a]}getTarget(){return this.get(rc.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return l_(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Ta(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(rc.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof _u){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const n=ol(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Ta(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(rc.SIZE)}getView(){return this.get(rc.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return Rtt(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new Dg(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===Vg.POINTERDOWN||r===pi.WHEEL||r===pi.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=n.target;if(this.overlayContainerStopEvent_.contains(a)||!(s===i?i.documentElement:s).contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[da.ANIMATING]||a[da.INTERACTING]){const l=Date.now()-e.time>8;i=l?0:8,s=l?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(yu.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(yu.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ix(EA.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ix(EA.LOADSTART,this,e))));const r=this.postRenderFunctions_;for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)xo(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(pi.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(pi.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,PO(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Itt(this)),this.mapBrowserEventHandler_=new Btt(this,this.moveTolerance_);for(const s in _o)this.mapBrowserEventHandler_.addEventListener(_o[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(pi.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(pi.WHEEL,this.boundHandleBrowserEvent_,dfe?{passive:!1}:!1);const r=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Yi(r,pi.KEYDOWN,this.handleBrowserEvent,this),Yi(r,pi.KEYPRESS,this.handleBrowserEvent,this)];const i=n.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(xo(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(xo(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Yi(e,Ib.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Yi(e,pi.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(xo),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new wy("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Yi(e,Ib.PROPERTYCHANGE,this.render,this),Yi(e,pi.CHANGE,this.render,this),Yi(e,"addlayer",this.handleLayerAdd_,this),Yi(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Ffe(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(n!==void 0&&QJ(n)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:JC(l.center,l.resolution,l.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:a,wantedTiles:{},mapId:Vr(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const o=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=JC(l.nextCenter,l.nextResolution,o,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Am(this.previousExtent_)&&!UA(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Ix(EA.MOVESTART,this,i)),this.previousExtent_=f0(this.previousExtent_)),this.previousExtent_&&!s.viewHints[da.ANIMATING]&&!s.viewHints[da.INTERACTING]&&!UA(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Ix(EA.MOVEEND,this,s)),WH(s.extent,this.previousExtent_))),this.dispatchEvent(new Ix(EA.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(EA.LOADSTART)||this.hasListener(EA.LOADEND)||this.hasListener(yu.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new wy("removelayer",n)),this.set(rc.LAYERGROUP,e)}setSize(e){this.set(rc.SIZE,e)}setTarget(e){this.set(rc.TARGET,e)}setView(e){if(!e||e instanceof hp){this.set(rc.VIEW,e);return}this.set(rc.VIEW,new hp);const n=this;e.then(function(r){n.setView(new hp(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(n=[s,a],!QJ(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&jde("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!pm(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function Jtt(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new M_({layers:t.layers});n[rc.LAYERGROUP]=r,n[rc.TARGET]=t.target,n[rc.VIEW]=t.view instanceof hp?t.view:new hp;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new _u(t.controls.slice()):(zs(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new _u(t.interactions.slice()):(zs(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let a;return t.overlays!==void 0?Array.isArray(t.overlays)?a=new _u(t.overlays.slice()):(zs(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=t.overlays):a=new _u,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:n}}const ih={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Nfe extends Od{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Met,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ih.ELEMENT,this.handleElementChanged),this.addChangeListener(ih.MAP,this.handleMapChanged),this.addChangeListener(ih.OFFSET,this.handleOffsetChanged),this.addChangeListener(ih.POSITION,this.handlePositionChanged),this.addChangeListener(ih.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(ih.ELEMENT)}getId(){return this.id}getMap(){return this.get(ih.MAP)||null}getOffset(){return this.get(ih.OFFSET)}getPosition(){return this.get(ih.POSITION)}getPositioning(){return this.get(ih.POSITIONING)}handleElementChanged(){ffe(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(PO(this.element),xo(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Yi(e,EA.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(ih.ELEMENT,e)}setMap(e){this.set(ih.MAP,e)}setOffset(e){this.set(ih.OFFSET,e)}setPosition(e){this.set(ih.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(ih.POSITION))return;const r=this.getRect(n.getTargetElement(),n.getSize()),i=this.getElement(),s=this.getRect(i,[bet(i),wet(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!Cd(r,s)){const l=s[0]-r[0],o=r[2]-s[2],d=s[1]-r[1],p=r[3]-s[3],A=[0,0];if(l<0?A[0]=l-a:o<0&&(A[0]=Math.abs(o)+a),d<0?A[1]=d-a:p<0&&(A[1]=Math.abs(p)+a),A[0]!==0||A[1]!==0){const v=n.getView().getCenterInternal(),y=n.getPixelFromCoordinateInternal(v);if(!y)return;const C=[y[0]+A[0],y[1]+A[1]],x=e.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(C),duration:x.duration,easing:x.easing})}}}getRect(e,n){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+n[0],s+n[1]]}setPositioning(e){this.set(ih.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(n),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,n){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",l=Math.round(e[1]+i[1])+"px";let o="0%",d="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?o="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(o="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?d="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(d="-50%");const p=`translate(${o}, ${d}) translate(${a}, ${l})`;this.rendered.transform_!=p&&(this.rendered.transform_=p,r.transform=p)}getOptions(){return this.options}}function ent(t){const e=Object.keys(t.defs),n=e.length;let r,i;for(r=0;r<n;++r){const s=e[r];if(!Oi(s)){const a=t.defs(s);let l=a.units;!l&&a.projName==="longlat"&&(l="degrees"),Kde(new Jv({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:l}))}}for(r=0;r<n;++r){const s=e[r],a=Oi(s);for(i=0;i<n;++i){const l=e[i],o=Oi(l);if(!$de(s,l))if(t.defs[s]===t.defs[l])g8([a,o]);else{const d=t(s,l);bJe(a,o,kJ(a,o,d.forward),kJ(o,a,d.inverse))}}}}class kfe{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return zs(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return zs(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){zs(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}class hM extends LE{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(pi.CHANGE)}release(){this.state===Ar.ERROR&&this.setState(Ar.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==Ar.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==Ar.LOADED){e.interimTile=null;break}e.getState()==Ar.LOADING?n=e:e.getState()==Ar.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ar.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Xi()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:yG(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class W2 extends hM{constructor(e,n,r,i,s,a){super(e,n,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Ar.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ar.ERROR,this.unlistenImage_(),this.image_=tnt(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Ar.LOADED:this.state=Ar.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Ar.ERROR&&(this.state=Ar.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ar.IDLE&&(this.state=Ar.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Cet(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function tnt(){const t=Il(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}const UG=.5,nnt=10,oee=.25;class zG{constructor(e,n,r,i,s,a){this.sourceProj_=e,this.targetProj_=n;let l={};const o=nE(this.targetProj_,this.sourceProj_);this.transformInv_=function(P){const F=P[0]+"/"+P[1];return l[F]||(l[F]=o(P)),l[F]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&no(i)>=no(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?no(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?no(this.targetProj_.getExtent()):null;const d=KA(r),p=iM(r),A=RE(r),v=rM(r),y=this.transformInv_(d),C=this.transformInv_(p),x=this.transformInv_(A),M=this.transformInv_(v),I=nnt+(a?Math.max(0,Math.ceil(Math.log2(Bb(r)/(a*a*256*256)))):0);if(this.addQuad_(d,p,A,v,y,C,x,M,I),this.wrapsXInSource_){let P=1/0;this.triangles_.forEach(function(F,D,V){P=Math.min(P,F.source[0][0],F.source[1][0],F.source[2][0])}),this.triangles_.forEach(F=>{if(Math.max(F.source[0][0],F.source[1][0],F.source[2][0])-P>this.sourceWorldWidth_/2){const D=[[F.source[0][0],F.source[0][1]],[F.source[1][0],F.source[1][1]],[F.source[2][0],F.source[2][1]]];D[0][0]-P>this.sourceWorldWidth_/2&&(D[0][0]-=this.sourceWorldWidth_),D[1][0]-P>this.sourceWorldWidth_/2&&(D[1][0]-=this.sourceWorldWidth_),D[2][0]-P>this.sourceWorldWidth_/2&&(D[2][0]-=this.sourceWorldWidth_);const V=Math.min(D[0][0],D[1][0],D[2][0]);Math.max(D[0][0],D[1][0],D[2][0])-V<this.sourceWorldWidth_/2&&(F.source=D)}})}l={}}addTriangle_(e,n,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,n,r]})}addQuad_(e,n,r,i,s,a,l,o,d){const p=sc([s,a,l,o]),A=this.sourceWorldWidth_?no(p)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&A>.5&&A<1;let C=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const M=sc([e,n,r,i]);C=no(M)/this.targetWorldWidth_>oee||C}!y&&this.sourceProj_.isGlobal()&&A&&(C=A>oee||C)}if(!C&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!Ua(p,this.maxSourceExtent_))return;let x=0;if(!C&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1]))){if(d>0)C=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(o[0])||!isFinite(o[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(d>0){if(!C){const M=[(e[0]+r[0])/2,(e[1]+r[1])/2],I=this.transformInv_(M);let P;y?P=(Fv(s[0],v)+Fv(l[0],v))/2-Fv(I[0],v):P=(s[0]+l[0])/2-I[0];const F=(s[1]+l[1])/2-I[1];C=P*P+F*F>this.errorThresholdSquared_}if(C){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const M=[(n[0]+r[0])/2,(n[1]+r[1])/2],I=this.transformInv_(M),P=[(i[0]+e[0])/2,(i[1]+e[1])/2],F=this.transformInv_(P);this.addQuad_(e,n,M,P,s,a,I,F,d-1),this.addQuad_(P,M,r,i,F,I,l,o,d-1)}else{const M=[(e[0]+n[0])/2,(e[1]+n[1])/2],I=this.transformInv_(M),P=[(r[0]+i[0])/2,(r[1]+i[1])/2],F=this.transformInv_(P);this.addQuad_(e,M,P,i,s,I,F,o,d-1),this.addQuad_(M,n,r,P,I,a,l,F,d-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}x&11||this.addTriangle_(e,r,i,s,l,o),x&14||this.addTriangle_(e,r,n,s,l,a),x&&(x&13||this.addTriangle_(n,i,e,a,o,s),x&7||this.addTriangle_(n,i,r,a,o,l))}calculateSourceExtent(){const e=Ql();return this.triangles_.forEach(function(n,r,i){const s=n.source;ob(e,s[0]),ob(e,s[1]),ob(e,s[2])}),e}getTriangles(){return this.triangles_}}let b4;const Dv=[];function aee(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function w4(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function rnt(){if(b4===void 0){const t=Il(6,6,Dv);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",aee(t,4,5,4,0),aee(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;b4=w4(e,0)||w4(e,4)||w4(e,8),Mb(t),Dv.push(t.canvas)}return b4}function AB(t,e,n,r){const i=am(n,e,t);let s=MO(e,r,n);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const l=t.getMetersPerUnit();l!==void 0&&(s/=l);const o=t.getExtent();if(!o||DA(o,i)){const d=MO(t,s,i)/s;isFinite(d)&&d>0&&(s/=d)}return s}function Dfe(t,e,n,r){const i=Gu(n);let s=AB(t,e,i,r);return(!isFinite(s)||s<=0)&&P2(n,function(a){return s=AB(t,e,a,r),isFinite(s)&&s>0}),s}function $G(t,e,n,r,i,s,a,l,o,d,p,A,v,y){const C=Il(Math.round(n*t),Math.round(n*e),Dv);if(A||(C.imageSmoothingEnabled=!1),o.length===0)return C.canvas;C.scale(n,n);function x(V){return Math.round(V*n)/n}C.globalCompositeOperation="lighter";const M=Ql();o.forEach(function(V,H,Q){sb(M,V.extent)});let I;const P=n/r,F=(A?1:1+Math.pow(2,-24))/P;if(!v||o.length!==1||d!==0){if(I=Il(Math.round(no(M)*P),Math.round(Xa(M)*P),Dv),A||(I.imageSmoothingEnabled=!1),i&&y){const V=(i[0]-M[0])*P,H=-(i[3]-M[3])*P,Q=no(i)*P,G=Xa(i)*P;I.rect(V,H,Q,G),I.clip()}o.forEach(function(V,H,Q){const G=(V.extent[0]-M[0])*P,W=-(V.extent[3]-M[3])*P,te=no(V.extent)*P,q=Xa(V.extent)*P;V.image.width>0&&V.image.height>0&&I.drawImage(V.image,d,d,V.image.width-2*d,V.image.height-2*d,A?G:Math.round(G),A?W:Math.round(W),A?te:Math.round(G+te)-Math.round(G),A?q:Math.round(W+q)-Math.round(W))})}const D=KA(a);return l.getTriangles().forEach(function(V,H,Q){const G=V.source,W=V.target;let te=G[0][0],q=G[0][1],Y=G[1][0],ee=G[1][1],ce=G[2][0],se=G[2][1];const le=x((W[0][0]-D[0])/s),ie=x(-(W[0][1]-D[1])/s),pe=x((W[1][0]-D[0])/s),ue=x(-(W[1][1]-D[1])/s),me=x((W[2][0]-D[0])/s),Le=x(-(W[2][1]-D[1])/s),ae=te,be=q;te=0,q=0,Y-=ae,ee-=be,ce-=ae,se-=be;const _e=[[Y,ee,0,0,pe-le],[ce,se,0,0,me-le],[0,0,Y,ee,ue-ie],[0,0,ce,se,Le-ie]],$e=pJe(_e);if(!$e)return;if(C.save(),C.beginPath(),rnt()||!A){C.moveTo(pe,ue);const Ie=4,Ne=le-pe,Je=ie-ue;for(let je=0;je<Ie;je++)C.lineTo(pe+x((je+1)*Ne/Ie),ue+x(je*Je/(Ie-1))),je!=Ie-1&&C.lineTo(pe+x((je+1)*Ne/Ie),ue+x((je+1)*Je/(Ie-1)));C.lineTo(me,Le)}else C.moveTo(pe,ue),C.lineTo(le,ie),C.lineTo(me,Le);C.clip(),C.transform($e[0],$e[2],$e[1],$e[3],le,ie),C.translate(M[0]-ae,M[3]-be);let Re;if(I)Re=I.canvas,C.scale(F,-F);else{const Ie=o[0],Ne=Ie.extent;Re=Ie.image,C.scale(no(Ne)/Re.width,-Xa(Ne)/Re.height)}C.drawImage(Re,0,0),C.restore()}),I&&(Mb(I),Dv.push(I.canvas)),p&&(C.save(),C.globalCompositeOperation="source-over",C.strokeStyle="black",C.lineWidth=1,l.getTriangles().forEach(function(V,H,Q){const G=V.target,W=(G[0][0]-D[0])/s,te=-(G[0][1]-D[1])/s,q=(G[1][0]-D[0])/s,Y=-(G[1][1]-D[1])/s,ee=(G[2][0]-D[0])/s,ce=-(G[2][1]-D[1])/s;C.beginPath(),C.moveTo(q,Y),C.lineTo(W,te),C.lineTo(ee,ce),C.closePath(),C.stroke()}),C.restore()),C.canvas}class oE extends hM{constructor(e,n,r,i,s,a,l,o,d,p,A,v){super(s,Ar.IDLE,v),this.renderEdges_=A!==void 0?A:!1,this.pixelRatio_=l,this.gutter_=o,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const y=i.getTileCoordExtent(this.wrappedTileCoord_),C=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const M=C?wu(y,C):y;if(Bb(M)===0){this.state=Ar.EMPTY;return}const I=e.getExtent();I&&(x?x=wu(x,I):x=I);const P=i.getResolution(this.wrappedTileCoord_[0]),F=Dfe(e,r,M,P);if(!isFinite(F)||F<=0){this.state=Ar.EMPTY;return}const D=p!==void 0?p:UG;if(this.triangulation_=new zG(e,r,M,x,F*D,P),this.triangulation_.getTriangles().length===0){this.state=Ar.EMPTY;return}this.sourceZ_=n.getZForResolution(F);let V=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(V[1]=va(V[1],x[1],x[3]),V[3]=va(V[3],x[1],x[3])):V=wu(V,x)),!Bb(V))this.state=Ar.EMPTY;else{const H=n.getTileRangeForExtentAndZ(V,this.sourceZ_);for(let Q=H.minX;Q<=H.maxX;Q++)for(let G=H.minY;G<=H.maxY;G++){const W=d(this.sourceZ_,Q,G,l);W&&this.sourceTiles_.push(W)}this.sourceTiles_.length===0&&(this.state=Ar.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==Ar.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=Ar.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=$G(i,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,o,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ar.LOADED}this.changed()}load(){if(this.state==Ar.IDLE){this.state=Ar.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const r=n.getState();if(r==Ar.IDLE||r==Ar.LOADING){e++;const i=Yi(n,pi.CHANGE,function(s){const a=n.getState();(a==Ar.LOADED||a==Ar.ERROR||a==Ar.EMPTY)&&(xo(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,r,i){n.getState()==Ar.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(xo),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Mb(this.canvas_.getContext("2d")),Dv.push(this.canvas_),this.canvas_=null),super.release()}}function gB(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function u_(t,e,n){return t+"/"+e+"/"+n}function Ty(t){return u_(t[0],t[1],t[2])}function int(t){const[e,n,r]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return u_(e,n,r)}function Ufe(t){return t.split("/").map(Number)}function VG(t){return(t[1]<<t[0])+t[2]}function snt(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(r,i):!0}class q2 extends kfe{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),r=Ufe(e)[0];this.forEach(i=>{i.tileCoord[0]!==r&&(this.remove(Ty(i.tileCoord)),i.release())})}}const AC={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Y2 extends Od{constructor(e){super(),this.projection=Oi(e.projection),this.attributions_=lee(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=lee(e),this.changed()}setState(e){this.state_=e,this.changed()}}function lee(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}class X2{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Jw(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new X2(t,e,n,r)}const ex=[0,0,0],ny=5;class dM{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,zs(HZe(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,zs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=KA(r)),zs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,zs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:AG,zs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new X2(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const l=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(l.minX,a.minX),a.maxX=Math.min(l.maxX,a.maxX),a.minY=Math.max(l.minY,a.minY),a.maxY=Math.min(l.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let l=i.minY,o=i.maxY;l<=o;++l)r([n,s,l])}forEachTileCoordParentTileRange(e,n,r,i){let s,a,l,o=null,d=e[0]-1;for(this.zoomFactor_===2?(a=e[1],l=e[2]):o=this.getTileCoordExtent(e,i);d>=this.minZoom;){if(a!==void 0&&l!==void 0?(a=Math.floor(a/2),l=Math.floor(l/2),s=Jw(a,a,l,l,r)):s=this.getTileRangeForExtentAndZ(o,d,r),n(d,s))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Jw(s,s+1,a,a+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(n===i)return Jw(s,a,s,a,r);if(this.zoomFactor_){const o=Math.pow(this.zoomFactor_,n-i),d=Math.floor(s*o),p=Math.floor(a*o);if(n<i)return Jw(d,d,p,p,r);const A=Math.floor(o*(s+1))-1,v=Math.floor(o*(a+1))-1;return Jw(d,A,p,v,r)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,ex);const i=ex[1],s=ex[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,ex);const a=ex[1],l=ex[2];return Jw(i,a,s,l,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=El(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=El(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,l=r[1]-(e[2]+1)*s[1]*i,o=a+s[0]*i,d=l+s[1]*i;return Ff(a,l,o,d,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,s){const a=this.getZForResolution(r),l=r/this.getResolution(a),o=this.getOrigin(a),d=El(this.getTileSize(a),this.tmpSize_);let p=l*(e-o[0])/r/d[0],A=l*(o[1]-n)/r/d[1];return i?(p=Ry(p,ny)-1,A=Ry(A,ny)-1):(p=Hx(p,ny),A=Hx(A,ny)),gB(a,p,A,s)}getTileCoordForXYAndZ_(e,n,r,i,s){const a=this.getOrigin(r),l=this.getResolution(r),o=El(this.getTileSize(r),this.tmpSize_);let d=(e-a[0])/l/o[0],p=(a[1]-n)/l/o[1];return i?(d=Ry(d,ny)-1,p=Ry(p,ny)-1):(d=Hx(d,ny),p=Hx(p,ny)),gB(r,d,p,s)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=I2(this.resolutions_,e,n||0);return va(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return nfe(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}class S8 extends dM{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function HG(t){let e=t.getDefaultTileGrid();return e||(e=lnt(t),t.setDefaultTileGrid(e)),e}function ont(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),s=Zb(n);if(!DA(s,i)){const a=no(s),l=Math.ceil((s[0]-i[0])/a);return i[0]+=a*l,t.getTileCoordForCoordAndZ(i,r)}return e}function ant(t,e,n,r){r=r!==void 0?r:"top-left";const i=zfe(t,e,n);return new dM({extent:t,origin:kde(t,r),resolutions:i,tileSize:n})}function OE(t){const e=t||{},n=e.extent||Oi("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:zfe(n,e.maxZoom,e.tileSize,e.maxResolution)};return new dM(r)}function zfe(t,e,n,r){e=e!==void 0?e:sfe,n=El(n!==void 0?n:AG);const i=Xa(t),s=no(t);r=r>0?r:Math.max(s/n[0],i/n[1]);const a=e+1,l=new Array(a);for(let o=0;o<a;++o)l[o]=r/Math.pow(2,o);return l}function lnt(t,e,n,r){const i=Zb(t);return ant(i,e,n,r)}function Zb(t){t=Oi(t);let e=t.getExtent();if(!e){const n=180*eE.degrees/t.getMetersPerUnit();e=Ff(-n,-n,n,n)}return e}class GG extends Y2{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&El(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new q2(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){const r=this.getTileCacheForProjection(e);r&&r.expireCache(n)}forEachLoadedTile(e,n,r,i){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a=!0,l,o,d;for(let p=r.minX;p<=r.maxX;++p)for(let A=r.minY;A<=r.maxY;++A)o=u_(n,p,A),d=!1,s.containsKey(o)&&(l=s.get(o),d=l.getState()===Ar.LOADED,d&&(d=i(l)!==!1)),d||(a=!1);return a}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,s){return Xi()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:HG(e)}getTileCacheForProjection(e){const n=this.getProjection();return zs(n===null||bd(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(n),a=El(i.getTileSize(e),this.tmpSize);return s==1?a:afe(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();const r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=ont(r,e,n)),snt(e,r)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){const r=this.getTileCacheForProjection(n);e>r.highWaterMark&&(r.highWaterMark=e)}useTile(e,n,r,i){}}class $fe extends Kh{constructor(e,n){super(e),this.tile=n}}function cnt(t,e){const n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,s=/\{-y\}/g;return function(a,l,o){if(a)return t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(s,function(){const d=a[0],p=e.getFullTileRange(d);if(!p)throw new Error("The {-y} placeholder requires a tile grid with extent");return(p.getHeight()-a[2]-1).toString()})}}function Vfe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=cnt(t[i],e);return VO(r)}function VO(t){return t.length===1?t[0]:function(e,n,r){if(!e)return;const i=VG(e),s=Fv(i,t.length);return t[s](e,n,r)}}function Hfe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}class Z2 extends GG{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Z2.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=Vr(n),i=n.getState();let s;i==Ar.LOADING?(this.tileLoadingKeys_[r]=!0,s=AC.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ar.ERROR?AC.TILELOADERROR:i==Ar.LOADED?AC.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new $fe(s,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=Hfe(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Vfe(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}useTile(e,n,r){const i=u_(e,n,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}class NE extends Z2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:unt,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:W2,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?n:{});for(const i in this.tileCacheForProjection){const s=this.tileCacheForProjection[i];s.expireCache(s==r?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!bd(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!bd(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||bd(n,e)))return this.tileGrid;const r=Vr(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=HG(e)),this.tileGridForProjection[r]}getTileCacheForProjection(e){const n=this.getProjection();if(!n||bd(n,e))return this.tileCache;const r=Vr(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new q2(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}createTile_(e,n,r,i,s,a){const l=[e,n,r],o=this.getTileCoordForTileUrlFunction(l,s),d=o?this.tileUrlFunction(o,i,s):void 0,p=new this.tileClass(l,d!==void 0?Ar.IDLE:Ar.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=a,p.addEventListener(pi.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,n,r,i,s){const a=this.getProjection();if(!a||!s||bd(a,s))return this.getTileInternal(e,n,r,i,a||s);const l=this.getTileCacheForProjection(s),o=[e,n,r];let d;const p=Ty(o);l.containsKey(p)&&(d=l.get(p));const A=this.getKey();if(d&&d.key==A)return d;const v=this.getTileGridForProjection(a),y=this.getTileGridForProjection(s),C=this.getTileCoordForTileUrlFunction(o,s),x=new oE(a,v,s,y,o,C,this.getTilePixelRatio(i),this.getGutter(),(M,I,P,F)=>this.getTileInternal(M,I,P,F,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=A,d?(x.interimTile=d,x.refreshInterimChain(),l.replace(p,x)):l.set(p,x),x}getTileInternal(e,n,r,i,s){let a=null;const l=u_(e,n,r),o=this.getKey();if(!this.tileCache.containsKey(l))a=this.createTile_(e,n,r,i,s,o),this.tileCache.set(l,a);else if(a=this.tileCache.get(l),a.key!=o){const d=a;a=this.createTile_(e,n,r,i,s,o),d.getState()==Ar.IDLE?a.interimTile=d.interimTile:a.interimTile=d,a.refreshInterimChain(),this.tileCache.replace(l,a)}return a}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){const r=Oi(e);if(r){const i=Vr(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function unt(t,e){t.getImage().src=e}function hnt(t){const e=t[0],n=new Array(e);let r=1<<e-1,i,s;for(i=0;i<e;++i)s=48,t[1]&r&&(s+=1),t[2]&r&&(s+=2),n[i]=String.fromCharCode(s),r>>=1;return n.join("")}const dnt='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class fnt extends NE{constructor(e){const n=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:Oi("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=n,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(i=>i.json()).then(i=>this.handleImageryMetadataResponse(i))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const n=e.resourceSets[0].resources[0],r=this.maxZoom_==-1?n.zoomMax:this.maxZoom_,i=this.getProjection(),s=Zb(i),a=this.hidpi_?2:1,l=n.imageWidth==n.imageHeight?n.imageWidth/a:[n.imageWidth/a,n.imageHeight/a],o=OE({extent:s,minZoom:n.zoomMin,maxZoom:r,tileSize:l});this.tileGrid=o;const d=this.culture_,p=this.hidpi_,A=this.placeholderTiles_;if(this.tileUrlFunction=VO(n.imageUrlSubdomains.map(function(v){const y=[0,0,0],C=n.imageUrl.replace("{subdomain}",v).replace("{culture}",d);return function(x,M,I){if(!x)return;gB(x[0],x[1],x[2],y);const P=new URL(C.replace("{quadkey}",hnt(y))),F=P.searchParams;return p&&(F.set("dpi","d1"),F.set("device","mobile")),A===!0?F.delete("n"):A===!1&&F.set("n","z"),P.toString()}})),n.imageryProviders){const v=T_(Oi("EPSG:4326"),this.getProjection());this.setAttributions(y=>{const C=[],x=y.viewState,M=this.getTileGrid(),I=M.getZForResolution(x.resolution,this.zDirection),F=M.getTileCoordForCoordAndZ(x.center,I)[0];return n.imageryProviders.map(function(D){let V=!1;const H=D.coverageAreas;for(let Q=0,G=H.length;Q<G;++Q){const W=H[Q];if(F>=W.zoomMin&&F<=W.zoomMax){const te=W.bbox,q=[te[1],te[0],te[3],te[2]],Y=F2(q,v);if(Ua(Y,y.extent)){V=!0;break}}}V&&C.push(D.attribution)}),C.push(dnt),C})}this.setState("ready")}}class J2 extends NE{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:OE({extent:Zb(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class HO{constructor(e){this.rbush_=new wG(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[Vr(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const a=e[i],l=n[i],o={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:l};r[i]=o,this.items_[Vr(l)]=o}this.rbush_.load(r)}remove(e){const n=Vr(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[Vr(n)],i=[r.minX,r.minY,r.maxX,r.maxY];UA(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,s=e.length;i<s;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return Zv(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return Ff(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class Jb extends zA{constructor(e,n,r){super(),r!==void 0&&n===void 0?this.setFlatCoordinates(r,e):(n=n||0,this.setCenterAndRadius(e,n,r))}clone(){const e=new Jb(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,a=e-s[0],l=n-s[1],o=a*a+l*l;if(o<i){if(o===0)for(let d=0;d<this.stride;++d)r[d]=s[d];else{const d=this.getRadius()/Math.sqrt(o);r[0]=s[0]+d*a,r[1]=s[1]+d*l;for(let p=2;p<this.stride;++p)r[p]=s[p]}return r.length=this.stride,o}return i}containsXY(e,n){const r=this.flatCoordinates,i=e-r[0],s=n-r[1];return i*i+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,r=n[this.stride]-n[0];return Ff(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(Ua(e,n)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:P2(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=e.slice();i[n]=i[0]+r;for(let s=1;s<n;++s)i[n+s]=e[s];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let s=Wde(i,0,e,this.stride);i[s++]=i[0]+n;for(let a=1,l=this.stride;a<l;++a)i[s++]=i[a];i.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const r=this.getCenter(),i=this.getStride();this.setCenter(iG(r,0,r.length,i,e,n,r)),this.changed()}}Jb.prototype.transform;class GO extends k2{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(xo),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)this.changeEventsKeys_.push(Yi(e[n],pi.CHANGE,this.changed,this))}clone(){const e=new GO(x4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<S_(this.getExtent(),e,n))return i;const s=this.geometries_;for(let a=0,l=s.length;a<l;++a)i=s[a].closestPointXY(e,n,r,i);return i}containsXY(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,n))return!0;return!1}computeExtent(e){f0(e);const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)sb(e,n[r].getExtent());return e}getGeometries(){return x4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const l=r[s],o=l.getSimplifiedGeometry(e);n.push(o),o!==l&&(i=!0)}return i?new GO(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,n);this.changed()}scale(e,n,r){r||(r=Gu(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(x4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].applyTransform(e);this.changed()}translate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function x4(t){return t.map(e=>e.clone())}const xu=GO;function QO(t,e,n,r,i,s,a){let l,o;const d=(n-e)/r;if(d===1)l=e;else if(d===2)l=e,o=i;else if(d!==0){let p=t[e],A=t[e+1],v=0;const y=[0];for(let M=e+r;M<n;M+=r){const I=t[M],P=t[M+1];v+=Math.sqrt((I-p)*(I-p)+(P-A)*(P-A)),y.push(v),p=I,A=P}const C=i*v,x=zZe(y,C);x<0?(o=(C-y[-x-2])/(y[-x-1]-y[-x-2]),l=e+(-x-2)*r):l=e+x*r}a=a>1?a:2,s=s||new Array(a);for(let p=0;p<a;++p)s[p]=l===void 0?NaN:o===void 0?t[l+p]:Tf(t[l+p],t[l+r+p],o);return s}function T8(t,e,n,r,i,s){if(n==e)return null;let a;if(i<t[e+r-1])return s?(a=t.slice(e,e+r),a[r-1]=i,a):null;if(t[n-1]<i)return s?(a=t.slice(n-r,n),a[r-1]=i,a):null;if(i==t[e+r-1])return t.slice(e,e+r);let l=e/r,o=n/r;for(;l<o;){const v=l+o>>1;i<t[(v+1)*r-1]?o=v:l=v+1}const d=t[l*r-1];if(i==d)return t.slice((l-1)*r,(l-1)*r+r);const p=t[(l+1)*r-1],A=(i-d)/(p-d);a=[];for(let v=0;v<r-1;++v)a.push(Tf(t[(l-1)*r+v],t[l*r+v],A));return a.push(i),a}function pnt(t,e,n,r,i,s,a){if(a)return T8(t,e,n[n.length-1],r,i,s);let l;if(i<t[r-1])return s?(l=t.slice(0,r),l[r-1]=i,l):null;if(t[t.length-1]<i)return s?(l=t.slice(t.length-r),l[r-1]=i,l):null;for(let o=0,d=n.length;o<d;++o){const p=n[o];if(e!=p){if(i<t[e+r-1])return null;if(i<=t[p-1])return T8(t,e,p,r,i,!1);e=p}}return null}function Gfe(t,e,n,r){let i=t[e],s=t[e+1],a=0;for(let l=e+r;l<n;l+=r){const o=t[l],d=t[l+1];a+=Math.sqrt((o-i)*(o-i)+(d-s)*(d-s)),i=o,s=d}return a}class ko extends zA{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){yo(this.flatCoordinates,e),this.changed()}clone(){const e=new ko(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<S_(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return tfe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,T8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return Iv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return QO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return Gfe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=D2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new ko(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return U2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oM(this.flatCoordinates,0,e,this.stride),this.changed()}}class kc extends zA{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{const i=e,s=[],a=[];for(let o=0,d=i.length;o<d;++o){const p=i[o];yo(s,p.getFlatCoordinates()),a.push(s.length)}const l=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(l,s),this.ends_=a}}appendLineString(e){yo(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new kc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<S_(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,i))}getCoordinateAtM(e,n,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,r=r!==void 0?r:!1,pnt(this.flatCoordinates,0,this.ends_,this.stride,e,n,r))}getCoordinates(){return sB(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ko(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,l=n.length;a<l;++a){const o=n[a],d=new ko(e.slice(s,o),r);i.push(d),s=o}return i}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,l=i.length;a<l;++a){const o=i[a],d=QO(n,r,o,s,.5);yo(e,d),r=o}return e}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=Yde(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new kc(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return NJe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=aM(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Nd extends zA{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){yo(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Nd(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<S_(this.getExtent(),e,n))return i;const s=this.flatCoordinates,a=this.stride;for(let l=0,o=s.length;l<o;l+=a){const d=Pv(e,n,s[l],s[l+1]);if(d<i){i=d;for(let p=0;p<a;++p)r[p]=s[l+p];r.length=a}}return i}getCoordinates(){return Iv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new So(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const l=new So(e.slice(s,s+r),n);i.push(l)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,r=this.stride;for(let i=0,s=n.length;i<s;i+=r){const a=n[i],l=n[i+1];if(L2(e,a,l))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oM(this.flatCoordinates,0,e,this.stride),this.changed()}}function Qfe(t,e,n,r){const i=[];let s=Ql();for(let a=0,l=n.length;a<l;++a){const o=n[a];s=R2(t,e,o[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=o[o.length-1]}return i}class Dc extends zA{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let l=0,o=i.length;l<o;++l){const d=i[l],p=s.length,A=d.getEnds();for(let v=0,y=A.length;v<y;++v)A[v]+=p;yo(s,d.getFlatCoordinates()),a.push(A)}n=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;yo(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let i=0,s=n.length;i<s;++i)n[i]+=r}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();const r=new Dc(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,i){return i<S_(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BJe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),MJe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return OJe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return PJe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),y8(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,v8(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Qfe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=efe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Nd(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;ife(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=y8(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=RJe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new Dc(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(n!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=n;return new La(this.flatCoordinates.slice(n,i),this.layout,r)}getPolygons(){const e=this.layout,n=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,l=r.length;a<l;++a){const o=r[a].slice(),d=o[o.length-1];if(s!==0)for(let A=0,v=o.length;A<v;++A)o[A]-=s;const p=new La(n.slice(s,d),e,o);i.push(p),s=d}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return kJe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=qde(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const Ant=Object.freeze(Object.defineProperty({__proto__:null,Circle:Jb,Geometry:k2,GeometryCollection:xu,LineString:ko,LinearRing:e0,MultiLineString:kc,MultiPoint:Nd,MultiPolygon:Dc,Point:So,Polygon:La,SimpleGeometry:zA},Symbol.toStringTag,{value:"Module"})),cee=Ya();class Nu{constructor(e,n,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?ib(this.flatCoordinates_):R2(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Gu(this.getExtent());this.flatInteriorPoints_=hG(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=fG(this.flatCoordinates_,this.ends_),n=Qfe(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=efe(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=QO(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],l=QO(e,n,a,2,.5);yo(this.flatMidpoints_,l),n=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Oi(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Xa(r)/Xa(n);Hh(cee,r[0],r[3],i,-i,0,0,0),Jg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,cee,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Nu(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Pde((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=D2(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Yde(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=cG(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new Nu(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Nu.prototype.getFlatCoordinates=Nu.prototype.getOrientedFlatCoordinates;const ml={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function jfe(t,e){return[[-1/0,-1/0,1/0,1/0]]}function gnt(t,e){return[t]}function mnt(t){return function(e,n,r){const i=t.getZForResolution(CJe(n)),s=t.getTileRangeForExtentAndZ(Ed(e),i),a=[],l=[i,0,0];for(l[1]=s.minX;l[1]<=s.maxX;++l[1])for(l[2]=s.minY;l[2]<=s.maxY;++l[2])a.push(Qb(t.getTileCoordExtent(l)));return a}}const vnt=Object.freeze(Object.defineProperty({__proto__:null,all:jfe,bbox:gnt,tile:mnt},Symbol.toStringTag,{value:"Module"}));let ynt=!1;function Kfe(t,e,n,r,i,s,a){const l=new XMLHttpRequest;l.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=ynt,l.onload=function(o){if(!l.status||l.status>=200&&l.status<300){const d=e.getType();let p;d=="json"?p=JSON.parse(l.responseText):d=="text"?p=l.responseText:d=="xml"?(p=l.responseXML,p||(p=new DOMParser().parseFromString(l.responseText,"application/xml"))):d=="arraybuffer"&&(p=l.response),p?s(e.readFeatures(p,{extent:n,featureProjection:i}),e.readProjection(p)):a()}else a()},l.onerror=a,l.send()}function uee(t,e){return function(n,r,i,s,a){const l=this;Kfe(t,e,n,r,i,function(o,d){l.addFeatures(o),s!==void 0&&s(o)},a||ZC)}}class ry extends Kh{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class L_ extends Y2{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=ZC,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(zs(this.format_,"`format` must be set when `url` is set"),this.loader_=uee(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:jfe;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new HO:null,this.loadedExtentsRtree_=new HO,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new _u(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=Vr(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new ry(ml.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof Nu||(this.featureChangeKeys_[e]=[Yi(n,pi.CHANGE,this.handleFeatureChange_,this),Yi(n,Ib.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof Nu){const s=this.idIndex_[i];s instanceof Nu?Array.isArray(s)?s.push(n):this.idIndex_[i]=[s,n]:r=!1}else r=!1}return r&&(zs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const l=e[s],o=Vr(l);this.addToIndex_(o,l)&&r.push(l)}for(let s=0,a=r.length;s<a;s++){const l=r[s],o=Vr(l);this.setupChangeEvents_(o,l);const d=l.getGeometry();if(d){const p=d.getExtent();n.push(p),i.push(l)}else this.nullGeometryFeatures_[o]=l}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(ml.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new ry(ml.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(ml.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(ml.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(zl.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(zl.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(xo);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const r=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(r);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new ry(ml.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof Nu||s.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof Nu||i.intersectsExtent(e)){const s=n(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Zv(this.nullGeometryFeatures_)||yo(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=zde(e,n);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let l=1/0;const o=[-1/0,-1/0,1/0,1/0];return n=n||Xv,this.featuresRtree_.forEachInExtent(o,function(d){if(n(d)){const p=d.getGeometry(),A=l;if(l=p instanceof Nu?0:p.closestPointXY(r,i,a,l),l<A){s=d;const v=Math.sqrt(l);o[0]=r-v,o[1]=i-v,o[2]=r+v,o[3]=i+v}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=Vr(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,n)):this.featuresRtree_&&this.featuresRtree_.update(a,n)}const s=n.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[a]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new ry(ml.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:Vr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Zv(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,n,r);for(let a=0,l=s.length;a<l;++a){const o=s[a];i.forEachInExtent(o,function(p){return Cd(p.extent,o)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ry(ml.FEATURESLOADSTART)),this.loader_.call(this,o,n,r,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new ry(ml.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ry(ml.FEATURESLOADERROR))}),i.insert(o,{extent:o.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_;let r;n.forEachInExtent(e,function(i){if(UA(i.extent,e))return r=i,!0}),r&&n.remove(r)}removeFeatures(e){const n=[];for(let r=0,i=e.length;r<i;++r){const s=e[r],a=this.removeFeatureInternal(s);a&&n.push(a)}n.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=Vr(e);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[n];if(!r)return;r.forEach(xo),delete this.featureChangeKeys_[n];const i=e.getId();return i!==void 0&&delete this.idIndex_[i.toString()],delete this.uidIndex_[n],this.hasListener(ml.REMOVEFEATURE)&&this.dispatchEvent(new ry(ml.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let n=!1;for(const r in this.idIndex_){const i=this.idIndex_[r];if(e instanceof Nu&&Array.isArray(i)&&i.includes(e))i.splice(i.indexOf(e),1);else if(this.idIndex_[r]===e){delete this.idIndex_[r],n=!0;break}}return n}setLoader(e){this.loader_=e}setUrl(e){zs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(uee(e,this.format_))}}class Wfe extends L_{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(n){const r=n.getGeometry();return zs(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,n,r){this.source.loadFeatures(e,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(pi.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(pi.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,n){const r=e===0?0:Math.min(n,e)/e,i=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=Ql(),n=this.distance*this.resolution,r=this.source.getFeatures(),i={};for(let s=0,a=r.length;s<a;s++){const l=r[s];if(!(Vr(l)in i)){const o=this.geometryFunction(l);if(o){const d=o.getCoordinates();ib(d,e),Oc(e,n,e);const p=this.source.getFeaturesInExtent(e).filter(function(A){const v=Vr(A);return v in i?!1:(i[v]=!0,!0)});this.features.push(this.createCluster(p,e))}}}}createCluster(e,n){const r=[0,0];for(let l=e.length-1;l>=0;--l){const o=this.geometryFunction(e[l]);o?Vde(r,o.getCoordinates()):e.splice(l,1)}Hde(r,1/e.length);const i=Gu(n),s=this.interpolationRatio,a=new So([r[0]*(1-s)+i[0]*s,r[1]*(1-s)+i[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(a,e):new Ys({geometry:a,features:e})}}function jO(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function I8(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let tx=null;function _nt(t){tx||(tx=Il(t.width,t.height,void 0,{willReadFrequently:!0}));const e=tx.canvas,n=t.width;e.width!==n&&(e.width=n);const r=t.height;return e.height!==r&&(e.height=r),tx.clearRect(0,0,n,r),tx.drawImage(t,0,0),tx.getImageData(0,0,n,r).data}const bnt=[256,256];class QG extends hM{constructor(e){const n=Ar.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null}getSize(){if(this.size_)return this.size_;const e=jO(this.data_);return e?[e.width,e.height]:bnt}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Ar.IDLE&&this.state!==Ar.ERROR)return;this.state=Ar.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=Ar.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=Ar.ERROR,e.changed()})}}class jG extends QG{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const n=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),r=this.targetTileGrid_.getExtent();let i=this.sourceTileGrid_.getExtent();const s=r?wu(n,r):n;if(Bb(s)===0){this.state=Ar.EMPTY;return}const a=e.sourceProj,l=a.getExtent();l&&(i?i=wu(i,l):i=l);const o=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),d=e.targetProj,p=Dfe(a,d,s,o);if(!isFinite(p)||p<=0){this.state=Ar.EMPTY;return}const A=e.errorThreshold!==void 0?e.errorThreshold:UG;if(this.triangulation_=new zG(a,d,s,i,p*A,o),this.triangulation_.getTriangles().length===0){this.state=Ar.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(p);let v=this.triangulation_.calculateSourceExtent();if(i&&(a.canWrapX()?(v[1]=va(v[1],i[1],i[3]),v[3]=va(v[3],i[1],i[3])):v=wu(v,i)),!Bb(v))this.state=Ar.EMPTY;else{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(v,this.sourceZ_),C=e.getTileFunction;for(let x=y.minX;x<=y.maxX;x++)for(let M=y.minY;M<=y.maxY;M++){const I=C(this.sourceZ_,x,M,this.pixelRatio_);I&&this.sourceTiles_.push(I)}this.sourceTiles_.length===0&&(this.state=Ar.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{if(!n||n.getState()!==Ar.LOADED)return;const r=n.getSize(),i=this.gutter_;let s;const a=I8(n.getData());a?s=a:s=_nt(jO(n.getData()));const l=[r[0]+2*i,r[1]+2*i],o=s instanceof Float32Array,d=l[0]*l[1],p=o?Float32Array:Uint8Array,A=new p(s.buffer),v=p.BYTES_PER_ELEMENT,y=v*A.length/d,C=A.byteLength/l[1],x=Math.floor(C/v/l[0]),M=d*x;let I=A;if(A.length!==M){I=new p(M);let P=0,F=0;const D=l[0]*x;for(let V=0;V<l[1];++V){for(let H=0;H<D;++H)I[P++]=A[F+H];F+=C/v}}e.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),data:new Uint8Array(I.buffer),dataType:p,bytesPerPixel:y,pixelSize:l})}),this.sourceTiles_.length=0,e.length===0)this.state=Ar.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(n),l=this.sourceTileGrid_.getResolution(this.sourceZ_),o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let d,p;const A=e[0].bytesPerPixel,v=Math.ceil(A/3);for(let y=v-1;y>=0;--y){const C=[];for(let D=0,V=e.length;D<V;++D){const H=e[D],Q=H.data,G=H.pixelSize,W=G[0],te=G[1],q=Il(W,te,Dv),Y=q.createImageData(W,te),ee=Y.data;let ce=y*3;for(let se=0,le=ee.length;se<le;se+=4)ee[se]=Q[ce],ee[se+1]=Q[ce+1],ee[se+2]=Q[ce+2],ee[se+3]=255,ce+=A;q.putImageData(Y,0,0),C.push({extent:H.extent,image:q.canvas})}const x=$G(i,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,o,this.triangulation_,C,this.gutter_,!1,!1,!1,!0);for(let D=0,V=C.length;D<V;++D){const Q=C[D].image.getContext("2d");Mb(Q),Dv.push(Q.canvas)}const M=x.getContext("2d"),I=M.getImageData(0,0,x.width,x.height);Mb(M),Dv.push(x),d||(p=new Uint8Array(A*I.width*I.height),d=new e[0].dataType(p.buffer));const P=I.data;let F=y*3;for(let D=0,V=P.length;D<V;D+=4)P[D+3]===255?(p[F]=P[D],p[F+1]=P[D+1],p[F+2]=P[D+2]):(p[F]=0,p[F+1]=0,p[F+2]=0),F+=A}this.reprojData_=d,this.reprojSize_=[Math.round(i*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=Ar.LOADED}this.changed()}load(){if(this.state!==Ar.IDLE&&this.state!==Ar.ERROR)return;this.state=Ar.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const r=n.getState();if(r!==Ar.IDLE&&r!==Ar.LOADING)return;e++;const i=Yi(n,pi.CHANGE,function(){const s=n.getState();(s==Ar.LOADED||s==Ar.ERROR||s==Ar.EMPTY)&&(xo(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n){n.getState()==Ar.IDLE&&n.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(xo),this.sourcesListenerKeys_=null}}class wnt extends GG{constructor(e){const n=e.projection===void 0?"EPSG:3857":e.projection;let r=e.tileGrid;r===void 0&&n&&(r=OE({extent:Zb(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:n,tileGrid:r,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?El(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?El(n.getTileSize(e)):[256,256]}getGutterForProjection(e){const n=this.getProjection();return!n||bd(n,e)?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,n,r,i,s){const a=this.getTileCacheForProjection(i),l=u_(e,n,r);if(a.containsKey(l)){const M=a.get(l);if(M&&M.key==this.getKey())return M}const o=this.getTileGrid(),d=Math.max.apply(null,o.getResolutions().map((M,I)=>{const P=El(o.getTileSize(I)),F=this.getTileSize(I);return Math.max(F[0]/P[0],F[1]/P[1])})),p=this.getTileGridForProjection(s),A=this.getTileGridForProjection(i),v=[e,n,r],y=this.getTileCoordForTileUrlFunction(v,i),C=Object.assign({sourceProj:s,sourceTileGrid:p,targetProj:i,targetTileGrid:A,tileCoord:v,wrappedTileCoord:y,pixelRatio:d,gutter:this.getGutterForProjection(s),getTileFunction:(M,I,P,F)=>this.getTile(M,I,P,F,s)},this.tileOptions),x=new jG(C);return x.key=this.getKey(),x}getTile(e,n,r,i,s){const a=this.getProjection();if(a&&s&&!bd(a,s))return this.getReprojTile_(e,n,r,s,a);const l=this.getTileSize(e),o=u_(e,n,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);const d=this.loader_;function p(){return QH(function(){return d(e,n,r)})}const A=Object.assign({tileCoord:[e,n,r],loader:p,size:l},this.tileOptions),v=new QG(A);return v.key=this.getKey(),v.addEventListener(pi.CHANGE,this.handleTileChange_),this.tileCache.set(o,v),v}handleTileChange_(e){const n=e.target,r=Vr(n),i=n.getState();let s;i==Ar.LOADING?(this.tileLoadingKeys_[r]=!0,s=AC.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ar.ERROR?AC.TILELOADERROR:i==Ar.LOADED?AC.TILELOADEND:void 0),s&&this.dispatchEvent(new $fe(s,n))}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||bd(n,e)))return this.tileGrid;const r=Vr(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=HG(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,n){const r=Oi(e);if(r){const i=Vr(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=n)}}getTileCacheForProjection(e){const n=this.getProjection();if(!n||bd(n,e))return this.tileCache;const r=Vr(e);return r in this.tileCacheForProjection_||(this.tileCacheForProjection_[r]=new q2(.1)),this.tileCacheForProjection_[r]}expireCache(e,n){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?n:{});for(const i in this.tileCacheForProjection_){const s=this.tileCacheForProjection_[i];s.expireCache(s==r?n:{})}}clear(){super.clear();for(const e in this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}function ju(t){return(e,...n)=>xnt(t,e,n)}function kE(t,e){return ju(qfe(t,e).get)}const{apply:xnt,construct:H2t,defineProperty:G2t,get:Q2t,getOwnPropertyDescriptor:qfe,getPrototypeOf:KG,has:j2t,ownKeys:Cnt,set:K2t,setPrototypeOf:W2t}=Reflect,{iterator:fM,species:q2t,toStringTag:Ent,for:Y2t}=Symbol,Snt=Object,{create:WG,defineProperty:Tnt,freeze:X2t,is:Z2t}=Snt,Int=Array,Bnt=Int.prototype,Yfe=Bnt[fM],Mnt=ju(Yfe),Xfe=ArrayBuffer,Lnt=Xfe.prototype;kE(Lnt,"byteLength");const hee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;hee&&kE(hee.prototype,"byteLength");const Zfe=KG(Uint8Array);Zfe.from;const Wh=Zfe.prototype;Wh[fM];ju(Wh.keys);ju(Wh.values);ju(Wh.entries);ju(Wh.set);ju(Wh.reverse);ju(Wh.fill);ju(Wh.copyWithin);ju(Wh.sort);ju(Wh.slice);ju(Wh.subarray);kE(Wh,"buffer");kE(Wh,"byteOffset");kE(Wh,"length");kE(Wh,Ent);const Rnt=Uint8Array,Jfe=Uint16Array,qG=Uint32Array,Pnt=Float32Array,mB=KG([][fM]()),epe=ju(mB.next),Fnt=ju(function*(){}().next),Ont=KG(mB),Nnt=DataView.prototype,knt=ju(Nnt.getUint16),YG=WeakMap,tpe=YG.prototype,npe=ju(tpe.get),Dnt=ju(tpe.set),rpe=new YG,Unt=WG(null,{next:{value:function(){const e=npe(rpe,this);return epe(e)}},[fM]:{value:function(){return this}}});function znt(t){if(t[fM]===Yfe&&mB.next===epe)return t;const e=WG(Unt);return Dnt(rpe,e,Mnt(t)),e}const $nt=new YG,Vnt=WG(Ont,{next:{value:function(){const e=npe($nt,this);return Fnt(e)},writable:!0,configurable:!0}});for(const t of Cnt(mB))t!=="next"&&Tnt(Vnt,t,qfe(mB,t));const ipe=new Xfe(4),Hnt=new Pnt(ipe),Gnt=new qG(ipe),Ig=new Jfe(512),Bg=new Rnt(512);for(let t=0;t<256;++t){const e=t-127;e<-24?(Ig[t]=0,Ig[t|256]=32768,Bg[t]=24,Bg[t|256]=24):e<-14?(Ig[t]=1024>>-e-14,Ig[t|256]=1024>>-e-14|32768,Bg[t]=-e-1,Bg[t|256]=-e-1):e<=15?(Ig[t]=e+15<<10,Ig[t|256]=e+15<<10|32768,Bg[t]=13,Bg[t|256]=13):e<128?(Ig[t]=31744,Ig[t|256]=64512,Bg[t]=24,Bg[t|256]=24):(Ig[t]=31744,Ig[t|256]=64512,Bg[t]=13,Bg[t|256]=13)}const XG=new qG(2048);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;!(e&8388608);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,XG[t]=e|n}for(let t=1024;t<2048;++t)XG[t]=939524096+(t-1024<<13);const DE=new qG(64);for(let t=1;t<31;++t)DE[t]=t<<23;DE[31]=1199570944;DE[32]=2147483648;for(let t=33;t<63;++t)DE[t]=2147483648+(t-32<<23);DE[63]=3347054592;const spe=new Jfe(64);for(let t=1;t<64;++t)t!==32&&(spe[t]=1024);function Qnt(t){const e=t>>10;return Gnt[0]=XG[spe[e]+(t&1023)]+DE[e],Hnt[0]}function ope(t,e,...n){return Qnt(knt(t,e,...znt(n)))}var ZG={exports:{}};function ape(t,e,n){const r=n&&n.debug||!1;r&&console.log("[xml-utils] getting "+e+" in "+t);const i=typeof t=="object"?t.outer:t,s=i.slice(0,i.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const o=a[l],d=e+"\\="+o+"([^"+o+"]*)"+o;r&&console.log("[xml-utils] pattern:",d);const A=new RegExp(d).exec(s);if(r&&console.log("[xml-utils] match:",A),A)return A[1]}}ZG.exports=ape;ZG.exports.default=ape;var jnt=ZG.exports;const C4=kf(jnt);var JG={exports:{}},e7={exports:{}},t7={exports:{}};function lpe(t,e,n){const i=new RegExp(e).exec(t.slice(n));return i?n+i.index:-1}t7.exports=lpe;t7.exports.default=lpe;var Knt=t7.exports,n7={exports:{}};function cpe(t,e,n){const i=new RegExp(e).exec(t.slice(n));return i?n+i.index+i[0].length-1:-1}n7.exports=cpe;n7.exports.default=cpe;var Wnt=n7.exports,r7={exports:{}};function upe(t,e){const n=new RegExp(e,"g"),r=t.match(n);return r?r.length:0}r7.exports=upe;r7.exports.default=upe;var qnt=r7.exports;const Ynt=Knt,E4=Wnt,dee=qnt;function hpe(t,e,n){const r=n&&n.debug||!1,i=!(n&&typeof n.nested===!1),s=n&&n.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",n);const a=Ynt(t,`<${e}[ 
>/]`,s);if(r&&console.log("[xml-utils] start:",a),a===-1)return;const l=t.slice(a+e.length);let o=E4(l,"^[^<]*[ /]>",0);const d=o!==-1&&l[o-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",d),d===!1)if(i){let y=0,C=1,x=0;for(;(o=E4(l,"[ /]"+e+">",y))!==-1;){const M=l.substring(y,o+1);if(C+=dee(M,"<"+e+`[ 
	>]`),x+=dee(M,"</"+e+">"),x>=C)break;y=o}}else o=E4(l,"[ /]"+e+">",0);const p=a+e.length+o+1;if(r&&console.log("[xml-utils] end:",p),p===-1)return;const A=t.slice(a,p);let v;return d?v=null:v=A.slice(A.indexOf(">")+1,A.lastIndexOf("<")),{inner:v,outer:A,start:a,end:p}}e7.exports=hpe;e7.exports.default=hpe;var Xnt=e7.exports;const Znt=Xnt;function dpe(t,e,n){const r=[],i=n&&n.debug||!1,s=n&&typeof n.nested=="boolean"?n.nested:!0;let a=n&&n.startIndex||0,l;for(;l=Znt(t,e,{debug:i,startIndex:a});)s?a=l.start+1+e.length:a=l.end,r.push(l);return i&&console.log("findTagsByName found",r.length,"tags"),r}JG.exports=dpe;JG.exports.default=dpe;var Jnt=JG.exports;const ert=kf(Jnt),eI={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Fg={};for(const t in eI)eI.hasOwnProperty(t)&&(Fg[eI[t]]=parseInt(t,10));const trt=[Fg.BitsPerSample,Fg.ExtraSamples,Fg.SampleFormat,Fg.StripByteCounts,Fg.StripOffsets,Fg.StripRowCounts,Fg.TileByteCounts,Fg.TileOffsets,Fg.SubIFDs],S4={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},io={};for(const t in S4)S4.hasOwnProperty(t)&&(io[S4[t]]=parseInt(t,10));const Ad={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},nrt={Unspecified:0,Assocalpha:1,Unassalpha:2},J2t={Version:0,AddCompression:1},eNt={None:0,Deflate:1,Zstandard:2},rrt={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function irt(t,e){const{width:n,height:r}=t,i=new Uint8Array(n*r*3);let s;for(let a=0,l=0;a<t.length;++a,l+=3)s=256-t[a]/e*256,i[l]=s,i[l+1]=s,i[l+2]=s;return i}function srt(t,e){const{width:n,height:r}=t,i=new Uint8Array(n*r*3);let s;for(let a=0,l=0;a<t.length;++a,l+=3)s=t[a]/e*256,i[l]=s,i[l+1]=s,i[l+2]=s;return i}function ort(t,e){const{width:n,height:r}=t,i=new Uint8Array(n*r*3),s=e.length/3,a=e.length/3*2;for(let l=0,o=0;l<t.length;++l,o+=3){const d=t[l];i[o]=e[d]/65536*256,i[o+1]=e[d+s]/65536*256,i[o+2]=e[d+a]/65536*256}return i}function art(t){const{width:e,height:n}=t,r=new Uint8Array(e*n*3);for(let i=0,s=0;i<t.length;i+=4,s+=3){const a=t[i],l=t[i+1],o=t[i+2],d=t[i+3];r[s]=255*((255-a)/256)*((255-d)/256),r[s+1]=255*((255-l)/256)*((255-d)/256),r[s+2]=255*((255-o)/256)*((255-d)/256)}return r}function lrt(t){const{width:e,height:n}=t,r=new Uint8ClampedArray(e*n*3);for(let i=0,s=0;i<t.length;i+=3,s+=3){const a=t[i],l=t[i+1],o=t[i+2];r[s]=a+1.402*(o-128),r[s+1]=a-.34414*(l-128)-.71414*(o-128),r[s+2]=a+1.772*(l-128)}return r}const crt=.95047,urt=1,hrt=1.08883;function drt(t){const{width:e,height:n}=t,r=new Uint8Array(e*n*3);for(let i=0,s=0;i<t.length;i+=3,s+=3){const a=t[i+0],l=t[i+1]<<24>>24,o=t[i+2]<<24>>24;let d=(a+16)/116,p=l/500+d,A=d-o/200,v,y,C;p=crt*(p*p*p>.008856?p*p*p:(p-16/116)/7.787),d=urt*(d*d*d>.008856?d*d*d:(d-16/116)/7.787),A=hrt*(A*A*A>.008856?A*A*A:(A-16/116)/7.787),v=p*3.2406+d*-1.5372+A*-.4986,y=p*-.9689+d*1.8758+A*.0415,C=p*.0557+d*-.204+A*1.057,v=v>.0031308?1.055*v**(1/2.4)-.055:12.92*v,y=y>.0031308?1.055*y**(1/2.4)-.055:12.92*y,C=C>.0031308?1.055*C**(1/2.4)-.055:12.92*C,r[s]=Math.max(0,Math.min(1,v))*255,r[s+1]=Math.max(0,Math.min(1,y))*255,r[s+2]=Math.max(0,Math.min(1,C))*255}return r}const frt="modulepreload",prt=function(t){return"/FindMyTrackPage/"+t},fee={},R_=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(l=>{if(l=prt(l),l in fee)return;fee[l]=!0;const o=l.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=o?"stylesheet":frt,o||(p.as="script",p.crossOrigin=""),p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),o)return new Promise((A,v)=>{p.addEventListener("load",A),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},fpe=new Map;function P_(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>fpe.set(n,e))}async function ppe(t){const e=fpe.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);const n=await e();return new n(t)}P_([void 0,1],()=>R_(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1])).then(t=>t.default));P_(5,()=>R_(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1])).then(t=>t.default));P_(6,()=>{throw new Error("old style JPEG compression is not supported.")});P_(7,()=>R_(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1])).then(t=>t.default));P_([8,32946],()=>R_(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1])).then(t=>t.default));P_(32773,()=>R_(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1])).then(t=>t.default));P_(34887,()=>R_(()=>import("./lerc-DSSsRuq6.js"),__vite__mapDeps([7,5,1])).then(async t=>(await t.zstd.init(),t)).then(t=>t.default));P_(50001,()=>R_(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([8,1])).then(t=>t.default));function eN(t,e,n,r=1){return new(Object.getPrototypeOf(t)).constructor(e*n*r)}function Art(t,e,n,r,i){const s=e/r,a=n/i;return t.map(l=>{const o=eN(l,r,i);for(let d=0;d<i;++d){const p=Math.min(Math.round(a*d),n-1);for(let A=0;A<r;++A){const v=Math.min(Math.round(s*A),e-1),y=l[p*e+v];o[d*r+A]=y}}return o})}function gC(t,e,n){return(1-n)*t+n*e}function grt(t,e,n,r,i){const s=e/r,a=n/i;return t.map(l=>{const o=eN(l,r,i);for(let d=0;d<i;++d){const p=a*d,A=Math.floor(p),v=Math.min(Math.ceil(p),n-1);for(let y=0;y<r;++y){const C=s*y,x=C%1,M=Math.floor(C),I=Math.min(Math.ceil(C),e-1),P=l[A*e+M],F=l[A*e+I],D=l[v*e+M],V=l[v*e+I],H=gC(gC(P,F,x),gC(D,V,x),p%1);o[d*r+y]=H}}return o})}function mrt(t,e,n,r,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return Art(t,e,n,r,i);case"bilinear":case"linear":return grt(t,e,n,r,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function vrt(t,e,n,r,i,s){const a=e/r,l=n/i,o=eN(t,r,i,s);for(let d=0;d<i;++d){const p=Math.min(Math.round(l*d),n-1);for(let A=0;A<r;++A){const v=Math.min(Math.round(a*A),e-1);for(let y=0;y<s;++y){const C=t[p*e*s+v*s+y];o[d*r*s+A*s+y]=C}}}return o}function yrt(t,e,n,r,i,s){const a=e/r,l=n/i,o=eN(t,r,i,s);for(let d=0;d<i;++d){const p=l*d,A=Math.floor(p),v=Math.min(Math.ceil(p),n-1);for(let y=0;y<r;++y){const C=a*y,x=C%1,M=Math.floor(C),I=Math.min(Math.ceil(C),e-1);for(let P=0;P<s;++P){const F=t[A*e*s+M*s+P],D=t[A*e*s+I*s+P],V=t[v*e*s+M*s+P],H=t[v*e*s+I*s+P],Q=gC(gC(F,D,x),gC(V,H,x),p%1);o[d*r*s+y*s+P]=Q}}}return o}function _rt(t,e,n,r,i,s,a="nearest"){switch(a.toLowerCase()){case"nearest":return vrt(t,e,n,r,i,s);case"bilinear":case"linear":return yrt(t,e,n,r,i,s);default:throw new Error(`Unsupported resampling method: '${a}'`)}}function brt(t,e,n){let r=0;for(let i=e;i<n;++i)r+=t[i];return r}function B8(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(e===8)return new Int8Array(n);if(e===16)return new Int16Array(n);if(e===32)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function wrt(t,e){return(t===1||t===2)&&e<=32&&e%8===0?!1:!(t===3&&(e===16||e===32||e===64))}function xrt(t,e,n,r,i,s,a){const l=new DataView(t),o=n===2?a*s:a*s*r,d=n===2?1:r,p=B8(e,i,o),A=parseInt("1".repeat(i),2);if(e===1){let v;n===1?v=r*i:v=i;let y=s*v;y&7&&(y=y+7&-8);for(let C=0;C<a;++C){const x=C*y;for(let M=0;M<s;++M){const I=x+M*d*i;for(let P=0;P<d;++P){const F=I+P*i,D=(C*s+M)*d+P,V=Math.floor(F/8),H=F%8;if(H+i<=8)p[D]=l.getUint8(V)>>8-i-H&A;else if(H+i<=16)p[D]=l.getUint16(V)>>16-i-H&A;else if(H+i<=24){const Q=l.getUint16(V)<<8|l.getUint8(V+2);p[D]=Q>>24-i-H&A}else p[D]=l.getUint32(V)>>32-i-H&A}}}}return p.buffer}class Ape{constructor(e,n,r,i,s,a){this.fileDirectory=e,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const l=e.PlanarConfiguration;if(this.planarConfiguration=typeof l>"u"?1:l,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=a}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)e+=this.getSampleByteSize(n);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,s){return ope(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,n){const r=this.getSampleFormat(e),i=this.getBitsPerSample(e);return B8(r,i,n)}async getTileOrStrip(e,n,r,i,s){const a=Math.ceil(this.getWidth()/this.getTileWidth()),l=Math.ceil(this.getHeight()/this.getTileHeight());let o;const{tiles:d}=this;this.planarConfiguration===1?o=n*a+e:this.planarConfiguration===2&&(o=r*a*l+n*a+e);let p,A;this.isTiled?(p=this.fileDirectory.TileOffsets[o],A=this.fileDirectory.TileByteCounts[o]):(p=this.fileDirectory.StripOffsets[o],A=this.fileDirectory.StripByteCounts[o]);const v=(await this.source.fetch([{offset:p,length:A}],s))[0];let y;return d===null||!d[o]?(y=(async()=>{let C=await i.decode(this.fileDirectory,v);const x=this.getSampleFormat(),M=this.getBitsPerSample();return wrt(x,M)&&(C=xrt(C,x,this.planarConfiguration,this.getSamplesPerPixel(),M,this.getTileWidth(),this.getBlockHeight(n))),C})(),d!==null&&(d[o]=y)):y=d[o],{x:e,y:n,sample:r,data:await y}}async _readRaster(e,n,r,i,s,a,l,o,d){const p=this.getTileWidth(),A=this.getTileHeight(),v=this.getWidth(),y=this.getHeight(),C=Math.max(Math.floor(e[0]/p),0),x=Math.min(Math.ceil(e[2]/p),Math.ceil(v/p)),M=Math.max(Math.floor(e[1]/A),0),I=Math.min(Math.ceil(e[3]/A),Math.ceil(y/A)),P=e[2]-e[0];let F=this.getBytesPerPixel();const D=[],V=[];for(let G=0;G<n.length;++G)this.planarConfiguration===1?D.push(brt(this.fileDirectory.BitsPerSample,0,n[G])/8):D.push(0),V.push(this.getReaderForSample(n[G]));const H=[],{littleEndian:Q}=this;for(let G=M;G<I;++G)for(let W=C;W<x;++W){let te;this.planarConfiguration===1&&(te=this.getTileOrStrip(W,G,0,s,d));for(let q=0;q<n.length;++q){const Y=q,ee=n[q];this.planarConfiguration===2&&(F=this.getSampleByteSize(ee),te=this.getTileOrStrip(W,G,ee,s,d));const ce=te.then(se=>{const le=se.data,ie=new DataView(le),pe=this.getBlockHeight(se.y),ue=se.y*A,me=se.x*p,Le=ue+pe,ae=(se.x+1)*p,be=V[Y],_e=Math.min(pe,pe-(Le-e[3]),y-ue),$e=Math.min(p,p-(ae-e[2]),v-me);for(let Re=Math.max(0,e[1]-ue);Re<_e;++Re)for(let Ie=Math.max(0,e[0]-me);Ie<$e;++Ie){const Ne=(Re*p+Ie)*F,Je=be.call(ie,Ne+D[Y],Q);let je;i?(je=(Re+ue-e[1])*P*n.length+(Ie+me-e[0])*n.length+Y,r[je]=Je):(je=(Re+ue-e[1])*P+Ie+me-e[0],r[Y][je]=Je)}});H.push(ce)}}if(await Promise.all(H),a&&e[2]-e[0]!==a||l&&e[3]-e[1]!==l){let G;return i?G=_rt(r,e[2]-e[0],e[3]-e[1],a,l,n.length,o):G=mrt(r,e[2]-e[0],e[3]-e[1],a,l,o),G.width=a,G.height=l,G}return r.width=a||e[2]-e[0],r.height=l||e[3]-e[1],r}async readRasters({window:e,samples:n=[],interleave:r,pool:i=null,width:s,height:a,resampleMethod:l,fillValue:o,signal:d}={}){const p=e||[0,0,this.getWidth(),this.getHeight()];if(p[0]>p[2]||p[1]>p[3])throw new Error("Invalid subsets");const A=p[2]-p[0],v=p[3]-p[1],y=A*v,C=this.getSamplesPerPixel();if(!n||!n.length)for(let P=0;P<C;++P)n.push(P);else for(let P=0;P<n.length;++P)if(n[P]>=C)return Promise.reject(new RangeError(`Invalid sample index '${n[P]}'.`));let x;if(r){const P=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,F=Math.max.apply(null,this.fileDirectory.BitsPerSample);x=B8(P,F,y*n.length),o&&x.fill(o)}else{x=[];for(let P=0;P<n.length;++P){const F=this.getArrayForSample(n[P],y);Array.isArray(o)&&P<o.length?F.fill(o[P]):o&&!Array.isArray(o)&&F.fill(o),x.push(F)}}const M=i||await ppe(this.fileDirectory);return await this._readRaster(p,n,x,r,M,s,a,l,d)}async readRGB({window:e,interleave:n=!0,pool:r=null,width:i,height:s,resampleMethod:a,enableAlpha:l=!1,signal:o}={}){const d=e||[0,0,this.getWidth(),this.getHeight()];if(d[0]>d[2]||d[1]>d[3])throw new Error("Invalid subsets");const p=this.fileDirectory.PhotometricInterpretation;if(p===Ad.RGB){let I=[0,1,2];if(this.fileDirectory.ExtraSamples!==nrt.Unspecified&&l){I=[];for(let P=0;P<this.fileDirectory.BitsPerSample.length;P+=1)I.push(P)}return this.readRasters({window:e,interleave:n,samples:I,pool:r,width:i,height:s,resampleMethod:a,signal:o})}let A;switch(p){case Ad.WhiteIsZero:case Ad.BlackIsZero:case Ad.Palette:A=[0];break;case Ad.CMYK:A=[0,1,2,3];break;case Ad.YCbCr:case Ad.CIELab:A=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const v={window:d,interleave:!0,samples:A,pool:r,width:i,height:s,resampleMethod:a,signal:o},{fileDirectory:y}=this,C=await this.readRasters(v),x=2**this.fileDirectory.BitsPerSample[0];let M;switch(p){case Ad.WhiteIsZero:M=irt(C,x);break;case Ad.BlackIsZero:M=srt(C,x);break;case Ad.Palette:M=ort(C,y.ColorMap);break;case Ad.CMYK:M=art(C);break;case Ad.YCbCr:M=lrt(C);break;case Ad.CIELab:M=drt(C);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const I=new Uint8Array(M.length/3),P=new Uint8Array(M.length/3),F=new Uint8Array(M.length/3);for(let D=0,V=0;D<M.length;D+=3,++V)I[V]=M[D],P[V]=M[D+1],F[V]=M[D+2];M=[I,P,F]}return M.width=C.width,M.height=C.height,M}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)e.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return e}getGDALMetadata(e=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=ert(r,"Item");e===null?i=i.filter(s=>C4(s,"sample")===void 0):i=i.filter(s=>Number(C4(s,"sample"))===e);for(let s=0;s<i.length;++s){const a=i[s];n[C4(a,"name")]=a.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){const[i,s,a]=e.getResolution();return[i*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),a*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[i,s,a,l,o,d,p,A]=this.fileDirectory.ModelTransformation,y=[[0,0],[0,n],[r,0],[r,n]].map(([M,I])=>[l+i*M+s*I,A+o*M+d*I]),C=y.map(M=>M[0]),x=y.map(M=>M[1]);return[Math.min(...C),Math.min(...x),Math.max(...C),Math.max(...x)]}else{const i=this.getOrigin(),s=this.getResolution(),a=i[0],l=i[1],o=a+s[0]*r,d=l+s[1]*n;return[Math.min(a,o),Math.min(l,d),Math.max(a,o),Math.max(l,d)]}}}class Crt{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,n){const r=this.getUint32(e,n),i=this.getUint32(e+4,n);let s;if(n){if(s=r+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*r+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,n){let r=0;const i=(this._dataView.getUint8(e+(n?7:0))&128)>0;let s=!0;for(let a=0;a<8;a++){let l=this._dataView.getUint8(e+(n?a:7-a));i&&(s?l!==0&&(l=~(l-1)&255,s=!1):l=~l&255),r+=l*256**a}return i&&(r=-r),r}getUint8(e,n){return this._dataView.getUint8(e,n)}getInt8(e,n){return this._dataView.getInt8(e,n)}getUint16(e,n){return this._dataView.getUint16(e,n)}getInt16(e,n){return this._dataView.getInt16(e,n)}getUint32(e,n){return this._dataView.getUint32(e,n)}getInt32(e,n){return this._dataView.getInt32(e,n)}getFloat16(e,n){return ope(this._dataView,e,n)}getFloat32(e,n){return this._dataView.getFloat32(e,n)}getFloat64(e,n){return this._dataView.getFloat64(e,n)}}class Ert{constructor(e,n,r,i){this._dataView=new DataView(e),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,n){return this.sliceOffset<=e&&this.sliceTop>=e+n}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const n=this.readUint32(e),r=this.readUint32(e+4);let i;if(this._littleEndian){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let n=0;const r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(e+(this._littleEndian?s:7-s));r&&(i?a!==0&&(a=~(a-1)&255,i=!1):a=~a&255),n+=a*256**s}return r&&(n=-n),n}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const Srt=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class Trt{constructor(e=Srt,n){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{R_(()=>import("./decoder-CaSv2t6h.js"),[]).then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<e;i++)this.workers.push({worker:r(),idle:!0})}))}async decode(e,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?ppe(e).then(r=>r.decode(e,n)):new Promise(r=>{const i=this.workers.find(l=>l.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const s=this.messageId++,a=l=>{l.data.id===s&&(i.idle=!0,r(l.data.decoded),i.worker.removeEventListener("message",a))};i.worker.addEventListener("message",a),i.worker.postMessage({fileDirectory:e,buffer:n,id:s},[n])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const pee=`\r
\r
`;function gpe(t){if(typeof Object.fromEntries<"u")return Object.fromEntries(t);const e={};for(const[n,r]of t)e[n.toLowerCase()]=r;return e}function Irt(t){const e=t.split(`\r
`).map(n=>{const r=n.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return gpe(e)}function Brt(t){const[e,...n]=t.split(";").map(i=>i.trim()),r=n.map(i=>i.split("="));return{type:e,params:gpe(r)}}function M8(t){let e,n,r;return t&&([,e,n,r]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),n=parseInt(n,10),r=parseInt(r,10)),{start:e,end:n,total:r}}function Mrt(t,e){let n=null;const r=new TextDecoder("ascii"),i=[],s=`--${e}`,a=`${s}--`;for(let l=0;l<10;++l)r.decode(new Uint8Array(t,l,s.length))===s&&(n=l);if(n===null)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){const l=r.decode(new Uint8Array(t,n,Math.min(s.length+1024,t.byteLength-n)));if(l.length===0||l.startsWith(a))break;if(!l.startsWith(s))throw new Error("Part does not start with boundary");const o=l.substr(s.length+2);if(o.length===0)break;const d=o.indexOf(pee),p=Irt(o.substr(0,d)),{start:A,end:v,total:y}=M8(p["content-range"]),C=n+s.length+d+pee.length,x=parseInt(v,10)+1-parseInt(A,10);i.push({headers:p,data:t.slice(C,C+x),offset:A,length:x,fileSize:y}),n=C+x+4}return i}class i7{async fetch(e,n=void 0){return Promise.all(e.map(r=>this.fetchSlice(r,n)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Lrt extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,r]of e)this.onEviction(n,r.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const r=n.get(e);return this._getItemValue(e,r)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield e)}for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:n,expiry:i}):this._set(e,{value:n,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-e;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[r,i]of this.entriesAscending())e.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function Rrt(t){return new Promise(e=>setTimeout(e,t))}function Prt(t,e){const n=Array.isArray(t)?t:Array.from(t),r=Array.isArray(e)?e:Array.from(e);return n.map((i,s)=>[i,r[s]])}class aE extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,aE),this.name="AbortError"}}class Frt extends Error{constructor(e,n){super(n),this.errors=e,this.message=n,this.name="AggregateError"}}const Ort=Frt;class Nrt{constructor(e,n,r=null){this.offset=e,this.length=n,this.data=r}get top(){return this.offset+this.length}}class Aee{constructor(e,n,r){this.offset=e,this.length=n,this.blockIds=r}}class krt extends i7{constructor(e,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=n,this.blockCache=new Lrt({maxSize:r,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,n){const r=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:v,length:y}of e){let C=v+y;const{fileSize:x}=this;x!==null&&(C=Math.min(C,x));const M=Math.floor(v/this.blockSize)*this.blockSize;for(let I=M;I<C;I+=this.blockSize){const P=Math.floor(I/this.blockSize);!this.blockCache.has(P)&&!this.blockRequests.has(P)&&(this.blockIdsToFetch.add(P),i.push(P)),this.blockRequests.has(P)&&r.push(this.blockRequests.get(P)),s.push(P)}}await Rrt(),this.fetchBlocks(n);const a=[];for(const v of i)this.blockRequests.has(v)&&a.push(this.blockRequests.get(v));await Promise.allSettled(r),await Promise.allSettled(a);const l=[],o=s.filter(v=>this.abortedBlockIds.has(v)||!this.blockCache.has(v));if(o.forEach(v=>this.blockIdsToFetch.add(v)),o.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const v of o){const y=this.blockRequests.get(v);if(!y)throw new Error(`Block ${v} is not in the block requests`);l.push(y)}await Promise.allSettled(l)}if(n&&n.aborted)throw new aE("Request was aborted");const d=s.map(v=>this.blockCache.get(v)||this.evictedBlocks.get(v)),p=d.filter(v=>!v);if(p.length)throw new Ort(p,"Request failed");const A=new Map(Prt(s,d));return this.readSliceData(e,A)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,e);for(let i=0;i<n.length;++i){const s=n[i];for(const a of s.blockIds)this.blockRequests.set(a,(async()=>{try{const l=(await r)[i],o=a*this.blockSize,d=o-l.offset,p=Math.min(d+this.blockSize,l.data.byteLength),A=l.data.slice(d,p),v=new Nrt(o,A.byteLength,A,a);this.blockCache.set(a,v),this.abortedBlockIds.delete(a)}catch(l){if(l.name==="AbortError")l.signal=e,this.blockCache.delete(a),this.abortedBlockIds.add(a);else throw l}finally{this.blockRequests.delete(a)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const n=Array.from(e).sort((a,l)=>a-l);if(n.length===0)return[];let r=[],i=null;const s=[];for(const a of n)i===null||i+1===a?(r.push(a),i=a):(s.push(new Aee(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[a],i=a);return s.push(new Aee(r[0]*this.blockSize,r.length*this.blockSize,r)),s}readSliceData(e,n){return e.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(r.offset/this.blockSize),a=Math.floor(i/this.blockSize),l=new ArrayBuffer(r.length),o=new Uint8Array(l);for(let d=s;d<=a;++d){const p=n.get(d),A=p.offset-r.offset,v=p.top-i;let y=0,C=0,x;A<0?y=-A:A>0&&(C=A),v<0?x=p.length-y:x=i-p.offset-y;const M=new Uint8Array(p.data,y,x);o.set(M,C)}return l})}}class s7{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class o7{constructor(e){this.url=e}async request({headers:e,signal:n}={}){throw new Error("request is not implemented")}}class Drt extends s7{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Urt extends o7{constructor(e,n){super(e),this.credentials=n}async request({headers:e,signal:n}={}){const r=await fetch(this.url,{headers:e,credentials:this.credentials,signal:n});return new Drt(r)}}class zrt extends s7{constructor(e,n){super(),this.xhr=e,this.data=n}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class $rt extends o7{constructRequest(e,n){return new Promise((r,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[a,l]of Object.entries(e))s.setRequestHeader(a,l);s.onload=()=>{const a=s.response;r(new zrt(s,a))},s.onerror=i,s.onabort=()=>i(new aE("Request aborted")),s.send(),n&&(n.aborted&&s.abort(),n.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:n}={}){return await this.constructRequest(e,n)}}const T4={};class Vrt extends s7{constructor(e,n){super(),this.response=e,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Hrt extends o7{constructor(e){super(e),this.parsedUrl=T4.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",T4)}constructRequest(e,n){return new Promise((r,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},a=>{const l=new Promise(o=>{const d=[];a.on("data",p=>{d.push(p)}),a.on("end",()=>{const p=Buffer.concat(d).buffer;o(p)}),a.on("error",i)});r(new Vrt(a,l))});s.on("error",i),n&&(n.aborted&&s.destroy(new aE("Request aborted")),n.addEventListener("abort",()=>s.destroy(new aE("Request aborted"))))})}async request({headers:e,signal:n}={}){return await this.constructRequest(e,n)}}class a7 extends i7{constructor(e,n,r,i){super(),this.client=e,this.headers=n,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(e,n){return this.maxRanges>=e.length?this.fetchSlices(e,n):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,n))))}async fetchSlices(e,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:i,params:s}=Brt(r.getHeader("content-type"));if(i==="multipart/byteranges"){const A=Mrt(await r.getData(),s.boundary);return this._fileSize=A[0].fileSize||null,A}const a=await r.getData(),{start:l,end:o,total:d}=M8(r.getHeader("content-range"));this._fileSize=d||null;const p=[{data:a,offset:l,length:o-l}];if(e.length>1){const A=await Promise.all(e.slice(1).map(v=>this.fetchSlice(v,n)));return p.concat(A)}return p}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,n){const{offset:r,length:i}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:n});if(s.ok)if(s.status===206){const a=await s.getData(),{total:l}=M8(s.getHeader("content-range"));return this._fileSize=l||null,{data:a,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const a=await s.getData();return this._fileSize=a.byteLength,{data:a,offset:0,length:a.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function l7(t,{blockSize:e,cacheSize:n}){return e===null?t:new krt(t,{blockSize:e,cacheSize:n})}function Grt(t,{headers:e={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...s}={}){const a=new Urt(t,n),l=new a7(a,e,r,i);return l7(l,s)}function Qrt(t,{headers:e={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new $rt(t),a=new a7(s,e,n,r);return l7(a,i)}function jrt(t,{headers:e={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new Hrt(t),a=new a7(s,e,n,r);return l7(a,i)}function L8(t,{forceXHR:e=!1,...n}={}){return typeof fetch=="function"&&!e?Grt(t,n):typeof XMLHttpRequest<"u"?Qrt(t,n):jrt(t,n)}class Krt extends i7{constructor(e){super(),this.file=e}async fetchSlice(e,n){return new Promise((r,i)=>{const s=this.file.slice(e.offset,e.offset+e.length),a=new FileReader;a.onload=l=>r(l.target.result),a.onerror=i,a.onabort=i,a.readAsArrayBuffer(s),n&&n.addEventListener("abort",()=>a.abort())})}}function Wrt(t){return new Krt(t)}function R8(t){switch(t){case io.BYTE:case io.ASCII:case io.SBYTE:case io.UNDEFINED:return 1;case io.SHORT:case io.SSHORT:return 2;case io.LONG:case io.SLONG:case io.FLOAT:case io.IFD:return 4;case io.RATIONAL:case io.SRATIONAL:case io.DOUBLE:case io.LONG8:case io.SLONG8:case io.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function qrt(t){const e=t.GeoKeyDirectory;if(!e)return null;const n={};for(let r=4;r<=e[3]*4;r+=4){const i=rrt[e[r]],s=e[r+1]?eI[e[r+1]]:null,a=e[r+2],l=e[r+3];let o=null;if(!s)o=l;else{if(o=t[s],typeof o>"u"||o===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof o=="string"?o=o.substring(l,l+a-1):o.subarray&&(o=o.subarray(l,l+a),a===1&&(o=o[0]))}n[i]=o}return n}function nx(t,e,n,r){let i=null,s=null;const a=R8(e);switch(e){case io.BYTE:case io.ASCII:case io.UNDEFINED:i=new Uint8Array(n),s=t.readUint8;break;case io.SBYTE:i=new Int8Array(n),s=t.readInt8;break;case io.SHORT:i=new Uint16Array(n),s=t.readUint16;break;case io.SSHORT:i=new Int16Array(n),s=t.readInt16;break;case io.LONG:case io.IFD:i=new Uint32Array(n),s=t.readUint32;break;case io.SLONG:i=new Int32Array(n),s=t.readInt32;break;case io.LONG8:case io.IFD8:i=new Array(n),s=t.readUint64;break;case io.SLONG8:i=new Array(n),s=t.readInt64;break;case io.RATIONAL:i=new Uint32Array(n*2),s=t.readUint32;break;case io.SRATIONAL:i=new Int32Array(n*2),s=t.readInt32;break;case io.FLOAT:i=new Float32Array(n),s=t.readFloat32;break;case io.DOUBLE:i=new Float64Array(n),s=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===io.RATIONAL||e===io.SRATIONAL)for(let l=0;l<n;l+=2)i[l]=s.call(t,r+l*a),i[l+1]=s.call(t,r+(l*a+4));else for(let l=0;l<n;++l)i[l]=s.call(t,r+l*a);return e===io.ASCII?new TextDecoder("utf-8").decode(i):i}class Yrt{constructor(e,n,r){this.fileDirectory=e,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class LR extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class mpe{async readRasters(e={}){const{window:n,width:r,height:i}=e;let{resX:s,resY:a,bbox:l}=e;const o=await this.getImage();let d=o;const p=await this.getImageCount(),A=o.getBoundingBox();if(n&&l)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(n){const[C,x]=o.getOrigin(),[M,I]=o.getResolution();l=[C+n[0]*M,x+n[1]*I,C+n[2]*M,x+n[3]*I]}const y=l||A;if(r){if(s)throw new Error("Both width and resX passed");s=(y[2]-y[0])/r}if(i){if(a)throw new Error("Both width and resY passed");a=(y[3]-y[1])/i}}if(s||a){const y=[];for(let C=0;C<p;++C){const x=await this.getImage(C),{SubfileType:M,NewSubfileType:I}=x.fileDirectory;(C===0||M===2||I&1)&&y.push(x)}y.sort((C,x)=>C.getWidth()-x.getWidth());for(let C=0;C<y.length;++C){const x=y[C],M=(A[2]-A[0])/x.getWidth(),I=(A[3]-A[1])/x.getHeight();if(d=x,s&&s>M||a&&a>I)break}}let v=n;if(l){const[y,C]=o.getOrigin(),[x,M]=d.getResolution(o);v=[Math.round((l[0]-y)/x),Math.round((l[1]-C)/M),Math.round((l[2]-y)/x),Math.round((l[3]-C)/M)],v=[Math.min(v[0],v[2]),Math.min(v[1],v[3]),Math.max(v[0],v[2]),Math.max(v[1],v[3])]}return d.readRasters({...e,window:v})}}class lE extends mpe{constructor(e,n,r,i,s={}){super(),this.source=e,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,n){const r=this.bigTiff?4048:1024;return new Ert((await this.source.fetch([{offset:e,length:typeof n<"u"?n:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(e);const s=this.bigTiff?i.readUint64(e):i.readUint16(e),a=s*n+(this.bigTiff?16:6);i.covers(e,a)||(i=await this.getSlice(e,a));const l={};let o=e+(this.bigTiff?8:2);for(let A=0;A<s;o+=n,++A){const v=i.readUint16(o),y=i.readUint16(o+2),C=this.bigTiff?i.readUint64(o+4):i.readUint32(o+4);let x,M;const I=R8(y),P=o+(this.bigTiff?12:8);if(I*C<=(this.bigTiff?8:4))x=nx(i,y,C,P);else{const F=i.readOffset(P),D=R8(y)*C;if(i.covers(F,D))x=nx(i,y,C,F);else{const V=await this.getSlice(F,D);x=nx(V,y,C,F)}}C===1&&trt.indexOf(v)===-1&&!(y===io.RATIONAL||y===io.SRATIONAL)?M=x[0]:M=x,l[eI[v]]=M}const d=qrt(l),p=i.readOffset(e+r+n*s);return new Yrt(l,d,p)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(n){throw n instanceof LR?new LR(e):n}return this.ifdRequests[e]=(async()=>{const n=await this.ifdRequests[e-1];if(n.nextIFDByteOffset===0)throw new LR(e);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const n=await this.requestIFD(e);return new Ape(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,n=!0;for(;n;)try{await this.requestIFD(e),++e}catch(r){if(r instanceof LR)n=!1;else throw r}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let i=await this.getSlice(e,r);if(n===nx(i,io.ASCII,n.length,e)){const a=nx(i,io.ASCII,r,e).split(`
`)[0],l=Number(a.split("=")[1].split(" ")[0])+a.length;l>r&&(i=await this.getSlice(e,l));const o=nx(i,io.ASCII,l,e);this.ghostValues={},o.split(`
`).filter(d=>d.length>0).map(d=>d.split("=")).forEach(([d,p])=>{this.ghostValues[d]=p})}return this.ghostValues}static async fromSource(e,n,r){const i=(await e.fetch([{offset:0,length:1024}],r))[0],s=new Crt(i),a=s.getUint16(0,0);let l;if(a===18761)l=!0;else if(a===19789)l=!1;else throw new TypeError("Invalid byte order value.");const o=s.getUint16(2,l);let d;if(o===42)d=!1;else if(o===43){if(d=!0,s.getUint16(4,l)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const p=d?s.getUint64(8,l):s.getUint32(4,l);return new lE(e,l,d,p,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class Xrt extends mpe{constructor(e,n){super(),this.mainFile=e,this.overviewFiles=n,this.imageFiles=[e].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let i=0;i<this.imageFiles.length;i++){const s=this.imageFiles[i];for(let a=0;a<this.imageCounts[i];a++){if(e===n){const l=await s.requestIFD(r);return new Ape(l.fileDirectory,l.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function Zrt(t,e={},n){return lE.fromSource(L8(t,e),n)}async function Jrt(t,e){return lE.fromSource(Wrt(t),e)}async function eit(t,e=[],n={},r){const i=await lE.fromSource(L8(t,n),r),s=await Promise.all(e.map(a=>lE.fromSource(L8(a,n))));return new Xrt(i,s)}function tit(t){return((t.fileDirectory.NewSubfileType||0)&4)===4}function nit(t,e){if(!t)return!1;if(t===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const n=e.fileDirectory.PhotometricInterpretation,r=Ad;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const gee="STATISTICS_MAXIMUM",mee="STATISTICS_MINIMUM",I4=256;let B4;function rit(){return B4||(B4=new Trt),B4}function iit(t){try{return t.getBoundingBox()}catch{return[0,0,t.getWidth(),t.getHeight()]}}function sit(t){try{return t.getOrigin().slice(0,2)}catch{return[0,t.getHeight()]}}function oit(t,e){try{return t.getResolution(e)}catch{return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function ait(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+e.ProjectedCSTypeGeoKey;let r=Oi(n);if(!r){const i=MJ(e.ProjLinearUnitsGeoKey);i&&(r=new Jv({code:n,units:i}))}return r}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const n="EPSG:"+e.GeographicTypeGeoKey;let r=Oi(n);if(!r){const i=MJ(e.GeogAngularUnitsGeoKey);i&&(r=new Jv({code:n,units:i}))}return r}return null}function lit(t){return t.getImageCount().then(function(e){const n=new Array(e);for(let r=0;r<e;++r)n[r]=t.getImage(r);return Promise.all(n)})}function cit(t,e){let n;return t.blob?n=Jrt(t.blob):t.overviews?n=eit(t.url,t.overviews,e):n=Zrt(t.url,e),n.then(lit)}function mT(t,e,n,r,i){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const a=new Error(r);throw i(a),a}for(let a=0;a<s;++a)mT(t[a],e[a],n,r,i);return}if(e=e,Math.abs(t-e)>n*t)throw new Error(r)}function uit(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function hit(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class vpe extends wnt{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const n=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const r=this,i=new Array(n);for(let s=0;s<n;++s)i[s]=cit(this.sourceInfo_[s],this.sourceOptions_);Promise.all(i).then(function(s){r.configure_(s)}).catch(function(s){OJ(s),r.error_=s,r.setState("error")})}getError(){return this.error_}determineProjection(e){const n=e[0];for(let r=n.length-1;r>=0;--r){const i=n[r],s=ait(i);if(s){this.projection=s;break}}}configure_(e){let n,r,i,s,a;const l=new Array(e.length),o=new Array(e.length),d=new Array(e.length);let p=0;const A=e.length;for(let x=0;x<A;++x){const M=[],I=[];e[x].forEach(G=>{tit(G)?I.push(G):M.push(G)});const P=M.length;if(I.length>0&&I.length!==P)throw new Error(`Expected one mask per image found ${I.length} masks and ${P} images`);let F,D;const V=new Array(P),H=new Array(P),Q=new Array(P);o[x]=new Array(P),d[x]=new Array(P);for(let G=0;G<P;++G){const W=M[G],te=W.getGDALNoData();d[x][G]=W.getGDALMetadata(0),o[x][G]=te;const q=this.sourceInfo_[x].bands;l[x]=q?q.length:W.getSamplesPerPixel();const Y=P-(G+1);F||(F=iit(W)),D||(D=sit(W));const ee=oit(W,M[0]);Q[Y]=ee[0];const ce=[W.getTileWidth(),W.getTileHeight()];ce[0]!==ce[1]&&ce[1]<I4&&(ce[0]=I4,ce[1]=I4),V[Y]=ce;const se=ee[0]/Math.abs(ee[1]);H[Y]=[ce[0],ce[1]/se]}if(n?wu(n,F,n):n=F,!r)r=D;else{const G=`Origin mismatch for source ${x}, got [${D}] but expected [${r}]`;mT(r,D,0,G,this.viewRejector)}if(!a)a=Q,this.resolutionFactors_[x]=1;else{a.length-p>Q.length&&(p=a.length-Q.length);const G=a[a.length-1]/Q[Q.length-1];this.resolutionFactors_[x]=G;const W=Q.map(q=>q*=G),te=`Resolution mismatch for source ${x}, got [${W}] but expected [${a}]`;mT(a.slice(p,a.length),W,.02,te,this.viewRejector)}i?mT(i.slice(p,i.length),H,.01,`Tile size mismatch for source ${x}`,this.viewRejector):i=H,s?mT(s.slice(p,s.length),V,0,`Tile size mismatch for source ${x}`,this.viewRejector):s=V,this.sourceImagery_[x]=M.reverse(),this.sourceMasks_[x]=I.reverse()}for(let x=0,M=this.sourceImagery_.length;x<M;++x){const I=this.sourceImagery_[x];for(;I.length<a.length;)I.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=l,this.nodataValues_=o,this.metadata_=d;e:for(let x=0;x<A;++x){if(this.sourceInfo_[x].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[x].length){this.addAlpha_=!0;break}const M=o[x],I=this.sourceInfo_[x].bands;if(I){for(let P=0;P<I.length;++P)if(M[I[P]-1]!==null){this.addAlpha_=!0;break e}continue}for(let P=0;P<M.length;++P)if(M[P]!==null){this.addAlpha_=!0;break e}}let v=this.addAlpha_?1:0;for(let x=0;x<A;++x)v+=l[x];this.bandCount=v;const y=new dM({extent:n,minZoom:p,origin:r,resolutions:a,tileSizes:i});this.tileGrid=y,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const C=1;a.length===2?a=[a[0],a[1],a[1]/2]:a.length===1&&(a=[a[0]*2,a[0],a[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:a,center:l_(Gu(n),this.projection),extent:Qb(n,this.projection),zoom:C})}loadTile_(e,n,r){const i=this.getTileSize(e),s=this.sourceImagery_.length,a=new Array(s*2),l=this.nodataValues_,o=this.sourceInfo_,d=rit();for(let p=0;p<s;++p){const A=o[p],v=this.resolutionFactors_[p],y=[Math.round(n*(i[0]*v)),Math.round(r*(i[1]*v)),Math.round((n+1)*(i[0]*v)),Math.round((r+1)*(i[1]*v))],C=this.sourceImagery_[p][e];let x;A.bands&&(x=A.bands.map(function(D){return D-1}));let M;"nodata"in A&&A.nodata!==null?M=A.nodata:x?M=x.map(function(D){return l[p][D]}):M=l[p];const I={window:y,width:i[0],height:i[1],samples:x,fillValue:M,pool:d,interleave:!1};nit(this.convertToRGB_,C)?a[p]=C.readRGB(I):a[p]=C.readRasters(I);const P=s+p,F=this.sourceMasks_[p][e];if(!F){a[P]=Promise.resolve(null);continue}a[P]=F.readRasters({window:y,width:i[0],height:i[1],samples:[0],pool:d,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,i)).catch(function(p){throw OJ(p),p})}composeTile_(e,n){const r=this.metadata_,i=this.sourceInfo_,s=this.sourceImagery_.length,a=this.bandCount,l=this.samplesPerPixel_,o=this.nodataValues_,d=this.normalize_,p=this.addAlpha_,A=e[0]*e[1],v=A*a;let y;d?y=new Uint8Array(v):y=new Float32Array(v);let C=0;for(let x=0;x<A;++x){let M=p;for(let I=0;I<s;++I){const P=i[I];let F=P.min,D=P.max,V,H;if(d){const Q=r[I][0];F===void 0&&(Q&&mee in Q?F=parseFloat(Q[mee]):F=uit(n[I][0])),D===void 0&&(Q&&gee in Q?D=parseFloat(Q[gee]):D=hit(n[I][0])),V=255/(D-F),H=-F*V}for(let Q=0;Q<l[I];++Q){const G=n[I][Q][x];let W;if(d?W=va(V*G+H,0,255):W=G,!p)y[C]=W;else{let te=P.nodata;if(te===void 0){let Y;P.bands?Y=P.bands[Q]-1:Y=Q,te=o[I][Y]}const q=isNaN(te);(!q&&G!==te||q&&!isNaN(G))&&(M=!1,y[C]=W)}C++}if(!M){const Q=s+I,G=n[Q];G&&!G[0][x]&&(M=!0)}}p&&(M||(y[C]=255),C++)}return y}}vpe.prototype.getView;const Nh={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},Lb={};Lb[Nh.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};Lb[Nh.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};Lb[Nh.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};Lb.none={none:{supports:[],formats:[],qualities:[]}};const dit=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,vee=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,fit=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function pit(t){let e=t.getComplianceLevelSupportedFeatures();return e===void 0&&(e=Lb[Nh.VERSION1].level0),{url:t.imageInfo["@id"]===void 0?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,t.imageInfo.formats===void 0?[]:t.imageInfo.formats],qualities:[...e.qualities,t.imageInfo.qualities===void 0?[]:t.imageInfo.qualities],resolutions:t.imageInfo.scale_factors,tileSize:t.imageInfo.tile_width!==void 0?t.imageInfo.tile_height!==void 0?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:t.imageInfo.tile_height!=null?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}}function Ait(t){const e=t.getComplianceLevelSupportedFeatures(),n=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=n&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=n&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],s=n&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:t.imageInfo.sizes===void 0?void 0:t.imageInfo.sizes.map(function(a){return[a.width,a.height]}),tileSize:t.imageInfo.tiles===void 0?void 0:[t.imageInfo.tiles.map(function(a){return a.width})[0],t.imageInfo.tiles.map(function(a){return a.height===void 0?a.width:a.height})[0]],resolutions:t.imageInfo.tiles===void 0?void 0:t.imageInfo.tiles.map(function(a){return a.scaleFactors})[0],supports:[...e.supports,...r],formats:[...e.formats,...i],qualities:[...e.qualities,...s]}}function git(t){const e=t.getComplianceLevelSupportedFeatures(),n=t.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...t.imageInfo.extraFormats],r=t.imageInfo.preferredFormats!==void 0&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,s){return i===void 0&&n.includes(s)?s:i},void 0):void 0;return{url:t.imageInfo.id,sizes:t.imageInfo.sizes===void 0?void 0:t.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:t.imageInfo.tiles===void 0?void 0:[t.imageInfo.tiles.map(function(i){return i.width})[0],t.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:t.imageInfo.tiles===void 0?void 0:t.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:t.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...t.imageInfo.extraFeatures],formats:n,qualities:t.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...t.imageInfo.extraQualities],preferredFormat:r}}const tN={};tN[Nh.VERSION1]=pit;tN[Nh.VERSION2]=Ait;tN[Nh.VERSION3]=git;class mit{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let n=0;n<e.length;n++)switch(e[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Nh.VERSION1;case"http://iiif.io/api/image/2/context.json":return Nh.VERSION2;case"http://iiif.io/api/image/3/context.json":return Nh.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Nh.VERSION1)&&this.imageInfo.identifier)return Nh.VERSION1;break}zs(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case Nh.VERSION1:if(dit.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Nh.VERSION3:if(fit.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Nh.VERSION2:if(typeof this.imageInfo.profile=="string"&&vee.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&vee.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const n=this.getComplianceLevelEntryFromProfile(e);if(n===void 0)return;const r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(e);return n===void 0?Lb.none.none:Lb[e][n]}getTileSourceOptions(e){const n=e||{},r=this.getImageApiVersion();if(r===void 0)return;const i=r===void 0?void 0:tN[r](this);if(i!==void 0)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:n.format!==void 0&&i.formats.includes(n.format)?n.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&i.qualities.includes(n.quality)?n.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(s,a){return a-s}):void 0,tileSize:i.tileSize}}}const vit=mit;function KO(t){return Array.isArray(t)?Math.min(...t):t}class yit extends V2{constructor(e,n,r,i,s,a,l){let o=e.getExtent();o&&e.canWrapX()&&(o=o.slice(),o[0]=-1/0,o[2]=1/0);let d=n.getExtent();d&&n.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);const p=d?wu(r,d):r,A=Gu(p),v=AB(e,n,A,i),y=UG,C=new zG(e,n,p,o,v*y,i),x=C.calculateSourceExtent(),M=Am(x)?null:a(x,v,s),I=M?hi.IDLE:hi.EMPTY,P=M?M.getPixelRatio():1;super(r,i,P,I),this.targetProj_=n,this.maxSourceExtent_=o,this.triangulation_=C,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=M,this.sourcePixelRatio_=P,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==hi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==hi.LOADED){const n=no(this.targetExtent_)/this.targetResolution_,r=Xa(this.targetExtent_)/this.targetResolution_;this.canvas_=$G(n,r,this.sourcePixelRatio_,KO(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==hi.IDLE){this.state=hi.LOADING,this.changed();const e=this.sourceImage_.getState();e==hi.LOADED||e==hi.ERROR?this.reproject_():(this.sourceListenerKey_=Yi(this.sourceImage_,pi.CHANGE,function(n){const r=this.sourceImage_.getState();(r==hi.LOADED||r==hi.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){xo(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Wg=4,M4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class _it extends Kh{constructor(e,n){super(e),this.image=n}}class ype extends Y2{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const n=this.getResolutions();if(n){const r=I2(n,e,0);e=n[r]}return e}getImage(e,n,r,i){const s=this.getProjection();if(!s||!i||bd(s,i))return s&&(i=s),this.getImageInternal(e,n,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&bd(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==n&&UA(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new yit(s,i,e,n,r,(a,l,o)=>this.getImageInternal(a,l,o,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,n,r,i){if(this.loader){const s=bpe(e,n,r,1),a=this.findNearestResolution(n);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Cd(this.wantedExtent_,s)||Cd(this.image.getExtent(),s))&&(this.wantedResolution_&&KO(this.wantedResolution_)===a||KO(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new V2(s,a,r,this.loader),this.image.addEventListener(pi.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const n=e.target;let r;switch(n.getState()){case hi.LOADING:this.loading=!0,r=M4.IMAGELOADSTART;break;case hi.LOADED:this.loading=!1,r=M4.IMAGELOADEND;break;case hi.ERROR:this.loading=!1,r=M4.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new _it(r,n))}}function _pe(t,e){t.getImage().src=e}function bpe(t,e,n,r){const i=e/n,s=Gu(t),a=Ry(no(t)/i,Wg),l=Ry(Xa(t)/i,Wg),o=Ry((r-1)*a/2,Wg),d=a+2*o,p=Ry((r-1)*l/2,Wg),A=l+2*p;return JC(s,i,0,[d,A])}function cE(t,e){const n=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&n.push(i+"="+encodeURIComponent(e[i]))});const r=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+r}function bit(t,e,n,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),l=n/r,o=[IO(no(e)/l,Wg),IO(Xa(e)/l,Wg)];s.SIZE=o[0]+","+o[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const d=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return cE(d,s)}class wit extends V2{constructor(e,n,r,i,s){const a=s!==void 0?hi.IDLE:hi.LOADED;super(e,n,r,a),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=hi.ERROR):this.state=hi.LOADED,this.changed()}load(){this.state==hi.IDLE&&(this.state=hi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}function xit(t){const e=t.load||H2,n=t.imageExtent,r=new Image;return t.crossOrigin!==null&&(r.crossOrigin=t.crossOrigin),()=>e(r,t.url).then(i=>{const s=no(n)/i.width,a=Xa(n)/i.height;return{image:i,extent:n,resolution:s!==a?[s,a]:a,pixelRatio:1}})}class Cit extends ype{constructor(e){const n=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:_pe;super({attributions:e.attributions,interpolate:e.interpolate,projection:Oi(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new V2(this.imageExtent_,void 0,1,xit({url:e.url,imageExtent:e.imageExtent,crossOrigin:n,load:(i,s)=>(this.image.setImage(i),r(this.image,s),H2(i))})),this.image.addEventListener(pi.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,n,r,i){return Ua(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const WO="1.3.0",yee=[101,101];function wpe(t,e,n,r,i){i.WIDTH=n[0],i.HEIGHT=n[1];const s=r.getAxisOrientation();let a;const l=JH(i.VERSION,"1.3")>=0;return i[l?"CRS":"SRS"]=r.getCode(),l&&s.substr(0,2)=="ne"?a=[e[1],e[0],e[3],e[2]]:a=e,i.BBOX=a.join(","),cE(t,i)}function xpe(t,e,n,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const l=e/n,o=[IO(no(t)/l,Wg),IO(Xa(t)/l,Wg)];if(n!=1)switch(a){case"geoserver":const p=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+p:s.FORMAT_OPTIONS="dpi:"+p;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:throw new Error("Unknown `serverType` configured")}return wpe(i,t,o,r,s)}function qO(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:WO,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},t)}function Eit(t){const e=t.hidpi===void 0?!0:t.hidpi,n=Oi(t.projection||"EPSG:3857"),r=t.ratio||1.5,i=t.load||H2;return(s,a,l)=>{s=bpe(s,a,l,r),l!=1&&(!e||t.serverType===void 0)&&(l=1);const o=xpe(s,a,l,n,t.url,qO(t.params,"GetMap"),t.serverType),d=new Image;return t.crossOrigin!==null&&(d.crossOrigin=t.crossOrigin),i(d,o).then(p=>({image:p,extent:s,pixelRatio:l}))}}function Sit(t,e,n){if(t.url===void 0)return;const r=Oi(t.projection||"EPSG:3857"),i=JC(e,n,0,yee),s={QUERY_LAYERS:t.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,qO(t.params,"GetFeatureInfo"),t.params);const a=Hx((e[0]-i[0])/n,Wg),l=Hx((i[3]-e[1])/n,Wg),o=JH(s.VERSION,"1.3")>=0;return s[o?"I":"X"]=a,s[o?"J":"Y"]=l,wpe(t.url,i,yee,r,s)}function Tit(t,e){if(t.url===void 0)return;const n={SERVICE:"WMS",VERSION:WO,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t.params===void 0||t.params.LAYER===void 0){const r=t.params.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(e!==void 0){const r=Oi(t.projection||"EPSG:3857").getMetersPerUnit()||1,i=28e-5;n.SCALE=e*r/i}return Object.assign(n,t.params),cE(t.url,n)}class Iit extends ype{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:_pe,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,n,r,i){const s=Oi(r),a=this.getProjection();a&&a!==s&&(n=AB(a,s,e,n),e=am(e,s,a));const l={url:this.url_,params:{...this.params_,...i},projection:a||s};return Sit(l,e,n)}getLegendUrl(e,n){return Tit({url:this.url_,params:{...this.params_,...n}},e)}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=Eit({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),H2(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}function Bit(t,e,n,r){const i=document.createElement("script"),s="olc_"+Vr(e);function a(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(t.includes("?")?"&":"?")+"callback="+s;const l=setTimeout(function(){a(),n&&n()},1e4);window[s]=function(o){clearTimeout(l),a(),e(o)},document.head.appendChild(i)}let Mit=class extends hM{constructor(e,n,r,i,s,a){super(e,n,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Ar.IDLE&&(this.setState(Ar.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,n){this.setFeatures(e)}onError(){this.setState(Ar.ERROR)}setFeatures(e){this.features_=e,this.setState(Ar.LOADED)}setLoader(e){this.loader_=e}};const _ee=[];class Lit extends hM{constructor(e,n,r,i){super(e,n,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.wrappedTileCoord=r}getContext(e){const n=Vr(e);return n in this.context_||(this.context_[n]=Il(1,1,_ee)),this.context_[n]}hasContext(e){return Vr(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const n=Vr(e);return n in this.replayState_||(this.replayState_[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[n]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const n=this.context_[e];Mb(n),_ee.push(n.canvas),delete this.context_[e]}super.release()}}class Rit extends Z2{constructor(e){const n=e.projection||"EPSG:3857",r=e.extent||Zb(n),i=e.tileGrid||OE({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:n,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Pit,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new q2(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Mit,this.tileGrids_={}}getFeaturesInExtent(e){const n=[],r=this.tileCache;if(r.getCount()===0)return n;const i=Ufe(r.peekFirstKey())[0],s=this.tileGrid;return r.forEach(function(a){if(a.tileCoord[0]!==i||a.getState()!==Ar.LOADED)return;const l=a.getSourceTiles();for(let o=0,d=l.length;o<d;++o){const p=l[o],A=p.tileCoord;if(Ua(e,s.getTileCoordExtent(A))){const v=p.getFeatures();if(v)for(let y=0,C=v.length;y<C;++y){const x=v[y],M=x.getGeometry();Ua(e,M.getExtent())&&n.push(x)}}}}),n}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,n){const r=this.getTileCacheForProjection(e),i=Object.keys(n).reduce((s,a)=>{const l=int(a),o=r.peek(l);if(o){const d=o.sourceTiles;for(let p=0,A=d.length;p<A;++p)s[d[p].getKey()]=!0}return s},{});super.expireCache(e,n),this.sourceTileCache.expireCache(i)}getSourceTiles(e,n,r){if(r.getState()===Ar.IDLE){r.setState(Ar.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(n),a=s.getTileCoordExtent(i),l=i[0],o=s.getResolution(l);Oc(a,-o,a);const d=this.tileGrid,p=d.getExtent();p&&wu(a,p,a);const A=d.getZForResolution(o,this.zDirection);d.forEachTileCoord(a,A,v=>{const y=this.tileUrlFunction(v,e,n),C=this.sourceTileCache.containsKey(y)?this.sourceTileCache.get(y):new this.tileClass(v,y?Ar.IDLE:Ar.EMPTY,y,this.format_,this.tileLoadFunction);r.sourceTiles.push(C);const x=C.getState();if(x<Ar.LOADED){const M=I=>{this.handleTileChange(I);const P=C.getState();if(P===Ar.LOADED||P===Ar.ERROR){const F=C.getKey();F in r.errorTileKeys?C.getState()===Ar.LOADED&&delete r.errorTileKeys[F]:r.loadingSourceTiles--,P===Ar.ERROR?r.errorTileKeys[F]=!0:C.removeEventListener(pi.CHANGE,M),r.loadingSourceTiles===0&&r.setState(Zv(r.errorTileKeys)?Ar.LOADED:Ar.ERROR)}};C.addEventListener(pi.CHANGE,M),r.loadingSourceTiles++}x===Ar.IDLE&&(C.extent=d.getTileCoordExtent(v),C.projection=n,C.resolution=d.getResolution(v[0]),this.sourceTileCache.set(y,C),C.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(v=>v.getState()===Ar.ERROR)?Ar.ERROR:Ar.LOADED)}return r.sourceTiles}getTile(e,n,r,i,s){const a=u_(e,n,r),l=this.getKey();let o;if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a),o.key===l))return o;const d=[e,n,r];let p=this.getTileCoordForTileUrlFunction(d,s);const A=this.getTileGrid().getExtent(),v=this.getTileGridForProjection(s);if(p&&A){const x=v.getTileCoordExtent(p);Oc(x,-v.getResolution(e),x),Ua(A,x)||(p=null)}let y=!0;if(p!==null){const x=this.tileGrid,M=v.getResolution(e),I=x.getZForResolution(M,1),P=v.getTileCoordExtent(p);Oc(P,-M,P),x.forEachTileCoord(P,I,F=>{y=y&&!this.tileUrlFunction(F,i,s)})}const C=new Lit(d,y?Ar.EMPTY:Ar.IDLE,p,this.getSourceTiles.bind(this,i,s));return C.key=l,o?(C.interimTile=o,C.refreshInterimChain(),this.tileCache.replace(a,C)):this.tileCache.set(a,C),C}getTileGridForProjection(e){const n=e.getCode();let r=this.tileGrids_[n];if(!r){const i=this.tileGrid,s=i.getResolutions().slice(),a=s.map(function(d,p){return i.getOrigin(p)}),l=s.map(function(d,p){return i.getTileSize(p)}),o=sfe+1;for(let d=s.length;d<o;++d)s.push(s[d-1]/2),a.push(a[d-1]),l.push(l[d-1]);r=new dM({extent:i.getExtent(),origins:a,resolutions:s,tileSizes:l}),this.tileGrids_[n]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),s=El(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*n),Math.round(s[1]*n)]}updateCacheSize(e,n){super.updateCacheSize(e*2,n),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(n).highWaterMark}}function Pit(t,e){t.setLoader(function(n,r,i){Kfe(e,t.getFormat(),n,r,i,t.onLoad.bind(t),t.onError.bind(t))})}const Cpe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Fit extends J2{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[Cpe];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}class Oit extends Kb{constructor(e){e=e||{},super(e)}}class Epe extends nM{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return Xi()}getData(e){return null}prepareFrame(e){return Xi()}renderFrame(e,n){return Xi()}loadedTileCallback(e,n,r){e[n]||(e[n]={}),e[n][r.tileCoord.toString()]=r}createLoadedTileFinder(e,n,r){return(i,s)=>{const a=this.loadedTileCallback.bind(this,r,i);return e.forEachLoadedTile(n,i,s,a)}}forEachFeatureAtCoordinate(e,n,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===hi.LOADED||n.getState()===hi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=hi.LOADED&&n!=hi.ERROR&&e.addEventListener(pi.CHANGE,this.boundHandleImageChange_),n==hi.IDLE&&(e.load(),n=e.getState()),n==hi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class c7{constructor(){hq(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(e,n)=>{if(typeof _8()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,r),!0)})}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;r+=2){const s=n[r],a=n[r+1];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const bee=[];let Bx=null;function Nit(){Bx=Il(1,1,void 0,{willReadFrequently:!0})}class u7 extends Epe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ya(),this.pixelTransform=Ya(),this.inversePixelTransform=Ya(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,r){Bx||Nit(),Bx.clearRect(0,0,1,1);let i;try{Bx.drawImage(e,n,r,1,1,0,0,1,1),i=Bx.getImageData(0,0,1,1).data}catch{return Bx=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&pm(Of(e.style.backgroundColor),Of(r)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(a=l.getContext("2d"))}if(a&&a.canvas.style.transform===n?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",a=Il();const o=a.canvas;s.appendChild(o),l=o.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=KA(r),s=iM(r),a=RE(r),l=rM(r);Ta(n.coordinateToPixelTransform,i),Ta(n.coordinateToPixelTransform,s),Ta(n.coordinateToPixelTransform,a),Ta(n.coordinateToPixelTransform,l);const o=this.inversePixelTransform;Ta(o,i),Ta(o,s),Ta(o,a),Ta(o,l),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const s=new JT(e,this.inversePixelTransform,r,n);i.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(yu.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(yu.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new c7),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(yu.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(yu.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,s,a,l){const o=s/2,d=a/2,p=i/n,A=-p,v=-e[0]+l,y=-e[1];return Hh(this.tempTransform,o,d,p,A,-r,v,y)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Spe extends u7{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const n=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),l=e.viewHints;let o=e.extent;if(n.extent!==void 0&&(o=wu(o,Ed(n.extent,i.projection))),!l[da.ANIMATING]&&!l[da.INTERACTING]&&!Am(o))if(a){const d=i.projection,p=a.getImage(o,s,r,d);p&&(this.loadImage(p)?this.image_=p:p.getState()===hi.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Ta(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!DA(s,i))return null;const a=this.image_.getExtent(),l=this.image_.getImage(),o=no(a),d=Math.floor(l.width*((i[0]-a[0])/o));if(d<0||d>=l.width)return null;const p=Xa(a),A=Math.floor(l.height*((a[3]-i[1])/p));return A<0||A>=l.height?null:this.getImageData(l,d,A)}renderFrame(e,n){const r=this.image_,i=r.getExtent(),s=r.getResolution(),[a,l]=Array.isArray(s)?s:[s,s],o=r.getPixelRatio(),d=e.layerStatesArray[e.layerIndex],p=e.pixelRatio,A=e.viewState,v=A.center,y=A.resolution,C=p*a/(y*o),x=p*l/(y*o),M=e.extent,I=A.resolution,P=A.rotation,F=Math.round(no(M)/I*p),D=Math.round(Xa(M)/I*p);Hh(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/p,1/p,P,-F/2,-D/2),a_(this.inversePixelTransform,this.pixelTransform);const V=KH(this.pixelTransform);this.useContainer(n,V,this.getBackground(e));const H=this.getRenderContext(e),Q=this.context.canvas;Q.width!=F||Q.height!=D?(Q.width=F,Q.height=D):this.containerReused||H.clearRect(0,0,F,D);let G=!1,W=!0;if(d.extent){const ce=Ed(d.extent,A.projection);W=Ua(ce,e.extent),G=W&&!Cd(ce,e.extent),G&&this.clipUnrotated(H,e,ce)}const te=r.getImage(),q=Hh(this.tempTransform,F/2,D/2,C,x,0,o*(i[0]-v[0])/a,o*(v[1]-i[3])/l);this.renderedResolution=l*p/o;const Y=te.width*q[0],ee=te.height*q[3];if(this.getLayer().getSource().getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e),W&&Y>=.5&&ee>=.5){const ce=q[4],se=q[5],le=d.opacity;le!==1&&(H.save(),H.globalAlpha=le),H.drawImage(te,0,0,+te.width,+te.height,ce,se,Y,ee),le!==1&&H.restore()}return this.postRender(this.context,e),G&&H.restore(),H.imageSmoothingEnabled=!0,V!==Q.style.transform&&(Q.style.transform=V),this.container}}class Tpe extends Oit{constructor(e){super(e)}createRenderer(){return new Spe(this)}getData(e){return super.getData(e)}}const Oy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Ipe extends Kb{constructor(e){e=e||{};const n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Oy.PRELOAD)}setPreload(e){this.set(Oy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Oy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Oy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Bpe extends u7{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ql(),this.tmpTileRange_=new X2(0,0,0,0)}isDrawableTile(e){const n=this.getLayer(),r=e.getState(),i=n.getUseInterimTilesOnError();return r==Ar.LOADED||r==Ar.EMPTY||r==Ar.ERROR&&!i}getTile(e,n,r,i){const s=i.pixelRatio,a=i.viewState.projection,l=this.getLayer();let d=l.getSource().getTile(e,n,r,s,a);return d.getState()==Ar.ERROR&&l.getUseInterimTilesOnError()&&l.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(d)||(d=d.getInterimTile()),d}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Ta(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!DA(s,i))return null;const a=n.pixelRatio,l=n.viewState.projection,o=n.viewState,d=r.getRenderSource(),p=d.getTileGridForProjection(o.projection),A=d.getTilePixelRatio(n.pixelRatio);for(let v=p.getZForResolution(o.resolution);v>=p.getMinZoom();--v){const y=p.getTileCoordForCoordAndZ(i,v),C=d.getTile(v,y[1],y[2],a,l);if(!(C instanceof W2||C instanceof oE)||C instanceof oE&&C.getState()===Ar.EMPTY)return null;if(C.getState()!==Ar.LOADED)continue;const x=p.getOrigin(v),M=El(p.getTileSize(v)),I=p.getResolution(v),P=Math.floor(A*((i[0]-x[0])/I-y[1]*M[0])),F=Math.floor(A*((x[1]-i[1])/I-y[2]*M[1])),D=Math.round(A*d.getGutterForProjection(o.projection));return this.getImageData(C.getImage(),P+D,F+D)}return null}loadedTileCallback(e,n,r){return this.isDrawableTile(r)?super.loadedTileCallback(e,n,r):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,l=i.center,o=i.rotation,d=e.pixelRatio,p=this.getLayer(),A=p.getSource(),v=A.getRevision(),y=A.getTileGridForProjection(s),C=y.getZForResolution(a,A.zDirection),x=y.getResolution(C);let M=e.extent;const I=e.viewState.resolution,P=A.getTilePixelRatio(d),F=Math.round(no(M)/I*d),D=Math.round(Xa(M)/I*d),V=r.extent&&Ed(r.extent);V&&(M=wu(M,Ed(r.extent)));const H=x*F/2/P,Q=x*D/2/P,G=[l[0]-H,l[1]-Q,l[0]+H,l[1]+Q],W=y.getTileRangeForExtentAndZ(M,C),te={};te[C]={};const q=this.createLoadedTileFinder(A,s,te),Y=this.tmpExtent,ee=this.tmpTileRange_;this.newTiles_=!1;const ce=o?TO(i.center,I,o,e.size):void 0;for(let be=W.minX;be<=W.maxX;++be)for(let _e=W.minY;_e<=W.maxY;++_e){if(o&&!y.tileCoordIntersectsViewport([C,be,_e],ce))continue;const $e=this.getTile(C,be,_e,e);if(this.isDrawableTile($e)){const Ne=Vr(this);if($e.getState()==Ar.LOADED){te[C][$e.tileCoord.toString()]=$e;let Je=$e.inTransition(Ne);Je&&r.opacity!==1&&($e.endTransition(Ne),Je=!1),!this.newTiles_&&(Je||!this.renderedTiles.includes($e))&&(this.newTiles_=!0)}if($e.getAlpha(Ne,e.time)===1)continue}const Re=y.getTileCoordChildTileRange($e.tileCoord,ee,Y);let Ie=!1;Re&&(Ie=q(C+1,Re)),Ie||y.forEachTileCoordParentTileRange($e.tileCoord,q,ee,Y)}const se=x/a*d/P;Hh(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/d,1/d,o,-F/2,-D/2);const le=KH(this.pixelTransform);this.useContainer(n,le,this.getBackground(e));const ie=this.getRenderContext(e),pe=this.context.canvas;a_(this.inversePixelTransform,this.pixelTransform),Hh(this.tempTransform,F/2,D/2,se,se,0,-F/2,-D/2),pe.width!=F||pe.height!=D?(pe.width=F,pe.height=D):this.containerReused||ie.clearRect(0,0,F,D),V&&this.clipUnrotated(ie,e,V),A.getInterpolate()||(ie.imageSmoothingEnabled=!1),this.preRender(ie,e),this.renderedTiles.length=0;let ue=Object.keys(te).map(Number);ue.sort(Zg);let me,Le,ae;r.opacity===1&&(!this.containerReused||A.getOpaque(e.viewState.projection))?ue=ue.reverse():(me=[],Le=[]);for(let be=ue.length-1;be>=0;--be){const _e=ue[be],$e=A.getTilePixelSize(_e,d,s),Ie=y.getResolution(_e)/x,Ne=$e[0]*Ie*se,Je=$e[1]*Ie*se,je=y.getTileCoordForCoordAndZ(KA(G),_e),ft=y.getTileCoordExtent(je),Et=Ta(this.tempTransform,[P*(ft[0]-G[0])/x,P*(G[3]-ft[3])/x]),ke=P*A.getGutterForProjection(s),Ye=te[_e];for(const at in Ye){const He=Ye[at],Tt=He.tileCoord,Ut=je[1]-Tt[1],Rt=Math.round(Et[0]-(Ut-1)*Ne),Bt=je[2]-Tt[2],Ht=Math.round(Et[1]-(Bt-1)*Je),xt=Math.round(Et[0]-Ut*Ne),Zt=Math.round(Et[1]-Bt*Je),un=Rt-xt,Ft=Ht-Zt,mt=C===_e,Be=mt&&He.getAlpha(Vr(this),e.time)!==1;let ze=!1;if(!Be)if(me){ae=[xt,Zt,xt+un,Zt,xt+un,Zt+Ft,xt,Zt+Ft];for(let it=0,bt=me.length;it<bt;++it)if(C!==_e&&_e<Le[it]){const Qe=me[it];Ua([xt,Zt,xt+un,Zt+Ft],[Qe[0],Qe[3],Qe[4],Qe[7]])&&(ze||(ie.save(),ze=!0),ie.beginPath(),ie.moveTo(ae[0],ae[1]),ie.lineTo(ae[2],ae[3]),ie.lineTo(ae[4],ae[5]),ie.lineTo(ae[6],ae[7]),ie.moveTo(Qe[6],Qe[7]),ie.lineTo(Qe[4],Qe[5]),ie.lineTo(Qe[2],Qe[3]),ie.lineTo(Qe[0],Qe[1]),ie.clip())}me.push(ae),Le.push(_e)}else ie.clearRect(xt,Zt,un,Ft);this.drawTileImage(He,e,xt,Zt,un,Ft,ke,mt),me&&!Be?(ze&&ie.restore(),this.renderedTiles.unshift(He)):this.renderedTiles.push(He),this.updateUsedTiles(e.usedTiles,A,He)}}return this.renderedRevision=v,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!UA(this.renderedExtent_,G),this.renderedExtent_=G,this.renderedPixelRatio=d,this.renderedProjection=s,this.manageTilePyramid(e,A,y,d,s,M,C,p.getPreload()),this.scheduleExpireCache(e,A),this.postRender(this.context,e),r.extent&&ie.restore(),ie.imageSmoothingEnabled=!0,le!==pe.style.transform&&(pe.style.transform=le),this.container}drawTileImage(e,n,r,i,s,a,l,o){const d=this.getTileImage(e);if(!d)return;const p=this.getRenderContext(n),A=Vr(this),v=n.layerStatesArray[n.layerIndex],y=v.opacity*(o?e.getAlpha(A,n.time):1),C=y!==p.globalAlpha;C&&(p.save(),p.globalAlpha=y),p.drawImage(d,l,l,d.width-2*l,d.height-2*l,r,i,s,a),C&&p.restore(),y!==v.opacity?n.animate=!0:o&&e.endTransition(A)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){const r=(function(i,s,a){const l=Vr(i);l in a.usedTiles&&i.expireCache(a.viewState.projection,a.usedTiles[l])}).bind(null,n);e.postRenderFunctions.push(r)}}updateUsedTiles(e,n,r){const i=Vr(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}manageTilePyramid(e,n,r,i,s,a,l,o,d){const p=Vr(n);p in e.wantedTiles||(e.wantedTiles[p]={});const A=e.wantedTiles[p],v=e.tileQueue,y=r.getMinZoom(),C=e.viewState.rotation,x=C?TO(e.viewState.center,e.viewState.resolution,C,e.size):void 0;let M=0,I,P,F,D,V,H;for(H=y;H<=l;++H)for(P=r.getTileRangeForExtentAndZ(a,H,P),F=r.getResolution(H),D=P.minX;D<=P.maxX;++D)for(V=P.minY;V<=P.maxY;++V)C&&!r.tileCoordIntersectsViewport([H,D,V],x)||(l-H<=o?(++M,I=n.getTile(H,D,V,i,s),I.getState()==Ar.IDLE&&(A[I.getKey()]=!0,v.isKeyQueued(I.getKey())||v.enqueue([I,p,r.getTileCoordCenter(I.tileCoord),F])),d!==void 0&&d(I)):n.useTile(H,D,V,s));n.updateCacheSize(M,s)}}class P8 extends Ipe{constructor(e){super(e)}createRenderer(){return new Bpe(this)}}const kit='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',Dit='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',Uit='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',zit={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},$it={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class Vit extends J2{constructor(e){const n=e.layer.indexOf("-"),r=n==-1?e.layer:e.layer.slice(0,n),i=$it[r]||{minZoom:0,maxZoom:20,retina:!0},s=zit[e.layer],a=e.apiKey?"?api_key="+e.apiKey:"",l=i.retina&&e.retina?"@2x":"",o=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+l+"."+s.extension+a,d=[kit,Dit,Cpe];e.layer.startsWith("stamen_")&&d.splice(1,0,Uit),super({attributions:d,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:i.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:i.minZoom,opaque:s.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,tilePixelRatio:l?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}class Hit extends NE{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Ql(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s,a){const l=this.urls;if(!l)return;let o;if(l.length==1)o=l[0];else{const d=Fv(VG(e),l.length);o=l[d]}return bit(o,r,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(e[0]),i,s,a)}getTilePixelRatio(e){return this.hidpi_?e:1}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&!this.hidpi_&&(n=1);const s=i.getTileCoordExtent(e,this.tmpExtent_);let a=El(i.getTileSize(e[0]),this.tmpSize);n!=1&&(a=afe(a,n,this.tmpSize));const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(l,this.params_),this.getRequestUrl_(e,a,s,n,r,l)}}class Git extends J2{constructor(e){e=e||{},super({opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(n,r)=>{const i=n.getTileCoord()[0],s=El(this.tileGrid.getTileSize(i)),a=Il(s[0],s[1]);a.strokeStyle="grey",a.strokeRect(.5,.5,s[0]+.5,s[1]+.5),a.fillStyle="grey",a.strokeStyle="white",a.textAlign="center",a.textBaseline="middle",a.font="24px sans-serif",a.lineWidth=4,a.strokeText(r,s[0]/2,s[1]/2,s[0]),a.fillText(r,s[0]/2,s[1]/2,s[0]),n.setImage(a.canvas)}})}}class Qit extends NE{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Oi("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Bit(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",e.url),n.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const n=e.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const n=Oi("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const d=T_(n,r);i=F2(e.bounds,d)}const s=Zb(r),a=e.minzoom||0,l=e.maxzoom||22,o=OE({extent:s,maxZoom:l,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=o,this.tileUrlFunction=Vfe(e.tiles,o),e.attribution&&!this.getAttributions()){const d=i!==void 0?i:s;this.setAttributions(function(p){return Ua(d,p.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class Mpe extends NE{constructor(e){e=e||{};const n=Object.assign({},e.params),r="TRANSPARENT"in n?n.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Ql(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,n,r,i){const s=Oi(r),a=this.getProjection()||s;let l=this.getTileGrid();l||(l=this.getTileGridForProjection(a));const o=am(e,s,a),d=AB(a,s,e,n),p=l.getZForResolution(d,this.zDirection),A=l.getResolution(p),v=l.getTileCoordForCoordAndZ(o,p);if(l.getResolutions().length<=v[0])return;let y=l.getTileCoordExtent(v,this.tmpExtent_);const C=this.gutter_;C!==0&&(y=Oc(y,A*C,y));const x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,qO(this.params_,"GetFeatureInfo"),i);const M=Math.floor((o[0]-y[0])/A),I=Math.floor((y[3]-o[1])/A);return x[this.v13_?"I":"X"]=M,x[this.v13_?"J":"Y"]=I,this.getRequestUrl_(v,y,1,a||s,x)}getLegendUrl(e,n){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:WO,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,n),cE(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const o=Fv(VG(e),a.length);l=a[o]}return xpe(n,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,l,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||WO;this.v13_=JH(e,"1.3")>=0}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const l=this.gutter_;l!==0&&(a=Oc(a,s*l,a));const o=Object.assign({},qO(this.params_,"GetMap"));return this.getRequestUrl_(e,a,n,r,o)}}class Lpe extends NE{constructor(e){const n=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let i=e.urls;i===void 0&&e.url!==void 0&&(i=Hfe(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=n,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=VO(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const n=e.join(`
`);this.setTileUrlFunction(VO(e.map(this.createFromWMTSTemplate.bind(this))),n)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const n in this.dimensions_)e.push(n+"-"+this.dimensions_[n]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=n=="KVP"?cE(e,r):e.replace(/\{(\w+?)\}/g,function(a,l){return l.toLowerCase()in r?r[l.toLowerCase()]:a});const i=this.tileGrid,s=this.dimensions_;return function(a,l,o){if(!a)return;const d={TileMatrix:i.getMatrixId(a[0]),TileCol:a[1],TileRow:a[2]};Object.assign(d,s);let p=e;return n=="KVP"?p=cE(p,d):p=p.replace(/\{(\w+?)\}/g,function(A,v){return d[v]}),p}}}const hs={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},RR=[hs.FILL],Ny=[hs.STROKE],K1=[hs.BEGIN_PATH],wee=[hs.CLOSE_PATH];class Rpe{drawCustom(e,n,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}class pM extends Rpe{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let l=0,o=e.length;l<o;l+=n)i[0]=e[l],i[1]=e[l+1],DA(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,n,r,i,s,a){const l=this.coordinates;let o=l.length;const d=this.getBufferedMaxExtent();a&&(n+=i);let p=e[n],A=e[n+1];const v=this.tmpCoordinate_;let y=!0,C,x,M;for(C=n+i;C<r;C+=i)v[0]=e[C],v[1]=e[C+1],M=SO(d,v),M!==x?(y&&(l[o++]=p,l[o++]=A,y=!1),l[o++]=v[0],l[o++]=v[1]):M===mu.INTERSECTING?(l[o++]=v[0],l[o++]=v[1],y=!1):y=!0,p=v[0],A=v[1],x=M;return(s&&y||C===n+i)&&(l[o++]=p,l[o++]=A),o}drawCustomCoordinates_(e,n,r,i,s){for(let a=0,l=r.length;a<l;++a){const o=r[a],d=this.appendFlatLineCoordinates(e,n,o,i,!1,!1);s.push(d),n=o}return n}drawCustom(e,n,r,i,s){this.beginGeometry(e,n,s);const a=e.getType(),l=e.getStride(),o=this.coordinates.length;let d,p,A,v,y;switch(a){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),v=[];const C=e.getEndss();y=0;for(let x=0,M=C.length;x<M;++x){const I=[];y=this.drawCustomCoordinates_(d,y,C[x],l,I),v.push(I)}this.instructions.push([hs.CUSTOM,o,v,e,r,v8,s]),this.hitDetectionInstructions.push([hs.CUSTOM,o,v,e,i||r,v8,s]);break;case"Polygon":case"MultiLineString":A=[],d=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),y=this.drawCustomCoordinates_(d,0,e.getEnds(),l,A),this.instructions.push([hs.CUSTOM,o,A,e,r,sB,s]),this.hitDetectionInstructions.push([hs.CUSTOM,o,A,e,i||r,sB,s]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(d,0,d.length,l,!1,!1),this.instructions.push([hs.CUSTOM,o,p,e,r,Iv,s]),this.hitDetectionInstructions.push([hs.CUSTOM,o,p,e,i||r,Iv,s]);break;case"MultiPoint":d=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(d,l),p>o&&(this.instructions.push([hs.CUSTOM,o,p,e,r,Iv,s]),this.hitDetectionInstructions.push([hs.CUSTOM,o,p,e,i||r,Iv,s]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),p=this.coordinates.length,this.instructions.push([hs.CUSTOM,o,p,e,r,void 0,s]),this.hitDetectionInstructions.push([hs.CUSTOM,o,p,e,i||r,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[hs.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[hs.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,s,a=-1;for(n=0;n<r;++n)i=e[n],s=i[0],s==hs.END_GEOMETRY?a=n:s==hs.BEGIN_GEOMETRY&&(i[2]=n,VZe(this.hitDetectionInstructions,a,n),a=-1)}setFillStrokeStyle(e,n){const r=this.state;if(e){const i=e.getColor();r.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,r.fillStyle=Kg(i||_d)}else r.fillStyle=void 0;if(n){const i=n.getColor();r.strokeStyle=Kg(i||lB);const s=n.getLineCap();r.lineCap=s!==void 0?s:iE;const a=n.getLineDash();r.lineDash=a?a.slice():Nv;const l=n.getLineDashOffset();r.lineDashOffset=l||kv;const o=n.getLineJoin();r.lineJoin=o!==void 0?o:sE;const d=n.getWidth();r.lineWidth=d!==void 0?d:uB;const p=n.getMiterLimit();r.miterLimit=p!==void 0?p:aB,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const n=e.fillStyle,r=[hs.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[hs.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,l=e.lineJoin,o=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!pm(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=l||e.currentLineWidth!=o||e.currentMiterLimit!=d)&&(r!==void 0&&n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=l,e.currentLineWidth=o,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[hs.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=WH(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Oc(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class jit extends pM{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!DA(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(i,s);this.instructions.push([hs.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([hs.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=[];for(let o=0,d=i.length;o<d;o+=e.getStride())(!this.maxExtent||DA(this.maxExtent,i.slice(o,o+2)))&&s.push(i[o],i[o+1]);const a=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([hs.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([hs.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class Kit extends pM{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,n,r,i,!1,!1),l=[hs.MOVE_TO_LINE_TO,s,a];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r}drawLineString(e,n,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([hs.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nv,kv],K1);const l=e.getFlatCoordinates(),o=e.getStride();this.drawFlatCoordinates_(l,0,l.length,o),this.hitDetectionInstructions.push(Ny),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([hs.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nv,kv],K1);const l=e.getEnds(),o=e.getFlatCoordinates(),d=e.getStride();let p=0;for(let A=0,v=l.length;A<v;++A)p=this.drawFlatCoordinates_(o,p,l[A],d);this.hitDetectionInstructions.push(Ny),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ny),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ny),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(K1)}}class xee extends pM{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i){const s=this.state,a=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,o=r.length;this.instructions.push(K1),this.hitDetectionInstructions.push(K1);for(let d=0;d<o;++d){const p=r[d],A=this.coordinates.length,v=this.appendFlatLineCoordinates(e,n,p,i,!0,!l),y=[hs.MOVE_TO_LINE_TO,A,v];this.instructions.push(y),this.hitDetectionInstructions.push(y),l&&(this.instructions.push(wee),this.hitDetectionInstructions.push(wee)),n=p}return a&&(this.instructions.push(RR),this.hitDetectionInstructions.push(RR)),l&&(this.instructions.push(Ny),this.hitDetectionInstructions.push(Ny)),n}drawCircle(e,n,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([hs.SET_FILL_STYLE,_d]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([hs.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nv,kv]);const l=e.getFlatCoordinates(),o=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1);const p=[hs.CIRCLE,d];this.instructions.push(K1,p),this.hitDetectionInstructions.push(K1,p),i.fillStyle!==void 0&&(this.instructions.push(RR),this.hitDetectionInstructions.push(RR)),i.strokeStyle!==void 0&&(this.instructions.push(Ny),this.hitDetectionInstructions.push(Ny)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([hs.SET_FILL_STYLE,_d]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([hs.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nv,kv]);const l=e.getEnds(),o=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(o,0,l,d),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([hs.SET_FILL_STYLE,_d]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([hs.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Nv,kv]);const l=e.getEndss(),o=e.getOrientedFlatCoordinates(),d=e.getStride();let p=0;for(let A=0,v=l.length;A<v;++A)p=this.drawFlatCoordinatess_(o,p,l[A],d);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=T1(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Wit(t,e,n,r,i){const s=[];let a=n,l=0,o=e.slice(n,2);for(;l<t&&a+i<r;){const[d,p]=o.slice(-2),A=e[a+i],v=e[a+i+1],y=Math.sqrt((A-d)*(A-d)+(v-p)*(v-p));if(l+=y,l>=t){const C=(t-l+y)/y,x=Tf(d,A,C),M=Tf(p,v,C);o.push(x,M),s.push(o),o=[x,M],l==t&&(a+=i),l=0}else if(l<t)o.push(e[a+i],e[a+i+1]),a+=i;else{const C=y-l,x=Tf(d,A,C/y),M=Tf(p,v,C/y);o.push(x,M),s.push(o),o=[x,M],l=0,a+=i}}return l>0&&s.push(o),s}function qit(t,e,n,r,i){let s=n,a=n,l=0,o=0,d=n,p,A,v,y,C,x,M,I,P,F;for(A=n;A<r;A+=i){const D=e[A],V=e[A+1];C!==void 0&&(P=D-C,F=V-x,y=Math.sqrt(P*P+F*F),M!==void 0&&(o+=v,p=Math.acos((M*P+I*F)/(v*y)),p>t&&(o>l&&(l=o,s=d,a=A),o=0,d=A-i)),v=y,M=P,I=F),C=D,x=V}return o+=y,o>l?[d,A]:[s,a]}const YO={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Yit extends pM{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[_d]={fillStyle:_d},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const l=this.coordinates;let o=l.length;const d=e.getType();let p=null,A=e.getStride();if(a.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Ua(this.maxExtent,e.getExtent()))return;let v;if(p=e.getFlatCoordinates(),d=="LineString")v=[p.length];else if(d=="MultiLineString")v=e.getEnds();else if(d=="Polygon")v=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const M=e.getEndss();v=[];for(let I=0,P=M.length;I<P;++I)v.push(M[I][0])}this.beginGeometry(e,n,r);const y=a.repeat,C=y?void 0:a.textAlign;let x=0;for(let M=0,I=v.length;M<I;++M){let P;y?P=Wit(y*this.resolution,p,x,v[M],A):P=[p.slice(x,v[M])];for(let F=0,D=P.length;F<D;++F){const V=P[F];let H=0,Q=V.length;if(C==null){const W=qit(a.maxAngle,V,0,V.length,2);H=W[0],Q=W[1]}for(let W=H;W<Q;W+=A)l.push(V[W],V[W+1]);const G=l.length;x=v[M],this.drawChars_(o,G),o=G}}this.endGeometry(n)}else{let v=a.overflow?null:[];switch(d){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),A=2;break;case"Polygon":p=e.getFlatInteriorPoint(),a.overflow||v.push(p[2]/this.resolution),A=3;break;case"MultiPolygon":const P=e.getFlatInteriorPoints();p=[];for(let F=0,D=P.length;F<D;F+=3)a.overflow||v.push(P[F+2]/this.resolution),p.push(P[F],P[F+1]);if(p.length===0)return;A=2;break}const y=this.appendFlatPointCoordinates(p,A);if(y===o)return;if(v&&(y-o)/2!==p.length/A){let P=o/2;v=v.filter((F,D)=>{const V=l[(P+D)*2]===p[D*A]&&l[(P+D)*2+1]===p[D*A+1];return V||--P,V})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n,r);let C=a.padding;if(C!=j1&&(a.scale[0]<0||a.scale[1]<0)){let P=a.padding[0],F=a.padding[1],D=a.padding[2],V=a.padding[3];a.scale[0]<0&&(F=-F,V=-V),a.scale[1]<0&&(P=-P,D=-D),C=[P,F,D,V]}const x=this.pixelRatio;this.instructions.push([hs.DRAW_IMAGE,o,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,C==j1?j1:C.map(function(P){return P*x}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]);const M=1/x,I=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=_d,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([hs.DRAW_IMAGE,o,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[M,M],NaN,this.declutterMode_,this.declutterImageWithText_,C,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?_d:this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]),a.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||cB,justify:n.justify,textBaseline:n.textBaseline||OO,scale:n.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,l=this.fillKey_;this.saveTextStates_();const o=this.pixelRatio,d=YO[i.textBaseline],p=this.textOffsetY_*o,A=this.text_,v=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([hs.DRAW_CHARS,e,n,d,i.overflow,l,i.maxAngle,o,p,s,v*o,A,a,1,this.declutterMode_]),this.hitDetectionInstructions.push([hs.DRAW_CHARS,e,n,d,i.overflow,l&&_d,i.maxAngle,o,p,s,v*o,A,a,1/o,this.declutterMode_])}setTextStyle(e,n){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Kg(a.getColor()||_d)):(i=null,this.textFillState_=i);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const C=l.getLineDash(),x=l.getLineDashOffset(),M=l.getWidth(),I=l.getMiterLimit();s.lineCap=l.getLineCap()||iE,s.lineDash=C?C.slice():Nv,s.lineDashOffset=x===void 0?kv:x,s.lineJoin=l.getLineJoin()||sE,s.lineWidth=M===void 0?uB:M,s.miterLimit=I===void 0?aB:I,s.strokeStyle=Kg(l.getColor()||lB)}r=this.textState_;const o=e.getFont()||gfe;Ret(o);const d=e.getScaleArray();r.overflow=e.getOverflow(),r.font=o,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||OO,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||j1,r.scale=d===void 0?[1,1]:d;const p=e.getOffsetX(),A=e.getOffsetY(),v=e.getRotateWithView(),y=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=A===void 0?0:A,this.textRotateWithView_=v===void 0?!1:v,this.textRotation_=y===void 0?0:y,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Vr(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Vr(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const Xit={Circle:xee,Default:pM,Image:jit,LineString:Kit,Polygon:xee,Text:Yit};class Ppe{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const s=r[i].finish();e[n][i]=s}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[n];if(s===void 0){const a=Xit[n];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=s}return s}}function Zit(t,e,n,r,i,s,a,l,o,d,p,A){let v=t[e],y=t[e+1],C=0,x=0,M=0,I=0;function P(){C=v,x=y,e+=r,v=t[e],y=t[e+1],I+=M,M=Math.sqrt((v-C)*(v-C)+(y-x)*(y-x))}do P();while(e<n-r&&I+M<s);let F=M===0?0:(s-I)/M;const D=Tf(C,v,F),V=Tf(x,y,F),H=e-r,Q=I,G=s+l*o(d,i,p);for(;e<n-r&&I+M<G;)P();F=M===0?0:(G-I)/M;const W=Tf(C,v,F),te=Tf(x,y,F);let q;if(A){const le=[D,V,W,te];iG(le,0,4,2,A,le,le),q=le[0]>le[2]}else q=D>W;const Y=Math.PI,ee=[],ce=H+r===e;e=H,M=0,I=Q,v=t[e],y=t[e+1];let se;if(ce){P(),se=Math.atan2(y-x,v-C),q&&(se+=se>0?-Y:Y);const le=(W+D)/2,ie=(te+V)/2;return ee[0]=[le,ie,(G-s)/2,se,i],ee}i=i.replace(/\n/g," ");for(let le=0,ie=i.length;le<ie;){P();let pe=Math.atan2(y-x,v-C);if(q&&(pe+=pe>0?-Y:Y),se!==void 0){let _e=pe-se;if(_e+=_e>Y?-2*Y:_e<-Y?2*Y:0,Math.abs(_e)>a)return null}se=pe;const ue=le;let me=0;for(;le<ie;++le){const _e=q?ie-le-1:le,$e=l*o(d,i[_e],p);if(e+r<n&&I+M<s+me+$e/2)break;me+=$e}if(le===ue)continue;const Le=q?i.substring(ie-ue,ie-le):i.substring(ue,le);F=M===0?0:(s+me/2-I)/M;const ae=Tf(C,v,F),be=Tf(x,y,F);ee.push([ae,be,me/2,pe,Le]),s+=me}return ee}const rx=Ql(),iy=[],dv=[],fv=[],sy=[];function Cee(t){return t[3].declutterBox}const Eee=new RegExp("[-----]");function L4(t,e){return e==="start"?e=Eee.test(t)?"right":"left":e==="end"&&(e=Eee.test(t)?"left":"right"),YO[e]}function Jit(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}class est{constructor(e,n,r,i,s){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ya(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new c7:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const s=e+n+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,l=r?this.fillStates[r]:null,o=this.textStates[n],d=this.pixelRatio,p=[o.scale[0]*d,o.scale[1]*d],A=Array.isArray(e),v=o.justify?YO[o.justify]:L4(Array.isArray(e)?e[0]:e,o.textAlign||cB),y=i&&a.lineWidth?a.lineWidth:0,C=A?e:e.split(`
`).reduce(Jit,[]),{width:x,height:M,widths:I,heights:P,lineWidths:F}=Fet(o,C),D=x+y,V=[],H=(D+2)*p[0],Q=(M+y)*p[1],G={width:H<0?Math.floor(H):Math.ceil(H),height:Q<0?Math.floor(Q):Math.ceil(Q),contextInstructions:V};(p[0]!=1||p[1]!=1)&&V.push("scale",p),i&&(V.push("strokeStyle",a.strokeStyle),V.push("lineWidth",y),V.push("lineCap",a.lineCap),V.push("lineJoin",a.lineJoin),V.push("miterLimit",a.miterLimit),V.push("setLineDash",[a.lineDash]),V.push("lineDashOffset",a.lineDashOffset)),r&&V.push("fillStyle",l.fillStyle),V.push("textBaseline","middle"),V.push("textAlign","center");const W=.5-v;let te=v*D+W*y;const q=[],Y=[];let ee=0,ce=0,se=0,le=0,ie;for(let pe=0,ue=C.length;pe<ue;pe+=2){const me=C[pe];if(me===`
`){ce+=ee,ee=0,te=v*D+W*y,++le;continue}const Le=C[pe+1]||o.font;Le!==ie&&(i&&q.push("font",Le),r&&Y.push("font",Le),ie=Le),ee=Math.max(ee,P[se]);const ae=[me,te+W*I[se]+v*(I[se]-F[le]),.5*(y+ee)+ce];te+=I[se],i&&q.push("strokeText",ae),r&&Y.push("fillText",ae),++se}return Array.prototype.push.apply(V,q),Array.prototype.push.apply(V,Y),this.labels_[s]=G,G}replayTextBackground_(e,n,r,i,s,a,l){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,n),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,s,a,l,o,d,p,A,v,y,C,x,M){l*=v[0],o*=v[1];let I=r-l,P=i-o;const F=s+d>e?e-d:s,D=a+p>n?n-p:a,V=C[3]+F*v[0]+C[1],H=C[0]+D*v[1]+C[2],Q=I-C[3],G=P-C[0];(x||A!==0)&&(iy[0]=Q,sy[0]=Q,iy[1]=G,dv[1]=G,dv[0]=Q+V,fv[0]=dv[0],fv[1]=G+H,sy[1]=fv[1]);let W;return A!==0?(W=Hh(Ya(),r,i,1,1,A,-r,-i),Ta(W,iy),Ta(W,dv),Ta(W,fv),Ta(W,sy),Ff(Math.min(iy[0],dv[0],fv[0],sy[0]),Math.min(iy[1],dv[1],fv[1],sy[1]),Math.max(iy[0],dv[0],fv[0],sy[0]),Math.max(iy[1],dv[1],fv[1],sy[1]),rx)):Ff(Math.min(Q,Q+V),Math.min(G,G+H),Math.max(Q,Q+V),Math.max(G,G+H),rx),y&&(I=Math.round(I),P=Math.round(P)),{drawImageX:I,drawImageY:P,drawImageW:F,drawImageH:D,originX:d,originY:p,declutterBox:{minX:rx[0],minY:rx[1],maxX:rx[2],maxY:rx[3],value:M},canvasTransform:W,scale:v}}replayImageOrLabel_(e,n,r,i,s,a,l){const o=!!(a||l),d=i.declutterBox,p=l?l[2]*i.scale[0]/2:0;return d.minX-p<=n[0]&&d.maxX+p>=0&&d.minY-p<=n[1]&&d.maxY+p>=0&&(o&&this.replayTextBackground_(e,iy,dv,fv,sy,a,l),Oet(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=Ta(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,r,i){const s=this.textStates[n],a=this.createLabel(e,n,i,r),l=this.strokeStates[r],o=this.pixelRatio,d=L4(Array.isArray(e)?e[0]:e,s.textAlign||cB),p=YO[s.textBaseline||OO],A=l&&l.lineWidth?l.lineWidth:0,v=a.width/o-2*s.scale[0],y=d*v+2*(.5-d)*A,C=p*a.height/o+2*(.5-p)*A;return{label:a,anchorX:y,anchorY:C}}execute_(e,n,r,i,s,a,l,o){const d=this.zIndexContext_;let p;this.pixelCoordinates_&&pm(r,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Jg(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),Fde(this.renderedTransform_,r));let A=0;const v=i.length;let y=0,C,x,M,I,P,F,D,V,H,Q,G,W,te,q=0,Y=0,ee=null,ce=null;const se=this.coordinateCache_,le=this.viewRotation_,ie=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,pe={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:le},ue=this.instructions!=i||this.overlaps?0:200;let me,Le,ae,be;for(;A<v;){const _e=i[A];switch(_e[0]){case hs.BEGIN_GEOMETRY:me=_e[1],be=_e[3],me.getGeometry()?l!==void 0&&!Ua(l,be.getExtent())?A=_e[2]+1:++A:A=_e[2],d&&(d.zIndex=_e[4]);break;case hs.BEGIN_PATH:q>ue&&(this.fill_(e),q=0),Y>ue&&(e.stroke(),Y=0),!q&&!Y&&(e.beginPath(),P=NaN,F=NaN),++A;break;case hs.CIRCLE:y=_e[1];const Re=p[y],Ie=p[y+1],Ne=p[y+2],Je=p[y+3],je=Ne-Re,ft=Je-Ie,Et=Math.sqrt(je*je+ft*ft);e.moveTo(Re+Et,Ie),e.arc(Re,Ie,Et,0,2*Math.PI,!0),++A;break;case hs.CLOSE_PATH:e.closePath(),++A;break;case hs.CUSTOM:y=_e[1],C=_e[2];const ke=_e[3],Ye=_e[4],at=_e[5];pe.geometry=ke,pe.feature=me,A in se||(se[A]=[]);const He=se[A];at?at(p,y,C,2,He):(He[0]=p[y],He[1]=p[y+1],He.length=2),d&&(d.zIndex=_e[6]),Ye(He,pe),++A;break;case hs.DRAW_IMAGE:y=_e[1],C=_e[2],H=_e[3],x=_e[4],M=_e[5];let Tt=_e[6];const Ut=_e[7],Rt=_e[8],Bt=_e[9],Ht=_e[10];let xt=_e[11];const Zt=_e[12];let un=_e[13];I=_e[14]||"declutter";const Ft=_e[15];if(!H&&_e.length>=20){Q=_e[19],G=_e[20],W=_e[21],te=_e[22];const us=this.drawLabelWithPointPlacement_(Q,G,W,te);H=us.label,_e[3]=H;const bi=_e[23];x=(us.anchorX-bi)*this.pixelRatio,_e[4]=x;const is=_e[24];M=(us.anchorY-is)*this.pixelRatio,_e[5]=M,Tt=H.height,_e[6]=Tt,un=H.width,_e[13]=un}let mt;_e.length>25&&(mt=_e[25]);let Be,ze,it;_e.length>17?(Be=_e[16],ze=_e[17],it=_e[18]):(Be=j1,ze=!1,it=!1),Ht&&ie?xt+=le:!Ht&&!ie&&(xt-=le);let bt=0;for(;y<C;y+=2){if(mt&&mt[bt++]<un/this.pixelRatio)continue;const us=this.calculateImageOrLabelDimensions_(H.width,H.height,p[y],p[y+1],un,Tt,x,M,Rt,Bt,xt,Zt,s,Be,ze||it,me),bi=[e,n,H,us,Ut,ze?ee:null,it?ce:null];if(o){let is,Fs,zr;if(Ft){const en=C-y;if(!Ft[en]){Ft[en]={args:bi,declutterMode:I};continue}const dn=Ft[en];is=dn.args,Fs=dn.declutterMode,delete Ft[en],zr=Cee(is)}let ss,Zi;if(is&&(Fs!=="declutter"||!o.collides(zr))&&(ss=!0),(I!=="declutter"||!o.collides(us.declutterBox))&&(Zi=!0),Fs==="declutter"&&I==="declutter"){const en=ss&&Zi;ss=en,Zi=en}ss&&(Fs!=="none"&&o.insert(zr),this.replayImageOrLabel_.apply(this,is)),Zi&&(I!=="none"&&o.insert(us.declutterBox),this.replayImageOrLabel_.apply(this,bi))}else this.replayImageOrLabel_.apply(this,bi)}++A;break;case hs.DRAW_CHARS:const Qe=_e[1],St=_e[2],yt=_e[3],Xe=_e[4];te=_e[5];const _t=_e[6],Gt=_e[7],gt=_e[8];W=_e[9];const hn=_e[10];Q=_e[11],G=_e[12];const rr=[_e[13],_e[13]];I=_e[14]||"declutter";const br=this.textStates[G],Qr=br.font,hr=[br.scale[0]*Gt,br.scale[1]*Gt];let Kn;Qr in this.widths_?Kn=this.widths_[Qr]:(Kn={},this.widths_[Qr]=Kn);const ur=Gfe(p,Qe,St,2),ni=Math.abs(hr[0])*XJ(Qr,Q,Kn);if(Xe||ni<=ur){const us=this.textStates[G].textAlign,bi=(ur-ni)*L4(Q,us),is=Zit(p,Qe,St,2,Q,bi,_t,Math.abs(hr[0]),XJ,Qr,Kn,ie?0:this.viewRotation_);e:if(is){const Fs=[];let zr,ss,Zi,en,dn;if(W)for(zr=0,ss=is.length;zr<ss;++zr){dn=is[zr],Zi=dn[4],en=this.createLabel(Zi,G,"",W),x=dn[2]+(hr[0]<0?-hn:hn),M=yt*en.height+(.5-yt)*2*hn*hr[1]/hr[0]-gt;const En=this.calculateImageOrLabelDimensions_(en.width,en.height,dn[0],dn[1],en.width,en.height,x,M,0,0,dn[3],rr,!1,j1,!1,me);if(o&&I==="declutter"&&o.collides(En.declutterBox))break e;Fs.push([e,n,en,En,1,null,null])}if(te)for(zr=0,ss=is.length;zr<ss;++zr){dn=is[zr],Zi=dn[4],en=this.createLabel(Zi,G,te,""),x=dn[2],M=yt*en.height-gt;const En=this.calculateImageOrLabelDimensions_(en.width,en.height,dn[0],dn[1],en.width,en.height,x,M,0,0,dn[3],rr,!1,j1,!1,me);if(o&&I==="declutter"&&o.collides(En.declutterBox))break e;Fs.push([e,n,en,En,1,null,null])}o&&I!=="none"&&o.load(Fs.map(Cee));for(let En=0,Vn=Fs.length;En<Vn;++En)this.replayImageOrLabel_.apply(this,Fs[En])}}++A;break;case hs.END_GEOMETRY:if(a!==void 0){me=_e[1];const us=a(me,be);if(us)return us}++A;break;case hs.FILL:ue?q++:this.fill_(e),++A;break;case hs.MOVE_TO_LINE_TO:for(y=_e[1],C=_e[2],Le=p[y],ae=p[y+1],D=Le+.5|0,V=ae+.5|0,(D!==P||V!==F)&&(e.moveTo(Le,ae),P=D,F=V),y+=2;y<C;y+=2)Le=p[y],ae=p[y+1],D=Le+.5|0,V=ae+.5|0,(y==C-2||D!==P||V!==F)&&(e.lineTo(Le,ae),P=D,F=V);++A;break;case hs.SET_FILL_STYLE:ee=_e,this.alignAndScaleFill_=_e[2],q&&(this.fill_(e),q=0,Y&&(e.stroke(),Y=0)),e.fillStyle=_e[1],++A;break;case hs.SET_STROKE_STYLE:ce=_e,Y&&(e.stroke(),Y=0),this.setStrokeStyle_(e,_e),++A;break;case hs.STROKE:ue?Y++:e.stroke(),++A;break;default:++A;break}}q&&this.fill_(e),Y&&e.stroke()}execute(e,n,r,i,s,a){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,n,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,s)}}const tI=["Polygon","Circle","LineString","Image","Text","Default"],XO=["Image","Text"],tst=tI.filter(t=>!XO.includes(t));class Fpe{constructor(e,n,r,i,s,a,l){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ya(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const l=s[a];i[a]=new est(this.resolution_,this.pixelRatio_,this.overlaps_,l,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,s,a){i=Math.round(i);const l=i*2+1,o=Hh(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Il(l,l,void 0,{willReadFrequently:!0}));const p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):d||p.clearRect(0,0,l,l);let A;this.renderBuffer_!==void 0&&(A=Ql(),ob(A,e),Oc(A,n*(this.renderBuffer_+i),A));const v=nst(i);let y;function C(V,H){const Q=p.getImageData(0,0,l,l).data;for(let G=0,W=v.length;G<W;G++)if(Q[v[G]]>0){if(!a||y!=="Image"&&y!=="Text"||a.includes(V)){const te=(v[G]-3)/4,q=i-te%l,Y=i-(te/l|0),ee=s(V,H,q*q+Y*Y);if(ee)return ee}p.clearRect(0,0,l,l);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(Zg);let M,I,P,F,D;for(M=x.length-1;M>=0;--M){const V=x[M].toString();for(P=this.executorsByZIndex_[V],I=tI.length-1;I>=0;--I)if(y=tI[I],F=P[y],F!==void 0&&(D=F.executeHitDetection(p,o,r,C,A),D))return D}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],s=n[2],a=n[3],l=[r,i,r,a,s,a,s,i];return Jg(l,0,8,2,e,l),l}isEmpty(){return Zv(this.executorsByZIndex_)}execute(e,n,r,i,s,a,l){const o=Object.keys(this.executorsByZIndex_).map(Number);o.sort(Zg),a=a||tI;let d,p,A,v,y,C;for(l&&o.reverse(),d=0,p=o.length;d<p;++d){const x=o[d].toString();for(y=this.executorsByZIndex_[x],A=0,v=a.length;A<v;++A){const M=a[A];if(C=y[M],C!==void 0){const I=l===null?void 0:C.getZIndexContext(),P=I?I.getContext():e,F=this.maxExtent_&&M!=="Image"&&M!=="Text";if(F&&(P.save(),this.clip(P,r)),C.execute(P,n,r,i,s,l),F&&P.restore(),I){I.offset();const D=o[d];this.deferredZIndexContexts_[D]||(this.deferredZIndexContexts_[D]=[]),this.deferredZIndexContexts_[D].push(I)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(Zg);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()})}}const R4={};function nst(t){if(R4[t]!==void 0)return R4[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let s=0;s<=t;++s)for(let a=0;a<=t;++a){const l=s*s+a*a;if(l>n)break;let o=r[l];o||(o=[],r[l]=o),o.push(((t+s)*e+(t+a))*4+3),s>0&&o.push(((t-s)*e+(t+a))*4+3),a>0&&(o.push(((t+s)*e+(t-a))*4+3),s>0&&o.push(((t-s)*e+(t-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return R4[t]=i,i}class Ope extends Rpe{constructor(e,n,r,i,s,a,l){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?PE(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ya()}drawImages_(e,n,r,i){if(!this.image_)return;const s=Jg(e,n,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,l=this.tmpLocalTransform_,o=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=o*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let p=0,A=s.length;p<A;p+=2){const v=s[p]-this.imageAnchorX_,y=s[p+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const C=v+this.imageAnchorX_,x=y+this.imageAnchorY_;Hh(l,C,x,1,1,d,-C,-x),a.save(),a.transform.apply(a,l),a.translate(C,x),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,v,y,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=o)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Jg(e,n,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);n<r;n+=i){const o=s[n]+this.textOffsetX_,d=s[n+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(o-this.textOffsetX_,d-this.textOffsetY_),a.rotate(l),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,o,d),this.textFillState_&&a.fillText(this.text_,o,d))}}moveToLineTo_(e,n,r,i,s){const a=this.context_,l=Jg(e,n,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(l[0],l[1]);let o=l.length;s&&(o-=2);for(let d=2;d<o;d+=2)a.lineTo(l[d],l[d+1]);return s&&a.closePath(),r}drawRings_(e,n,r,i){for(let s=0,a=r.length;s<a;++s)n=this.moveToLineTo_(e,n,r[s],i,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ua(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=IJe(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ua(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(Ua(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),l=e.getStride();r.beginPath();for(let o=0,d=a.length;o<d;++o)s=this.moveToLineTo_(i,s,a[o],l,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ua(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ua(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();n.beginPath();for(let l=0,o=s.length;l<o;++l){const d=s[l];i=this.drawRings_(r,i,d,a)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),pm(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:cB;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Kg(r||_d)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),l=n.getLineJoin(),o=n.getWidth(),d=n.getMiterLimit(),p=s||Nv;this.strokeState_={lineCap:i!==void 0?i:iE,lineDash:this.pixelRatio_===1?p:p.map(A=>A*this.pixelRatio_),lineDashOffset:(a||kv)*this.pixelRatio_,lineJoin:l!==void 0?l:sE,lineWidth:(o!==void 0?o:uB)*this.pixelRatio_,miterLimit:d!==void 0?d:aB,strokeStyle:Kg(r||lB)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const y=n.getColor();this.textFillState_={fillStyle:Kg(y||_d)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const y=r.getColor(),C=r.getLineCap(),x=r.getLineDash(),M=r.getLineDashOffset(),I=r.getLineJoin(),P=r.getWidth(),F=r.getMiterLimit();this.textStrokeState_={lineCap:C!==void 0?C:iE,lineDash:x||Nv,lineDashOffset:M||kv,lineJoin:I!==void 0?I:sE,lineWidth:P!==void 0?P:uB,miterLimit:F!==void 0?F:aB,strokeStyle:Kg(y||lB)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),l=e.getRotateWithView(),o=e.getRotation(),d=e.getScaleArray(),p=e.getText(),A=e.getTextAlign(),v=e.getTextBaseline();this.textState_={font:i!==void 0?i:gfe,textAlign:A!==void 0?A:cB,textBaseline:v!==void 0?v:OO},this.text_=p!==void 0?Array.isArray(p)?p.reduce((y,C,x)=>y+=x%2?" ":C,""):p:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=o!==void 0?o:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const If=.5;function Npe(t,e,n,r,i,s,a,l,o){const d=o?Qb(i):i,p=t[0]*If,A=t[1]*If,v=Il(p,A);v.imageSmoothingEnabled=!1;const y=v.canvas,C=new Ope(v,If,i,null,a,l,o?T_(xJe(),o):null),x=n.length,M=Math.floor((256*256*256-1)/x),I={};for(let F=1;F<=x;++F){const D=n[F-1],V=D.getStyleFunction()||r;if(!V)continue;let H=V(D,s);if(!H)continue;Array.isArray(H)||(H=[H]);const G=(F*M).toString(16).padStart(7,"#00000");for(let W=0,te=H.length;W<te;++W){const q=H[W],Y=q.getGeometryFunction()(D);if(!Y||!Ua(d,Y.getExtent()))continue;const ee=q.clone(),ce=ee.getFill();ce&&ce.setColor(G);const se=ee.getStroke();se&&(se.setColor(G),se.setLineDash(null)),ee.setText(void 0);const le=q.getImage();if(le){const me=le.getImageSize();if(!me)continue;const Le=Il(me[0],me[1],void 0,{alpha:!1}),ae=Le.canvas;Le.fillStyle=G,Le.fillRect(0,0,ae.width,ae.height),ee.setImage(new B_({img:ae,anchor:le.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:le.getOrigin(),opacity:1,size:le.getSize(),scale:le.getScale(),rotation:le.getRotation(),rotateWithView:le.getRotateWithView()}))}const ie=ee.getZIndex()||0;let pe=I[ie];pe||(pe={},I[ie]=pe,pe.Polygon=[],pe.Circle=[],pe.LineString=[],pe.Point=[]);const ue=Y.getType();if(ue==="GeometryCollection"){const me=Y.getGeometriesArrayRecursive();for(let Le=0,ae=me.length;Le<ae;++Le){const be=me[Le];pe[be.getType().replace("Multi","")].push(be,ee)}}else pe[ue.replace("Multi","")].push(Y,ee)}}const P=Object.keys(I).map(Number).sort(Zg);for(let F=0,D=P.length;F<D;++F){const V=I[P[F]];for(const H in V){const Q=V[H];for(let G=0,W=Q.length;G<W;G+=2){C.setStyle(Q[G+1]);for(let te=0,q=e.length;te<q;++te)C.setTransform(e[te]),C.drawGeometry(Q[G])}}}return v.getImageData(0,0,y.width,y.height)}function kpe(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*If),s=Math.floor(Math.round(t[1])*If),a=(va(i,0,n.width-1)+va(s,0,n.height-1)*n.width)*4,l=n.data[a],o=n.data[a+1],p=n.data[a+2]+256*(o+256*l),A=Math.floor((256*256*256-1)/e.length);p&&p%A===0&&r.push(e[p/A-1])}return r}const rst=.5,Dpe={Point:hst,LineString:lst,Polygon:fst,MultiPoint:dst,MultiLineString:cst,MultiPolygon:ust,GeometryCollection:ast,Circle:sst};function ist(t,e){return parseInt(Vr(t),10)-parseInt(Vr(e),10)}function F8(t,e){const n=Upe(t,e);return n*n}function Upe(t,e){return rst*t/e}function sst(t,e,n,r,i){const s=n.getFill(),a=n.getStroke();if(s||a){const o=t.getBuilder(n.getZIndex(),"Circle");o.setFillStrokeStyle(s,a),o.drawCircle(e,r,i)}const l=n.getText();if(l&&l.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r)}}function ZO(t,e,n,r,i,s,a,l){const o=[],d=n.getImage();if(d){let v=!0;const y=d.getImageState();y==hi.LOADED||y==hi.ERROR?v=!1:y==hi.IDLE&&d.load(),v&&o.push(d.ready())}const p=n.getFill();p&&p.loading()&&o.push(p.ready());const A=o.length>0;return A&&Promise.all(o).then(()=>i(null)),ost(t,e,n,r,s,a,l),A}function ost(t,e,n,r,i,s,a){const l=n.getGeometryFunction()(e);if(!l)return;const o=l.simplifyTransformed(r,i);if(n.getRenderer())zpe(t,o,n,e,a);else{const p=Dpe[o.getType()];p(t,o,n,e,a,s)}}function zpe(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let l=0,o=a.length;l<o;++l)zpe(t,a[l],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function ast(t,e,n,r,i,s){const a=e.getGeometriesArray();let l,o;for(l=0,o=a.length;l<o;++l){const d=Dpe[a[l].getType()];d(t,a[l],n,r,i,s)}}function lst(t,e,n,r,i){const s=n.getStroke();if(s){const l=t.getBuilder(n.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function cst(t,e,n,r,i){const s=n.getStroke();if(s){const l=t.getBuilder(n.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function ust(t,e,n,r,i){const s=n.getFill(),a=n.getStroke();if(a||s){const o=t.getBuilder(n.getZIndex(),"Polygon");o.setFillStrokeStyle(s,a),o.drawMultiPolygon(e,r,i)}const l=n.getText();if(l&&l.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function hst(t,e,n,r,i,s){const a=n.getImage(),l=n.getText(),o=l&&l.getText(),d=s&&a&&o?{}:void 0;if(a){if(a.getImageState()!=hi.LOADED)return;const p=t.getBuilder(n.getZIndex(),"Image");p.setImageStyle(a,d),p.drawPoint(e,r,i)}if(o){const p=t.getBuilder(n.getZIndex(),"Text");p.setTextStyle(l,d),p.drawText(e,r,i)}}function dst(t,e,n,r,i,s){const a=n.getImage(),l=a&&a.getOpacity()!==0,o=n.getText(),d=o&&o.getText(),p=s&&l&&d?{}:void 0;if(l){if(a.getImageState()!=hi.LOADED)return;const A=t.getBuilder(n.getZIndex(),"Image");A.setImageStyle(a,p),A.drawMultiPoint(e,r,i)}if(d){const A=t.getBuilder(n.getZIndex(),"Text");A.setTextStyle(o,p),A.drawText(e,r,i)}}function fst(t,e,n,r,i){const s=n.getFill(),a=n.getStroke();if(s||a){const o=t.getBuilder(n.getZIndex(),"Polygon");o.setFillStrokeStyle(s,a),o.drawPolygon(e,r,i)}const l=n.getText();if(l&&l.getText()){const o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}class $pe extends u7{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ql(),this.wrappedRenderedExtent_=Ql(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,s=n.viewState,a=s.center,l=s.resolution,o=s.projection,d=s.rotation,p=o.getExtent(),A=this.getLayer().getSource(),v=this.getLayer().getDeclutter(),y=n.pixelRatio,C=n.viewHints,x=!(C[da.ANIMATING]||C[da.INTERACTING]),M=this.context,I=Math.round(no(i)/l*y),P=Math.round(Xa(i)/l*y),F=A.getWrapX()&&o.canWrapX(),D=F?no(p):null,V=F?Math.ceil((i[2]-p[2])/D)+1:1;let H=F?Math.floor((i[0]-p[0])/D):0;do{const Q=this.getRenderTransform(a,l,d,y,I,P,H*D);e.execute(M,[M.canvas.width,M.canvas.height],Q,d,x,r===void 0?tI:r?XO:tst,r?v&&n.declutter[v]:void 0)}while(++H<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Il(this.context.canvas.width,this.context.canvas.height,bee))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Mb(this.context),bee.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(e,n){const r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const s=e.extent,a=e.viewState.resolution,l=Math.round(no(s)/a*r),o=Math.round(Xa(s)/a*r);Hh(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,0,-l/2,-o/2),a_(this.inversePixelTransform,this.pixelTransform);const d=KH(this.pixelTransform);this.useContainer(n,d,this.getBackground(e));const p=this.context,A=p.canvas,v=this.replayGroup_;let y=v&&!v.isEmpty();if(!y&&!(this.getLayer().hasListener(yu.PRERENDER)||this.getLayer().hasListener(yu.POSTRENDER)))return null;A.width!=l||A.height!=o?(A.width=l,A.height=o,A.style.transform!==d&&(A.style.transform=d)):this.containerReused||p.clearRect(0,0,l,o),this.setDrawContext_(),this.preRender(p,e);const C=e.viewState;C.projection;let x=!1;if(y&&i.extent&&this.clipping){const M=Ed(i.extent);y=Ua(M,e.extent),x=y&&!Cd(M,e.extent),x&&this.clipUnrotated(p,e,M)}return y&&this.renderWorlds(v,e,this.getLayer().getDeclutter()?!1:void 0),x&&p.restore(),this.postRender(p,e),this.renderedRotation_!==C.rotation&&(this.renderedRotation_=C.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=[this.context.canvas.width,this.context.canvas.height];Ta(this.pixelTransform,r);const i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,l=this.renderedProjection_,o=this.wrappedRenderedExtent_,d=this.getLayer(),p=[],A=r[0]*If,v=r[1]*If;p.push(this.getRenderTransform(i,s,a,If,A,v,0).slice());const y=d.getSource(),C=l.getExtent();if(y.getWrapX()&&l.canWrapX()&&!Cd(C,o)){let x=o[0];const M=no(C);let I=0,P;for(;x<C[0];)--I,P=M*I,p.push(this.getRenderTransform(i,s,a,If,A,v,P).slice()),x+=M;for(I=0,x=o[2];x>C[2];)++I,P=M*I,p.push(this.getRenderTransform(i,s,a,If,A,v,P).slice()),x-=M}this.hitDetectionImageData_=Npe(r,p,this.renderedFeatures_,d.getStyleFunction(),o,s,a,F8(s,this.renderedPixelRatio_),null)}n(kpe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,s){if(!this.replayGroup_)return;const a=n.viewState.resolution,l=n.viewState.rotation,o=this.getLayer(),d={},p=function(C,x,M){const I=Vr(C),P=d[I];if(P){if(P!==!0&&M<P.distanceSq){if(M===0)return d[I]=!0,s.splice(s.lastIndexOf(P),1),i(C,o,x);P.geometry=x,P.distanceSq=M}}else{if(M===0)return d[I]=!0,i(C,o,x);s.push(d[I]={feature:C,layer:o,geometry:x,distanceSq:M,callback:i})}};let A;const v=[this.replayGroup_],y=this.getLayer().getDeclutter();return v.some(C=>A=C.forEachFeatureAtCoordinate(e,a,l,r,p,y&&n.declutter[y]?n.declutter[y].all().map(x=>x.value):null)),A}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[da.ANIMATING],s=e.viewHints[da.INTERACTING],a=n.getUpdateWhileAnimating(),l=n.getUpdateWhileInteracting();if(this.ready&&!a&&i||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const o=e.extent,d=e.viewState,p=d.projection,A=d.resolution,v=e.pixelRatio,y=n.getRevision(),C=n.getRenderBuffer();let x=n.getRenderOrder();x===void 0&&(x=ist);const M=d.center.slice(),I=Oc(o,C*A),P=I.slice(),F=[I.slice()],D=p.getExtent();if(r.getWrapX()&&p.canWrapX()&&!Cd(D,e.extent)){const ce=no(D),se=Math.max(no(I)/2,ce);I[0]=D[0]-se,I[2]=D[2]+se,O2(M,p);const le=ZH(F[0],p);le[0]<D[0]&&le[2]<D[2]?F.push([le[0]+ce,le[1],le[2]+ce,le[3]]):le[0]>D[0]&&le[2]>D[2]&&F.push([le[0]-ce,le[1],le[2]-ce,le[3]])}if(this.ready&&this.renderedResolution_==A&&this.renderedRevision_==y&&this.renderedRenderOrder_==x&&Cd(this.wrappedRenderedExtent_,I))return pm(this.renderedExtent_,P)||(this.hitDetectionImageData_=null,this.renderedExtent_=P),this.renderedCenter_=M,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new Ppe(Upe(A,v),I,A,v);let H;for(let ce=0,se=F.length;ce<se;++ce)r.loadFeatures(F[ce],A,p);const Q=F8(A,v);let G=!0;const W=(ce,se)=>{let le;const ie=ce.getStyleFunction()||n.getStyleFunction();if(ie&&(le=ie(ce,A)),le){const pe=this.renderFeature(ce,Q,le,V,H,this.getLayer().getDeclutter(),se);G=G&&!pe}},te=Qb(I),q=r.getFeaturesInExtent(te);x&&q.sort(x);for(let ce=0,se=q.length;ce<se;++ce)W(q[ce],ce);this.renderedFeatures_=q,this.ready=G;const Y=V.finish(),ee=new Fpe(I,A,v,r.getOverlaps(),Y,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=A,this.renderedRevision_=y,this.renderedRenderOrder_=x,this.renderedExtent_=P,this.wrappedRenderedExtent_=I,this.renderedCenter_=M,this.renderedProjection_=p,this.renderedPixelRatio_=v,this.replayGroup_=ee,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,s,a,l){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let d=0,p=r.length;d<p;++d)o=ZO(i,e,r[d],n,this.boundHandleStyleImageChange_,s,a,l)||o;else o=ZO(i,e,r,n,this.boundHandleStyleImageChange_,s,a,l);return o}}class cm extends Yb{constructor(e){super(e)}createRenderer(){return new $pe(this)}}function nN(t){const e=t.frameState,n=Gb(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new Ope(t.context,e.pixelRatio,e.extent,n,e.viewState.rotation)}var nI=QZe.split(".");nI=parseInt(nI[0])*100+parseInt(nI[1]);var O8=function(t,e){var n=t.frameState.pixelRatio;if(nI>605&&nI<700&&n!==1&&e.getImage()instanceof B_){e=e.clone();var r=e.getImage();r.setScale(r.getScale()*n);var i=r.getAnchor();if(i&&r.setDisplacement){var s=r.getDisplacement();s&&(s[0]-=i[0]/n,s[1]+=i[1]/n,r.setAnchor([0,0]))}else i&&(i[0]/=n,i[1]/=n)}return e},pst=class extends cm{constructor(e){var n=e||{};super(n),this.oldcluster=new L_,this.clusters=[],this.animation={start:!1},this.set("animationDuration",typeof n.animationDuration=="number"?n.animationDuration:700),this.set("animationMethod",n.animationMethod||Mp),this.on(["precompose","prerender"],this.animate.bind(this)),this.on(["postcompose","postrender"],this.postanimate.bind(this))}setSource(e){this._saveClusterFn||(this._saveClusterFn=this.saveCluster.bind(this)),this.getSource()&&this.getSource().un("change",this._saveClusterFn),cm.prototype.setSource.call(this,e),this.getSource()&&this.getSource().on("change",this._saveClusterFn)}saveCluster(){if(this.oldcluster){if(this.oldcluster.clear(),!this.get("animationDuration"))return;var e=this.getSource().getFeatures();e.length&&e[0].get("features")&&(this.oldcluster.addFeatures(this.clusters),this.clusters=e.slice(0),this.sourceChanged=!0)}}getClusterForFeature(e,n){for(var r=0,i;i=n[r];r++){var s=i.get("features");if(s&&s.length){for(var a=0,l;l=s[a];a++)if(e===l)return i}}return!1}stopAnimation(){this.animation.start=!1,this.animation.cA=[],this.animation.cB=[]}animate(e){var n=this.get("animationDuration");if(n){var r=e.frameState.viewState.resolution,i,s,a=this.animation,l=e.frameState.time;if(a.resolution!=r&&this.sourceChanged){var o=e.frameState.extent;for(a.resolution<r?(o=Oc(o,100*r),a.cA=this.oldcluster.getFeaturesInExtent(o),a.cB=this.getSource().getFeaturesInExtent(o),a.revers=!1):(o=Oc(o,100*r),a.cA=this.getSource().getFeaturesInExtent(o),a.cB=this.oldcluster.getFeaturesInExtent(o),a.revers=!0),a.clusters=[],i=0,s;s=a.cA[i];i++){var d=s.get("features");if(d&&d.length){var p=this.getClusterForFeature(d[0],a.cB);p&&a.clusters.push({f:s,pt:p.getGeometry().getCoordinates()})}}if(a.resolution=r,this.sourceChanged=!1,!a.clusters.length||a.clusters.length>1e3){this.stopAnimation();return}l=a.start=new Date().getTime()}if(a.start){var A=e.vectorContext||nN(e),v=(l-a.start)/n;v>1&&(this.stopAnimation(),v=1),v=this.get("animationMethod")(v);var y=this.getStyle(),C=typeof y=="function"?y:y.length?function(){return y}:function(){return[y]};for(e.context.save(),e.context.globalAlpha=this.getOpacity(),i=0,p;p=a.clusters[i];i++){var x=p.f.getGeometry().getCoordinates(),M=x[0]-p.pt[0],I=x[1]-p.pt[1];a.revers?(x[0]=p.pt[0]+v*M,x[1]=p.pt[1]+v*I):(x[0]=x[0]-v*M,x[1]=x[1]-v*I);var P=C(p.f,r,!0);if(P.length||(P=[P]),p.f.get("features").length===1&&!M&&!I)d=p.f.get("features")[0];else{var F=new So(x);d=new Ys(F)}for(var D=0,V;V=P[D];D++)if(V.getText()&&/\n/.test(V.getText().getText())){var H=V.getText().getOffsetX(),Q=V.getText().getOffsetY(),G=V.getText().getRotation()||0,W=Number((V.getText().getFont()||"10px").match(/\d+/))*1.2,te=V.getText().getText().split(`
`),q,Y=te.length-1,ee=V.clone();te.forEach(function(ce,se){switch(se==1&&(ee.setImage(),ee.setFill(),ee.setStroke()),V.getText().getTextBaseline()){case"alphabetic":case"ideographic":case"bottom":{q=Y;break}case"hanging":case"top":{q=0;break}default:{q=Y/2;break}}ee.getText().setOffsetX(H-Math.sin(G)*W*(se-q)),ee.getText().setOffsetY(Q+Math.cos(G)*W*(se-q)),ee.getText().setText(ce),A.drawFeature(d,O8(e,ee))})}else A.drawFeature(d,O8(e,V))}e.context.restore(),e.frameState.animate=!0,e.context.save(),e.context.beginPath(),e.context.rect(0,0,0,0),e.context.clip(),this.clip_=!0}}}postanimate(e){this.clip_&&(e.context.restore(),this.clip_=!1)}};const AM=34962,gM=34963,Ast=35040,h7=35044,vB=35048,gst=5121,mst=5123,vst=5125,Vpe=5126,See=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function yst(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!vet},e);const n=See.length;for(let r=0;r<n;++r)try{const i=t.getContext(See[r],e);if(i)return i}catch{}return null}const _st={STATIC_DRAW:h7,STREAM_DRAW:Ast,DYNAMIC_DRAW:vB};class uE{constructor(e,n){this.array_=null,this.type_=e,zs(e===AM||e===gM,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:_st.STATIC_DRAW}ofSize(e){return this.array_=new(P4(this.type_))(e),this}fromArray(e){return this.array_=P4(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(P4(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function P4(t){switch(t){case AM:return Float32Array;case gM:return Uint32Array;default:return Float32Array}}const PR={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},bst=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,wst=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class Tee{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e.vertexShader||bst),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e.fragmentShader||wst),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(a=>{this.uniforms_.push({value:e.uniforms[a],location:n.getUniformLocation(this.renderTargetProgram_,a)})})}getGL(){return this.gl_}init(e){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,a=0,l=n.RGBA,o=n.UNSIGNED_BYTE,d=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],a,l,o,d),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,r,i){const s=this.getGL(),a=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const o=Vr(s.canvas);if(!e.renderTargets[o]){const d=s.getContextAttributes();d&&d.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[o]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const l=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,l),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}function d7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function JO(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const kg={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Wc={UNSIGNED_BYTE:gst,UNSIGNED_SHORT:mst,UNSIGNED_INT:vst,FLOAT:Vpe},e5={};function Iee(t){return"shared/"+t}let Bee=0;function xst(){const t="unique/"+Bee;return Bee+=1,t}function Cst(t){let e=e5[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:yst(n)},e5[t]=e}return e.users+=1,e.context}function Est(t){const e=e5[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete e5[t]}class Sst extends T2{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?Iee(e.canvasCacheKey):xst(),this.gl_=Cst(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(PR.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(PR.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ya(),this.offsetScaleMatrix_=Ya(),this.tmpMat4_=d7(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new Tee({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new Tee({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===Iee(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}bindBuffer(e){const n=this.gl_,r=Vr(e);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:e,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=this.gl_,r=Vr(e),i=this.bufferCache_[r];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[r]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(PR.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(PR.RESTORED,this.boundHandleWebGLContextRestored_),Est(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,r){const i=this.gl_,s=this.getCanvas(),a=e.size,l=e.pixelRatio;(s.width!==a[0]*l||s.height!==a[1]*l)&&(s.width=a[0]*l,s.height=a[1]*l,s.style.width=a[0]+"px",s.style.height=a[1]+"px");for(let o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindTexture(e,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),n)}prepareDrawToRenderTarget(e,n,r,i){const s=this.gl_,a=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,a[0],a[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,a=n-e,l=e*s;r.drawElements(r.TRIANGLES,a,i,l)}finalizeDraw(e,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(e,null,n,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(kg.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(kg.ZOOM,e.viewState.zoom),this.setUniformFloatValue(kg.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(kg.PIXEL_RATIO,i),this.setUniformFloatVec2(kg.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(kg.ROTATION,r)}applyHitDetectionUniform(e){const n=this.getUniformLocation(kg.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(kg.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const a=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&a&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,JO(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,n){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(n),this.applyUniforms(n)}compileShader(e,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,n){const r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),a=r.createProgram();if(r.attachShader(a,i),r.attachShader(a,s),r.linkProgram(a),!r.getShaderParameter(i,r.COMPILE_STATUS)){const l=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(l)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const l=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(l)}if(r.deleteShader(s),!r.getProgramParameter(a,r.LINK_STATUS)){const l=`GL program linking failed: ${r.getProgramInfoLog(a)}`;throw new Error(l)}return a}getUniformLocation(e){const n=Vr(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=Vr(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const r=e.size,i=e.viewState.rotation,s=e.viewState.resolution,a=e.viewState.center;return Hh(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-a[0],-a[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}enableAttributeArray_(e,n,r,i,s){const a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,n,r,!1,i,s))}enableAttributes(e){const n=Tst(e);let r=0;for(let i=0;i<e.length;i++){const s=e[i];this.enableAttributeArray_(s.name,s.size,s.type||Vpe,n,r),r+=s.size*Hpe(s.type)}}handleWebGLContextLost(e){Hb(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,r){const i=this.gl_;r=r||i.createTexture();const s=0,a=i.RGBA,l=0,o=i.RGBA,d=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,r),n?i.texImage2D(i.TEXTURE_2D,s,a,o,d,n):i.texImage2D(i.TEXTURE_2D,s,a,e[0],e[1],l,o,d,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),r}}function Tst(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*Hpe(r.type)}return e}function Hpe(t){switch(t){case Wc.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Wc.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Wc.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Wc.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class mM extends Epe{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=Ya(),this.pixelContext_=null,this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,e.addChangeListener(Jo.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(yu.PRECOMPOSE)){const i=new JT(yu.PRECOMPOSE,void 0,n,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(yu.POSTCOMPOSE)){const i=new JT(yu.POSTCOMPOSE,void 0,n,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let a=0,l=e.layerStatesArray.length;a<l;a++){const o=e.layerStatesArray[a].layer,d=o.getRenderer();if(!(d instanceof mM)){n=!0;continue}const p=o.getClassName();if((n||p!==i)&&(r+=1,n=!1),i=p,d===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Sst({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){Hh(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new JT(e,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(yu.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(yu.POSTRENDER,e,n)}}const Mg=new Uint8Array(4);class Gpe{constructor(e,n){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){pm(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,e[0],e[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,n){if(e<0||n<0||e>this.size_[0]||n>=this.size_[1])return Mg[0]=0,Mg[1]=0,Mg[2]=0,Mg[3]=0,Mg;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return Mg[0]=this.data_[r*4],Mg[1]=this.data_[r*4+1],Mg[2]=this.data_[r*4+2],Mg[3]=this.data_[r*4+3],Mg}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,e[0],e[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e[0],e[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const rI={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};var Qpe={exports:{}};Qpe.exports=rN;Qpe.exports.default=rN;function rN(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=jpe(t,0,i,n,!0),a=[];if(!s||s.next===s.prev)return a;var l,o,d,p,A,v,y;if(r&&(s=Rst(t,e,s,n)),t.length>80*n){l=d=t[0],o=p=t[1];for(var C=n;C<i;C+=n)A=t[C],v=t[C+1],A<l&&(l=A),v<o&&(o=v),A>d&&(d=A),v>p&&(p=v);y=Math.max(d-l,p-o),y=y!==0?32767/y:0}return yB(s,a,n,l,o,y,0),a}function jpe(t,e,n,r,i){var s,a;if(i===D8(t,e,n,r)>0)for(s=e;s<n;s+=r)a=Mee(s,t[s],t[s+1],a);else for(s=n-r;s>=e;s-=r)a=Mee(s,t[s],t[s+1],a);return a&&iN(a,a.next)&&(bB(a),a=a.next),a}function Rb(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(iN(n,n.next)||xl(n.prev,n,n.next)===0)){if(bB(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function yB(t,e,n,r,i,s,a){if(t){!a&&s&&kst(t,r,i,s);for(var l=t,o,d;t.prev!==t.next;){if(o=t.prev,d=t.next,s?Bst(t,r,i,s):Ist(t)){e.push(o.i/n|0),e.push(t.i/n|0),e.push(d.i/n|0),bB(t),t=d.next,l=d.next;continue}if(t=d,t===l){a?a===1?(t=Mst(Rb(t),e,n),yB(t,e,n,r,i,s,2)):a===2&&Lst(t,e,n,r,i,s):yB(Rb(t),e,n,r,i,s,1);break}}}}function Ist(t){var e=t.prev,n=t,r=t.next;if(xl(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,a=r.x,l=e.y,o=n.y,d=r.y,p=i<s?i<a?i:a:s<a?s:a,A=l<o?l<d?l:d:o<d?o:d,v=i>s?i>a?i:a:s>a?s:a,y=l>o?l>d?l:d:o>d?o:d,C=r.next;C!==e;){if(C.x>=p&&C.x<=v&&C.y>=A&&C.y<=y&&Gx(i,l,s,o,a,d,C.x,C.y)&&xl(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function Bst(t,e,n,r){var i=t.prev,s=t,a=t.next;if(xl(i,s,a)>=0)return!1;for(var l=i.x,o=s.x,d=a.x,p=i.y,A=s.y,v=a.y,y=l<o?l<d?l:d:o<d?o:d,C=p<A?p<v?p:v:A<v?A:v,x=l>o?l>d?l:d:o>d?o:d,M=p>A?p>v?p:v:A>v?A:v,I=N8(y,C,e,n,r),P=N8(x,M,e,n,r),F=t.prevZ,D=t.nextZ;F&&F.z>=I&&D&&D.z<=P;){if(F.x>=y&&F.x<=x&&F.y>=C&&F.y<=M&&F!==i&&F!==a&&Gx(l,p,o,A,d,v,F.x,F.y)&&xl(F.prev,F,F.next)>=0||(F=F.prevZ,D.x>=y&&D.x<=x&&D.y>=C&&D.y<=M&&D!==i&&D!==a&&Gx(l,p,o,A,d,v,D.x,D.y)&&xl(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;F&&F.z>=I;){if(F.x>=y&&F.x<=x&&F.y>=C&&F.y<=M&&F!==i&&F!==a&&Gx(l,p,o,A,d,v,F.x,F.y)&&xl(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;D&&D.z<=P;){if(D.x>=y&&D.x<=x&&D.y>=C&&D.y<=M&&D!==i&&D!==a&&Gx(l,p,o,A,d,v,D.x,D.y)&&xl(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function Mst(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!iN(i,s)&&Kpe(i,r,r.next,s)&&_B(i,s)&&_B(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),bB(r),bB(r.next),r=t=s),r=r.next}while(r!==t);return Rb(r)}function Lst(t,e,n,r,i,s){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&zst(a,l)){var o=Wpe(a,l);a=Rb(a,a.next),o=Rb(o,o.next),yB(a,e,n,r,i,s,0),yB(o,e,n,r,i,s,0);return}l=l.next}a=a.next}while(a!==t)}function Rst(t,e,n,r){var i=[],s,a,l,o,d;for(s=0,a=e.length;s<a;s++)l=e[s]*r,o=s<a-1?e[s+1]*r:t.length,d=jpe(t,l,o,r,!1),d===d.next&&(d.steiner=!0),i.push(Ust(d));for(i.sort(Pst),s=0;s<i.length;s++)n=Fst(i[s],n);return n}function Pst(t,e){return t.x-e.x}function Fst(t,e){var n=Ost(t,e);if(!n)return e;var r=Wpe(n,t);return Rb(r,r.next),Rb(n,n.next)}function Ost(t,e){var n=e,r=t.x,i=t.y,s=-1/0,a;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var l=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=r&&l>s&&(s=l,a=n.x<n.next.x?n:n.next,l===r))return a}n=n.next}while(n!==e);if(!a)return null;var o=a,d=a.x,p=a.y,A=1/0,v;n=a;do r>=n.x&&n.x>=d&&r!==n.x&&Gx(i<p?r:s,i,d,p,i<p?s:r,i,n.x,n.y)&&(v=Math.abs(i-n.y)/(r-n.x),_B(n,t)&&(v<A||v===A&&(n.x>a.x||n.x===a.x&&Nst(a,n)))&&(a=n,A=v)),n=n.next;while(n!==o);return a}function Nst(t,e){return xl(t.prev,t,e.prev)<0&&xl(e.next,t,t.next)<0}function kst(t,e,n,r){var i=t;do i.z===0&&(i.z=N8(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Dst(i)}function Dst(t){var e,n,r,i,s,a,l,o,d=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,r=n,l=0,e=0;e<d&&(l++,r=r.nextZ,!!r);e++);for(o=d;l>0||o>0&&r;)l!==0&&(o===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,l--):(i=r,r=r.nextZ,o--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,d*=2}while(a>1);return t}function N8(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Ust(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Gx(t,e,n,r,i,s,a,l){return(i-a)*(e-l)>=(t-a)*(s-l)&&(t-a)*(r-l)>=(n-a)*(e-l)&&(n-a)*(s-l)>=(i-a)*(r-l)}function zst(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!$st(t,e)&&(_B(t,e)&&_B(e,t)&&Vst(t,e)&&(xl(t.prev,t,e.prev)||xl(t,e.prev,e))||iN(t,e)&&xl(t.prev,t,t.next)>0&&xl(e.prev,e,e.next)>0)}function xl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function iN(t,e){return t.x===e.x&&t.y===e.y}function Kpe(t,e,n,r){var i=OR(xl(t,e,n)),s=OR(xl(t,e,r)),a=OR(xl(n,r,t)),l=OR(xl(n,r,e));return!!(i!==s&&a!==l||i===0&&FR(t,n,e)||s===0&&FR(t,r,e)||a===0&&FR(n,t,r)||l===0&&FR(n,e,r))}function FR(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function OR(t){return t>0?1:t<0?-1:0}function $st(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Kpe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function _B(t,e){return xl(t.prev,t,t.next)<0?xl(t,e,t.next)>=0&&xl(t,t.prev,e)>=0:xl(t,e,t.prev)<0||xl(t,t.next,e)<0}function Vst(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Wpe(t,e){var n=new k8(t.i,t.x,t.y),r=new k8(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function Mee(t,e,n,r){var i=new k8(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bB(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function k8(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}rN.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,a=Math.abs(D8(t,0,s,n));if(i)for(var l=0,o=e.length;l<o;l++){var d=e[l]*n,p=l<o-1?e[l+1]*n:t.length;a-=Math.abs(D8(t,d,p,n))}var A=0;for(l=0;l<r.length;l+=3){var v=r[l]*n,y=r[l+1]*n,C=r[l+2]*n;A+=Math.abs((t[v]-t[C])*(t[y+1]-t[v+1])-(t[v]-t[y])*(t[C+1]-t[v+1]))}return a===0&&A===0?0:Math.abs((A-a)/a)};function D8(t,e,n,r){for(var i=0,s=e,a=n-r;s<n;s+=r)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}rN.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var a=0;a<e;a++)n.vertices.push(t[i][s][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};const Lee=.985;function qpe(t,e){e=e||[];const n=256,r=n-1;return e[0]=Math.floor(t/n/n/n)/r,e[1]=Math.floor(t/n/n)%n/r,e[2]=Math.floor(t/n)%n/r,e[3]=t%n/r,e}function Ype(t){let e=0;const n=256,r=n-1;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),e+=Math.round(t[2]*n*r),e+=Math.round(t[3]*r),e}function Xpe(){const t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}function Zpe(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),a=t.extent,l=i?no(s):null,o=i?Math.ceil((a[2]-s[2])/l)+1:1;return[i?Math.floor((a[0]-s[0])/l):0,o,l]}class Hst extends mM{constructor(e,n){const r=n.uniforms||{},i=Ya();r[kg.PROJECTION_MATRIX]=i,super(e,{uniforms:r,postProcesses:n.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new uE(AM,vB),this.indicesBuffer_=new uE(gM,vB),this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.program_,this.hitDetectionEnabled_=n.hitDetectionEnabled??!0;const s=n.attributes?n.attributes.map(function(l){return{name:"a_prop_"+l.name,size:1,type:Wc.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Wc.FLOAT},{name:"a_index",size:1,type:Wc.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:Wc.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Wc.FLOAT})),this.attributes.push(...s),this.customAttributes=n.attributes?n.attributes:[],this.previousExtent_=Ql(),this.currentTransform_=i,this.renderTransform_=Ya(),this.invertRenderTransform_=Ya(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=Xpe(),this.worker_.addEventListener("message",l=>{const o=l.data;if(o.type===rI.GENERATE_POINT_BUFFERS){const d=o.projectionTransform;this.verticesBuffer_.fromArrayBuffer(o.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(o.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=d,a_(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(l.data.renderInstructions),o.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const a=this.getLayer().getSource();this.sourceListenKeys_=[Yi(a,ml.ADDFEATURE,this.handleSourceFeatureAdded_,this),Yi(a,ml.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Yi(a,ml.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Yi(a,ml.CLEAR,this.handleSourceFeatureClear_,this)],a.forEachFeature(l=>{this.featureCache_[Vr(l)]={feature:l,properties:l.getProperties(),geometry:l.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Gpe(this.helper))}handleSourceFeatureAdded_(e){const n=e.feature;this.featureCache_[Vr(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const n=e.feature;this.featureCache_[Vr(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}}handleSourceFeatureDelete_(e){const n=e.feature;delete this.featureCache_[Vr(n)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=Zpe(e,this.getLayer());return this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),this.helper.getCanvas()}prepareFrameInternal(e){const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[da.ANIMATING]&&!e.viewHints[da.INTERACTING],a=!UA(this.previousExtent_,e.extent),l=this.sourceRevision_<r.getRevision();if(l&&(this.sourceRevision_=r.getRevision()),s&&(a||l)){const o=i.projection,d=i.resolution,p=n instanceof Yb?n.getRenderBuffer():0,A=Oc(e.extent,p*d);r.loadFeatures(A,d,o),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const n=Ya();this.helper.makeProjectionTransform(e,n);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let a,l;const o=[],d=[];let p=-1;for(const v in this.featureCache_)if(a=this.featureCache_[v],l=a.geometry,!(!l||l.getType()!=="Point")){if(o[0]=l.getFlatCoordinates()[0],o[1]=l.getFlatCoordinates()[1],Ta(n,o),this.renderInstructions_[++p]=o[0],this.renderInstructions_[++p]=o[1],this.hitDetectionEnabled_){const y=qpe(p+5,d);this.renderInstructions_[++p]=y[0],this.renderInstructions_[++p]=y[1],this.renderInstructions_[++p]=y[2],this.renderInstructions_[++p]=y[3],this.renderInstructions_[++p]=Number(v)}for(let y=0;y<this.customAttributes.length;y++){const C=this.customAttributes[y].callback(a.feature,a.properties);this.renderInstructions_[++p]=C}}const A={id:++this.lastSentId,type:rI.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};A.projectionTransform=n,this.ready=!1,this.worker_.postMessage(A,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,n,r,i,s){if(zs(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const a=Ta(n.coordinateToPixelTransform,e.slice()),l=this.hitRenderTarget_.readPixel(a[0]/2,a[1]/2),o=[l[0]/255,l[1]/255,l[2]/255,l[3]/255],d=Ype(o),p=this.renderInstructions_[d],A=Math.floor(p).toString(),y=this.getLayer().getSource().getFeatureByUid(A);if(y)return i(y,this.getLayer(),null)}renderWorlds(e,n,r,i,s){let a=r;this.helper.useProgram(this.program_,e),n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),M2(this.currentTransform_,a*s,0),Gb(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(n);const l=this.indicesBuffer_.getSize();this.helper.drawElements(0,l)}while(++a<i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){xo(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class Gst{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}}class Qst extends LE{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=e.gutter||0,this.helper_=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(pi.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===Ar.LOADED,this.loaded)this.uploadTile();else{if(e instanceof W2){const n=e.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}e.addEventListener(pi.CHANGE,this.handleTileChange_)}}uploadTile(){Xi()}setReady(){this.ready=!0,this.dispatchEvent(pi.CHANGE)}handleTileChange_(){this.tile.getState()===Ar.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(pi.CHANGE,this.handleTileChange_)}}function Jpe(t,e,n){const r=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function jst(t,e,n,r){Jpe(t,e,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}function Ree(t,e,n,r,i,s){const a=t.getGL();let l,o;n instanceof Float32Array?(l=a.FLOAT,t.getExtension("OES_texture_float"),o=t.getExtension("OES_texture_float_linear")!==null):(l=a.UNSIGNED_BYTE,o=!0),Jpe(a,e,s&&o);const d=n.byteLength/r[1];let p=1;d%8===0?p=8:d%4===0?p=4:d%2===0&&(p=2);let A;switch(i){case 1:{A=a.LUMINANCE;break}case 2:{A=a.LUMINANCE_ALPHA;break}case 3:{A=a.RGB;break}case 4:{A=a.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const v=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,p),a.texImage2D(a.TEXTURE_2D,0,A,r[0],r[1],0,A,l,n),a.pixelStorei(a.UNPACK_ALIGNMENT,v)}let Mx=null;function Kst(){Mx=Il(1,1,void 0,{willReadFrequently:!0})}class Wst extends Qst{constructor(e){super(e),this.textures=[],this.renderSize_=El(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const n=new uE(AM,h7);n.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(n),this.coords=n,this.setTile(e.tile)}uploadTile(){const e=this.helper_,n=e.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof W2||r instanceof oE?i=r.getImage():i=r.getData();const s=jO(i);if(s){const P=n.createTexture();this.textures.push(P),this.bandCount=4,jst(n,P,s,r.interpolate),this.setReady();return}i=I8(i);const a=r.getSize(),l=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],o=i instanceof Float32Array,d=l[0]*l[1],p=o?Float32Array:Uint8Array,A=p.BYTES_PER_ELEMENT,v=i.byteLength/l[1];this.bandCount=Math.floor(v/A/l[0]);const y=Math.ceil(this.bandCount/4);if(y===1){const P=n.createTexture();this.textures.push(P),Ree(e,P,i,l,this.bandCount,r.interpolate),this.setReady();return}const C=new Array(y);for(let P=0;P<y;++P){const F=n.createTexture();this.textures.push(F);const D=P<y-1?4:(this.bandCount-1)%4+1;C[P]=new p(d*D)}let x=0,M=0;const I=l[0]*this.bandCount;for(let P=0;P<l[1];++P){for(let F=0;F<I;++F){const D=i[M+F],V=Math.floor(x/this.bandCount),H=F%this.bandCount,Q=Math.floor(H/4),G=C[Q],W=G.length/d,te=H%4;G[V*W+te]=D,++x}M+=v/A}for(let P=0;P<y;++P){const F=this.textures[P],D=C[P],V=D.length/d;Ree(e,F,D,l,V,r.interpolate)}this.setReady()}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let n=0;n<this.textures.length;++n)e.deleteTexture(this.textures[n]);this.tile.removeEventListener(pi.CHANGE,this.handleTileChange_)}getImagePixelData_(e,n,r){const i=this.gutter_,s=this.renderSize_[0],a=this.renderSize_[1];Mx||Kst(),Mx.clearRect(0,0,1,1);const l=e.width,o=e.height,d=l-2*i,p=o-2*i,A=i+Math.floor(d*(n/s)),v=i+Math.floor(p*(r/a));let y;try{Mx.drawImage(e,A,v,1,1,0,0,1,1),y=Mx.getImageData(0,0,1,1).data}catch{return Mx=null,null}return y}getArrayPixelData_(e,n,r,i){const s=this.gutter_,a=this.renderSize_[0],l=this.renderSize_[1],o=n[0],d=n[1],p=o+2*s,A=d+2*s,v=s+Math.floor(o*(r/a)),y=s+Math.floor(d*(i/l));if(e instanceof DataView){const x=e.byteLength/(p*A),M=x*(y*p+v),I=e.buffer.slice(M,M+x);return new DataView(I)}const C=this.bandCount*(y*p+v);return e.slice(C,C+this.bandCount)}getPixelData(e,n){if(!this.loaded)return null;if(this.tile instanceof QG){const r=this.tile.getData(),i=I8(r);if(i){const s=this.tile.getSize();return this.getArrayPixelData_(i,s,e,n)}return this.getImagePixelData_(jO(r),e,n)}return this.getImagePixelData_(this.tile.getImage(),e,n)}}const qst={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},Yst={};function Pee(t){return 1/(t+2)}function Xst(){return{tileIds:new Set,representationsByZ:{}}}function Fee(t,e){return t.tileIds.has(Vr(e))}function Oee(t,e,n){const r=t.representationsByZ;n in r||(r[n]=new Set),r[n].add(e),t.tileIds.add(Vr(e.tile))}function F4(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=wu(e,Ed(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=wu(e,i))}return e}function U8(t,e){return`${t.getKey()},${Ty(e)}`}class Zst extends mM{constructor(e,n){super(e,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Ya(),this.tempMat4=d7(),this.tempTileRange_=new X2(0,0,0,0),this.tempTileCoord_=gB(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new kfe(r),this.frameState=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}isDrawableTile_(e){const n=this.getLayer(),r=e.getState(),i=n.getUseInterimTilesOnError();return r==Ar.LOADED||r==Ar.EMPTY||r==Ar.ERROR&&!i}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const r=this.getLayer().getRenderSource();return!r||Am(F4(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return Xi()}enqueueTiles(e,n,r,i,s){const a=e.viewState,l=this.getLayer(),o=l.getRenderSource(),d=o.getTileGridForProjection(a.projection),p=o.getGutterForProjection(a.projection),A=Vr(o);A in e.wantedTiles||(e.wantedTiles[A]={});const v=e.wantedTiles[A],y=this.tileRepresentationCache,C=l.getMapInternal(),x=Math.max(r-s,d.getMinZoom(),d.getZForResolution(Math.min(l.getMaxResolution(),C?C.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):d.getResolution(0)),o.zDirection));for(let M=r;M>=x;--M){const I=d.getTileRangeForExtentAndZ(n,M,this.tempTileRange_),P=d.getResolution(M);for(let F=I.minX;F<=I.maxX;++F)for(let D=I.minY;D<=I.maxY;++D){const V=gB(M,F,D,this.tempTileCoord_),H=U8(o,V);let Q,G;if(y.containsKey(H)&&(Q=y.get(H),G=Q.tile),(!Q||Q.tile.key!==o.getKey())&&(G=o.getTile(M,F,D,e.pixelRatio,a.projection)),Fee(i,G))continue;if(!Q)Q=this.createTileRepresentation({tile:G,grid:d,helper:this.helper,gutter:p}),y.set(H,Q);else if(this.isDrawableTile_(G))Q.setTile(G);else{const te=G.getInterimTile();Q.setTile(te)}Oee(i,Q,M);const W=G.getKey();v[W]=!0,G.getState()===Ar.IDLE&&(e.tileQueue.isKeyQueued(W)||e.tileQueue.enqueue([G,A,d.getTileCoordCenter(V),P]))}}}beforeTilesRender(e,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,n,r,i,s,a,l,o,d,p,A){}renderTileMask(e,n,r,i){}drawTile_(e,n,r,i,s,a,l){if(!n.ready)return;const d=n.tile.tileCoord,p=Ty(d),A=p in a?a[p]:1,v=l.getResolution(r),y=El(l.getTileSize(r),this.tempSize_),C=l.getOrigin(r),x=l.getTileCoordExtent(d),M=A<1?-1:Pee(r);A<1&&(e.animate=!0);const I=e.viewState,P=I.center[0],F=I.center[1],D=y[0]+2*i,V=y[1]+2*i,H=D/V,Q=(P-C[0])/(y[0]*v),G=(C[1]-F)/(y[1]*v),W=I.resolution/v,te=d[1],q=d[2];f8(this.tileTransform_),ZT(this.tileTransform_,2/(e.size[0]*W/D),-2/(e.size[1]*W/D)),KZe(this.tileTransform_,I.rotation),ZT(this.tileTransform_,1,1/H),M2(this.tileTransform_,(y[0]*(te-Q)-i)/D,(y[1]*(q-G)-i)/V),this.renderTile(n,this.tileTransform_,e,s,v,y,C,x,M,i,A)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,e);const r=e.viewState,i=this.getLayer(),s=i.getRenderSource(),a=s.getTileGridForProjection(r.projection),l=s.getGutterForProjection(r.projection),o=F4(e,e.extent),d=a.getZForResolution(r.resolution,s.zDirection),p=Xst(),A=i.getPreload();if(e.nextExtent){const H=a.getZForResolution(r.nextResolution,s.zDirection),Q=F4(e,e.nextExtent);this.enqueueTiles(e,Q,H,p,A)}this.enqueueTiles(e,o,d,p,0),A>0&&setTimeout(()=>{this.enqueueTiles(e,o,d-1,p,A-1)},0);const v={},y=Vr(this),C=e.time;let x=!1;for(const H of p.representationsByZ[d]){const Q=H.tile;if((Q instanceof oE||Q instanceof jG)&&Q.getState()===Ar.EMPTY)continue;const G=Q.tileCoord;if(H.ready){const q=Q.getAlpha(y,C);if(q===1){Q.endTransition(y);continue}x=!0;const Y=Ty(G);v[Y]=q}if(this.renderComplete=!1,this.findAltTiles_(a,G,d+1,p))continue;const te=a.getMinZoom();for(let q=d-1;q>=te&&!this.findAltTiles_(a,G,q,p);--q);}const M=p.representationsByZ,I=Object.keys(M).map(Number).sort($Ze);if(this.beforeTilesMaskRender(e))for(let H=0,Q=I.length;H<Q;++H){const G=I[H];for(const W of M[G]){const te=W.tile.tileCoord;if(Ty(te)in v)continue;const Y=a.getTileCoordExtent(te);this.renderTileMask(W,G,Y,Pee(G))}}this.beforeTilesRender(e,x);for(let H=0,Q=I.length;H<Q;++H){const G=I[H];for(const W of M[G]){const te=W.tile.tileCoord;Ty(te)in v||this.drawTile_(e,W,G,l,o,v,a)}}for(const H of M[d]){const Q=H.tile.tileCoord;Ty(Q)in v&&this.drawTile_(e,H,d,l,o,v,a)}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const F=this.helper.getCanvas(),D=this.tileRepresentationCache;for(;D.canExpireCache();)D.pop().dispose();const V=function(H,Q){s.updateCacheSize(.1,Q.viewState.projection),s.expireCache(Q.viewState.projection,Yst)};return e.postRenderFunctions.push(V),this.postRender(n,e),F}findAltTiles_(e,n,r,i){const s=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let a=!0;const l=this.tileRepresentationCache,o=this.getLayer().getRenderSource();for(let d=s.minX;d<=s.maxX;++d)for(let p=s.minY;p<=s.maxY;++p){const A=U8(o,[r,d,p]);let v=!1;if(l.containsKey(A)){const y=l.get(A);y.ready&&!Fee(i,y.tile)&&(Oee(i,y,r),v=!0)}v||(a=!1)}return a}clearCache(){const e=this.tileRepresentationCache;e.forEach(n=>n.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}const to={...qst,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},wF={TEXTURE_COORD:"a_textureCoord"},Jst=[{name:wF.TEXTURE_COORD,size:2,type:Wc.FLOAT}];class eot extends Zst{constructor(e,n){super(e,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new uE(gM,h7),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(e){super.reset(e),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(e){return new Wst(e)}beforeTilesRender(e,n){super.beforeTilesRender(e,n),this.helper.useProgram(this.program_,e)}renderTile(e,n,r,i,s,a,l,o,d,p,A){const v=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Jst);let y=0;for(;y<e.textures.length;){const H=`${to.TILE_TEXTURE_ARRAY}[${y}]`;this.helper.bindTexture(e.textures[y],y,H),++y}for(let H=0;H<this.paletteTextures_.length;++H){const Q=this.paletteTextures_[H],G=Q.getTexture(v);this.helper.bindTexture(G,y,Q.name),++y}const C=r.viewState,x=a[0]+2*p,M=a[1]+2*p,P=e.tile.tileCoord,F=P[1],D=P[2];this.helper.setUniformMatrixValue(to.TILE_TRANSFORM,JO(this.tempMat4,n)),this.helper.setUniformFloatValue(to.TRANSITION_ALPHA,A),this.helper.setUniformFloatValue(to.DEPTH,d);let V=i;p>0&&(V=o,wu(V,i,V)),this.helper.setUniformFloatVec4(to.RENDER_EXTENT,V),this.helper.setUniformFloatValue(to.RESOLUTION,C.resolution),this.helper.setUniformFloatValue(to.ZOOM,C.zoom),this.helper.setUniformFloatValue(to.TEXTURE_PIXEL_WIDTH,x),this.helper.setUniformFloatValue(to.TEXTURE_PIXEL_HEIGHT,M),this.helper.setUniformFloatValue(to.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(to.TEXTURE_ORIGIN_X,l[0]+F*a[0]*s-p*s),this.helper.setUniformFloatValue(to.TEXTURE_ORIGIN_Y,l[1]-D*a[1]*s+p*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const i=this.getLayer(),s=Ta(r.pixelToCoordinateTransform,e.slice()),a=r.viewState,l=i.getExtent();if(l&&!DA(Ed(l,a.projection),s))return null;const o=i.getSources(sc([s]),a.resolution);let d,p,A;for(d=o.length-1;d>=0;--d)if(p=o[d],p.getState()==="ready"){if(A=p.getTileGridForProjection(a.projection),p.getWrapX())break;const y=A.getExtent();if(!y||DA(y,s))break}if(d<0)return null;const v=this.tileRepresentationCache;for(let y=A.getZForResolution(a.resolution);y>=A.getMinZoom();--y){const C=A.getTileCoordForCoordAndZ(s,y),x=U8(p,C);if(!v.containsKey(x))continue;const M=v.get(x),I=M.tile;if((I instanceof oE||I instanceof jG)&&I.getState()===Ar.EMPTY)return null;if(!M.loaded)continue;const P=A.getOrigin(y),F=El(A.getTileSize(y)),D=A.getResolution(y),V=(s[0]-P[0])/D-C[1]*F[0],H=(P[1]-s[1])/D-C[2]*F[1];return M.getPixelData(V,H)}return null}disposeInternal(){const e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}}function tot(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function ub(t){const e=t.toString();return e.includes(".")?e:e+".0"}function f7(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(ub).join(", ")})`}function xF(t){const e=Of(t),n=e.length>3?e[3]:1;return f7([e[0]/255*n,e[1]/255*n,e[2]/255*n,n])}const O4={};let not=0;function t5(t){return t in O4||(O4[t]=not++),O4[t]}function Cv(t){return ub(t5(t))}function p7(t){return"u_var_"+t}function rot(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const N4="getBandValue",eAe="u_paletteTextures";function iot(t,e,n,r){const i=ea(t,n,e);if(lM(i.type,qb))throw new Error("No matching type was found");if(!PA(e,i.type)){const s=nu(e),a=nu(i.type);throw new Error(`Expected expression to be of type ${s}, got ${a}`)}return A7(i,e,r)}function $o(t){return(e,n,r)=>{const i=n.args.length,s=new Array(i);for(let a=0;a<i;++a)s[a]=A7(n.args[a],r,e);return t(s,e)}}const sot={[Pn.Get]:(t,e)=>{const r=e.args[0].value;return r in t.properties||(t.properties[r]={name:r,type:e.type}),(t.inFragmentShader?"v_prop_":"a_prop_")+r},[Pn.GeometryType]:(t,e,n)=>{const r="geometryType";return r in t.properties||(t.properties[r]={name:r,type:Yc,evaluator:a=>LG(a.getGeometry())}),(t.inFragmentShader?"v_prop_":"a_prop_")+r},[Pn.Var]:(t,e)=>{const r=e.args[0].value;return r in t.variables||(t.variables[r]={name:r,type:e.type}),p7(r)},[Pn.Resolution]:()=>"u_resolution",[Pn.Zoom]:()=>"u_zoom",[Pn.Time]:()=>"u_time",[Pn.Any]:$o(t=>`(${t.join(" || ")})`),[Pn.All]:$o(t=>`(${t.join(" && ")})`),[Pn.Not]:$o(([t])=>`(!${t})`),[Pn.Equal]:$o(([t,e])=>`(${t} == ${e})`),[Pn.NotEqual]:$o(([t,e])=>`(${t} != ${e})`),[Pn.GreaterThan]:$o(([t,e])=>`(${t} > ${e})`),[Pn.GreaterThanOrEqualTo]:$o(([t,e])=>`(${t} >= ${e})`),[Pn.LessThan]:$o(([t,e])=>`(${t} < ${e})`),[Pn.LessThanOrEqualTo]:$o(([t,e])=>`(${t} <= ${e})`),[Pn.Multiply]:$o(t=>`(${t.join(" * ")})`),[Pn.Divide]:$o(([t,e])=>`(${t} / ${e})`),[Pn.Add]:$o(t=>`(${t.join(" + ")})`),[Pn.Subtract]:$o(([t,e])=>`(${t} - ${e})`),[Pn.Clamp]:$o(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[Pn.Mod]:$o(([t,e])=>`mod(${t}, ${e})`),[Pn.Pow]:$o(([t,e])=>`pow(${t}, ${e})`),[Pn.Abs]:$o(([t])=>`abs(${t})`),[Pn.Floor]:$o(([t])=>`floor(${t})`),[Pn.Ceil]:$o(([t])=>`ceil(${t})`),[Pn.Round]:$o(([t])=>`floor(${t} + 0.5)`),[Pn.Sin]:$o(([t])=>`sin(${t})`),[Pn.Cos]:$o(([t])=>`cos(${t})`),[Pn.Atan]:$o(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[Pn.Sqrt]:$o(([t])=>`sqrt(${t})`),[Pn.Match]:$o(t=>{const e=t[0],n=t[t.length-1];let r=null;for(let i=t.length-3;i>=1;i-=2){const s=t[i],a=t[i+1];r=`(${e} == ${s} ? ${a} : ${r||n})`}return r}),[Pn.Between]:$o(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[Pn.Interpolate]:$o(([t,e,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],a=r||n[i+1],l=n[i+2],o=n[i+3];let d;t===ub(1)?d=`(${e} - ${s}) / (${l} - ${s})`:d=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${l} - ${s})) - 1.0)`,r=`mix(${a}, ${o}, clamp(${d}, 0.0, 1.0))`}return r}),[Pn.Case]:$o(t=>{const e=t[t.length-1];let n=null;for(let r=t.length-3;r>=0;r-=2){const i=t[r],s=t[r+1];n=`(${i} ? ${s} : ${n||e})`}return n}),[Pn.In]:$o(([t,...e],n)=>{const r=tot("in",n),i=[];for(let s=0;s<e.length;s+=1)i.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${t})`}),[Pn.Array]:$o(t=>`vec${t.length}(${t.join(", ")})`),[Pn.Color]:$o(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`(${t[1]} * vec4(vec3(${t[0]} / 255.0), 1.0))`;const e=t.slice(0,3).map(r=>`${r} / 255.0`);return t.length===3?`vec4(${e.join(", ")}, 1.0)`:`(${t[3]} * vec4(${e.join(", ")}, 1.0))`}),[Pn.Band]:$o(([t,e,n],r)=>{if(!(N4 in r.functions)){let i="";const s=r.bandCount||1;for(let a=0;a<s;a++){const l=Math.floor(a/4);let o=a%4;a===s-1&&o===1&&(o=3);const d=`${to.TILE_TEXTURE_ARRAY}[${l}]`;i+=`  if (band == ${a+1}.0) {
    return texture2D(${d}, v_textureCoord + vec2(dx, dy))[${o}];
  }
`}r.functions[N4]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${to.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${to.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${N4}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[Pn.Palette]:(t,e)=>{const[n,...r]=e.args,i=r.length,s=new Uint8Array(i*4);for(let d=0;d<r.length;d++){const p=r[d].value,A=Of(p),v=d*4;s[v]=A[0],s[v+1]=A[1],s[v+2]=A[2],s[v+3]=A[3]*255}t.paletteTextures||(t.paletteTextures=[]);const a=`${eAe}[${t.paletteTextures.length}]`,l=new Gst(a,s);t.paletteTextures.push(l);const o=A7(n,$r,t);return`texture2D(${a}, vec2((${o} + 0.5) / ${i}.0, 0.5))`}};function A7(t,e,n){if(t instanceof yfe){const r=sot[t.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(n,t,e)}if((t.type&$r)>0)return ub(t.value);if((t.type&Ka)>0)return t.value.toString();if((t.type&Yc)>0)return Cv(t.value.toString());if((t.type&ta)>0)return xF(t.value);if((t.type&uc)>0)return f7(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${nu(e)})`)}function oot(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const ix=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,sx=oot();class tAe{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${ub(sx["circle-radius"])} + ${ub(sx["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=xF(sx["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=ub(sx["stroke-width"]),this.strokeColorExpression_=xF(sx["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Cv("round"),this.strokeJoinExpression_=Cv("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=xF(sx["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,n,r){return this.varyings_.push({name:e,type:n,expression:r}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${ix}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_prop_hitColor = a_prop_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${ix}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${ix}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${Lee} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_prop_hitColor = a_prop_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${ix}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${Lee}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Cv("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Cv("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Cv("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Cv("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0.5, -0.5, distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${ix}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_prop_hitColor = a_prop_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${ix}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}}const AA={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},aot=["#00f","#0ff","#0f0","#ff0","#f00"];class nAe extends Yb{constructor(e){e=e||{};const n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.gradient_=null,this.addChangeListener(AA.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:aot),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";typeof r=="string"?this.weightFunction_=function(i){return i.get(r)}:this.weightFunction_=r,this.setRenderOrder(null)}getBlur(){return this.get(AA.BLUR)}getGradient(){return this.get(AA.GRADIENT)}getRadius(){return this.get(AA.RADIUS)}handleGradientChanged_(){this.gradient_=lot(this.getGradient())}setBlur(e){this.set(AA.BLUR,e)}setGradient(e){this.set(AA.GRADIENT,e)}setRadius(e){this.set(AA.RADIUS,e)}createRenderer(){const e=new tAe().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new Hst(this,{className:this.getClassName(),attributes:[{name:"weight",callback:n=>{const r=this.weightFunction_(n);return r!==void 0?va(r,0,1):1}}],uniforms:{u_size:()=>(this.get(AA.RADIUS)+this.get(AA.BLUR))*2,u_blurSlope:()=>this.get(AA.RADIUS)/Math.max(1,this.get(AA.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function lot(t){const r=Il(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(t.length-1);for(let a=0,l=t.length;a<l;++a)i.addColorStop(a*s,t[a]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}const cot={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Nee={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class uot extends Bpe{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Ya(),this.tileClipContexts_=null}prepareTile(e,n,r){let i;const s=e.getState();return(s===Ar.LOADED||s===Ar.ERROR)&&(this.updateExecutorGroup_(e,n,r),this.tileImageNeedsRender_(e)&&(i=!0)),i}getTile(e,n,r,i){const s=i.pixelRatio,a=i.viewState,l=a.resolution,o=a.projection,d=this.getLayer(),p=d.getSource().getTile(e,n,r,s,o),A=i.viewHints,v=!(A[da.ANIMATING]||A[da.INTERACTING]);return(v||!p.wantedResolution)&&(p.wantedResolution=l),this.prepareTile(p,s,o)&&(v||Date.now()-i.time<8)&&d.getRenderMode()!=="vector"&&this.renderTileImage_(p,i),super.getTile(e,n,r,i)}isDrawableTile(e){const n=this.getLayer();return super.isDrawableTile(e)&&(n.getRenderMode()==="vector"?Vr(n)in e.executorGroups:e.hasContext(n))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const n=this.getLayer().getRevision();return this.renderedLayerRevision_!==n&&(this.renderedLayerRevision_=n,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,n,r){var M;const i=this.getLayer(),s=i.getRevision(),a=i.getRenderOrder()||null,l=e.wantedResolution,o=e.getReplayState(i);if(!o.dirty&&o.renderedResolution===l&&o.renderedRevision==s&&o.renderedRenderOrder==a)return;const d=i.getSource(),p=!!i.getDeclutter(),A=d.getTileGrid(),y=d.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),C=d.getSourceTiles(n,r,e),x=Vr(i);delete e.hitDetectionImageData[x],e.executorGroups[x]=[],o.dirty=!1;for(let I=0,P=C.length;I<P;++I){const F=C[I];if(F.getState()!=Ar.LOADED)continue;const D=F.tileCoord,V=A.getTileCoordExtent(D),H=wu(y,V),Q=Oc(H,i.getRenderBuffer()*l,this.tmpExtent),G=UA(V,H)?null:Q,W=new Ppe(0,H,l,n),te=F8(l,n),q=function(le,ie){let pe;const ue=le.getStyleFunction()||i.getStyleFunction();if(ue&&(pe=ue(le,l)),pe){const me=this.renderFeature(le,te,pe,W,p,ie);o.dirty=o.dirty||me}},Y=F.getFeatures();a&&a!==o.renderedRenderOrder&&Y.sort(a);for(let le=0,ie=Y.length;le<ie;++le){const pe=Y[le];(!G||Ua(G,pe.getGeometry().getExtent()))&&q.call(this,pe,le)}const ee=W.finish(),ce=i.getRenderMode()!=="vector"&&p&&C.length===1?null:H,se=new Fpe(ce,l,n,d.getOverlaps(),ee,i.getRenderBuffer(),!!((M=this.frameState)!=null&&M.declutter));e.executorGroups[x].push(se)}o.renderedRevision=s,o.renderedRenderOrder=a,o.renderedResolution=l}forEachFeatureAtCoordinate(e,n,r,i,s){const a=n.viewState.resolution,l=n.viewState.rotation;r=r??0;const o=this.getLayer(),p=o.getSource().getTileGridForProjection(n.viewState.projection),A=sc([e]);Oc(A,a*r,A);const v={},y=function(M,I,P){let F=M.getId();F===void 0&&(F=Vr(M));const D=v[F];if(D){if(D!==!0&&P<D.distanceSq){if(P===0)return v[F]=!0,s.splice(s.lastIndexOf(D),1),i(M,o,I);D.geometry=I,D.distanceSq=P}}else{if(P===0)return v[F]=!0,i(M,o,I);s.push(v[F]={feature:M,layer:o,geometry:I,distanceSq:P,callback:i})}},C=this.renderedTiles;let x;for(let M=0,I=C.length;!x&&M<I;++M){const P=C[M],F=p.getTileCoordExtent(P.wrappedTileCoord);if(!Ua(F,A))continue;const D=Vr(o),V=[P.executorGroups[D]],H=o.getDeclutter();V.some(Q=>{const G=H?n.declutter[H].all().map(W=>W.value):null;for(let W=0,te=Q.length;W<te;++W)if(x=Q[W].forEachFeatureAtCoordinate(e,a,l,r,y,G),x)return!0})}return x}getFeatures(e){return new Promise((n,r)=>{const i=this.getLayer(),s=Vr(i),a=i.getSource(),l=this.renderedProjection,o=l.getExtent(),d=this.renderedResolution,p=a.getTileGridForProjection(l),A=Ta(this.renderedPixelToCoordinateTransform_,e.slice()),v=p.getTileCoordForCoordAndResolution(A,d);let y;for(let F=0,D=this.renderedTiles.length;F<D;++F)if(v.toString()===this.renderedTiles[F].tileCoord.toString()){if(y=this.renderedTiles[F],y.getState()===Ar.LOADED){const V=p.getTileCoordExtent(y.tileCoord);a.getWrapX()&&l.canWrapX()&&!Cd(o,V)&&O2(A,l);break}y=void 0}if(!y||y.loadingSourceTiles>0){n([]);return}const C=p.getTileCoordExtent(y.wrappedTileCoord),x=KA(C),M=[(A[0]-x[0])/d,(x[1]-A[1])/d],I=y.getSourceTiles().reduce(function(F,D){return F.concat(D.getFeatures())},[]);let P=y.hitDetectionImageData[s];if(!P){const F=El(p.getTileSize(p.getZForResolution(d,a.zDirection))),D=this.renderedRotation_,V=[this.getRenderTransform(p.getTileCoordCenter(y.wrappedTileCoord),d,0,If,F[0]*If,F[1]*If,0)];P=Npe(F,V,I,i.getStyleFunction(),p.getTileCoordExtent(y.wrappedTileCoord),y.getReplayState(i).renderedResolution,D),y.hitDetectionImageData[s]=P}n(kpe(M,I,P))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,n){const r=this.context,i=r.globalAlpha;r.globalAlpha=n.opacity;const s=e.viewHints,a=!(s[da.ANIMATING]||s[da.INTERACTING]),l=this.renderedTiles;for(let o=0,d=l.length;o<d;++o){const p=l[o],A=p.executorGroups[Vr(this.getLayer())],v=this.getLayer().getDeclutter();if(A)for(let y=A.length-1;y>=0;--y)A[y].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(p,e),e.viewState.rotation,a,XO,v?e.declutter[v]:void 0)}r.globalAlpha=i}renderDeferredInternal(e){const r=this.renderedTiles.reduce((a,l,o)=>(l.executorGroups[Vr(this.getLayer())].forEach(d=>a.push({executorGroup:d,index:o})),a),[]),i=r.map(({executorGroup:a})=>a.getDeferredZIndexContexts());i.map(a=>Object.keys(a)).flat().sort(Zg).map(Number).forEach(a=>{i.forEach((l,o)=>{l[a]&&l[a].forEach(d=>{const{executorGroup:p,index:A}=r[o],v=p.getRenderedContext(),y=v.globalAlpha;v.globalAlpha=this.renderedOpacity_;const C=this.tileClipContexts_[A];C&&C.draw(v),d.draw(v),C&&v.restore(),v.globalAlpha=y,d.clear()})})})}getTileRenderTransform(e,n){const r=n.pixelRatio,i=n.viewState,s=i.center,a=i.resolution,l=i.rotation,o=n.size,d=Math.round(o[0]*r),p=Math.round(o[1]*r),v=this.getLayer().getSource().getTileGridForProjection(n.viewState.projection),y=e.tileCoord,C=v.getTileCoordExtent(e.wrappedTileCoord),x=v.getTileCoordExtent(y,this.tmpExtent)[0]-C[0];return Gb(ZT(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,a,l,r,d,p,x))}postRender(e,n){const r=n.viewHints,i=!(r[da.ANIMATING]||r[da.INTERACTING]);this.renderedPixelToCoordinateTransform_=n.pixelToCoordinateTransform.slice(),this.renderedRotation_=n.viewState.rotation,this.renderedOpacity_=n.layerStatesArray[n.layerIndex].opacity;const s=this.getLayer(),a=s.getRenderMode(),l=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const o=s.getDeclutter(),d=o?Nee[a].filter(D=>!XO.includes(D)):Nee[a],p=n.viewState,A=p.rotation,v=s.getSource(),C=v.getTileGridForProjection(p.projection).getZForResolution(p.resolution,v.zDirection),x=this.renderedTiles,M=[],I=[],P=[];let F=!0;for(let D=x.length-1;D>=0;--D){const V=x[D];F=F&&!V.getReplayState(s).dirty;const H=V.executorGroups[Vr(s)].filter(ee=>ee.hasExecutors(d));if(H.length===0)continue;const Q=this.getTileRenderTransform(V,n),G=V.tileCoord[0];let W=!1;const te=H[0].getClipCoords(Q);let q=e,Y;if(te){o&&(Y=new c7,q=Y.getContext());for(let ee=0,ce=M.length;ee<ce;++ee)if(C!==G&&G<I[ee]){const se=M[ee];Ua([te[0],te[3],te[4],te[7]],[se[0],se[3],se[4],se[7]])&&(W||(q.save(),W=!0),q.beginPath(),q.moveTo(te[0],te[1]),q.lineTo(te[2],te[3]),q.lineTo(te[4],te[5]),q.lineTo(te[6],te[7]),q.moveTo(se[6],se[7]),q.lineTo(se[4],se[5]),q.lineTo(se[2],se[3]),q.lineTo(se[0],se[1]),q.clip())}M.push(te),I.push(G)}for(let ee=0,ce=H.length;ee<ce;++ee)H[ee].execute(e,[e.canvas.width,e.canvas.height],Q,A,i,d);W&&(q===e?q.restore():P[D]=Y)}e.globalAlpha=l,this.ready=F,this.tileClipContexts_=P,super.postRender(e,n)}renderFeature(e,n,r,i,s,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let o=0,d=r.length;o<d;++o)l=ZO(i,e,r[o],n,this.boundHandleStyleImageChange_,void 0,s,a)||l;else l=ZO(i,e,r,n,this.boundHandleStyleImageChange_,void 0,s,a);return l}tileImageNeedsRender_(e){const n=this.getLayer();if(n.getRenderMode()==="vector")return!1;const r=e.getReplayState(n),i=n.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,n){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),a=e.executorGroups[Vr(r)];i.renderedTileRevision=s;const l=e.wrappedTileCoord,o=l[0],d=r.getSource();let p=n.pixelRatio;const v=n.viewState.projection,y=d.getTileGridForProjection(v),C=y.getResolution(e.tileCoord[0]),x=n.pixelRatio/e.wantedResolution*C,M=y.getResolution(o),I=e.getContext(r);p=Math.round(Math.max(p,x/p));const P=d.getTilePixelSize(o,p,v);I.canvas.width=P[0],I.canvas.height=P[1];const F=p/x;if(F!==1){const Q=f8(this.tmpTransform_);ZT(Q,F,F),I.setTransform.apply(I,Q)}const D=y.getTileCoordExtent(l,this.tmpExtent),V=x/M,H=f8(this.tmpTransform_);ZT(H,V,-V),M2(H,-D[0],-D[3]);for(let Q=0,G=a.length;Q<G;++Q)a[Q].execute(I,[I.canvas.width*F,I.canvas.height*F],H,0,!0,cot[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class rAe extends Yb{constructor(e){e=e||{};const n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un;const r=e.renderMode||"hybrid";zs(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new uot(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Oy.PRELOAD)}getUseInterimTilesOnError(){return this.get(Oy.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Oy.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Oy.USE_INTERIM_TILES_ON_ERROR,e)}}class hot extends Spe{constructor(e){super(e),this.vectorRenderer_=new $pe(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Ya(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Ta(this.coordinateToVectorPixelTransform_,Ta(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const n=e.pixelRatio,r=e.viewState,i=r.resolution,s=e.viewHints,a=this.vectorRenderer_;let l=e.extent;this.layerImageRatio_!==1&&(l=l.slice(0),XH(l,this.layerImageRatio_));const o=no(l)/i,d=Xa(l)/i;if(!s[da.ANIMATING]&&!s[da.INTERACTING]&&!Am(l)){a.useContainer(null,null);const p=a.context,A=e.layerStatesArray[e.layerIndex],v=Object.assign({},A,{opacity:1}),y=Object.assign({},e,{extent:l,size:[o,d],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[v],layerIndex:0,declutter:null}),C=this.getLayer().getDeclutter();C&&(y.declutter={[C]:new wG(9)});let x=!0;const M=new wit(l,i,n,p.canvas,function(I){a.prepareFrame(y)&&a.replayGroupChanged&&(a.clipping=!1,a.renderFrame(y,null)&&(a.renderDeclutter(y),a.renderDeferred(y),x=!1),I())});M.addEventListener(pi.CHANGE,()=>{if(M.getState()!==hi.LOADED)return;this.image_=x?null:M;const I=M.getPixelRatio(),P=KO(M.getResolution())*n/I;this.renderedResolution=P,this.coordinateToVectorPixelTransform_=Hh(this.coordinateToVectorPixelTransform_,o/2,d/2,1/P,-1/P,0,-r.center[0],-r.center[1])}),M.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,n,r,i,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,r,i,s):super.forEachFeatureAtCoordinate(e,n,r,i,s)}}class dot extends Yb{constructor(e){e=e||{};const n=Object.assign({},e);delete n.imageRatio,super(n),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new hot(this)}}function Ps(t,e,n){const r=MG();return r.style=t.style,iot(e,n,r,t)}function kee(t){const e=Of(t),n=e[0]*256,r=e[1],i=e[2]*256,s=Math.round(e[3]*255);return[n+r,i+s]}const fot=`vec4 unpackColor(vec2 packedColor) {
  return fract(packedColor[1] / 256.0) * vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    1.0
  );
}`;function iAe(t){return t===ta?2:t===uc?4:1}function k4(t){const e=iAe(t);return e>1?`vec${e}`:"float"}function n5(t){return(JSON.stringify(t).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function g7(t,e,n,r){if(`${r}radius`in t&&r!=="icon-"){let i=Ps(n,t[`${r}radius`],$r);if(`${r}radius2`in t){const s=Ps(n,t[`${r}radius2`],$r);i=`max(${i}, ${s})`}`${r}stroke-width`in t&&(i=`(${i} + ${Ps(n,t[`${r}stroke-width`],$r)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in t){const i=Ps(n,t[`${r}scale`],$r|uc);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in t&&e.setSymbolOffsetExpression(Ps(n,t[`${r}displacement`],uc)),`${r}rotation`in t&&e.setSymbolRotationExpression(Ps(n,t[`${r}rotation`],$r)),`${r}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${r}rotate-with-view`])}function sAe(t,e,n,r,i){let s="vec4(0.)";if(e!==null&&(s=e),n!==null&&r!==null){const o=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${o})`}const a=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let l=`${s} * ${a}`;return i!==null&&(l=`${l} * ${i}`),l}function m7(t,e,n,r,i){const s=new Image;let a;return s.crossOrigin=t[`${r}cross-origin`]===void 0?"anonymous":t[`${r}cross-origin`],s.src=t[`${r}src`],s.complete&&s.width&&s.height?a=f7([s.width,s.height]):(n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`vec2 u_texture${i}_size`),a=`u_texture${i}_size`),n[`u_texture${i}`]=s,e.addUniform(`sampler2D u_texture${i}`),a}function v7(t,e,n,r,i){let s=Ps(n,t[`${e}offset`],uc);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function pot(t,e,n,r,i){i.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,g7(t,e,r,"circle-");let s=null;"circle-opacity"in t&&(s=Ps(i,t["circle-opacity"],$r));let a="coordsPx";"circle-scale"in t&&(a=`coordsPx / ${Ps(i,t["circle-scale"],$r|uc)}`);let l=null;"circle-fill-color"in t&&(l=Ps(i,t["circle-fill-color"],ta));let o=null;"circle-stroke-color"in t&&(o=Ps(i,t["circle-stroke-color"],ta));let d=Ps(i,t["circle-radius"],$r),p=null;"circle-stroke-width"in t&&(p=Ps(i,t["circle-stroke-width"],$r),d=`(${d} + ${p} * 0.5)`);const A=`circleDistanceField(${a}, ${d})`,v=sAe(A,l,o,p,s);e.setSymbolColorExpression(v)}function Aot(t,e,n,r,i){i.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,i.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,i.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,g7(t,e,r,"shape-");let s=null;"shape-opacity"in t&&(s=Ps(i,t["shape-opacity"],$r));let a="coordsPx";"shape-scale"in t&&(a=`coordsPx / ${Ps(i,t["shape-scale"],$r|uc)}`);let l=null;"shape-fill-color"in t&&(l=Ps(i,t["shape-fill-color"],ta));let o=null;"shape-stroke-color"in t&&(o=Ps(i,t["shape-stroke-color"],ta));let d=null;"shape-stroke-width"in t&&(d=Ps(i,t["shape-stroke-width"],$r));const p=Ps(i,t["shape-points"],$r);let A="0.";"shape-angle"in t&&(A=Ps(i,t["shape-angle"],$r));let v,y=Ps(i,t["shape-radius"],$r);if(d!==null&&(y=`${y} + ${d} * 0.5`),"shape-radius2"in t){let x=Ps(i,t["shape-radius2"],$r);d!==null&&(x=`${x} + ${d} * 0.5`),v=`starDistanceField(${a}, ${p}, ${y}, ${x}, ${A})`}else v=`regularDistanceField(${a}, ${p}, ${y}, ${A})`;const C=sAe(v,l,o,d,s);e.setSymbolColorExpression(C)}function got(t,e,n,r,i){let s="vec4(1.0)";"icon-color"in t&&(s=Ps(i,t["icon-color"],ta)),"icon-opacity"in t&&(s=`${s} * ${Ps(i,t["icon-opacity"],$r)}`);const a=n5(t["icon-src"]),l=m7(t,e,n,"icon-",a);if(e.setSymbolColorExpression(`${s} * samplePremultiplied(u_texture${a}, v_texCoord)`).setSymbolSizeExpression(l),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${Ps(r,t["icon-width"],$r)}, ${Ps(r,t["icon-height"],$r)})`),"icon-offset"in t&&"icon-size"in t){const o=Ps(r,t["icon-size"],uc),d=e.getSymbolSizeExpression();e.setSymbolSizeExpression(o);const p=v7(t,"icon-",r,"v_quadSizePx",o);e.setTextureCoordinateExpression(`(vec4((${p}).xyxy) + vec4(0., 0., ${o})) / (${d}).xyxy`)}if(g7(t,e,r,"icon-"),"icon-anchor"in t){const o=Ps(r,t["icon-anchor"],uc);let d="1.0";"icon-scale"in t&&(d=Ps(r,t["icon-scale"],$r|uc));let p;t["icon-anchor-x-units"]==="pixels"&&t["icon-anchor-y-units"]==="pixels"?p=`${o} * ${d}`:t["icon-anchor-x-units"]==="pixels"?p=`${o} * vec2(vec2(${d}).x, v_quadSizePx.y)`:t["icon-anchor-y-units"]==="pixels"?p=`${o} * vec2(v_quadSizePx.x, vec2(${d}).x)`:p=`${o} * v_quadSizePx`;let A=`v_quadSizePx * vec2(0.5, -0.5) + ${p} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":A=`v_quadSizePx * -0.5 + ${p}`;break;case"bottom-left":A=`v_quadSizePx * 0.5 - ${p}`;break;case"bottom-right":A=`v_quadSizePx * vec2(-0.5, 0.5) + ${p} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${A}`)}}function mot(t,e,n,r,i){if("stroke-color"in t&&e.setStrokeColorExpression(Ps(i,t["stroke-color"],ta)),"stroke-pattern-src"in t){const s=n5(t["stroke-pattern-src"]),a=m7(t,e,n,"stroke-pattern-",s);let l=a,o="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(l=Ps(i,t["stroke-pattern-size"],uc),o=v7(t,"stroke-pattern-",i,a,l));let d="0.";"stroke-pattern-spacing"in t&&(d=Ps(i,t["stroke-pattern-spacing"],$r)),i.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return samplePremultiplied(texture, texCoord);
}`;const p=`u_texture${s}`;let A="1.";"stroke-color"in t&&(A=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${A} * sampleStrokePattern(${p}, ${a}, ${o}, ${l}, ${d}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(Ps(r,t["stroke-width"],$r)),"stroke-offset"in t&&e.setStrokeOffsetExpression(Ps(r,t["stroke-offset"],$r)),"stroke-line-cap"in t&&e.setStrokeCapExpression(Ps(r,t["stroke-line-cap"],Yc)),"stroke-line-join"in t&&e.setStrokeJoinExpression(Ps(r,t["stroke-line-join"],Yc)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(Ps(r,t["stroke-miter-limit"],$r)),"stroke-line-dash"in t){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Cv("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${Cv("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=t["stroke-line-dash"].map(y=>Ps(i,y,$r));s.length%2===1&&(s=[...s,...s]);let a="0.";"stroke-line-dash-offset"in t&&(a=Ps(r,t["stroke-line-dash-offset"],$r));const o=`dashDistanceField_${n5(t["stroke-line-dash"])}`,d=s.map((y,C)=>`float dashLength${C} = ${y};`),p=s.map((y,C)=>`dashLength${C}`).join(" + ");let A="0.",v=`getSingleDashDistance(distance, radius, ${A}, dashLength0, totalDashLength, capType)`;for(let y=2;y<s.length;y+=2)A=`${A} + dashLength${y-2} + dashLength${y-1}`,v=`min(${v}, getSingleDashDistance(distance, radius, ${A}, dashLength${y}, totalDashLength, capType))`;i.functions[o]=`float ${o}(float distance, float radius, float capType) {
  ${d.join(`
  `)}
  float totalDashLength = ${p};
  return ${v};
}`,e.setStrokeDistanceFieldExpression(`${o}(currentLengthPx + ${a}, currentRadiusPx, capType)`)}}function vot(t,e,n,r,i){if("fill-color"in t&&e.setFillColorExpression(Ps(i,t["fill-color"],ta)),"fill-pattern-src"in t){const s=n5(t["fill-pattern-src"]),a=m7(t,e,n,"fill-pattern-",s);let l=a,o="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(l=Ps(i,t["fill-pattern-size"],uc),o=v7(t,"fill-pattern-",i,a,l)),i.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);
}`;const d=`u_texture${s}`;let p="1.";"fill-color"in t&&(p=e.getFillColorExpression()),e.setFillColorExpression(`${p} * sampleFillPattern(${d}, ${a}, ${o}, ${l}, pxOrigin, pxPos)`)}}function yot(t){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:t},n={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:t},r=new tAe,i={};if("icon-src"in t?got(t,r,i,e,n):"shape-points"in t?Aot(t,r,i,e,n):"circle-radius"in t&&pot(t,r,i,e,n),mot(t,r,i,e,n),vot(t,r,i,e,n),t.filter){const a=Ps(n,t.filter,Ka);r.setFragmentDiscardExpression(`!${a}`)}Object.keys(n.variables).forEach(function(a){const l=n.variables[a],o=p7(l.name);r.addUniform(`${k4(l.type)} ${o}`);let d;l.type===Yc?d=()=>t5(t.variables[l.name]):l.type===ta?d=()=>kee([...Of(t.variables[l.name]||"#eee")]):l.type===Ka?d=()=>t.variables[l.name]?1:0:d=()=>t.variables[l.name],i[o]=d}),Object.keys(n.properties).forEach(function(a){const l=n.properties[a];e.properties[a]||(e.properties[a]=l);let o=k4(l.type),d=`a_prop_${l.name}`;l.type===ta&&(o="vec4",d=`unpackColor(${d})`,r.addVertexShaderFunction(fot)),r.addVarying(`v_prop_${l.name}`,o,d)}),Object.keys(e.properties).forEach(function(a){const l=e.properties[a];r.addAttribute(`${k4(l.type)} a_prop_${l.name}`)});const s=Object.keys(e.properties).map(function(a){const l=e.properties[a];let o;return l.evaluator?o=l.evaluator:l.type===Yc?o=d=>t5(d.get(l.name)):l.type===ta?o=d=>kee([...Of(d.get(l.name)||"#eee")]):l.type===Ka?o=d=>d.get(l.name)?1:0:o=d=>d.get(l.name),{name:l.name,size:iAe(l.type),callback:o}});for(const a in e.functions)r.addVertexShaderFunction(e.functions[a]);for(const a in n.functions)r.addFragmentShaderFunction(n.functions[a]);return{builder:r,attributes:s.reduce((a,l)=>({...a,[l.name]:{callback:l.callback,size:l.size}}),{}),uniforms:i}}function Dee(t,e){const n=`
    attribute vec2 ${wF.TEXTURE_COORD};
    uniform mat4 ${to.TILE_TRANSFORM};
    uniform float ${to.TEXTURE_PIXEL_WIDTH};
    uniform float ${to.TEXTURE_PIXEL_HEIGHT};
    uniform float ${to.TEXTURE_RESOLUTION};
    uniform float ${to.TEXTURE_ORIGIN_X};
    uniform float ${to.TEXTURE_ORIGIN_Y};
    uniform float ${to.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${wF.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${to.TEXTURE_ORIGIN_X} + ${to.TEXTURE_RESOLUTION} * ${to.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${to.TEXTURE_ORIGIN_Y} - ${to.TEXTURE_RESOLUTION} * ${to.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${to.TILE_TRANSFORM} * vec4(${wF.TEXTURE_COORD}, ${to.DEPTH}, 1.0);
    }
  `,r={...rot(),inFragmentShader:!0,bandCount:e,style:t},i=[];if(t.color!==void 0){const A=Ps(r,t.color,ta);i.push(`color = ${A};`)}if(t.contrast!==void 0){const A=Ps(r,t.contrast,$r);i.push(`color.rgb = clamp((${A} + 1.0) * color.rgb - (${A} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(t.exposure!==void 0){const A=Ps(r,t.exposure,$r);i.push(`color.rgb = clamp((${A} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(t.saturation!==void 0){const A=Ps(r,t.saturation,$r);i.push(`
      float saturation = ${A} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(t.gamma!==void 0){const A=Ps(r,t.gamma,$r);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${A}));`)}if(t.brightness!==void 0){const A=Ps(r,t.brightness,$r);i.push(`color.rgb = clamp(color.rgb + ${A}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},a=Object.keys(r.variables).length;if(a>1&&!t.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let A=0;A<a;++A){const v=r.variables[Object.keys(r.variables)[A]];if(!(v.name in t.variables))throw new Error(`Missing '${v.name}' in style variables`);const y=p7(v.name);s[y]=function(){let C=t.variables[v.name];return typeof C=="string"&&(C=t5(C)),C!==void 0?C:-9999999}}const l=Object.keys(s).map(function(A){return`uniform float ${A};`}),o=Math.ceil(e/4);l.push(`uniform sampler2D ${to.TILE_TEXTURE_ARRAY}[${o}];`),r.paletteTextures&&l.push(`uniform sampler2D ${eAe}[${r.paletteTextures.length}];`);const d=Object.keys(r.functions).map(function(A){return r.functions[A]}),p=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${to.RENDER_EXTENT};
    uniform float ${to.TRANSITION_ALPHA};
    uniform float ${to.TEXTURE_PIXEL_WIDTH};
    uniform float ${to.TEXTURE_PIXEL_HEIGHT};
    uniform float ${to.RESOLUTION};
    uniform float ${to.ZOOM};

    ${l.join(`
`)}

    ${d.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${to.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${to.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${to.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${to.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${to.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${to.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:p,uniforms:s,paletteTextures:r.paletteTextures}}class oAe extends Ipe{constructor(e){e=e?Object.assign({},e):{};const n=e.style||{};delete e.style;const r=e.cacheSize;delete e.cacheSize,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.cacheSize_=r,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Jo.SOURCE,this.handleSourceUpdate_)}getSources(e,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,n=this.getSources([-e,-e,e,e],e);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const e=Dee(this.style_,this.getSourceBandCount_());return new eot(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,n){const r=this.getRenderer();let i;for(let s=0,a=n.length;s<a;++s)this.renderedSource_=n[s],r.prepareFrame(e)&&(i=r.renderFrame(e));return i}render(e,n){this.rendered=!0;const r=e.viewState,i=this.getSources(e.extent,r.resolution);let s=!0;for(let l=0,o=i.length;l<o;++l){const d=i[l],p=d.getState();if(p=="loading"){const A=()=>{d.getState()=="ready"&&(d.removeEventListener("change",A),this.changed())};d.addEventListener("change",A)}s=s&&p=="ready"}const a=this.renderSources(e,i);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=r.resolution,a;if(this.renderedResolution_>.5*r.resolution){const l=this.getSources(e.extent,this.renderedResolution_).filter(o=>!i.includes(o));if(l.length>0)return this.renderSources(e,l)}return a}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const n=Dee(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}oAe.prototype.dispose;class _ot{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,n){for(let r=0;r<e.length;r++)this.addFeature(e[r],n)}addFeature(e,n){let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const n=this.pointBatch.entries[Vr(e)];if(n)return this.pointBatch.geometriesCount-=n.flatCoordss.length,delete this.pointBatch.entries[Vr(e)],n}clearFeatureEntryInLineStringBatch_(e){const n=this.lineStringBatch.entries[Vr(e)];if(n)return this.lineStringBatch.verticesCount-=n.verticesCount,this.lineStringBatch.geometriesCount-=n.flatCoordss.length,delete this.lineStringBatch.entries[Vr(e)],n}clearFeatureEntryInPolygonBatch_(e){const n=this.polygonBatch.entries[Vr(e)];if(n)return this.polygonBatch.verticesCount-=n.verticesCount,this.polygonBatch.ringsCount-=n.ringsCount,this.polygonBatch.geometriesCount-=n.flatCoordss.length,delete this.polygonBatch.entries[Vr(e)],n}addGeometry_(e,n){const r=e.getType();switch(r){case"GeometryCollection":{const i=e.getGeometriesArray();for(const s of i)this.addGeometry_(s,n);break}case"MultiPolygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEndss(),n,Vr(n),i.getStride());break}case"MultiLineString":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,Vr(n),i.getStride());break}case"MultiPoint":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,Vr(n),i.getStride());break}case"Polygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,Vr(n),i.getStride());break}case"Point":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,Vr(n),i.getStride());break}case"LineString":case"LinearRing":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,Vr(n),i.getStride());break}}}addCoordinates_(e,n,r,i,s,a){let l;switch(e){case"MultiPolygon":{const o=r;for(let d=0,p=o.length;d<p;d++){let A=o[d];const v=d>0?o[d-1]:null,y=v?v[v.length-1]:0,C=A[A.length-1];A=y>0?A.map(x=>x-y):A,this.addCoordinates_("Polygon",n.slice(y,C),A,i,s,a)}break}case"MultiLineString":{const o=r;for(let d=0,p=o.length;d<p;d++){const A=d>0?o[d-1]:0;this.addCoordinates_("LineString",n.slice(A,o[d]),null,i,s,a)}break}case"MultiPoint":for(let o=0,d=n.length;o<d;o+=a)this.addCoordinates_("Point",n.slice(o,o+2),null,i,s,null);break;case"Polygon":{const o=r;if(i instanceof Nu){const A=fG(n,o);if(A.length>1){this.addCoordinates_("MultiPolygon",n,A,i,s,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/a;const d=r.length,p=r.map((A,v,y)=>v>0?(A-y[v-1])/a:A/a);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=d,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(Uee(n,a)),this.polygonBatch.entries[s].ringsVerticesCounts.push(p),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=d;for(let A=0,v=o.length;A<v;A++){const y=A>0?o[A-1]:0;this.addCoordinates_("LinearRing",n.slice(y,o[A]),null,i,s,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/a,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(Uee(n,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,n){const r=this.uidToRef_.get(e),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(e,i)),n}returnRef_(e,n){if(!e)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(e),this.uidToRef_.delete(n),this.freeGlobalRef_.push(e)}changeFeature(e){this.removeFeature(e);const n=e.getGeometry();n&&this.addGeometry_(n,e)}removeFeature(e){let n;n=this.clearFeatureEntryInPointBatch_(e)||n,n=this.clearFeatureEntryInPolygonBatch_(e)||n,n=this.clearFeatureEntryInLineStringBatch_(e)||n,n&&this.returnRef_(n.ref,Vr(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}}function Uee(t,e){return e===2?t:t.filter((n,r)=>r%e<2)}function y7(t,e,n,r){let i=0;for(const s in e){const a=e[s],l=a.callback.call(n,n.feature);t[r+i++]=l[0]??l,!(!a.size||a.size===1)&&(t[r+i++]=l[1],!(a.size<3)&&(t[r+i++]=l[2],!(a.size<4)&&(t[r+i++]=l[3])))}return i}function sN(t){return Object.keys(t).reduce((e,n)=>e+(t[n].size||1),0)}function bot(t,e,n,r){const i=(2+sN(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let a=0;for(const l in t.entries){const o=t.entries[l];for(let d=0,p=o.flatCoordss.length;d<p;d++)s[0]=o.flatCoordss[d][0],s[1]=o.flatCoordss[d][1],Ta(r,s),e[a++]=s[0],e[a++]=s[1],a+=y7(e,n,o,a)}return e}function wot(t,e,n,r){const i=2*t.verticesCount+(1+sN(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let a=0;for(const l in t.entries){const o=t.entries[l];for(let d=0,p=o.flatCoordss.length;d<p;d++){s.length=o.flatCoordss[d].length,Jg(o.flatCoordss[d],0,s.length,2,r,s),a+=y7(e,n,o,a),e[a++]=s.length/2;for(let A=0,v=s.length;A<v;A+=2)e[a++]=s[A],e[a++]=s[A+1]}}return e}function xot(t,e,n,r){const i=2*t.verticesCount+(1+sN(n))*t.geometriesCount+t.ringsCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let a=0;for(const l in t.entries){const o=t.entries[l];for(let d=0,p=o.flatCoordss.length;d<p;d++){s.length=o.flatCoordss[d].length,Jg(o.flatCoordss[d],0,s.length,2,r,s),a+=y7(e,n,o,a),e[a++]=o.ringsVerticesCounts[d].length;for(let A=0,v=o.ringsVerticesCounts[d].length;A<v;A++)e[a++]=o.ringsVerticesCounts[d][A];for(let A=0,v=s.length;A<v;A+=2)e[a++]=s[A],e[a++]=s[A+1]}}return e}const Cot=[],D4=Xpe();let Eot=0;const oy={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class Sot{constructor(e,n,r){this.helper_=n,this.hitDetectionEnabled_=r;let i=e;if(!("builder"in e)){const o=yot(e);i={builder:o.builder,attributes:o.attributes,uniforms:o.uniforms}}this.hasFill_=!!i.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=i.builder.getFillVertexShader(),this.fillFragmentShader_=i.builder.getFillFragmentShader(),this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_=!!i.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=i.builder.getStrokeVertexShader(),this.strokeFragmentShader_=i.builder.getStrokeFragmentShader(),this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_=!!i.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=i.builder.getSymbolVertexShader(),this.symbolFragmentShader_=i.builder.getSymbolFragmentShader(),this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_));const a=this.hitDetectionEnabled_?{hitColor:{callback(){return qpe(this.ref,Cot)},size:4}}:{};this.customAttributes_=Object.assign({},a,i.attributes),this.uniforms_=i.uniforms;const l=Object.entries(this.customAttributes_).map(([o,d])=>({name:`a_prop_${o}`,size:d.size||1,type:Wc.FLOAT}));this.polygonAttributesDesc_=[{name:oy.POSITION,size:2,type:Wc.FLOAT},...l],this.lineStringAttributesDesc_=[{name:oy.SEGMENT_START,size:2,type:Wc.FLOAT},{name:oy.SEGMENT_END,size:2,type:Wc.FLOAT},{name:oy.JOIN_ANGLES,size:2,type:Wc.FLOAT},{name:oy.DISTANCE,size:1,type:Wc.FLOAT},{name:oy.PARAMETERS,size:1,type:Wc.FLOAT},...l],this.pointAttributesDesc_=[{name:oy.POSITION,size:2,type:Wc.FLOAT},{name:oy.INDEX,size:1,type:Wc.FLOAT},...l],i.uniforms&&this.helper_.addUniforms(i.uniforms)}async generateBuffers(e,n){const r=this.generateRenderInstructions_(e,n),[i,s,a]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),l=a_(Ya(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:a,invertVerticesTransform:l}}generateRenderInstructions_(e,n){const r=this.hasFill_?xot(e.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?wot(e.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?bot(e.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(e,n,r){if(e===null)return null;const i=Eot++;let s;switch(n){case"Polygon":s=rI.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=rI.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=rI.GENERATE_POINT_BUFFERS;break}const a={id:i,type:s,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:sN(this.customAttributes_)};return D4.postMessage(a,[e.buffer]),e=null,new Promise(l=>{const o=d=>{const p=d.data;if(p.id!==i||(D4.removeEventListener("message",o),!this.helper_.getGL()))return;const A=new uE(AM,vB).fromArrayBuffer(p.vertexBuffer),v=new uE(gM,vB).fromArrayBuffer(p.indexBuffer);this.helper_.flushBufferData(A),this.helper_.flushBufferData(v),l([v,A])};D4.addEventListener("message",o)})}render(e,n,r){this.hasFill_&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,n,r),this.hasStroke_&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,n,r),this.hasSymbol_&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,n,r)}renderInternal_(e,n,r,i,s,a){const l=e.getSize();l!==0&&(this.helper_.useProgram(r,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(e),this.helper_.enableAttributes(i),a(),this.helper_.drawElements(0,l))}}const ox={...kg,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class Tot extends mM{constructor(e,n){const r={[ox.RENDER_EXTENT]:[0,0,0,0],[ox.PATTERN_ORIGIN]:[0,0],[ox.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=Ql(),this.currentTransform_=Ya(),this.tmpCoords_=[0,0],this.tmpTransform_=Ya(),this.tmpMat4_=d7(),this.currentFrameStateTransform_=Ya(),this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(n),this.batch_=new _ot,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[Yi(n,ml.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r),this),Yi(n,ml.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Yi(n,ml.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Yi(n,ml.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styles_=Array.isArray(e.style)?e.style:[e.style]}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(e=>new Sot(e,this.helper,this.hitDetectionEnabled_))}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Gpe(this.helper))}handleSourceFeatureAdded_(e,n){const r=n.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e){const n=e.feature;this.batch_.changeFeature(n)}handleSourceFeatureDelete_(e){const n=e.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){Fde(this.tmpTransform_,this.currentFrameStateTransform_),Gb(this.tmpTransform_,e),this.helper.setUniformMatrixValue(ox.PROJECTION_MATRIX,JO(this.tmpMat4_,this.tmpTransform_)),a_(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(ox.SCREEN_TO_WORLD_MATRIX,JO(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,a_(this.tmpTransform_,e),Ta(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(ox.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=Zpe(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e);const a=this.helper.getCanvas(),o=e.layerStatesArray[e.layerIndex].opacity;return o!==parseFloat(a.style.opacity)&&(a.style.opacity=String(o)),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),a}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[da.ANIMATING]&&!e.viewHints[da.INTERACTING],a=!UA(this.previousExtent_,e.extent),l=this.sourceRevision_<r.getRevision();if(l&&(this.sourceRevision_=r.getRevision()),s&&(a||l)){const o=i.projection,d=i.resolution,p=n instanceof Yb?n.getRenderBuffer():0,A=Oc(e.extent,p*d);r.loadFeatures(A,d,o),this.ready=!1;const v=this.helper.makeProjectionTransform(e,Ya()),y=this.styleRenderers_.map((C,x)=>C.generateBuffers(this.batch_,v).then(M=>{this.buffers_[x]=M}));Promise.all(y).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,n,r,i,s){let a=r;n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.currentFrameStateTransform_=this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_);do{for(let l=0,o=this.styleRenderers_.length;l<o;l++){const d=this.styleRenderers_[l],p=this.buffers_[l];p&&d.render(p,e,()=>{this.applyUniforms_(p.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)})}M2(this.currentFrameStateTransform_,s,0)}while(++a<i)}forEachFeatureAtCoordinate(e,n,r,i,s){if(zs(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const a=Ta(n.coordinateToPixelTransform,e.slice()),l=this.hitRenderTarget_.readPixel(a[0]/2,a[1]/2),o=[l[0]/255,l[1]/255,l[2]/255,l[3]/255],d=Ype(o),p=this.batch_.getFeatureFromRef(d);if(p)return i(p,this.getLayer(),null)}disposeInternal(){this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){xo(e)}),this.sourceListenKeys_=null),super.disposeInternal()}}const zee=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],$ee={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Iot extends jl{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=e.label!==void 0?e.label:"";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const r=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof r=="string"?document.createTextNode(r):r;const i=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(pi.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${lm} ${Wb}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const n=e.getOwnerDocument();if(Vee(n))if(Hee(n))Mot(n);else{let r;this.source_?r=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:r=e.getTargetElement(),this.keys_?Bot(r):aAe(r)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const n=this.isInFullscreen_;this.isInFullscreen_=Hee(e.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(rE(this.labelActiveNode_,this.labelNode_),this.dispatchEvent($ee.ENTERFULLSCREEN)):(rE(this.labelNode_,this.labelActiveNode_),this.dispatchEvent($ee.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,n){n?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const n=this.getMap();n&&n.removeChangeListener(rc.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(rc.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let r=0,i=e.length;r<i;++r)xo(e[r]);e.length=0;const n=this.getMap();if(n){const r=n.getOwnerDocument();Vee(r)?this.element.classList.remove(qJ):this.element.classList.add(qJ);for(let i=0,s=zee.length;i<s;++i)e.push(Yi(r,zee[i],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Vee(t){const e=t.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled)}function Hee(t){return!!(t.webkitIsFullScreen||t.fullscreenElement)}function aAe(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}function Bot(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():aAe(t)}function Mot(t){t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}const U4="projection",Gee="coordinateFormat";class Lot extends jl{constructor(e){e=e||{};const n=document.createElement("div");n.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(U4,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Gee)}getProjection(){return this.get(U4)}handleMouseMove(e){const n=this.getMap();this.updateHTML_(n.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const n=e.getViewport();this.listenerKeys.push(Yi(n,Vg.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Yi(n,Vg.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(Gee,e)}setProjection(e){this.set(U4,Oi(e))}updateHTML_(e){let n=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=T_(this.mapProjection_,s):this.transform_=N2}const i=this.getMap().getCoordinateFromPixelInternal(e);if(i){if(this.transform_(i,i),this.wrapX_){const a=this.getProjection()||this.mapProjection_;O2(i,a)}const s=this.getCoordinateFormat();s?n=s(i):n=i.toString()}}(!this.renderedHTML_||n!==this.renderedHTML_)&&(this.element.innerHTML=n,this.renderedHTML_=n)}render(e){const n=e.frameState;n?this.mapProjection_!=n.viewState.projection&&(this.mapProjection_=n.viewState.projection,this.transform_=null):this.mapProjection_=null}}const z4=.75,NR=.1;class Rot extends jl{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const n=e.className!==void 0?e.className:"ol-overviewmap",r=e.tipLabel!==void 0?e.tipLabel:"Overview map",i=e.collapseLabel!==void 0?e.collapseLabel:"";typeof i=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;const s=e.label!==void 0?e.label:"";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=r,l.appendChild(a),l.addEventListener(pi.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const o=new Bv({view:e.view,controls:new _u,interactions:new _u});this.ovmap_=o,e.layers&&e.layers.forEach(function(P){o.addLayer(P)});const d=document.createElement("div");d.className="ol-overviewmap-box",d.style.boxSizing="border-box",this.boxOverlay_=new Nfe({position:[0,0],positioning:"center-center",element:d}),this.ovmap_.addOverlay(this.boxOverlay_);const p=n+" "+lm+" "+Wb+(this.collapsed_&&this.collapsible_?" "+FO:"")+(this.collapsible_?"":" ol-uncollapsible"),A=this.element;A.className=p,A.appendChild(this.ovmapDiv_),A.appendChild(l);const v=this,y=this.boxOverlay_,C=this.boxOverlay_.getElement(),x=function(P){return{clientX:P.clientX,clientY:P.clientY}},M=function(P){const F=x(P),D=o.getEventCoordinateInternal(F);y.setPosition(D)},I=function(P){const F=o.getEventCoordinateInternal(P);v.getMap().getView().setCenterInternal(F),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",I)};C.addEventListener("mousedown",function(){window.addEventListener("mousemove",M),window.addEventListener("mouseup",I)})}setMap(e){const n=this.getMap();if(e!==n){if(n){const r=n.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Yi(e,Ib.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const r=e.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===rc.VIEW){const n=e.oldValue;n&&this.unbindView_(n);const r=this.getMap().getView();this.bindView_(r)}else!this.ovmap_.isRendered()&&(e.key===rc.TARGET||e.key===rc.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const n=new hp({projection:e.getProjection()});this.ovmap_.setView(n)}e.addChangeListener(Cf.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(Cf.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),n=this.ovmap_;if(!e.isRendered()||!n.isRendered())return;const r=e.getSize(),s=e.getView().calculateExtentInternal(r);if(this.viewExtent_&&UA(s,this.viewExtent_))return;this.viewExtent_=s;const a=n.getSize(),o=n.getView().calculateExtentInternal(a),d=n.getPixelFromCoordinateInternal(KA(s)),p=n.getPixelFromCoordinateInternal(RE(s)),A=Math.abs(d[0]-p[0]),v=Math.abs(d[1]-p[1]),y=a[0],C=a[1];A<y*NR||v<C*NR||A>y*z4||v>C*z4?this.resetExtent_():Cd(o,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),n=this.ovmap_,r=e.getSize(),s=e.getView().calculateExtentInternal(r),a=n.getView(),l=Math.log(z4/NR)/Math.LN2,o=1/(Math.pow(2,l/2)*NR);XH(s,o),a.fitInternal(Py(s))}recenter_(){const e=this.getMap(),n=this.ovmap_,r=e.getView();n.getView().setCenterInternal(r.getCenterInternal())}updateBox_(){const e=this.getMap(),n=this.ovmap_;if(!e.isRendered()||!n.isRendered())return;const r=e.getSize(),i=e.getView(),s=n.getView(),a=this.rotateWithView_?0:-i.getRotation(),l=this.boxOverlay_,o=this.boxOverlay_.getElement(),d=i.getCenterInternal(),p=i.getResolution(),A=s.getResolution(),v=r[0]*p/A,y=r[1]*p/A;if(l.setPosition(d),o){o.style.width=v+"px",o.style.height=y+"px";const C="rotate("+a+"rad)";o.style.transform=C}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=nB(this.ovmap_,EA.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(FO),this.collapsed_?rE(this.collapseLabel_,this.label_):rE(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const $4="units",Pot=[1,2,5],KS=25.4/.28;class Fot extends jl{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+lm,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener($4,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get($4)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set($4,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=MO(r,e.resolution,n,s);const l=this.minWidth_*(this.dpi_||KS)/KS,o=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||KS)/KS:void 0;let d=l*a,p="";if(i=="degrees"){const F=eE.degrees;d*=F,d<F/60?(p="",a*=3600):d<F?(p="",a*=60):p=""}else if(i=="imperial")d<.9144?(p="in",a/=.0254):d<1609.344?(p="ft",a/=.3048):(p="mi",a/=1609.344);else if(i=="nautical")a/=1852,p="NM";else if(i=="metric")d<1e-6?(p="nm",a*=1e9):d<.001?(p="m",a*=1e6):d<1?(p="mm",a*=1e3):d<1e3?p="m":(p="km",a/=1e3);else if(i=="us")d<.9144?(p="in",a*=39.37):d<1609.344?(p="ft",a/=.30480061):(p="mi",a/=1609.3472);else throw new Error("Invalid units");let A=3*Math.floor(Math.log(l*a)/Math.log(10)),v,y,C,x,M,I;for(;;){C=Math.floor(A/3);const F=Math.pow(10,C);if(v=Pot[(A%3+3)%3]*F,y=Math.round(v/a),isNaN(y)){this.element.style.display="none",this.renderedVisible_=!1;return}if(o!==void 0&&y>=o){v=x,y=M,C=I;break}else if(y>=l)break;x=v,M=y,I=C,++A}const P=this.scaleBar_?this.createScaleBar(y,v,p):v.toFixed(C<0?-C:0)+" "+p;this.renderedHTML_!=P&&(this.innerElement_.innerHTML=P,this.renderedHTML_=P),this.renderedWidth_!=y&&(this.innerElement_.style.width=y+"px",this.renderedWidth_=y),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,l=e/a,o=[this.createMarker("absolute")];for(let p=0;p<a;++p){const A=p%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";o.push(`<div><div class="ol-scale-singlebar ${A}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(p%2===0||a===2?this.createStepText(p,e,!1,n,r):"")+"</div>")}return o.push(this.createStepText(a,e,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+o.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,r,i,s){const l=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),o=e===0?-3:n/this.scaleBarSteps_*-1,d=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${o}px;text-align: ${e===0?"left":"center"};min-width: ${d}px;left: ${r?n+"px":"unset"};">`+l+"</div>"}getScaleForResolution(){const e=MO(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||KS,r=1e3/25.4;return e*r*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const WS={VERTICAL:0,HORIZONTAL:1};class Oot extends jl{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=WS.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const n=e.className!==void 0?e.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=n+"-thumb "+lm;const i=this.element;i.className=n+" "+lm+" "+Wb,i.appendChild(r),i.addEventListener(Vg.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),i.addEventListener(Vg.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),i.addEventListener(Vg.POINTERUP,this.handleDraggerEnd_.bind(this),!1),i.addEventListener(pi.CLICK,this.handleContainerClick_.bind(this),!1),r.addEventListener(pi.CLICK,UZe,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let n=e.offsetWidth,r=e.offsetHeight;if(n===0&&r===0)return this.sliderInitialized_=!1;const i=getComputedStyle(e);n-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);const s=e.firstElementChild,a=getComputedStyle(s),l=s.offsetWidth+parseFloat(a.marginRight)+parseFloat(a.marginLeft),o=s.offsetHeight+parseFloat(a.marginTop)+parseFloat(a.marginBottom);return this.thumbSize_=[l,o],n>r?(this.direction_=WS.HORIZONTAL,this.widthLimit_=n-l):(this.direction_=WS.VERTICAL,this.heightLimit_=r-o),this.sliderInitialized_=!0}handleContainerClick_(e){const n=this.getMap().getView(),r=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(r),s=n.getConstrainedZoom(n.getZoomForResolution(i));n.animateInternal({zoom:s,duration:this.duration_,easing:Mp})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(n.style.left),this.startY_=e.clientY-parseFloat(n.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const r=this.handleDraggerDrag_,i=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(Yi(s,Vg.POINTERMOVE,r,this),Yi(s,Vg.POINTERUP,i,this))}}}handleDraggerDrag_(e){if(this.dragging_){const n=e.clientX-this.startX_,r=e.clientY-this.startY_,i=this.getRelativePosition_(n,r);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(xo),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const n=this.getPositionForResolution_(e),r=this.element.firstElementChild;this.direction_==WS.HORIZONTAL?r.style.left=this.widthLimit_*n+"px":r.style.top=this.heightLimit_*n+"px"}getRelativePosition_(e,n){let r;return this.direction_===WS.HORIZONTAL?r=e/this.widthLimit_:r=n/this.heightLimit_,va(r,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const n=this.getMap().getView().getValueForResolutionFunction();return va(1-n(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const n=e.frameState.viewState.resolution;this.currentResolution_=n,this.setThumbPosition_(n)}}class Not extends jl{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const n=e.className!==void 0?e.className:"ol-zoom-extent",r=e.label!==void 0?e.label:"E",i=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=i,s.appendChild(typeof r=="string"?document.createTextNode(r):r),s.addEventListener(pi.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+lm+" "+Wb,l=this.element;l.className=a,l.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),r=this.extent?Ed(this.extent,n.getProjection()):n.getProjection().getExtent();n.fitInternal(Py(r))}}var CF=class extends jl{constructor(e){e=e||{};var n=document.createElement("DIV");if(n.classList.add("ol-unselectable","ol-control","ol-bar"),e.className){var r=e.className.split(" ").filter(function(s){return s.length>0});n.classList.add.apply(n.classList,r)}if(e.group&&n.classList.add("ol-group"),super({element:n,target:e.target}),this.set("toggleOne",e.toggleOne),this.set("autoDeactivate",e.autoDeactivate),this.controls_=[],e.controls instanceof Array)for(var i=0;i<e.controls.length;i++)this.addControl(e.controls[i])}setVisible(e){e?this.element.style.display="":this.element.style.display="none"}getVisible(){return this.element.style.display!="none"}setMap(e){super.setMap(e);for(var n=0;n<this.controls_.length;n++){var r=this.controls_[n];r.setMap(e)}}getControls(){return this.controls_}setPosition(e){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),e=e.split("-");for(var n=0;n<e.length;n++)switch(e[n]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+e[n]);break}}addControl(e){this.controls_.push(e),e.setTarget(this.element),this.getMap()&&this.getMap().addControl(e),e._activateBar&&e.un("change:active",e._activateBar),e._activateBar=(function(n){this.onActivateControl_(n,e)}).bind(this),e.on("change:active",e._activateBar),e.getActive&&this.onActivateControl_({target:e,active:e.getActive()},e)}removeControl(e){const n=this.controls_.indexOf(e);n>-1&&(this.controls_.splice(n,1),this.getMap()&&this.getMap().removeControl(e),e._activateBar&&e.un("change:active",e._activateBar),delete e._activateBar)}deactivateControls(e){for(var n=0;n<this.controls_.length;n++)this.controls_[n]!==e&&this.controls_[n].setActive&&this.controls_[n].setActive(!1)}getActiveControls(){for(var e=[],n=0,r;r=this.controls_[n];n++)r.getActive&&r.getActive()&&e.push(r);return e}setActive(e){if(!e&&this.get("autoDeactivate")&&this.deactivateControls(),e)for(var n=this.getControls(),r=0,i;i=n[r];r++)i.get("autoActivate")&&i.setActive(!0)}onActivateControl_(e,n){if(this.get("toggleOne")){if(e.active){var r;for(r=0;r<this.controls_.length&&this.controls_[r]!==n;r++);if(r==this.controls_.length)return;this.deactivateControls(this.controls_[r])}else if(!this.getActiveControls().length){for(var i=0,s;s=this.controls_[i];i++)if(s.get("autoActivate")){s.setActive(!0);break}}}e.type?this.dispatchEvent({type:"control:active",control:n,active:e.active}):this.dispatchEvent({type:"control:add",control:n,active:e.active})}getControlsByName(e){var n=this.getControls();return n.filter(function(r){return r.get("name")===e})}},kot=class extends Od{constructor(e){e=e||{},super();var n=this.input=e.input;n||(n=this.input=document.createElement("INPUT"),e.type&&n.setAttribute("type",e.type),e.min!==void 0&&n.setAttribute("min",e.min),e.max!==void 0&&n.setAttribute("max",e.max),e.step!==void 0&&n.setAttribute("step",e.step),e.parent&&e.parent.appendChild(n)),e.disabled&&(n.disabled=!0),e.checked!==void 0&&(n.checked=!!e.checked),e.val!==void 0&&(n.value=e.val),e.hidden&&(n.style.display="none"),n.addEventListener("focus",(function(){this.element&&this.element.classList.add("ol-focus")}).bind(this));var r;n.addEventListener("focusout",(function(){this.element&&(r&&clearTimeout(r),r=setTimeout((function(){this.element.classList.remove("ol-focus")}).bind(this),0))}).bind(this))}_listenDrag(e,n){var r=(function(i){this.moving=!0,this.element.classList.add("ol-moving");var s=(function(a){a.type==="pointerup"&&(document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",s),document.removeEventListener("pointercancel",s),setTimeout((function(){this.moving=!1,this.element.classList.remove("ol-moving")}).bind(this))),a.target===e&&n(a),a.stopPropagation(),a.preventDefault()}).bind(this);document.addEventListener("pointermove",s,!1),document.addEventListener("pointerup",s,!1),document.addEventListener("pointercancel",s,!1),i.stopPropagation(),i.preventDefault()}).bind(this);e.addEventListener("mousedown",r,!1),e.addEventListener("touchstart",r,!1)}setValue(e){e!==void 0&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},_7=class extends kot{constructor(e){e=e||{},super(e);var n=this.element=document.createElement("LABEL");e.html instanceof Element?n.appendChild(e.html):e.html!==void 0&&(n.innerHTML=e.html),n.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(n,this.input),n.appendChild(this.input),n.appendChild(document.createElement("SPAN")),e.after&&n.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",(function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}).bind(this))}isChecked(){return this.input.checked}},Dot=class extends _7{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},Uot=class extends _7{constructor(e){e=e||{},super(e),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}},an={};an.create=function(t,e){e=e||{};var n;if(t==="TEXT")n=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(n);else{n=document.createElement(t),/button/i.test(t)&&n.setAttribute("type","button");for(var r in e)switch(r){case"className":{e.className&&e.className.trim&&n.setAttribute("class",e.className.trim());break}case"text":{n.innerText=e.text;break}case"html":{e.html instanceof Element?n.appendChild(e.html):e.html!==void 0&&(n.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(n);break}case"options":{if(/select/i.test(t))for(var i in e.options)an.create("OPTION",{html:i,value:e.options[i],parent:n});break}case"style":{an.setStyle(n,e.style);break}case"change":case"click":{an.addListener(n,r,e[r]);break}case"on":{for(var s in e.on)an.addListener(n,s,e.on[s]);break}case"checked":{n.checked=!!e.checked;break}default:{n.setAttribute(r,e[r]);break}}}return n};an.createSwitch=function(t){var e=an.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),n=Object.assign({input:e},t||{});return new Dot(n),e};an.createCheck=function(t){var e=an.create("INPUT",{name:t.name,type:t.type==="radio"?"radio":"checkbox",on:t.on,parent:t.parent}),n=Object.assign({input:e},t||{});return t.type==="radio"?new Uot(n):new _7(n),e};an.setHTML=function(t,e){e instanceof Element?t.appendChild(e):e!==void 0&&(t.innerHTML=e)};an.appendText=function(t,e){t.appendChild(document.createTextNode(e||""))};an.addListener=function(t,e,n,r){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(i){t.addEventListener(i,n,r)})};an.removeListener=function(t,e,n){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){t.removeEventListener(r,n)})};an.show=function(t){t.style.display=""};an.hide=function(t){t.style.display="none"};an.hidden=function(t){return an.getStyle(t,"display")==="none"};an.toggle=function(t){t.style.display=t.style.display==="none"?"":"none"};an.setStyle=function(t,e){for(var n in e)switch(n){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[n]=="number"?t.style[n]=e[n]+"px":t.style[n]=e[n];break}default:t.style[n]=e[n]}};an.getStyle=function(t,e){var n,r=(t.ownerDocument||document).defaultView;if(r&&r.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=r.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,function(i,s){return s.toUpperCase()}),n=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(n)))return function(i){var s=t.style.left,a=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=i||0,i=t.style.pixelLeft+"px",t.style.left=s,t.runtimeStyle.left=a,i}(n);return/px$/.test(n)?parseInt(n):n};an.outerHeight=function(t){return t.offsetHeight+an.getStyle(t,"marginBottom")};an.outerWidth=function(t){return t.offsetWidth+an.getStyle(t,"marginLeft")};an.offsetRect=function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};an.getFixedOffset=function(t){var e={left:0,top:0},n=function(r){if(!r)return e;if(an.getStyle(r,"position")==="absolute"&&an.getStyle(r,"transform")!=="none"){var i=r.getBoundingClientRect();return e.left+=i.left,e.top+=i.top,e}return n(r.offsetParent)};return n(t.offsetParent)};an.positionRect=function(t,e){var n=0,r=0,i=function(s){if(s)return n+=s.offsetLeft,r+=s.offsetTop,i(s.offsetParent);var a={top:t.offsetTop+r,left:t.offsetLeft+n};return e&&(a.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,a.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),a.bottom=a.top+t.offsetHeight,a.right=a.top+t.offsetWidth,a};return i(t.offsetParent)};an.scrollDiv=function(t,e){e=e||{};var n=!1,r=0,i,s=0,a=typeof e.onmove=="function"?e.onmove:function(){},l=e.vertical?"screenY":"screenX",o=e.vertical?"scrollTop":"scrollLeft",d=!1,p,A,v=0,y=function(){F&&(v++,setTimeout(C))},C=function(){if(F){if(v--,v)return;var Q=t.clientHeight,G=t.scrollHeight;p=Q/G,F.style.height=p*100+"%",F.style.top=t.scrollTop/G*100+"%",P.style.height=Q+"px",Q>G-.5?P.classList.add("ol-100pc"):P.classList.remove("ol-100pc")}},x=function(Q){Q.target.classList.contains("ol-noscroll")||(d=!1,n=Q[l],s=new Date,t.classList.add("ol-move"),Q.preventDefault(),window.addEventListener("pointermove",M),an.addListener(window,["pointerup","pointercancel"],V))},M=function(Q){if(n!==!1){var G=(A?-1/p:1)*(n-Q[l]);d=d||Math.round(G),t[o]+=G,i=new Date,i-s&&(r=(r+G/(i-s))/2),n=Q[l],s=i,G&&a(!0)}else d=!0},I=function(Q){var G=Q>0?Math.min(100,Q/2):Math.max(-100,Q/2);Q-=G,t[o]+=G,-1<Q&&Q<1?(d?setTimeout(function(){t.classList.remove("ol-move")}):t.classList.remove("ol-move"),d=!1,a(!1)):setTimeout(function(){I(Q)},40)},P,F;if(e.vertical&&e.minibar){var D=function(Q){t.removeEventListener("pointermove",D),t.parentNode.classList.add("ol-miniscroll"),F=an.create("DIV"),P=an.create("DIV",{className:"ol-scroll",html:F}),t.parentNode.insertBefore(P,t),F.addEventListener("pointerdown",function(G){A=!0,x(G)}),e.mousewheel&&(an.addListener(P,["mousewheel","DOMMouseScroll","onmousewheel"],function(G){H(G)}),an.addListener(F,["mousewheel","DOMMouseScroll","onmousewheel"],function(G){H(G)})),t.parentNode.addEventListener("pointerenter",y),window.addEventListener("resize",y),Q!==!1&&y()};t.parentNode?D(!1):t.addEventListener("pointermove",D),t.addEventListener("scroll",function(){y()})}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),an.addListener(t,["pointerdown"],function(Q){A=!1,x(Q)}),t.addEventListener("click",function(Q){t.classList.contains("ol-move")&&(Q.preventDefault(),Q.stopPropagation())},!0);var V=function(Q){s=new Date-s,s>100||A?r=0:s>0&&(r=((r||0)+(n-Q[l])/s)/2),I(e.animate===!1?0:r*200),n=!1,r=0,s=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout(function(){t.classList.remove("ol-hasClick")},500)),A=!1,window.removeEventListener("pointermove",M),an.removeListener(window,["pointerup","pointercancel"],V)},H=function(Q){var G=Math.max(-1,Math.min(1,Q.wheelDelta||-Q.detail));return t.classList.add("ol-move"),t[o]-=G*30,t.classList.remove("ol-move"),!1};return e.mousewheel&&an.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],H),{refresh:y}};an.dispatchEvent=function(t,e){var n;try{n=new CustomEvent(t)}catch{n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,{})}e.dispatchEvent(n)};var lAe=class extends jl{constructor(e){e=e||{};var n=document.createElement("div");n.className=(e.className||"")+" ol-button ol-unselectable ol-control",super({element:n,target:e.target});var r=this,i=this.button_=document.createElement(/ol-text-button/.test(e.className)?"div":"button");i.type="button",e.title&&(i.title=e.title),e.name&&(i.name=e.name),e.html instanceof Element?i.appendChild(e.html):i.innerHTML=e.html||"";var s=function(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),e.handleClick&&e.handleClick.call(r,a)};i.addEventListener("click",s),n.appendChild(i),!e.title&&i.firstElementChild&&(i.title=i.firstElementChild.title),e.title&&this.set("title",e.title),e.title&&this.set("title",e.title),e.name&&this.set("name",e.name)}setVisible(e){e?an.show(this.element):an.hide(this.element)}setTitle(e){this.button_.setAttribute("title",e)}setHtml(e){an.setHTML(this.button_,e)}getButtonElement(){return this.button_}};/*!
  * ol-contextmenu - v5.4.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Fri Mar 08 2024 12:11:47 GMT+0000 (Coordinated Universal Time)
  */var zot=Object.defineProperty,$ot=(t,e,n)=>e in t?zot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pd=(t,e,n)=>($ot(t,typeof e!="symbol"?e+"":e,n),n),cAe={exports:{}};function b7(){}b7.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var s=0,a=r.length;s<a;s++)r[s].fn!==e&&r[s].fn._!==e&&i.push(r[s]);return i.length?n[t]=i:delete n[t],this}};cAe.exports=b7;var Vot=cAe.exports.TinyEmitter=b7,w7=(t=>(t.CONTEXTMENU="contextmenu",t.CLICK="click",t.DBLCLICK="dblclick",t))(w7||{}),Iy=(t=>(t.BEFOREOPEN="beforeopen",t.OPEN="open",t.CLOSE="close",t.ADD_MENU_ENTRY="add-menu-entry",t))(Iy||{});let Qee=class extends Dg{constructor(e){super(e.type,e.map,e.originalEvent)}};const Hot={width:150,scrollAt:4,eventType:w7.CONTEXTMENU,defaultItems:!0,items:[]},ay="ol-ctx-menu",ku={namespace:ay,container:`${ay}-container`,separator:`${ay}-separator`,submenu:`${ay}-submenu`,hidden:`${ay}-hidden`,icon:`${ay}-icon`,zoomIn:`${ay}-zoom-in`,zoomOut:`${ay}-zoom-out`,unselectable:"ol-unselectable"},jee=[{text:"Zoom In",classname:`${ku.zoomIn} ${ku.icon}`,callback:(t,e)=>{const n=e.getView();n.animate({zoom:Number(n.getZoom())+1,duration:700,center:t.coordinate})}},{text:"Zoom Out",classname:`${ku.zoomOut} ${ku.icon}`,callback:(t,e)=>{const n=e.getView();n.animate({zoom:Number(n.getZoom())-1,duration:700,center:t.coordinate})}}];function r5(t){const e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.append(n.firstChild);return e}function Got(t){var o,d;const e=document.importNode(t),n=t.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${n}px`;const r=r5("<span>Foo</span>"),i=r5("<span>Foo</span>"),s=document.createElement("li"),a=document.createElement("li");s.append(r),a.append(i),e.append(s),e.append(a),(o=t.parentNode)==null||o.append(e);const l=e.offsetHeight/2;return(d=t.parentNode)==null||d.removeChild(e),l}function Kee({parentNode:t,item:e,isSubmenu:n=!1,isInsideSubmenu:r=!1,emitter:i}){const s=`_${Math.random().toString(36).slice(2,11)}`;if(typeof e!="string"&&"text"in e){const p=`<span>${e.text}</span>`,A=r5(p),v=document.createElement("li");e.classname=e.classname||"",e.icon&&(e.classname===""?e.classname=ku.icon:e.classname.includes(ku.icon)===!1&&(e.classname+=` ${ku.icon}`),v.setAttribute("style",`background-image:url(${e.icon})`)),v.id=s,v.className=e.classname,v.append(A),t.append(v);const y={id:s,isSubmenu:n,isInsideSubmenu:r,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return i.emit(Iy.ADD_MENU_ENTRY,y,v),v}const a=`<li id="${s}" class="${ku.separator}"><hr></li>`,l=r5(a);t.append(l);const o=t.lastChild,d={id:s,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return i.emit(Iy.ADD_MENU_ENTRY,d,o),o}function z8({container:t,items:e,menuWidth:n,isInsideSubmenu:r,emitter:i}){e.forEach(s=>{if(typeof s!="string"&&"items"in s&&Array.isArray(s.items)){const a=Kee({parentNode:t,item:s,isSubmenu:!0,emitter:i});a.classList.add(ku.submenu);const l=document.createElement("ul");l.classList.add(ku.container),l.style.width=`${n}px`,a.append(l),z8({emitter:i,menuWidth:n,container:l,items:s.items,isInsideSubmenu:!0})}else Kee({parentNode:t,item:s,isSubmenu:!1,isInsideSubmenu:r,emitter:i})})}function V4(t,e){if(!t)throw new Error(e)}let Qot=class extends jl{constructor(e={}){V4(typeof e=="object","@param `opts` should be object type!");const n=document.createElement("div");super({element:n}),pd(this,"map"),pd(this,"emitter",new Vot),pd(this,"container"),pd(this,"coordinate",[]),pd(this,"pixel",[]),pd(this,"contextMenuEventListener"),pd(this,"entryCallbackEventListener"),pd(this,"mapMoveListener"),pd(this,"lineHeight",0),pd(this,"disabled"),pd(this,"opened"),pd(this,"items",[]),pd(this,"menuEntries",new Map),pd(this,"options"),this.options={...Hot,...e};const r=document.createElement("ul");n.append(r),n.style.width=`${this.options.width}px`,n.classList.add(ku.container,ku.unselectable,ku.hidden),this.container=n,this.contextMenuEventListener=i=>{this.handleContextMenu(i)},this.entryCallbackEventListener=i=>{this.handleEntryCallback(i)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const e of this.menuEntries.keys())this.removeMenuEntry(e);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return jee}countItems(){return this.menuEntries.size}extend(e){V4(Array.isArray(e),"@param `items` should be an Array."),z8({items:e,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(ku.hidden),this.dispatchEvent(Iy.CLOSE)}isOpen(){return this.opened}updatePosition(e){V4(Array.isArray(e),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=e,this.positionContainer())}pop(){const e=Array.from(this.menuEntries.keys()).pop();e&&this.removeMenuEntry(e)}shift(){const e=Array.from(this.menuEntries.keys()).shift();e&&this.removeMenuEntry(e)}push(e){e&&this.extend([e])}setMap(e){if(super.setMap(e),e){this.map=e,e.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),e.on("movestart",()=>{this.handleMapMove()}),this.emitter.on(Iy.ADD_MENU_ENTRY,(r,i)=>{this.handleAddMenuEntry(r,i)},this),this.items=this.options.defaultItems?this.options.items.concat(jee):this.options.items,z8({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const n=this.getMenuEntriesLength();this.lineHeight=n>0?this.container.offsetHeight/n:Got(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(Iy.ADD_MENU_ENTRY)}removeMenuEntry(e){let n=document.getElementById(e);n==null||n.remove(),n=null,this.menuEntries.delete(e)}handleContextMenu(e){var n;this.coordinate=this.map.getEventCoordinate(e),this.pixel=this.map.getEventPixel(e),this.dispatchEvent(new Qee({map:this.map,originalEvent:e,type:Iy.BEFOREOPEN})),!this.disabled&&(this.options.eventType===w7.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.openMenu(e)}),(n=e.target)==null||n.addEventListener("pointerdown",r=>{this.opened&&(r.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(e){this.opened=!0,this.positionContainer(),this.container.classList.remove(ku.hidden),this.dispatchEvent(new Qee({map:this.map,originalEvent:e,type:Iy.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,e])=>e.isSeparator===!1&&e.isSubmenu===!1&&e.isInsideSubmenu===!1).length}positionContainer(){const e=this.map.getSize()||[0,0],n={w:e[0]-this.pixel[0],h:e[1]-this.pixel[1]},r=this.getMenuEntriesLength(),i={w:this.container.offsetWidth,h:Math.round(this.lineHeight*r)},s=n.w>=i.w?this.pixel[0]+5:this.pixel[0]-i.w;this.container.style.left=`${s}px`,this.container.style.top=n.h>=i.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-i.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",n.w-=i.w;const a=d=>Array.from(d.children).filter(p=>p.tagName==="LI"&&p.classList.contains(ku.submenu));let l=0;const o=(d,p)=>{l+=1,a(d).forEach(A=>{const v=p>=i.w?i.w-8:(i.w+8)*-1,y=A.querySelector(`ul.${ku.container}`),C=Math.round(this.lineHeight*Array.from(y.children).filter(x=>x.tagName==="LI").length);y.style.left=`${v}px`,y.style.right="auto",y.style.top=n.h>=C+i.h?"0":`-${y.offsetHeight-25}px`,y.style.bottom="auto",y.style.zIndex=String(l),a(y).length>0&&o(y,p-i.w)})};o(this.container.firstElementChild,n.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(e){var s;e.preventDefault(),e.stopPropagation();const n=e.currentTarget,r=this.menuEntries.get(n.id);if(!r)return;const i={data:r.data,coordinate:this.coordinate};this.closeMenu(),(s=r.callback)==null||s.call(r,i,this.map)}handleAddMenuEntry(e,n){this.menuEntries.set(e.id,e),this.positionContainer(),"callback"in e&&typeof e.callback=="function"&&n.addEventListener("click",this.entryCallbackEventListener,!1)}};var x7=class extends jl{constructor(e){e=e||{};var n=an.create("DIV",{className:e.switcherClass||"ol-layerswitcher"});super({element:n,target:e.target});var r=this;this.dcount=0,this.show_progress=e.show_progress,this.oninfo=typeof e.oninfo=="function"?e.oninfo:null,this.onextent=typeof e.onextent=="function"?e.onextent:null,this.hasextent=e.extent||e.onextent,this.hastrash=e.trash,this.reordering=e.reordering!==!1,this._layers=[],this._layerGroup=e.layerGroup&&e.layerGroup.getLayers?e.layerGroup:null,this.onchangeCheck=typeof e.onchangeCheck=="function"?e.onchangeCheck:null,typeof e.displayInLayerSwitcher=="function"&&(this.displayInLayerSwitcher=e.displayInLayerSwitcher),e.target||(n.classList.add("ol-unselectable"),n.classList.add("ol-control"),n.classList.add(e.collapsed!==!1?"ol-collapsed":"ol-forceopen"),this.button=an.create("BUTTON",{type:"button",parent:n}),this.button.addEventListener("touchstart",function(i){n.classList.toggle("ol-forceopen"),n.classList.add("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:n.classList.contains("ol-collapsed")}),i.preventDefault(),r.overflow()}),this.button.addEventListener("click",function(){n.classList.toggle("ol-forceopen"),n.classList.add("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:!n.classList.contains("ol-forceopen")}),r.overflow()}),e.mouseover&&(n.addEventListener("mouseleave",function(){n.classList.add("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:!0})}),n.addEventListener("mouseover",function(){n.classList.remove("ol-collapsed"),r.dispatchEvent({type:"toggle",collapsed:!1})})),e.minibar&&(e.noScroll=!0),e.noScroll||(this.topv=an.create("DIV",{className:"ol-switchertopdiv",parent:n,click:function(){r.overflow("+50%")}}),this.botv=an.create("DIV",{className:"ol-switcherbottomdiv",parent:n,click:function(){r.overflow("-50%")}})),this._noScroll=e.noScroll),this.panel_=an.create("UL",{className:"panel"}),this.panelContainer_=an.create("DIV",{className:"panel-container",html:this.panel_,parent:n}),!e.target&&!e.noScroll&&an.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",function(i){r.overflow(Math.max(-1,Math.min(1,i.wheelDelta||-i.detail)))&&(i.stopPropagation(),i.preventDefault())}),this.header_=an.create("LI",{className:"ol-header",parent:this.panel_}),this.set("drawDelay",e.drawDelay||0),this.set("selection",e.selection),e.minibar&&setTimeout((function(){var i=an.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],function(){i.refresh()})}).bind(this))}displayInLayerSwitcher(e){return e.get("displayInLayerSwitcher")!==!1}setMap(e){if(super.setMap(e),this.drawPanel(),this._listener)for(var n in this._listener)Rf(this._listener[n]);this._listener=null,e&&(this._listener={moveend:e.on("moveend",this.viewChange.bind(this)),size:e.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=e.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))}show(){this.element.classList.add("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!1})}hide(){this.element.classList.remove("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!0})}toggle(){this.element.classList.toggle("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!this.isOpen()})}isOpen(){return this.element.classList.contains("ol-forceopen")}setHeader(e){an.setHTML(this.header_,e)}overflow(e){if(this.button&&!this._noScroll){if(an.hidden(this.panel_)){an.setStyle(this.element,{height:"auto"});return}var n=an.outerHeight(this.element),r=an.outerHeight(this.panel_),i=this.button.offsetTop+an.outerHeight(this.button),s=this.panel_.offsetTop-i;if(r>n-i){an.setStyle(this.element,{height:"100%"});var a=this.panel_.querySelectorAll("li.ol-visible .li-content")[0],l=a?2*an.getStyle(a,"height"):0;switch(e){case 1:s+=l;break;case-1:s-=l;break;case"+50%":s+=Math.round(n/2);break;case"-50%":s-=Math.round(n/2);break}return s+r<=n-3*i/2?(s=n-3*i/2-r,an.hide(this.botv)):an.show(this.botv),s>=0?(s=0,an.hide(this.topv)):an.show(this.topv),an.setStyle(this.panel_,{top:s+"px"}),!0}else return an.setStyle(this.element,{height:"auto"}),an.setStyle(this.panel_,{top:0}),an.hide(this.botv),an.hide(this.topv),!1}else return!1}_setLayerForLI(e,n){var r=[];n.getLayers&&r.push(n.getLayers().on("change:length",this.drawPanel.bind(this))),e&&(r.push(n.on("change:opacity",(function(){this.setLayerOpacity(n,e)}).bind(this))),r.push(n.on("change:visible",(function(){this.setLayerVisibility(n,e)}).bind(this)))),r.push(n.on("propertychange",(function(i){(i.key==="displayInLayerSwitcher"||i.key==="openInLayerSwitcher"||i.key==="title"||i.key==="name")&&this.drawPanel(i)}).bind(this))),this._layers.push({li:e,layer:n,listeners:r})}setLayerOpacity(e,n){var r=n.querySelector(".layerswitcher-opacity-cursor");r&&(r.style.left=e.getOpacity()*100+"%"),this.dispatchEvent({type:"layer:opacity",layer:e})}setLayerVisibility(e,n){var r=n.querySelector(".ol-visibility");r&&(r.checked=e.getVisible()),e.getVisible()?n.classList.add("ol-visible"):n.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:e})}_clearLayerForLI(){this._layers.forEach(function(e){e.listeners.forEach(function(n){Rf(n)})}),this._layers=[]}_getLayerForLI(e){for(var n=0,r;r=this._layers[n];n++)if(r.li===e)return r.layer;return null}viewChange(){this.panel_.querySelectorAll("li").forEach((function(e){var n=this._getLayerForLI(e);n&&(this.testLayerVisibility(n)?e.classList.remove("ol-layer-hidden"):e.classList.add("ol-layer-hidden"))}).bind(this))}getPanel(){return this.panelContainer_}drawPanel(){if(this.getMap()){var e=this;this.dcount++,setTimeout(function(){e.drawPanel_()},this.get("drawDelay")||0)}}drawPanel_(){if(!(--this.dcount||this.dragging_)){var e=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach((function(n){n.classList.contains("ol-header")||n.remove()}).bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=e}}switchLayerVisibility(e,n){e.get("baseLayer")?(e.getVisible()||e.setVisible(!0),n.forEach(function(r){e!==r&&r.get("baseLayer")&&r.getVisible()&&r.setVisible(!1)})):e.setVisible(!e.getVisible())}testLayerVisibility(e){if(!this.getMap())return!0;var n=this.getMap().getView().getResolution(),r=this.getMap().getView().getZoom();if(e.getMaxResolution()<=n||e.getMinResolution()>=n)return!1;if(e.getMinZoom&&(e.getMinZoom()>=r||e.getMaxZoom()<r))return!1;var i=e.getExtent();if(i){var s=this.getMap().getView().calculateExtent(this.getMap().getSize());return Ua(s,i)}return!0}dragOrdering_(e){e.stopPropagation(),e.preventDefault();var n=this,r=e.currentTarget.parentNode.parentNode,i=!0,s=this.panel_,a,l=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY,o,d,p,A;r.parentNode.classList.add("drag");function v(){if(o){var C=p,x=n.getSelection()===C;if(C&&o){var M;A?M=A.getLayers():M=n._layerGroup?n._layerGroup.getLayers():n.getMap().getLayers();for(var I=M.getArray(),P=0;P<I.length;P++)if(I[P]==C){M.removeAt(P);break}for(var F=0;F<I.length;F++)if(I[F]===o){P>F?M.insertAt(F,C):M.insertAt(F+1,C);break}}x&&n.selectLayer(C),n.dispatchEvent({type:"reorder-end",layer:C,group:A})}r.parentNode.querySelectorAll("li").forEach(function(D){D.classList.remove("dropover"),D.classList.remove("dropover-after"),D.classList.remove("dropover-before")}),r.classList.remove("drag"),r.parentNode.classList.remove("drag"),n.element.classList.remove("drag"),d&&d.remove(),an.removeListener(document,"mousemove touchmove",y),an.removeListener(document,"mouseup touchend touchcancel",v)}function y(C){if(a=C.pageY||C.touches&&C.touches.length&&C.touches[0].pageY||C.changedTouches&&C.changedTouches.length&&C.changedTouches[0].pageY,i&&Math.abs(l-a)>2&&(i=!1,r.classList.add("drag"),p=n._getLayerForLI(r),o=!1,A=n._getLayerForLI(r.parentNode.parentNode),d=an.create("LI",{className:"ol-dragover",html:r.innerHTML,style:{position:"absolute","z-index":1e4,left:r.offsetLeft,opacity:.5,width:an.outerWidth(r),height:an.getStyle(r,"height")},parent:s}),n.element.classList.add("drag"),n.dispatchEvent({type:"reorder-start",layer:p,group:A})),!i){C.preventDefault(),C.stopPropagation(),an.setStyle(d,{top:a-an.offsetRect(s).top+s.scrollTop+5});var x;if(!C.touches)x=C.target,C.target.shadowRoot&&(x=C.composedPath()[0]);else for(x=document.elementFromPoint(C.touches[0].clientX,C.touches[0].clientY);x.shadowRoot;)x=x.shadowRoot.elementFromPoint(C.touches[0].clientX,C.touches[0].clientY);for(x.classList.contains("ol-switcherbottomdiv")?n.overflow(-1):x.classList.contains("ol-switchertopdiv")&&n.overflow(1);x&&x.tagName!=="LI";)x=x.parentNode;(!x||!x.classList.contains("dropover"))&&r.parentNode.querySelectorAll("li").forEach(function(M){M.classList.remove("dropover"),M.classList.remove("dropover-after"),M.classList.remove("dropover-before")}),x&&x.parentNode.classList.contains("drag")&&x!==r?(o=n._getLayerForLI(x),o&&!o.get("allwaysOnTop")==!p.get("allwaysOnTop")?(x.classList.add("dropover"),x.classList.add(r.offsetTop<x.offsetTop?"dropover-after":"dropover-before")):o=!1,an.show(d)):(o=!1,x===r?an.hide(d):an.show(d)),o?d.classList.remove("forbidden"):d.classList.add("forbidden")}}an.addListener(document,"mousemove touchmove",y),an.addListener(document,"mouseup touchend touchcancel",v)}dragOpacity_(e){e.stopPropagation(),e.preventDefault();var n=this,r=e.target,i=this._getLayerForLI(r.parentNode.parentNode.parentNode);if(!i)return;var s=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX,a=an.getStyle(r,"left")-s;n.dragging_=!0;function l(){an.removeListener(document,"mouseup touchend touchcancel",l),an.removeListener(document,"mousemove touchmove",o),n.dragging_=!1}function o(d){var p=d.pageX||d.touches&&d.touches.length&&d.touches[0].pageX||d.changedTouches&&d.changedTouches.length&&d.changedTouches[0].pageX,A=(a+p)/an.getStyle(r.parentNode,"width"),v=Math.max(0,Math.min(1,A));an.setStyle(r,{left:v*100+"%"}),r.parentNode.nextElementSibling.innerHTML=Math.round(v*100),i.setOpacity(v)}an.addListener(document,"mouseup touchend touchcancel",l),an.addListener(document,"mousemove touchmove",o)}drawList(e,n){var r=this,i=n.getArray(),s=function(A){A.stopPropagation(),A.preventDefault();var v=r._getLayerForLI(this.parentNode.parentNode);r.switchLayerVisibility(v,n),r.get("selection")&&v.getVisible()&&r.selectLayer(v),r.onchangeCheck&&r.onchangeCheck(v)};function a(A){A.stopPropagation(),A.preventDefault();var v=r._getLayerForLI(this.parentNode.parentNode);r.oninfo(v),r.dispatchEvent({type:"info",layer:v})}function l(A){A.stopPropagation(),A.preventDefault();var v=r._getLayerForLI(this.parentNode.parentNode);r.onextent?r.onextent(v):r.getMap().getView().fit(v.getExtent(),r.getMap().getSize()),r.dispatchEvent({type:"extent",layer:v})}function o(A){A.stopPropagation(),A.preventDefault();var v=this.parentNode.parentNode.parentNode.parentNode,y,C=r._getLayerForLI(v);C?(y=r._getLayerForLI(this.parentNode.parentNode),C.getLayers().remove(y),C.getLayers().getLength()==0&&!C.get("noSwitcherDelete")&&o.call(v.querySelectorAll(".layerTrash")[0],A)):(v=this.parentNode.parentNode,r.getMap().removeLayer(r._getLayerForLI(v)))}function d(A){if(!this.displayInLayerSwitcher(A)){this._setLayerForLI(null,A);return}var v=an.create("LI",{className:(A.getVisible()?"ol-visible ":" ")+(A.get("baseLayer")?"baselayer":""),parent:e});this._setLayerForLI(v,A),this._selectedLayer===A&&v.classList.add("ol-layer-select");var y=an.create("DIV",{className:"ol-layerswitcher-buttons",parent:v}),C=an.create("DIV",{className:"li-content",parent:v});an.create("INPUT",{type:A.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:A.getVisible(),click:s,parent:C});var x=an.create("LABEL",{title:A.get("title")||A.get("name"),click:s,style:{userSelect:"none"},parent:C});if(x.addEventListener("selectstart",function(){return!1}),an.create("SPAN",{html:A.get("title")||A.get("name"),click:(function(V){this.get("selection")&&(V.stopPropagation(),this.selectLayer(A))}).bind(this),parent:x}),this.reordering&&(p<i.length-1&&(A.get("allwaysOnTop")||!i[p+1].get("allwaysOnTop"))||p>0&&(!A.get("allwaysOnTop")||i[p-1].get("allwaysOnTop")))&&an.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(V){r.dragOrdering_(V)}},parent:y}),A.getLayers){var M=0;A.getLayers().forEach(function(V){r.displayInLayerSwitcher(V)&&M++}),M&&an.create("DIV",{className:A.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var V=r._getLayerForLI(this.parentNode.parentNode);V.set("openInLayerSwitcher",!V.get("openInLayerSwitcher"))},parent:y})}if(this.oninfo&&an.create("DIV",{className:"layerInfo",title:this.tip.info,click:a,parent:y}),this.hastrash&&!A.get("noSwitcherDelete")&&an.create("DIV",{className:"layerTrash",title:this.tip.trash,click:o,parent:y}),this.hasextent&&i[p].getExtent()){var I=i[p].getExtent();I.length==4&&I[0]<I[2]&&I[1]<I[3]&&an.create("DIV",{className:"layerExtent",title:this.tip.extent,click:l,parent:y})}if(this.show_progress&&A instanceof P8){var P=an.create("DIV",{className:"layerswitcher-progress",parent:C});this.setprogress_(A),A.layerswitcher_progress=an.create("DIV",{parent:P})}var F=an.create("DIV",{className:"layerswitcher-opacity",click:function(V){if(V.target===this){V.stopPropagation(),V.preventDefault();var H=Math.max(0,Math.min(1,V.offsetX/an.getStyle(this,"width")));r._getLayerForLI(this.parentNode.parentNode).setOpacity(H),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(H*100)}},parent:C});if(an.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:A.getOpacity()*100+"%"},on:{"mousedown touchstart":function(V){r.dragOpacity_(V)}},parent:F}),an.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(A.getOpacity()*100),parent:C}),A.getLayers&&(v.classList.add("ol-layer-group"),A.get("openInLayerSwitcher")===!0)){var D=an.create("UL",{parent:v});this.drawList(D,A.getLayers())}v.classList.add(this.getLayerClass(A)),this.dispatchEvent({type:"drawlist",layer:A,li:v})}for(var p=i.length-1;p>=0;p--)d.call(this,i[p]);this.viewChange(),e===this.panel_&&this.overflow()}getLayerClass(e){return e?e.getLayers?"ol-layer-group":e instanceof cm?"ol-layer-vector":e instanceof rAe?"ol-layer-vectortile":e instanceof P8?"ol-layer-tile":e instanceof Tpe?"ol-layer-image":e instanceof nAe?"ol-layer-heatmap":e.getFeatures?"ol-layer-vectorimage":"unknown":"none"}selectLayer(e,n){if(!e){if(!this.getMap())return;e=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=e,this.drawPanel(),n||this.dispatchEvent({type:"select",layer:e})}getSelection(){return this._selectedLayer}setprogress_(e){if(!e.layerswitcher_progress){var n=0,r=0,i=function(){r===n?(r=n=0,an.setStyle(e.layerswitcher_progress,{width:0})):an.setStyle(e.layerswitcher_progress,{width:(n/r*100).toFixed(1)+"%"})};e.getSource().on("tileloadstart",function(){r++,i()}),e.getSource().on("tileloadend",function(){n++,i()}),e.getSource().on("tileloaderror",function(){n++,i()})}}};x7.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};Y2.prototype.getPreview=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"};GG.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var n=this.getTileGrid().getTileCoordForCoordAndResolution(t,e),r=this.getTileUrlFunction();return r.call(this,n,this.getProjection())};Mpe.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var n=this.getTileUrlFunction();if(n){var r=this.getTileGrid()||this.getTileGridForProjection(this.getProjection()),i=r.getTileCoordForCoordAndResolution(t,e);return n.call(this,i,1,this.getProjection())}var s=this.getGetFeatureInfoUrl?this.getGetFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{}):this.getFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{});return s=s.replace(/getfeatureinfo/i,"GetMap"),s};Kb.prototype.getPreview=function(t,e,n){if(this.get("preview"))return[this.get("preview")];if(e||(e=150),e<this.getMinResolution()||e>this.getMaxResolution()){var r=this.getMinResolution(),i=this.getMaxResolution();for(i>1e5&&(i=156543),r<.15&&(r=.15),e=i;i>r;)r*=2,i/=2,e=r}var s=this.getExtent();if(t||(t=[21020,6355964]),s&&!DA(s,t)&&(t=[(s[0]+s[2])/2,(s[1]+s[3])/2]),n&&(t=am(t,n,this.getSource().getProjection())),this.getSource&&this.getSource())try{return[this.getSource().getPreview(t,e)]}catch{}return[]};M_.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];var n=[];if(this.getLayers)for(var r=this.getLayers().getArray(),i=0;i<r.length;i++)n=n.concat(r[i].getPreview(t,e));return n};var jot=class extends x7{constructor(e){e=e||{},e.switcherClass=((e.switcherClass||"")+" ol-layerswitcher-image").trim(),e.mouseover=e.mouseover!==!1,super(e)}drawList(e,n){var r=this,i=function(s){s.preventDefault();var a=r._getLayerForLI(this);r.switchLayerVisibility(a,n),s.type=="touchstart"&&r.element.classList.add("ol-collapsed")};an.setStyle(e,{height:"auto"}),n.forEach(function(s){if(r.displayInLayerSwitcher(s)){var a=s.getPreview?s.getPreview():["none"],l=an.create("LI",{className:"ol-imgcontainer"+(s.getVisible()?" ol-visible":""),on:{"touchstart click":i},parent:e});r._setLayerForLI(l,s),a.forEach(function(o){an.create("IMG",{src:o,parent:l})}),an.create("p",{html:s.get("title")||s.get("name"),parent:l}),r.testLayerVisibility(s)&&l.classList.add("ol-layer-hidden")}})}overflow(){}},uAe=class extends jl{constructor(e){e=e||{},e.fullscreen&&(e.target=document.body);var n=an.create("DIV",{className:((e.className||"")+(e.zoom?" ol-zoom":"")+" ol-ext-dialog").trim()});super({element:n,target:e.target}),n.addEventListener("click",(function(s){this.get("hideOnBack")&&s.target===n&&this.close(),this.get("hideOnClick")&&this.close()}).bind(this));var r=an.create("FORM",{on:{submit:this._onButton("submit")},parent:n});an.create("H2",{parent:r}),an.create("DIV",{className:"ol-closebox",click:this._onButton("cancel"),parent:r}),an.create("DIV",{className:"ol-content",parent:r}),this._progress=an.create("DIV",{style:{display:"none"},parent:r});var i=an.create("DIV",{className:"ol-progress-bar",parent:this._progress});this._progressbar=an.create("DIV",{parent:i}),this._progressMessage=an.create("DIV",{className:"ol-progress-message",parent:this._progress}),an.create("DIV",{className:"ol-buttons",parent:r}),this.set("closeBox",e.closeBox!==!1),this.set("zoom",!!e.zoom),this.set("hideOnClick",!!e.hideOnClick),this.set("hideOnBack",!!e.hideOnBack),this.set("className",n.className),this.set("closeOnSubmit",e.closeOnSubmit),this.set("buttons",e.buttons),this.setContent(e)}show(e){e&&((e instanceof Element||typeof e=="string")&&(e={content:e}),this.setContent(e)),this.element.classList.add("ol-visible");var n=this.element.querySelector('input[type="text"],input[type="search"],input[type="number"]');if(n&&n.focus(),this.dispatchEvent({type:"show"}),e){if(e.autoclose){var r=setTimeout((function(){this.hide()}).bind(this),e.autoclose);this.once("hide",function(){clearTimeout(r)})}if(e.hideOnBack){var i=this.get("hideOnBack");this.set("hideOnBack",!0),this.once("hide",(function(){this.set("hideOnBack",i)}).bind(this))}}}open(){this.show()}setContentMessage(e){if(e!==void 0){var n=this.getContentElement();e instanceof Element&&an.setHTML(n,""),an.setHTML(n,e||"")}}setTitle(e){var n=this.element.querySelector("form");n.querySelector("h2").innerText=e||"",e?n.classList.add("ol-title"):n.classList.remove("ol-title")}setContent(e){if(e){this.element.className=this.get("className"),typeof e=="string"&&(e={content:e}),e=e||{},this.setProgress(!1),e.max&&this.setProgress(0,e.max),e.progress!==void 0&&this.setProgress(e.progress),this.get("zoom")?this.element.classList.add("ol-zoom"):this.element.classList.remove("ol-zoom"),e.className&&e.className.split(" ").forEach((function(a){this.element.classList.add(a)}).bind(this));var n=this.element.querySelector("form");e.content!==void 0&&(e.content instanceof Element&&an.setHTML(n.querySelector(".ol-content"),""),an.setHTML(n.querySelector(".ol-content"),e.content||"")),this.setTitle(e.title),e.closeBox||this.get("closeBox")&&e.closeBox!==!1?n.classList.add("ol-closebox"):n.classList.remove("ol-closebox");var r=this.element.querySelector(".ol-buttons");r.innerHTML="";var i=e.buttons||this.get("buttons");if(i){n.classList.add("ol-button");for(var s in i)an.create("INPUT",{type:s==="submit"?"submit":"button",value:i[s],click:this._onButton(s,e.onButton),parent:r})}else n.classList.remove("ol-button")}}getContentElement(){return this.element.querySelector("form .ol-content")}setProgress(e,n,r){if(e===!1){an.setStyle(this._progress,{display:"none"});return}if(n>0?this.set("max",Number(n)):n=this.get("max"),!n)an.setStyle(this._progress,{display:"none"});else{var i=Math.round(e/n*100);an.setStyle(this._progress,{display:""}),this._progressbar.className=i?"":"notransition",an.setStyle(this._progressbar,{width:i+"%"})}this._progressMessage.innerHTML="",an.setHTML(this._progressMessage,r||"")}_onButton(e,n){var r=(function(i){i.preventDefault(),(e!=="submit"||this.get("closeOnSubmit")!==!1)&&this.hide();var s=this.getInputs();this.dispatchEvent({type:"button",button:e,inputs:s}),typeof n=="function"&&n(e,s)}).bind(this);return r}getInputs(){var e={};return["input","textarea","select"].forEach((function(n){this.element.querySelectorAll("form "+n).forEach(function(r){r.className&&r.className.split(" ").forEach(function(i){e[i]=r})})}).bind(this)),e}hide(){this.element.classList.remove("ol-visible"),this.dispatchEvent({type:"hide"})}close(){this.hide()}isOpen(){return this.element.classList.contains("ol-visible")}},Kot=function(t){if(!t)return null;var e=t.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return e||(t.getViewport().querySelector(".ol-layers")?(e=document.createElement("canvas"),e.className="ol-fixedoverlay",t.getViewport().querySelector(".ol-layers").after(e),t.on("precompose",function(n){e.width=t.getSize()[0]*n.frameState.pixelRatio,e.height=t.getSize()[1]*n.frameState.pixelRatio})):e=t.getViewport().querySelector("canvas")),e},C7=class extends jl{constructor(e){e=e||{},super(e),this.setStyle(e.style)}setMap(e){this.getCanvas(e);var n=this.getMap();if(this._listener&&(Rf(this._listener),this._listener=null),super.setMap(e),n)try{n.renderSync()}catch{}e&&(this._listener=e.on("postcompose",this._draw.bind(this)))}getCanvas(e){return Kot(e)}getContext(e){var n=e.context;if(!n&&this.getMap()){var r=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];n=r?r.getContext("2d"):null}return n}setStyle(e){this._style=e||new No({})}getStyle(){return this._style}getStroke(){var e=this._style.getStroke();return e||this._style.setStroke(new Za({color:"#000",width:1.25})),this._style.getStroke()}getFill(){var e=this._style.getFill();return e||this._style.setFill(new Hl({color:"#fff"})),this._style.getFill()}getTextStroke(){var e=this._style.getText();return e||(e=new Pf({})),e.getStroke()||e.setStroke(new Za({color:"#fff",width:3})),e.getStroke()}getTextFill(){var e=this._style.getText();return e||(e=new Pf({})),e.getFill()||e.setFill(new Hl({color:"#fff"})),e.getFill()}getTextFont(){var e=this._style.getText();return e||(e=new Pf({})),e.getFont()||e.setFont("12px sans-serif"),e.getFont()}_draw(){console.warn("[CanvasBase] draw function not implemented.")}},Wot=class extends C7{constructor(e){e=e||{};var n=document.createElement("div");if(super({element:n,target:e.target}),e.target)n.className=e.className||"ol-legend";else{n.className=(e.className||"ol-legend")+" ol-unselectable ol-control"+(e.collapsible===!1?" ol-uncollapsible":" ol-collapsed");var r=document.createElement("button");r.setAttribute("type","button"),r.addEventListener("click",(function(){this.toggle()}).bind(this)),n.appendChild(r),r=document.createElement("button"),r.setAttribute("type","button"),r.className="ol-closebox",r.addEventListener("click",(function(){this.toggle()}).bind(this)),n.appendChild(r)}this._legend=e.legend,this._legend.getCanvas().className="ol-legendImg",n.appendChild(this._legend.getCanvas()),n.appendChild(this._legend.getListElement()),e.collapsible!==!1&&e.collapsed===!1&&this.show(),this._legend.on("select",(function(i){this.dispatchEvent(i)}).bind(this)),this._legend.on("refresh",(function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch{}}).bind(this)),this._legend.on("items",(function(i){i.nb?(this.element.classList.remove("ol-empty"),this.element.title=e.title||"legend"):(this.element.classList.add("ol-empty"),this.element.title=e.emptyTitle||"no legend"),this.dispatchEvent(i)}).bind(this))}getLegend(){return this._legend}setCanvas(e){if(this._onCanvas=e,this.element.style.visibility=e?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch{}}onCanvas(){return!!this._onCanvas}_draw(e){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var n=this._legend.getCanvas(),r=this.getContext(e),i=r.canvas.height-n.height;r.save(),r.rect(0,i,n.width,n.height);var s="#fff";this._legend.getTextStyle().getBackgroundFill()&&(s=ab(this._legend.getTextStyle().getBackgroundFill().getColor())),r.fillStyle=r.strokeStyle=s,r.lineWidth=10,r.lineJoin="round",r.stroke(),r.clearRect(0,i,n.width,n.height),r.fill(),r.drawImage(n,0,i),r.restore()}}show(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch{}}hide(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch{}}collapse(e){e===!1?this.show():this.hide()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}toggle(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch{}}},hAe=class extends jl{constructor(e){e=e||{};var n=an.create("DIV",{className:e.className||"ol-print"});super({element:n,target:e.target}),e.target||(n.classList.add("ol-unselectable","ol-control"),an.create("BUTTON",{type:"button",title:e.title||"Print",click:(function(){this.print()}).bind(this),parent:n})),this.set("immediate",e.immediate),this.set("imageType",e.imageType||"image/jpeg"),this.set("quality",e.quality||.8),this.set("orientation",e.orientation)}toClipboard(e,n){try{e.canvas.toBlob(function(r){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},r.type,{value:r,enumerable:!0}))]),typeof n=="function"&&n(!0)}catch{typeof n=="function"&&n(!1)}})}catch{typeof n=="function"&&n(!1)}}copyMap(e,n){this.once("print",(function(r){this.toClipboard(r,n)}).bind(this)),this.print(e)}_getCanvas(e,n,r){var i;if(e.context)r=e.context.canvas;else{if(r)i=r.getContext("2d");else{r=document.createElement("canvas");var s=this.getMap().getSize();r.width=s[0],r.height=s[1],i=r.getContext("2d"),/jp.*g$/.test(n)&&(i.fillStyle=this.get("bgColor")||"white",i.fillRect(0,0,r.width,r.height))}this.getMap().getViewport().querySelectorAll(".ol-layers canvas, canvas.ol-fixedoverlay").forEach((function(a){if(a.width){if(i.save(),a.parentNode.style.opacity==="0")return;i.globalAlpha=parseFloat(a.parentNode.style.opacity)||1,i.globalCompositeOperation=an.getStyle(a.parentNode,"mix-blend-mode"),i.filter=an.getStyle(a.parentNode,"filter");var l=an.getStyle(a,"transform")||an.getStyle(a,"-webkit-transform");/^matrix/.test(l)?(l=l.replace(/^matrix\(|\)$/g,"").split(","),l.forEach(function(o,d){l[d]=parseFloat(o)}),i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),i.drawImage(a,0,0)):i.drawImage(a,0,0,an.getStyle(a,"width"),an.getStyle(a,"height")),i.restore()}}).bind(this))}return r}fastPrint(e,n){e=e||{},this._ol6?requestAnimationFrame((function(){n(this._getCanvas({},e.imageType,e.canvas))}).bind(this)):(this.getMap().once("postcompose",(function(r){r.context||(this._ol6=!0),n(this._getCanvas(r,e.imageType,e.canvas))}).bind(this)),this.getMap().render())}print(e){e=e||{};var n=e.imageType||this.get("imageType"),r=e.quality||this.get("quality");if(this.getMap()){if(e.immediate!=="silent"&&this.dispatchEvent(Object.assign({type:"printing"},e)),!e.immediate){setTimeout((function(){e=Object.assign({},e),e.immediate="silent",this.print(e)}).bind(this),200);return}this.getMap().once(this.get("immediate")?"postcompose":"rendercomplete",(function(i){var s=this._getCanvas(i,n),a=e.size||[210,297],l=e.format||"a4",o,d,p,A=e.orient||this.get("orientation"),v=typeof e.margin=="number"?e.margin:10;if(s){A!=="landscape"&&A!=="portrait"&&(A=s.width>s.height?"landscape":"portrait"),A==="landscape"&&(a=[a[1],a[0]]);var y=Math.min((a[0]-2*v)/s.width,(a[1]-2*v)/s.height);o=y*s.width,d=y*s.height,p=[(a[0]-o)/2,(a[1]-d)/2]}var C;try{C=s?s.toDataURL(n,r):null}catch{this.dispatchEvent({type:"error",canvas:s});return}var x=Object.assign({type:"print",print:{format:l,orientation:A,unit:"mm",size:a,position:p,imageWidth:o,imageHeight:d},image:C,imageType:n,quality:r,canvas:s},e);this.dispatchEvent(x)}).bind(this)),this.getMap().render()}}},qot=class extends C7{constructor(e){e=e||{};var n=an.create("DIV",{className:(e.className||"")+" ol-control-title ol-unselectable",style:{display:"block",visibility:"hidden"}});super({element:n,style:e.style}),this.setTitle(e.title||""),this.setVisible(e.visible!==!1),this.element.style.font=this.getTextFont()}setStyle(e){super.setStyle(e),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()}setTitle(e){if(this.element.textContent=e,this.set("title",e),this.getMap())try{this.getMap().renderSync()}catch{}}getTitle(){return this.get("title")}setVisible(e){if(this.element.style.display=e?"block":"none",this.getMap())try{this.getMap().renderSync()}catch{}}getVisible(){return this.element.style.display!=="none"}_draw(e){if(this.getVisible()){var n=this.getContext(e);if(n){var r=e.frameState.pixelRatio;n.save(),n.scale(r,r);var i=this.element.getBoundingClientRect(),s=this.getMap().getViewport().getBoundingClientRect(),a=this.getMap().getSize()[0]/s.width;n.translate(Math.round((i.left-s.left)*a),Math.round((i.top-s.top)*a));var l=this.element.clientHeight,o=this.element.clientWidth,d=o/2;n.beginPath(),n.fillStyle=ab(this.getFill().getColor()),n.rect(0,0,o,l),n.fill(),n.closePath(),n.beginPath(),n.fillStyle=ab(this.getTextFill().getColor()),n.strokeStyle=ab(this.getTextStroke().getColor()),n.lineWidth=this.getTextStroke().getWidth(),n.textAlign="center",n.textBaseline="middle",n.font=this.getTextFont(),n.lineJoin="round",n.lineWidth&&n.strokeText(this.getTitle(),d,l/2),n.fillText(this.getTitle(),d,l/2),n.closePath(),n.restore()}}}},H4=function(t,e){var n=t.getView(),r=n.getProjection(),i=n.getCenter(),s=t.getPixelFromCoordinate(i);s[1]+=1;var a=t.getCoordinateFromPixel(s),l=rB(am(i,r,"EPSG:4326"),am(a,r,"EPSG:4326"));return l*=96/.0254,l},Yot=function(t,e,n){if(t&&e){var r=e;if(typeof e=="string"&&(e=e.replace(":","/").split("/"),r=e[1],r||(r=e[0]||""),r=r.replace(/[^\d]/g,""),r=parseInt(r),e[1])){var i=parseInt(e[0]);i&&(r/=i)}if(!r)return;var s=t.getView(),a=s.getProjection(),l=s.getCenter(),o=t.getPixelFromCoordinate(l);o[1]+=1;var d=t.getCoordinateFromPixel(o),p=rB(am(l,a,"EPSG:4326"),am(d,a,"EPSG:4326"));return p*=96/.0254,s.setResolution(s.getResolution()*r/p),r}},Wee=class extends C7{constructor(e){e=e||{};var n=document.createElement("div");n.className="ol-control ol-compassctrl ol-unselectable ol-hidden"+(e.className?" "+e.className:""),n.style.position="absolute",n.style.visibility="hidden";var r=e.style instanceof Za?new No({stroke:e.style}):e.style;e.style||(r=new No({stroke:new Za({width:0})})),super({element:n,style:r}),this.set("rotateVithView",e.rotateWithView!==!1),this.setVisible(e.visible!==!1),this.setImage(e.image||e.src)}setImage(e){if(e instanceof Image)this.img_=e,this.img_.onload=(function(){if(this.getMap())try{this.getMap().renderSync()}catch{}}).bind(this);else if(typeof e=="string")switch(e){case"compact":{this.img_=this.compactCompass_(this.element.clientWidth,this.getStroke().getColor());break}case"default":{this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor());break}default:{this.img_=new Image,this.img_.onload=(function(){if(this.getMap())try{this.getMap().renderSync()}catch{}}).bind(this),this.img_.src=e;break}}else this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor())}compactCompass_(e,n){var r=document.createElement("canvas"),i=r.getContext("2d");e=r.width=r.height=e||150;var s=e/2;return i.translate(s,s),i.fillStyle=n||"#963",i.lineWidth=5,i.lineJoin=i.lineCap="round",i.font="bold "+s*.4+"px sans-serif",i.textBaseline="bottom",i.textAlign="center",i.strokeStyle="#fff",i.globalAlpha=.75,i.strokeText("N",0,-s/2),i.globalAlpha=1,i.fillText("N",0,-s/2),i.beginPath(),i.moveTo(0,s/4),i.lineTo(s/3,s/2),i.lineTo(0,-s/2),i.lineTo(-s/3,s/2),i.lineTo(0,s/4),i.lineWidth=12,i.fillStyle="#fff",i.globalAlpha=.75,i.fill(),i.stroke(),i.globalAlpha=1,i.fillStyle=i.strokeStyle=n||"#963",i.lineWidth=5,i.beginPath(),i.moveTo(0,s/4),i.lineTo(0,-s/2),i.lineTo(s/3,s/2),i.lineTo(0,s/4),i.fill(),i.stroke(),i.beginPath(),i.moveTo(0,s/4),i.lineTo(0,-s/2),i.lineTo(-s/3,s/2),i.lineTo(0,s/4),i.stroke(),r}defaultCompass_(e,n){var r=document.createElement("canvas"),i=r.getContext("2d");e=r.width=r.height=e||150;var s=e/2,a=.22*s;function l(d,p){i.fillStyle=n||"#963",i.beginPath(),i.moveTo(0,0),i.lineTo(d,0),i.lineTo(p,p),i.moveTo(0,0),i.lineTo(-d,0),i.lineTo(-p,-p),i.moveTo(0,0),i.lineTo(0,d),i.lineTo(-p,p),i.moveTo(0,0),i.lineTo(0,-d),i.lineTo(p,-p),i.moveTo(0,0),i.fill(),i.stroke()}function o(d,p){i.globalCompositeOperation="destination-out",i.fillStyle="#fff",i.beginPath(),i.moveTo(0,0),i.lineTo(d,0),i.lineTo(p,-p),i.moveTo(0,0),i.lineTo(-d,0),i.lineTo(-p,p),i.moveTo(0,0),i.lineTo(0,d),i.lineTo(p,p),i.moveTo(0,0),i.lineTo(0,-d),i.lineTo(-p,-p),i.moveTo(0,0),i.fill(),i.globalCompositeOperation="source-over",i.beginPath(),i.moveTo(0,0),i.lineTo(d,0),i.lineTo(p,-p),i.moveTo(0,0),i.lineTo(-d,0),i.lineTo(-p,p),i.moveTo(0,0),i.lineTo(0,d),i.lineTo(p,p),i.moveTo(0,0),i.lineTo(0,-d),i.lineTo(-p,-p),i.moveTo(0,0),i.stroke()}return i.translate(s,s),i.strokeStyle=n||"#963",i.lineWidth=1.5,i.beginPath(),i.arc(0,0,e*.41,0,2*Math.PI),i.arc(0,0,e*.44,0,2*Math.PI),i.stroke(),i.rotate(Math.PI/4),l(s*.9,a*.8),o(s*.9,a*.8),i.rotate(-Math.PI/4),l(s,a),o(s,a),r}getVisible(){return an.getStyle(this.element,"display")==="block"}setVisible(e){e?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible"),this.getMap()&&this.getMap().render()}_draw(e){var n=this.getContext(e);if(!(!n||!this.getVisible())){var r=n.canvas,i,s=[];for(i=0;i<8;i++)s[i]=[Math.cos(Math.PI*i/8),Math.sin(Math.PI*i/8)];var a=e.frameState.pixelRatio;n.save(),n.scale(a,a);var l=this.element.clientWidth,o=this.element.clientHeight,d={left:this.element.offsetLeft,top:this.element.offsetTop},p=this.img_,A=e.frameState.viewState.rotation;if(n.beginPath(),n.translate(d.left+l/2,d.top+o/2),this.get("rotateVithView")&&n.rotate(A),this.getStroke().getWidth()){n.beginPath(),n.strokeStyle=this.getStroke().getColor(),n.lineWidth=this.getStroke().getWidth();var v=Math.max(r.width,r.height);for(i=0;i<8;i++)n.moveTo(-s[i][0]*v,-s[i][1]*v),n.lineTo(s[i][0]*v,s[i][1]*v);n.stroke()}p.width&&n.drawImage(p,-l/2,-o/2,l,o),n.closePath(),n.restore()}}},ew=class extends jl{constructor(e){e=e||{};var n=an.create("DIV",{className:(e.className||"ol-print")+" ol-unselectable ol-control"});super({element:n}),this._lang=e.lang||"en",e.target||an.create("BUTTON",{type:"button",title:e.title||"Print",click:(function(){this.print()}).bind(this),parent:n}),e.openWindow&&this.on("print",function(Y){Y.canvas&&window.open().document.write('<img src="'+Y.canvas.toDataURL()+'"/>')}),e.target=an.create("DIV");var r=this._printCtrl=new hAe(e);r.on(["print","error","printing"],(function(Y){this._printing(Y)}).bind(this)),this._compass=new Wee({src:e.northImage||"compact",visible:!1,className:"olext-print-compass",style:new Za({color:"#333",width:0})});var i=this._printDialog=new uAe({target:e.targetDialog||document.body,closeBox:!0,className:"ol-ext-print-dialog"}),s=i.getContentElement();this._input={};var a=an.create("DIV",{className:"ol-print-param",parent:s});this._pages=[an.create("DIV",{className:"ol-page"})];var l=an.create("DIV",{className:"ol-map",parent:this._pages[0]});an.create("DIV",{html:this._pages[0],className:"ol-print-map",parent:s}),an.create("H2",{html:this.i18n("title"),parent:a});var o=an.create("UL",{parent:a}),d=an.create("LI",{className:"ol-orientation",parent:o});this._input.orientation={list:d};var p=an.create("LABEL",{className:"portrait",parent:d});this._input.orientation.portrait=an.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"portrait",checked:!0,on:{change:(function(Y){this.setOrientation(Y.target.value)}).bind(this)},parent:p}),an.create("SPAN",{html:this.i18n("portrait"),parent:p}),p=an.create("LABEL",{className:"landscape",parent:d}),this._input.orientation.landscape=an.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"landscape",on:{change:(function(Y){this.setOrientation(Y.target.value)}).bind(this)},parent:p}),an.create("SPAN",{html:this.i18n("landscape"),parent:p});var A;d=an.create("LI",{html:an.create("LABEL",{html:this.i18n("size")}),className:"ol-size",parent:o});var v=this._input.size=an.create("SELECT",{on:{change:(function(){this.setSize(v.value||W)}).bind(this)},parent:d});for(A in this.paperSize)an.create("OPTION",{html:A+(this.paperSize[A]?" - "+this.paperSize[A][0]+"x"+this.paperSize[A][1]+" mm":this.i18n("custom")),value:A,parent:v});d=an.create("LI",{html:an.create("LABEL",{html:this.i18n("margin")}),className:"ol-margin",parent:o});var y=this._input.margin=an.create("SELECT",{on:{change:(function(){this.setMargin(y.value)}).bind(this)},parent:d});for(A in this.marginSize)an.create("OPTION",{html:this.i18n(A)+" - "+this.marginSize[A]+" mm",value:this.marginSize[A],parent:y});d=an.create("LI",{html:an.create("LABEL",{html:this.i18n("scale")}),className:"ol-scale",parent:o});var C=this._input.scale=an.create("SELECT",{on:{change:(function(){this.setScale(parseInt(C.value))}).bind(this)},parent:d});Object.keys(this.scales).forEach((function(Y){an.create("OPTION",{html:this.scales[Y],value:Y,parent:C})}).bind(this)),d=an.create("LI",{className:"ol-legend",parent:o});var x=an.createSwitch({html:this.i18n("legend"),checked:!1,on:{change:(function(){q.legend.control.setCanvas(x.checked)}).bind(this)},parent:d});d=an.create("LI",{className:"ol-print-north",parent:o});var M=this._input.north=an.createSwitch({html:this.i18n("north"),checked:"checked",on:{change:(function(){M.checked?this._compass.element.classList.add("ol-print-compass"):this._compass.element.classList.remove("ol-print-compass"),this.getMap().render()}).bind(this)},parent:d});d=an.create("LI",{className:"ol-print-title",parent:o});var I=an.createSwitch({html:this.i18n("mapTitle"),checked:!1,on:{change:(function(Y){q.title.control.setVisible(Y.target.checked)}).bind(this)},parent:d}),P=an.create("INPUT",{type:"text",placeholder:this.i18n("mapTitle"),on:{keydown:function(Y){Y.keyCode===13&&Y.preventDefault()},keyup:function(){q.title.control.setTitle(P.value)},change:(function(){q.title.control.setTitle(P.value)}).bind(this)},parent:d}),F=an.create("DIV",{className:"ol-user-param",parent:a});d=an.create("LI",{className:"ol-saveas",parent:o}),an.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:d});var D=an.create("SELECT",{on:{change:(function(){var Y=D.value;if(D.value="",!(this.formats[Y].clipboard&&this._copyMap(Y))){var ee=typeof this.getSize()=="string"?this.getSize():null,ce=Object.assign({format:ee,size:ee?this.paperSize[ee]:null,orient:this.getOrientation(),margin:this.getMargin()},this.formats[Y]);r.print(ce)}}).bind(this)},parent:d});an.create("OPTION",{html:this.i18n("saveas"),style:{display:"none"},value:"",parent:D}),this.formats.forEach((function(Y,ee){if(Y.pdf){if(e.pdf===!1)return}else if(Y.clipboard){if(e.copy===!1)return}else if(e.save===!1)return;an.create("OPTION",{html:this.i18n(Y.title),value:ee,parent:D})}).bind(this)),D.querySelectorAll("option").length===1&&(D.style.display="none"),d=an.create("LI",{className:"ol-savelegend",parent:o});var V=an.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:d}),H=an.create("SELECT",{on:{change:(function(){var Y=q.legend.control.getLegend().getCanvas(),ee=document.createElement("CANVAS");ee.width=Y.width,ee.height=Y.height;var ce=ee.getContext("2d");if(ce.fillStyle="#fff",ce.fillRect(0,0,ee.width,ee.height),ce.drawImage(Y,0,0),this.formats[H.value].clipboard)ee.toBlob(function(Le){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},Le.type,{value:Le,enumerable:!0}))]),V.classList.add("visible"),setTimeout(function(){V.classList.remove("visible")},1e3)}catch{}},"image/png");else{var se;try{se=ee.toDataURL(this.formats[H.value].imageType,this.formats[H.value].quality);var le=typeof this.getSize()=="string"?this.getSize():"A4",ie=ee.width/96*25.4,pe=ee.height/96*25.4,ue=this.paperSize[le];this.getOrientation()==="landscape"&&(ue=[ue[1],ue[0]]);var me=[(ue[0]-ie)/2,(ue[1]-pe)/2];this.dispatchEvent({type:"print",print:{legend:!0,format:le,orientation:this.getOrientation(),unit:"mm",size:this.paperSize[le],position:me,imageWidth:ie,imageHeight:pe},image:se,imageType:this.formats[H.value].imageType,pdf:this.formats[H.value].pdf,quality:this.formats[H.value].quality,canvas:ee})}catch{}}H.value=""}).bind(this)},parent:d});an.create("OPTION",{html:this.i18n("saveLegend"),style:{display:"none"},value:"",parent:H}),this.formats.forEach((function(Y,ee){an.create("OPTION",{html:this.i18n(Y.title),value:ee,parent:H})}).bind(this));var Q=an.create("DIV",{className:"ol-ext-buttons",parent:a});an.create("BUTTON",{html:this.i18n("printBt"),type:"submit",click:function(Y){Y.preventDefault(),window.print()},parent:Q}),an.create("BUTTON",{html:this.i18n("cancel"),type:"button",click:function(){i.hide()},parent:Q}),an.create("DIV",{html:this.i18n("errorMsg"),className:"ol-error",parent:a});var G,W,te,q={};i.on("show",(function(){this.dispatchEvent({type:"show",userElement:F,dialog:this._printDialog,page:this.getPage()});var Y=this.getMap();Y&&(document.body.classList.add("ol-print-document"),G=Y.getTargetElement(),W=Y.getSize(),typeof this.getSize()=="string"?this.setSize(this.getSize()):this.setSize(W),Y.setTarget(l),te&&Rf(te),te=Y.on("moveend",(function(){this.setScale(H4(Y))}).bind(this)),this.setScale(H4(Y)),q={},this.getMap().getControls().forEach((function(ee){ee instanceof Wot&&(q.legend={control:ee}),ee instanceof qot&&(q.title={control:ee}),ee instanceof Wee&&(q.compass?ee.element.classList.remove("ol-print-compass"):(this._input.north.checked?ee.element.classList.add("ol-print-compass"):ee.element.classList.remove("ol-print-compass"),this._compass=ee,q.compass={control:ee}))}).bind(this)),q.title?(I.checked=q.title.isVisible=q.title.control.getVisible(),P.value=q.title.control.getTitle(),I.parentNode.parentNode.classList.remove("hidden")):I.parentNode.parentNode.classList.add("hidden"),q.legend?(q.legend.ison=q.legend.control.onCanvas(),q.legend.collapsed=q.legend.control.isCollapsed(),q.legend.control.collapse(!1),H.parentNode.classList.remove("hidden"),x.parentNode.parentNode.classList.remove("hidden"),x.checked=!q.legend.collapsed,q.legend.control.setCanvas(!q.legend.collapsed)):(H.parentNode.classList.add("hidden"),x.parentNode.parentNode.classList.add("hidden")))}).bind(this)),i.on("hide",(function(){document.body.classList.remove("ol-print-document"),G&&(this.getMap().setTarget(G),G=null,te&&Rf(te),q.title&&q.title.control.setVisible(q.title.isVisible),q.legend&&(q.legend.control.setCanvas(q.legend.ison),q.legend.control.collapse(q.legend.collapsed)),this.dispatchEvent({type:"hide"}))}).bind(this)),window.addEventListener("resize",(function(){this.setSize()}).bind(this)),e.saveAs&&this.on("print",function(Y){Y.pdf||Y.canvas.toBlob(function(ee){var ce=(Y.print.legend?"legend.":"map.")+Y.imageType.replace("image/","");e.saveAs(ee,ce)},Y.imageType,Y.quality)}),e.jsPDF&&this.on("print",function(Y){if(Y.pdf){var ee=new e.jsPDF({orientation:Y.print.orientation,unit:Y.print.unit,format:Y.print.size});ee.addImage(Y.image,"JPEG",Y.print.position[0],Y.print.position[0],Y.print.imageWidth,Y.print.imageHeight),ee.save(Y.print.legend?"legend.pdf":"map.pdf")}})}static addLang(e,n){ew.prototype._labels[e]=n}isOpen(){return this._printDialog.isOpen()}i18n(e){var n=this._labels.en[e]||e;return this._labels[this._lang]&&this._labels[this._lang][e]&&(n=this._labels[this._lang][e]),n}getOrientation(){return this._orientation||"portrait"}setOrientation(e){this._orientation=e==="landscape"?"landscape":"portrait",this._printDialog.element.dataset.orientation=this._orientation,this._input.orientation[this._orientation].checked=!0,this.setSize()}getMargin(){return this._margin||0}setMargin(e){this._margin=e,this._input.margin.value=e,this.setSize()}getSize(){return this._size}setSize(e){if(this._printDialog.getContentElement().dataset.status="",e?this._size=e:e=this._size,!!e){if(typeof e=="string"){for(var n in this.paperSize)n&&new RegExp(n,"i").test(e)&&(e=n);this.paperSize[e]||(e=this._size="A4"),this._input.size.value=e,e=[Math.trunc(this.paperSize[e][0]*96/25.4),Math.trunc(this.paperSize[e][1]*96/25.4)],this.getOrientation()==="landscape"&&(e=[e[1],e[0]]),this.getPage().classList.remove("margin")}else this._input.size.value="",this.getPage().classList.add("margin");var r=this.getPage(),i=r.parentNode.getBoundingClientRect(),s=(i.width-40)/e[0],a=(i.height-40)/e[1],l=Math.min(s,a,1);r.style.width=e[0]+"px",r.style.height=e[1]+"px",r.style["-webkit-transform"]=r.style.transform="translate(-50%,-50%) scale("+l+")";var o=Math.round(5/l);r.style["-webkit-box-shadow"]=r.style["box-shadow"]=o+"px "+o+"px "+o+"px rgba(0,0,0,.6)",r.style.padding=this.getMargin()*96/25.4+"px",this.getMap()&&this.getMap().updateSize(),this.dispatchEvent({type:"dialog:refresh"})}}_printing(e){this._printDialog.getContentElement().dataset.status=e.type,e.clipboard||this.dispatchEvent(e)}_copyMap(e){var n=this._printDialog.element.querySelector(".ol-clipboard-copy");return this._printCtrl.copyMap(this.formats[e],function(r){r&&(n.classList.add("visible"),setTimeout(function(){n.classList.remove("visible")},1e3))}),!0}getContentElement(){return this._printDialog.getContentElement()}getUserElement(){return this._printDialog.getContentElement().querySelector(".ol-user-param")}getPage(){return this._pages[0]}setMap(e){this.getMap()&&(this.getMap().removeControl(this._compass),this.getMap().removeControl(this._printCtrl),this.getMap().removeControl(this._printDialog)),super.setMap(e),this.getMap()&&(this.getMap().addControl(this._compass),this.getMap().addControl(this._printCtrl),this.getMap().addControl(this._printDialog))}setScale(e){Yot(this.getMap(),e),this._input.scale.value=" "+Math.round(e/100)*100}getScale(){return H4(this.getMap())}print(e){e=e||{},e.size&&this.setSize(e.size),e.scale&&this.setScale(e.scale),e.orientation&&this.setOrientation(e.orientation),e.margin&&this.setMargin(e.margin),this._printDialog.show()}getPrintControl(){return this._printCtrl}};ew.prototype._labels={en:{title:"Print",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",size:"Page size",custom:"screen size",margin:"Margin",scale:"Scale",legend:"Legend",north:"North arrow",mapTitle:"Map title",saveas:"Save as...",saveLegend:"Save legend...",copied:" Copied to clipboard",errorMsg:"Can't save map canvas...",printBt:"Print...",clipboardFormat:"copy to clipboard...",jpegFormat:"save as jpeg",pngFormat:"save as png",pdfFormat:"save as pdf",none:"none",small:"small",large:"large",cancel:"cancel"},fr:{title:"Imprimer",orientation:"Orientation",portrait:"Portrait",landscape:"Paysage",size:"Taille du papier",custom:"taille cran",margin:"Marges",scale:"Echelle",legend:"Lgende",north:"Flche du nord",mapTitle:"Titre de la carte",saveas:"Enregistrer sous...",saveLegend:"Enregistrer la lgende...",copied:" Carte copie",errorMsg:"Impossible d'enregistrer la carte",printBt:"Imprimer",clipboardFormat:"copier dans le presse-papier...",jpegFormat:"enregistrer un jpeg",pngFormat:"enregistrer un png",pdfFormat:"enregistrer un pdf",none:"aucune",small:"petites",large:"larges",cancel:"annuler"},de:{title:"Drucken",orientation:"Ausrichtung",portrait:"Hochformat",landscape:"Querformat",size:"Papierformat",custom:"Bildschirmgre",margin:"Rand",scale:"Mastab",legend:"Legende",north:"Nordpfeil",mapTitle:"Kartentitel",saveas:"Speichern als...",saveLegend:"Legende speichern...",copied:" In die Zwischenablage kopiert",errorMsg:"Kann Karte nicht speichern...",printBt:"Drucken...",clipboardFormat:"in die Zwischenablage kopieren...",jpegFormat:"speichern als jpeg",pngFormat:"speichern als png",pdfFormat:"speichern als pdf",none:"kein",small:"klein",large:"gro",cancel:"abbrechen"},zh:{title:"",orientation:"",portrait:"",landscape:"",size:"",custom:"",margin:"",scale:"",legend:"",north:"",mapTitle:"",saveas:"...",saveLegend:"...",copied:" ",errorMsg:"...",printBt:"...",cancel:""}};ew.prototype.paperSize={"":null,A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],"US Letter":[215.9,279.4],A5:[148,210],B4:[257,364],B5:[182,257]};ew.prototype.marginSize={none:0,small:5,large:10};ew.prototype.formats=[{title:"clipboardFormat",imageType:"image/png",clipboard:!0},{title:"jpegFormat",imageType:"image/jpeg",quality:.8},{title:"pngFormat",imageType:"image/png",quality:.8},{title:"pdfFormat",imageType:"image/jpeg",pdf:!0}];ew.prototype.scales={" 5000":"1/5.000"," 10000":"1/10.000"," 25000":"1/25.000"," 50000":"1/50.000"," 100000":"1/100.000"," 250000":"1/250.000"," 1000000":"1/1.000.000"};var W1=function(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},qS=function(t,e){return t[0]==e[0]&&t[1]==e[1]},dAe;(function(){function t(n,r){var i;for(let s=n.length-1;s>0;s--)(n[s][0]>r&&n[s-1][0]<r||n[s][0]<r&&n[s-1][0]>r)&&(i=[r,(r-n[s][0])/(n[s-1][0]-n[s][0])*(n[s-1][1]-n[s][1])+n[s][1]],n.splice(s,0,i))}function e(n,r){var i;for(let s=n.length-1;s>0;s--)(n[s][1]>r&&n[s-1][1]<r||n[s][1]<r&&n[s-1][1]>r)&&(i=[(r-n[s][1])/(n[s-1][1]-n[s][1])*(n[s-1][0]-n[s][0])+n[s][0],r],n.splice(s,0,i))}dAe=function(n,r){var i=r.getType()==="Polygon";if(!i&&r.getType()!=="MultiPolygon")return null;var s=r.getCoordinates();return i&&(s=[s]),s.forEach(function(a){a.forEach(function(l){t(l,n[0]),t(l,n[2]),e(l,n[1]),e(l,n[3])})}),s.forEach(function(a){a.forEach(function(l){l.forEach(function(o){o[0]<n[0]?o[0]=n[0]:o[0]>n[2]&&(o[0]=n[2]),o[1]<n[1]?o[1]=n[1]:o[1]>n[3]&&(o[1]=n[3])})})}),i?new La(s[0]):new Dc(s)}})();var oN=function(t,e,n,r){var i=[];r!==!1&&i.push(t);var s=W1(t,e);if(s){var a=Math.round(s/n);if(a>1)for(var l=(e[0]-t[0])/a,o=(e[1]-t[1])/a,d=1;d<a;d++)i.push([t[0]+l*d,t[1]+o*d])}return i.push(e),i};ko.prototype.sampleAt=function(t){for(var e=this.getCoordinates(),n=[],r=1;r<e.length;r++)n=n.concat(oN(e[r-1],e[r],t,r===1));return new ko(n)};kc.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach(function(r){for(var i=[],s=1;s<r.length;s++)i=i.concat(oN(r[s-1],r[s],t,s===1));n.push(i)}),new kc(n)};La.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach(function(r){for(var i=[],s=1;s<r.length;s++)i=i.concat(oN(r[s-1],r[s],t,s===1));n.push(i)}),new La(n)};Dc.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach(function(r){var i=[];n.push(i),r.forEach(function(s){for(var a=[],l=1;l<s.length;l++)a=a.concat(oN(s[l-1],s[l],t,l===1));i.push(a)})}),new Dc(n)};Jb.prototype.intersection=function(t,e){if(t.sampleAt){var n=Oc(this.getCenter().concat(this.getCenter()),this.getRadius());t=dAe(n,t),t=t.simplify(e);var r=this.getCenter(),i=this.getRadius(),s=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":s=[s];case"MultiPolygon":{var a=!1,l=[];return s.forEach(function(o){var d=[];l.push(d),o.forEach(function(p){var A=[];d.push(A),p.forEach(function(v){var y=W1(r,v);y>i?(a=!0,A.push([r[0]+i/y*(v[0]-r[0]),r[1]+i/y*(v[1]-r[1])])):A.push(v)})})}),a?t.getType()==="Polygon"?new La(l[0]):new Dc(l):t}}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());return t};var E7=class extends jl{constructor(e){e=e||{};var n=document.createElement("div");super({element:n,target:e.target});var r=this;if(this.info=e.info||E7.prototype.info,e.target)n.classList.add(e.className||"ol-profile");else{n.className=((e.className||"ol-profile")+" ol-unselectable ol-control ol-collapsed").trim(),this.button=document.createElement("button"),this.button.title=e.title||"Profile",this.button.setAttribute("type","button");var i=function(H){r.toggle(),H.preventDefault()};this.button.addEventListener("click",i),this.button.addEventListener("touchstart",i),n.appendChild(this.button),an.create("I",{parent:this.button})}e.style instanceof No?this._style=e.style:this._style=new No({text:new Pf,stroke:new Za({width:1.5,color:"#369"})}),this._style.getText()||this._style.setText(new Pf),e.selectStyle instanceof No?this._selectStyle=e.selectStyle:this._selectStyle=new No({fill:new Hl({color:"#369"})});var s=document.createElement("div");s.classList.add("ol-inner"),n.appendChild(s);var a=document.createElement("div");a.style.position="relative",s.appendChild(a);var l=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(e.width||300)*l,this.canvas_.height=(e.height||150)*l;var o={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(o).forEach(function(H){H in r.canvas_.style&&(r.canvas_.style[H]=o[H])});var d=document.createElement("div");a.appendChild(d),d.style.width=this.canvas_.width/l+"px",d.style.height=this.canvas_.height/l+"px",d.appendChild(this.canvas_),d.addEventListener("pointerdown",this.onMove.bind(this)),document.addEventListener("pointerup",this.onMove.bind(this)),d.addEventListener("mousemove",this.onMove.bind(this)),d.addEventListener("touchmove",this.onMove.bind(this)),this.set("selectable",e.selectable),this.margin_={top:10*l,left:45*l,bottom:30*l,right:10*l},this.info.ytitle||(this.margin_.left-=20*l),this.info.xtitle||(this.margin_.bottom-=20*l),this.bar_=document.createElement("div"),this.bar_.classList.add("ol-profilebar"),this.bar_.style.top=this.margin_.top/l+"px",this.bar_.style.height=(this.canvas_.height-this.margin_.top-this.margin_.bottom)/l+"px",a.appendChild(this.bar_),this.cursor_=document.createElement("div"),this.cursor_.classList.add("ol-profilecursor"),a.appendChild(this.cursor_),this.popup_=document.createElement("div"),this.popup_.classList.add("ol-profilepopup"),this.cursor_.appendChild(this.popup_);var p=document.createElement("table");p.cellPadding="0",p.cellSpacing="0",p.style.clientWidth=this.canvas_.width/l+"px",a.appendChild(p);var A=document.createElement("tr");A.classList.add("track-info"),p.appendChild(A);var v=document.createElement("td");v.innerHTML=(this.info.zmin||"Zmin")+': <span class="zmin">',A.appendChild(v);var y=document.createElement("td");y.innerHTML=(this.info.zmax||"Zmax")+': <span class="zmax">',A.appendChild(y);var C=document.createElement("td");C.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',A.appendChild(C);var x=document.createElement("td");x.innerHTML=(this.info.time||"Time")+': <span class="time">',A.appendChild(x);var M=document.createElement("tr");M.classList.add("point-info"),p.appendChild(M);var I=document.createElement("td");I.innerHTML=(this.info.altitude||"Altitude")+': <span class="z">',M.appendChild(I);var P=document.createElement("td");P.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',M.appendChild(P);var F=document.createElement("td");if(F.innerHTML=(this.info.time||"Time")+': <span class="time">',M.appendChild(F),this.tab_=[],e.feature&&this.setGeometry(e.feature),e.zoomable){this.set("selectable",!0);var D,V;this.on("change:geometry",function(){V=null}),this.on("dragstart",function(H){D=H.index}),this.on("dragend",(function(H){if(Math.abs(D-H.index)>10){if(!V)var Q=an.create("BUTTON",{parent:n,className:"ol-zoom-out",click:(function(te){te.stopPropagation(),te.preventDefault(),V&&(this.dispatchEvent({type:"zoom"}),this.setGeometry(V,this._geometry[1])),n.removeChild(Q)}).bind(this)});var G=V||this._geometry[0],W=new ko(this.getSelection(D,H.index));this.setGeometry(W,this._geometry[1]),V=G,this.dispatchEvent({type:"zoom",geometry:W,start:D,end:H.index})}}).bind(this))}}popup(e){this.popup_.innerHTML=e}_drawAt(e,n){e?(this.cursor_.style.left=n+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+e[1]*this.scale_[1]+this.dy_)/this.ratio+"px",this.cursor_.style.display="block",this.bar_.parentElement.classList.add("over"),this.bar_.style.left=n+"px",this.bar_.style.display="block",this.element.querySelector(".point-info .z").textContent=e[1]+this.info.altitudeUnits,this.element.querySelector(".point-info .dist").textContent=(e[0]/1e3).toFixed(1)+this.info.distanceUnitsKM,this.element.querySelector(".point-info .time").textContent=e[2],n>this.canvas_.width/this.ratio/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left")):(this.cursor_.style.display="none",this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"))}showAt(e){var n,r,i,s=1/0;if(typeof e>"u")this.bar_.parentElement.classList.contains("over")&&this._drawAt();else if(e.length)for(n=1;r=this.tab_[n];n++){var a=W1(r[3],e);a<s&&(i=r,s=a)}else for(n=0;(r=this.tab_[n])&&(i=r,!(r[0]>=e));n++);if(i){var l=(i[0]*this.scale_[0]+this.margin_.left)/this.ratio;return this._drawAt(i,l),i[3]}return null}showAtTime(e,n){var r,i,s;if(e instanceof Date?e=e.getTime()/1e3:n&&(e+=this.tab_[0][3][3]),typeof e>"u")this.bar_.parentElement.classList.contains("over")&&this._drawAt();else for(r=0;(i=this.tab_[r])&&(s=i,!(i[3][3]>=e));r++);if(s){var a=(s[0]*this.scale_[0]+this.margin_.left)/this.ratio;return this._drawAt(s,a),s[3]}return null}pointAtTime(e){var n,r;for(n=1;r=this.tab_[n];n++){var i=r[3][3];if(i>=e){var s=this.tab_[n-1][3];return(s[3]+i)/2<e?s:r}}return this.tab_[this.tab_.length-1][3]}onMove(e){if(this.tab_.length){var n=this.canvas_.getBoundingClientRect(),r={top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft},i=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX,s=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY,a=i-r.left,l=s-r.top,o=this.ratio;if(a>this.margin_.left/o-20&&a<(this.canvas_.width-this.margin_.right)/o+8&&l>this.margin_.top/o&&l<(this.canvas_.height-this.margin_.bottom)/o){var d=(a*o-this.margin_.left)/this.scale_[0],p=this.tab_[0],A,v;for(A=1;v=this.tab_[A];A++)if(v[0]>=d){d<(v[0]+p[0])/2&&(A=0,v=p);break}switch(v||(v=this.tab_[this.tab_.length-1]),a=Math.max(this.margin_.left/o,Math.min(a,(this.canvas_.width-this.margin_.right)/o)),this._drawAt(v,a),this.dispatchEvent({type:"over",click:e.type==="click",index:A,coord:v[3],time:v[2],distance:v[0]}),e.type){case"pointerdown":{this._dragging={event:{type:"dragstart",index:A,coord:v[3],time:v[2],distance:v[0]},pageX:i,pageY:s};break}case"pointerup":{this._dragging&&this._dragging.pageX?Math.abs(this._dragging.pageX-i)<3&&Math.abs(this._dragging.pageY-s)<3&&(this.dispatchEvent({type:"click",index:A,coord:v[3],time:v[2],distance:v[0]}),this.refresh()):this.dispatchEvent({type:"dragend",index:A,coord:v[3],time:v[2],distance:v[0]}),this._dragging=!1;break}default:{if(this._dragging)if(this._dragging.pageX)(Math.abs(this._dragging.pageX-i)>3||Math.abs(this._dragging.pageY-s)>3)&&(this._dragging.pageX=this._dragging.pageY=!1,this.dispatchEvent(this._dragging.event));else{this.dispatchEvent({type:"dragging",index:A,coord:v[3],time:v[2],distance:v[0]});var y=Math.min(this._dragging.event.index,A),C=Math.max(this._dragging.event.index,A);this.refresh(),this.get("selectable")&&this._drawGraph(this.tab_.slice(y,C),this._selectStyle)}break}}}else this.bar_.parentElement.classList.contains("over")&&(this._drawAt(),this.dispatchEvent({type:"out"})),e.type==="pointerup"&&this._dragging&&(this.dispatchEvent({type:"dragcancel"}),this._dragging=!1)}}show(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})}hide(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})}toggle(){this.element.classList.toggle("ol-collapsed");var e=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!e})}isShown(){return!this.element.classList.contains("ol-collapsed")}getSelection(e,n){for(var r=[],i=Math.max(Math.min(e,n),0),s=Math.min(Math.max(e,n),this.tab_.length-1),a=i;a<=s;a++)r.push(this.tab_[a][3]);return r}_drawGraph(e,n){if(e.length){var r=this.canvas_.getContext("2d"),i=this.scale_[0],s=this.scale_[1],a=this.dy_,l=this.ratio,o,d;for(r.beginPath(),o=0;d=e[o];o++)o==0?r.moveTo(d[0]*i,d[1]*s+a):r.lineTo(d[0]*i,d[1]*s+a);n.getStroke()&&(r.strokeStyle=n.getStroke().getColor()||"#000",r.lineWidth=n.getStroke().getWidth()*l,r.setLineDash([]),r.stroke()),n.getFill()&&(r.fillStyle=n.getFill().getColor()||"#000",r.Style=n.getFill().getColor()||"#000",r.lineTo(e[e.length-1][0]*i,0),r.lineTo(e[0][0]*i,0),r.fill())}}setGeometry(e,n){if(n||(n={}),e instanceof Ys&&(e=e.getGeometry()),this._geometry=[e,n],!/Z/.test(e.getLayout()))return;/M/.test(e.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var r=e.getCoordinates();switch(e.getType()){case"LineString":break;case"MultiLineString":r=r[0];break;default:return}var i=n.projection||this.getMap().getView().getProjection();function s(x,M){return rB(am(x,i,"EPSG:4326"),am(M,i,"EPSG:4326"))}function a(x,M){if(!x||!M)return"-";var I=(M-x)/60,P=Math.trunc(I/60),F=Math.trunc(I-P*60);return P+"h"+(F<10?"0":"")+F+"mn"}var l=1/0,o=-1/0,d,p,A,v,y,C=this.tab_=[];for(d=0,p;p=r[d];d++)v=p[2],v<l&&(l=v),v>o&&(o=v),d==0?A=0:A+=s(r[d-1],p),y=a(r[0][3],p[3]),C.push([A,v,y,p]);this._z=[l,o],this.set("graduation",n.graduation||100),this.set("zmin",n.zmin),this.set("zmax",n.zmax),this.set("amplitude",n.amplitude),this.set("unit",n.unit),this.set("zunit",n.zunit),this.set("zDigits",n.zDigits),this.set("zMaxChars",n.zMaxChars),this.dispatchEvent({type:"change:geometry",geometry:e}),this.refresh()}refresh(){var e=this.canvas_,n=e.getContext("2d"),r=e.width,i=e.height;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r,i);var s=this._z[0],a=this._z[1],l=this.tab_,o=l[l.length-1][0],d=l[l.length-1][2],p;if(!o){console.error("[ol/control/Profile] no data...",l);return}n.setTransform(1,0,0,1,this.margin_.left,i-this.margin_.bottom);var A=this.ratio;r-=this.margin_.right+this.margin_.left,i-=this.margin_.top+this.margin_.bottom,n.strokeStyle=this._style.getText().getFill().getColor()||"#000",n.lineWidth=.5*A,n.beginPath(),n.moveTo(0,0),n.lineTo(0,-i),n.moveTo(0,0),n.lineTo(r,0),n.stroke(),this.element.querySelector(".track-info .zmin").textContent=s.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .zmax").textContent=a.toFixed(2)+this.info.altitudeUnits,o>1e3?this.element.querySelector(".track-info .dist").textContent=(o/1e3).toFixed(1)+this.info.distanceUnitsKM:this.element.querySelector(".track-info .dist").textContent=o.toFixed(1)+this.info.distanceUnitsM,this.element.querySelector(".track-info .time").textContent=d;for(var v=this.get("graduation");;){a=Math.ceil(a/v)*v,s=Math.floor(s/v)*v;var y=(a-s)/v;if(i/y<15*A)v*=2;else break}typeof this.get("zmin")=="number"&&s>this.get("zmin")&&(s=this.get("zmin")),typeof this.get("zmax")=="number"&&a<this.get("zmax")&&(a=this.get("zmax"));var C=this.get("amplitude");C&&(a=Math.max(s+C,a));var x=r/o,M=-i/(a-s),I=this.dy_=-s*M;this.scale_=[x,M],this._drawGraph(l,this._style),n.textAlign="right",n.textBaseline="top",n.fillStyle=this._style.getText().getFill().getColor()||"#000",n.beginPath();var P=this.get("zDigits")||0,F=null;if(typeof this.get("zMaxChars")=="number"){var D;if(this.get("zunit")!="km"?D=Math.max(s.toFixed(P).length,a.toFixed(P).length):D=Math.max((s/1e3).toFixed(1).length,(a/1e3).toFixed(1).length),this.get("zMaxChars")<D){F=Math.floor(Math.log10(Math.max(Math.abs(s),Math.abs(a),Number.MIN_VALUE))),n.font="bold "+9*A+"px arial",n.fillText(F.toString(),-8*A,8*A);var V=n.measureText(F.toString()),H=V.width,Q=V.actualBoundingBoxAscent+V.actualBoundingBoxDescent;n.font="bold "+12*A+"px arial",n.fillText("10",-8*A-H,8*A+.5*Q)}}for(n.font=10*A+"px arial",n.textBaseline="middle",p=s;p<=a;p+=v){if(F!==null){var G=p/Math.pow(10,F);this.get("zunit")=="km"&&(G/=1e3);var W=this.get("zMaxChars")-Math.floor(Math.log10(Math.max(Math.abs(G),1))+1)-1;G<0&&(W-=1),this.get("zunit")!="km",n.fillText(G.toFixed(Math.max(W,0)),-4*A,p*M+I)}else this.get("zunit")!="km"?n.fillText(p.toFixed(P),-4*A,p*M+I):n.fillText((p/1e3).toFixed(1),-4*A,p*M+I);n.moveTo(-2*A,p*M+I),p!=0?n.lineTo(o*x,p*M+I):n.lineTo(0,p*M+I)}n.textAlign="center",n.textBaseline="top",n.setLineDash([A,3*A]);var te=this.get("unit")||"km",q;for(o>1e3?(q=Math.round(o/1e3)*100,q>1e3&&(q=Math.ceil(q/1e3)*1e3)):(te="m",o>100?q=Math.round(o/100)*10:o>10?q=Math.round(o/10):o>1?q=Math.round(o)/10:q=o),p=0;p<=o;p+=q){var Y=te=="m"?p:p/1e3;n.fillText(Math.round(Y*10)/10,p*x,4*A),n.moveTo(p*x,2*A),n.lineTo(p*x,0)}n.font=12*A+"px arial",n.fillText(this.info.xtitle.replace("(km)","("+te+")"),r/2,18*A),n.save(),n.rotate(-Math.PI/2),n.fillText(this.info.ytitle,i/2,-this.margin_.left),n.restore(),n.stroke()}getImage(e,n){return e==="canvas"?this.canvas_:this.canvas_.toDataURL(e,n)}};E7.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"};var fAe=class extends jl{constructor(e){e=e||{};var n=(e.className||"")+" ol-search"+(e.target?"":" ol-unselectable ol-control"),r=an.create("DIV",{className:n});super({element:r,target:e.target});var i=this;if(e.typing==null&&(e.typing=300),this._classname=e.className||"search",e.collapsed!==!1&&r.classList.add("ol-collapsed"),e.target||(this.button=document.createElement("BUTTON"),this.button.setAttribute("type","button"),this.button.setAttribute("title",e.title||e.label||"Search"),this.button.addEventListener("click",function(){if(r.classList.toggle("ol-collapsed"),!r.classList.contains("ol-collapsed")){r.querySelector("input.search").focus();for(var v=r.querySelectorAll("li"),y=0;y<v.length;y++)v[y].classList.remove("select");o.value||i.drawList_()}}),r.appendChild(this.button)),e.inputLabel){var s=document.createElement("LABEL");s.innerText=e.inputLabel,r.appendChild(s)}var a,l="",o=this._input=document.createElement("INPUT");o.setAttribute("type","search"),o.setAttribute("class","search"),o.setAttribute("autocomplete","off"),o.setAttribute("placeholder",e.placeholder||"Search..."),o.addEventListener("change",function(v){i.dispatchEvent({type:"change:input",input:v,value:o.value})});var d=function(v){var y=r.querySelector("ul.autocomplete li.select"),C=o.value;if(v.key=="ArrowDown"||v.key=="ArrowUp"||v.key=="Down"||v.key=="Up")y?(y.classList.remove("select"),y=/Down/.test(v.key)?y.nextElementSibling:y.previousElementSibling,y&&y.classList.add("select")):r.querySelector("ul.autocomplete li").classList.add("select");else if(v.type=="input"&&!C)setTimeout(function(){i.drawList_()},200);else if(y&&(v.type=="search"||v.key=="Enter"))r.classList.contains("ol-control")&&o.blur(),y.classList.remove("select"),l=C,i._handleSelect(i._list[y.getAttribute("data-search")]);else if(v.type=="search"||v.key=="Enter"||l!=C&&e.typing>=0)if(l=C,l){a&&clearTimeout(a);var x=i.get("minLength");a=setTimeout(function(){if(l.length>=x){var M=i.autocomplete(l,function(I){i.drawList_(I)});M&&i.drawList_(M)}else i.drawList_()},e.typing)}else i.drawList_();else y=r.querySelector("ul.autocomplete li"),y&&y.classList.remove("select")};if(o.addEventListener("keyup",d),o.addEventListener("search",d),o.addEventListener("cut",d),o.addEventListener("paste",d),o.addEventListener("input",d),e.noCollapse||(o.addEventListener("blur",(function(){setTimeout((function(){o!==document.activeElement&&(r.classList.add("ol-collapsed"),this.set("reverse",!1),r.classList.remove("ol-revers"))}).bind(this),200)}).bind(this)),o.addEventListener("focus",(function(){this.get("reverse")||(r.classList.remove("ol-collapsed"),r.classList.remove("ol-revers"))}).bind(this))),r.appendChild(o),e.reverse){var p=an.create("BUTTON",{type:"button",class:"ol-revers",title:e.reverseTitle||"click on the map",click:(function(){this.get("reverse")?this.set("reverse",!1):(this.set("reverse",!this.get("reverse")),o.focus(),r.classList.add("ol-revers"))}).bind(this)});r.appendChild(p)}var A=document.createElement("UL");A.classList.add("autocomplete"),r.appendChild(A),typeof e.getTitle=="function"&&(this.getTitle=e.getTitle),typeof e.autocomplete=="function"&&(this.autocomplete=e.autocomplete),this.set("copy",e.copy),this.set("minLength",e.minLength||1),this.set("maxItems",e.maxItems||10),this.set("maxHistory",e.maxHistory||e.maxItems||10),e.onselect&&this.on("select",e.onselect),e.centerOnSelect&&this.on("select",(function(v){var y=this.getMap();y&&y.getView().setCenter(v.coordinate)}).bind(this)),e.zoomOnSelect&&this.on("select",(function(v){var y=this.getMap();y&&(y.getView().setCenter(v.coordinate),y.getView().getZoom()<e.zoomOnSelect&&y.getView().setZoom(e.zoomOnSelect))}).bind(this)),this.restoreHistory(),this.drawList_()}setMap(e){this._listener&&Rf(this._listener),this._listener=null,super.setMap(e),e&&(this._listener=e.on("click",this._handleClick.bind(this)))}collapse(e){e===!1?this.element.classList.remove("ol-collapsed"):this.element.classList.add("ol-collapsed")}getInputField(){return this._input}getTitle(e){return e.name||"No title"}_getTitleTxt(e){return an.create("DIV",{html:this.getTitle(e)}).innerText}search(){var e=this.element.querySelector("input.search");this._triggerCustomEvent("search",e)}_handleClick(e){this.get("reverse")&&(document.activeElement.blur(),this.reverseGeocode(e.coordinate))}reverseGeocode(){}_triggerCustomEvent(e,n){an.dispatchEvent(e,n)}setInput(e,n){var r=this.element.querySelector("input.search");r.value=e,n&&this._triggerCustomEvent("keyup",r)}select(e,n,r,i){var s={type:"select",search:e,reverse:!!n,coordinate:r};if(i)for(var a in i)s[a]=i[a];this.dispatchEvent(s)}_handleSelect(e,n,r){if(e){var i=this.get("history"),s;try{var a=JSON.stringify(e);for(s=i.length-1;s>=0;s--)(!i[s]||JSON.stringify(i[s])===a)&&i.splice(s,1)}catch{for(s=i.length-1;s>=0;s--)i[s]===e&&i.splice(s,1)}i.unshift(e);for(var l=Math.max(0,this.get("maxHistory")||10)||0;i.length>l;)i.pop();this.saveHistory(),this.select(e,n,null,r),n&&(this.setInput(this._getTitleTxt(e)),this.drawList_(),setTimeout((function(){this.collapse(!1)}).bind(this),300))}}saveHistory(){try{this.get("maxHistory")>=0?localStorage["ol@search-"+this._classname]=JSON.stringify(this.get("history")):localStorage.removeItem("ol@search-"+this._classname)}catch{console.warn("Failed to access localStorage...")}}restoreHistory(){if(this._history[this._classname])this.set("history",this._history[this._classname]);else try{this._history[this._classname]=JSON.parse(localStorage["ol@search-"+this._classname]),this.set("history",this._history[this._classname])}catch{this.set("history",[])}}clearHistory(){this.set("history",[]),this.saveHistory(),this.drawList_()}getHistory(){return this.get("history")}autocomplete(e,n){return n([]),!1}drawList_(e){var n=this,r=this.element.querySelector("ul.autocomplete");if(r.innerHTML="",this._list=[],e)r.setAttribute("class","autocomplete");else{var i=this.element.querySelector("input.search"),s=i.value;if(!s)e=this.get("history");else return;r.setAttribute("class","autocomplete history")}for(var a,l=Math.min(n.get("maxItems"),e.length),o=0;o<l;o++)if(e[o]&&(!o||!n.equalFeatures(e[o],e[o-1]))){a=document.createElement("LI"),a.setAttribute("data-search",this._list.length),this._list.push(e[o]),a.addEventListener("click",function(p){n._handleSelect(n._list[p.currentTarget.getAttribute("data-search")])});var d=n.getTitle(e[o]);d instanceof Element?a.appendChild(d):a.innerHTML=d,r.appendChild(a)}l&&this.get("copy")&&(a=document.createElement("LI"),a.classList.add("copy"),a.innerHTML=this.get("copy"),r.appendChild(a))}equalFeatures(){return!1}};fAe.prototype._history={};var Xot=class extends jl{constructor(e){e=e||{};var n=document.createElement("div");super({element:n}),n.className=(e.className||"ol-swipe")+" ol-unselectable ol-control";var r=document.createElement("button");n.appendChild(r),n.addEventListener("mousedown",this.move.bind(this)),n.addEventListener("touchstart",this.move.bind(this)),this.precomposeRight_=this.precomposeRight.bind(this),this.precomposeLeft_=this.precomposeLeft.bind(this),this.postcompose_=this.postcompose.bind(this),this.layers=[],e.layers&&this.addLayer(e.layers,!1),e.rightLayers&&this.addLayer(e.rightLayers,!0),this.on("propertychange",(function(i){if(this.getMap())try{this.getMap().renderSync()}catch{}this.get("orientation")==="horizontal"?(this.element.style.top=this.get("position")*100+"%",this.element.style.left=""):(this.get("orientation")!=="vertical"&&this.set("orientation","vertical"),this.element.style.left=this.get("position")*100+"%",this.element.style.top=""),i.key==="orientation"&&(this.element.classList.remove("horizontal","vertical"),this.element.classList.add(this.get("orientation"))),this.isMoving||this.layers.forEach(function(s){s.layer.getImageRatio&&s.layer.changed()})}).bind(this)),this.set("position",e.position||.5),this.set("orientation",e.orientation||"vertical")}setMap(e){var n,r;if(this.getMap()){for(n=0;n<this.layers.length;n++)r=this.layers[n],r.right?r.layer.un(["precompose","prerender"],this.precomposeRight_):r.layer.un(["precompose","prerender"],this.precomposeLeft_),r.layer.un(["postcompose","postrender"],this.postcompose_);try{this.getMap().renderSync()}catch{}}if(super.setMap(e),e){for(this._listener=[],n=0;n<this.layers.length;n++)r=this.layers[n],r.right?r.layer.on(["precompose","prerender"],this.precomposeRight_):r.layer.on(["precompose","prerender"],this.precomposeLeft_),r.layer.on(["postcompose","postrender"],this.postcompose_);try{e.renderSync()}catch{}}}isLayer_(e){for(var n=0;n<this.layers.length;n++)if(this.layers[n].layer===e)return n;return-1}addLayer(e,n){e instanceof Array||(e=[e]);for(var r=0;r<e.length;r++){var i=e[r];if(this.isLayer_(i)<0&&(this.layers.push({layer:i,right:n}),this.getMap())){n?i.on(["precompose","prerender"],this.precomposeRight_):i.on(["precompose","prerender"],this.precomposeLeft_),i.on(["postcompose","postrender"],this.postcompose_);try{this.getMap().renderSync()}catch{}}}}removeLayers(){var e=[];this.layers.forEach(function(n){e.push(n.layer)}),this.removeLayer(e)}removeLayer(e){e instanceof Array||(e=[e]);for(var n=0;n<e.length;n++){var r=this.isLayer_(e[n]);r>=0&&this.getMap()&&(this.layers[r].right?e[n].un(["precompose","prerender"],this.precomposeRight_):e[n].un(["precompose","prerender"],this.precomposeLeft_),e[n].un(["postcompose","postrender"],this.postcompose_),this.layers.splice(r,1))}if(this.getMap())try{this.getMap().renderSync()}catch{}}getRectangle(){var e;return this.get("orientation")==="vertical"?(e=this.getMap().getSize(),[0,0,e[0]*this.get("position"),e[1]]):(e=this.getMap().getSize(),[0,0,e[0],e[1]*this.get("position")])}move(e){var n=this,r;switch(this._movefn||(this._movefn=this.move.bind(this)),e.type){case"touchcancel":case"touchend":case"mouseup":{n.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(o){document.removeEventListener(o,n._movefn)}),this.layers.forEach(function(o){o.layer.getImageRatio&&o.layer.changed()});break}case"mousedown":case"touchstart":n.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(function(o){document.addEventListener(o,n._movefn)});case"mousemove":case"touchmove":{if(n.isMoving)if(n.get("orientation")==="vertical"){var i=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX;if(!i)break;i-=n.getMap().getTargetElement().getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft,r=n.getMap().getSize()[0];var s=r-Math.min(Math.max(0,r-i),r);r=s/r,n.set("position",r),n.dispatchEvent({type:"moving",size:[s,n.getMap().getSize()[1]],position:[r,0]})}else{var a=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY;if(!a)break;a-=n.getMap().getTargetElement().getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop,r=n.getMap().getSize()[1];var l=r-Math.min(Math.max(0,r-a),r);r=l/r,n.set("position",r),n.dispatchEvent({type:"moving",size:[n.getMap().getSize()[0],l],position:[0,r]})}break}}}_transformPt(e,n){var r=e.inversePixelTransform,i=n[0],s=n[1];return n[0]=r[0]*i+r[2]*s+r[4],n[1]=r[1]*i+r[3]*s+r[5],n}_drawRect(e,n){var r=e.inversePixelTransform;if(r){var i=[[n[0][0],n[0][1]],[n[0][0],n[1][1]],[n[1][0],n[1][1]],[n[1][0],n[0][1]],[n[0][0],n[0][1]]];if(e.context.save(),e.target.getImageRatio){var s=-Math.atan2(e.frameState.pixelToCoordinateTransform[1],e.frameState.pixelToCoordinateTransform[0]);e.context.translate(e.frameState.size[0]/2,e.frameState.size[1]/2),e.context.rotate(s),e.context.translate(-e.frameState.size[0]/2,-e.frameState.size[1]/2)}i.forEach(function(l,o){l=[l[0]*r[0]-l[1]*r[1]+r[4],-l[0]*r[2]+l[1]*r[3]+r[5]],o?e.context.lineTo(l[0],l[1]):e.context.moveTo(l[0],l[1])}),e.context.restore()}else{var a=e.frameState.pixelRatio;e.context.rect(n[0][0]*a,n[0][1]*a,n[1][0]*a,n[1][1]*a)}}precomposeLeft(e){var n=e.context;if(n instanceof WebGLRenderingContext){if(e.type==="prerender"){n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.SCISSOR_TEST);var r=this.getMap().getSize(),i=this._transformPt(e,[0,r[1]]),s=this._transformPt(e,[r[0],0]),a=s[0]-i[0],l=s[1]-i[1],o,d;this.get("orientation")==="vertical"?(o=Math.round(a*this.get("position")),d=l):(o=a,d=Math.round(l*this.get("position")),i[1]+=l-d),n.scissor(i[0],i[1],o,d)}}else{var p=e.frameState.size;n.save(),n.beginPath();var A=[[0,0],[p[0],p[1]]];this.get("orientation")==="vertical"?A[1]=[p[0]*.5+this.getMap().getSize()[0]*(this.get("position")-.5),p[1]]:A[1]=[p[0],p[1]*.5+this.getMap().getSize()[1]*(this.get("position")-.5)],this._drawRect(e,A),n.clip()}}precomposeRight(e){var n=e.context;if(n instanceof WebGLRenderingContext){if(e.type==="prerender"){n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.SCISSOR_TEST);var r=this.getMap().getSize(),i=this._transformPt(e,[0,r[1]]),s=this._transformPt(e,[r[0],0]),a=s[0]-i[0],l=s[1]-i[1],o,d;this.get("orientation")==="vertical"?(d=l,o=Math.round(a*(1-this.get("position"))),i[0]+=a-o):(o=a,d=Math.round(l*(1-this.get("position")))),n.scissor(i[0],i[1],o,d)}}else{var p=e.frameState.size;n.save(),n.beginPath();var A=[[0,0],[p[0],p[1]]];this.get("orientation")==="vertical"?A[0]=[p[0]*.5+this.getMap().getSize()[0]*(this.get("position")-.5),0]:A[0]=[0,p[1]*.5+this.getMap().getSize()[1]*(this.get("position")-.5)],this._drawRect(e,A),n.clip()}}postcompose(e){if(e.context instanceof WebGLRenderingContext){if(e.type==="postrender"){var n=e.context;n.disable(n.SCISSOR_TEST)}}else e.target.getClassName&&e.target.getClassName()!=="ol-layer"&&e.target.get("declutter")?setTimeout(function(){e.context.restore()},0):e.context.restore()}},Zot=class extends lAe{constructor(e){e=e||{},e.toggleFn&&(e.onToggle=e.toggleFn),e.handleClick=function(){n.toggle(),e.onToggle&&e.onToggle.call(n,n.getActive())},e.className=(e.className||"")+" ol-toggle",super(e);var n=this;this.interaction_=e.interaction,this.interaction_&&(this.interaction_.setActive(e.active),this.interaction_.on("change:active",function(){n.setActive(n.interaction_.getActive())})),this.set("title",e.title),this.set("autoActivate",e.autoActivate),e.bar&&this.setSubBar(e.bar),this.setActive(e.active),this.setDisable(e.disable)}setMap(e){!e&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),super.setMap(e),e&&(this.interaction_&&e.addInteraction(this.interaction_),this.subbar_&&e.addControl(this.subbar_))}getSubBar(){return this.subbar_}setSubBar(e){var n=this.getMap();n&&this.subbar_&&n.removeControl(this.subbar_),this.subbar_=e,e&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),n&&n.addControl(this.subbar_))}getDisable(){var e=this.element.querySelector("button");return e&&e.disabled}setDisable(e){this.getDisable()!=e&&(this.element.querySelector("button").disabled=e,e&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!e,disable:e}))}getActive(){return this.element.classList.contains("ol-active")}toggle(){this.getActive()?this.setActive(!1):this.setActive(!0)}setActive(e){this.interaction_&&this.interaction_.setActive(e),this.subbar_&&this.subbar_.setActive(e),this.getActive()!==e&&(e?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!e,active:e}))}setInteraction(e){this.interaction_=e}getInteraction(){return this.interaction_}},Qx=class extends jl{constructor(e){e=e||{};var n=an.create("DIV",{className:(e.className||"ol-videorec")+" ol-unselectable ol-control"});super({element:n,target:e.target}),an.create("BUTTON",{type:"button",className:"ol-start",title:Qx.prototype.tips.start,click:(function(){this.start()}).bind(this),parent:n}),an.create("BUTTON",{type:"button",className:"ol-stop",title:Qx.prototype.tips.stop,click:(function(){this.stop()}).bind(this),parent:n}),an.create("BUTTON",{type:"button",className:"ol-pause",title:Qx.prototype.tips.pause,click:(function(){this.pause()}).bind(this),parent:n}),an.create("BUTTON",{type:"button",className:"ol-resume",title:Qx.prototype.tips.resume,click:(function(){this.resume()}).bind(this),parent:n}),this.set("framerate",30),this.set("videoBitsPerSecond",5e6),e.videoTarget==="DIALOG"?(this._dialog=new uAe({className:"ol-fullscreen-dialog",target:document.body,closeBox:!0}),this._videoTarget=this._dialog.getContentElement()):this._videoTarget=e.videoTarget,this._printCtrl=new hAe({target:an.create("DIV")})}setTooltip(e,n){var r=this.element.querySelector("button.ol-"+e);r&&(r.title=n)}setMap(e){this.getMap()&&(this.getMap().removeControl(this._printCtrl),this._dialog&&this.getMap().removeControl(this._dialog)),super.setMap(e),this.getMap()&&(this.getMap().addControl(this._printCtrl),this._dialog&&this.getMap().addControl(this._dialog))}start(){var e=this._printCtrl,n=!1;function r(i){n||e.fastPrint({canvas:i},r)}e.fastPrint({},(function(i){var s;try{s=i.captureStream(this.get("framerate")||30)}catch(l){this.dispatchEvent({type:"error",error:l});return}this._mediaRecorder=new MediaRecorder(s,{videoBitsPerSecond:this.get("videoBitsPerSecond")||5e6});var a=[];this._mediaRecorder.ondataavailable=function(l){a.push(l.data)},this._mediaRecorder.onstop=(function(){n=!0;var l=new Blob(a,{type:"video/mp4"});if(a=[],this._videoTarget instanceof Element){var o;this._videoTarget.tagName==="VIDEO"?o=this._videoTarget:(o=this._videoTarget.querySelector("video"),o||(o=an.create("VIDEO",{controls:"",parent:this._videoTarget}))),this._dialog&&this._dialog.show(),o.src=URL.createObjectURL(l),this.dispatchEvent({type:"stop",videoURL:o.src})}else this.dispatchEvent({type:"stop",videoURL:URL.createObjectURL(l)})}).bind(this),this._mediaRecorder.onpause=(function(){n=!0,this.dispatchEvent({type:"pause"})}).bind(this),this._mediaRecorder.onresume=(function(){n=!1,r(i),this.dispatchEvent({type:"resume"})}).bind(this),this._mediaRecorder.onerror=(function(l){this.dispatchEvent({type:"error",error:l})}).bind(this),n=!1,r(i),this._mediaRecorder.start(),this.dispatchEvent({type:"start",canvas:i}),this.element.setAttribute("data-state","rec")}).bind(this))}stop(){this._mediaRecorder&&(this._mediaRecorder.stop(),this._mediaRecorder=null,this.element.setAttribute("data-state","inactive"))}pause(){this._mediaRecorder&&(this._mediaRecorder.pause(),this.element.setAttribute("data-state","pause"))}resume(){this._mediaRecorder&&(this._mediaRecorder.resume(),this.element.setAttribute("data-state","rec"))}};Qx.prototype.tips={start:"start video",stop:"stop",pause:"pause",resume:"resume"};var hb=class extends jl{constructor(e){e=e||{};var n=n=an.create("DIV",{className:e.className||"ol-mapzone"});if(super({element:n,target:e.target}),!e.target){["ol-unselectable","ol-control","ol-collapsed"].forEach(function(s){n.classList.add(s)});var r=an.create("BUTTON",{type:"button",on:{click:(function(){n.classList.toggle("ol-collapsed"),i.forEach(function(s){s.updateSize()})}).bind(this)},parent:n});an.create("I",{parent:r})}this.set("centerOnClick",e.centerOnClick);var i=this._maps=[];this._projection=e.projection,this._layer=e.layer,e.zones.forEach(this.addZone.bind(this)),setTimeout(function(){i.forEach(function(s){s.updateSize()})})}setCollapsed(e){e?(this.element.classList.remove("ol-collapsed"),this.getMaps().forEach(function(n){n.updateSize()})):this.element.classList.add("ol-collapsed")}setVisible(e){this.setCollapsed(!e)}getCollapsed(){return this.element.classList.contains("ol-collapsed")}getMaps(){return this._maps}getLength(){return this._maps.length}addZone(e){var n=new hp({zoom:6,center:[0,0],projection:this._projection}),r;e.map?r=m8(e.map.getView().calculateExtent(),e.map.getView().getProjection(),n.getProjection()):r=m8(e.extent,"EPSG:4326",n.getProjection());var i=an.create("DIV",{className:"ol-mapzonezone",parent:this.element,click:(function(){var l=-1;this._maps.forEach(function(o,d){o.get("zone")===e&&(l=d)}),this.dispatchEvent({type:"select",zone:e,index:l,coordinate:Gu(r),extent:r}),this.get("centerOnClick")!==!1&&this.getMap().getView().fit(r),this.setVisible(!1)}).bind(this)}),s;e.layer?s=e.layer:typeof this._layer=="function"?s=this._layer(e):s=new this._layer.constructor({source:this._layer.getSource()});var a=new Bv({target:i,view:n,controls:[],interactions:[],layers:[s]});a.set("zone",e),this._maps.push(a),n.fit(r),an.create("P",{html:e.title,parent:i})}removeZone(e){var n=this.element.querySelectorAll(".ol-mapzonezone")[e];n&&(n.remove(),this._maps.splice(e,1))}};hb.zones={};hb.zones.DOM=[{title:"Guadeloupe",extent:[-61.898594315312444,15.75623038647845,-60.957887532935324,16.575317670979473]},{title:"Guyane",extent:[-54.72525931072715,2.1603763430019,-51.528236062921344,5.7984307809552575]},{title:"Martinique",extent:[-61.257556528564756,14.387506317407514,-60.76934912110432,14.895067461729951]},{title:"Mayotte",extent:[44.959844536967815,-13.01674138212816,45.35328866510648,-12.65521942207829]},{title:"La runion",extent:[55.17059012967656,-21.407680069231688,55.88195702001797,-20.85560221637526]}];hb.zones.TOM=[{title:"Polynsie Franaise",extent:[206.23664226630862,-22.189040615809787,221.85920743981987,-10.835039595040698]},{title:"Nouvelle Caldonie",extent:[163.76420580160925,-22.581641092751838,167.66984709498706,-19.816411635668445]},{title:"St-Pierre et Miquelon",extent:[-56.453698765748676,46.74449858188555,-56.0980198121544,47.14669874229787]},{title:"Wallis et Futuna",extent:[181.7588623143665,-14.7341169873267,183.95612353301715,-13.134720799175085]},{title:"St-Martin St-Barthlemy",extent:[-63.1726389501678,17.806097291313506,-62.7606535945649,18.13267688837938]}];hb.zones.DOMTOM=[{title:"Mtropole",extent:[-5.318421740712579,41.16082274292913,9.73284186155716,51.21957336557702]}].concat(hb.zones.DOM,hb.zones.TOM);const kR={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DR extends Kh{constructor(e,n){super(e),this.feature=n}}function Jot(t,e){const n=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();pAe(t,s,n)}return n}function UR(t,e){return Pv(t[0],t[1],e[0],e[1])}function jx(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function zR(t,e,n){let r,i;e<n?(r=e,i=n):(r=n,i=e);const s=Math.ceil(r),a=Math.floor(i);if(s>a){const o=Kx(t,r),d=Kx(t,i);return UR(o,d)}let l=0;if(r<s){const o=Kx(t,r),d=jx(t,s);l+=UR(o,d)}if(a<i){const o=jx(t,a),d=Kx(t,i);l+=UR(o,d)}for(let o=s;o<a-1;++o){const d=jx(t,o),p=jx(t,o+1);l+=UR(d,p)}return l}function pAe(t,e,n){if(e instanceof ko){$R(t,e.getCoordinates(),!1,n);return}if(e instanceof kc){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)$R(t,r[i],!1,n);return}if(e instanceof La){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)$R(t,r[i],!0,n);return}if(e instanceof Dc){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length;l<o;++l)$R(t,a[l],!0,n)}return}if(e instanceof xu){const r=e.getGeometries();for(let i=0;i<r.length;++i)pAe(t,r[i],n);return}}const G4={index:-1,endIndex:NaN};function eat(t,e,n,r){const i=t[0],s=t[1];let a=1/0,l=-1,o=NaN;for(let A=0;A<e.targets.length;++A){const v=e.targets[A],y=v.coordinates;let C=1/0,x;for(let M=0;M<y.length-1;++M){const I=y[M],P=y[M+1],F=AAe(i,s,I,P);F.squaredDistance<C&&(C=F.squaredDistance,x=M+F.along)}C<a&&(a=C,v.ring&&e.targetIndex===A&&(v.endIndex>v.startIndex?x<v.startIndex&&(x+=y.length):v.endIndex<v.startIndex&&x>v.startIndex&&(x-=y.length)),o=x,l=A)}const d=e.targets[l];let p=d.ring;if(e.targetIndex===l&&p){const A=Kx(d.coordinates,o),v=n.getPixelFromCoordinate(A);BO(v,e.startPx)>r&&(p=!1)}if(p){const A=d.coordinates,v=A.length,y=d.startIndex,C=o;if(y<C){const x=zR(A,y,C);zR(A,y,C-v)<x&&(o-=v)}else{const x=zR(A,y,C);zR(A,y,C+v)<x&&(o+=v)}}return G4.index=l,G4.endIndex=o,G4}function $R(t,e,n,r){const i=t[0],s=t[1];for(let a=0,l=e.length-1;a<l;++a){const o=e[a],d=e[a+1],p=AAe(i,s,o,d);if(p.squaredDistance===0){const A=a+p.along;r.push({coordinates:e,ring:n,startIndex:A,endIndex:A});return}}}const Q4={along:0,squaredDistance:0};function AAe(t,e,n,r){const i=n[0],s=n[1],a=r[0],l=r[1],o=a-i,d=l-s;let p=0,A=i,v=s;return(o!==0||d!==0)&&(p=va(((t-i)*o+(e-s)*d)/(o*o+d*d),0,1),A+=o*p,v+=d*p),Q4.along=p,Q4.squaredDistance=PE(Pv(t,e,A,v),10),Q4}function Kx(t,e){const n=t.length;let r=Math.floor(e);const i=e-r;r>=n?r-=n:r<0&&(r+=n);let s=r+1;s>=n&&(s-=n);const a=t[r],l=a[0],o=a[1],d=t[s],p=d[0]-l,A=d[1]-o;return[l+p*i,o+A*i]}class S7 extends WA{constructor(e){const n=e;n.stopDown||(n.stopDown=Vb),super(n),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=nat(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Xv,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=function(s,a,l){const o=a||new Jb([NaN,NaN]),d=ol(s[0]),p=Ov(d,ol(s[s.length-1]));return o.setCenterAndRadius(d,Math.sqrt(p),this.geometryLayout_),o};else{let s;i==="Point"?s=So:i==="LineString"?s=ko:i==="Polygon"&&(s=La),r=function(a,l,o){return l?i==="Polygon"?a[0].length?l.setCoordinates([a[0].concat([a[0][0]])],this.geometryLayout_):l.setCoordinates([],this.geometryLayout_):l.setCoordinates(a,this.geometryLayout_):l=new s(a,this.geometryLayout_),l}}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new cm({source:new L_({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:tat(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:K2,this.freehandCondition_,e.freehand?this.freehandCondition_=pB:this.freehandCondition_=e.freehandCondition?e.freehandCondition:uM,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(E8.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=pB:n=e:n=$O,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===pi.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===_o.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===_o.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===_o.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===_o.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===_o.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===_o.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===_o.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Dg(_o.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=sc([r,i]),a=this.traceSource_.getFeaturesInExtent(s);if(a.length===0)return;const l=Jot(e.coordinate,a);l.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:l,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let a=Math.floor(r);a===r&&(a-=1);for(let l=s;l<=a;++l)i.push(jx(e.coordinates,l))}else{const s=Math.floor(n);let a=Math.ceil(r);a===r&&(a+=1);for(let l=s;l>=a;--l)i.push(jx(e.coordinates,l))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const n=this.traceState_;if(!n.active||n.targetIndex===-1&&BO(n.startPx,e.pixel)<this.snapTolerance_)return;const r=eat(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const o=n.targets[n.targetIndex];this.removeTracedCoordinates_(o.startIndex,o.endIndex)}const l=n.targets[r.index];this.addTracedCoordinates_(l,l.startIndex,r.endIndex)}else{const l=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(l,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex;const s=Kx(i.coordinates,i.endIndex),a=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(a[0]),Math.round(a[1])]}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,r=e.pixel,i=n[0]-r[0],s=n[1]-r[1],a=i*i+s*s;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];const a=this.mode_;if(a==="Point")r=!0;else if(a==="Circle")r=this.sketchCoords_.length===2;else if(a==="LineString")i=!n&&this.sketchCoords_.length>this.minPoints_;else if(a==="Polygon"){const l=this.sketchCoords_;i=l[0].length>this.minPoints_,s=[l[0][0],l[0][l[0].length-2]],n?s=[l[0][0]]:s=[l[0][0],l[0][l[0].length-2]]}if(i){const l=this.getMap();for(let o=0,d=s.length;o<d;o++){const p=s[o],A=l.getPixelFromCoordinate(p),v=e[0]-A[0],y=e[1]-A[1],C=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(v*v+y*y)<=C,r){this.finishCoordinate_=p;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ys(new So(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Ys);const n=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new ko(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const n=this.getMap().getView().getProjection(),r=iB(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ys(new ko(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Ys,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new DR(kR.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),s=iB(this.geometryLayout_);let a,l;for(;e.length<s;)e.push(0);this.mode_==="Point"?l=this.sketchCoords_:this.mode_==="Polygon"?(a=this.sketchCoords_[0],l=a[a.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(a=this.sketchCoords_,l=a[a.length-1]),l[0]=e[0],l[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,s;const a=this.mode_;return a==="LineString"||a==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),this.geometryFunction_(s,n,r)):a==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),i&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let s=0;s<e;++s){let a;if(i==="LineString"||i==="Circle"){if(a=this.sketchCoords_,a.splice(-2,1),a.length>=2){this.finishCoordinate_=a[a.length-2].slice();const l=this.finishCoordinate_.slice();a[a.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(a,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(i==="Polygon"){a=this.sketchCoords_[0],a.splice(-2,1);const l=this.sketchLine_.getGeometry();if(a.length>=2){const o=a[a.length-2].slice();a[a.length-1]=o,this.createOrUpdateSketchPoint_(o)}l.setCoordinates(a),this.geometryFunction_(this.sketchCoords_,n,r)}if(a.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,i)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,i),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Nd([n])):this.type_==="MultiLineString"?e.setGeometry(new kc([n])):this.type_==="MultiPolygon"&&e.setGeometry(new Dc([n])),this.dispatchEvent(new DR(kR.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DR(kR.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(n==="LineString"||n==="Circle")i=this.sketchCoords_;else if(n==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let a=0;a<e.length;a++)this.addToDrawing_(e[a]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Ys(new So(i)),this.updateSketchFeatures_(),this.dispatchEvent(new DR(kR.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function tat(){const t=BG();return function(e,n){return t[e.getGeometry().getType()]}}function nat(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const qee=0,iI=1,Yee=[0,0,0,0],mC=[],j4={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class K4 extends Kh{constructor(e,n,r){super(e),this.features=n,this.mapBrowserEvent=r}}class T7 extends WA{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:DG,this.defaultDeleteCondition_=function(r){return Ife(r)&&j2(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:pB,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new HO,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new cm({source:new L_({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:iat(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let n;if(e.features?n=e.features:e.source&&(this.source_=e.source,n=new _u(this.source_.getFeatures()),this.source_.addEventListener(ml.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(ml.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!n)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(zl.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(zl.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const n=e.getGeometry();if(n){const i=this.SEGMENT_WRITERS_[n.getType()];i&&i(e,n)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),e.addEventListener(pi.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new _u;const r=this.featuresBeingModified_.getArray();for(let i=0,s=n.length;i<s;++i){const a=n[i];for(let l=0,o=a.length;l<o;++l){const d=a[l].feature;d&&!r.includes(d)&&this.featuresBeingModified_.push(d)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new K4(j4.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(pi.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const n=this.rBush_,r=[];n.forEach(function(i){e===i.feature&&r.push(i)});for(let i=r.length-1;i>=0;--i){const s=r[i];for(let a=this.dragSegments_.length-1;a>=0;--a)this.dragSegments_[a][0]===s&&this.dragSegments_.splice(a,1);n.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const n=e.target;this.removeFeature_(n),this.addFeature_(n)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,n){const r=n.getCoordinates(),i={feature:e,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),i)}writeMultiPointGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i],l={feature:e,geometry:n,depth:[i],index:i,segment:[a,a]};this.rBush_.insert(n.getExtent(),l)}}writeLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length-1;i<s;++i){const a=r.slice(i,i+2),l={feature:e,geometry:n,index:i,segment:a};this.rBush_.insert(sc(a),l)}}writeMultiLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length-1;l<o;++l){const d=a.slice(l,l+2),p={feature:e,geometry:n,depth:[i],index:l,segment:d};this.rBush_.insert(sc(d),p)}}}writePolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length-1;l<o;++l){const d=a.slice(l,l+2),p={feature:e,geometry:n,depth:[i],index:l,segment:d};this.rBush_.insert(sc(d),p)}}}writeMultiPolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length;l<o;++l){const d=a[l];for(let p=0,A=d.length-1;p<A;++p){const v=d.slice(p,p+2),y={feature:e,geometry:n,depth:[l,i],index:p,segment:v};this.rBush_.insert(sc(v),y)}}}}writeCircleGeometry_(e,n){const r=n.getCenter(),i={feature:e,geometry:n,index:qee,segment:[r,r]},s={feature:e,geometry:n,index:iI,segment:[r,r]},a=[i,s];i.featureSegments=a,s.featureSegments=a,this.rBush_.insert(ib(r),i);let l=n;this.rBush_.insert(l.getExtent(),s)}writeGeometryCollectionGeometry_(e,n){const r=n.getGeometriesArray();for(let i=0;i<r.length;++i){const s=r[i],a=this.SEGMENT_WRITERS_[s.getType()];a(e,s)}}createOrUpdateVertexFeature_(e,n,r){let i=this.vertexFeature_;return i?i.getGeometry().setCoordinates(e):(i=new Ys(new So(e)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i)),i.set("features",n),i.set("geometries",r),i}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let n;return!e.map.getView().getInteracting()&&e.type==_o.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=_o.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==_o.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!n}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[];for(let s=0,a=this.dragSegments_.length;s<a;++s){const l=this.dragSegments_[s],o=l[0],d=o.feature;r.includes(d)||r.push(d);const p=o.geometry;i.includes(p)||i.push(p);const A=o.depth;let v;const y=o.segment,C=l[1];for(;n.length<p.getStride();)n.push(y[C][n.length]);switch(p.getType()){case"Point":v=n,y[0]=n,y[1]=n;break;case"MultiPoint":v=p.getCoordinates(),v[o.index]=n,y[0]=n,y[1]=n;break;case"LineString":v=p.getCoordinates(),v[o.index+C]=n,y[C]=n;break;case"MultiLineString":v=p.getCoordinates(),v[A[0]][o.index+C]=n,y[C]=n;break;case"Polygon":v=p.getCoordinates(),v[A[0]][o.index+C]=n,y[C]=n;break;case"MultiPolygon":v=p.getCoordinates(),v[A[1]][A[0]][o.index+C]=n,y[C]=n;break;case"Circle":if(y[0]=n,y[1]=n,o.index===qee)this.changingFeature_=!0,p.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let x=BO(ol(p.getCenter()),ol(n));p.setRadius(x),this.changingFeature_=!1}break}v&&this.setGeometryCoordinates_(p,v)}this.createOrUpdateVertexFeature_(n,r,i)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;const r=this.vertexFeature_;if(r){e.map.getView().getProjection();const i=[],s=r.getGeometry().getCoordinates(),a=sc([s]),l=this.rBush_.getInExtent(a),o={};l.sort(rat);for(let d=0,p=l.length;d<p;++d){const A=l[d],v=A.segment;let y=Vr(A.geometry);const C=A.depth;if(C&&(y+="-"+C.join("-")),o[y]||(o[y]=new Array(2)),A.geometry.getType()==="Circle"&&A.index===iI){const x=Zee(n,A);CA(x,s)&&!o[y][0]&&(this.dragSegments_.push([A,0]),o[y][0]=A);continue}if(CA(v[0],s)&&!o[y][0]){this.dragSegments_.push([A,0]),o[y][0]=A;continue}if(CA(v[1],s)&&!o[y][1]){if(o[y][0]&&o[y][0].index===0){let x=A.geometry.getCoordinates();switch(A.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":x=x[C[1]];case"Polygon":if(A.index!==x[C[0]].length-2)continue;break}}this.dragSegments_.push([A,1]),o[y][1]=A;continue}Vr(v)in this.vertexSegments_&&!o[y][0]&&!o[y][1]&&this.insertVertexCondition_(e)&&i.push(A)}i.length&&this.willModifyFeatures_(e,[i]);for(let d=i.length-1;d>=0;--d)this.insertVertex_(i[d],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let n=this.dragSegments_.length-1;n>=0;--n){const r=this.dragSegments_[n][0],i=r.geometry;if(i.getType()==="Circle"){const s=i.getCenter(),a=r.featureSegments[0],l=r.featureSegments[1];a.segment[0]=s,a.segment[1]=s,l.segment[0]=s,l.segment[1]=s,this.rBush_.update(ib(s),a);let o=i;this.rBush_.update(o.getExtent(),l)}else this.rBush_.update(sc(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new K4(j4.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,n,r){const i=r||n.getCoordinateFromPixel(e);n.getView().getProjection();const s=function(o,d){return Xee(i,o)-Xee(i,d)};let a,l;if(this.hitDetection_){const o=typeof this.hitDetection_=="object"?d=>d===this.hitDetection_:void 0;n.forEachFeatureAtPixel(e,(d,p,A)=>{A&&A.getType()==="Point"&&(A=new So(l_(A.getCoordinates())));const v=A||d.getGeometry();if(d instanceof Ys&&this.features_.getArray().includes(d)){l=v;const y=d.getGeometry().getFlatCoordinates().slice(0,2);a=[{feature:d,geometry:l,segment:[y,y]}]}return!0},{layerFilter:o})}if(!a){const o=Ed(ib(i,Yee)),d=n.getView().getResolution()*this.pixelTolerance_,p=Qb(Oc(o,d,Yee));a=this.rBush_.getInExtent(p)}if(a&&a.length>0){const o=a.sort(s)[0],d=o.segment;let p=Zee(i,o);const A=n.getPixelFromCoordinate(p);let v=BO(e,A);if(l||v<=this.pixelTolerance_){const y={};if(y[Vr(d)]=!0,this.snapToPointer_||(this.delta_[0]=p[0]-i[0],this.delta_[1]=p[1]-i[1]),o.geometry.getType()==="Circle"&&o.index===iI)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(p,[o.feature],[o.geometry]);else{const C=n.getPixelFromCoordinate(d[0]),x=n.getPixelFromCoordinate(d[1]),M=Ov(A,C),I=Ov(A,x);v=Math.sqrt(Math.min(M,I)),this.snappedToVertex_=v<=this.pixelTolerance_,this.snappedToVertex_&&(p=M>I?d[1]:d[0]),this.createOrUpdateVertexFeature_(p,[o.feature],[o.geometry]);const P={};P[Vr(o.geometry)]=!0;for(let F=1,D=a.length;F<D;++F){const V=a[F].segment;if(CA(d[0],V[0])&&CA(d[1],V[1])||CA(d[0],V[1])&&CA(d[1],V[0])){const H=Vr(a[F].geometry);H in P||(P[H]=!0,y[Vr(V)]=!0)}else break}}this.vertexSegments_=y;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,n){const r=e.segment,i=e.feature,s=e.geometry,a=e.depth,l=e.index;let o;for(;n.length<s.getStride();)n.push(0);switch(s.getType()){case"MultiLineString":o=s.getCoordinates(),o[a[0]].splice(l+1,0,n);break;case"Polygon":o=s.getCoordinates(),o[a[0]].splice(l+1,0,n);break;case"MultiPolygon":o=s.getCoordinates(),o[a[1]][a[0]].splice(l+1,0,n);break;case"LineString":o=s.getCoordinates(),o.splice(l+1,0,n);break;default:return}this.setGeometryCoordinates_(s,o);const d=this.rBush_;d.remove(e),this.updateSegmentIndices_(s,l,a,1);const p={segment:[r[0],n],feature:i,geometry:s,depth:a,index:l};d.insert(sc(p.segment),p),this.dragSegments_.push([p,1]);const A={segment:[n,r[1]],feature:i,geometry:s,depth:a,index:l+1};d.insert(sc(A.segment),A),this.dragSegments_.push([A,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=_o.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new K4(j4.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,n}return!1}removeVertex_(){const e=this.dragSegments_,n={};let r=!1,i,s,a,l,o,d,p,A,v,y,C;for(o=e.length-1;o>=0;--o)a=e[o],y=a[0],C=Vr(y.feature),y.depth&&(C+="-"+y.depth.join("-")),C in n||(n[C]={}),a[1]===0?(n[C].right=y,n[C].index=y.index):a[1]==1&&(n[C].left=y,n[C].index=y.index+1);for(C in n){switch(v=n[C].right,p=n[C].left,d=n[C].index,A=d-1,p!==void 0?y=p:y=v,A<0&&(A=0),l=y.geometry,s=l.getCoordinates(),i=s,r=!1,l.getType()){case"MultiLineString":s[y.depth[0]].length>2&&(s[y.depth[0]].splice(d,1),r=!0);break;case"LineString":s.length>2&&(s.splice(d,1),r=!0);break;case"MultiPolygon":i=i[y.depth[1]];case"Polygon":i=i[y.depth[0]],i.length>4&&(d==i.length-1&&(d=0),i.splice(d,1),r=!0,d===0&&(i.pop(),i.push(i[0]),A=i.length-1));break}if(r){this.setGeometryCoordinates_(l,s);const x=[];if(p!==void 0&&(this.rBush_.remove(p),x.push(p.segment[0])),v!==void 0&&(this.rBush_.remove(v),x.push(v.segment[1])),p!==void 0&&v!==void 0){const M={depth:y.depth,feature:y.feature,geometry:y.geometry,index:A,segment:x};this.rBush_.insert(sc(M.segment),M)}this.updateSegmentIndices_(l,d,y.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}setGeometryCoordinates_(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1}updateSegmentIndices_(e,n,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(r===void 0||s.depth===void 0||pm(s.depth,r))&&s.index>n&&(s.index+=i)})}}function rat(t,e){return t.index-e.index}function Xee(t,e,n){const r=e.geometry;if(r.getType()==="Circle"){let s=r;if(e.index===iI){const a=Ov(s.getCenter(),ol(t)),l=Math.sqrt(a)-s.getRadius();return l*l}}const i=ol(t);return mC[0]=ol(e.segment[0]),mC[1]=ol(e.segment[1]),gJe(i,mC)}function Zee(t,e,n){const r=e.geometry;if(r.getType()==="Circle"&&e.index===iI)return l_(r.getClosestPoint(ol(t)));const i=ol(t);return mC[0]=ol(e.segment[0]),mC[1]=ol(e.segment[1]),l_(eG(i,mC))}function iat(){const t=BG();return function(e,n){return t.Point}}ko.prototype.splitAt=function(t,e){var n;if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){var r=[this];for(n=0;n<t.length;n++){for(var i=[],s=0;s<r.length;s++){var a=r[s].splitAt(t[n],e);i=i.concat(a)}r=i}return r}if(qS(t,this.getFirstCoordinate())||qS(t,this.getLastCoordinate()))return[this];var l=this.getCoordinates(),o=[l[0]],d=[];for(n=0;n<l.length-1;n++)if(!qS(l[n],l[n+1])){if(qS(t,l[n+1]))o.push(l[n+1]),d.push(new ko(o)),o=[];else if(!qS(t,l[n])){var p,A,v=!1;l[n][0]==l[n+1][0]?(p=(l[n][1]-t[1])/(l[n][1]-l[n+1][1]),v=l[n][0]==t[0]&&0<p&&p<=1):l[n][1]==l[n+1][1]?(p=(l[n][0]-t[0])/(l[n][0]-l[n+1][0]),v=l[n][1]==t[1]&&0<p&&p<=1):(p=(l[n][0]-t[0])/(l[n][0]-l[n+1][0]),A=(l[n][1]-t[1])/(l[n][1]-l[n+1][1]),v=Math.abs(p-A)<=e&&0<p&&p<=1),v&&(o.push(t),d.push(new ko(o)),o=[t])}o.push(l[n+1])}return o.length>1&&d.push(new ko(o)),d.length?d:[this]};var sat=class extends No{constructor(e){e=e||{},super({stroke:e.stroke,text:e.text,zIndex:e.zIndex,geometry:e.geometry}),this.setRenderer(this._render.bind(this)),this._visible=e.visible!==!1,typeof e.width=="function"?this._widthFn=e.width:this.setWidth(e.width),this.setWidth2(e.width2),typeof e.color=="function"?this._colorFn=e.color:this.setColor(e.color),this.setColor2(e.color2),this.setLineCap(e.lineCap),this.setArrow(e.arrow),this.setArrowSize(e.arrowSize),this.setArrowColor(e.arrowColor),this._offset=[0,0],this.setOffset(e.offset0,0),this.setOffset(e.offset1,1),this._noOverlap=e.noOverlap}setWidth(e){this._width=e||0}setWidth2(e){this._width2=e}getOffset(e){return this._offset[e]}setOffset(e,n){switch(e=Math.max(0,parseFloat(e)),n){case 0:{this._offset[0]=e;break}case 1:{this._offset[1]=e;break}}}setLineCap(e){this._lineCap=e==="round"?"round":"butt"}getWidth(e,n){if(this._widthFn)return this._widthFn(e,n);var r=typeof this._width2=="number"?this._width2:this._width;return this._width+(r-this._width)*n}setColor(e){try{this._color=Of(e)}catch{this._color=[0,0,0,1]}}setColor2(e){try{this._color2=Of(e)}catch{this._color2=null}}setArrowColor(e){try{this._acolor=ab(e)}catch{this._acolor=null}}getColor(e,n){if(this._colorFn)return ab(this._colorFn(e,n));var r=this._color,i=this._color2||this._color;return"rgba("+ +Math.round(r[0]+(i[0]-r[0])*n)+","+Math.round(r[1]+(i[1]-r[1])*n)+","+Math.round(r[2]+(i[2]-r[2])*n)+","+(r[3]+(i[3]-r[3])*n)+")"}getArrow(){return this._arrow}setArrow(e){this._arrow=parseInt(e),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)}getArrowSize(){return this._arrowSize||[16,16]}setArrowSize(e){Array.isArray(e)?this._arrowSize=e:typeof e=="number"&&(this._arrowSize=[e,e])}drawArrow(e,n,r,i,s){var a=this.getArrowSize()[0]*s,l=W1(n,r),o=(n[0]-r[0])/l,d=(n[1]-r[1])/l;i=Math.max(this.getArrowSize()[1]/2,i/2)*s,e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[0]-a*o+i*d,n[1]-a*d-i*o),e.lineTo(n[0]-a*o-i*d,n[1]-a*d+i*o),e.lineTo(n[0],n[1]),e.fill()}_render(e,n){if(n.geometry.getType()==="LineString"){var r,i,s,a=n.context;if(!this._visible){var l=n.pixelRatio/n.resolution,o=Math.cos(n.rotation),d=Math.sin(n.rotation);i=n.geometry.getCoordinates();var p=e[0][0]-i[0][0]*l*o-i[0][1]*l*d,A=e[0][1]-i[0][0]*l*d+i[0][1]*l*o;for(e=[],r=0;s=i[r];r++)e[r]=[p+s[0]*l*o+s[1]*l*d,A+s[0]*l*d-s[1]*l*o,s[2]]}var v=this.getArrowSize()[0]*n.pixelRatio;a.save(),this.getOffset(0)&&this._splitAsize(e,this.getOffset(0)*n.pixelRatio),this.getOffset(1)&&this._splitAsize(e,this.getOffset(1)*n.pixelRatio,!0),e.length>1&&(this.getArrow()===-1||this.getArrow()===2)&&(s=this._splitAsize(e,v),this._acolor?a.fillStyle=this._acolor:a.fillStyle=this.getColor(n.feature,0),this.drawArrow(a,s[0],s[1],this.getWidth(n.feature,0),n.pixelRatio)),e.length>1&&this.getArrow()>0&&(s=this._splitAsize(e,v,!0),this._acolor?a.fillStyle=this._acolor:a.fillStyle=this.getColor(n.feature,1),this.drawArrow(a,s[0],s[1],this.getWidth(n.feature,1),n.pixelRatio));var y=this._splitInto(e,255,2),C=0,x=y.length;if(a.lineJoin="round",a.lineCap=this._lineCap||"butt",y.length>1)for(C=0;C<y.length;C++){var M=C/x;for(i=y[C],a.lineWidth=this.getWidth(n.feature,M)*n.pixelRatio,a.strokeStyle=this.getColor(n.feature,M),a.beginPath(),a.moveTo(i[0][0],i[0][1]),r=1;s=i[r];r++)a.lineTo(s[0],s[1]);a.stroke()}a.restore()}}_splitAsize(e,n,r){var i,s,a,l,o=0;for(r?a=e.pop():a=e.shift(),i=a;e.length;){if(r?s=e.pop():s=e.shift(),l=W1(i,s),o+l>n){i=[i[0]+(s[0]-i[0])*(n-o)/l,i[1]+(s[1]-i[1])*(n-o)/l],l=W1(i,a),r?(e.push(s),e.push(i),e.push([i[0]+(a[0]-i[0])/l,i[1]+(a[1]-i[1])/l])):(e.unshift(s),e.unshift(i),e.unshift([i[0]+(a[0]-i[0])/l,i[1]+(a[1]-i[1])/l]));break}o+=l,i=s}return[a,i]}_splitInto(e,n,r){var i,s,a=this._noOverlap?1:.9,l=[],o,d=0;for(i=1;s=e[i];i++)d+=W1(e[i-1],s);var p=Math.max(r||2,d/(n||255)),A=e[0];d=0;var v=[A];for(i=1,s=e[1];i<e.length;){var y=s[0]-A[0],C=s[1]-A[1];if(o=Math.sqrt(y*y+C*C),d+o>p){var x=(p-d)/o;v.push([A[0]+y*x,A[1]+C*x]),l.push(v),A=[A[0]+y*x*a,A[1]+C*x*a],v=[A],d=0}else d+=o,A=s,v.push(A),i++,s=e[i]}return l.push(v),l}};const oat={SELECT:"select"};class aat extends Kh{constructor(e,n,r,i){super(e),this.selected=n,this.deselected=r,this.mapBrowserEvent=i}}const VR={};class aN extends Xb{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:j2,this.addCondition_=e.addCondition?e.addCondition:$O,this.removeCondition_=e.removeCondition?e.removeCondition:$O,this.toggleCondition_=e.toggleCondition?e.toggleCondition:uM,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Xv,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:lat(),this.features_=e.features||new _u;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const r=e.layers;n=function(i){return r.includes(i)}}else n=Xv;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[Vr(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Vr(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(zl.ADD,this.boundAddFeature_),this.features_.addEventListener(zl.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(zl.ADD,this.boundAddFeature_),this.features_.removeEventListener(zl.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const r=this.getMap().getAllLayers().find(function(i){if(i instanceof cm&&i.getSource()&&i.getSource().hasFeature(n))return i});r&&this.addFeatureLayerAssociation_(n,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const n=Vr(e);n in VR||(VR[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let i=n.length-1;i>=0;--i){const s=n[i];if(s!==this&&s instanceof aN&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const r=Vr(e);e.setStyle(VR[r]),delete VR[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Vr(e)]}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),s=!n&&!r&&!i,a=e.map,l=this.getFeatures(),o=[],d=[];if(s){Hb(this.featureLayerAssociation_),a.forEachFeatureAtPixel(e.pixel,(p,A)=>{if(!(!(p instanceof Ys)||!this.filter_(p,A)))return this.addFeatureLayerAssociation_(p,A),d.push(p),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let p=l.getLength()-1;p>=0;--p){const A=l.item(p),v=d.indexOf(A);v>-1?d.splice(v,1):(l.remove(A),o.push(A))}d.length!==0&&l.extend(d)}else{a.forEachFeatureAtPixel(e.pixel,(p,A)=>{if(!(!(p instanceof Ys)||!this.filter_(p,A)))return(n||i)&&!l.getArray().includes(p)?(this.addFeatureLayerAssociation_(p,A),d.push(p)):(r||i)&&l.getArray().includes(p)&&(o.push(p),this.removeFeatureLayerAssociation_(p)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let p=o.length-1;p>=0;--p)l.remove(o[p]);l.extend(d)}return(d.length>0||o.length>0)&&this.dispatchEvent(new aat(oat.SELECT,d,o,e)),!0}}function lat(){const t=BG();return yo(t.Polygon,t.LineString),yo(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var cat=class extends aN{constructor(e){e=e||{};var n=new cm({source:new L_({features:new _u,wrapX:e.wrapX,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:e.featureStyle});if(e.layers)if(typeof e.layers=="function"){var r=e.layers;e.layers=function(s){return s===n||r(s)}}else e.layers.push&&e.layers.push(n);if(e.filter){var i=e.filter;e.filter=function(s,a){return!a&&s.get("selectclusterlink")?!1:i(s,a)}}else e.filter=function(s,a){return!(!a&&s.get("selectclusterlink"))};e.autoClose===!1&&!e.toggleCondition&&(e.toggleCondition=j2),super(e),this.overlayLayer_=n,this.filter_=e.filter,this.pointRadius=e.pointRadius||12,this.circleMaxObjects=e.circleMaxObjects||10,this.maxObjects=e.maxObjects||60,this.spiral=e.spiral!==!1,this.animate=e.animate,this.animationDuration=e.animationDuration||500,this.selectCluster_=e.selectCluster!==!1,this._autoClose=e.autoClose!==!1,this.on("select",this.selectCluster.bind(this))}setMap(e){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),this._listener&&Rf(this._listener),this._listener=null,super.setMap(e),this.overlayLayer_.setMap(e),e&&e.getView()&&(this._listener=e.getView().on("change:resolution",this.clear.bind(this)))}clear(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}getLayer(){return this.overlayLayer_}selectCluster(e){if(e instanceof Ys&&(e={selected:[e]}),!e.selected.length){if(this._autoClose)this.clear();else{var n=e.deselected;n.forEach(F=>{var D=F.get("selectcluserfeatures");D&&D.forEach(V=>{this.overlayLayer_.getSource().removeFeature(V)})})}return}var r=e.selected[0];if(!r.get("selectclusterfeature")){var i=this.overlayLayer_.getSource();this._autoClose&&i.clear();var s=r.get("features");if(!(!s||s.length==1)){this.selectCluster_||this.getFeatures().clear();var a=r.getGeometry().getCoordinates(),l=this.getMap().getView().getResolution(),o,d,p,A,v,y,C,x=[];if(!this.spiral||s.length<=this.circleMaxObjects)for(A=Math.min(s.length,this.circleMaxObjects),o=l*this.pointRadius*(.5+A/4),p=0;p<A;p++)d=2*Math.PI*p/A,(A==2||A==4)&&(d+=Math.PI/4),v=[a[0]+o*Math.sin(d),a[1]+o*Math.cos(d)],y=new Ys({selectclusterfeature:!0,features:[s[p]],geometry:new So(v)}),y.setStyle(s[p].getStyle()),x.push(y),C=new Ys({selectclusterlink:!0,geometry:new ko([a,v])}),x.push(C);else{d=0;var M=2*this.pointRadius;for(A=Math.min(this.maxObjects,s.length),p=0;p<A;p++){o=M/2+M*d/(2*Math.PI),d=d+(M+.1)/o;var I=l*o*Math.sin(d),P=l*o*Math.cos(d);v=[a[0]+I,a[1]+P],y=new Ys({selectclusterfeature:!0,features:[s[p]],geometry:new So(v)}),y.setStyle(s[p].getStyle()),x.push(y),C=new Ys({selectclusterlink:!0,geometry:new ko([a,v])}),x.push(C)}}r.set("selectcluserfeatures",x),this.animate?this.animateCluster_(a,x):i.addFeatures(x)}}}animateCluster_(e,n){if(this.listenerKey_&&Rf(this.listenerKey_),!n.length)return;var r=this.overlayLayer_.getStyle(),i=typeof r=="function"?r:r.length?function(){return r}:function(){return[r]},s=this.animationDuration||500,a=new Date().getTime();function l(d){for(var p=d.vectorContext||nN(d),A=d.frameState.pixelRatio,v=this.getMap().getView().getResolution(),y=Mp((d.frameState.time-a)/s),C=0,x;x=n[C];C++)if(x.get("features")){var M=x.getGeometry().getCoordinates();M[0]=e[0]+y*(M[0]-e[0]),M[1]=e[1]+y*(M[1]-e[1]);for(var I=new So(M),P=i(x,v),F=0;F<P.length;F++){var D,V=Bv.prototype.getFeaturesAtPixel?!1:P[F].getImage();V&&(D=V.getScale(),V.setScale(A)),p.setStyle?(p.setStyle(P[F]),p.drawGeometry(I)):(p.setImageStyle(V),p.drawPointGeometry(I)),V&&V.setScale(D)}}if(y>1){Rf(this.listenerKey_),this.overlayLayer_.getSource().addFeatures(n),this.overlayLayer_.changed();return}d.frameState.animate=!0}this.listenerKey_=this.overlayLayer_.on(["postcompose","postrender"],l.bind(this));var o=new Ys(new So(this.getMap().getView().getCenter()));o.setStyle(new No({image:new I_({})})),this.overlayLayer_.getSource().addFeature(o)}getClusterExtent(e){if(!e.get("features"))return null;var n=Ql();return e.get("features").forEach(function(r){n=sb(n,r.getGeometry().getExtent())}),n[0]===n[2]&&n[1]===n[3]?null:n}};class uat extends WA{constructor(e){e=e||{},super(e),this.condition_=e.condition?e.condition:uM,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=e.duration!==void 0?e.duration:400}handleDragEvent(e){if(!cb(e))return;const n=e.map,r=n.getSize(),i=e.pixel,s=i[0]-r[0]/2,a=r[1]/2-i[1],l=Math.atan2(a,s),o=Math.sqrt(s*s+a*a),d=n.getView();if(this.lastAngle_!==void 0){const p=this.lastAngle_-l;d.adjustRotationInternal(p)}this.lastAngle_=l,this.lastMagnitude_!==void 0&&d.adjustResolutionInternal(this.lastMagnitude_/o),this.lastMagnitude_!==void 0&&(this.lastScaleDelta_=this.lastMagnitude_/o),this.lastMagnitude_=o}handleUpEvent(e){if(!cb(e))return!0;const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1}handleDownEvent(e){return cb(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0):!1}}function hat(t){return PE(t,5)}function vT(t){return parseFloat(t)}function yT(t){return hat(t).toString()}function i5(t,e){return isNaN(t)?!1:t!==vT(yT(e))}function dat(t,e){return i5(t[0],e[0])||i5(t[1],e[1])}class fat extends Xb{constructor(e){super(),e=Object.assign({animate:!0,params:["x","y","z","r","l"],replace:!1,prefix:""},e||{});let n;e.animate===!0?n={duration:250}:e.animate?n=e.animate:n=null,this.animationOptions_=n,this.params_=e.params.reduce((r,i)=>(r[i]=!0,r),{}),this.replace_=e.replace,this.prefix_=e.prefix,this.listenerKeys_=[],this.initial_=!0,this.updateState_=this.updateState_.bind(this),this.trackedCallbacks_={},this.trackedValues_={}}getParamName_(e){return this.prefix_?this.prefix_+e:e}get_(e,n){return e.get(this.getParamName_(n))}set_(e,n,r){n in this.params_&&e.set(this.getParamName_(n),r)}delete_(e,n){n in this.params_&&e.delete(this.getParamName_(n))}setMap(e){const n=this.getMap();super.setMap(e),e!==n&&(n&&this.unregisterListeners_(n),e&&(this.initial_=!0,this.updateState_(),this.registerListeners_(e)))}registerListeners_(e){this.listenerKeys_.push(Yi(e,EA.MOVEEND,this.updateUrl_,this),Yi(e.getLayerGroup(),pi.CHANGE,this.updateUrl_,this),Yi(e,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}unregisterListeners_(e){for(let i=0,s=this.listenerKeys_.length;i<s;++i)xo(this.listenerKeys_[i]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);const n=new URL(window.location.href),r=n.searchParams;this.delete_(r,"x"),this.delete_(r,"y"),this.delete_(r,"z"),this.delete_(r,"r"),this.delete_(r,"l"),window.history.replaceState(null,"",n)}handleChangeLayerGroup_(){const e=this.getMap();e&&(this.unregisterListeners_(e),this.registerListeners_(e),this.initial_=!0,this.updateUrl_())}updateState_(){const n=new URL(window.location.href).searchParams;for(const v in this.trackedCallbacks_){const y=n.get(v);v in this.trackedCallbacks_&&y!==this.trackedValues_[v]&&(this.trackedValues_[v]=y,this.trackedCallbacks_[v](y))}const r=this.getMap();if(!r)return;const i=r.getView();if(!i)return;let s=!1;const a={},l=vT(this.get_(n,"z"));"z"in this.params_&&i5(l,i.getZoom())&&(s=!0,a.zoom=l);const o=vT(this.get_(n,"r"));"r"in this.params_&&i5(o,i.getRotation())&&(s=!0,a.rotation=o);const d=[vT(this.get_(n,"x")),vT(this.get_(n,"y"))];("x"in this.params_||"y"in this.params_)&&dat(d,i.getCenter())&&(s=!0,a.center=d),s&&(!this.initial_&&this.animationOptions_?i.animate(Object.assign(a,this.animationOptions_)):(a.center&&i.setCenter(a.center),"zoom"in a&&i.setZoom(a.zoom),"rotation"in a&&i.setRotation(a.rotation)));const p=r.getAllLayers(),A=this.get_(n,"l");if("l"in this.params_&&A&&A.length===p.length)for(let v=0,y=p.length;v<y;++v){const C=parseInt(A[v]);if(!isNaN(C)){const x=!!C,M=p[v];M.getVisible()!==x&&M.setVisible(x)}}}track(e,n){this.trackedCallbacks_[e]=n;const s=new URL(window.location.href).searchParams.get(e);return this.trackedValues_[e]=s,s}update(e,n){const r=new URL(window.location.href),i=r.searchParams;n===null?i.delete(e):i.set(e,n),e in this.trackedValues_&&(this.trackedValues_[e]=n),this.updateHistory_(r)}updateUrl_(){const e=this.getMap();if(!e)return;const n=e.getView();if(!n)return;const r=n.getCenter(),i=n.getZoom(),s=n.getRotation(),a=e.getAllLayers(),l=new Array(a.length);for(let p=0,A=a.length;p<A;++p)l[p]=a[p].getVisible()?"1":"0";const o=new URL(window.location.href),d=o.searchParams;this.set_(d,"x",yT(r[0])),this.set_(d,"y",yT(r[1])),this.set_(d,"z",yT(i)),this.set_(d,"r",yT(s)),this.set_(d,"l",l.join("")),this.updateHistory_(o),this.initial_=!1}updateHistory_(e){e.href!==window.location.href&&(this.initial_||this.replace_?window.history.replaceState(history.state,"",e):window.history.pushState(null,"",e))}}const pat={SNAP:"snap"};class Aat extends Kh{constructor(e,n){super(e),this.vertex=n.vertex,this.vertexPixel=n.vertexPixel,this.feature=n.feature,this.segment=n.segment}}function Jee(t){return t.feature?t.feature:t.element?t.element:null}const W4=[];class gat extends WA{constructor(e){e=e||{};const n=e;n.handleDownEvent||(n.handleDownEvent=Xv),n.stopDown||(n.stopDown=Vb),super(n),this.on,this.once,this.un,this.source_=e.source?e.source:null,this.vertex_=e.vertex!==void 0?e.vertex:!0,this.edge_=e.edge!==void 0?e.edge:!0,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.rBush_=new HO,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(e,n){n=n!==void 0?n:!0;const r=Vr(e),i=e.getGeometry();if(i){const s=this.GEOMETRY_SEGMENTERS_[i.getType()];if(s){this.indexedFeaturesExtents_[r]=i.getExtent(Ql());const a=[];if(s(a,i),a.length===1)this.rBush_.insert(sc(a[0]),{feature:e,segment:a[0]});else if(a.length>1){const l=a.map(d=>sc(d)),o=a.map(d=>({feature:e,segment:d}));this.rBush_.load(l,o)}}}n&&(this.featureChangeListenerKeys_[r]=Yi(e,pi.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}handleEvent(e){const n=this.snapTo(e.pixel,e.coordinate,e.map);return n&&(e.coordinate=n.vertex.slice(0,2),e.pixel=n.vertexPixel,this.dispatchEvent(new Aat(pat.SNAP,{vertex:e.coordinate,vertexPixel:e.pixel,feature:n.feature,segment:n.segment}))),super.handleEvent(e)}handleFeatureAdd_(e){const n=Jee(e);n&&this.addFeature(n)}handleFeatureRemove_(e){const n=Jee(e);n&&this.removeFeature(n)}handleFeatureChange_(e){const n=e.target;if(this.handlingDownUpSequence){const r=Vr(n);r in this.pendingFeatures_||(this.pendingFeatures_[r]=n)}else this.updateFeature_(n)}handleUpEvent(e){const n=Object.values(this.pendingFeatures_);return n.length&&(n.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(e,n){const r=n!==void 0?n:!0,i=Vr(e),s=this.indexedFeaturesExtents_[i];if(s){const a=this.rBush_,l=[];a.forEachInExtent(s,function(o){e===o.feature&&l.push(o)});for(let o=l.length-1;o>=0;--o)a.remove(l[o])}r&&(xo(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])}setMap(e){const n=this.getMap(),r=this.featuresListenerKeys_,i=this.getFeatures_();n&&(r.forEach(xo),r.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(xo),this.featureChangeListenerKeys_={}),super.setMap(e),e&&(this.features_?r.push(Yi(this.features_,zl.ADD,this.handleFeatureAdd_,this),Yi(this.features_,zl.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(Yi(this.source_,ml.ADDFEATURE,this.handleFeatureAdd_,this),Yi(this.source_,ml.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(s=>this.addFeature(s)))}snapTo(e,n,r){r.getView().getProjection();const i=ol(n),s=Qb(Oc(sc([i]),r.getView().getResolution()*this.pixelTolerance_)),a=this.rBush_.getInExtent(s),l=a.length;if(l===0)return null;let o,d=1/0,p,A=null;const v=this.pixelTolerance_*this.pixelTolerance_,y=()=>{if(o){const C=r.getPixelFromCoordinate(o);if(Ov(e,C)<=v)return{vertex:o,vertexPixel:[Math.round(C[0]),Math.round(C[1])],feature:p,segment:A}}return null};if(this.vertex_){for(let x=0;x<l;++x){const M=a[x];M.feature.getGeometry().getType()!=="Circle"&&M.segment.forEach(I=>{const P=ol(I),F=Ov(i,P);F<d&&(o=I,d=F,p=M.feature)})}const C=y();if(C)return C}if(this.edge_){for(let x=0;x<l;++x){let M=null;const I=a[x];if(I.feature.getGeometry().getType()==="Circle"){let P=I.feature.getGeometry();M=AJe(i,P)}else{const[P,F]=I.segment;F&&(W4[0]=ol(P),W4[1]=ol(F),M=eG(i,W4))}if(M){const P=Ov(i,M);P<d&&(o=l_(M),A=I.feature.getGeometry().getType()==="Circle"?null:I.segment,d=P)}}const C=y();if(C)return C}return null}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}segmentCircleGeometry_(e,n){this.getMap().getView().getProjection();const s=zJe(n).getCoordinates()[0];for(let a=0,l=s.length-1;a<l;++a)e.push(s.slice(a,a+2))}segmentGeometryCollectionGeometry_(e,n){const r=n.getGeometriesArray();for(let i=0;i<r.length;++i){const s=this.GEOMETRY_SEGMENTERS_[r[i].getType()];s&&s(e,r[i])}}segmentLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length-1;i<s;++i)e.push(r.slice(i,i+2))}segmentMultiLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length-1;l<o;++l)e.push(a.slice(l,l+2))}}segmentMultiPointGeometry_(e,n){n.getCoordinates().forEach(r=>{e.push([r])})}segmentMultiPolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length;l<o;++l){const d=a[l];for(let p=0,A=d.length-1;p<A;++p)e.push(d.slice(p,p+2))}}}segmentPointGeometry_(e,n){e.push([n.getCoordinates()])}segmentPolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const a=r[i];for(let l=0,o=a.length-1;l<o;++l)e.push(a.slice(l,l+2))}}}var gAe=class extends WA{constructor(e){e=e||{},super({handleDownEvent:function(r){return n.handleDownEvent_(r)},handleDragEvent:function(r){return this.handleDragEvent_(r)},handleMoveEvent:function(r){return this.handleMoveEvent_(r)},handleUpEvent:function(r){return this.handleUpEvent_(r)}});var n=this;this.selection_=new _u,this.handles_=new _u,this.overlayLayer_=new cm({source:new L_({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(r){return n.style[(r.get("handle")||"default")+(r.get("constraint")||"")+(r.get("option")||"")]},updateWhileAnimating:!0,updateWhileInteracting:!0}),this.features_=e.features,typeof e.filter=="function"&&(this._filter=e.filter),this.layers_=e.layers?e.layers instanceof Array?e.layers:[e.layers]:null,this._handleEvent=e.condition||function(){return!0},this.addFn_=e.addCondition||function(){return!1},this.setPointRadius(e.pointRadius),this.set("translateFeature",e.translateFeature!==!1),this.set("translate",e.translate!==!1),this.set("translateBBox",e.translateBBox===!0),this.set("stretch",e.stretch!==!1),this.set("scale",e.scale!==!1),this.set("rotate",e.rotate!==!1),this.set("keepAspectRatio",e.keepAspectRatio||function(r){return r.originalEvent.shiftKey}),this.set("modifyCenter",e.modifyCenter||function(r){return r.originalEvent.metaKey||r.originalEvent.ctrlKey}),this.set("noFlip",e.noFlip||!1),this.set("selection",e.selection!==!1),this.set("hitTolerance",e.hitTolerance||0),this.set("enableRotatedTransform",e.enableRotatedTransform||!1),this.set("keepRectangle",e.keepRectangle||!1),this.set("buffer",e.buffer||0),this.on("propertychange",function(){this.drawSketch_()}),this.setDefaultStyle()}setMap(e){var n=this.getMap();if(n){var r=n.getTargetElement();n.removeLayer(this.overlayLayer_),this.previousCursor_&&r&&(r.style.cursor=this.previousCursor_),this.previousCursor_=void 0}super.setMap(e),this.overlayLayer_.setMap(e),e===null&&this.select(null),e!==null&&(this.isTouch=/touch/.test(e.getViewport().className),this.setDefaultStyle())}setActive(e){this.select(null),this.overlayLayer_&&this.overlayLayer_.setVisible(e),super.setActive(e)}setDefaultStyle(e){e=e||{};var n=e.pointStroke||new Za({color:[255,0,0,1],width:1}),r=e.stroke||new Za({color:[255,0,0,1],width:1,lineDash:[4,4]}),i=e.fill||new Hl({color:[255,0,0,.01]}),s=e.pointFill||new Hl({color:[255,255,255,.8]}),a=new lb({fill:s,stroke:n,radius:this.isTouch?12:6,displacement:this.isTouch?[24,-24]:[12,-12],points:15});a.setDisplacement||(a.getAnchor()[0]=this.isTouch?-10:-5);var l=new lb({fill:s,stroke:n,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),o=new lb({fill:s,stroke:n,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function d(p,A,v){return[new No({image:p,stroke:A,fill:v})]}this.style={default:d(l,r,i),translate:d(l,n,s),rotate:d(a,n,s),rotate0:d(l,n,s),scale:d(l,n,s),scale1:d(l,n,s),scale2:d(l,n,s),scale3:d(l,n,s),scalev:d(o,n,s),scaleh1:d(o,n,s),scalev2:d(o,n,s),scaleh3:d(o,n,s)},this.drawSketch_()}setStyle(e,n){if(n){n instanceof Array?this.style[e]=n:this.style[e]=[n];for(var r=0;r<this.style[e].length;r++){var i=this.style[e][r].getImage();i&&(e=="rotate"&&(i.getAnchor()[0]=-5),this.isTouch&&i.setScale(1.8));var s=this.style[e][r].getText();s&&(e=="rotate"&&s.setOffsetX(this.isTouch?14:7),this.isTouch&&s.setScale(1.8))}this.drawSketch_()}}getFeatureAtPixel_(e){var n=this;return this.getMap().forEachFeatureAtPixel(e,function(r,i){var s=!1;if(!i){if(r===n.bbox_)return n.get("translateBBox")?{feature:r,handle:"translate",constraint:"",option:""}:!1;if(n.handles_.forEach(function(l){l===r&&(s=!0)}),s)return{feature:r,handle:r.get("handle"),constraint:r.get("constraint"),option:r.get("option")}}if(!n.get("selection"))return n.selection_.getArray().some(function(l){return r===l})?{feature:r}:null;if(n._filter)return n._filter(r,i)?{feature:r}:null;if(n.layers_){for(var a=0;a<n.layers_.length;a++)if(n.layers_[a]===i)return{feature:r};return null}else return n.features_?(n.features_.forEach(function(l){l===r&&(s=!0)}),s?{feature:r}:null):{feature:r}},{hitTolerance:this.get("hitTolerance")})||{}}getGeometryRotateToZero_(e,n){var r=e.getGeometry(),i=this.getMap().getView().getRotation();if(i===0||!this.get("enableRotatedTransform"))return n?r.clone():r;var s=r.clone();return s.rotate(i*-1,this.getMap().getView().getCenter()),s}_isRectangle(e){if(this.get("keepRectangle")&&e.getType()==="Polygon"){var n=e.getCoordinates()[0];return n.length===5}return!1}drawSketch_(e){var n,r,i,s=this.selection_.item(0)&&this._isRectangle(this.selection_.item(0).getGeometry());if(this.overlayLayer_.getSource().clear(),!!this.selection_.getLength()){var a=this.getMap().getView().getRotation(),l=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent(),o;s&&(o=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4),o.unshift(o[3])),l=Oc(l,this.get("buffer")),this.selection_.forEach((function(x){var M=this.getGeometryRotateToZero_(x).getExtent();sb(l,M)}).bind(this));var d=this.selection_.getLength()===1?this._pointRadius(this.selection_.item(0)):0;if(d&&!(d instanceof Array)&&(d=[d,d]),e===!0)this.ispt_||(this.overlayLayer_.getSource().addFeature(new Ys({geometry:new So(this.center_),handle:"rotate0"})),i=Py(l),this.get("enableRotatedTransform")&&a!==0&&i.rotate(a,this.getMap().getView().getCenter()),r=this.bbox_=new Ys(i),this.overlayLayer_.getSource().addFeature(r));else{if(this.ispt_){var p=this.getMap().getPixelFromCoordinate([l[0],l[1]]);if(p){var A=d&&d[0]||10,v=d&&d[1]||10;l=sc([this.getMap().getCoordinateFromPixel([p[0]-A,p[1]-v]),this.getMap().getCoordinateFromPixel([p[0]+A,p[1]+v])])}}i=s?new La([o]):Py(l),this.get("enableRotatedTransform")&&a!==0&&i.rotate(a,this.getMap().getView().getCenter()),r=this.bbox_=new Ys(i);var y=[],C=i.getCoordinates()[0];if(!this.ispt_||d){if(y.push(r),!this.iscircle_&&!this.ispt_&&this.get("stretch")&&this.get("scale"))for(n=0;n<C.length-1;n++)r=new Ys({geometry:new So([(C[n][0]+C[n+1][0])/2,(C[n][1]+C[n+1][1])/2]),handle:"scale",constraint:n%2?"h":"v",option:n}),y.push(r);if(this.get("scale"))for(n=0;n<C.length-1;n++)r=new Ys({geometry:new So(C[n]),handle:"scale",option:n}),y.push(r);this.get("translate")&&!this.get("translateFeature")&&(r=new Ys({geometry:new So([(C[0][0]+C[2][0])/2,(C[0][1]+C[2][1])/2]),handle:"translate"}),y.push(r))}!this.iscircle_&&this.get("rotate")&&(r=new Ys({geometry:new So(C[3]),handle:"rotate"}),y.push(r)),this.overlayLayer_.getSource().addFeatures(y)}}}select(e,n){if(!e){this.selection_&&(this.selection_.clear(),this.drawSketch_());return}if(!(!e.getGeometry||!e.getGeometry())){if(n)this.selection_.push(e);else{var r=this.selection_.getArray().indexOf(e);this.selection_.removeAt(r)}this.ispt_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Point":!1,this.iscircle_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Circle":!1,this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:e,features:this.selection_})}}setSelection(e){this.selection_.clear(),e.forEach((function(n){this.selection_.push(n)}).bind(this)),this.ispt_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Point":!1,this.iscircle_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Circle":!1,this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})}watchFeatures_(){this._featureListeners&&this._featureListeners.forEach(function(e){Rf(e)}),this._featureListeners=[],this.selection_.forEach((function(e){this._featureListeners.push(e.on("change",(function(){this.isUpdating_||this.drawSketch_()}).bind(this)))}).bind(this))}handleDownEvent_(e){if(this._handleEvent(e,this.selection_)){var n=this.getFeatureAtPixel_(e.pixel),r=n.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(r)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(n.handle="translate"),n.handle){this.mode_=n.handle,this.opt_=n.option,this.constraint_=n.constraint;var i=this.getMap().getView().getRotation();this.coordinate_=r.get("handle")?r.getGeometry().getCoordinates():e.coordinate,this.pixel_=this.getMap().getCoordinateFromPixel(this.coordinate_),this.geoms_=[],this.rotatedGeoms_=[];for(var s=Ql(),a=Ql(),l=0,o;o=this.selection_.item(l);l++)if(this.geoms_.push(o.getGeometry().clone()),s=sb(s,o.getGeometry().getExtent()),this.get("enableRotatedTransform")&&i!==0){var d=this.getGeometryRotateToZero_(o,!0);this.rotatedGeoms_.push(d),a=sb(a,d.getExtent())}if(this.extent_=Py(s).getCoordinates()[0],this.get("enableRotatedTransform")&&i!==0&&(this.rotatedExtent_=Py(a).getCoordinates()[0]),this.mode_==="rotate"){this.center_=this.getCenter()||Gu(s);var p=e.map.getTargetElement();p.style.cursor=this.Cursors.rotate0,this.previousCursor_=p.style.cursor}else this.center_=Gu(s);return this.angle_=Math.atan2(this.center_[1]-e.coordinate[1],this.center_[0]-e.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:e.pixel,coordinate:e.coordinate}),!0}else if(this.get("selection")){if(r){this.addFn_(e)||this.selection_.clear();var A=this.selection_.getArray().indexOf(r);A<0?this.selection_.push(r):this.selection_.removeAt(A)}else this.selection_.clear();return this.ispt_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Point":!1,this.iscircle_=this.selection_.getLength()===1?this.selection_.item(0).getGeometry().getType()=="Circle":!1,this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:r,features:this.selection_,pixel:e.pixel,coordinate:e.coordinate}),!1}}}getCenter(){return this.get("center")}setCenter(e){return this.set("center",e)}handleDragEvent_(e){if(this._handleEvent(e,this.features_)){var n=this.getMap().getView().getRotation(),r,i,s,a,l=[this.coordinate_[0],this.coordinate_[1]],o=[e.coordinate[0],e.coordinate[1]];switch(this.isUpdating_=!0,this.mode_){case"rotate":{var d=Math.atan2(this.center_[1]-o[1],this.center_[0]-o[0]);if(!this.ispt)for(r=0,s;s=this.selection_.item(r);r++)a=this.geoms_[r].clone(),a.rotate(d-this.angle_,this.center_),a.getType()=="Circle"&&a.setCenterAndRadius(a.getCenter(),a.getRadius()),s.setGeometry(a);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:d-this.angle_,pixel:e.pixel,coordinate:e.coordinate});break}case"translate":{var p=o[0]-l[0],A=o[1]-l[1];for(r=0,s;s=this.selection_.item(r);r++)s.getGeometry().translate(p,A);this.handles_.forEach(function(W){W.getGeometry().translate(p,A)}),this.coordinate_=e.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[p,A],pixel:e.pixel,coordinate:e.coordinate});break}case"scale":{var v=this.center_;if(this.get("modifyCenter")(e)){var y=this.extent_;this.get("enableRotatedTransform")&&n!==0&&(y=this.rotatedExtent_),v=y[(Number(this.opt_)+2)%4]}var C=this.geoms_.length==1&&this._isRectangle(this.geoms_[0]),x=this.constraint_,M=this.opt_,I=this.coordinate_,P=e.coordinate;if(this.get("enableRotatedTransform")&&n!==0){var F=new So(this.coordinate_);F.rotate(n*-1,v),I=F.getCoordinates();var D=new So(e.coordinate);D.rotate(n*-1,v),P=D.getCoordinates()}var V=(P[0]-v[0])/(I[0]-v[0]),H=(P[1]-v[1])/(I[1]-v[1]),Q=[P[0]-I[0],P[1]-I[1]];if(this.get("enableRotatedTransform")&&n!==0){var G=new So(v);G.rotate(n*-1,this.getMap().getView().getCenter()),v=G.getCoordinates()}for(this.get("noFlip")&&(V<0&&(V=-V),H<0&&(H=-H)),this.constraint_?this.constraint_=="h"?V=1:H=1:this.get("keepAspectRatio")(e)&&(V=H=Math.min(V,H)),r=0,s;s=this.selection_.item(r);r++)a=n===0||!this.get("enableRotatedTransform")?this.geoms_[r].clone():this.rotatedGeoms_[r].clone(),a.applyTransform((function(W,te,q){if(q<2)return te;if(C){var Y=[[6],[0,8],[2],[4]],ee=[W[0],W[1]],ce=[W[2],W[3]],se=[W[4],W[5]],le=[W[6],W[7]],ie=[W[8],W[9]];if(x){var pe=M%2===0?this._countVector(ee,ce):this._countVector(le,ee),ue=this._projectVectorOnVector(Q,pe),me=M+1<Y.length?M+1:0,Le=[...Y[M],...Y[me]];for(i=0;i<W.length;i+=q)te[i]=Le.includes(i)?W[i]+ue[0]:W[i],te[i+1]=Le.includes(i)?W[i+1]+ue[1]:W[i+1]}else{var ae,be;switch(M){case 0:Q=this._countVector(le,P),ae=this._projectVectorOnVector(Q,this._countVector(se,le)),be=this._projectVectorOnVector(Q,this._countVector(ee,le)),[te[0],te[1]]=this._movePoint(ee,ae),[te[4],te[5]]=this._movePoint(se,be),[te[6],te[7]]=this._movePoint(le,Q),[te[8],te[9]]=this._movePoint(ie,ae);break;case 1:Q=this._countVector(ee,P),ae=this._projectVectorOnVector(Q,this._countVector(le,ee)),be=this._projectVectorOnVector(Q,this._countVector(ce,ee)),[te[0],te[1]]=this._movePoint(ee,Q),[te[2],te[3]]=this._movePoint(ce,ae),[te[6],te[7]]=this._movePoint(le,be),[te[8],te[9]]=this._movePoint(ie,Q);break;case 2:Q=this._countVector(ce,P),ae=this._projectVectorOnVector(Q,this._countVector(ee,ce)),be=this._projectVectorOnVector(Q,this._countVector(se,ce)),[te[0],te[1]]=this._movePoint(ee,be),[te[2],te[3]]=this._movePoint(ce,Q),[te[4],te[5]]=this._movePoint(se,ae),[te[8],te[9]]=this._movePoint(ie,be);break;case 3:Q=this._countVector(se,P),ae=this._projectVectorOnVector(Q,this._countVector(ce,se)),be=this._projectVectorOnVector(Q,this._countVector(le,se)),[te[2],te[3]]=this._movePoint(ce,be),[te[4],te[5]]=this._movePoint(se,Q),[te[6],te[7]]=this._movePoint(le,ae);break}}}else for(i=0;i<W.length;i+=q)V!=1&&(te[i]=v[0]+(W[i]-v[0])*V),H!=1&&(te[i+1]=v[1]+(W[i+1]-v[1])*H);return a.getType()=="Circle"&&a.setCenterAndRadius(a.getCenter(),a.getRadius()),te}).bind(this)),this.get("enableRotatedTransform")&&n!==0&&a.rotate(n,this.getMap().getView().getCenter()),s.setGeometry(a);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[V,H],pixel:e.pixel,coordinate:e.coordinate});break}}this.isUpdating_=!1}}handleMoveEvent_(e){if(this._handleEvent(e,this.features_)&&!this.mode_){var n=this.getFeatureAtPixel_(e.pixel),r=e.map.getTargetElement();if(n.feature){var i=n.handle?this.Cursors[(n.handle||"default")+(n.constraint||"")+(n.option||"")]:this.Cursors.select;this.previousCursor_===void 0&&(this.previousCursor_=r.style.cursor),r.style.cursor=i}else this.previousCursor_!==void 0&&(r.style.cursor=this.previousCursor_),this.previousCursor_=void 0}}handleUpEvent_(e){if(this.mode_==="rotate"){var n=e.map.getTargetElement();n.style.cursor=this.Cursors.default,this.previousCursor_=void 0}return this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1}setPointRadius(e){typeof e=="function"?this._pointRadius=e:this._pointRadius=function(){return e}}getFeatures(){return this.selection_}_projectVectorOnVector(e,n){var r=(e[0]*n[0]+e[1]*n[1])/(n[0]*n[0]+n[1]*n[1]);return[n[0]*r,n[1]*r]}_countVector(e,n){return[n[0]-e[0],n[1]-e[1]]}_movePoint(e,n){return[e[0]+n[0],e[1]+n[1]]}};gAe.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"};var A0=class extends Od{constructor(e){e=e||{},super(),this.duration_=typeof e.duration=="number"?e.duration>=0?e.duration:0:1e3,this.fade_=typeof e.fade=="function"?e.fade:null,this.repeat_=Number(e.repeat);var n=typeof e.easing=="function"?e.easing:_G;e.revers?this.easing_=function(r){return 1-n(r)}:this.easing_=n,this.hiddenStyle=e.hiddenStyle}drawGeom_(e,n,r){var i={type:"drawing",time:e.time,feature:e.feature,start:e.start,stop:e.stop,rotation:e.rotation,style:e.style,extra:e.extra};this.dispatchEvent(i);var s=i.style instanceof Array?i.style:[i.style];this.fade_&&(e.context.globalAlpha=this.fade_(1-e.elapsed));for(var a=0;a<s.length;a++)try{var l=e.vectorContext||nN(e),o=O8(e,s[a]);l.setStyle(o),o.getZIndex()<0?l.drawGeometry(r||n):l.drawGeometry(n)}catch{}}animate(){return!1}};A0.hiddenStyle=new No({image:new I_({}),stroke:new Za({color:"transparent"})});Bv.prototype.animateFeature=function(t,e){var n=this._featureAnimationLayer;n||(n=this._featureAnimationLayer=new cm({source:new L_}),n.setMap(this)),n.getSource().addFeature(t);var r=e.on("animationend",function(i){i.feature===t&&(n.getSource().removeFeature(t),Rf(r))});n.animateFeature(t,e)};pG.prototype.animateFeature=function(t,e,n){var r=this,i,s=t.getStyle(),a=s||(this.getStyleFunction?this.getStyleFunction()(t):null);a||(a=[]),a instanceof Array||(a=[a]);var l={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:!1,feature:t,geom:t.getGeometry(),typeGeom:t.getGeometry().getType(),bbox:t.getGeometry().getExtent(),coord:Gu(t.getGeometry().getExtent()),style:a};e instanceof Array||(e=[e]);for(var o=e.length-1;o>=0;o--)e[o].duration_===0&&e.splice(o,1);var d=0,p=0,A=n&&this.getFilters?this.getFilters():[];function v(x){l.type=x.type;try{l.vectorContext=x.vectorContext||nN(x)}catch{}if(l.frameState=x.frameState,l.inversePixelTransform=x.inversePixelTransform,l.extent||(l.extent=x.frameState.extent,l.start=x.frameState.time,l.context=x.context),l.time=x.frameState.time-l.start,l.elapsed=l.time/e[p].duration_,l.elapsed>1&&(l.elapsed=1),x.context.save(),A.forEach(function(I){I.get("active")&&I.precompose(x)}),this.getOpacity&&(x.context.globalAlpha=this.getOpacity()),!e[p].animate(l))d++,d<e[p].repeat_?l.extent=!1:p<e.length-1?(e[p].dispatchEvent({type:"animationend",feature:t}),p++,d=0,l.extent=!1):y();else{var M={type:"animating",step:p,start:l.start,time:l.time,elapsed:l.elapsed,rotation:l.rotation||0,geom:l.geom,coordinate:l.coord,feature:t,extra:l.extra||{},style:a};e[p].dispatchEvent(M),r.dispatchEvent(M)}A.forEach(function(I){I.get("active")&&I.postcompose(x)}),x.context.restore(),x.frameState.animate=!0}function y(x){Rf(i),i=null,t.setStyle(s),l.stop=new Date().getTime();var M={type:"animationend",feature:t};if(x)for(var I in x)x.hasOwnProperty(I)&&(M[I]=x[I]);e[p].dispatchEvent(M),r.dispatchEvent(M)}function C(x){if(e.length&&!i){if(l.stop&&(l.start=new Date().getTime()-l.stop+l.start,l.stop=0),i=r.on(["postcompose","postrender"],v.bind(r)),r.renderSync)try{r.renderSync()}catch{}else r.changed();t.setStyle(e[p].hiddenStyle||A0.hiddenStyle);var M={type:"animationstart",feature:t};if(x)for(var I in x)x.hasOwnProperty(I)&&(M[I]=x[I]);e[p].dispatchEvent(M),r.dispatchEvent(M)}}return C(),{start:C,stop:y,isPlaying:function(){return!!i}}};var mat=class extends A0{constructor(e){e=e||{},super(e),this.speed_=e.speed||0,this.side_=e.side||"top"}animate(e){if(!e.time){var n=e.frameState.viewState.rotation,r=e.frameState.size[1]*e.frameState.viewState.resolution;this.side_!="top"&&(r*=-1),this.dx=-Math.sin(n)*r,this.dy=Math.cos(n)*r,this.speed_&&(this.duration_=r/this.speed_/e.frameState.viewState.resolution)}var i=e.geom.clone();return i.translate(this.dx*(1-this.easing_(e.elapsed)),this.dy*(1-this.easing_(e.elapsed))),this.drawGeom_(e,i,e.geom),e.time<=this.duration_}},vat=class extends A0{constructor(e){e=e||{},super(e),this.speed_=e.speed||0}animate(e){return e.context.globalAlpha=this.easing_(e.elapsed),this.drawGeom_(e,e.geom),e.time<=this.duration_}},yat=class extends A0{constructor(e){switch(e=e||{},super(e),this.speed_=e.speed||0,this.path_=e.path,e.rotate){case!0:case 0:this.rotate_=0;break;default:this.rotate_=e.rotate||!1;break}this.path_&&this.path_.getGeometry&&(this.path_=this.path_.getGeometry()),this.path_&&this.path_.getLineString&&(this.path_=this.path_.getLineString()),this.path_.getLength?(this.dist_=this.path_.getLength(),this.path_&&this.path_.getCoordinates&&(this.path_=this.path_.getCoordinates())):this.dist_=0,this.speed_>0&&(this.duration_=this.dist_/this.speed_)}animate(e){if(!e.time&&!this.dist_)return!1;var n=this.dist_*this.easing_(e.elapsed),r,i,s,a,l,o,d=0;i=this.path_[0];for(var p=1;p<this.path_.length;p++){if(r=i,i=this.path_[p],a=i[0]-r[0],l=i[1]-r[1],o=Math.sqrt(a*a+l*l),o&&d+o>=n){e.extra={index:p,coordinates:i},s=(n-d)/o,i=[r[0]+(i[0]-r[0])*s,r[1]+(i[1]-r[1])*s];break}d+=o}var A=e.style;if(e.rotation=Math.PI/2+Math.atan2(r[1]-i[1],r[0]-i[0]),this.rotate_!==!1){var v=[],y=this.rotate_-e.rotation+e.frameState.viewState.rotation;e.rotation=Math.PI/2+Math.atan2(r[1]-i[1],r[0]-i[0]);for(var C=0;s=e.style[C];C++)s.getImage()&&s.getImage().setRotation(y),v.push(s);e.style=v}return e.geom.setCoordinates(i),this.drawGeom_(e,e.geom),e.style=A,e.time<=this.duration_}},_at=class extends A0{constructor(e){e=e||{},super(e),this.amplitude_=e.amplitude||40,this.bounce_=-Math.PI*(e.bounce||6),this.horizontal_=e.horizontal}animate(e){var n=e.geom.clone(),r=e.geom.clone(),i=this.easing_(e.elapsed);return i=Math.sin(this.bounce_*i)*this.amplitude_*(1-i)*e.frameState.viewState.resolution,this.horizontal_?(n.translate(i,0),r.translate(i,0)):n.translate(0,i),this.drawGeom_(e,n,r),e.time<=this.duration_}},bat=class extends A0{constructor(e){e=e||{},super(e),this.speed_=e.speed||0,this.side_=e.side||"left"}animate(e){e.time||(this.side_=="left"?this.dx=e.extent[0]-e.bbox[2]:this.dx=e.extent[2]-e.bbox[0],this.speed_&&(this.duration_=Math.abs(this.dx)/this.speed_/e.frameState.viewState.resolution));var n=e.geom.clone();return n.translate(this.dx*(1-this.easing_(e.elapsed)),0),this.drawGeom_(e,n),e.time<=this.duration_}},wat=class extends A0{constructor(e){super(e)}animate(e){var n=this.easing_(e.elapsed);if(n){e.context.save();var r=e.frameState.pixelRatio;e.context.globalAlpha=n,e.context.scale(n,1/n);var i=e.frameState.coordinateToPixelTransform,s=(1/n-1)*r*(i[0]*e.coord[0]+i[1]*e.coord[1]+i[4]),a=(n-1)*r*(i[2]*e.coord[0]+i[3]*e.coord[1]+i[5]);e.context.translate(s,a),this.drawGeom_(e,e.geom),e.context.restore()}return e.time<=this.duration_}},xat=class extends A0{constructor(e){e=e||{},super(e),this.set("zoomout",e.zoomOut)}animate(e){var n=this.easing_(e.elapsed);if(n){this.get("zoomout")&&(n=1/n);var r=e.style,i,s,a=[];for(i=0;i<r.length;i++)s=r[i].getImage(),s&&(a[i]=s.getScale(),e.type==="postrender"?s.setScale(a[i]*n/e.frameState.pixelRatio):s.setScale(a[i]*n));for(this.drawGeom_(e,e.geom),i=0;i<r.length;i++)s=r[i].getImage(),s&&s.setScale(a[i])}return e.time<=this.duration_}};class Cat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ys,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?Oi(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Oi(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Xi()}readFeature(e,n){return Xi()}readFeatures(e,n){return Xi()}readGeometry(e,n){return Xi()}readProjection(e){return Xi()}writeFeature(e,n){return Xi()}writeFeatures(e,n){return Xi()}writeGeometry(e,n){return Xi()}}const vM=Cat;function dl(t,e,n){const r=n?Oi(n.featureProjection):null,i=n?Oi(n.dataProjection):null;let s=t;if(r&&i&&!bd(r,i)){e&&(s=t.clone());const a=e?r:i,l=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,l):s.applyTransform(nE(a,l))}if(e&&n&&n.decimals!==void 0){const a=Math.pow(10,n.decimals),l=function(o){for(let d=0,p=o.length;d<p;++d)o[d]=Math.round(o[d]*a)/a;return o};s===t&&(s=t.clone()),s.applyTransform(l)}return s}function I7(t,e){const n=e?Oi(e.featureProjection):null,r=e?Oi(e.dataProjection):null;return n&&r&&!bd(n,r)?m8(t,r,n):t}const Eat={Point:So,LineString:ko,Polygon:La,MultiPoint:Nd,MultiLineString:kc,MultiPolygon:Dc};function Sat(t,e,n){return Array.isArray(e[0])?(ife(t,0,e,n)||(t=t.slice(),y8(t,0,e,n)),t):(dG(t,0,e,n)||(t=t.slice(),LO(t,0,e,n)),t)}function mAe(t,e){var s;const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(a=>mAe({...t,geometry:a})).flat();const r=n.type==="MultiPolygon"?"Polygon":n.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=n.layout.length;return dl(new Nu(r,r==="Polygon"?Sat(n.flatCoordinates,n.ends,i):n.flatCoordinates,(s=n.ends)==null?void 0:s.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function B7(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(i=>B7(i,e));return new xu(r)}const n=Eat[t.type];return dl(new n(t.flatCoordinates,t.layout,t.ends),!1,e)}class M7 extends vM{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(HR(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(HR(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return Xi()}readFeaturesFromObject(e,n){return Xi()}readGeometry(e,n){return this.readGeometryFromObject(HR(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return Xi()}readProjection(e){return this.readProjectionFromObject(HR(e))}readProjectionFromObject(e){return Xi()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return Xi()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return Xi()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return Xi()}}function HR(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}const Tat={Point:Lat,LineString:Rat,Polygon:Nat,MultiPoint:Fat,MultiLineString:Pat,MultiPolygon:Oat},Iat={Point:kat,LineString:Dat,Polygon:Uat,MultiPoint:$at,MultiLineString:zat,MultiPolygon:Vat};class Bat extends M7{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,n,r){const i=e,s=ete(i.geometry,n),a=new Ys;if(this.geometryName_&&a.setGeometryName(this.geometryName_),a.setGeometry(s),i.attributes){a.setProperties(i.attributes,!0);const l=i.attributes[r];l!==void 0&&a.setId(l)}return a}readFeaturesFromObject(e,n){if(n=n||{},e.features){const r=e,i=[],s=r.features;for(let a=0,l=s.length;a<l;++a)i.push(this.readFeatureFromObject(s[a],n,e.objectIdFieldName));return i}return[this.readFeatureFromObject(e,n)]}readGeometryFromObject(e,n){return ete(e,n)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const r=e.spatialReference.wkid;return Oi("EPSG:"+r)}return null}writeGeometryObject(e,n){return tte(e,this.adaptOptions(n))}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={};if(!e.hasProperties())return r.attributes={},r;const i=e.getProperties(),s=e.getGeometry();if(s){r.geometry=tte(s,n);const a=n&&(n.dataProjection||n.featureProjection);a&&(r.geometry.spatialReference={wkid:Number(Oi(a).getCode().split(":").pop())}),delete i[e.getGeometryName()]}return Zv(i)?r.attributes={}:r.attributes=i,r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{features:r}}}function ete(t,e){if(!t)return null;let n;if(typeof t.x=="number"&&typeof t.y=="number")n="Point";else if(t.points)n="MultiPoint";else if(t.paths)t.paths.length===1?n="LineString":n="MultiLineString";else if(t.rings){const i=t,s=UE(i),a=Mat(i.rings,s);a.length===1?(n="Polygon",t=Object.assign({},t,{rings:a[0]})):(n="MultiPolygon",t=Object.assign({},t,{rings:a}))}const r=Tat[n];return dl(r(t),!1,e)}function Mat(t,e){const n=[],r=[],i=[];let s,a;for(s=0,a=t.length;s<a;++s)n.length=0,oM(n,0,t[s],e.length),z2(n,0,n.length,e.length)?r.push([t[s]]):i.push(t[s]);for(;i.length;){const l=i.shift();let o=!1;for(s=r.length-1;s>=0;s--){const d=r[s][0];if(Cd(new e0(d).getExtent(),new e0(l).getExtent())){r[s].push(l),o=!0;break}}o||r.push([l.reverse()])}return r}function Lat(t){let e;return t.m!==void 0&&t.z!==void 0?e=new So([t.x,t.y,t.z,t.m],"XYZM"):t.z!==void 0?e=new So([t.x,t.y,t.z],"XYZ"):t.m!==void 0?e=new So([t.x,t.y,t.m],"XYM"):e=new So([t.x,t.y]),e}function Rat(t){const e=UE(t);return new ko(t.paths[0],e)}function Pat(t){const e=UE(t);return new kc(t.paths,e)}function UE(t){let e="XY";return t.hasZ===!0&&t.hasM===!0?e="XYZM":t.hasZ===!0?e="XYZ":t.hasM===!0&&(e="XYM"),e}function Fat(t){const e=UE(t);return new Nd(t.points,e)}function Oat(t){const e=UE(t);return new Dc(t.rings,e)}function Nat(t){const e=UE(t);return new La(t.rings,e)}function kat(t,e){const n=t.getCoordinates();let r;const i=t.getLayout();if(i==="XYZ")r={x:n[0],y:n[1],z:n[2]};else if(i==="XYM")r={x:n[0],y:n[1],m:n[2]};else if(i==="XYZM")r={x:n[0],y:n[1],z:n[2],m:n[3]};else if(i==="XY")r={x:n[0],y:n[1]};else throw new Error("Invalid geometry layout");return r}function yM(t){const e=t.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function Dat(t,e){const n=yM(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}}function Uat(t,e){const n=yM(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}}function zat(t,e){const n=yM(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}}function $at(t,e){const n=yM(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}}function Vat(t,e){const n=yM(t),r=t.getCoordinates(!1),i=[];for(let s=0;s<r.length;s++)for(let a=r[s].length-1;a>=0;a--)i.push(r[s][a]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}function tte(t,e){const n=Iat[t.getType()];return n(dl(t,!0,e),e)}const Hat=Bat;class Gat extends M7{constructor(e){e=e||{},super(),this.dataProjection=Oi(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Oi(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=L7(r.geometry);if(this.featureClass===Nu)return mAe({geometry:i,id:r.id,properties:r.properties},n);const s=new Ys;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(B7(i,n)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,n){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let l=0,o=a.length;l<o;++l){const d=this.readFeatureFromObject(a[l],n);d&&i.push(d)}}else i=[this.readFeatureFromObject(e,n)];return i.flat()}readGeometryFromObject(e,n){return Qat(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if(n.type=="name")r=Oi(n.properties.name);else if(n.type==="EPSG")r=Oi("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=$8(a,n),delete s[e.getGeometryName()]),Zv(s)||(r.properties=s),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return $8(e,this.adaptOptions(n))}}function L7(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=Kat(t);break}case"LineString":{n=Wat(t);break}case"Polygon":{n=Zat(t);break}case"MultiPoint":{n=Yat(t);break}case"MultiLineString":{n=qat(t);break}case"MultiPolygon":{n=Xat(t);break}case"GeometryCollection":{n=jat(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function Qat(t,e){const n=L7(t);return B7(n,e)}function jat(t,e){return t.geometries.map(function(r){return L7(r)})}function Kat(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:jb(e.length)}}function Wat(t){var r;const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:jb(((r=e[0])==null?void 0:r.length)||2)}}function qat(t){var s,a;const e=t.coordinates,n=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length)||2,r=[],i=aM(r,0,e,n);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:jb(n)}}function Yat(t){var n;const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:jb(((n=e[0])==null?void 0:n.length)||2)}}function Xat(t){var s,a;const e=t.coordinates,n=[],r=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,i=qde(n,0,e,r);return{type:"MultiPolygon",flatCoordinates:n,ends:i,layout:jb(r)}}function Zat(t){var s,a;const e=t.coordinates,n=[],r=(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length,i=aM(n,0,e,r);return{type:"Polygon",flatCoordinates:n,ends:i,layout:jb(r)}}function $8(t,e){t=dl(t,!0,e);const n=t.getType();let r;switch(n){case"Point":{r=ilt(t);break}case"LineString":{r=elt(t);break}case"Polygon":{r=slt(t,e);break}case"MultiPoint":{r=nlt(t);break}case"MultiLineString":{r=tlt(t);break}case"MultiPolygon":{r=rlt(t,e);break}case"GeometryCollection":{r=Jat(t,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return r}function Jat(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return $8(r,e)})}}function elt(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function tlt(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function nlt(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function rlt(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function ilt(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function slt(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const olt=Gat,Pb="http://www.w3.org/2001/XMLSchema-instance";function Rs(t,e){return zE().createElementNS(t,e)}function Gh(t,e){return vAe(t,e,[]).join("")}function vAe(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n.push(t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)vAe(r,e,n)}return n}function gp(t){return"documentElement"in t}function alt(t,e,n){return t.getAttributeNS(e,n)||""}function mp(t){return new DOMParser().parseFromString(t,"application/xml")}function s5(t,e){return function(n,r){const i=t.call(e!==void 0?e:this,n,r);if(i!==void 0){const s=r[r.length-1];yo(s,i)}}}function Fi(t,e){return function(n,r){const i=t.call(e!==void 0?e:this,n,r);i!==void 0&&r[r.length-1].push(i)}}function rs(t,e){return function(n,r){const i=t.call(e!==void 0?e:this,n,r);i!==void 0&&(r[r.length-1]=i)}}function Da(t,e,n){return function(r,i){const s=t.call(this,r,i);if(s!==void 0){const a=i[i.length-1],l=r.localName;let o;l in a?o=a[l]:(o=[],a[l]=o),o.push(s)}}}function Wt(t,e,n){return function(r,i){const s=t.call(this,r,i);if(s!==void 0){const a=i[i.length-1],l=e!==void 0?e:r.localName;a[l]=s}}}function on(t,e){return function(n,r,i){t.call(e!==void 0?e:this,n,r,i),i[i.length-1].node.appendChild(n)}}function yAe(t,e){let n,r;return function(i,s,a){if(n===void 0){n={};const l={};l[i.localName]=t,n[i.namespaceURI]=l,r=Tl(i.localName)}_Ae(n,r,s,a)}}function Tl(t,e){return function(n,r,i){const a=r[r.length-1].node;let l=t;l===void 0&&(l=i);const o=e!==void 0?e:a.namespaceURI;return Rs(o,l)}}const Cu=Tl();function Pd(t,e){const n=e.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=t[e[i]];return r}function nr(t,e,n){n=n!==void 0?n:{};let r,i;for(r=0,i=t.length;r<i;++r)n[t[r]]=e;return n}function Bd(t,e,n,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=t[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,n)}}}function gr(t,e,n,r,i){return r.push(t),Bd(e,n,r,i),r.pop()}function _Ae(t,e,n,r,i,s){const a=(i!==void 0?i:n).length;let l,o;for(let d=0;d<a;++d)l=n[d],l!==void 0&&(o=e.call(s!==void 0?s:this,l,r,i!==void 0?i[d]:void 0),o!==void 0&&t[o.namespaceURI][o.localName].call(s,o,l,r))}function Es(t,e,n,r,i,s,a){return i.push(t),_Ae(e,n,r,i,s,a),i.pop()}let q4;function llt(){return q4===void 0&&typeof XMLSerializer<"u"&&(q4=new XMLSerializer),q4}let Y4;function zE(){return Y4===void 0&&typeof document<"u"&&(Y4=document.implementation.createDocument("","",null)),Y4}class _M extends vM{constructor(){super(),this.xmlSerializer_=llt()}getType(){return"xml"}readFeature(e,n){if(!e)return null;if(typeof e=="string"){const r=mp(e);return this.readFeatureFromDocument(r,n)}return gp(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n)}readFeatureFromDocument(e,n){const r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null}readFeatureFromNode(e,n){return null}readFeatures(e,n){if(!e)return[];if(typeof e=="string"){const r=mp(e);return this.readFeaturesFromDocument(r,n)}return gp(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n)}readFeaturesFromDocument(e,n){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&yo(r,this.readFeaturesFromNode(i,n));return r}readFeaturesFromNode(e,n){return Xi()}readGeometry(e,n){if(!e)return null;if(typeof e=="string"){const r=mp(e);return this.readGeometryFromDocument(r,n)}return gp(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n)}readGeometryFromDocument(e,n){return null}readGeometryFromNode(e,n){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const n=mp(e);return this.readProjectionFromDocument(n)}return gp(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,n){const r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,n){return null}writeFeatures(e,n){const r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,n){return null}writeGeometry(e,n){const r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,n){return null}}const Uv="http://www.opengis.net/gml",clt=/^\s*$/;class Pi extends _M{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Fi(this.readFeaturesInternal),featureMembers:rs(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,n){const r=e.localName;let i=null;if(r=="FeatureCollection")i=gr([],this.FEATURE_COLLECTION_PARSERS,e,n,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const s=n[0];let a=s.featureType,l=s.featureNS;const o="p",d="p0";if(!a&&e.childNodes){a=[],l={};for(let v=0,y=e.childNodes.length;v<y;++v){const C=e.childNodes[v];if(C.nodeType===1){const x=C.nodeName.split(":").pop();if(!a.includes(x)){let M="",I=0;const P=C.namespaceURI;for(const F in l){if(l[F]===P){M=F;break}++I}M||(M=o+I,l[M]=P),a.push(M+":"+x)}}}r!="featureMember"&&(s.featureType=a,s.featureNS=l)}if(typeof l=="string"){const v=l;l={},l[d]=v}const p={},A=Array.isArray(a)?a:[a];for(const v in l){const y={};for(let C=0,x=A.length;C<x;++C)(A[C].includes(":")?A[C].split(":")[0]:d)===v&&(y[A[C].split(":").pop()]=r=="featureMembers"?Fi(this.readFeatureElement,this):rs(this.readFeatureElement,this));p[l[v]]=y}r=="featureMember"||r=="member"?i=gr(void 0,p,e,n):i=gr([],p,e,n)}return i===null&&(i=[]),i}readGeometryOrExtent(e,n){const r=n[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),gr(null,this.GEOMETRY_PARSERS,e,n,this)}readExtentElement(e,n){const r=n[0],i=this.readGeometryOrExtent(e,n);return i?I7(i,r):void 0}readGeometryElement(e,n){const r=n[0],i=this.readGeometryOrExtent(e,n);return i?dl(i,!1,r):void 0}readFeatureElementInternal(e,n,r){let i;const s={};for(let o=e.firstElementChild;o;o=o.nextElementSibling){let d;const p=o.localName;o.childNodes.length===0||o.childNodes.length===1&&(o.firstChild.nodeType===3||o.firstChild.nodeType===4)?(d=Gh(o,!1),clt.test(d)&&(d=void 0)):(r&&(d=p==="boundedBy"?this.readExtentElement(o,n):this.readGeometryElement(o,n)),d?p!=="boundedBy"&&(i=p):d=this.readFeatureElementInternal(o,n,!1));const A=o.attributes.length;if(A>0&&!(d instanceof k2)){d={_content_:d};for(let v=0;v<A;v++){const y=o.attributes[v].name;d[y]=o.attributes[v].value}}s[p]?(s[p]instanceof Array||(s[p]=[s[p]]),s[p].push(d)):s[p]=d}if(!r)return s;const a=new Ys(s);i&&a.setGeometryName(i);const l=e.getAttribute("fid")||alt(e,this.namespace,"id");return l&&a.setId(l),a}readFeatureElement(e,n){return this.readFeatureElementInternal(e,n,!0)}readPoint(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new So(r,"XYZ")}readMultiPoint(e,n){const r=gr([],this.MULTIPOINT_PARSERS,e,n,this);if(r)return new Nd(r)}readMultiLineString(e,n){const r=gr([],this.MULTILINESTRING_PARSERS,e,n,this);if(r)return new kc(r)}readMultiPolygon(e,n){const r=gr([],this.MULTIPOLYGON_PARSERS,e,n,this);if(r)return new Dc(r)}pointMemberParser(e,n){Bd(this.POINTMEMBER_PARSERS,e,n,this)}lineStringMemberParser(e,n){Bd(this.LINESTRINGMEMBER_PARSERS,e,n,this)}polygonMemberParser(e,n){Bd(this.POLYGONMEMBER_PARSERS,e,n,this)}readLineString(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new ko(r,"XYZ")}readFlatLinearRing(e,n){const r=gr(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this);if(r)return r}readLinearRing(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new e0(r,"XYZ")}readPolygon(e,n){const r=gr([null],this.FLAT_LINEAR_RINGS_PARSERS,e,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let a,l;for(a=1,l=r.length;a<l;++a)yo(i,r[a]),s.push(i.length);return new La(i,"XYZ",s)}}readFlatCoordinatesFromNode(e,n){return gr(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this)}readGeometryFromNode(e,n){const r=this.readGeometryElement(e,[this.getReadOptions(e,n||{})]);return r||null}readFeaturesFromNode(e,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,n)),this.readFeaturesInternal(e,[r])||[]}readProjectionFromNode(e){return Oi(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}Pi.prototype.namespace=Uv;Pi.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};Pi.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};Pi.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};Pi.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Fi(Pi.prototype.pointMemberParser),pointMembers:Fi(Pi.prototype.pointMemberParser)}};Pi.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Fi(Pi.prototype.lineStringMemberParser),lineStringMembers:Fi(Pi.prototype.lineStringMemberParser)}};Pi.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Fi(Pi.prototype.polygonMemberParser),polygonMembers:Fi(Pi.prototype.polygonMemberParser)}};Pi.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Fi(Pi.prototype.readFlatCoordinatesFromNode)}};Pi.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Fi(Pi.prototype.readLineString)}};Pi.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Fi(Pi.prototype.readPolygon)}};Pi.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:rs(Pi.prototype.readFlatLinearRing)}};function h_(t){const e=Gh(t,!1);return db(e)}function db(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return e[1]!==void 0||!1}function lN(t){const e=Gh(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function uo(t){const e=Gh(t,!1);return Ev(e)}function Ev(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function $l(t){const e=Gh(t,!1);return Mv(e)}function Mv(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function wr(t){return Gh(t,!1).trim()}function hE(t,e){ys(t,e?"1":"0")}function ult(t,e){t.appendChild(zE().createCDATASection(e))}function hlt(t,e){const n=new Date(e*1e3),r=n.getUTCFullYear()+"-"+VS(n.getUTCMonth()+1,2)+"-"+VS(n.getUTCDate(),2)+"T"+VS(n.getUTCHours(),2)+":"+VS(n.getUTCMinutes(),2)+":"+VS(n.getUTCSeconds(),2)+"Z";t.appendChild(zE().createTextNode(r))}function vd(t,e){const n=e.toPrecision();t.appendChild(zE().createTextNode(n))}function o5(t,e){const n=e.toString();t.appendChild(zE().createTextNode(n))}function ys(t,e){t.appendChild(zE().createTextNode(e))}const dlt=Uv+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",flt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class lo extends Pi{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[Uv].featureMember=Fi(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:dlt}readFlatCoordinates(e,n){const r=Gh(e,!1).replace(/^\s*|\s*$/g,""),s=n[0].srsName;let a="enu";if(s){const d=Oi(s);d&&(a=d.getAxisOrientation())}const l=r.trim().split(/\s+/),o=[];for(let d=0,p=l.length;d<p;d++){const A=l[d].split(/,+/),v=parseFloat(A[0]),y=parseFloat(A[1]),C=A.length===3?parseFloat(A[2]):0;a.substr(0,2)==="en"?o.push(v,y,C):o.push(y,v,C)}return o}readBox(e,n){const r=gr([null],this.BOX_PARSERS_,e,n,this);return Ff(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(e,n){const r=gr(void 0,this.RING_PARSERS,e,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(e,n){const r=gr(void 0,this.RING_PARSERS,e,n,this);if(r){const i=n[n.length-1];i[0]=r}}GEOMETRY_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.multiSurface,a=i.surface,l=i.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&a===!0?r="Surface":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),Rs("http://www.opengis.net/gml",r)}writeFeatureElement(e,n,r){const i=n.getId();i&&e.setAttribute("fid",i);const s=r[r.length-1],a=s.featureNS,l=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[a]={});const o=[],d=[];if(n.hasProperties()){const A=n.getProperties();for(const v in A){const y=A[v];y!==null&&(o.push(v),d.push(y),v==l||typeof y.getSimplifiedGeometry=="function"?v in s.serializers[a]||(s.serializers[a][v]=on(this.writeGeometryElement,this)):v in s.serializers[a]||(s.serializers[a][v]=on(ys)))}}const p=Object.assign({},s);p.node=e,Es(p,s.serializers,Tl(void 0,a),d,r,o)}writeCurveOrLineString(e,n,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a),this.writeCoordinates_(a,n,r)}else if(e.nodeName==="Curve"){const a=Rs(e.namespaceURI,"segments");e.appendChild(a),this.writeCurveSegments_(a,n,r)}}writeLineStringOrCurveMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeMultiCurveOrLineString(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName,l=i.curve;a&&e.setAttribute("srsName",a);const o=n.getLineStrings();Es({node:e,hasZ:s,srsName:a,curve:l},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,o,r,void 0,this)}writeGeometryElement(e,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=e;let a;Array.isArray(n)?a=I7(n,i):a=dl(n,!0,i),Es(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[a],r,void 0,this)}createCoordinatesNode_(e){const n=Rs(e,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName,l=n.getCoordinates(),o=l.length,d=new Array(o);for(let p=0;p<o;++p){const A=l[p];d[p]=this.getCoords_(A,a,s)}ys(e,d.join(" "))}writeCurveSegments_(e,n,r){const i=Rs(e.namespaceURI,"LineStringSegment");e.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName;if(e.nodeName!=="PolygonPatch"&&a&&e.setAttribute("srsName",a),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const l=n.getLinearRings();Es({node:e,hasZ:s,srsName:a},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,l,r,void 0,this)}else if(e.nodeName==="Surface"){const l=Rs(e.namespaceURI,"patches");e.appendChild(l),this.writeSurfacePatches_(l,n,r)}}RING_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.node,a=i.exteriorWritten;return a===void 0&&(i.exteriorWritten=!0),Rs(s.namespaceURI,a!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,n,r){const i=Rs(e.namespaceURI,"PolygonPatch");e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeRing(e,n,r){const i=Rs(e.namespaceURI,"LinearRing");e.appendChild(i),this.writeLinearRing(i,n,r)}getCoords_(e,n,r){let i="enu";n&&(i=Oi(n).getAxisOrientation());let s=i.substr(0,2)==="en"?e[0]+","+e[1]:e[1]+","+e[0];if(r){const a=e[2]||0;s+=","+a}return s}writePoint(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName;a&&e.setAttribute("srsName",a);const l=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(l);const o=n.getCoordinates(),d=this.getCoords_(o,a,s);ys(l,d)}writeMultiPoint(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName;a&&e.setAttribute("srsName",a);const l=n.getPoints();Es({node:e,hasZ:s,srsName:a},this.POINTMEMBER_SERIALIZERS,Tl("pointMember"),l,r,void 0,this)}writePointMember(e,n,r){const i=Rs(e.namespaceURI,"Point");e.appendChild(i),this.writePoint(i,n,r)}writeLinearRing(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a),this.writeCoordinates_(a,n,r)}writeMultiSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName,l=i.surface;a&&e.setAttribute("srsName",a);const o=n.getPolygons();Es({node:e,hasZ:s,srsName:a,surface:l},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,o,r,void 0,this)}writeSurfaceOrPolygonMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writeEnvelope(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const a=["lowerCorner","upperCorner"],l=[n[0]+" "+n[1],n[2]+" "+n[3]];Es({node:e},this.ENVELOPE_SERIALIZERS,Cu,l,r,a,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,n,r){const i=n[n.length-1].node;return Rs("http://www.opengis.net/gml",flt[i.nodeName])}}lo.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:rs(lo.prototype.readFlatCoordinates)}};lo.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:lo.prototype.innerBoundaryIsParser,outerBoundaryIs:lo.prototype.outerBoundaryIsParser}};lo.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Fi(lo.prototype.readFlatCoordinates)}};lo.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:rs(Pi.prototype.readPoint),MultiPoint:rs(Pi.prototype.readMultiPoint),LineString:rs(Pi.prototype.readLineString),MultiLineString:rs(Pi.prototype.readMultiLineString),LinearRing:rs(Pi.prototype.readLinearRing),Polygon:rs(Pi.prototype.readPolygon),MultiPolygon:rs(Pi.prototype.readMultiPolygon),Box:rs(lo.prototype.readBox)}};lo.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:on(lo.prototype.writeCurveOrLineString),MultiCurve:on(lo.prototype.writeMultiCurveOrLineString),Point:on(lo.prototype.writePoint),MultiPoint:on(lo.prototype.writeMultiPoint),LineString:on(lo.prototype.writeCurveOrLineString),MultiLineString:on(lo.prototype.writeMultiCurveOrLineString),LinearRing:on(lo.prototype.writeLinearRing),Polygon:on(lo.prototype.writeSurfaceOrPolygon),MultiPolygon:on(lo.prototype.writeMultiSurfaceOrPolygon),Surface:on(lo.prototype.writeSurfaceOrPolygon),MultiSurface:on(lo.prototype.writeMultiSurfaceOrPolygon),Envelope:on(lo.prototype.writeEnvelope)}};lo.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:on(lo.prototype.writeLineStringOrCurveMember),curveMember:on(lo.prototype.writeLineStringOrCurveMember)}};lo.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:on(lo.prototype.writeRing),innerBoundaryIs:on(lo.prototype.writeRing)}};lo.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:on(lo.prototype.writePointMember)}};lo.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:on(lo.prototype.writeSurfaceOrPolygonMember),polygonMember:on(lo.prototype.writeSurfaceOrPolygonMember)}};lo.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:on(ys),upperCorner:on(ys)}};const plt=Uv+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",Alt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Ir extends Pi{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:plt,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,n){const r=gr([],this.MULTICURVE_PARSERS,e,n,this);if(r)return new kc(r)}readFlatCurveRing(e,n){const r=gr([],this.MULTICURVE_PARSERS,e,n,this),i=[];for(let s=0,a=r.length;s<a;++s)yo(i,r[s].getFlatCoordinates());return i}readMultiSurface(e,n){const r=gr([],this.MULTISURFACE_PARSERS,e,n,this);if(r)return new Dc(r)}curveMemberParser(e,n){Bd(this.CURVEMEMBER_PARSERS,e,n,this)}surfaceMemberParser(e,n){Bd(this.SURFACEMEMBER_PARSERS,e,n,this)}readPatch(e,n){return gr([null],this.PATCHES_PARSERS,e,n,this)}readSegment(e,n){return gr([],this.SEGMENTS_PARSERS,e,n,this)}readPolygonPatch(e,n){return gr([null],this.FLAT_LINEAR_RINGS_PARSERS,e,n,this)}readLineStringSegment(e,n){return gr([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this)}interiorParser(e,n){const r=gr(void 0,this.RING_PARSERS,e,n,this);r&&n[n.length-1].push(r)}exteriorParser(e,n){const r=gr(void 0,this.RING_PARSERS,e,n,this);if(r){const i=n[n.length-1];i[0]=r}}readSurface(e,n){const r=gr([null],this.SURFACE_PARSERS,e,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let a,l;for(a=1,l=r.length;a<l;++a)yo(i,r[a]),s.push(i.length);return new La(i,"XYZ",s)}}readCurve(e,n){const r=gr([null],this.CURVE_PARSERS,e,n,this);if(r)return new ko(r,"XYZ")}readEnvelope(e,n){const r=gr([null],this.ENVELOPE_PARSERS,e,n,this);return Ff(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,n){let r=Gh(e,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let a;for(;a=i.exec(r);)s.push(parseFloat(a[1])),r=r.substr(a[0].length);if(r!=="")return;const o=n[0].srsName;let d="enu";if(o&&(d=Oi(o).getAxisOrientation()),d==="neu"){let A,v;for(A=0,v=s.length;A<v;A+=3){const y=s[A],C=s[A+1];s[A]=C,s[A+1]=y}}const p=s.length;if(p==2&&s.push(0),p!==0)return s}readFlatPosList(e,n){const r=Gh(e,!1).replace(/^\s*|\s*$/g,""),i=n[0],s=i.srsName,a=i.srsDimension;let l="enu";s&&(l=Oi(s).getAxisOrientation());const o=r.split(/\s+/);let d=2;e.getAttribute("srsDimension")?d=Mv(e.getAttribute("srsDimension")):e.getAttribute("dimension")?d=Mv(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?d=Mv(e.parentNode.getAttribute("srsDimension")):a&&(d=Mv(a));let p,A,v;const y=[];for(let C=0,x=o.length;C<x;C+=d)p=parseFloat(o[C]),A=parseFloat(o[C+1]),v=d===3?parseFloat(o[C+2]):0,l.substr(0,2)==="en"?y.push(p,A,v):y.push(A,p,v);return y}writePos_(e,n,r){const i=r[r.length-1],s=i.hasZ,a=s?"3":"2";e.setAttribute("srsDimension",a);const l=i.srsName;let o="enu";l&&(o=Oi(l).getAxisOrientation());const d=n.getCoordinates();let p;if(o.substr(0,2)==="en"?p=d[0]+" "+d[1]:p=d[1]+" "+d[0],s){const A=d[2]||0;p+=" "+A}ys(e,p)}getCoords_(e,n,r){let i="enu";n&&(i=Oi(n).getAxisOrientation());let s=i.substr(0,2)==="en"?e[0]+" "+e[1]:e[1]+" "+e[0];if(r){const a=e[2]||0;s+=" "+a}return s}writePosList_(e,n,r){const i=r[r.length-1],s=i.hasZ,a=s?"3":"2";e.setAttribute("srsDimension",a);const l=i.srsName,o=n.getCoordinates(),d=o.length,p=new Array(d);let A;for(let v=0;v<d;++v)A=o[v],p[v]=this.getCoords_(A,l,s);ys(e,p.join(" "))}writePoint(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const a=Rs(e.namespaceURI,"pos");e.appendChild(a),this.writePos_(a,n,r)}writeEnvelope(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const a=["lowerCorner","upperCorner"],l=[n[0]+" "+n[1],n[2]+" "+n[3]];Es({node:e},this.ENVELOPE_SERIALIZERS,Cu,l,r,a,this)}writeLinearRing(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const a=Rs(e.namespaceURI,"posList");e.appendChild(a),this.writePosList_(a,n,r)}RING_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.node,a=i.exteriorWritten;return a===void 0&&(i.exteriorWritten=!0),Rs(s.namespaceURI,a!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName;if(e.nodeName!=="PolygonPatch"&&a&&e.setAttribute("srsName",a),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const l=n.getLinearRings();Es({node:e,hasZ:s,srsName:a},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,l,r,void 0,this)}else if(e.nodeName==="Surface"){const l=Rs(e.namespaceURI,"patches");e.appendChild(l),this.writeSurfacePatches_(l,n,r)}}writeCurveOrLineString(e,n,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const a=Rs(e.namespaceURI,"posList");e.appendChild(a),this.writePosList_(a,n,r)}else if(e.nodeName==="Curve"){const a=Rs(e.namespaceURI,"segments");e.appendChild(a),this.writeCurveSegments_(a,n,r)}}writeMultiSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName,l=i.surface;a&&e.setAttribute("srsName",a);const o=n.getPolygons();Es({node:e,hasZ:s,srsName:a,surface:l},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,o,r,void 0,this)}writeMultiPoint(e,n,r){const i=r[r.length-1],s=i.srsName,a=i.hasZ;s&&e.setAttribute("srsName",s);const l=n.getPoints();Es({node:e,hasZ:a,srsName:s},this.POINTMEMBER_SERIALIZERS,Tl("pointMember"),l,r,void 0,this)}writeMultiCurveOrLineString(e,n,r){const i=r[r.length-1],s=i.hasZ,a=i.srsName,l=i.curve;a&&e.setAttribute("srsName",a);const o=n.getLineStrings();Es({node:e,hasZ:s,srsName:a,curve:l},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,o,r,void 0,this)}writeRing(e,n,r){const i=Rs(e.namespaceURI,"LinearRing");e.appendChild(i),this.writeLinearRing(i,n,r)}writeSurfaceOrPolygonMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writePointMember(e,n,r){const i=Rs(e.namespaceURI,"Point");e.appendChild(i),this.writePoint(i,n,r)}writeLineStringOrCurveMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeSurfacePatches_(e,n,r){const i=Rs(e.namespaceURI,"PolygonPatch");e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeCurveSegments_(e,n,r){const i=Rs(e.namespaceURI,"LineStringSegment");e.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeGeometryElement(e,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=e;let a;Array.isArray(n)?a=I7(n,i):a=dl(n,!0,i),Es(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[a],r,void 0,this)}writeFeatureElement(e,n,r){const i=n.getId();i&&e.setAttribute("fid",i);const s=r[r.length-1],a=s.featureNS,l=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[a]={});const o=[],d=[];if(n.hasProperties()){const A=n.getProperties();for(const v in A){const y=A[v];y!==null&&(o.push(v),d.push(y),v==l||typeof y.getSimplifiedGeometry=="function"?v in s.serializers[a]||(s.serializers[a][v]=on(this.writeGeometryElement,this)):v in s.serializers[a]||(s.serializers[a][v]=on(ys)))}}const p=Object.assign({},s);p.node=e,Es(p,s.serializers,Tl(void 0,a),d,r,o)}writeFeatureMembers_(e,n,r){const i=r[r.length-1],s=i.featureType,a=i.featureNS,l={};l[a]={},l[a][s]=on(this.writeFeatureElement,this);const o=Object.assign({},i);o.node=e,Es(o,l,Tl(s,a),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,n,r){const i=n[n.length-1].node;return Rs(this.namespace,Alt[i.nodeName])}GEOMETRY_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.multiSurface,a=i.surface,l=i.curve,o=i.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&a===!0?r="Surface":r==="LineString"&&l===!0?r="Curve":r==="MultiLineString"&&o===!0&&(r="MultiCurve")),Rs(this.namespace,r)}writeGeometryNode(e,n){n=this.adaptOptions(n);const r=Rs(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(i,n),this.writeGeometryElement(r,e,[i]),r}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Rs(this.namespace,"featureMembers");r.setAttributeNS(Pb,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(i,n),this.writeFeatureMembers_(r,e,[i]),r}}Ir.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:rs(Ir.prototype.readFlatPos),posList:rs(Ir.prototype.readFlatPosList),coordinates:rs(lo.prototype.readFlatCoordinates)}};Ir.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Ir.prototype.interiorParser,exterior:Ir.prototype.exteriorParser}};Ir.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:rs(Pi.prototype.readPoint),MultiPoint:rs(Pi.prototype.readMultiPoint),LineString:rs(Pi.prototype.readLineString),MultiLineString:rs(Pi.prototype.readMultiLineString),LinearRing:rs(Pi.prototype.readLinearRing),Polygon:rs(Pi.prototype.readPolygon),MultiPolygon:rs(Pi.prototype.readMultiPolygon),Surface:rs(Ir.prototype.readSurface),MultiSurface:rs(Ir.prototype.readMultiSurface),Curve:rs(Ir.prototype.readCurve),MultiCurve:rs(Ir.prototype.readMultiCurve),Envelope:rs(Ir.prototype.readEnvelope)}};Ir.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Fi(Ir.prototype.curveMemberParser),curveMembers:Fi(Ir.prototype.curveMemberParser)}};Ir.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Fi(Ir.prototype.surfaceMemberParser),surfaceMembers:Fi(Ir.prototype.surfaceMemberParser)}};Ir.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Fi(Pi.prototype.readLineString),Curve:Fi(Ir.prototype.readCurve)}};Ir.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Fi(Pi.prototype.readPolygon),Surface:Fi(Ir.prototype.readSurface)}};Ir.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:rs(Ir.prototype.readPatch)}};Ir.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:rs(Ir.prototype.readSegment)}};Ir.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Fi(Ir.prototype.readFlatPosList),upperCorner:Fi(Ir.prototype.readFlatPosList)}};Ir.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:rs(Ir.prototype.readPolygonPatch)}};Ir.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:s5(Ir.prototype.readLineStringSegment)}};Pi.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:rs(Pi.prototype.readFlatLinearRing),Ring:rs(Ir.prototype.readFlatCurveRing)}};Ir.prototype.writeFeatures;Ir.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:on(Ir.prototype.writeRing),interior:on(Ir.prototype.writeRing)}};Ir.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:on(ys),upperCorner:on(ys)}};Ir.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:on(Ir.prototype.writeSurfaceOrPolygonMember),polygonMember:on(Ir.prototype.writeSurfaceOrPolygonMember)}};Ir.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:on(Ir.prototype.writePointMember)}};Ir.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:on(Ir.prototype.writeLineStringOrCurveMember),curveMember:on(Ir.prototype.writeLineStringOrCurveMember)}};Ir.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:on(Ir.prototype.writeCurveOrLineString),MultiCurve:on(Ir.prototype.writeMultiCurveOrLineString),Point:on(Ir.prototype.writePoint),MultiPoint:on(Ir.prototype.writeMultiPoint),LineString:on(Ir.prototype.writeCurveOrLineString),MultiLineString:on(Ir.prototype.writeMultiCurveOrLineString),LinearRing:on(Ir.prototype.writeLinearRing),Polygon:on(Ir.prototype.writeSurfaceOrPolygon),MultiPolygon:on(Ir.prototype.writeMultiSurfaceOrPolygon),Surface:on(Ir.prototype.writeSurfaceOrPolygon),MultiSurface:on(Ir.prototype.writeMultiSurfaceOrPolygon),Envelope:on(Ir.prototype.writeEnvelope)}};const R7=Ir;R7.prototype.writeFeatures;R7.prototype.writeFeaturesNode;const glt=R7,hl=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],mlt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",vlt={rte:bAe,trk:wAe,wpt:xAe},ylt=nr(hl,{rte:Fi(bAe),trk:Fi(wAe),wpt:Fi(xAe)}),_lt=nr(hl,{text:Wt(wr,"linkText"),type:Wt(wr,"linkType")}),blt=nr(hl,{name:Wt(wr),email:Wlt,link:bM}),wlt=nr(hl,{name:Wt(wr),desc:Wt(wr),author:Wt(Qlt),copyright:Wt(jlt),link:bM,time:Wt(lN),keywords:Wt(wr),bounds:Klt,extensions:cN}),xlt=nr(hl,{year:Wt($l),license:Wt(wr)}),Clt=nr(hl,{rte:on(Zlt),trk:on(Jlt),wpt:on(tct)});class Elt extends _M{constructor(e){super(),e=e||{},this.dataProjection=Oi("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(mp(e)):gp(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(e){if(!hl.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(hl.includes(n.namespaceURI)&&n.localName==="metadata")return gr({},wlt,n,[]);return null}readFeatureFromNode(e,n){if(!hl.includes(e.namespaceURI))return null;const r=vlt[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!hl.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=gr([],ylt,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Rs("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Pb),r.setAttributeNS(Pb,"xsi:schemaLocation",mlt),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Es({node:r},Clt,Glt,e,[n]),r}}const Slt=nr(hl,{name:Wt(wr),cmt:Wt(wr),desc:Wt(wr),src:Wt(wr),link:bM,number:Wt($l),extensions:cN,type:Wt(wr),rtept:qlt}),Tlt=nr(hl,{ele:Wt(uo),time:Wt(lN)}),Ilt=nr(hl,{name:Wt(wr),cmt:Wt(wr),desc:Wt(wr),src:Wt(wr),link:bM,number:Wt($l),type:Wt(wr),extensions:cN,trkseg:Xlt}),Blt=nr(hl,{trkpt:Ylt}),Mlt=nr(hl,{ele:Wt(uo),time:Wt(lN)}),Llt=nr(hl,{ele:Wt(uo),time:Wt(lN),magvar:Wt(uo),geoidheight:Wt(uo),name:Wt(wr),cmt:Wt(wr),desc:Wt(wr),src:Wt(wr),link:bM,sym:Wt(wr),type:Wt(wr),fix:Wt(wr),sat:Wt($l),hdop:Wt(uo),vdop:Wt(uo),pdop:Wt(uo),ageofdgpsdata:Wt(uo),dgpsid:Wt($l),extensions:cN}),Rlt=["text","type"],Plt=nr(hl,{text:on(ys),type:on(ys)}),Flt=nr(hl,["name","cmt","desc","src","link","number","type","rtept"]),Olt=nr(hl,{name:on(ys),cmt:on(ys),desc:on(ys),src:on(ys),link:on(O7),number:on(o5),type:on(ys),rtept:yAe(on(N7))}),Nlt=nr(hl,["ele","time"]),klt=nr(hl,["name","cmt","desc","src","link","number","type","trkseg"]),Dlt=nr(hl,{name:on(ys),cmt:on(ys),desc:on(ys),src:on(ys),link:on(O7),number:on(o5),type:on(ys),trkseg:yAe(on(ect))}),Ult=Tl("trkpt"),zlt=nr(hl,{trkpt:on(N7)}),$lt=nr(hl,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Vlt=nr(hl,{ele:on(vd),time:on(hlt),magvar:on(vd),geoidheight:on(vd),name:on(ys),cmt:on(ys),desc:on(ys),src:on(ys),link:on(O7),sym:on(ys),type:on(ys),fix:on(ys),sat:on(o5),hdop:on(vd),vdop:on(vd),pdop:on(vd),ageofdgpsdata:on(vd),dgpsid:on(o5)}),Hlt={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Glt(t,e,n){const r=t.getGeometry();if(r){const i=Hlt[r.getType()];if(i){const s=e[e.length-1].node;return Rs(s.namespaceURI,i)}}}function P7(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function F7(t,e,n){let r="XY",i=2;if(t.hasZ&&t.hasM?(r="XYZM",i=4):t.hasZ?(r="XYZ",i=3):t.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],t.hasZ&&(e[s*i+2]=e[s*4+2]),t.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,n)for(let s=0,a=n.length;s<a;s++)n[s]=n[s]/4*i}return r}function Qlt(t,e){const n=gr({},blt,t,e);if(n)return n}function jlt(t,e){const n=gr({},xlt,t,e);if(n){const r=t.getAttribute("author");return r!==null&&(n.author=r),n}}function Klt(t,e){const n=e[e.length-1],r=t.getAttribute("minlat"),i=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),a=t.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function Wlt(t,e){const n=e[e.length-1],r=t.getAttribute("id"),i=t.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function bM(t,e){const n=e[e.length-1],r=t.getAttribute("href");r!==null&&(n.link=r),Bd(_lt,t,e)}function cN(t,e){const n=e[e.length-1];n.extensionsNode_=t}function qlt(t,e){const n=gr({},Tlt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;P7(i,s,t,n)}}function Ylt(t,e){const n=gr({},Mlt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;P7(i,s,t,n)}}function Xlt(t,e){const n=e[e.length-1];Bd(Blt,t,e);const r=n.flatCoordinates;n.ends.push(r.length)}function bAe(t,e){const n=e[0],r=gr({flatCoordinates:[],layoutOptions:{}},Slt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=F7(s,i),l=new ko(i,a);dl(l,!1,n);const o=new Ys(l);return o.setProperties(r,!0),o}function wAe(t,e){const n=e[0],r=gr({flatCoordinates:[],ends:[],layoutOptions:{}},Ilt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const l=F7(a,i,s),o=new kc(i,l,s);dl(o,!1,n);const d=new Ys(o);return d.setProperties(r,!0),d}function xAe(t,e){const n=e[0],r=gr({},Llt,t,e);if(!r)return;const i={},s=P7([],i,t,r),a=F7(i,s),l=new So(s,a);dl(l,!1,n);const o=new Ys(l);return o.setProperties(r,!0),o}function O7(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];Es({node:t},Plt,Cu,s,n,Rlt)}function N7(t,e,n){const r=n[n.length-1],s=r.node.namespaceURI,a=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const o=t.nodeName=="rtept"?Nlt[s]:$lt[s],d=Pd(a,o);Es({node:t,properties:a},Vlt,Cu,d,n,o)}function Zlt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const p=dl(a,!0,r);s.geometryLayout=p.getLayout(),i.rtept=p.getCoordinates()}const l=n[n.length-1].node,o=Flt[l.namespaceURI],d=Pd(i,o);Es(s,Olt,Cu,d,n,o)}function Jlt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const p=dl(a,!0,r);i.trkseg=p.getLineStrings()}const l=n[n.length-1].node,o=klt[l.namespaceURI],d=Pd(i,o);Es(s,Dlt,Cu,d,n,o)}function ect(t,e,n){const r={node:t};r.geometryLayout=e.getLayout(),r.properties={},Es(r,zlt,Ult,e.getCoordinates(),n)}function tct(t,e,n){const r=n[0],i=n[n.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=dl(s,!0,r);i.geometryLayout=a.getLayout(),N7(t,a.getCoordinates(),n)}}const nct=Elt;class k7 extends vM{constructor(){super()}getType(){return"text"}readFeature(e,n){return this.readFeatureFromText(GR(e),this.adaptOptions(n))}readFeatureFromText(e,n){return Xi()}readFeatures(e,n){return this.readFeaturesFromText(GR(e),this.adaptOptions(n))}readFeaturesFromText(e,n){return Xi()}readGeometry(e,n){return this.readGeometryFromText(GR(e),this.adaptOptions(n))}readGeometryFromText(e,n){return Xi()}readProjection(e){return this.readProjectionFromText(GR(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,n){return this.writeFeatureText(e,this.adaptOptions(n))}writeFeatureText(e,n){return Xi()}writeFeatures(e,n){return this.writeFeaturesText(e,this.adaptOptions(n))}writeFeaturesText(e,n){return Xi()}writeGeometry(e,n){return this.writeGeometryText(e,this.adaptOptions(n))}writeGeometryText(e,n){return Xi()}}function GR(t){return typeof t=="string"?t:""}const rct=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,ict=/^H.([A-Z]{3}).*?:(.*)/,sct=/^HFDTE(\d{2})(\d{2})(\d{2})/,oct=/\r\n|\r|\n/;class act extends k7{constructor(e){super(),e=e||{},this.dataProjection=Oi("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none"}readFeatureFromText(e,n){const r=this.altitudeMode_,i=e.split(oct),s={},a=[];let l=2e3,o=0,d=1,p=-1,A,v;for(A=0,v=i.length;A<v;++A){const M=i[A];let I;if(M.charAt(0)=="B"){if(I=rct.exec(M),I){const P=parseInt(I[1],10),F=parseInt(I[2],10),D=parseInt(I[3],10);let V=parseInt(I[4],10)+parseInt(I[5],10)/6e4;I[6]=="S"&&(V=-V);let H=parseInt(I[7],10)+parseInt(I[8],10)/6e4;if(I[9]=="W"&&(H=-H),a.push(H,V),r!="none"){let G;r=="gps"?G=parseInt(I[11],10):r=="barometric"?G=parseInt(I[12],10):G=0,a.push(G)}let Q=Date.UTC(l,o,d,P,F,D);Q<p&&(Q=Date.UTC(l,o,d+1,P,F,D)),a.push(Q/1e3),p=Q}}else M.charAt(0)=="H"&&(I=sct.exec(M),I?(d=parseInt(I[1],10),o=parseInt(I[2],10)-1,l=2e3+parseInt(I[3],10)):(I=ict.exec(M),I&&(s[I[1]]=I[2].trim())))}if(a.length===0)return null;const y=r=="none"?"XYM":"XYZM",C=new ko(a,y),x=new Ys(dl(C,!1,n));return x.setProperties(s,!0),x}readFeaturesFromText(e,n){const r=this.readFeatureFromText(e,n);return r?[r]:[]}}const lct=act,g0=["http://www.google.com/kml/ext/2.2"],Di=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],cct="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",nte={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},uct=nr(Di,{ExtendedData:DAe,Region:UAe,MultiGeometry:Wt(OAe,"geometry"),LineString:Wt(PAe,"geometry"),LinearRing:Wt(FAe,"geometry"),Point:Wt(NAe,"geometry"),Polygon:Wt(kAe,"geometry"),Style:Wt(z7),StyleMap:Kct,address:Wt(wr),description:Wt(wr),name:Wt(wr),open:Wt(h_),phoneNumber:Wt(wr),styleUrl:Wt(IAe),visibility:Wt(h_)},nr(g0,{MultiTrack:Wt(Fct,"geometry"),Track:Wt(RAe,"geometry")})),hct=nr(Di,{ExtendedData:DAe,Region:UAe,Link:sut,address:Wt(wr),description:Wt(wr),name:Wt(wr),open:Wt(h_),phoneNumber:Wt(wr),visibility:Wt(h_)}),dct=nr(Di,{href:Wt(TAe)}),fct=nr(Di,{Altitude:Wt(uo),Longitude:Wt(uo),Latitude:Wt(uo),Tilt:Wt(uo),AltitudeMode:Wt(wr),Heading:Wt(uo),Roll:Wt(uo)}),CAe=nr(Di,{LatLonAltBox:Zct,Lod:eut}),pct=nr(Di,["Document","Placemark"]),Act=nr(Di,{Document:on(fut),Placemark:on(VAe)});let vC,EF=null,V8,sI,oI,aI,a5,H8=null,D7,G8=null,Q8,q1=null,rte=null,j8=null;function l5(t){return 32/Math.min(t[0],t[1])}function gct(){vC=[255,255,255,1],EF=new Hl({color:vC}),V8=[20,2],sI="pixels",oI="pixels",aI=[64,64],a5="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",H8=new B_({anchor:V8,anchorOrigin:"bottom-left",anchorXUnits:sI,anchorYUnits:oI,crossOrigin:"anonymous",rotation:0,scale:l5(aI),size:aI,src:a5}),D7="NO_IMAGE",G8=new Za({color:vC,width:1}),Q8=new Za({color:[51,51,51,1],width:2}),q1=new Pf({font:"bold 16px Helvetica",fill:EF,stroke:Q8,scale:.8}),rte=new No({fill:EF,image:H8,text:q1,stroke:G8,zIndex:0}),j8=[rte]}let QR;function mct(t){return t}class vct extends _M{constructor(e){super(),e=e||{},j8||gct(),this.dataProjection=Oi("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:j8,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:mct,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,n){const r=nr(Di,{Document:s5(this.readDocumentOrFolder_,this),Folder:s5(this.readDocumentOrFolder_,this),Placemark:Fi(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=gr([],r,e,n,this);if(i)return i}readPlacemark_(e,n){const r=gr({geometry:null},uct,e,n,this);if(!r)return;const i=new Ys,s=e.getAttribute("id");s!==null&&i.setId(s);const a=n[0],l=r.geometry;if(l&&dl(l,!1,a),i.setGeometry(l),delete r.geometry,this.extractStyles_){const o=r.Style,d=r.styleUrl,p=_ct(o,d,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(p)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,n){const r=e.getAttribute("id");if(r!==null){const i=z7.call(this,e,n);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,n){const r=e.getAttribute("id");if(r===null)return;const i=MAe.call(this,e,n);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,n){if(!Di.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return r||null}readFeaturesFromNode(e,n){if(!Di.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,n)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,n);a&&yo(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const n=mp(e);return this.readNameFromDocument(n)}return gp(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(n);if(r)return r}}readNameFromNode(e){for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Di.includes(n.namespaceURI)&&n.localName=="name")return wr(n);for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;if(Di.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(n);if(i)return i}}}readNetworkLinks(e){const n=[];if(typeof e=="string"){const r=mp(e);yo(n,this.readNetworkLinksFromDocument(r))}else gp(e)?yo(n,this.readNetworkLinksFromDocument(e)):yo(n,this.readNetworkLinksFromNode(e));return n}readNetworkLinksFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&yo(n,this.readNetworkLinksFromNode(r));return n}readNetworkLinksFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Di.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=gr({},hct,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Di.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&yo(n,this.readNetworkLinksFromNode(r))}return n}readRegion(e){const n=[];if(typeof e=="string"){const r=mp(e);yo(n,this.readRegionFromDocument(r))}else gp(e)?yo(n,this.readRegionFromDocument(e)):yo(n,this.readRegionFromNode(e));return n}readRegionFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&yo(n,this.readRegionFromNode(r));return n}readRegionFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Di.includes(r.namespaceURI)&&r.localName=="Region"){const i=gr({},CAe,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Di.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&yo(n,this.readRegionFromNode(r))}return n}readCamera(e){const n=[];if(typeof e=="string"){const r=mp(e);yo(n,this.readCameraFromDocument(r))}else gp(e)?yo(n,this.readCameraFromDocument(e)):yo(n,this.readCameraFromNode(e));return n}readCameraFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&yo(n,this.readCameraFromNode(r));return n}readCameraFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Di.includes(r.namespaceURI)&&r.localName==="Camera"){const i=gr({},fct,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Di.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&yo(n,this.readCameraFromNode(r))}return n}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Rs(Di[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",g0[0]),r.setAttributeNS(i,"xmlns:xsi",Pb),r.setAttributeNS(Pb,"xsi:schemaLocation",cct);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const l=pct[r.namespaceURI],o=Pd(a,l);return Es(s,Act,Cu,o,[n],l,this),r}}function yct(t,e){const n=[0,0];let r="start";const i=t.getImage();if(i){const l=i.getSize();if(l&&l.length==2){const o=i.getScaleArray(),d=i.getAnchor();n[0]=o[0]*(l[0]-d[0]),n[1]=o[1]*(l[1]/2-d[1]),r="left"}}let s=t.getText();return s?(s=s.clone(),s.setFont(s.getFont()||q1.getFont()),s.setScale(s.getScale()||q1.getScale()),s.setFill(s.getFill()||q1.getFill()),s.setStroke(s.getStroke()||Q8)):s=q1.clone(),s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(r),new No({image:i,text:s})}function _ct(t,e,n,r,i){return function(s,a){let l=i,o="",d=[];if(l){const A=s.getGeometry();if(A)if(A instanceof xu)d=A.getGeometriesArrayRecursive().filter(function(v){const y=v.getType();return y==="Point"||y==="MultiPoint"}),l=d.length>0;else{const v=A.getType();l=v==="Point"||v==="MultiPoint"}}l&&(o=s.get("name"),l=l&&!!o,l&&/&[^&]+;/.test(o)&&(QR||(QR=document.createElement("textarea")),QR.innerHTML=o,o=QR.value));let p=n;if(t?p=t:e&&(p=EAe(e,n,r)),l){const A=yct(p[0],o);if(d.length>0){A.setGeometry(new xu(d));const v=new No({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null});return[A,v].concat(p.slice(1))}return A}return p}}function EAe(t,e,n){return Array.isArray(t)?t:typeof t=="string"?EAe(n[t],e,n):e}function uN(t){const e=Gh(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function SAe(t){let e=Gh(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),l=i[3]?parseFloat(i[3]):0;n.push(s,a,l),e=e.substr(i[0].length)}if(e==="")return n}function TAe(t){const e=Gh(t,!1).trim();let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function IAe(t){const e=Gh(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function bct(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let r;return e!=="insetPixels"?n!=="insetPixels"?r="bottom-left":r="top-left":n!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(t.getAttribute("x")),xunits:nte[e],y:parseFloat(t.getAttribute("y")),yunits:nte[n],origin:r}}function BAe(t){return uo(t)}const wct=nr(Di,{Pair:jct});function MAe(t,e){return gr(void 0,wct,t,e,this)}const xct=nr(Di,{Icon:Wt(kct),color:Wt(uN),heading:Wt(uo),hotSpot:Wt(bct),scale:Wt(BAe)});function Cct(t,e){const n=gr({},xct,t,e);if(!n)return;const r=e[e.length-1],i="Icon"in n?n.Icon:{},s=!("Icon"in n)||Object.keys(i).length>0;let a;const l=i.href;l?a=l:s&&(a=a5);let o,d,p,A="bottom-left";const v=n.hotSpot;v?(o=[v.x,v.y],d=v.xunits,p=v.yunits,A=v.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(o=V8,d=sI,p=oI):a.includes("arrow-reverse")?(o=[54,42],d=sI,p=oI):a.includes("paddle")&&(o=[32,1],d=sI,p=oI));let y;const C=i.x,x=i.y;C!==void 0&&x!==void 0&&(y=[C,x]);let M;const I=i.w,P=i.h;I!==void 0&&P!==void 0&&(M=[I,P]);let F;const D=n.heading;D!==void 0&&(F=Qy(D));const V=n.scale,H=n.color;if(s){a==a5&&(M=aI);const Q=new B_({anchor:o,anchorOrigin:A,anchorXUnits:d,anchorYUnits:p,crossOrigin:this.crossOrigin_,offset:y,offsetOrigin:"bottom-left",rotation:F,scale:V,size:M,src:this.iconUrlFunction_(a),color:H}),G=Q.getScaleArray()[0],W=Q.getSize();if(W===null){const te=Q.getImageState();if(te===hi.IDLE||te===hi.LOADING){const q=function(){const Y=Q.getImageState();if(!(Y===hi.IDLE||Y===hi.LOADING)){const ee=Q.getSize();if(ee&&ee.length==2){const ce=l5(ee);Q.setScale(G*ce)}Q.unlistenImageChange(q)}};Q.listenImageChange(q),te===hi.IDLE&&Q.load()}}else if(W.length==2){const te=l5(W);Q.setScale(G*te)}r.imageStyle=Q}else r.imageStyle=D7}const Ect=nr(Di,{color:Wt(uN),scale:Wt(BAe)});function Sct(t,e){const n=gr({},Ect,t,e);if(!n)return;const r=e[e.length-1],i=new Pf({fill:new Hl({color:"color"in n?n.color:vC}),scale:n.scale});r.textStyle=i}const Tct=nr(Di,{color:Wt(uN),width:Wt(uo)});function Ict(t,e){const n=gr({},Tct,t,e);if(!n)return;const r=e[e.length-1],i=new Za({color:"color"in n?n.color:vC,width:"width"in n?n.width:1});r.strokeStyle=i}const Bct=nr(Di,{color:Wt(uN),fill:Wt(h_),outline:Wt(h_)});function Mct(t,e){const n=gr({},Bct,t,e);if(!n)return;const r=e[e.length-1],i=new Hl({color:"color"in n?n.color:vC});r.fillStyle=i;const s=n.fill;s!==void 0&&(r.fill=s);const a=n.outline;a!==void 0&&(r.outline=a)}const Lct=nr(Di,{coordinates:rs(SAe)});function LAe(t,e){return gr(null,Lct,t,e)}function Rct(t,e){const r=e[e.length-1].coordinates,i=Gh(t,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const l=parseFloat(a[1]),o=parseFloat(a[2]),d=parseFloat(a[3]);r.push([l,o,d])}else r.push([])}const Pct=nr(g0,{Track:Fi(RAe)});function Fct(t,e){const n=gr([],Pct,t,e);if(n)return new kc(n)}const Oct=nr(Di,{when:out},nr(g0,{coord:Rct}));function RAe(t,e){const n=gr({coordinates:[],whens:[]},Oct,t,e);if(!n)return;const r=[],i=n.coordinates,s=n.whens;for(let a=0,l=Math.min(i.length,s.length);a<l;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new ko(r,"XYZM")}const Nct=nr(Di,{href:Wt(TAe)},nr(g0,{x:Wt(uo),y:Wt(uo),w:Wt(uo),h:Wt(uo)}));function kct(t,e){const n=gr({},Nct,t,e);return n||null}const Dct=nr(Di,{coordinates:rs(SAe)});function U7(t,e){return gr(null,Dct,t,e)}const hN=nr(Di,{extrude:Wt(h_),tessellate:Wt(h_),altitudeMode:Wt(wr)});function PAe(t,e){const n=gr({},hN,t,e),r=U7(t,e);if(r){const i=new ko(r,"XYZ");return i.setProperties(n,!0),i}}function FAe(t,e){const n=gr({},hN,t,e),r=U7(t,e);if(r){const i=new La(r,"XYZ",[r.length]);return i.setProperties(n,!0),i}}const Uct=nr(Di,{LineString:Fi(PAe),LinearRing:Fi(FAe),MultiGeometry:Fi(OAe),Point:Fi(NAe),Polygon:Fi(kAe)});function OAe(t,e){const n=gr([],Uct,t,e);if(!n)return null;if(n.length===0)return new xu(n);let r,i=!0;const s=n[0].getType();let a;for(let l=1,o=n.length;l<o;++l)if(a=n[l],a.getType()!=s){i=!1;break}if(i){let l,o;if(s=="Point"){const d=n[0];l=d.getLayout(),o=d.getFlatCoordinates();for(let p=1,A=n.length;p<A;++p)a=n[p],yo(o,a.getFlatCoordinates());r=new Nd(o,l),X4(r,n)}else if(s=="LineString")r=new kc(n),X4(r,n);else if(s=="Polygon")r=new Dc(n),X4(r,n);else if(s=="GeometryCollection")r=new xu(n);else throw new Error("Unknown geometry type found")}else r=new xu(n);return r}function NAe(t,e){const n=gr({},hN,t,e),r=U7(t,e);if(r){const i=new So(r,"XYZ");return i.setProperties(n,!0),i}}const zct=nr(Di,{innerBoundaryIs:nut,outerBoundaryIs:iut});function kAe(t,e){const n=gr({},hN,t,e),r=gr([null],zct,t,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let l=1,o=r.length;l<o;++l)yo(i,r[l]),s.push(i.length);const a=new La(i,"XYZ",s);return a.setProperties(n,!0),a}}const $ct=nr(Di,{IconStyle:Cct,LabelStyle:Sct,LineStyle:Ict,PolyStyle:Mct});function z7(t,e){const n=gr({},$ct,t,e,this);if(!n)return null;let r="fillStyle"in n?n.fillStyle:EF;const i=n.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in n?n.imageStyle!=D7&&(s=n.imageStyle):s=H8;const a="textStyle"in n?n.textStyle:q1,l="strokeStyle"in n?n.strokeStyle:G8,o=n.outline;return o!==void 0&&!o?[new No({geometry:function(d){const p=d.getGeometry(),A=p.getType();if(A==="GeometryCollection"){const v=p;return new xu(v.getGeometriesArrayRecursive().filter(function(y){const C=y.getType();return C!=="Polygon"&&C!=="MultiPolygon"}))}if(A!=="Polygon"&&A!=="MultiPolygon")return p},fill:r,image:s,stroke:l,text:a,zIndex:void 0}),new No({geometry:function(d){const p=d.getGeometry(),A=p.getType();if(A==="GeometryCollection"){const v=p;return new xu(v.getGeometriesArrayRecursive().filter(function(y){const C=y.getType();return C==="Polygon"||C==="MultiPolygon"}))}if(A==="Polygon"||A==="MultiPolygon")return p},fill:r,stroke:null,zIndex:void 0})]:[new No({fill:r,image:s,stroke:l,text:a,zIndex:void 0})]}function X4(t,e){const n=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,l,o;a=!1,l=!1,o=!1;for(let d=0;d<n;++d){const p=e[d];r[d]=p.get("extrude"),i[d]=p.get("tessellate"),s[d]=p.get("altitudeMode"),a=a||r[d]!==void 0,l=l||i[d]!==void 0,o=o||s[d]}a&&t.set("extrude",r),l&&t.set("tessellate",i),o&&t.set("altitudeMode",s)}const Vct=nr(Di,{displayName:Wt(wr),value:Wt(wr)});function Hct(t,e){const n=t.getAttribute("name");Bd(Vct,t,e);const r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:n!==null?r[n]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Gct=nr(Di,{Data:Hct,SchemaData:qct});function DAe(t,e){Bd(Gct,t,e)}function UAe(t,e){Bd(CAe,t,e)}const Qct=nr(Di,{Style:Wt(z7),key:Wt(wr),styleUrl:Wt(IAe)});function jct(t,e){const n=gr({},Qct,t,e,this);if(!n)return;const r=n.key;if(r&&r=="normal"){const i=n.styleUrl;i&&(e[e.length-1]=i);const s=n.Style;s&&(e[e.length-1]=s)}}function Kct(t,e){const n=MAe.call(this,t,e);if(!n)return;const r=e[e.length-1];if(Array.isArray(n))r.Style=n;else if(typeof n=="string")r.styleUrl=n;else throw new Error("`styleMapValue` has an unknown type")}const Wct=nr(Di,{SimpleData:Yct});function qct(t,e){Bd(Wct,t,e)}function Yct(t,e){const n=t.getAttribute("name");if(n!==null){const r=wr(t),i=e[e.length-1];i[n]=r}}const Xct=nr(Di,{altitudeMode:Wt(wr),minAltitude:Wt(uo),maxAltitude:Wt(uo),north:Wt(uo),south:Wt(uo),east:Wt(uo),west:Wt(uo)});function Zct(t,e){const n=gr({},Xct,t,e);if(!n)return;const r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}const Jct=nr(Di,{minLodPixels:Wt(uo),maxLodPixels:Wt(uo),minFadeExtent:Wt(uo),maxFadeExtent:Wt(uo)});function eut(t,e){const n=gr({},Jct,t,e);if(!n)return;const r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}const tut=nr(Di,{LinearRing:Fi(LAe)});function nut(t,e){const n=gr([],tut,t,e);n.length>0&&e[e.length-1].push(...n)}const rut=nr(Di,{LinearRing:rs(LAe)});function iut(t,e){const n=gr(void 0,rut,t,e);if(n){const r=e[e.length-1];r[0]=n}}function sut(t,e){Bd(dct,t,e)}function out(t,e){const r=e[e.length-1].whens,i=Gh(t,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function dN(t,e){const n=Of(e),i=[(n.length==4?n[3]:1)*255,n[2],n[1],n[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}ys(t,i.join(""))}function aut(t,e,n){const r=n[n.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const l=e.length;let o="";if(l>0){o+=e[0];for(let d=1;d<a;++d)o+=","+e[d];for(let d=s;d<l;d+=s){o+=" "+e[d];for(let p=1;p<a;++p)o+=","+e[d+p]}}ys(t,o)}const SF=nr(Di,{Data:on(lut),value:on(uut),displayName:on(cut)});function lut(t,e,n){t.setAttribute("name",e.name);const r={node:t},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Es(r,SF,Cu,[i.displayName],n,["displayName"]),i!==null&&i.value&&Es(r,SF,Cu,[i.value],n,["value"])):Es(r,SF,Cu,[i],n,["value"])}function cut(t,e){ult(t,e)}function uut(t,e){ys(t,e)}const hut=nr(Di,{Placemark:on(VAe)}),dut=function(t,e,n){const r=e[e.length-1].node;return Rs(r.namespaceURI,"Placemark")};function fut(t,e,n){Es({node:t},hut,dut,e,n,void 0,this)}const put=Tl("Data");function Aut(t,e,n){const r={node:t},i=e.names,s=e.values,a=i.length;for(let l=0;l<a;l++)Es(r,SF,put,[{name:i[l],value:s[l]}],n)}const ite=nr(Di,["href"],nr(g0,["x","y","w","h"])),ste=nr(Di,{href:on(ys)},nr(g0,{x:on(vd),y:on(vd),w:on(vd),h:on(vd)})),gut=function(t,e,n){return Rs(g0[0],"gx:"+n)};function mut(t,e,n){const r={node:t},i=n[n.length-1].node;let s=ite[i.namespaceURI],a=Pd(e,s);Es(r,ste,Cu,a,n,s),s=ite[g0[0]],a=Pd(e,s),Es(r,ste,gut,a,n,s)}const vut=nr(Di,["scale","heading","Icon","color","hotSpot"]),yut=nr(Di,{Icon:on(mut),color:on(dN),heading:on(vd),hotSpot:on(jut),scale:on(GAe)});function _ut(t,e,n){const r={node:t},i={},s=e.getSrc(),a=e.getSize(),l=e.getImageSize(),o={href:s};if(a){o.w=a[0],o.h=a[1];const M=e.getAnchor(),I=e.getOrigin();if(I&&l&&I[0]!==0&&I[1]!==a[1]&&(o.x=I[0],o.y=l[1]-(I[1]+a[1])),M&&(M[0]!==a[0]/2||M[1]!==a[1]/2)){const P={x:M[0],xunits:"pixels",y:a[1]-M[1],yunits:"pixels"};i.hotSpot=P}}i.Icon=o;let d=e.getScaleArray()[0],p=a;if(p===null&&(p=aI),p.length==2){const M=l5(p);d=d/M}d!==1&&(i.scale=d);const A=e.getRotation();A!==0&&(i.heading=A);const v=e.getColor();v&&(i.color=v);const y=n[n.length-1].node,C=vut[y.namespaceURI],x=Pd(i,C);Es(r,yut,Cu,x,n,C)}const but=nr(Di,["color","scale"]),wut=nr(Di,{color:on(dN),scale:on(GAe)});function xut(t,e,n){const r={node:t},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const l=n[n.length-1].node,o=but[l.namespaceURI],d=Pd(i,o);Es(r,wut,Cu,d,n,o)}const Cut=nr(Di,["color","width"]),Eut=nr(Di,{color:on(dN),width:on(vd)});function Sut(t,e,n){const r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,a=Cut[s.namespaceURI],l=Pd(i,a);Es(r,Eut,Cu,l,n,a)}const Tut={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},zAe=function(t,e,n){if(t){const r=e[e.length-1].node;return Rs(r.namespaceURI,Tut[t.getType()])}},Iut=Tl("Point"),But=Tl("LineString"),Mut=Tl("LinearRing"),Lut=Tl("Polygon"),Rut=nr(Di,{LineString:on(yC),Point:on(yC),Polygon:on(HAe),GeometryCollection:on($Ae)});function $Ae(t,e,n){const r={node:t},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(l){const o=l.getType();if(o==="MultiPoint")s=s.concat(l.getPoints());else if(o==="MultiLineString")s=s.concat(l.getLineStrings());else if(o==="MultiPolygon")s=s.concat(l.getPolygons());else if(o==="Point"||o==="LineString"||o==="Polygon")s.push(l);else throw new Error("Unknown geometry type")}),a=zAe;else if(i==="MultiPoint")s=e.getPoints(),a=Iut;else if(i==="MultiLineString")s=e.getLineStrings(),a=But;else if(i==="MultiPolygon")s=e.getPolygons(),a=Lut;else throw new Error("Unknown geometry type");Es(r,Rut,a,s,n)}const Put=nr(Di,{LinearRing:on(yC)});function ote(t,e,n){Es({node:t},Put,Mut,[e],n)}const Z4=nr(Di,{ExtendedData:on(Aut),MultiGeometry:on($Ae),LineString:on(yC),LinearRing:on(yC),Point:on(yC),Polygon:on(HAe),Style:on(Qut),address:on(ys),description:on(ys),name:on(ys),open:on(hE),phoneNumber:on(ys),styleUrl:on(ys),visibility:on(hE)}),Fut=nr(Di,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Out=Tl("ExtendedData");function VAe(t,e,n){const r={node:t};e.getId()&&t.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(y){return!s[y]}),l=e.getStyleFunction();if(l){const y=l(e,0);if(y){const C=Array.isArray(y)?y:[y];let x=C;if(e.getGeometry()&&(x=C.filter(function(M){const I=M.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(F){const D=F.getType();return D==="Point"||D==="MultiPoint"}).length:P==="Point"||P==="MultiPoint"}})),this.writeStyles_){let M=C,I=C;e.getGeometry()&&(M=C.filter(function(P){const F=P.getGeometryFunction()(e);if(F){const D=F.getType();return D==="GeometryCollection"?F.getGeometriesArrayRecursive().filter(function(V){const H=V.getType();return H==="LineString"||H==="MultiLineString"}).length:D==="LineString"||D==="MultiLineString"}}),I=C.filter(function(P){const F=P.getGeometryFunction()(e);if(F){const D=F.getType();return D==="GeometryCollection"?F.getGeometriesArrayRecursive().filter(function(V){const H=V.getType();return H==="Polygon"||H==="MultiPolygon"}).length:D==="Polygon"||D==="MultiPolygon"}})),i.Style={pointStyles:x,lineStyles:M,polyStyles:I}}if(x.length&&i.name===void 0){const M=x[0].getText();M&&(i.name=M.getText())}}}const o=n[n.length-1].node,d=Fut[o.namespaceURI],p=Pd(i,d);if(Es(r,Z4,Cu,p,n,d),a.length>0){const y=Pd(i,a);Es(r,Z4,Out,[{names:a,values:y}],n)}const A=n[0];let v=e.getGeometry();v&&(v=dl(v,!0,A)),Es(r,Z4,zAe,[v],n)}const Nut=nr(Di,["extrude","tessellate","altitudeMode","coordinates"]),kut=nr(Di,{extrude:on(hE),tessellate:on(hE),altitudeMode:on(ys),coordinates:on(aut)});function yC(t,e,n){const r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=n[n.length-1].node,l=Nut[a.namespaceURI],o=Pd(s,l);Es(i,kut,Cu,o,n,l)}const Dut=nr(Di,["color","fill","outline"]),ate=nr(Di,{outerBoundaryIs:on(ote),innerBoundaryIs:on(ote)}),Uut=Tl("innerBoundaryIs"),zut=Tl("outerBoundaryIs");function HAe(t,e,n){const r=e.getLinearRings(),i=r.shift(),s={node:t};Es(s,ate,Uut,r,n),Es(s,ate,zut,[i],n)}const $ut=nr(Di,{color:on(dN),fill:on(hE),outline:on(hE)});function Vut(t,e,n){const r={node:t},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},l=n[n.length-1].node,o=Dut[l.namespaceURI],d=Pd(a,o);Es(r,$ut,Cu,d,n,o)}function GAe(t,e){vd(t,Math.round(e*1e6)/1e6)}const Hut=nr(Di,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Gut=nr(Di,{IconStyle:on(_ut),LabelStyle:on(xut),LineStyle:on(Sut),PolyStyle:on(Vut)});function Qut(t,e,n){const r={node:t},i={};if(e.pointStyles.length){const o=e.pointStyles[0].getText();o&&(i.LabelStyle=o);const d=e.pointStyles[0].getImage();d&&typeof d.getSrc=="function"&&(i.IconStyle=d)}if(e.lineStyles.length){const o=e.lineStyles[0].getStroke();o&&(i.LineStyle=o)}if(e.polyStyles.length){const o=e.polyStyles[0].getStroke();o&&!i.LineStyle&&(i.LineStyle=o),i.PolyStyle=e.polyStyles[0]}const s=n[n.length-1].node,a=Hut[s.namespaceURI],l=Pd(i,a);Es(r,Gut,Cu,l,n,a)}function jut(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}const Kut=vct;var $7={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$7.read=function(t,e,n,r,i){var s,a,l=i*8-r-1,o=(1<<l)-1,d=o>>1,p=-7,A=n?i-1:0,v=n?-1:1,y=t[e+A];for(A+=v,s=y&(1<<-p)-1,y>>=-p,p+=l;p>0;s=s*256+t[e+A],A+=v,p-=8);for(a=s&(1<<-p)-1,s>>=-p,p+=r;p>0;a=a*256+t[e+A],A+=v,p-=8);if(s===0)s=1-d;else{if(s===o)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-d}return(y?-1:1)*a*Math.pow(2,s-r)};$7.write=function(t,e,n,r,i,s){var a,l,o,d=s*8-i-1,p=(1<<d)-1,A=p>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,C=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-a))<1&&(a--,o*=2),a+A>=1?e+=v/o:e+=v*Math.pow(2,1-A),e*o>=2&&(a++,o/=2),a+A>=p?(l=0,a=p):a+A>=1?(l=(e*o-1)*Math.pow(2,i),a=a+A):(l=e*Math.pow(2,A-1)*Math.pow(2,i),a=0));i>=8;t[n+y]=l&255,y+=C,l/=256,i-=8);for(a=a<<i|l,d+=i;d>0;t[n+y]=a&255,y+=C,a/=256,d-=8);t[n+y-C]|=x*128};var Wut=Xo,jR=$7;function Xo(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Xo.Varint=0;Xo.Fixed64=1;Xo.Bytes=2;Xo.Fixed32=5;var K8=65536*65536,lte=1/K8,qut=12,QAe=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Xo.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,s=this.pos;this.type=r&7,t(i,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=KR(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=ute(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=KR(this.buf,this.pos)+KR(this.buf,this.pos+4)*K8;return this.pos+=8,t},readSFixed64:function(){var t=KR(this.buf,this.pos)+ute(this.buf,this.pos+4)*K8;return this.pos+=8,t},readFloat:function(){var t=jR.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=jR.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,n,r;return r=e[this.pos++],n=r&127,r<128||(r=e[this.pos++],n|=(r&127)<<7,r<128)||(r=e[this.pos++],n|=(r&127)<<14,r<128)||(r=e[this.pos++],n|=(r&127)<<21,r<128)?n:(r=e[this.pos],n|=(r&15)<<28,Yut(n,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=qut&&QAe?uht(this.buf,e,t):cht(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Xo.Bytes)return t.push(this.readVarint(e));var n=pv(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Xo.Bytes)return t.push(this.readSVarint());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Xo.Bytes)return t.push(this.readBoolean());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Xo.Bytes)return t.push(this.readFloat());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Xo.Bytes)return t.push(this.readDouble());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Xo.Bytes)return t.push(this.readFixed32());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Xo.Bytes)return t.push(this.readSFixed32());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Xo.Bytes)return t.push(this.readFixed64());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Xo.Bytes)return t.push(this.readSFixed64());var e=pv(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===Xo.Varint)for(;this.buf[this.pos++]>127;);else if(e===Xo.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Xo.Fixed32)this.pos+=4;else if(e===Xo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),lx(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),lx(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),lx(this.buf,t&-1,this.pos),lx(this.buf,Math.floor(t*lte),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),lx(this.buf,t&-1,this.pos),lx(this.buf,Math.floor(t*lte),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){Xut(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=hht(this.buf,t,this.pos);var n=this.pos-e;n>=128&&cte(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),jR.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),jR.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&cte(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Xo.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,eht,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,tht,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,iht,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,nht,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,rht,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,sht,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,oht,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,aht,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,lht,e)},writeBytesField:function(t,e){this.writeTag(t,Xo.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Xo.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Xo.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Xo.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Xo.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Xo.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Xo.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Xo.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Xo.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Xo.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};function Yut(t,e,n){var r=n.buf,i,s;if(s=r[n.pos++],i=(s&112)>>4,s<128||(s=r[n.pos++],i|=(s&127)<<3,s<128)||(s=r[n.pos++],i|=(s&127)<<10,s<128)||(s=r[n.pos++],i|=(s&127)<<17,s<128)||(s=r[n.pos++],i|=(s&127)<<24,s<128)||(s=r[n.pos++],i|=(s&1)<<31,s<128))return ax(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function pv(t){return t.type===Xo.Bytes?t.readVarint()+t.pos:t.pos+1}function ax(t,e,n){return n?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function Xut(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Zut(n,r,e),Jut(r,e)}function Zut(t,e,n){n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos++]=t&127|128,t>>>=7,n.buf[n.pos]=t&127}function Jut(t,e){var n=(t&7)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function cte(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function eht(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function tht(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function nht(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function rht(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function iht(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function sht(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function oht(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function aht(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function lht(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function KR(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function lx(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function ute(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function cht(t,e,n){for(var r="",i=e;i<n;){var s=t[i],a=null,l=s>239?4:s>223?3:s>191?2:1;if(i+l>n)break;var o,d,p;l===1?s<128&&(a=s):l===2?(o=t[i+1],(o&192)===128&&(a=(s&31)<<6|o&63,a<=127&&(a=null))):l===3?(o=t[i+1],d=t[i+2],(o&192)===128&&(d&192)===128&&(a=(s&15)<<12|(o&63)<<6|d&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):l===4&&(o=t[i+1],d=t[i+2],p=t[i+3],(o&192)===128&&(d&192)===128&&(p&192)===128&&(a=(s&15)<<18|(o&63)<<12|(d&63)<<6|p&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,l=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=l}return r}function uht(t,e,n){return QAe.decode(t.subarray(e,n))}function hht(t,e,n){for(var r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):s=i;continue}else s&&(t[n++]=239,t[n++]=191,t[n++]=189,s=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=i&63|128)}return n}const dht=kf(Wut);class fht extends vM{constructor(e){super(),e=e||{},this.dataProjection=new Jv({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:Nu,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,n,r,i){e.pos=n.geometry;const s=e.readVarint()+e.pos;let a=1,l=0,o=0,d=0,p=0,A=0;for(;e.pos<s;){if(!l){const v=e.readVarint();a=v&7,l=v>>3}if(l--,a===1||a===2)o+=e.readSVarint(),d+=e.readSVarint(),a===1&&p>A&&(i.push(p),A=p),r.push(o,d),p+=2;else if(a===7)p>A&&(r.push(r[A],r[A+1]),p+=2);else throw new Error("Invalid command found in the PBF")}p>A&&(i.push(p),A=p)}createFeature_(e,n,r){const i=n.type;if(i===0)return null;let s;const a=n.properties;let l;this.idProperty_?(l=a[this.idProperty_],delete a[this.idProperty_]):l=n.id,a[this.layerName_]=n.layer.name;const o=[],d=[];this.readRawGeometry_(e,n,o,d);const p=vht(i,d.length);if(this.featureClass_===Nu)s=new this.featureClass_(p,o,d,2,a,l),s.transform(r.dataProjection);else{let A;if(p=="Polygon"){const C=fG(o,d);A=C.length>1?new Dc(o,"XY",C):new La(o,"XY",d)}else A=p==="Point"?new So(o,"XY"):p==="LineString"?new ko(o,"XY"):p==="MultiPoint"?new Nd(o,"XY"):p==="MultiLineString"?new kc(o,"XY",d):null;const v=this.featureClass_;s=new v,this.geometryName_&&s.setGeometryName(this.geometryName_);const y=dl(A,!1,r);s.setGeometry(y),l!==void 0&&s.setId(l),s.setProperties(a,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,n){const r=this.layers_;n=this.adaptOptions(n);const i=Oi(n.dataProjection);i.setWorldExtent(n.extent),n.dataProjection=i;const s=new dht(e),a=s.readFields(pht,{}),l=[];for(const o in a){if(r&&!r.includes(o))continue;const d=a[o],p=d?[0,0,d.extent,d.extent]:null;i.setExtent(p);for(let A=0,v=d.length;A<v;++A){const y=mht(s,d,A),C=this.createFeature_(s,y,n);C!==null&&l.push(C)}}return l}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function pht(t,e,n){if(t===3){const r={keys:[],values:[],features:[]},i=n.readVarint()+n.pos;n.readFields(Aht,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Aht(t,e,n){if(t===15)e.version=n.readVarint();else if(t===1)e.name=n.readString();else if(t===5)e.extent=n.readVarint();else if(t===2)e.features.push(n.pos);else if(t===3)e.keys.push(n.readString());else if(t===4){let r=null;const i=n.readVarint()+n.pos;for(;n.pos<i;)t=n.readVarint()>>3,r=t===1?n.readString():t===2?n.readFloat():t===3?n.readDouble():t===4?n.readVarint64():t===5?n.readVarint():t===6?n.readSVarint():t===7?n.readBoolean():null;e.values.push(r)}}function ght(t,e,n){if(t==1)e.id=n.readVarint();else if(t==2){const r=n.readVarint()+n.pos;for(;n.pos<r;){const i=e.layer.keys[n.readVarint()],s=e.layer.values[n.readVarint()];e.properties[i]=s}}else t==3?e.type=n.readVarint():t==4&&(e.geometry=n.pos)}function mht(t,e,n){t.pos=e.features[n];const r=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(ght,i,r),i}function vht(t,e){let n;return t===1?n=e===1?"Point":"MultiPoint":t===2?n=e===1?"LineString":"MultiLineString":t===3&&(n="Polygon"),n}const yht=fht;class V7{read(e){if(!e)return null;if(typeof e=="string"){const n=mp(e);return this.readFromDocument(n)}return gp(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null}readFromNode(e){Xi()}}const _ht="http://www.w3.org/1999/xlink";function $E(t){return t.getAttributeNS(_ht,"href")}const kd=[null,"http://www.opengis.net/ows/1.1"],bht=nr(kd,{ServiceIdentification:Wt(jht),ServiceProvider:Wt(Wht),OperationsMetadata:Wt(Ght)});class wht extends V7{constructor(){super()}readFromNode(e){const n=gr({},bht,e,[]);return n||null}}const xht=nr(kd,{DeliveryPoint:Wt(wr),City:Wt(wr),AdministrativeArea:Wt(wr),PostalCode:Wt(wr),Country:Wt(wr),ElectronicMailAddress:Wt(wr)}),Cht=nr(kd,{Value:Da(qht)}),Eht=nr(kd,{AllowedValues:Wt(kht)}),Sht=nr(kd,{Phone:Wt(Qht),Address:Wt(Nht)}),Tht=nr(kd,{HTTP:Wt(Vht)}),Iht=nr(kd,{Get:Da($ht),Post:void 0}),Bht=nr(kd,{DCP:Wt(zht)}),Mht=nr(kd,{Operation:Hht}),Lht=nr(kd,{Voice:Wt(wr),Facsimile:Wt(wr)}),Rht=nr(kd,{Constraint:Da(Dht)}),Pht=nr(kd,{IndividualName:Wt(wr),PositionName:Wt(wr),ContactInfo:Wt(Uht)}),Fht=nr(kd,{Abstract:Wt(wr),AccessConstraints:Wt(wr),Fees:Wt(wr),Title:Wt(wr),ServiceTypeVersion:Wt(wr),ServiceType:Wt(wr)}),Oht=nr(kd,{ProviderName:Wt(wr),ProviderSite:Wt($E),ServiceContact:Wt(Kht)});function Nht(t,e){return gr({},xht,t,e)}function kht(t,e){return gr({},Cht,t,e)}function Dht(t,e){const n=t.getAttribute("name");if(n)return gr({name:n},Eht,t,e)}function Uht(t,e){return gr({},Sht,t,e)}function zht(t,e){return gr({},Tht,t,e)}function $ht(t,e){const n=$E(t);if(n)return gr({href:n},Rht,t,e)}function Vht(t,e){return gr({},Iht,t,e)}function Hht(t,e){const n=t.getAttribute("name"),r=gr({},Bht,t,e);if(!r)return;const i=e[e.length-1];i[n]=r}function Ght(t,e){return gr({},Mht,t,e)}function Qht(t,e){return gr({},Lht,t,e)}function jht(t,e){return gr({},Fht,t,e)}function Kht(t,e){return gr({},Pht,t,e)}function Wht(t,e){return gr({},Oht,t,e)}function qht(t,e){return wr(t)}const jAe=wht;function hte(t,e,n,r,i,s){i!==void 0?(i=i,s=s!==void 0?s:0):(i=[],s=0);let a=e;for(;a<n;){const l=t[a++];i[s++]=t[a++],i[s++]=l;for(let o=2;o<r;++o)i[s++]=t[a++]}return i.length=s,i}class Yht extends k7{constructor(e){super(),e=e||{},this.dataProjection=Oi("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,n){const r=this.readGeometryFromText(e,n);return new Ys(r)}readFeaturesFromText(e,n){return[this.readFeatureFromText(e,n)]}readGeometryFromText(e,n){const r=iB(this.geometryLayout_),i=Zht(e,r,this.factor_);hte(i,0,i.length,r,i);const s=Iv(i,0,i.length,r),a=new ko(s,this.geometryLayout_);return dl(a,!1,this.adaptOptions(n))}writeFeatureText(e,n){const r=e.getGeometry();if(r)return this.writeGeometryText(r,n);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,n){return this.writeFeatureText(e[0],n)}writeGeometryText(e,n){e=dl(e,!0,this.adaptOptions(n));const r=e.getFlatCoordinates(),i=e.getStride();return hte(r,0,r.length,i,r),Xht(r,i,this.factor_)}}function Xht(t,e,n){n=n||1e5;let r;const i=new Array(e);for(r=0;r<e;++r)i[r]=0;for(let s=0,a=t.length;s<a;)for(r=0;r<e;++r,++s){const l=t[s],o=l-i[r];i[r]=l,t[s]=o}return Jht(t,n)}function Zht(t,e,n){n=n||1e5;let r;const i=new Array(e);for(r=0;r<e;++r)i[r]=0;const s=edt(t,n);for(let a=0,l=s.length;a<l;)for(r=0;r<e;++r,++a)i[r]+=s[a],s[a]=i[r];return s}function Jht(t,e){e=e||1e5;for(let n=0,r=t.length;n<r;++n)t[n]=Math.round(t[n]*e);return tdt(t)}function edt(t,e){e=e||1e5;const n=ndt(t);for(let r=0,i=n.length;r<i;++r)n[r]/=e;return n}function tdt(t){for(let e=0,n=t.length;e<n;++e){const r=t[e];t[e]=r<0?~(r<<1):r<<1}return rdt(t)}function ndt(t){const e=idt(t);for(let n=0,r=e.length;n<r;++n){const i=e[n];e[n]=i&1?~(i>>1):i>>1}return e}function rdt(t){let e="";for(let n=0,r=t.length;n<r;++n)e+=sdt(t[n]);return e}function idt(t){const e=[];let n=0,r=0;for(let i=0,s=t.length;i<s;++i){const a=t.charCodeAt(i)-63;n|=(a&31)<<r,a<32?(e.push(n),n=0,r=0):r+=5}return e}function sdt(t){let e,n="";for(;t>=32;)e=(32|t&31)+63,n+=String.fromCharCode(e),t>>=5;return e=t+63,n+=String.fromCharCode(e),n}const odt=Yht;class adt extends M7{constructor(e){super(),e=e||{},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=Oi(e.dataProjection?e.dataProjection:"EPSG:4326")}readFeaturesFromObject(e,n){if(e.type=="Topology"){const r=e;let i,s=null,a=null;r.transform&&(i=r.transform,s=i.scale,a=i.translate);const l=r.arcs;i&&gdt(l,s,a);const o=[],d=r.objects,p=this.layerName_;let A;for(const v in d)this.layers_&&!this.layers_.includes(v)||(d[v].type==="GeometryCollection"?(A=d[v],o.push.apply(o,Adt(A,l,s,a,p,v,n))):(A=d[v],o.push(KAe(A,l,s,a,p,v,n))));return o}return[]}readProjectionFromObject(e){return this.dataProjection}}const ldt={Point:cdt,LineString:hdt,Polygon:fdt,MultiPoint:udt,MultiLineString:ddt,MultiPolygon:pdt};function fN(t,e){const n=[];let r;for(let i=0,s=t.length;i<s;++i)if(r=t[i],i>0&&n.pop(),r>=0){const a=e[r];for(let l=0,o=a.length;l<o;++l)n.push(a[l].slice(0))}else{const a=e[~r];for(let l=a.length-1;l>=0;--l)n.push(a[l].slice(0))}return n}function cdt(t,e,n){const r=t.coordinates;return e&&n&&H7(r,e,n),new So(r)}function udt(t,e,n){const r=t.coordinates;if(e&&n)for(let i=0,s=r.length;i<s;++i)H7(r[i],e,n);return new Nd(r)}function hdt(t,e){const n=fN(t.arcs,e);return new ko(n)}function ddt(t,e){const n=[];for(let r=0,i=t.arcs.length;r<i;++r)n[r]=fN(t.arcs[r],e);return new kc(n)}function fdt(t,e){const n=[];for(let r=0,i=t.arcs.length;r<i;++r)n[r]=fN(t.arcs[r],e);return new La(n)}function pdt(t,e){const n=[];for(let r=0,i=t.arcs.length;r<i;++r){const s=t.arcs[r],a=[];for(let l=0,o=s.length;l<o;++l)a[l]=fN(s[l],e);n[r]=a}return new Dc(n)}function Adt(t,e,n,r,i,s,a){const l=t.geometries,o=[];for(let d=0,p=l.length;d<p;++d)o[d]=KAe(l[d],e,n,r,i,s,a);return o}function KAe(t,e,n,r,i,s,a){let l=null;const o=t.type;if(o){const A=ldt[o];o==="Point"||o==="MultiPoint"?l=A(t,n,r):l=A(t,e),l=dl(l,!1,a)}const d=new Ys({geometry:l});t.id!==void 0&&d.setId(t.id);let p=t.properties;return i&&(p||(p={}),p[i]=s),p&&d.setProperties(p,!0),d}function gdt(t,e,n){for(let r=0,i=t.length;r<i;++r)mdt(t[r],e,n)}function mdt(t,e,n){let r=0,i=0;for(let s=0,a=t.length;s<a;++s){const l=t[s];r+=l[0],i+=l[1],l[0]=r,l[1]=i,H7(l,e,n)}}function H7(t,e,n){t[0]=t[0]*e[0]+n[0],t[1]=t[1]*e[1]+n[1]}const vdt=adt;class Po extends Ir{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,n,r){const i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(e,n,r)}}Po.prototype.namespace="http://www.opengis.net/gml/3.2";Po.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:rs(Ir.prototype.readFlatPos),posList:rs(Ir.prototype.readFlatPosList),coordinates:rs(lo.prototype.readFlatCoordinates)}};Po.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Ir.prototype.interiorParser,exterior:Ir.prototype.exteriorParser}};Po.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:rs(Pi.prototype.readPoint),MultiPoint:rs(Pi.prototype.readMultiPoint),LineString:rs(Pi.prototype.readLineString),MultiLineString:rs(Pi.prototype.readMultiLineString),LinearRing:rs(Pi.prototype.readLinearRing),Polygon:rs(Pi.prototype.readPolygon),MultiPolygon:rs(Pi.prototype.readMultiPolygon),Surface:rs(Po.prototype.readSurface),MultiSurface:rs(Ir.prototype.readMultiSurface),Curve:rs(Po.prototype.readCurve),MultiCurve:rs(Ir.prototype.readMultiCurve),Envelope:rs(Po.prototype.readEnvelope)}};Po.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Fi(Ir.prototype.curveMemberParser),curveMembers:Fi(Ir.prototype.curveMemberParser)}};Po.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Fi(Ir.prototype.surfaceMemberParser),surfaceMembers:Fi(Ir.prototype.surfaceMemberParser)}};Po.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Fi(Pi.prototype.readLineString),Curve:Fi(Ir.prototype.readCurve)}};Po.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Fi(Pi.prototype.readPolygon),Surface:Fi(Ir.prototype.readSurface)}};Po.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:rs(Ir.prototype.readPatch)}};Po.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:rs(Ir.prototype.readSegment)}};Po.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Fi(Ir.prototype.readFlatPosList),upperCorner:Fi(Ir.prototype.readFlatPosList)}};Po.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:rs(Ir.prototype.readPolygonPatch)}};Po.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:s5(Ir.prototype.readLineStringSegment)}};Po.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Fi(Pi.prototype.pointMemberParser),pointMembers:Fi(Pi.prototype.pointMemberParser)}};Po.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Fi(Pi.prototype.lineStringMemberParser),lineStringMembers:Fi(Pi.prototype.lineStringMemberParser)}};Po.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Fi(Pi.prototype.polygonMemberParser),polygonMembers:Fi(Pi.prototype.polygonMemberParser)}};Po.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Fi(Pi.prototype.readFlatCoordinatesFromNode)}};Po.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Fi(Pi.prototype.readLineString)}};Po.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Fi(Pi.prototype.readPolygon)}};Po.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:rs(Pi.prototype.readFlatLinearRing),Ring:rs(Po.prototype.readFlatCurveRing)}};Po.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:on(Ir.prototype.writeRing),interior:on(Ir.prototype.writeRing)}};Po.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:on(ys),upperCorner:on(ys)}};Po.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:on(Ir.prototype.writeSurfaceOrPolygonMember),polygonMember:on(Ir.prototype.writeSurfaceOrPolygonMember)}};Po.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:on(Ir.prototype.writePointMember)}};Po.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:on(Ir.prototype.writeLineStringOrCurveMember),curveMember:on(Ir.prototype.writeLineStringOrCurveMember)}};Po.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:on(Ir.prototype.writeCurveOrLineString),MultiCurve:on(Ir.prototype.writeMultiCurveOrLineString),Point:on(Po.prototype.writePoint),MultiPoint:on(Ir.prototype.writeMultiPoint),LineString:on(Ir.prototype.writeCurveOrLineString),MultiLineString:on(Ir.prototype.writeMultiCurveOrLineString),LinearRing:on(Ir.prototype.writeLinearRing),Polygon:on(Ir.prototype.writeSurfaceOrPolygon),MultiPolygon:on(Ir.prototype.writeMultiSurfaceOrPolygon),Surface:on(Ir.prototype.writeSurfaceOrPolygon),MultiSurface:on(Ir.prototype.writeMultiSurfaceOrPolygon),Envelope:on(Ir.prototype.writeEnvelope)}};class WAe{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}}class ydt extends WAe{constructor(e,n){super(e),this.conditions=n,zs(this.conditions.length>=2,"At least 2 conditions are required")}}class _dt extends ydt{constructor(e){super("And",Array.prototype.slice.call(arguments))}}class bdt extends WAe{constructor(e,n,r){if(super("BBOX"),this.geometryName=e,this.extent=n,n.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function wdt(t){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(_dt,e))}function xdt(t,e,n){return new bdt(t,e,n)}const dte={"http://www.opengis.net/gml":{boundedBy:Wt(Pi.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Fi(Pi.prototype.readFeaturesInternal)}},Cdt={"http://www.opengis.net/wfs":{totalInserted:Wt($l),totalUpdated:Wt($l),totalDeleted:Wt($l)},"http://www.opengis.net/wfs/2.0":{totalInserted:Wt($l),totalUpdated:Wt($l),totalDeleted:Wt($l)}},Edt={"http://www.opengis.net/wfs":{TransactionSummary:Wt(pte,"transactionSummary"),InsertResults:Wt(gte,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Wt(pte,"transactionSummary"),InsertResults:Wt(gte,"insertIds")}},Sdt={"http://www.opengis.net/wfs":{PropertyName:on(ys)},"http://www.opengis.net/wfs/2.0":{PropertyName:on(ys)}},qAe={"http://www.opengis.net/wfs":{Insert:on(mte),Update:on(yte),Delete:on(vte),Property:on(_te),Native:on(bte)},"http://www.opengis.net/wfs/2.0":{Insert:on(mte),Update:on(yte),Delete:on(vte),Property:on(_te),Native:on(bte)}},YAe="feature",G7="http://www.w3.org/2000/xmlns/",Q7={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},W8={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},j7={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},fte={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},K7={"2.0.0":Po,"1.1.0":Ir,"1.0.0":lo},Tdt="1.1.0";class Idt extends _M{constructor(e){super(),e=e||{},this.version_=e.version?e.version:Tdt,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new K7[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:fte[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,n){const r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,n||{}));const i=[r];let s;this.version_==="2.0.0"?s=dte:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let a=gr([],s,e,i,this.gmlFormat_);return a||(a=[]),a}readTransactionResponse(e){if(e){if(typeof e=="string"){const n=mp(e);return this.readTransactionResponseFromDocument(n)}return gp(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const n=mp(e);return this.readFeatureCollectionMetadataFromDocument(n)}return gp(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(e){const n={},r=Mv(e.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,gr(n,dte,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(e){return gr({},Edt,e,[])}writeGetFeature(e){const n=Rs(W8[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),e.handle&&n.setAttribute("handle",e.handle),e.outputFormat&&n.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&n.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&n.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&n.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&n.setAttribute("count",String(e.count)),e.viewParams!==void 0&&n.setAttribute("viewParams",e.viewParams),n.setAttributeNS(Pb,"xsi:schemaLocation",this.schemaLocation_);const r={node:n};if(Object.assign(r,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),zs(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let i=e.filter;e.bbox&&(zs(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,i)),Object.assign(r,{geometryName:e.geometryName,filter:i}),Lte(n,e.featureTypes,[r])}else e.featureTypes.forEach(i=>{const s=this.combineBboxAndFilter(i.geometryName,i.bbox,e.srsName,e.filter);Object.assign(r,{geometryName:i.geometryName,filter:s}),Lte(n,[i.name],[r])});return n}combineBboxAndFilter(e,n,r,i){const s=xdt(e,n,r);return i?wdt(i,s):s}writeTransaction(e,n,r,i){const s=[],a=i.version?i.version:this.version_,l=Rs(W8[a],"Transaction");l.setAttribute("service","WFS"),l.setAttribute("version",a);let o;i&&(o=i.gmlOptions?i.gmlOptions:{},i.handle&&l.setAttribute("handle",i.handle)),l.setAttributeNS(Pb,"xsi:schemaLocation",fte[a]);const d=Bdt(l,o,a,i);return e&&WR("Insert",e,s,d),n&&WR("Update",n,s,d),r&&WR("Delete",r,s,d),i.nativeElements&&WR("Native",i.nativeElements,s,d),l}readProjectionFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(!(n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(n,r),Oi(r.pop().srsName)}}return null}}function Bdt(t,e,n,r){const i=r.featurePrefix?r.featurePrefix:YAe;let s;return n==="1.0.0"?s=2:n==="1.1.0"?s=3:n==="2.0.0"&&(s=3.2),Object.assign({node:t},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:i,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},e)}function WR(t,e,n,r){Es(r,qAe,Tl(t),e,n)}function pte(t,e){return gr({},Cdt,t,e)}const Mdt={"http://www.opengis.net/ogc":{FeatureId:Fi(function(t,e){return t.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:Fi(function(t,e){return t.getAttribute("fid")})}};function Ate(t,e){Bd(Mdt,t,e)}const Ldt={"http://www.opengis.net/wfs":{Feature:Ate},"http://www.opengis.net/wfs/2.0":{Feature:Ate}};function gte(t,e){return gr([],Ldt,t,e)}function mte(t,e,n){const r=n[n.length-1],i=r.featureType,s=r.featureNS,a=r.gmlVersion,l=Rs(s,i);t.appendChild(l),a===2?lo.prototype.writeFeatureElement(l,e,n):a===3?Ir.prototype.writeFeatureElement(l,e,n):Po.prototype.writeFeatureElement(l,e,n)}function XAe(t,e,n){const i=n[n.length-1].version,s=Q7[i],a=Rs(s,"Filter"),l=Rs(s,"FeatureId");a.appendChild(l),l.setAttribute("fid",e),t.appendChild(a)}function W7(t,e){t=t||YAe;const n=t+":";return e.startsWith(n)?e:n+e}function vte(t,e,n){const r=n[n.length-1];zs(e.getId()!==void 0,"Features must have an id set");const i=r.featureType,s=r.featurePrefix,a=r.featureNS,l=W7(s,i);t.setAttribute("typeName",l),t.setAttributeNS(G7,"xmlns:"+s,a);const o=e.getId();o!==void 0&&XAe(t,o,n)}function yte(t,e,n){const r=n[n.length-1];zs(e.getId()!==void 0,"Features must have an id set");const i=r.version,s=r.featureType,a=r.featurePrefix,l=r.featureNS,o=W7(a,s),d=e.getGeometryName();t.setAttribute("typeName",o),t.setAttributeNS(G7,"xmlns:"+a,l);const p=e.getId();if(p!==void 0){const A=e.getKeys(),v=[];for(let y=0,C=A.length;y<C;y++){const x=e.get(A[y]);if(x!==void 0){let M=A[y];x&&typeof x.getSimplifiedGeometry=="function"&&(M=d),v.push({name:M,value:x})}}Es({version:i,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},qAe,Tl("Property"),v,n),XAe(t,p,n)}}function _te(t,e,n){const r=n[n.length-1],i=r.version,s=W8[i],l=Rs(s,i==="2.0.0"?"ValueReference":"Name"),o=r.gmlVersion;if(t.appendChild(l),ys(l,e.name),e.value!==void 0&&e.value!==null){const d=Rs(s,"Value");t.appendChild(d),e.value&&typeof e.value.getSimplifiedGeometry=="function"?o===2?lo.prototype.writeGeometryElement(d,e.value,n):o===3?Ir.prototype.writeGeometryElement(d,e.value,n):Po.prototype.writeGeometryElement(d,e.value,n):ys(d,e.value)}}function bte(t,e,n){e.vendorId&&t.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&ys(t,e.value)}const pN={"http://www.opengis.net/wfs":{Query:on(wte)},"http://www.opengis.net/wfs/2.0":{Query:on(wte)},"http://www.opengis.net/ogc":{During:on(Ete),And:on(qR),Or:on(qR),Not:on(Ste),BBOX:on(xte),Contains:on(py),Intersects:on(py),Within:on(py),DWithin:on(Cte),PropertyIsEqualTo:on(ip),PropertyIsNotEqualTo:on(ip),PropertyIsLessThan:on(ip),PropertyIsLessThanOrEqualTo:on(ip),PropertyIsGreaterThan:on(ip),PropertyIsGreaterThanOrEqualTo:on(ip),PropertyIsNull:on(Tte),PropertyIsBetween:on(Ite),PropertyIsLike:on(Bte)},"http://www.opengis.net/fes/2.0":{During:on(Ete),And:on(qR),Or:on(qR),Not:on(Ste),BBOX:on(xte),Contains:on(py),Disjoint:on(py),Intersects:on(py),ResourceId:on(Pdt),Within:on(py),DWithin:on(Cte),PropertyIsEqualTo:on(ip),PropertyIsNotEqualTo:on(ip),PropertyIsLessThan:on(ip),PropertyIsLessThanOrEqualTo:on(ip),PropertyIsGreaterThan:on(ip),PropertyIsGreaterThanOrEqualTo:on(ip),PropertyIsNull:on(Tte),PropertyIsBetween:on(Ite),PropertyIsLike:on(Bte)}};function wte(t,e,n){const r=n[n.length-1],i=r.version,s=r.featurePrefix,a=r.featureNS,l=r.propertyNames,o=r.srsName;let d;s?d=W7(s,e):d=e;let p;i==="2.0.0"?p="typeNames":p="typeName",t.setAttribute(p,d),o&&t.setAttribute("srsName",o),a&&t.setAttributeNS(G7,"xmlns:"+s,a);const A=Object.assign({},r);A.node=t,Es(A,Sdt,Tl("PropertyName"),l,n);const v=r.filter;if(v){const y=Rs(AN(i),"Filter");t.appendChild(y),Rdt(y,v,n)}}function Rdt(t,e,n){const r=n[n.length-1],i={node:t};Object.assign(i,{context:r}),Es(i,pN,Tl(e.getTagName()),[e],n)}function xte(t,e,n){const r=n[n.length-1],s=r.context.version;r.srsName=e.srsName;const a=K7[s];VE(s,t,e.geometryName),a.prototype.writeGeometryElement(t,e.extent,n)}function Pdt(t,e,n){t.setAttribute("rid",e.rid)}function py(t,e,n){const r=n[n.length-1],s=r.context.version;r.srsName=e.srsName;const a=K7[s];VE(s,t,e.geometryName),a.prototype.writeGeometryElement(t,e.geometry,n)}function Cte(t,e,n){const s=n[n.length-1].context.version;py(t,e,n);const a=Rs(AN(s),"Distance");ys(a,e.distance.toString()),s==="2.0.0"?a.setAttribute("uom",e.unit):a.setAttribute("units",e.unit),t.appendChild(a)}function Ete(t,e,n){const s=n[n.length-1].context.version;c5(j7[s],"ValueReference",t,e.propertyName);const a=Rs(Uv,"TimePeriod");t.appendChild(a);const l=Rs(Uv,"begin");a.appendChild(l),Mte(l,e.begin);const o=Rs(Uv,"end");a.appendChild(o),Mte(o,e.end)}function qR(t,e,n){const i=n[n.length-1].context,s={node:t};Object.assign(s,{context:i});const a=e.conditions;for(let l=0,o=a.length;l<o;++l){const d=a[l];Es(s,pN,Tl(d.getTagName()),[d],n)}}function Ste(t,e,n){const i=n[n.length-1].context,s={node:t};Object.assign(s,{context:i});const a=e.condition;Es(s,pN,Tl(a.getTagName()),[a],n)}function ip(t,e,n){const s=n[n.length-1].context.version;e.matchCase!==void 0&&t.setAttribute("matchCase",e.matchCase.toString()),VE(s,t,e.propertyName),u5(s,t,""+e.expression)}function Tte(t,e,n){const s=n[n.length-1].context.version;VE(s,t,e.propertyName)}function Ite(t,e,n){const s=n[n.length-1].context.version,a=AN(s);VE(s,t,e.propertyName);const l=Rs(a,"LowerBoundary");t.appendChild(l),u5(s,l,""+e.lowerBoundary);const o=Rs(a,"UpperBoundary");t.appendChild(o),u5(s,o,""+e.upperBoundary)}function Bte(t,e,n){const s=n[n.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&t.setAttribute("matchCase",e.matchCase.toString()),VE(s,t,e.propertyName),u5(s,t,""+e.pattern)}function c5(t,e,n,r){const i=Rs(t,e);ys(i,r),n.appendChild(i)}function u5(t,e,n){c5(AN(t),"Literal",e,n)}function VE(t,e,n){t==="2.0.0"?c5(j7[t],"ValueReference",e,n):c5(Q7[t],"PropertyName",e,n)}function Mte(t,e){const n=Rs(Uv,"TimeInstant");t.appendChild(n);const r=Rs(Uv,"timePosition");n.appendChild(r),ys(r,e)}function Lte(t,e,n){const r=n[n.length-1],i=Object.assign({},r);i.node=t,Es(i,pN,Tl("Query"),e,n)}function AN(t){let e;return t==="2.0.0"?e=j7[t]:e=Q7[t],e}const Fdt=Idt,la={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class Rte{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),n=[];for(let r=0;r<e;r++)n.push(this.readPoint());return n}readPolygon(){const e=this.readUint32(),n=[];for(let r=0;r<e;r++)n.push(this.readLineString());return n}readWkbHeader(e){const r=this.readUint8()>0,i=this.readUint32(r),s=Math.floor((i&268435455)/1e3),a=!!(i&2147483648)||s===1||s===3,l=!!(i&1073741824)||s===2||s===3,o=!!(i&536870912),d=(i&268435455)%1e3,p=["XY",a?"Z":"",l?"M":""].join(""),A=o?this.readUint32(r):null;if(e!==void 0&&e!==d)throw new Error("Unexpected WKB geometry type "+d);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==p)throw new Error("Inconsistent geometry layout");if(A&&this.srid_!==A)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=a,this.hasM_=l,this.layout_=p,this.srid_=A,this.initialized_=!0;return d}readWkbPayload(e){switch(e){case la.POINT:return this.readPoint();case la.LINE_STRING:return this.readLineString();case la.POLYGON:case la.TRIANGLE:return this.readPolygon();case la.MULTI_POINT:return this.readMultiPoint();case la.MULTI_LINE_STRING:return this.readMultiLineString();case la.MULTI_POLYGON:case la.POLYHEDRAL_SURFACE:case la.TIN:return this.readMultiPolygon();case la.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,n){const r=this.readUint32(),i=[];for(let s=0;s<r;s++){const a=e.call(this,n);a&&i.push(a)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,la.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,la.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,la.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),n=this.readWkbPayload(e);switch(e){case la.POINT:return new So(n,this.layout_);case la.LINE_STRING:return new ko(n,this.layout_);case la.POLYGON:case la.TRIANGLE:return new La(n,this.layout_);case la.MULTI_POINT:return new Nd(n,this.layout_);case la.MULTI_LINE_STRING:return new kc(n,this.layout_);case la.MULTI_POLYGON:case la.POLYHEDRAL_SURFACE:case la.TIN:return new Dc(n,this.layout_);case la.GEOMETRY_COLLECTION:return new xu(n);default:return null}}getSrid(){return this.srid_}}class Odt{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,n){const r=Object.assign.apply(null,n.split("").map((i,s)=>({[i]:e[s]})));for(const i of this.layout_)this.writeDouble(i in r?r[i]:this.nodata_[i])}writeLineString(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writePoint(e[r],n)}writePolygon(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeLineString(e[r],n)}writeWkbHeader(e,n){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(n)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(n)&&this.writeUint32(n)}writeMultiPoint(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],n)}writeMultiLineString(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],n)}writeMultiPolygon(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],n)}writeGeometryCollection(e){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeGeometry(e[n])}findMinimumLayout(e,n="XYZM"){const r=(i,s)=>i===s?i:i==="XYZM"?s:s==="XYZM"?i:"XY";if(e instanceof zA)return r(e.getLayout(),n);if(e instanceof xu){const i=e.getGeometriesArray();for(let s=0;s<i.length&&n!=="XY";s++)n=this.findMinimumLayout(i[s],n)}return n}writeGeometry(e,n){const r={Point:la.POINT,LineString:la.LINE_STRING,Polygon:la.POLYGON,MultiPoint:la.MULTI_POINT,MultiLineString:la.MULTI_LINE_STRING,MultiPolygon:la.MULTI_POLYGON,GeometryCollection:la.GEOMETRY_COLLECTION},i=e.getType(),s=r[i];if(!s)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,n),e instanceof zA?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,e.getCoordinates(),e.getLayout()):e instanceof xu&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((s,a)=>s+a[0],0),n=new ArrayBuffer(e),r=new DataView(n);let i=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:r.setUint8(i,s[1]);break;case 4:r.setUint32(i,s[1],this.isLittleEndian_);break;case 8:r.setFloat64(i,s[1],this.isLittleEndian_);break}i+=s[0]}),n}}class Ndt extends vM{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,n){return new Ys({geometry:this.readGeometry(e,n)})}readFeatures(e,n){let r=[];const i=this.readGeometry(e,n);return this.splitCollection&&i instanceof xu?r=i.getGeometriesArray():r=[i],r.map(s=>new Ys({geometry:s}))}readGeometry(e,n){const r=Pte(e);if(!r)return null;const s=new Rte(r).readGeometry();return this.viewCache_=r,n=this.getReadOptions(e,n),this.viewCache_=null,dl(s,!1,n)}readProjection(e){const n=this.viewCache_||Pte(e);if(!n)return;const r=new Rte(n);return r.readWkbHeader(),r.getSrid()&&Oi("EPSG:"+r.getSrid())||void 0}writeFeature(e,n){return this.writeGeometry(e.getGeometry(),n)}writeFeatures(e,n){return this.writeGeometry(new xu(e.map(r=>r.getGeometry())),n)}writeGeometry(e,n){n=this.adaptOptions(n);const r=new Odt({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const a=n.dataProjection&&Oi(n.dataProjection);if(a){const l=a.getCode();l.startsWith("EPSG:")&&(i=Number(l.substring(5)))}}r.writeGeometry(dl(e,!0,n),i);const s=r.getBuffer();return this.hex_?kdt(s):s}}function kdt(t){const e=new Uint8Array(t);return Array.from(e.values()).map(n=>(n<16?"0":"")+Number(n).toString(16).toUpperCase()).join("")}function Ddt(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length/2;n++)e[n]=parseInt(t.substr(n*2,2),16);return new DataView(e.buffer)}function Pte(t){return typeof t=="string"?Ddt(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}const Udt=Ndt,zdt={POINT:So,LINESTRING:ko,POLYGON:La,MULTIPOINT:Nd,MULTILINESTRING:kc,MULTIPOLYGON:Dc},ZAe="EMPTY",JAe="Z",ege="M",$dt="ZM",Zo={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},Vdt={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class Hdt{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,n){return n=n!==void 0?n:!1,e>="0"&&e<="9"||e=="."&&!n}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),n=this.index_;let r=e,i;if(e=="(")i=Zo.LEFT_PAREN;else if(e==",")i=Zo.COMMA;else if(e==")")i=Zo.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")i=Zo.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))i=Zo.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")i=Zo.EOF;else throw new Error("Unexpected character: "+e)}return{position:n,value:r,type:i}}readNumber_(){let e;const n=this.index_;let r=!1,i=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(i=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!i&&(e=="e"||e=="E")||i&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let e;const n=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(n,this.index_--).toUpperCase()}}let Gdt=class{constructor(e){this.lexer_=e,this.token_={position:0,type:Zo.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const n=this.isTokenType(e);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const n=this.token_;if(this.isTokenType(Zo.TEXT)){const r=n.value;r===JAe?e="XYZ":r===ege?e="XYM":r===$dt&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Zo.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(Zo.COMMA));if(this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Zo.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Zo.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Zo.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Zo.LEFT_PAREN)){let e;if(this.token_.type==Zo.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Zo.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Zo.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(Zo.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],n=this.layout_.length;for(let r=0;r<n;++r){const i=this.token_;if(this.match(Zo.NUMBER))e.push(i.value);else break}if(e.length==n)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(Zo.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(Zo.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(Zo.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(Zo.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(Zo.TEXT)&&this.token_.value==ZAe;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(Zo.TEXT)){const n=e.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new xu([]);const a=this.parseGeometryCollectionText_();return new xu(a)}const i=zdt[n];if(!i)throw new Error("Invalid geometry type: "+n);let s;if(r)n=="POINT"?s=[NaN,NaN]:s=[];else switch(n){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new i(s,this.layout_)}throw new Error(this.formatErrorMessage_())}};class Qdt extends k7{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const n=new Hdt(e);return new Gdt(n).parse()}readFeatureFromText(e,n){const r=this.readGeometryFromText(e,n),i=new Ys;return i.setGeometry(r),i}readFeaturesFromText(e,n){let r=[];const i=this.readGeometryFromText(e,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];const s=[];for(let a=0,l=r.length;a<l;++a){const o=new Ys;o.setGeometry(r[a]),s.push(o)}return s}readGeometryFromText(e,n){const r=this.parse_(e);return dl(r,!1,n)}writeFeatureText(e,n){const r=e.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(e,n){if(e.length==1)return this.writeFeatureText(e[0],n);const r=[];for(let s=0,a=e.length;s<a;++s)r.push(e[s].getGeometry());const i=new xu(r);return this.writeGeometryText(i,n)}writeGeometryText(e,n){return rge(dl(e,!0,n))}}function tge(t){const e=t.getCoordinates();return e.length===0?"":e.join(" ")}function jdt(t){const e=[],n=t.getPoints();for(let r=0,i=n.length;r<i;++r)e.push("("+tge(n[r])+")");return e.join(",")}function Kdt(t){const e=[],n=t.getGeometries();for(let r=0,i=n.length;r<i;++r)e.push(rge(n[r]));return e.join(",")}function q7(t){const e=t.getCoordinates(),n=[];for(let r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(",")}function Wdt(t){const e=[],n=t.getLineStrings();for(let r=0,i=n.length;r<i;++r)e.push("("+q7(n[r])+")");return e.join(",")}function nge(t){const e=[],n=t.getLinearRings();for(let r=0,i=n.length;r<i;++r)e.push("("+q7(n[r])+")");return e.join(",")}function qdt(t){const e=[],n=t.getPolygons();for(let r=0,i=n.length;r<i;++r)e.push("("+nge(n[r])+")");return e.join(",")}function Ydt(t){const e=t.getLayout();let n="";return(e==="XYZ"||e==="XYZM")&&(n+=JAe),(e==="XYM"||e==="XYZM")&&(n+=ege),n}const Xdt={Point:tge,LineString:q7,Polygon:nge,MultiPoint:jdt,MultiLineString:Wdt,MultiPolygon:qdt,GeometryCollection:Kdt};function rge(t){const e=t.getType(),n=Xdt[e],r=n(t);let i=Vdt[e];if(typeof t.getFlatCoordinates=="function"){const s=Ydt(t);s.length>0&&(i+=" "+s)}return r.length===0?i+" "+ZAe:i+"("+r+")"}const Zdt=Qdt,Ku=[null,"http://www.opengis.net/wms"],Jdt=nr(Ku,{Service:Wt(_ft),Capability:Wt(yft)}),eft=nr(Ku,{Request:Wt(Tft),Exception:Wt(Cft),Layer:Wt(Eft)});class tft extends V7{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const n=gr({version:this.version},Jdt,e,[]);return n||null}}const nft=nr(Ku,{Name:Wt(wr),Title:Wt(wr),Abstract:Wt(wr),KeywordList:Wt(age),OnlineResource:Wt($E),ContactInformation:Wt(bft),Fees:Wt(wr),AccessConstraints:Wt(wr),LayerLimit:Wt($l),MaxWidth:Wt($l),MaxHeight:Wt($l)}),rft=nr(Ku,{ContactPersonPrimary:Wt(wft),ContactPosition:Wt(wr),ContactAddress:Wt(xft),ContactVoiceTelephone:Wt(wr),ContactFacsimileTelephone:Wt(wr),ContactElectronicMailAddress:Wt(wr)}),ift=nr(Ku,{ContactPerson:Wt(wr),ContactOrganization:Wt(wr)}),sft=nr(Ku,{AddressType:Wt(wr),Address:Wt(wr),City:Wt(wr),StateOrProvince:Wt(wr),PostCode:Wt(wr),Country:Wt(wr)}),oft=nr(Ku,{Format:Fi(wr)}),ige=nr(Ku,{Name:Wt(wr),Title:Wt(wr),Abstract:Wt(wr),KeywordList:Wt(age),CRS:Da(wr),EX_GeographicBoundingBox:Wt(vft),BoundingBox:Da(mft),Dimension:Da(Sft),Attribution:Wt(gft),AuthorityURL:Da(Mft),Identifier:Da(wr),MetadataURL:Da(Lft),DataURL:Da(t0),FeatureListURL:Da(t0),Style:Da(Rft),MinScaleDenominator:Wt(uo),MaxScaleDenominator:Wt(uo),Layer:Da(sge)}),aft=nr(Ku,{Title:Wt(wr),OnlineResource:Wt($E),LogoURL:Wt(oge)}),lft=nr(Ku,{westBoundLongitude:Wt(uo),eastBoundLongitude:Wt(uo),southBoundLatitude:Wt(uo),northBoundLatitude:Wt(uo)}),cft=nr(Ku,{GetCapabilities:Wt(J4),GetMap:Wt(J4),GetFeatureInfo:Wt(J4)}),uft=nr(Ku,{Format:Da(wr),DCPType:Da(Ift)}),hft=nr(Ku,{HTTP:Wt(Bft)}),dft=nr(Ku,{Get:Wt(t0),Post:Wt(t0)}),fft=nr(Ku,{Name:Wt(wr),Title:Wt(wr),Abstract:Wt(wr),LegendURL:Da(oge),StyleSheetURL:Wt(t0),StyleURL:Wt(t0)}),pft=nr(Ku,{Format:Wt(wr),OnlineResource:Wt($E)}),Aft=nr(Ku,{Keyword:Fi(wr)});function gft(t,e){return gr({},aft,t,e)}function mft(t,e){const n=[Ev(t.getAttribute("minx")),Ev(t.getAttribute("miny")),Ev(t.getAttribute("maxx")),Ev(t.getAttribute("maxy"))],r=[Ev(t.getAttribute("resx")),Ev(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:r}}function vft(t,e){const n=gr({},lft,t,e);if(!n)return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,a=n.northBoundLatitude;if(!(r===void 0||i===void 0||s===void 0||a===void 0))return[r,i,s,a]}function yft(t,e){return gr({},eft,t,e)}function _ft(t,e){return gr({},nft,t,e)}function bft(t,e){return gr({},rft,t,e)}function wft(t,e){return gr({},ift,t,e)}function xft(t,e){return gr({},sft,t,e)}function Cft(t,e){return gr([],oft,t,e)}function Eft(t,e){const n=gr({},ige,t,e);return n.Layer===void 0?Object.assign(n,sge(t,e)):n}function sge(t,e){const n=e[e.length-1],r=gr({},ige,t,e);if(!r)return;let i=db(t.getAttribute("queryable"));i===void 0&&(i=n.queryable),r.queryable=i!==void 0?i:!1;let s=Mv(t.getAttribute("cascaded"));s===void 0&&(s=n.cascaded),r.cascaded=s;let a=db(t.getAttribute("opaque"));a===void 0&&(a=n.opaque),r.opaque=a!==void 0?a:!1;let l=db(t.getAttribute("noSubsets"));l===void 0&&(l=n.noSubsets),r.noSubsets=l!==void 0?l:!1;let o=Ev(t.getAttribute("fixedWidth"));o||(o=n.fixedWidth),r.fixedWidth=o;let d=Ev(t.getAttribute("fixedHeight"));return d||(d=n.fixedHeight),r.fixedHeight=d,["Style","CRS","AuthorityURL"].forEach(function(v){if(v in n){const y=r[v]||[];r[v]=y.concat(n[v])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(v){if(!(v in r)){const y=n[v];r[v]=y}}),r}function Sft(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:db(t.getAttribute("multipleValues")),nearestValue:db(t.getAttribute("nearestValue")),current:db(t.getAttribute("current")),values:wr(t)}}function t0(t,e){return gr({},pft,t,e)}function Tft(t,e){return gr({},cft,t,e)}function Ift(t,e){return gr({},hft,t,e)}function Bft(t,e){return gr({},dft,t,e)}function J4(t,e){return gr({},uft,t,e)}function oge(t,e){const n=t0(t,e);if(n){const r=[Mv(t.getAttribute("width")),Mv(t.getAttribute("height"))];return n.size=r,n}}function Mft(t,e){const n=t0(t,e);if(n)return n.name=t.getAttribute("name"),n}function Lft(t,e){const n=t0(t,e);if(n)return n.type=t.getAttribute("type"),n}function Rft(t,e){return gr({},fft,t,e)}function age(t,e){return gr([],Aft,t,e)}const Pft=tft,Fft="_feature",Oft="_layer";class Nft extends _M{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new lo,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,n){e.setAttribute("namespaceURI",this.featureNS_);const r=e.localName;let i=[];if(e.childNodes.length===0)return i;if(r=="msGMLOutput")for(let s=0,a=e.childNodes.length;s<a;s++){const l=e.childNodes[s];if(l.nodeType!==Node.ELEMENT_NODE)continue;const o=l,d=n[0],p=Oft,A=o.localName.replace(p,"");if(this.layers_&&!this.layers_.includes(A))continue;const v=A+Fft;d.featureType=v,d.featureNS=this.featureNS_;const y={};y[v]=Fi(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const C=nr([d.featureNS,null],y);o.setAttribute("namespaceURI",this.featureNS_);const x=gr([],C,o,n,this.gmlFormat_);x&&yo(i,x)}if(r=="FeatureCollection"){const s=gr([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);s&&(i=s)}return i}readFeaturesFromNode(e,n){const r={};return n&&Object.assign(r,this.getReadOptions(e,n)),this.readFeatures_(e,[r])}}const kft=Nft,gm=[null,"http://www.opengis.net/wmts/1.0"],HE=[null,"http://www.opengis.net/ows/1.1"],Dft=nr(gm,{Contents:Wt(qft)});class Uft extends V7{constructor(){super(),this.owsParser_=new jAe}readFromNode(e){let n=e.getAttribute("version");n&&(n=n.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=n,r=gr(r,Dft,e,[]),r||null):null}}const zft=nr(gm,{Layer:Da(Yft),TileMatrixSet:Da(Xft)}),$ft=nr(gm,{Style:Da(Zft),Format:Da(wr),TileMatrixSetLink:Da(Jft),Dimension:Da(ept),ResourceURL:Da(tpt)},nr(HE,{Title:Wt(wr),Abstract:Wt(wr),WGS84BoundingBox:Wt(cge),BoundingBox:Da(npt),Identifier:Wt(wr)})),Vft=nr(gm,{LegendURL:Da(rpt)},nr(HE,{Title:Wt(wr),Identifier:Wt(wr)})),Hft=nr(gm,{TileMatrixSet:Wt(wr),TileMatrixSetLimits:Wt(spt)}),Gft=nr(gm,{TileMatrixLimits:Fi(opt)}),Qft=nr(gm,{TileMatrix:Wt(wr),MinTileRow:Wt($l),MaxTileRow:Wt($l),MinTileCol:Wt($l),MaxTileCol:Wt($l)}),jft=nr(gm,{Default:Wt(wr),Value:Da(wr)},nr(HE,{Identifier:Wt(wr)})),lge=nr(HE,{LowerCorner:Fi(q8),UpperCorner:Fi(q8)}),Kft=nr(gm,{WellKnownScaleSet:Wt(wr),TileMatrix:Da(ipt)},nr(HE,{SupportedCRS:Wt(wr),Identifier:Wt(wr),BoundingBox:Wt(cge)})),Wft=nr(gm,{TopLeftCorner:Wt(q8),ScaleDenominator:Wt(uo),TileWidth:Wt($l),TileHeight:Wt($l),MatrixWidth:Wt($l),MatrixHeight:Wt($l)},nr(HE,{Identifier:Wt(wr)}));function qft(t,e){return gr({},zft,t,e)}function Yft(t,e){return gr({},$ft,t,e)}function Xft(t,e){return gr({},Kft,t,e)}function Zft(t,e){const n=gr({},Vft,t,e);if(!n)return;const r=t.getAttribute("isDefault")==="true";return n.isDefault=r,n}function Jft(t,e){return gr({},Hft,t,e)}function ept(t,e){return gr({},jft,t,e)}function tpt(t,e){const n=t.getAttribute("format"),r=t.getAttribute("template"),i=t.getAttribute("resourceType"),s={};return n&&(s.format=n),r&&(s.template=r),i&&(s.resourceType=i),s}function cge(t,e){const n=gr([],lge,t,e);if(n.length==2)return sc(n)}function npt(t,e){const n=t.getAttribute("crs"),r=gr([],lge,t,e);if(r.length==2)return{extent:sc(r),crs:n}}function rpt(t,e){const n={};return n.format=t.getAttribute("format"),n.href=$E(t),n}function q8(t,e){const n=wr(t).split(/\s+/);if(!n||n.length!=2)return;const r=+n[0],i=+n[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function ipt(t,e){return gr({},Wft,t,e)}function spt(t,e){return gr([],Gft,t,e)}function opt(t,e){return gr({},Qft,t,e)}const apt=Uft,lpt=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:Hat,GML:glt,GPX:nct,GeoJSON:olt,IGC:lct,IIIFInfo:vit,KML:Kut,MVT:yht,OWS:jAe,Polyline:odt,TopoJSON:vdt,WFS:Fdt,WKB:Udt,WKT:Zdt,WMSCapabilities:Pft,WMSGetFeatureInfo:kft,WMTSCapabilities:apt},Symbol.toStringTag,{value:"Module"}));var cpt=Object.defineProperty,upt=(t,e,n)=>e in t?cpt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gN=(t,e,n)=>(upt(t,typeof e!="symbol"?e+"":e,n),n);const hpt=Ge({__name:"OlFeature",props:{properties:{default:()=>[]}},setup(t,{expose:e}){const n=t,r=mn("vectorSource"),i=mn("vectorLayer",null),a=mn("heatmapLayer",null)||i,l=mn("animation",null),o=Me(new Ys({...n.properties}));return zt(()=>n.properties,()=>{o.value.setProperties(n.properties)}),zt(()=>r,(d,p)=>{var A,v,y;(A=p==null?void 0:p.value)==null||A.removeFeature(o.value),(v=d==null?void 0:d.value)==null||v.addFeature(o.value),(y=d==null?void 0:d.value)==null||y.changed()}),dr(()=>{var d;l!=null&&l.value&&((d=a==null?void 0:a.value)==null||d.animateFeature(o.value,l.value)),Tr(()=>{var p;(p=r==null?void 0:r.value)==null||p.addFeature(o.value)})}),Ss(()=>{var d;(d=r==null?void 0:r.value)==null||d.removeFeature(o.value)}),Rr("feature",o),Rr("stylable",o),e({feature:o}),(d,p)=>kt(d.$slots,"default")}});function dpt(t){if("styles"in t){const{styles:e,...n}=t;return{style:e,...n}}else return t}function gi(t){const e=mn("ol-options"),n=dpt(t),r=Xs(n);return e!=null&&e.debug&&console.debug("[Vue3-OpenLayers Debug] PROPS",{in:t,out:r}),r}const fpt=["change","error","propertychange"],m0=["tileloadend","tileloaderror","tileloadstart"],Y7=["imageloadend","imageloaderror","imageloadstart"],X7=["addFeature","changefeature","clear","featuresloadend","featuresloaderror","featuresloadstart","removefeature"];function Uo(t,e){const n=mi(),r=mn("ol-options");dr(()=>{[...fpt,...e].forEach(i=>{let s;Go(t)?s=typeof t.value=="function"?t.value():t.value:s=t,s.on(i,(...a)=>{r!=null&&r.debug&&console.debug("[Vue3-OpenLayers Debug] EVENT",i,{eventName:i,args:a,source:t}),n==null||n.emit(i,...a)})})})}const ppt=Ge({inheritAttrs:!1,__name:"OlGeolocation",props:{tracking:{type:Boolean,default:!0},trackingOptions:{default:()=>({enableHighAccuracy:!0})},projection:{default:"EPSG:3857"}},setup(t,{expose:e}){const r=gi(t),i=oe(()=>new GJe(r));Uo(i,["change:accuracy","change:accuracyGeometry","change:altitude","change:altitudeAccuracy","change:heading","change:position","change:projection","change:speed","change:tracking","change:trackingOptions"]);const s=Me([]),a=Me(0),l=Me(0),o=Me(0),d=Me(0),p=Me(0),A=Me(null);return e({geoLoc:i,position:s,accuracy:a,altitude:l,altitudeAccuracy:o,speed:d,heading:p,accuracyGeometry:A}),(v,y)=>kt(v.$slots,"default",{position:s.value,speed:d.value,heading:p.value,accuracy:a.value,altitude:l.value,altitudeAccuracy:o.value,accuracyGeometry:A.value})}}),Apt=Ge({__name:"OlMap",props:{controls:{},pixelRatio:{},interactions:{},keyboardEventTarget:{},layers:{},maxTilesLoading:{},moveTolerance:{},overlays:{},target:{},view:{}},emits:["change:layerGroup","change:size","change:target","change:view","click","dblclick","singleclick","pointerdrag","pointermove","movestart","moveend","postrender","precompose","postcompose","rendercomplete"],setup(t,{expose:e,emit:n}){const r=t,i=n,s=gi(r),a=Me(void 0);let l=new Bv(s);zt(s,()=>{l==null||l.setProperties(s)}),dr(()=>{l==null||l.setTarget(a.value)}),Ss(()=>{l==null||l.setTarget(void 0),l=void 0}),Rr("map",l);const o=(v,y,C)=>l==null?void 0:l.forEachFeatureAtPixel(v,y,C),d=v=>l==null?void 0:l.getCoordinateFromPixel(v),p=()=>l==null?void 0:l.render(),A=()=>l==null?void 0:l.updateSize();return l.on("click",v=>i("click",v)),l.on("change:size",v=>i("change:size",v)),l.on("change:target",v=>i("change:target",v)),l.on("change:view",v=>i("change:view",v)),l.on("dblclick",v=>i("dblclick",v)),l.on("singleclick",v=>i("singleclick",v)),l.on("pointerdrag",v=>i("pointerdrag",v)),l.on("pointermove",v=>i("pointermove",v)),l.on("movestart",v=>i("movestart",v)),l.on("moveend",v=>i("moveend",v)),l.on("postrender",v=>i("postrender",v)),l.on("precompose",v=>i("precompose",v)),l.on("postcompose",v=>i("postcompose",v)),l.on("rendercomplete",v=>i("rendercomplete",v)),l.on("loadstart",()=>{l==null||l.getTargetElement().classList.add("ol-map"),l==null||l.getTargetElement().classList.add("ol-map-loading"),l==null||l.getTargetElement().classList.remove("ol-map-fully-loaded")}),l.on("loadend",()=>{l==null||l.getTargetElement().classList.add("ol-map-fully-loaded"),l==null||l.getTargetElement().classList.remove("ol-map-loading")}),e({map:l,mapRef:a,forEachFeatureAtPixel:o,getCoordinateFromPixel:d,render:p,updateSize:A}),(v,y)=>(ve(),Ue("div",{ref_key:"mapRef",ref:a},[kt(v.$slots,"default")],512))}}),gpt=Ge({inheritAttrs:!1,__name:"OlOverlay",props:{id:{},element:{},offset:{},position:{},positioning:{default:"top-left"},stopEvent:{type:Boolean,default:!0},insertFirst:{type:Boolean,default:!0},autoPan:{type:[Boolean,Object],default:!1},className:{default:"ol-overlay"}},setup(t,{expose:e}){const n=t,r=mn("map"),i=Me(),s=gi(n),a=Ds(new Nfe(s));Uo(a,["change:element","change:map","change:offset","change:position","change:positioning"]);const l=()=>a.value.getOffset(),o=()=>a.value.getPosition(),d=()=>a.value.getPositioning(),p=M=>a.value.panIntoView(M),A=M=>a.value.setElement(M),v=M=>a.value.setOffset(M),y=M=>a.value.setPosition(M),C=M=>a.value.setPositioning(M);function x(M){(r==null?void 0:r.removeOverlay(M))||console.warn("couldn't find matching overlay to remove",a.value)}return dr(()=>{r==null||r.addOverlay(a.value)}),Ss(()=>x(a.value)),zt(()=>s,M=>{for(const I in M){const P=I;M[P]&&a.value.set(I,M[P])}},{deep:!0}),bu(()=>{A(i.value)},{flush:"post"}),e({overlay:a,htmlContent:i,getOffset:l,getPosition:o,getPositioning:d,panIntoView:p,setElement:A,setOffset:v,setPosition:y,setPositioning:C}),(M,I)=>(ve(),Ue("div",{ref_key:"htmlContent",ref:i},[kt(M.$slots,"default",{position:M.position})],512))}});function mpt(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Fb=1,Ob=2,_C=3,vpt=4,Y8=5,Fte=6378137,ypt=6356752314e-3,Ote=.0066943799901413165,lI=484813681109536e-20,Dr=Math.PI/2,_pt=.16666666666666666,bpt=.04722222222222222,wpt=.022156084656084655,ii=1e-10,Fu=.017453292519943295,qg=57.29577951308232,ca=Math.PI/4,wB=Math.PI*2,oc=3.14159265359,Dd={};Dd.greenwich=0;Dd.lisbon=-9.131906111111;Dd.paris=2.337229166667;Dd.bogota=-74.080916666667;Dd.madrid=-3.687938888889;Dd.rome=12.452333333333;Dd.bern=7.439583333333;Dd.jakarta=106.807719444444;Dd.ferro=-17.666666666667;Dd.brussels=4.367975;Dd.stockholm=18.058277777778;Dd.athens=23.7163375;Dd.oslo=10.722916666667;const xpt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Nte=/[\s_\-\/\(\)]/g;function d_(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(Nte,""),i=-1,s,a;++i<n.length;)if(s=n[i],a=s.toLowerCase().replace(Nte,""),a===r)return t[s]}function X8(t){var e={},n=t.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,o){var d=o.split("=");return d.push(!0),l[d[0].toLowerCase()]=d[1],l},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(l){e.rf=parseFloat(l)},lat_0:function(l){e.lat0=l*Fu},lat_1:function(l){e.lat1=l*Fu},lat_2:function(l){e.lat2=l*Fu},lat_ts:function(l){e.lat_ts=l*Fu},lon_0:function(l){e.long0=l*Fu},lon_1:function(l){e.long1=l*Fu},lon_2:function(l){e.long2=l*Fu},alpha:function(l){e.alpha=parseFloat(l)*Fu},gamma:function(l){e.rectified_grid_angle=parseFloat(l)},lonc:function(l){e.longc=l*Fu},x_0:function(l){e.x0=parseFloat(l)},y_0:function(l){e.y0=parseFloat(l)},k_0:function(l){e.k0=parseFloat(l)},k:function(l){e.k0=parseFloat(l)},a:function(l){e.a=parseFloat(l)},b:function(l){e.b=parseFloat(l)},r:function(l){e.a=e.b=parseFloat(l)},r_a:function(){e.R_A=!0},zone:function(l){e.zone=parseInt(l,10)},south:function(){e.utmSouth=!0},towgs84:function(l){e.datum_params=l.split(",").map(function(o){return parseFloat(o)})},to_meter:function(l){e.to_meter=parseFloat(l)},units:function(l){e.units=l;var o=d_(xpt,l);o&&(e.to_meter=o.to_meter)},from_greenwich:function(l){e.from_greenwich=l*Fu},pm:function(l){var o=d_(Dd,l);e.from_greenwich=(o||parseFloat(l))*Fu},nadgrids:function(l){l==="@null"?e.datumCode="none":e.nadgrids=l},axis:function(l){var o="ewnsud";l.length===3&&o.indexOf(l.substr(0,1))!==-1&&o.indexOf(l.substr(1,1))!==-1&&o.indexOf(l.substr(2,1))!==-1&&(e.axis=l)},approx:function(){e.approx=!0}};for(r in n)i=n[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var xB=1,uge=2,hge=3,h5=4,dge=5,Z7=-1,Cpt=/\s/,Ept=/[A-Za-z]/,Spt=/[A-Za-z84_]/,mN=/[,\]]/,fge=/[\d\.E\-\+]/;function v0(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=xB}v0.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==h5)for(;Cpt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case xB:return this.neutral(t);case uge:return this.keyword(t);case h5:return this.quoted(t);case dge:return this.afterquote(t);case hge:return this.number(t);case Z7:return}};v0.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=h5;return}if(mN.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};v0.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=xB;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=xB,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Z7);return}};v0.prototype.number=function(t){if(fge.test(t)){this.word+=t;return}if(mN.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};v0.prototype.quoted=function(t){if(t==='"'){this.state=dge;return}this.word+=t};v0.prototype.keyword=function(t){if(Spt.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=xB;return}if(mN.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};v0.prototype.neutral=function(t){if(Ept.test(t)){this.word=t,this.state=uge;return}if(t==='"'){this.word="",this.state=h5;return}if(fge.test(t)){this.word=t,this.state=hge;return}if(mN.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};v0.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Z7)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Tpt(t){var e=new v0(t);return e.output()}function kte(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,a){return Wx(a,s),s},r);e&&(t[e]=i)}function Wx(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Wx(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Wx(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Wx(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],kte(e,n,t);return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Wx(t,e[n]);return kte(e,n,t)}}var Ipt=.017453292519943295;function Bpt(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function Lg(t){return t*Ipt}function Mpt(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"?e+="n":i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"?e+="s":i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"?e+="e":(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;t.type==="GEOGCS"&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function a(d){var p=t.to_meter||1;return d*p}var l=function(d){return Bpt(t,d)},o=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Lg],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Lg],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Lg],["lat0","latitude_of_origin",Lg],["lat0","standard_parallel_1",Lg],["lat1","standard_parallel_1",Lg],["lat2","standard_parallel_2",Lg],["azimuth","Azimuth"],["alpha","azimuth",Lg],["srsCode","name"]];o.forEach(l),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Lg(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Lg(t.lat0>0?90:-90))}function pge(t){var e=Tpt(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return Wx(e,i),Mpt(i),i}function Oh(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Oh[t]=X8(arguments[1]):Oh[t]=pge(arguments[1]):Oh[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){Array.isArray(r)?Oh.apply(e,r):Oh(r)});if(typeof t=="string"){if(t in Oh)return Oh[t]}else"EPSG"in t?Oh["EPSG:"+t.EPSG]=t:"ESRI"in t?Oh["ESRI:"+t.ESRI]=t:"IAU2000"in t?Oh["IAU2000:"+t.IAU2000]=t:console.log(t);return}}mpt(Oh);function Lpt(t){return typeof t=="string"}function Rpt(t){return t in Oh}var Ppt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Fpt(t){return Ppt.some(function(e){return t.indexOf(e)>-1})}var Opt=["3857","900913","3785","102113"];function Npt(t){var e=d_(t,"authority");if(e){var n=d_(e,"epsg");return n&&Opt.indexOf(n)>-1}}function kpt(t){var e=d_(t,"extension");if(e)return d_(e,"proj4")}function Dpt(t){return t[0]==="+"}function Upt(t){if(Lpt(t)){if(Rpt(t))return Oh[t];if(Fpt(t)){var e=pge(t);if(Npt(e))return Oh["EPSG:3857"];var n=kpt(e);return n?X8(n):e}if(Dpt(t))return X8(t)}else return t}function Dte(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function um(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function wM(t){return t<0?-1:1}function Ai(t){return Math.abs(t)<=oc?t:t-wM(t)*wB}function FA(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Dr-e))/r}function CB(t,e){for(var n=.5*t,r,i,s=Dr-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(s),i=Dr-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function zpt(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=um(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function $pt(t){var e=t.x,n=t.y;if(n*qg>90&&n*qg<-90&&e*qg>180&&e*qg<-180)return null;var r,i;if(Math.abs(Math.abs(n)-Dr)<=ii)return null;if(this.sphere)r=this.x0+this.a*this.k0*Ai(e-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(ca+.5*n));else{var s=Math.sin(n),a=FA(this.e,n,s);r=this.x0+this.a*this.k0*Ai(e-this.long0),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=r,t.y=i,t}function Vpt(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=Dr-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=CB(this.e,s),i===-9999)return null}return r=Ai(this.long0+e/(this.a*this.k0)),t.x=r,t.y=i,t}var Hpt=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Gpt={init:zpt,forward:$pt,inverse:Vpt,names:Hpt};function Qpt(){}function Ute(t){return t}var jpt=["longlat","identity"];const Kpt={init:Qpt,forward:Ute,inverse:Ute,names:jpt};var Wpt=[Gpt,Kpt],TF={},d5=[];function Age(t,e){var n=d5.length;return t.names?(d5[n]=t,t.names.forEach(function(r){TF[r.toLowerCase()]=n}),this):(console.log(e),!0)}function qpt(t){if(!t)return!1;var e=t.toLowerCase();if(typeof TF[e]<"u"&&d5[TF[e]])return d5[TF[e]]}function Ypt(){Wpt.forEach(Age)}const Xpt={start:Ypt,add:Age,get:qpt};var Gs={};Gs.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Gs.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Gs.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Gs.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Gs.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Gs.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Gs.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Gs.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Gs.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Gs.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Gs.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Gs.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Gs.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Gs.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Gs.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Gs.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Gs.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Gs.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Gs.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Gs.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Gs.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Gs.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Gs.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Gs.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Gs.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Gs.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Gs.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Gs.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Gs.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Gs.hough={a:6378270,rf:297,ellipseName:"Hough"};Gs.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Gs.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Gs.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Gs.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Gs.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Gs.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Gs.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Gs.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Gs.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Gs.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Gs.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Gs.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Zpt=Gs.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Gs.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Jpt(t,e,n,r){var i=t*t,s=e*e,a=(i-s)/i,l=0;r?(t*=1-a*(_pt+a*(bpt+a*wpt)),i=t*t,a=0):l=Math.sqrt(a);var o=(i-s)/s;return{es:a,e:l,ep2:o}}function eAt(t,e,n,r,i){if(!t){var s=d_(Gs,r);s||(s=Zpt),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<ii)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var su={};su.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};su.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};su.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};su.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};su.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};su.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};su.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};su.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};su.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};su.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};su.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};su.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};su.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};su.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};su.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};su.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};su.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};su.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function tAt(t,e,n,r,i,s,a){var l={};return t===void 0||t==="none"?l.datum_type=Y8:l.datum_type=vpt,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=Fb),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=Ob,l.datum_params[3]*=lI,l.datum_params[4]*=lI,l.datum_params[5]*=lI,l.datum_params[6]=l.datum_params[6]/1e6+1)),a&&(l.datum_type=_C,l.grids=a),l.a=n,l.b=r,l.es=i,l.ep2=s,l}var gge={};function nAt(t,e){var n=new DataView(e),r=sAt(n),i=oAt(n,r),s=aAt(n,i,r),a={header:i,subgrids:s};return gge[t]=a,a}function rAt(t){if(t===void 0)return null;var e=t.split(",");return e.map(iAt)}function iAt(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:gge[t]||null,isNull:!1}}function qx(t){return t/3600*Math.PI/180}function sAt(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function oAt(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Z8(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Z8(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function aAt(t,e,n){for(var r=176,i=[],s=0;s<e.nSubgrids;s++){var a=cAt(t,r,n),l=uAt(t,r,a,n),o=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),d=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[qx(a.lowerLongitude),qx(a.lowerLatitude)],del:[qx(a.longitudeInterval),qx(a.latitudeInterval)],lim:[o,d],count:a.gridNodeCount,cvs:lAt(l)}),r+=176+a.gridNodeCount*16}return i}function lAt(t){return t.map(function(e){return[qx(e.longitudeShift),qx(e.latitudeShift)]})}function cAt(t,e,n){return{name:Z8(t,e+8,e+16).trim(),parent:Z8(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function uAt(t,e,n,r){for(var i=e+176,s=16,a=[],l=0;l<n.gridNodeCount;l++){var o={latitudeShift:t.getFloat32(i+l*s,r),longitudeShift:t.getFloat32(i+l*s+4,r),latitudeAccuracy:t.getFloat32(i+l*s+8,r),longitudeAccuracy:t.getFloat32(i+l*s+12,r)};a.push(o)}return a}function em(t,e){if(!(this instanceof em))return new em(t);e=e||function(d){if(d)throw d};var n=Upt(t);if(typeof n!="object"){e(t);return}var r=em.projections.get(n.projName);if(!r){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var i=d_(su,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=eAt(n.a,n.b,n.rf,n.ellps,n.sphere),a=Jpt(s.a,s.b,s.rf,n.R_A),l=rAt(n.nadgrids),o=n.datum||tAt(n.datumCode,n.datum_params,s.a,s.b,a.es,a.ep2,l);Dte(this,n),Dte(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=o,this.init(),e(null,this)}em.projections=Xpt;em.projections.start();function hAt(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Fb?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Ob?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function mge(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,a,l,o,d;if(i<-Dr&&i>-1.001*Dr)i=-Dr;else if(i>Dr&&i<1.001*Dr)i=Dr;else{if(i<-Dr)return{x:-1/0,y:-1/0,z:t.z};if(i>Dr)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),l=Math.sin(i),d=Math.cos(i),o=l*l,a=n/Math.sqrt(1-e*o),{x:(a+s)*d*Math.cos(r),y:(a+s)*d*Math.sin(r),z:(a*(1-e)+s)*l}}function vge(t,e,n,r){var i=1e-12,s=i*i,a=30,l,o,d,p,A,v,y,C,x,M,I,P,F,D=t.x,V=t.y,H=t.z?t.z:0,Q,G,W;if(l=Math.sqrt(D*D+V*V),o=Math.sqrt(D*D+V*V+H*H),l/n<i){if(Q=0,o/n<i)return G=Dr,W=-r,{x:t.x,y:t.y,z:t.z}}else Q=Math.atan2(V,D);d=H/o,p=l/o,A=1/Math.sqrt(1-e*(2-e)*p*p),C=p*(1-e)*A,x=d*A,F=0;do F++,y=n/Math.sqrt(1-e*x*x),W=l*C+H*x-y*(1-e*x*x),v=e*y/(y+W),A=1/Math.sqrt(1-v*(2-v)*p*p),M=p*(1-v)*A,I=d*A,P=I*C-M*x,C=M,x=I;while(P*P>s&&F<a);return G=Math.atan(I/Math.abs(M)),{x:Q,y:G,z:W}}function dAt(t,e,n){if(e===Fb)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Ob){var r=n[0],i=n[1],s=n[2],a=n[3],l=n[4],o=n[5],d=n[6];return{x:d*(t.x-o*t.y+l*t.z)+r,y:d*(o*t.x+t.y-a*t.z)+i,z:d*(-l*t.x+a*t.y+t.z)+s}}}function fAt(t,e,n){if(e===Fb)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Ob){var r=n[0],i=n[1],s=n[2],a=n[3],l=n[4],o=n[5],d=n[6],p=(t.x-r)/d,A=(t.y-i)/d,v=(t.z-s)/d;return{x:p+o*A-l*v,y:-o*p+A+a*v,z:l*p-a*A+v}}}function YR(t){return t===Fb||t===Ob}function pAt(t,e,n){if(hAt(t,e)||t.datum_type===Y8||e.datum_type===Y8)return n;var r=t.a,i=t.es;if(t.datum_type===_C){var s=zte(t,!1,n);if(s!==0)return;r=Fte,i=Ote}var a=e.a,l=e.b,o=e.es;if(e.datum_type===_C&&(a=Fte,l=ypt,o=Ote),i===o&&r===a&&!YR(t.datum_type)&&!YR(e.datum_type))return n;if(n=mge(n,i,r),YR(t.datum_type)&&(n=dAt(n,t.datum_type,t.datum_params)),YR(e.datum_type)&&(n=fAt(n,e.datum_type,e.datum_params)),n=vge(n,o,a,l),e.datum_type===_C){var d=zte(e,!0,n);if(d!==0)return}return n}function zte(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<t.grids.length;a++){var l=t.grids[a];if(s.push(l.name),l.isNull){i=r;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var o=l.grid.subgrids,d=0,p=o.length;d<p;d++){var A=o[d],v=(Math.abs(A.del[1])+Math.abs(A.del[0]))/1e4,y=A.ll[0]-v,C=A.ll[1]-v,x=A.ll[0]+(A.lim[0]-1)*A.del[0]+v,M=A.ll[1]+(A.lim[1]-1)*A.del[1]+v;if(!(C>r.y||y>r.x||M<r.y||x<r.x)&&(i=AAt(r,e,A),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*qg+" "+r.y*qg+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function AAt(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Ai(i.x-Math.PI)+Math.PI;var s=$te(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,l=1e-12,o,d;do{if(d=$te(s,n),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:i.x-(d.x+s.x),y:i.y-(d.y+s.y)},s.x+=o.x,s.y+=o.y}while(a--&&Math.abs(o.x)>l&&Math.abs(o.y)>l);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ai(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function $te(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var d={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var p={x:e.cvs[a][0],y:e.cvs[a][1]},A=i.x*i.y,v=i.x*(1-i.y),y=(1-i.x)*(1-i.y),C=(1-i.x)*i.y;return s.x=y*l.x+v*o.x+C*p.x+A*d.x,s.y=y*l.y+v*o.y+C*p.y+A*d.y,s}function Vte(t,e,n){var r=n.x,i=n.y,s=n.z||0,a,l,o,d={};for(o=0;o<3;o++)if(!(e&&o===2&&n.z===void 0))switch(o===0?(a=r,"ew".indexOf(t.axis[o])!==-1?l="x":l="y"):o===1?(a=i,"ns".indexOf(t.axis[o])!==-1?l="y":l="x"):(a=s,l="z"),t.axis[o]){case"e":d[l]=a;break;case"w":d[l]=-a;break;case"n":d[l]=a;break;case"s":d[l]=-a;break;case"u":n[l]!==void 0&&(d.z=a);break;case"d":n[l]!==void 0&&(d.z=-a);break;default:return null}return d}function yge(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function gAt(t){Hte(t.x),Hte(t.y)}function Hte(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function mAt(t,e){return(t.datum.datum_type===Fb||t.datum.datum_type===Ob||t.datum.datum_type===_C)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Fb||e.datum.datum_type===Ob||e.datum.datum_type===_C)&&t.datumCode!=="WGS84"}function f5(t,e,n,r){var i;Array.isArray(n)?n=yge(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(gAt(n),t.datum&&e.datum&&mAt(t,e)&&(i=new em("WGS84"),n=f5(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=Vte(t,!1,n)),t.projName==="longlat")n={x:n.x*Fu,y:n.y*Fu,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=pAt(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*qg,y:n.y*qg,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?Vte(e,!0,n):(n&&!s&&delete n.z,n)}var Gte=em("WGS84");function e6(t,e,n,r){var i,s,a;return Array.isArray(n)?(i=f5(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(s=f5(t,e,n,r),a=Object.keys(n),a.length===2||a.forEach(function(l){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=n[l]}),s)}function Qte(t){return t instanceof em?t:t.oProj?t.oProj:em(t)}function Fd(t,e,n){t=Qte(t);var r=!1,i;return typeof e>"u"?(e=t,t=Gte,r=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=Gte,r=!0),e=Qte(e),n?e6(t,e,n):(i={forward:function(s,a){return e6(t,e,s,a)},inverse:function(s,a){return e6(e,t,s,a)}},r&&(i.oProj=e),i)}var jte=6,_ge="AJSAJS",bge="AFAFAF",Yx=65,gd=73,op=79,_T=86,bT=90;const vAt={forward:wge,inverse:yAt,toPoint:xge};function wge(t,e){return e=e||5,wAt(_At({lat:t[1],lon:t[0]}),e)}function yAt(t){var e=J7(Ege(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function xge(t){var e=J7(Ege(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function t6(t){return t*(Math.PI/180)}function Kte(t){return 180*(t/Math.PI)}function _At(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,a,l,o,d,p,A,v,y=t6(e),C=t6(n),x,M;M=Math.floor((n+180)/6)+1,n===180&&(M=60),e>=56&&e<64&&n>=3&&n<12&&(M=32),e>=72&&e<84&&(n>=0&&n<9?M=31:n>=9&&n<21?M=33:n>=21&&n<33?M=35:n>=33&&n<42&&(M=37)),a=(M-1)*6-180+3,x=t6(a),l=i/(1-i),o=r/Math.sqrt(1-i*Math.sin(y)*Math.sin(y)),d=Math.tan(y)*Math.tan(y),p=l*Math.cos(y)*Math.cos(y),A=Math.cos(y)*(C-x),v=r*((1-i/4-3*i*i/64-5*i*i*i/256)*y-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*y)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*y)-35*i*i*i/3072*Math.sin(6*y));var I=s*o*(A+(1-d+p)*A*A*A/6+(5-18*d+d*d+72*p-58*l)*A*A*A*A*A/120)+5e5,P=s*(v+o*Math.tan(y)*(A*A/2+(5-d+9*p+4*p*p)*A*A*A*A/24+(61-58*d+d*d+600*p-330*l)*A*A*A*A*A*A/720));return e<0&&(P+=1e7),{northing:Math.round(P),easting:Math.round(I),zoneNumber:M,zoneLetter:bAt(e)}}function J7(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,l=.00669438,o,d=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),p,A,v,y,C,x,M,I,P,F=n-5e5,D=e;r<"N"&&(D-=1e7),M=(i-1)*6-180+3,o=l/(1-l),x=D/s,I=x/(a*(1-l/4-3*l*l/64-5*l*l*l/256)),P=I+(3*d/2-27*d*d*d/32)*Math.sin(2*I)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*I)+151*d*d*d/96*Math.sin(6*I),p=a/Math.sqrt(1-l*Math.sin(P)*Math.sin(P)),A=Math.tan(P)*Math.tan(P),v=o*Math.cos(P)*Math.cos(P),y=a*(1-l)/Math.pow(1-l*Math.sin(P)*Math.sin(P),1.5),C=F/(p*s);var V=P-p*Math.tan(P)/y*(C*C/2-(5+3*A+10*v-4*v*v-9*o)*C*C*C*C/24+(61+90*A+298*v+45*A*A-252*o-3*v*v)*C*C*C*C*C*C/720);V=Kte(V);var H=(C-(1+2*A+v)*C*C*C/6+(5-2*v+28*A-3*v*v+8*o+24*A*A)*C*C*C*C*C/120)/Math.cos(P);H=M+Kte(H);var Q;if(t.accuracy){var G=J7({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Q={top:G.lat,right:G.lon,bottom:V,left:H}}else Q={lat:V,lon:H};return Q}function bAt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function wAt(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+xAt(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function xAt(t,e,n){var r=Cge(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return CAt(i,s,r)}function Cge(t){var e=t%jte;return e===0&&(e=jte),e}function CAt(t,e,n){var r=n-1,i=_ge.charCodeAt(r),s=bge.charCodeAt(r),a=i+t-1,l=s+e,o=!1;a>bT&&(a=a-bT+Yx-1,o=!0),(a===gd||i<gd&&a>gd||(a>gd||i<gd)&&o)&&a++,(a===op||i<op&&a>op||(a>op||i<op)&&o)&&(a++,a===gd&&a++),a>bT&&(a=a-bT+Yx-1),l>_T?(l=l-_T+Yx-1,o=!0):o=!1,(l===gd||s<gd&&l>gd||(l>gd||s<gd)&&o)&&l++,(l===op||s<op&&l>op||(l>op||s<op)&&o)&&(l++,l===gd&&l++),l>_T&&(l=l-_T+Yx-1);var d=String.fromCharCode(a)+String.fromCharCode(l);return d}function Ege(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var l=t.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+t;n=t.substring(s,s+=2);for(var o=Cge(a),d=EAt(n.charAt(0),o),p=SAt(n.charAt(1),o);p<TAt(l);)p+=2e6;var A=e-s;if(A%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var v=A/2,y=0,C=0,x,M,I,P,F;return v>0&&(x=1e5/Math.pow(10,v),M=t.substring(s,s+v),y=parseFloat(M)*x,I=t.substring(s+v),C=parseFloat(I)*x),P=y+d,F=C+p,{easting:P,northing:F,zoneLetter:l,zoneNumber:a,accuracy:x}}function EAt(t,e){for(var n=_ge.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===gd&&n++,n===op&&n++,n>bT){if(i)throw"Bad character: "+t;n=Yx,i=!0}r+=1e5}return r}function SAt(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=bge.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===gd&&n++,n===op&&n++,n>_T){if(i)throw"Bad character: "+t;n=Yx,i=!0}r+=1e5}return r}function TAt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function dE(t,e,n){if(!(this instanceof dE))return new dE(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}dE.fromMGRS=function(t){return new dE(xge(t))};dE.prototype.toMGRS=function(t){return wge([this.x,this.y],t)};var IAt=1,BAt=.25,Wte=.046875,qte=.01953125,Yte=.01068115234375,MAt=.75,LAt=.46875,RAt=.013020833333333334,PAt=.007120768229166667,FAt=.3645833333333333,OAt=.005696614583333333,NAt=.3076171875;function Sge(t){var e=[];e[0]=IAt-t*(BAt+t*(Wte+t*(qte+t*Yte))),e[1]=t*(MAt-t*(Wte+t*(qte+t*Yte)));var n=t*t;return e[2]=n*(LAt-t*(RAt+t*PAt)),n*=t,e[3]=n*(FAt-t*OAt),e[4]=n*t*NAt,e}function vN(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var kAt=20;function Tge(t,e,n){for(var r=1/(1-e),i=t,s=kAt;s;--s){var a=Math.sin(i),l=1-e*a*a;if(l=(vN(i,a,Math.cos(i),n)-t)*(l*Math.sqrt(l))*r,i-=l,Math.abs(l)<ii)return i}return i}function DAt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Sge(this.es),this.ml0=vN(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function UAt(t){var e=t.x,n=t.y,r=Ai(e-this.long0),i,s,a,l=Math.sin(n),o=Math.cos(n);if(this.es){var p=o*r,A=Math.pow(p,2),v=this.ep2*Math.pow(o,2),y=Math.pow(v,2),C=Math.abs(o)>ii?Math.tan(n):0,x=Math.pow(C,2),M=Math.pow(x,2);i=1-this.es*Math.pow(l,2),p=p/Math.sqrt(i);var I=vN(n,l,o,this.en);s=this.a*(this.k0*p*(1+A/6*(1-x+v+A/20*(5-18*x+M+14*v-58*x*v+A/42*(61+179*M-M*x-479*x)))))+this.x0,a=this.a*(this.k0*(I-this.ml0+l*r*p/2*(1+A/12*(5-x+9*v+4*y+A/30*(61+M-58*x+270*v-330*x*v+A/56*(1385+543*M-M*x-3111*x))))))+this.y0}else{var d=o*Math.sin(r);if(Math.abs(Math.abs(d)-1)<ii)return 93;if(s=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,a=o*Math.cos(r)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(a),d>=1){if(d-1>ii)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=s,t.y=a,t}function zAt(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=Tge(e,this.es,this.en),Math.abs(n)<Dr){var A=Math.sin(n),v=Math.cos(n),y=Math.abs(v)>ii?Math.tan(n):0,C=this.ep2*Math.pow(v,2),x=Math.pow(C,2),M=Math.pow(y,2),I=Math.pow(M,2);e=1-this.es*Math.pow(A,2);var P=s*Math.sqrt(e)/this.k0,F=Math.pow(P,2);e=e*y,r=n-e*F/(1-this.es)*.5*(1-F/12*(5+3*M-9*C*M+C-4*x-F/30*(61+90*M-252*C*M+45*I+46*C-F/56*(1385+3633*M+4095*I+1574*I*M)))),i=Ai(this.long0+P*(1-F/6*(1+2*M+C-F/20*(5+28*M+24*I+8*C*M+6*C-F/42*(61+662*M+1320*I+720*I*M))))/v)}else r=Dr*wM(a),i=0;else{var l=Math.exp(s/this.k0),o=.5*(l-1/l),d=this.lat0+a/this.k0,p=Math.cos(d);e=Math.sqrt((1-Math.pow(p,2))/(1+Math.pow(o,2))),r=Math.asin(e),a<0&&(r=-r),o===0&&p===0?i=0:i=Ai(Math.atan2(o,p)+this.long0)}return t.x=i,t.y=r,t}var $At=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const IF={init:DAt,forward:UAt,inverse:zAt,names:$At};function Ige(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function dp(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function VAt(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function HAt(t){var e=Math.abs(t);return e=VAt(e*(1+e/(dp(1,e)+1))),t<0?-e:e}function eQ(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,a;--r>=0;)a=-s+n*i+t[r],s=i,i=a;return e+a*Math.sin(2*e)}function GAt(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,a;--r>=0;)a=-s+n*i+t[r],s=i,i=a;return Math.sin(e)*a}function QAt(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Bge(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=Ige(n),a=QAt(n),l=2*i*a,o=-2*r*s,d=t.length-1,p=t[d],A=0,v=0,y=0,C,x;--d>=0;)C=v,x=A,v=p,A=y,p=-C+l*v-o*A+t[d],y=-x+o*v+l*A;return l=r*a,o=i*s,[l*p-o*y,l*y+o*p]}function jAt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(IF.init.apply(this),this.forward=IF.forward,this.inverse=IF.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=eQ(this.cbg,this.lat0);this.Zb=-this.Qn*(r+GAt(this.gtu,2*r))}function KAt(t){var e=Ai(t.x-this.long0),n=t.y;n=eQ(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(s*i,dp(r,i*a)),e=HAt(Math.tan(e));var l=Bge(this.gtu,2*n,2*e);n=n+l[0],e=e+l[1];var o,d;return Math.abs(e)<=2.623395162778?(o=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(o=1/0,d=1/0),t.x=o,t.y=d,t}function WAt(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=Bge(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(Ige(e));var a=Math.sin(n),l=Math.cos(n),o=Math.sin(e),d=Math.cos(e);n=Math.atan2(a*d,dp(o,d*l)),e=Math.atan2(o,d*l),r=Ai(e+this.long0),i=eQ(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var qAt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const BF={init:jAt,forward:KAt,inverse:WAt,names:qAt};function YAt(t,e){if(t===void 0){if(t=Math.floor((Ai(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var XAt="etmerc";function ZAt(){var t=YAt(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Fu,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,BF.init.apply(this),this.forward=BF.forward,this.inverse=BF.inverse}var JAt=["Universal Transverse Mercator System","utm"];const egt={init:ZAt,names:JAt,dependsOn:XAt};function tQ(t,e){return Math.pow((1-t)/(1+t),e)}var tgt=20;function ngt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ca)/(Math.pow(Math.tan(.5*this.lat0+ca),this.C)*tQ(this.e*t,this.ratexp))}function rgt(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ca),this.C)*tQ(this.e*Math.sin(n),this.ratexp))-Dr,t.x=this.C*e,t}function igt(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+ca)/this.K,1/this.C),s=tgt;s>0&&(r=2*Math.atan(i*tQ(this.e*Math.sin(t.y),-.5*this.e))-Dr,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}var sgt=["gauss"];const nQ={init:ngt,forward:rgt,inverse:igt,names:sgt};function ogt(){nQ.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function agt(t){var e,n,r,i;return t.x=Ai(t.x-this.long0),nQ.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function lgt(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=dp(t.x,t.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,nQ.inverse.apply(this,[t]),t.x=Ai(t.x+this.long0),t}var cgt=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const ugt={init:ogt,forward:agt,inverse:lgt,names:cgt};function hgt(t,e,n){return e*=n,Math.tan(.5*(Dr+t))*Math.pow((1-e)/(1+e),.5*n)}function dgt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ii&&(this.k0=.5*(1+wM(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ii&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ii&&Math.abs(Math.cos(this.lat_ts))>ii&&(this.k0=.5*this.cons*um(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/FA(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=um(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Dr,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function fgt(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,a,l,o,d,p,A=Ai(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=ii&&Math.abs(n+this.lat0)<=ii?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(A)),t.x=this.a*s*i*Math.sin(A)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(A))+this.y0,t):(a=2*Math.atan(this.ssfn_(n,r,this.e))-Dr,o=Math.cos(a),l=Math.sin(a),Math.abs(this.coslat0)<=ii?(d=FA(this.e,n*this.con,this.con*r),p=2*this.a*this.k0*d/this.cons,t.x=this.x0+p*Math.sin(e-this.long0),t.y=this.y0-this.con*p*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<ii?(s=2*this.a*this.k0/(1+o*Math.cos(A)),t.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*o*Math.cos(A))),t.y=s*(this.cosX0*l-this.sinX0*o*Math.cos(A))+this.y0),t.x=s*o*Math.sin(A)+this.x0,t))}function pgt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var l=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=ii?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(l)*this.sinlat0+t.y*Math.sin(l)*this.coslat0/a),Math.abs(this.coslat0)<ii?this.lat0>0?e=Ai(this.long0+Math.atan2(t.x,-1*t.y)):e=Ai(this.long0+Math.atan2(t.x,t.y)):e=Ai(this.long0+Math.atan2(t.x*Math.sin(l),a*this.coslat0*Math.cos(l)-t.y*this.sinlat0*Math.sin(l))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=ii){if(a<=ii)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*CB(this.e,r),e=this.con*Ai(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=ii?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=Ai(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*CB(this.e,Math.tan(.5*(Dr+s)));return t.x=e,t.y=n,t}var Agt=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const ggt={init:dgt,forward:fgt,inverse:pgt,names:Agt,ssfn_:hgt};function mgt(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),d=Math.log((1+a*e)/(1-a*e));this.K=l-this.alpha*o+this.alpha*a/2*d}function vgt(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,t.x=this.R*a+this.x0,t}function ygt(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),l=this.lambda0+a/this.alpha,o=0,d=s,p=-1e3,A=0;Math.abs(d-p)>1e-7;){if(++A>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),p=d,d=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=l,t.y=d,t}var _gt=["somerc"];const bgt={init:mgt,forward:vgt,inverse:ygt,names:_gt};var Lx=1e-7;function wgt(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function xgt(){var t,e,n,r,i,s,a,l,o,d,p=0,A,v=0,y=0,C=0,x=0,M=0,I=0;this.no_off=wgt(this),this.no_rot="no_rot"in this;var P=!1;"alpha"in this&&(P=!0);var F=!1;if("rectified_grid_angle"in this&&(F=!0),P&&(I=this.alpha),F&&(p=this.rectified_grid_angle*Fu),P||F)v=this.longc;else if(y=this.long1,x=this.lat1,C=this.long2,M=this.lat2,Math.abs(x-M)<=Lx||(t=Math.abs(x))<=Lx||Math.abs(t-Dr)<=Lx||Math.abs(Math.abs(this.lat0)-Dr)<=Lx||Math.abs(Math.abs(M)-Dr)<=Lx)throw new Error;var D=1-this.es;e=Math.sqrt(D),Math.abs(this.lat0)>ii?(l=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*l*l,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/D),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(FA(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),P||F?(P?(A=Math.asin(Math.sin(I)/r),F||(p=I)):(A=p,I=Math.asin(r*Math.sin(A))),this.lam0=v-Math.asin(.5*(i-1/i)*Math.tan(A))/this.B):(s=Math.pow(FA(this.e,x,Math.sin(x)),this.B),a=Math.pow(FA(this.e,M,Math.sin(M)),this.B),i=this.E/s,o=(a-s)/(a+s),d=this.E*this.E,d=(d-a*s)/(d+a*s),t=y-C,t<-Math.pi?C-=wB:t>Math.pi&&(C+=wB),this.lam0=Ai(.5*(y+C)-Math.atan(d*Math.tan(.5*this.B*(y-C))/o)/this.B),A=Math.atan(2*Math.sin(this.B*Ai(y-this.lam0))/(i-1/i)),p=I=Math.asin(r*Math.sin(A))),this.singam=Math.sin(A),this.cosgam=Math.cos(A),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(I))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*A,this.v_pole_n=this.ArB*Math.log(Math.tan(ca-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(ca+i))}function Cgt(t){var e={},n,r,i,s,a,l,o,d;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Dr)>ii){if(a=this.E/Math.pow(FA(this.e,t.y,Math.sin(t.y)),this.B),l=1/a,n=.5*(a-l),r=.5*(a+l),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<ii)throw new Error;d=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*t.x),Math.abs(l)<Lx?o=this.A*t.x:o=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,l)}else d=t.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*t.y;return this.no_rot?(e.x=o,e.y=d):(o-=this.u_0,e.x=d*this.cosrot+o*this.sinrot,e.y=o*this.cosrot-d*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Egt(t){var e,n,r,i,s,a,l,o={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),l=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(l)-1)<ii)o.x=0,o.y=l<0?-Dr:Dr;else{if(o.y=this.E/Math.sqrt((1+l)/(1-l)),o.y=CB(this.e,Math.pow(o.y,1/this.B)),o.y===1/0)throw new Error;o.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return o.x+=this.lam0,o}var Sgt=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Tgt={init:xgt,forward:Cgt,inverse:Egt,names:Sgt};function Igt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ii)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=um(this.e,e,n),i=FA(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),l=um(this.e,s,a),o=FA(this.e,this.lat2,s),d=FA(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ii?this.ns=Math.log(r/l)/Math.log(i/o):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Bgt(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=ii&&(n=wM(n)*(Dr-2*ii));var r=Math.abs(Math.abs(n)-Dr),i,s;if(r>ii)i=FA(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var a=this.ns*Ai(e-this.long0);return t.x=this.k0*(s*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,t}function Mgt(t){var e,n,r,i,s,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),n=1):(e=-Math.sqrt(a*a+l*l),n=-1);var o=0;if(e!==0&&(o=Math.atan2(n*a,n*l)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=CB(this.e,r),i===-9999)return null}else i=-Dr;return s=Ai(o/this.ns+this.long0),t.x=s,t.y=i,t}var Lgt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Rgt={init:Igt,forward:Bgt,inverse:Mgt,names:Lgt};function Pgt(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Fgt(t){var e,n,r,i,s,a,l,o=t.x,d=t.y,p=Ai(o-this.long0);return e=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/e)-this.s45),r=-p*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=l*Math.cos(a)/1,t.x=l*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Ogt(t){var e,n,r,i,s,a,l,o,d=t.x;t.x=t.y,t.y=d,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,l=e,o=0;var p=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-t.y)<1e-10&&(o=1),l=t.y,p+=1;while(o===0&&p<15);return p>=15?null:t}var Ngt=["Krovak","krovak"];const kgt={init:Pgt,forward:Fgt,inverse:Ogt,names:Ngt};function kh(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function xM(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function CM(t){return .375*t*(1+.25*t*(1+.46875*t))}function EM(t){return .05859375*t*t*(1+.75*t)}function SM(t){return t*t*t*(35/3072)}function fE(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function GE(t){return Math.abs(t)<Dr?t:t-wM(t)*Math.PI}function p5(t,e,n,r,i){var s,a;s=t/e;for(var l=0;l<15;l++)if(a=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function Dgt(){this.sphere||(this.e0=xM(this.es),this.e1=CM(this.es),this.e2=EM(this.es),this.e3=SM(this.es),this.ml0=this.a*kh(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ugt(t){var e,n,r=t.x,i=t.y;if(r=Ai(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),l=fE(this.a,this.e,s),o=Math.tan(i)*Math.tan(i),d=r*Math.cos(i),p=d*d,A=this.es*a*a/(1-this.es),v=this.a*kh(this.e0,this.e1,this.e2,this.e3,i);e=l*d*(1-p*o*(1/6-(8-o+8*A)*p/120)),n=v-this.ml0+l*s/a*p*(.5+(5-o+6*A)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function zgt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+n,l=p5(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-Dr)<=ii)return t.x=this.long0,t.y=Dr,n<0&&(t.y*=-1),t;var o=fE(this.a,this.e,Math.sin(l)),d=o*o*o/this.a/this.a*(1-this.es),p=Math.pow(Math.tan(l),2),A=e*this.a/o,v=A*A;r=l-o*Math.tan(l)/d*A*A*(.5-(1+3*p)*A*A/24),i=A*(1-v*(p/3+(1+3*p)*p*v/15))/Math.cos(l)}return t.x=Ai(i+this.long0),t.y=GE(r),t}var $gt=["Cassini","Cassini_Soldner","cass"];const Vgt={init:Dgt,forward:Ugt,inverse:zgt,names:$gt};function jy(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var Hgt=1,Ggt=2,Qgt=3,jgt=4;function Kgt(){var t=Math.abs(this.lat0);if(Math.abs(t-Dr)<ii?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<ii?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=jy(this.e,1),this.mmf=.5/(1-this.es),this.apa=nmt(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=jy(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Wgt(t){var e,n,r,i,s,a,l,o,d,p,A=t.x,v=t.y;if(A=Ai(A-this.long0),this.sphere){if(s=Math.sin(v),p=Math.cos(v),r=Math.cos(A),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+p*r:1+this.sinph0*s+this.cosph0*p*r,n<=ii)return null;n=Math.sqrt(2/n),e=n*p*Math.sin(A),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*p*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(v+this.lat0)<ii)return null;n=ca-v*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(A),n*=r}}else{switch(l=0,o=0,d=0,r=Math.cos(A),i=Math.sin(A),s=Math.sin(v),a=jy(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=a/this.qp,o=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:d=1+this.sinb1*l+this.cosb1*o*r;break;case this.EQUIT:d=1+o*r;break;case this.N_POLE:d=Dr+v,a=this.qp-a;break;case this.S_POLE:d=v-Dr,a=this.qp+a;break}if(Math.abs(d)<ii)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?n=this.ymf*d*(this.cosb1*l-this.sinb1*o*r):n=(d=Math.sqrt(2/(1+o*r)))*l*this.ymf,e=this.xmf*d*o*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(d=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?d:-d)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function qgt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,a,l,o,d;if(this.sphere){var p=0,A,v=0;if(A=Math.sqrt(e*e+n*n),i=A*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(i),p=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(A)<=ii?0:Math.asin(n*v/A),e*=v,n=p*A;break;case this.OBLIQ:i=Math.abs(A)<=ii?this.lat0:Math.asin(p*this.sinph0+n*v*this.cosph0/A),e*=v*this.cosph0,n=(p-Math.sin(i)*this.sinph0)*A;break;case this.N_POLE:n=-n,i=Dr-i;break;case this.S_POLE:i-=Dr;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,o=Math.sqrt(e*e+n*n),o<ii)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*o/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(d=s*this.sinb1+n*a*this.cosb1/o,l=this.qp*d,n=o*this.cosb1*s-n*this.sinb1*a):(d=n*a/o,l=this.qp*d,n=o*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),l=e*e+n*n,!l)return t.x=this.long0,t.y=this.lat0,t;d=1-l/this.qp,this.mode===this.S_POLE&&(d=-d)}r=Math.atan2(e,n),i=rmt(Math.asin(d),this.apa)}return t.x=Ai(this.long0+r),t.y=i,t}var Ygt=.3333333333333333,Xgt=.17222222222222222,Zgt=.10257936507936508,Jgt=.06388888888888888,emt=.0664021164021164,tmt=.016415012942191543;function nmt(t){var e,n=[];return n[0]=t*Ygt,e=t*t,n[0]+=e*Xgt,n[1]=e*Jgt,e*=t,n[0]+=e*Zgt,n[1]+=e*emt,n[2]=e*tmt,n}function rmt(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var imt=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const smt={init:Kgt,forward:Wgt,inverse:qgt,names:imt,S_POLE:Hgt,N_POLE:Ggt,EQUIT:Qgt,OBLIQ:jgt};function f_(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function omt(){Math.abs(this.lat1+this.lat2)<ii||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=um(this.e3,this.sin_po,this.cos_po),this.qs1=jy(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=um(this.e3,this.sin_po,this.cos_po),this.qs2=jy(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=jy(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ii?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function amt(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=jy(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Ai(e-this.long0),a=i*Math.sin(s)+this.x0,l=this.rh-i*Math.cos(s)+this.y0;return t.x=a,t.y=l,t}function lmt(t){var e,n,r,i,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),s=Ai(i/this.ns0+this.long0),t.x=s,t.y=a,t}function cmt(t,e){var n,r,i,s,a,l=f_(.5*e);if(t<ii)return l;for(var o=t*t,d=1;d<=25;d++)if(n=Math.sin(l),r=Math.cos(l),i=t*n,s=1-i*i,a=.5*s*s/r*(e/(1-o)-n/s+.5/t*Math.log((1-i)/(1+i))),l=l+a,Math.abs(a)<=1e-7)return l;return null}var umt=["Albers_Conic_Equal_Area","Albers","aea"];const hmt={init:omt,forward:amt,inverse:lmt,names:umt,phi1z:cmt};function dmt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function fmt(t){var e,n,r,i,s,a,l,o,d=t.x,p=t.y;return r=Ai(d-this.long0),e=Math.sin(p),n=Math.cos(p),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,s=1,a>0||Math.abs(a)<=ii?(l=this.x0+this.a*s*n*Math.sin(r)/a,o=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/a):(l=this.x0+this.infinity_dist*n*Math.sin(r),o=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=l,t.y=o,t}function pmt(t){var e,n,r,i,s,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=f_(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=Ai(this.long0+s)):(a=this.phic0,s=0),t.x=s,t.y=a,t}var Amt=["gnom"];const gmt={init:dmt,forward:fmt,inverse:pmt,names:Amt};function mmt(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Dr:Dr;for(var r=Math.asin(.5*e),i,s,a,l,o=0;o<30;o++)if(s=Math.sin(r),a=Math.cos(r),l=t*s,i=Math.pow(1-l*l,2)/(2*a)*(e/(1-t*t)-s/(1-l*l)+.5/t*Math.log((1-l)/(1+l))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function vmt(){this.sphere||(this.k0=um(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ymt(t){var e=t.x,n=t.y,r,i,s=Ai(e-this.long0);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=jy(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return t.x=r,t.y=i,t}function _mt(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Ai(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=mmt(this.e,2*t.y*this.k0/this.a),e=Ai(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var bmt=["cea"];const wmt={init:vmt,forward:ymt,inverse:_mt,names:bmt};function xmt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Cmt(t){var e=t.x,n=t.y,r=Ai(e-this.long0),i=GE(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function Emt(t){var e=t.x,n=t.y;return t.x=Ai(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=GE(this.lat0+(n-this.y0)/this.a),t}var Smt=["Equirectangular","Equidistant_Cylindrical","eqc"];const Tmt={init:xmt,forward:Cmt,inverse:Emt,names:Smt};var Xte=20;function Imt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=xM(this.es),this.e1=CM(this.es),this.e2=EM(this.es),this.e3=SM(this.es),this.ml0=this.a*kh(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Bmt(t){var e=t.x,n=t.y,r,i,s,a=Ai(e-this.long0);if(s=a*Math.sin(n),this.sphere)Math.abs(n)<=ii?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(GE(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=ii)r=this.a*a,i=-1*this.ml0;else{var l=fE(this.a,this.e,Math.sin(n))/Math.tan(n);r=l*Math.sin(s),i=this.a*kh(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+l*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function Mmt(t){var e,n,r,i,s,a,l,o,d;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=ii)e=Ai(r/this.a+this.long0),n=0;else{a=this.lat0+i/this.a,l=r*r/this.a/this.a+a*a,o=a;var p;for(s=Xte;s;--s)if(p=Math.tan(o),d=-1*(a*(o*p+1)-o-.5*(o*o+l)*p)/((o-a)/p-1),o+=d,Math.abs(d)<=ii){n=o;break}e=Ai(this.long0+Math.asin(r*Math.tan(o)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=ii)n=0,e=Ai(this.long0+r/this.a);else{a=(this.ml0+i)/this.a,l=r*r/this.a/this.a+a*a,o=a;var A,v,y,C,x;for(s=Xte;s;--s)if(x=this.e*Math.sin(o),A=Math.sqrt(1-x*x)*Math.tan(o),v=this.a*kh(this.e0,this.e1,this.e2,this.e3,o),y=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),C=v/this.a,d=(a*(A*C+1)-C-.5*A*(C*C+l))/(this.es*Math.sin(2*o)*(C*C+l-2*a*C)/(4*A)+(a-C)*(A*y-2/Math.sin(2*o))-y),o-=d,Math.abs(d)<=ii){n=o;break}A=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ai(this.long0+Math.asin(r*A/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var Lmt=["Polyconic","poly"];const Rmt={init:Imt,forward:Bmt,inverse:Mmt,names:Lmt};function Pmt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Fmt(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,a=i/lI*1e-5,l=s,o=1,d=0;for(e=1;e<=10;e++)o=o*a,d=d+this.A[e]*o;var p=d,A=l,v=1,y=0,C,x,M=0,I=0;for(e=1;e<=6;e++)C=v*p-y*A,x=y*p+v*A,v=C,y=x,M=M+this.B_re[e]*v-this.B_im[e]*y,I=I+this.B_im[e]*v+this.B_re[e]*y;return t.x=I*this.a+this.x0,t.y=M*this.a+this.y0,t}function Omt(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,a=s/this.a,l=i/this.a,o=1,d=0,p,A,v=0,y=0;for(e=1;e<=6;e++)p=o*a-d*l,A=d*a+o*l,o=p,d=A,v=v+this.C_re[e]*o-this.C_im[e]*d,y=y+this.C_im[e]*o+this.C_re[e]*d;for(var C=0;C<this.iterations;C++){var x=v,M=y,I,P,F=a,D=l;for(e=2;e<=6;e++)I=x*v-M*y,P=M*v+x*y,x=I,M=P,F=F+(e-1)*(this.B_re[e]*x-this.B_im[e]*M),D=D+(e-1)*(this.B_im[e]*x+this.B_re[e]*M);x=1,M=0;var V=this.B_re[1],H=this.B_im[1];for(e=2;e<=6;e++)I=x*v-M*y,P=M*v+x*y,x=I,M=P,V=V+e*(this.B_re[e]*x-this.B_im[e]*M),H=H+e*(this.B_im[e]*x+this.B_re[e]*M);var Q=V*V+H*H;v=(F*V+D*H)/Q,y=(D*V-F*H)/Q}var G=v,W=y,te=1,q=0;for(e=1;e<=9;e++)te=te*G,q=q+this.D[e]*te;var Y=this.lat0+q*lI*1e5,ee=this.long0+W;return t.x=ee,t.y=Y,t}var Nmt=["New_Zealand_Map_Grid","nzmg"];const kmt={init:Pmt,forward:Fmt,inverse:Omt,names:Nmt};function Dmt(){}function Umt(t){var e=t.x,n=t.y,r=Ai(e-this.long0),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function zmt(t){t.x-=this.x0,t.y-=this.y0;var e=Ai(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var $mt=["Miller_Cylindrical","mill"];const Vmt={init:Dmt,forward:Umt,inverse:zmt,names:$mt};var Hmt=20;function Gmt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Sge(this.es)}function Qmt(t){var e,n,r=t.x,i=t.y;if(r=Ai(r-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=Hmt;a;--a){var l=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=l,Math.abs(l)<ii)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var o=Math.sin(i),d=Math.cos(i);n=this.a*vN(i,o,d,this.en),e=this.a*r*d/Math.sqrt(1-this.es*o*o)}return t.x=e,t.y=n,t}function jmt(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=f_((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=f_(Math.sin(e)/this.n)),r=Ai(r+this.long0),e=GE(e)):(e=Tge(t.y/this.a,this.es,this.en),i=Math.abs(e),i<Dr?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Ai(n)):i-ii<Dr&&(r=this.long0)),t.x=r,t.y=e,t}var Kmt=["Sinusoidal","sinu"];const Wmt={init:Gmt,forward:Qmt,inverse:jmt,names:Kmt};function qmt(){}function Ymt(t){for(var e=t.x,n=t.y,r=Ai(e-this.long0),i=n,s=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<ii)break}i/=2,Math.PI/2-Math.abs(n)<ii&&(r=0);var l=.900316316158*this.a*r*Math.cos(i)+this.x0,o=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=l,t.y=o,t}function Xmt(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Ai(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var Zmt=["Mollweide","moll"];const Jmt={init:qmt,forward:Ymt,inverse:Xmt,names:Zmt};function evt(){Math.abs(this.lat1+this.lat2)<ii||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=xM(this.es),this.e1=CM(this.es),this.e2=EM(this.es),this.e3=SM(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=um(this.e,this.sinphi,this.cosphi),this.ml1=kh(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ii?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=um(this.e,this.sinphi,this.cosphi),this.ml2=kh(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=kh(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function tvt(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=kh(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*Ai(e-this.long0),a=this.x0+r*Math.sin(s),l=this.y0+this.rh-r*Math.cos(s);return t.x=a,t.y=l,t}function nvt(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Ai(this.long0+s/this.ns),r=GE(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=p5(a,this.e0,this.e1,this.e2,this.e3),i=Ai(this.long0+s/this.ns),t.x=i,t.y=r,t}var rvt=["Equidistant_Conic","eqdc"];const ivt={init:evt,forward:tvt,inverse:nvt,names:rvt};function svt(){this.R=this.a}function ovt(t){var e=t.x,n=t.y,r=Ai(e-this.long0),i,s;Math.abs(n)<=ii&&(i=this.x0+this.R*r,s=this.y0);var a=f_(2*Math.abs(n/Math.PI));(Math.abs(r)<=ii||Math.abs(Math.abs(n)-Dr)<=ii)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var l=.5*Math.abs(Math.PI/r-r/Math.PI),o=l*l,d=Math.sin(a),p=Math.cos(a),A=p/(d+p-1),v=A*A,y=A*(2/d-1),C=y*y,x=Math.PI*this.R*(l*(A-C)+Math.sqrt(o*(A-C)*(A-C)-(C+o)*(v-C)))/(C+o);r<0&&(x=-x),i=this.x0+x;var M=o+A;return x=Math.PI*this.R*(y*M-l*Math.sqrt((C+o)*(o+1)-M*M))/(C+o),n>=0?s=this.y0+x:s=this.y0-x,t.x=i,t.y=s,t}function avt(t){var e,n,r,i,s,a,l,o,d,p,A,v,y;return t.x-=this.x0,t.y-=this.y0,A=Math.PI*this.R,r=t.x/A,i=t.y/A,s=r*r+i*i,a=-Math.abs(i)*(1+s),l=a-2*i*i+r*r,o=-2*a+1+2*i*i+s*s,y=i*i/o+(2*l*l*l/o/o/o-9*a*l/o/o)/27,d=(a-l*l/3/o)/o,p=2*Math.sqrt(-d/3),A=3*y/d/p,Math.abs(A)>1&&(A>=0?A=1:A=-1),v=Math.acos(A)/3,t.y>=0?n=(-p*Math.cos(v+Math.PI/3)-l/3/o)*Math.PI:n=-(-p*Math.cos(v+Math.PI/3)-l/3/o)*Math.PI,Math.abs(r)<ii?e=this.long0:e=Ai(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r),t.x=e,t.y=n,t}var lvt=["Van_der_Grinten_I","VanDerGrinten","vandg"];const cvt={init:svt,forward:ovt,inverse:avt,names:lvt};function uvt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function hvt(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=Ai(e-this.long0),a,l,o,d,p,A,v,y,C,x,M,I,P,F,D,V,H,Q,G,W,te,q,Y;return this.sphere?Math.abs(this.sin_p12-1)<=ii?(t.x=this.x0+this.a*(Dr-n)*Math.sin(s),t.y=this.y0-this.a*(Dr-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=ii?(t.x=this.x0+this.a*(Dr+n)*Math.sin(s),t.y=this.y0+this.a*(Dr+n)*Math.cos(s),t):(Q=this.sin_p12*r+this.cos_p12*i*Math.cos(s),V=Math.acos(Q),H=V?V/Math.sin(V):1,t.x=this.x0+this.a*H*i*Math.sin(s),t.y=this.y0+this.a*H*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(a=xM(this.es),l=CM(this.es),o=EM(this.es),d=SM(this.es),Math.abs(this.sin_p12-1)<=ii?(p=this.a*kh(a,l,o,d,Dr),A=this.a*kh(a,l,o,d,n),t.x=this.x0+(p-A)*Math.sin(s),t.y=this.y0-(p-A)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=ii?(p=this.a*kh(a,l,o,d,Dr),A=this.a*kh(a,l,o,d,n),t.x=this.x0+(p+A)*Math.sin(s),t.y=this.y0+(p+A)*Math.cos(s),t):(v=r/i,y=fE(this.a,this.e,this.sin_p12),C=fE(this.a,this.e,r),x=Math.atan((1-this.es)*v+this.es*y*this.sin_p12/(C*i)),M=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(x)-this.sin_p12*Math.cos(s)),M===0?G=Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):Math.abs(Math.abs(M)-Math.PI)<=ii?G=-Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):G=Math.asin(Math.sin(s)*Math.cos(x)/Math.sin(M)),I=this.e*this.sin_p12/Math.sqrt(1-this.es),P=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),F=I*P,D=P*P,W=G*G,te=W*G,q=te*G,Y=q*G,V=y*G*(1-W*D*(1-D)/6+te/8*F*(1-2*D)+q/120*(D*(4-7*D)-3*I*I*(1-7*D))-Y/48*F),t.x=this.x0+V*Math.sin(M),t.y=this.y0+V*Math.cos(M),t))}function dvt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,a,l,o,d,p,A,v,y,C,x,M,I,P,F,D,V,H,Q,G;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Dr*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=ii?a=this.lat0:(a=f_(i*this.sin_p12+t.y*r*this.cos_p12/e),l=Math.abs(this.lat0)-Dr,Math.abs(l)<=ii?this.lat0>=0?s=Ai(this.long0+Math.atan2(t.x,-t.y)):s=Ai(this.long0-Math.atan2(-t.x,t.y)):s=Ai(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=s,t.y=a,t)):(o=xM(this.es),d=CM(this.es),p=EM(this.es),A=SM(this.es),Math.abs(this.sin_p12-1)<=ii?(v=this.a*kh(o,d,p,A,Dr),e=Math.sqrt(t.x*t.x+t.y*t.y),y=v-e,a=p5(y/this.a,o,d,p,A),s=Ai(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=a,t):Math.abs(this.sin_p12+1)<=ii?(v=this.a*kh(o,d,p,A,Dr),e=Math.sqrt(t.x*t.x+t.y*t.y),y=e-v,a=p5(y/this.a,o,d,p,A),s=Ai(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),M=Math.atan2(t.x,t.y),C=fE(this.a,this.e,this.sin_p12),I=Math.cos(M),P=this.e*this.cos_p12*I,F=-P*P/(1-this.es),D=3*this.es*(1-F)*this.sin_p12*this.cos_p12*I/(1-this.es),V=e/C,H=V-F*(1+F)*Math.pow(V,3)/6-D*(1+3*F)*Math.pow(V,4)/24,Q=1-F*H*H/2-V*H*H*H/6,x=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*I),s=Ai(this.long0+Math.asin(Math.sin(M)*Math.sin(H)/Math.cos(x))),G=Math.sin(x),a=Math.atan2((G-this.es*Q*this.sin_p12)*Math.tan(x),G*(1-this.es)),t.x=s,t.y=a,t))}var fvt=["Azimuthal_Equidistant","aeqd"];const pvt={init:uvt,forward:hvt,inverse:dvt,names:fvt};function Avt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function gvt(t){var e,n,r,i,s,a,l,o,d=t.x,p=t.y;return r=Ai(d-this.long0),e=Math.sin(p),n=Math.cos(p),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,s=1,(a>0||Math.abs(a)<=ii)&&(l=this.a*s*n*Math.sin(r),o=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=l,t.y=o,t}function mvt(t){var e,n,r,i,s,a,l;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=f_(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=ii?(l=this.lat0,t.x=a,t.y=l,t):(l=f_(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Dr,Math.abs(s)<=ii?(this.lat0>=0?a=Ai(this.long0+Math.atan2(t.x,-t.y)):a=Ai(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=l,t):(a=Ai(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=l,t))}var vvt=["ortho"];const yvt={init:Avt,forward:gvt,inverse:mvt,names:vvt};var wl={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ua={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function _vt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Dr-ca/2?this.face=wl.TOP:this.lat0<=-(Dr-ca/2)?this.face=wl.BOTTOM:Math.abs(this.long0)<=ca?this.face=wl.FRONT:Math.abs(this.long0)<=Dr+ca?this.face=this.long0>0?wl.RIGHT:wl.LEFT:this.face=wl.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function bvt(t){var e={x:0,y:0},n,r,i,s,a,l,o={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===wl.TOP)s=Dr-n,r>=ca&&r<=Dr+ca?(o.value=ua.AREA_0,i=r-Dr):r>Dr+ca||r<=-(Dr+ca)?(o.value=ua.AREA_1,i=r>0?r-oc:r+oc):r>-(Dr+ca)&&r<=-ca?(o.value=ua.AREA_2,i=r+Dr):(o.value=ua.AREA_3,i=r);else if(this.face===wl.BOTTOM)s=Dr+n,r>=ca&&r<=Dr+ca?(o.value=ua.AREA_0,i=-r+Dr):r<ca&&r>=-ca?(o.value=ua.AREA_1,i=-r):r<-ca&&r>=-(Dr+ca)?(o.value=ua.AREA_2,i=-r-Dr):(o.value=ua.AREA_3,i=r>0?-r+oc:-r-oc);else{var d,p,A,v,y,C,x;this.face===wl.RIGHT?r=bC(r,+Dr):this.face===wl.BACK?r=bC(r,+oc):this.face===wl.LEFT&&(r=bC(r,-Dr)),v=Math.sin(n),y=Math.cos(n),C=Math.sin(r),x=Math.cos(r),d=y*x,p=y*C,A=v,this.face===wl.FRONT?(s=Math.acos(d),i=XR(s,A,p,o)):this.face===wl.RIGHT?(s=Math.acos(p),i=XR(s,A,-d,o)):this.face===wl.BACK?(s=Math.acos(-d),i=XR(s,A,-p,o)):this.face===wl.LEFT?(s=Math.acos(-p),i=XR(s,A,d,o)):(s=i=0,o.value=ua.AREA_0)}return l=Math.atan(12/oc*(i+Math.acos(Math.sin(i)*Math.cos(ca))-Dr)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(i))))),o.value===ua.AREA_1?l+=Dr:o.value===ua.AREA_2?l+=oc:o.value===ua.AREA_3&&(l+=1.5*oc),e.x=a*Math.cos(l),e.y=a*Math.sin(l),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function wvt(t){var e={lam:0,phi:0},n,r,i,s,a,l,o,d,p,A={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?A.value=ua.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(A.value=ua.AREA_1,n-=Dr):t.x<0&&-t.x>=Math.abs(t.y)?(A.value=ua.AREA_2,n=n<0?n+oc:n-oc):(A.value=ua.AREA_3,n+=Dr),p=oc/12*Math.tan(n),a=Math.sin(p)/(Math.cos(p)-1/Math.sqrt(2)),l=Math.atan(a),i=Math.cos(n),s=Math.tan(r),o=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),o<-1?o=-1:o>1&&(o=1),this.face===wl.TOP)d=Math.acos(o),e.phi=Dr-d,A.value===ua.AREA_0?e.lam=l+Dr:A.value===ua.AREA_1?e.lam=l<0?l+oc:l-oc:A.value===ua.AREA_2?e.lam=l-Dr:e.lam=l;else if(this.face===wl.BOTTOM)d=Math.acos(o),e.phi=d-Dr,A.value===ua.AREA_0?e.lam=-l+Dr:A.value===ua.AREA_1?e.lam=-l:A.value===ua.AREA_2?e.lam=-l-Dr:e.lam=l<0?-l-oc:-l+oc;else{var v,y,C;v=o,p=v*v,p>=1?C=0:C=Math.sqrt(1-p)*Math.sin(l),p+=C*C,p>=1?y=0:y=Math.sqrt(1-p),A.value===ua.AREA_1?(p=y,y=-C,C=p):A.value===ua.AREA_2?(y=-y,C=-C):A.value===ua.AREA_3&&(p=y,y=C,C=-p),this.face===wl.RIGHT?(p=v,v=-y,y=p):this.face===wl.BACK?(v=-v,y=-y):this.face===wl.LEFT&&(p=v,v=y,y=-p),e.phi=Math.acos(-C)-Dr,e.lam=Math.atan2(y,v),this.face===wl.RIGHT?e.lam=bC(e.lam,-Dr):this.face===wl.BACK?e.lam=bC(e.lam,-oc):this.face===wl.LEFT&&(e.lam=bC(e.lam,+Dr))}if(this.es!==0){var x,M,I;x=e.phi<0?1:0,M=Math.tan(e.phi),I=this.b/Math.sqrt(M*M+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-I*I)/(this.one_minus_f*I)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function XR(t,e,n,r){var i;return t<ii?(r.value=ua.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=ca?r.value=ua.AREA_0:i>ca&&i<=Dr+ca?(r.value=ua.AREA_1,i-=Dr):i>Dr+ca||i<=-(Dr+ca)?(r.value=ua.AREA_2,i=i>=0?i-oc:i+oc):(r.value=ua.AREA_3,i+=Dr)),i}function bC(t,e){var n=t+e;return n<-oc?n+=wB:n>+oc&&(n-=wB),n}var xvt=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Cvt={init:_vt,forward:bvt,inverse:wvt,names:xvt};var J8=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],wT=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mge=.8487,Lge=1.3523,Rge=qg/5,Evt=1/Rge,Xx=18,A5=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Svt=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function Tvt(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function Ivt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Bvt(t){var e=Ai(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Rge);r<0?r=0:r>=Xx&&(r=Xx-1),n=qg*(n-Evt*r);var i={x:A5(J8[r],n)*e,y:A5(wT[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Mge+this.x0,i.y=i.y*this.a*Lge+this.y0,i}function Mvt(t){var e={x:(t.x-this.x0)/(this.a*Mge),y:Math.abs(t.y-this.y0)/(this.a*Lge)};if(e.y>=1)e.x/=J8[Xx][0],e.y=t.y<0?-Dr:Dr;else{var n=Math.floor(e.y*Xx);for(n<0?n=0:n>=Xx&&(n=Xx-1);;)if(wT[n][0]>e.y)--n;else if(wT[n+1][0]<=e.y)++n;else break;var r=wT[n],i=5*(e.y-r[0])/(wT[n+1][0]-r[0]);i=Tvt(function(s){return(A5(r,s)-e.y)/Svt(r,s)},i,ii,100),e.x/=A5(J8[n],i),e.y=(5*n+i)*Fu,t.y<0&&(e.y=-e.y)}return e.x=Ai(e.x+this.long0),e}var Lvt=["Robinson","robin"];const Rvt={init:Ivt,forward:Bvt,inverse:Mvt,names:Lvt};function Pvt(){this.name="geocent"}function Fvt(t){var e=mge(t,this.es,this.a);return e}function Ovt(t){var e=vge(t,this.es,this.a,this.b);return e}var Nvt=["Geocentric","geocentric","geocent","Geocent"];const kvt={init:Pvt,forward:Fvt,inverse:Ovt,names:Nvt};var dh={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},YS={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Dvt(){if(Object.keys(YS).forEach((function(n){if(typeof this[n]>"u")this[n]=YS[n].def;else{if(YS[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);YS[n].num&&(this[n]=parseFloat(this[n]))}YS[n].degrees&&(this[n]=this[n]*Fu)}).bind(this)),Math.abs(Math.abs(this.lat0)-Dr)<ii?this.mode=this.lat0<0?dh.S_POLE:dh.N_POLE:Math.abs(this.lat0)<ii?this.mode=dh.EQUIT:(this.mode=dh.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Uvt(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case dh.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case dh.EQUIT:s=n*r;break;case dh.S_POLE:s=-e;break;case dh.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case dh.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case dh.EQUIT:s*=e;break;case dh.N_POLE:s*=-(n*r);break;case dh.S_POLE:s*=n*r;break}var a,l;return a=s*this.cg+i*this.sg,l=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*l,s=a*l,t.x=i*this.a,t.y=s*this.a,t}function zvt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=dp(t.x,t.y);if(Math.abs(s)<ii)e.x=0,e.y=t.y;else{var a,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-l*l),this.mode){case dh.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*l*this.cosph0/s),t.y=(a-this.sinph0*Math.sin(e.y))*s,t.x*=l*this.cosph0;break;case dh.EQUIT:e.y=Math.asin(t.y*l/s),t.y=a*s,t.x*=l;break;case dh.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case dh.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var $vt=["Tilted_Perspective","tpers"];const Vvt={init:Dvt,forward:Uvt,inverse:zvt,names:$vt};function Hvt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Gvt(t){var e=t.x,n=t.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var l=this.radius_p/dp(this.radius_p*Math.cos(n),Math.sin(n));if(i=l*Math.cos(e)*Math.cos(n),s=l*Math.sin(e)*Math.cos(n),a=l*Math.sin(n),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/dp(a,r)),t.y=this.radius_g_1*Math.atan(a/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(a/dp(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/dp(a,r)),t.y=this.radius_g_1*Math.atan(a/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(a/dp(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Qvt(t){var e=-1,n=0,r=0,i,s,a,l;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*dp(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*dp(1,n));var o=r/this.radius_p;if(i=n*n+o*o+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;l=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+l*e,n*=l,r*=l,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;l=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+l*e,n*=l,r*=l,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var jvt=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Kvt={init:Hvt,forward:Gvt,inverse:Qvt,names:jvt};var cI=1.340264,uI=-.081106,hI=893e-6,dI=.003796,g5=Math.sqrt(3)/2;function Wvt(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function qvt(t){var e=Ai(t.x-this.long0),n=t.y,r=Math.asin(g5*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(g5*(cI+3*uI*i+s*(7*hI+9*dI*i))),t.y=r*(cI+uI*i+s*(hI+dI*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Yvt(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,a,l,o,d;for(d=0;d<n&&(i=r*r,s=i*i*i,a=r*(cI+uI*i+s*(hI+dI*i))-t.y,l=cI+3*uI*i+s*(7*hI+9*dI*i),r-=o=a/l,!(Math.abs(o)<e));++d);return i=r*r,s=i*i*i,t.x=g5*t.x*(cI+3*uI*i+s*(7*hI+9*dI*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/g5),t.x=Ai(t.x+this.long0),t}var Xvt=["eqearth","Equal Earth","Equal_Earth"];const Zvt={init:Wvt,forward:qvt,inverse:Yvt,names:Xvt};function Jvt(t){t.Proj.projections.add(IF),t.Proj.projections.add(BF),t.Proj.projections.add(egt),t.Proj.projections.add(ugt),t.Proj.projections.add(ggt),t.Proj.projections.add(bgt),t.Proj.projections.add(Tgt),t.Proj.projections.add(Rgt),t.Proj.projections.add(kgt),t.Proj.projections.add(Vgt),t.Proj.projections.add(smt),t.Proj.projections.add(hmt),t.Proj.projections.add(gmt),t.Proj.projections.add(wmt),t.Proj.projections.add(Tmt),t.Proj.projections.add(Rmt),t.Proj.projections.add(kmt),t.Proj.projections.add(Vmt),t.Proj.projections.add(Wmt),t.Proj.projections.add(Jmt),t.Proj.projections.add(ivt),t.Proj.projections.add(cvt),t.Proj.projections.add(pvt),t.Proj.projections.add(yvt),t.Proj.projections.add(Cvt),t.Proj.projections.add(Rvt),t.Proj.projections.add(kvt),t.Proj.projections.add(Vvt),t.Proj.projections.add(Kvt),t.Proj.projections.add(Zvt)}Fd.defaultDatum="WGS84";Fd.Proj=em;Fd.WGS84=new Fd.Proj("WGS84");Fd.Point=dE;Fd.toPoint=yge;Fd.defs=Oh;Fd.nadgrid=nAt;Fd.transform=f5;Fd.mgrs=vAt;Fd.version="__VERSION__";Jvt(Fd);const e0t=Ge({__name:"OlProjectionRegister",props:{projectionName:{},projectionDef:{},projectionExtent:{default:void 0}},setup(t,{expose:e}){const n=t,{projectionName:r,projectionDef:i,projectionExtent:s}=dc(n);Fd.defs(r.value,i.value),ent(Fd);const a=new Jv({code:r.value,extent:s.value});return e({projection:a}),(l,o)=>wt("",!0)}});function F_(t){if(t)return typeof t=="string"||t instanceof Jv?t:new Jv(t)}const t0t=Ge({inheritAttrs:!1,__name:"OlView",props:{center:{},constrainRotation:{type:[Number,Boolean]},enableRotation:{type:Boolean,default:!0},extent:{},constrainOnlyCenter:{type:Boolean},smoothExtentConstraint:{type:Boolean},maxResolution:{},minResolution:{},maxZoom:{},minZoom:{},multiWorld:{type:Boolean},constrainResolution:{type:Boolean},smoothResolutionConstraint:{type:Boolean},showFullExtent:{type:Boolean},projection:{},resolution:{},resolutions:{},rotation:{},zoom:{},zoomFactor:{},padding:{}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=()=>({...i,projection:F_(i.projection)}),a=new hp(s());return Uo(a,["change:center","change:resolution","change:rotation"]),dr(()=>{r==null||r.setView(a)}),zt(i,()=>{const je=s();a.setProperties(je),a.applyOptions_(je)}),e({view:a,adjustCenter:je=>a.adjustCenter(je),adjustResolution:(je,ft)=>a.adjustResolution(je,ft),adjustRotation:(je,ft)=>a.adjustRotation(je,ft),adjustZoom:(je,ft)=>a.adjustZoom(je,ft),animate:(...je)=>a.animate(...je),beginInteraction:()=>a.beginInteraction(),calculateExtent:je=>a.calculateExtent(je),cancelAnimations:()=>a.cancelAnimations(),centerOn:(je,ft,Et)=>a.centerOn(je,ft,Et),changed:()=>a.changed(),dispatchEvent:je=>a.dispatchEvent(je),endInteraction:(je,ft,Et)=>a.endInteraction(je,ft,Et),fit:(je,ft)=>a.fit(je,ft),get:je=>a.get(je),getAnimating:()=>a.getAnimating(),getCenter:()=>a.getCenter(),getInteracting:()=>a.getInteracting(),getKeys:()=>a.getKeys(),getMaxResolution:()=>a.getMaxResolution(),getMaxZoom:()=>a.getMaxZoom(),getMinResolution:()=>a.getMinResolution(),getMinZoom:()=>a.getMinZoom(),getProjection:()=>a.getProjection(),getProperties:()=>a.getProperties(),getResolution:()=>a.getResolution(),getResolutionForExtent:(je,ft)=>a.getResolutionForExtent(je,ft),getResolutionForZoom:je=>a.getResolutionForZoom(je),getResolutions:()=>a.getResolutions(),getRevision:()=>a.getRevision(),getRotation:()=>a.getRotation(),getZoom:()=>a.getZoom(),getZoomForResolution:je=>a.getZoomForResolution(je),setCenter:je=>a.setCenter(je),setConstrainResolution:je=>a.setConstrainResolution(je),setMaxZoom:je=>a.setMaxZoom(je),setMinZoom:je=>a.setMinZoom(je),setResolution:je=>a.setResolution(je),setRotation:je=>a.setRotation(je),setZoom:je=>a.setZoom(je)}),(je,ft)=>wt("",!0)}});function n0t(t,e){t.component("OlFeature",hpt),t.component("OlGeolocation",ppt),t.component("OlMap",Apt),t.component("OlOverlay",gpt),t.component("OlProjectionRegister",e0t),t.component("OlView",t0t),e&&t.provide("ol-options",e)}function y0(t,e){const n=mn("map"),r=mn("layerGroup",null),i=mn("overviewMap",null),s=Me(!1);function a(){var o;for(const d in e){const p=d;e[p]&&t.value.set(d,e[p])}if(t.value.setOpacity(e.opacity),t.value.setVisible(e.visible),!s.value){if(r){const d=r.getLayers();d.push(t.value),r.setLayers(d)}else i!=null&&i.value?(o=i.value)==null||o.getOverviewMap().addLayer(t.value):n==null||n.addLayer(t.value);s.value=!0}}function l(){var o,d;r?r.getLayers().remove(t.value):i!=null&&i.value?((o=i.value)==null||o.getOverviewMap().removeLayer(t.value),(d=i.value)==null||d.changed()):n==null||n.removeLayer(t.value),s.value=!1}return Ss(l),zt(()=>e,a,{deep:!0,immediate:!0}),i!=null&&i.value&&zt(i,()=>{l(),a()}),{}}const mm={className:"ol-layer",opacity:1,visible:!0,properties:()=>({})},r0t=Ge({inheritAttrs:!1,__name:"OlAnimatedClusterlayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},animationDuration:{},distance:{},animationMethod:{type:Function},updateWhileAnimating:{type:Boolean},updateWhileInteracting:{type:Boolean}},{...mm,opacity:1,visible:!0,animationDuration:700,distance:20,animationMethod:Mp,updateWhileAnimating:!1,updateWhileInteracting:!1}),setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=Ds(new Wfe({distance:i.distance,geometryFunction:l=>l.getGeometry()}));Uo(s,X7),zt(()=>i.distance,l=>{s.value.setDistance(l)});const a=Ds(new pst({...i,source:s.value}));return y0(a,i),Rr("vectorLayer",s),Rr("stylable",a),e({vectorLayer:a,map:r}),(l,o)=>(ve(),Ue("div",null,[kt(l.$slots,"default")]))}}),i0t=Ge({__name:"OlHeatmapLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},weight:{type:[String,Function]},blur:{},radius:{},gradient:{}},{...mm,weight:"weight",radius:8,blur:15,gradient:()=>["#00f","#0ff","#0f0","#ff0","#f00"]}),setup(t,{expose:e}){const r=gi(t),i=Ds(new nAe(r));return y0(i,r),Rr("heatmapLayer",i),Rr("stylable",i),e({heatmapLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),s0t=Ge({__name:"OlImageLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function}},mm),setup(t,{expose:e}){const r=gi(t),i=Ds(new Tpe(r));return y0(i,r),Rr("imageLayer",i.value),e({imageLayer:i.value}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),o0t=Ge({inheritAttrs:!1,__name:"OlLayerGroup",props:Qu({opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},layers:{},properties:{},className:{},openInLayerSwitcher:{type:Boolean},title:{}},mm),setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=Ds(new M_(i));Uo(s,["change:extend","change:layers","change:maxResolution","change:maxZoom","change:minResolution","change:minZoom","change:opacity","change:visible","change:zIndex"]);const a=mn("layerGroup",null);return zt(()=>i,l=>{for(const o in l){const d=o;l[d]&&s.value.set(o,l[d])}},{deep:!0}),dr(()=>{if(r==null||r.addLayer(s.value),a){const l=a.getLayers();l.push(s.value),a.setLayers(l)}}),Ss(()=>{r==null||r.removeLayer(s.value)}),Rr("layerGroup",s.value),e({layerGroup:s.value}),(l,o)=>(ve(),Ue("div",null,[kt(l.$slots,"default")]))}}),a0t=Ge({__name:"OlTileLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},preload:{}},{...mm,preload:1}),setup(t,{expose:e}){const r=gi(t),i=Ds(new P8(r));return y0(i,r),Rr("tileLayer",i),e({tileLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),l0t=Ge({__name:"OlVectorLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},background:{type:[String,Function]},renderBuffer:{},updateWhileAnimating:{type:Boolean},styles:{type:[Object,Array,Function,null]},updateWhileInteracting:{type:Boolean}},{...mm,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!1}),setup(t,{expose:e}){const n=t,r=gi(n),i=Ds(new cm(r));return y0(i,n),Rr("vectorLayer",i),Rr("stylable",i),e({vectorLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),c0t=Ge({__name:"OlVectorTileLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},renderBuffer:{},updateWhileAnimating:{type:Boolean},styles:{type:[Object,Array,Function,null]},updateWhileInteracting:{type:Boolean},renderMode:{}},{...mm,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!1,renderMode:"hybrid"}),setup(t,{expose:e}){const r=gi(t),i=Ds(new rAe(r));return y0(i,r),Rr("vectorTileLayer",i),Rr("stylable",i),e({vectorTileLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),u0t=Ge({__name:"OlVectorImageLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},renderBuffer:{},updateWhileAnimating:{type:Boolean},styles:{type:Function},updateWhileInteracting:{type:Boolean}},{...mm,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!1}),setup(t,{expose:e}){const r=gi(t),i=Ds(new dot(r));return y0(i,r),Rr("vectorLayer",i),Rr("stylable",i),e({vectorImageLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),h0t=Ge({__name:"OlWebglTileLayer",props:Qu({style:{},className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},preload:{},source:{},sources:{type:[Array,Function]},map:{},useInterimTilesOnError:{type:Boolean},cacheSize:{},properties:{}},mm),setup(t,{expose:e}){const r=gi(t),i=Ds(new oAe(r));return y0(i,r),Rr("tileLayer",i),e({tileLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}}),Pge=class Fge extends Kb{constructor(e){Fge.options=e,super(e)}createRenderer(){return new Tot(this,{className:this.getClassName(),style:this.getProperties().style})}};gN(Pge,"options",{});let d0t=Pge;const f0t=Ge({__name:"OlWebglVectorLayer",props:Qu({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},disableHitDetection:{type:Boolean},styles:{}},{...mm,disableHitDetection:!1,styles:()=>({"shape-points":1,"shape-radius":10,"shape-opacity":.5,"shape-fill-color":"blue"})}),setup(t,{expose:e}){const r=gi(t),i=Ds(new d0t({...r,styles:r.style}));return y0(i,r),Rr("webglVectorLayer",i),e({webglVectorLayer:i}),(s,a)=>(ve(),Ue("div",null,[kt(s.$slots,"default")]))}});function p0t(t,e){t.component("OlAnimatedClusterlayer",r0t),t.component("OlHeatmapLayer",i0t),t.component("OlImageLayer",s0t),t.component("OlLayerGroup",o0t),t.component("OlTileLayer",a0t),t.component("OlVectorImageLayer",u0t),t.component("OlVectorLayer",l0t),t.component("OlVectorTileLayer",c0t),t.component("OlWebglTileLayer",h0t),t.component("OlWebglVectorLayer",f0t),e&&t.provide("ol-options",e)}const A0t=Ge({inheritAttrs:!1,__name:"OlSourceBingmaps",props:{cacheSize:{},hidpi:{type:Boolean},culture:{},imagerySet:{},interpolate:{type:Boolean},maxZoom:{},reprojectionErrorThreshold:{},tileLoadFunction:{type:Function},wrapX:{type:Boolean},transition:{},zDirection:{type:[Number,Function]},placeholderTiles:{type:Boolean},apiKey:{}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new fnt({...i,key:i.apiKey}));return Uo(s,Y7),zt(s,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),zt(()=>r==null?void 0:r.value,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),dr(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),Ss(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(null)}),e({layer:r,source:s}),(a,l)=>wt("",!0)}}),g0t=Ge({inheritAttrs:!1,__name:"OlSourceCluster",props:{attributions:{},distance:{default:20},minDistance:{},geometryFunction:{type:Function,default:t=>t.getGeometry()},createCluster:{},source:{},wrapX:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,r=mn("vectorLayer"),i=gi(n),s=oe(()=>new Wfe(i));Uo(s,X7);const a=()=>{var l,o,d;(l=r==null?void 0:r.value)==null||l.setSource(null),(o=r==null?void 0:r.value)==null||o.setSource(s.value),(d=r==null?void 0:r.value)==null||d.changed()};return zt(i,()=>{a()}),zt(()=>r==null?void 0:r.value,()=>{a()}),dr(()=>{var l,o;(l=r==null?void 0:r.value)==null||l.setSource(s.value),(o=r==null?void 0:r.value)==null||o.changed()}),Ss(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(null)}),Rr("vectorLayer",s),e({layer:r,source:s}),(l,o)=>(ve(),Ue("div",null,[kt(l.$slots,"default")]))}}),m0t=Ge({inheritAttrs:!1,__name:"OlSourceImageStatic",props:{attributions:{},crossOrigin:{},imageExtent:{},imageLoadFunction:{},interpolate:{type:Boolean,default:!0},projection:{},url:{}},setup(t,{expose:e}){const n=t,r=mn("imageLayer"),i=gi(n),s=()=>new Cit({...i,projection:F_(i.projection)});let a=s();return Uo(a,Y7),zt(i,()=>{r==null||r.setSource(null),a=s(),r==null||r.setSource(a)}),dr(()=>{r==null||r.setSource(a)}),Ss(()=>{r==null||r.setSource(null)}),e({layer:r,source:a}),(l,o)=>wt("",!0)}}),v0t=Ge({inheritAttrs:!1,__name:"OlSourceImageWms",props:{attributions:{},crossOrigin:{},hidpi:{type:Boolean},serverType:{default:"mapserver"},imageLoadFunction:{},interpolate:{type:Boolean},params:{},projection:{default:"EPSG:3857"},ratio:{default:1},resolutions:{},url:{},layers:{},styles:{default:""},time:{}},setup(t,{expose:e}){const n=t,r=mn("imageLayer"),i=gi(n),s=()=>new Iit({...i,params:{...n.params,LAYERS:n.layers,STYLES:n.styles,TIME:n.time},projection:F_(i.projection)});let a=s();return Uo(a,Y7),zt(i,()=>{r==null||r.setSource(null),a=s(),r==null||r.setSource(a)}),dr(()=>{r==null||r.setSource(a)}),Ss(()=>{r==null||r.setSource(null)}),e({layer:r,source:a}),(l,o)=>wt("",!0)}}),y0t=Ge({inheritAttrs:!1,__name:"OlSourceOsm",props:{attributions:{},cacheSize:{},crossOrigin:{default:"anonymous"},interpolate:{type:Boolean,default:!0},maxZoom:{default:19},opaque:{type:Boolean,default:!0},reprojectionErrorThreshold:{default:.5},tileLoadFunction:{},transition:{default:250},url:{default:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"},wrapX:{type:Boolean,default:!0},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new Fit(i));return Uo(s,m0),zt(s,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),zt(()=>r==null?void 0:r.value,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),dr(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),Ss(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(null)}),e({layer:r,source:s}),(a,l)=>wt("",!0)}}),_0t=Ge({inheritAttrs:!1,__name:"OlSourceStadiaMaps",props:{cacheSize:{},interpolate:{type:Boolean,default:!0},layer:{},minZoom:{},maxZoom:{},reprojectionErrorThreshold:{default:.5},tileLoadFunction:{},transition:{default:250},url:{},wrapX:{type:Boolean,default:!0},zDirection:{type:[Number,Function],default:0},apiKey:{},retina:{type:Boolean}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new Vit(i));Uo(s,[...m0,"removefeature"]);const a=()=>{var l,o,d;(l=r==null?void 0:r.value)==null||l.setSource(null),(o=r==null?void 0:r.value)==null||o.setSource(s.value),(d=r==null?void 0:r.value)==null||d.changed()};return zt(i,()=>{a()}),zt(()=>r==null?void 0:r.value,()=>{a()}),dr(()=>{var l,o;(l=r==null?void 0:r.value)==null||l.setSource(s.value),(o=r==null?void 0:r.value)==null||o.changed()}),Ss(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(null)}),e({layer:r,source:s}),(l,o)=>wt("",!0)}}),yN=class Og extends Lpe{constructor(e){Og.layerLabelMap={vec:"cva",ter:"cta",img:"cia"},Og.layerZoomMap={vec:18,ter:14,img:18};const n={...e};n.layerType=n.layerType||"vec",n.layerType=n.isLabel?Og.layerLabelMap[n.layerType]:n.layerType,n.matrixSet=n.projection==="EPSG:4326"||n.projection==="EPSG:4490"?"c":"w",!n.url&&!n.urls&&(n.url="https://t{0-7}.tianditu.gov.cn/{layer}_{proj}/wmts?"),n.tk&&(n.url=`${n.url}tk=${n.tk}`),n.url=(n.url||"").replace("{layer}",n.layerType).replace("{proj}",n.matrixSet);const r=n.tileGrid||Og.getTileGrid(n.projection),i=n.crossOrigin!==void 0?n.crossOrigin:"anonymous",s={version:n.version||"1.0.0",format:n.format||"tiles",dimensions:n.dimensions||{},layer:n.layerType,matrixSet:n.matrixSet,tileGrid:r,style:n.style||"default",cacheSize:n.cacheSize,crossOrigin:i,opaque:n.opaque===void 0?!0:n.opaque,maxZoom:Og.layerZoomMap[n.layerType],reprojectionErrorThreshold:n.reprojectionErrorThreshold,url:n.url,urls:n.urls,projection:n.projection||"EPSG:3857",wrapX:n.wrapX};n.tileProxy&&(Og.tileProxy=n.tileProxy,s.tileLoadFunction=(a,l)=>{a.getImage().src=Og.tileProxy+encodeURIComponent(l)}),super(s)}static getTileGrid(e){return e==="EPSG:4326"||e==="EPSG:4490"?Og.default4326TileGrid():Og.default3857TileGrid()}static default4326TileGrid(){const e=[],n=[];for(let i=1;i<19;i++)e.push(.703125*2/2**i),n.push(i.toString());return new S8({extent:[-180,-90,180,90],resolutions:e,origin:[-180,90],matrixIds:n})}static default3857TileGrid(){const e=[],n=[];for(let i=1;i<19;i++)e.push(78271.51696402031*2/2**i),n.push(i.toString());return new S8({extent:[-200375083427892e-7,-200375083427892e-7,200375083427892e-7,200375083427892e-7],resolutions:e,matrixIds:n,origin:[-200375083427892e-7,200375083427892e-7]})}};gN(yN,"layerLabelMap",{});gN(yN,"layerZoomMap",{});gN(yN,"tileProxy");let b0t=yN;const w0t=Ge({inheritAttrs:!1,__name:"OlSourceTianditu",props:{attributions:{},attributionsCollapsible:{type:Boolean},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean},tileGrid:{},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{},requestEncoding:{default:"KVP"},layer:{},style:{},tileClass:{},tilePixelRatio:{},format:{},version:{default:"1.0.0"},matrixSet:{},dimensions:{default:()=>({})},url:{},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},urls:{},wrapX:{type:Boolean,default:!0},transition:{},zDirection:{},tileProxy:{},layerType:{default:"img"},tk:{},isLabel:{type:Boolean,default:!1},maxZoom:{default:21},opaque:{type:Boolean}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new b0t(i));return Uo(s,m0),zt(s,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),zt(()=>r==null?void 0:r.value,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),dr(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),Ss(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(null)}),e({layer:r,source:s}),(a,l)=>wt("",!0)}}),x0t=Ge({inheritAttrs:!1,__name:"OlSourceTileArcgisRest",props:{attributions:{},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},params:{},hidpi:{type:Boolean,default:!1},tileGrid:{},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},url:{},wrapX:{type:Boolean,default:!1},transition:{},urls:{},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>n.tileGrid||OE({tileSize:n.tileSize})),a=oe(()=>new Hit({...i,projection:F_(i.projection),tileGrid:s.value}));return Uo(a,m0),zt(a,()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(a.value)}),zt(()=>r,()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(a.value)}),dr(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(a.value)}),Ss(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(null)}),e({tileLayer:r,source:a}),(l,o)=>wt("",!0)}}),C0t=Ge({inheritAttrs:!1,__name:"OlSourceTileDebug",props:{projection:{},tileGrid:{},wrapX:{type:Boolean},zDirection:{},template:{}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new Git(i));Uo(s,["tileloadend","tileloadstart","tileloaderror"]);const a=()=>{var l,o,d;(l=r==null?void 0:r.value)==null||l.setSource(null),(o=r==null?void 0:r.value)==null||o.setSource(s.value),(d=r==null?void 0:r.value)==null||d.changed()};return zt(i,()=>{a()}),zt(()=>r==null?void 0:r.value,()=>{a()}),dr(()=>{var l,o;(l=r==null?void 0:r.value)==null||l.setSource(s.value),(o=r==null?void 0:r.value)==null||o.changed()}),Ss(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(null)}),e({layer:r,source:s}),(l,o)=>wt("",!0)}}),E0t=Ge({inheritAttrs:!1,__name:"OlSourceGeoTiff",props:{sources:{},sourceOptions:{},convertToRGB:{type:[Boolean,String]},normalize:{type:Boolean},opaque:{type:Boolean},projection:{},transition:{},wrapX:{type:Boolean},interpolate:{type:Boolean}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=()=>new vpe({...i,projection:F_(i.projection)});let a=s();return Uo(a,m0),zt(i,()=>{r==null||r.value.setSource(null),a=s(),r==null||r.value.setSource(a)}),dr(()=>{r==null||r.value.setSource(a)}),Ss(()=>{r==null||r.value.setSource(null)}),e({layer:r,source:a}),(l,o)=>wt("",!0)}}),S0t=Ge({inheritAttrs:!1,__name:"OlSourceTileJson",props:{attributions:{},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},jsonp:{type:Boolean,default:!1},reprojectionErrorThreshold:{default:.5},tileJSON:{},tileLoadFunction:{},tileSize:{},url:{},wrapX:{type:Boolean,default:!0},transition:{},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new Qit(i));Uo(s,["removefeature","tileloadend","tileloadstart","tileloaderror"]);const a=()=>{var l,o,d;(l=r==null?void 0:r.value)==null||l.setSource(null),(o=r==null?void 0:r.value)==null||o.setSource(s.value),(d=r==null?void 0:r.value)==null||d.changed()};return zt(i,()=>{a()}),zt(()=>r==null?void 0:r.value,()=>{a()}),dr(()=>{var l,o;(l=r==null?void 0:r.value)==null||l.setSource(s.value),(o=r==null?void 0:r.value)==null||o.changed()}),Ss(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(null)}),e({layer:r,source:s}),(l,o)=>wt("",!0)}}),T0t=Ge({inheritAttrs:!1,__name:"OlSourceTileWms",props:{attributions:{},attributionsCollapsible:{type:Boolean,default:!0},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},params:{},gutter:{default:0},hidpi:{type:Boolean,default:!0},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},tileClass:{},tileGrid:{},serverType:{},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},url:{},urls:{},wrapX:{type:Boolean,default:!0},transition:{},zDirection:{},layers:{},styles:{default:""}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=()=>new Mpe({...i,params:{...n.params,LAYERS:n.layers,STYLES:n.styles},projection:F_(i.projection),tileGrid:i.tileGrid});let a=s();return Uo(a,m0),zt(i,()=>{r==null||r.value.setSource(null),a=s(),r==null||r.value.setSource(a)}),dr(()=>{r==null||r.value.setSource(a)}),Ss(()=>{r==null||r.value.setSource(null)}),e({layer:r,source:a}),(l,o)=>wt("",!0)}}),I0t=Ge({inheritAttrs:!1,__name:"OlSourceVector",props:{attributions:{},features:{},format:{},loader:{},overlaps:{type:Boolean,default:!0},strategy:{},url:{},useSpatialIndex:{type:Boolean,default:!0},wrapX:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,r=mn("vectorLayer",null),i=mn("heatmapLayer",null),s=mn("webglVectorLayer",null),a=i||r||s,l=gi(n),o=Ds(new L_(l));Uo(o,X7);const d=()=>{const p=a==null?void 0:a.value.getSource();if(p)for(const A in l){const v=A;l[v]&&p.set(A,l[v])}else a==null||a.value.setSource(o.value)};return zt(()=>l.features,(p,A)=>{p!==A&&(o.value.clear(),p&&o.value.addFeatures(p)),d()},{deep:!0}),zt(()=>l.url,(p,A)=>{p!==A&&(o.value.clear(),p&&o.value.setUrl(p)),d()}),zt(()=>l,()=>d()),zt(()=>a==null?void 0:a.value,()=>d()),dr(()=>{d()}),Ss(()=>{a==null||a.value.setSource(null)}),Rr("vectorSource",o),e({layer:a,source:o}),(p,A)=>(ve(),Ue("div",null,[kt(p.$slots,"default")]))}}),B0t=Ge({inheritAttrs:!1,__name:"OlSourceVectorTile",props:{attributions:{},attributionsCollapsible:{type:Boolean},cacheSize:{},extent:{},format:{},overlaps:{type:Boolean,default:!0},projection:{default:"EPSG:3857"},state:{},tileClass:{},maxZoom:{},minZoom:{},tileSize:{},maxResolution:{},tileGrid:{},tileLoadFunction:{},tileUrlFunction:{},url:{},transition:{},urls:{},wrapX:{type:Boolean,default:!0},zDirection:{}},setup(t,{expose:e}){const n=t,r=mn("vectorTileLayer",null),i=gi(n),s=oe(()=>new Rit(i));Uo(s,m0);const a=()=>{var l,o,d;(l=r==null?void 0:r.value)==null||l.setSource(null),(o=r==null?void 0:r.value)==null||o.setSource(s.value),(d=r==null?void 0:r.value)==null||d.changed()};return zt(i,()=>{a()}),zt(()=>r==null?void 0:r.value,()=>{a()}),dr(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(s.value)}),Ss(()=>{var l;(l=r==null?void 0:r.value)==null||l.setSource(null)}),Rr("vectorSource",s),e({vectorTileLayer:r,source:s}),(l,o)=>(ve(),Ue("div",null,[kt(l.$slots,"default")]))}}),M0t=Ge({inheritAttrs:!1,__name:"OlSourceXyz",props:{attributions:{},attributionsCollapsible:{type:Boolean,default:!0},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},opaque:{type:Boolean,default:!0},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},maxZoom:{default:42},minZoom:{default:0},maxResolution:{},tileGrid:{},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},tilePixelRatio:{default:1},tileSize:{default:()=>[256,256]},gutter:{default:0},tileUrlFunction:{},url:{},urls:{},wrapX:{type:Boolean,default:!0},transition:{default:250},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>new J2({...i,projection:F_(i.projection),tileGrid:i.tileGrid}));return Uo(s,m0),zt(s,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),zt(()=>r==null?void 0:r.value,()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),dr(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(s.value)}),Ss(()=>{var a;(a=r==null?void 0:r.value)==null||a.setSource(null)}),e({layer:r,source:s}),(a,l)=>wt("",!0)}}),L0t=Ge({inheritAttrs:!1,__name:"OlSourceWmts",props:{attributions:{},attributionsCollapsible:{type:Boolean,default:!0},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean},tileGrid:{},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},requestEncoding:{default:"KVP"},layer:{},style:{},tileClass:{},tilePixelRatio:{default:1},format:{default:"image/jpeg"},version:{default:"1.0.0"},matrixSet:{},dimensions:{},url:{},tileLoadFunction:{},urls:{},wrapX:{type:Boolean,default:!1},transition:{},zDirection:{},styles:{},tileZoomLevel:{default:30},tileMatrixPrefix:{default:""}},setup(t,{expose:e}){const n=t,r=mn("tileLayer"),i=gi(n),s=oe(()=>{var p;return(p=Oi(i.projection))==null?void 0:p.getExtent()}),a=oe(()=>s.value?KA(s.value):void 0),l=oe(()=>s.value?no(s.value)/256:0),o=oe(()=>{if(n.tileGrid)return n.tileGrid;const p=[i.tileZoomLevel],A=[`${i.tileZoomLevel}`];for(let v=0;v<i.tileZoomLevel;++v)p[v]=l.value/Math.pow(2,v),A[v]=n.tileMatrixPrefix+v;return new S8({origin:a.value,resolutions:p,matrixIds:A})}),d=oe(()=>new Lpe({...i,projection:F_(i.projection),tileGrid:o.value}));return Uo(d,m0),zt(d,()=>{var p;(p=r==null?void 0:r.value)==null||p.setSource(d.value)}),zt(()=>r,()=>{var p;(p=r==null?void 0:r.value)==null||p.setSource(d.value)}),dr(()=>{var p;(p=r==null?void 0:r.value)==null||p.setSource(d.value)}),Ss(()=>{var p;(p=r==null?void 0:r.value)==null||p.setSource(null)}),e({tileLayer:r,source:d}),(p,A)=>wt("",!0)}});function R0t(t,e){t.component("OlSourceBingmaps",A0t),t.component("OlSourceCluster",g0t),t.component("OlSourceImageStatic",m0t),t.component("OlSourceImageWms",v0t),t.component("OlSourceOsm",y0t),t.component("OlSourceStadiaMaps",_0t),t.component("OlSourceTianditu",w0t),t.component("OlSourceTileArcgisRest",x0t),t.component("OlSourceTileDebug",C0t),t.component("OlSourceGeoTiff",E0t),t.component("OlSourceTileJson",S0t),t.component("OlSourceTileWms",T0t),t.component("OlSourceVector",I0t),t.component("OlSourceVectorTile",B0t),t.component("OlSourceXyz",M0t),t.component("OlSourceWmts",L0t),e&&t.provide("ol-options",e)}function Ac(t,e,n){const r=mn("map"),i=mn("controlBar",null),s=i!==null?i==null?void 0:i.value:r,a=oe(()=>new t({...e}));return a.value.set("order",n.order===void 0?0:n.order),zt(a,(l,o)=>{if(s){if(s instanceof Bv)s.removeControl(o),s.addControl(l);else if(s instanceof CF){if(s!=null&&s.controls_){const d=s==null?void 0:s.controls_.findIndex(p=>p===a.value);d&&(s==null||s.controls_.splice(d,1))}s.addControl(l)}r==null||r.changed()}}),dr(()=>{if(s&&(s instanceof Bv||s instanceof CF)&&s.addControl(a.value),(s==null?void 0:s.controls_)!==void 0){const l=[...s.controls_];l.sort((o,d)=>o.get("order")-d.get("order")),s.controls_=[],s&&(s instanceof Bv||s instanceof CF)&&l.forEach(o=>{s.addControl(o)}),s.changed()}r==null||r.changed()}),Ss(()=>{if(s&&s instanceof Bv)s==null||s.getControls().getArray().forEach(l=>{l instanceof t&&s.removeControl(l)});else if(s!=null&&s.controls_){const l=s==null?void 0:s.controls_.findIndex(o=>o===a.value);l&&(s==null||s.controls_.splice(l,1))}a.value.dispose(),r==null||r.changed()}),{map:r,control:a}}const P0t=Ge({__name:"OlAttributionControl",props:{className:{default:"ol-attribution"},target:{},collapsible:{type:Boolean},collapsed:{type:Boolean,default:!0},tipLabel:{default:"Attributions"},label:{default:"i"},expandClassName:{default:"ol-attribution-expand"},collapseLabel:{default:""},collapseClassName:{default:"ol-attribution-collapse"},render:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Efe,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),F0t=Ge({__name:"OlButtonControl",props:{html:{},name:{},className:{},title:{},handleClick:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(lAe,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),O0t=Ge({inheritAttrs:!1,__name:"OlContextMenuControl",props:{width:{default:150},scrollAt:{},eventType:{default:"contextmenu"},defaultItems:{type:Boolean,default:!0},items:{default:()=>[]}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Qot,i,r);return Uo(s,["beforeopen","open","close","add-menu-entry"]),e({control:s}),(a,l)=>wt("",!0)}}),N0t=Ge({__name:"OlControlBar",props:{toggleOne:{type:Boolean,default:!0},group:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(CF,i,r);return Rr("controlBar",s),e({control:s}),(a,l)=>kt(a.$slots,"default")}}),k0t=Ge({__name:"OlFullscreenControl",props:{className:{default:"ol-full-screen"},label:{default:""},labelActive:{default:""},activeClassName:{default:"ol-full-screen-true"},inactiveClassName:{default:"ol-full-screen-false"},tipLabel:{default:"Toggle full-screen"},keys:{type:Boolean,default:!1},target:{default:void 0},source:{default:void 0}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Iot,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),D0t=Ge({__name:"OlLayerswitcherControl",props:{displayInLayerSwitcher:{},show_progress:{type:Boolean,default:!1},mouseover:{type:Boolean,default:!1},reordering:{type:Boolean,default:!0},trash:{type:Boolean,default:!1},oninfo:{},extent:{type:Boolean},onExtent:{},drawDelay:{},collapsed:{type:Boolean,default:!0},layerGroup:{},noScroll:{type:Boolean,default:!1},onchangeCheck:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(x7,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),U0t=Ge({__name:"OlLayerswitcherimageControl",props:{displayInLayerSwitcher:{},show_progress:{type:Boolean,default:!1},mouseover:{type:Boolean,default:!1},reordering:{type:Boolean,default:!0},trash:{type:Boolean,default:!1},oninfo:{},extent:{type:Boolean},onExtent:{},drawDelay:{},collapsed:{type:Boolean,default:!0},layerGroup:{},noScroll:{type:Boolean,default:!1},onchangeCheck:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(jot,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),z0t=Ge({__name:"OlMousepositionControl",props:{className:{default:"ol-mouse-position"},coordinateFormat:{},projection:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Lot,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),$0t=Ge({__name:"OlOverviewmapControl",props:{className:{},collapsed:{type:Boolean},collapseLabel:{},collapsible:{type:Boolean},label:{},layers:{},render:{type:Function},rotateWithView:{type:Boolean},target:{},tipLabel:{},view:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Rot,i,r);return Rr("overviewMap",s),e({control:s}),(a,l)=>(ve(),Ue("div",null,[kt(a.$slots,"default")]))}});var fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oge={exports:{}};(function(t,e){(function(n,r){r()})(fp,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,p,A){var v=new XMLHttpRequest;v.open("GET",d),v.responseType="blob",v.onload=function(){o(v.response,p,A)},v.onerror=function(){console.error("could not download file")},v.send()}function i(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof fp=="object"&&fp.global===fp?fp:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,p,A){var v=a.URL||a.webkitURL,y=document.createElement("a");p=p||d.name||"download",y.download=p,y.rel="noopener",typeof d=="string"?(y.href=d,y.origin===location.origin?s(y):i(y.href)?r(d,p,A):s(y,y.target="_blank")):(y.href=v.createObjectURL(d),setTimeout(function(){v.revokeObjectURL(y.href)},4e4),setTimeout(function(){s(y)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,A){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,A),p);else if(i(d))r(d,p,A);else{var v=document.createElement("a");v.href=d,v.target="_blank",setTimeout(function(){s(v)})}}:function(d,p,A,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof d=="string")return r(d,p,A);var y=d.type==="application/octet-stream",C=/constructor/i.test(a.HTMLElement)||a.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&C||l)&&typeof FileReader<"u"){var M=new FileReader;M.onloadend=function(){var F=M.result;F=x?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=F:location=F,v=null},M.readAsDataURL(d)}else{var I=a.URL||a.webkitURL,P=I.createObjectURL(d);v?v.location=P:location.href=P,v=null,setTimeout(function(){I.revokeObjectURL(P)},4e4)}});a.saveAs=o.saveAs=o,t.exports=o})})(Oge);var Nge=Oge.exports;function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(t)}var Sd=Uint8Array,Dh=Uint16Array,EB=Uint32Array,_N=new Sd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bN=new Sd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ez=new Sd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kge=function(t,e){for(var n=new Dh(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new EB(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Dge=kge(_N,2),Uge=Dge[0],tz=Dge[1];Uge[28]=258,tz[258]=28;var zge=kge(bN,0),V0t=zge[0],Zte=zge[1],nz=new Dh(32768);for(var cl=0;cl<32768;++cl){var ly=(cl&43690)>>>1|(cl&21845)<<1;ly=(ly&52428)>>>2|(ly&13107)<<2,ly=(ly&61680)>>>4|(ly&3855)<<4,nz[cl]=((ly&65280)>>>8|(ly&255)<<8)>>>1}var tm=function(t,e,n){for(var r=t.length,i=0,s=new Dh(e);i<r;++i)++s[t[i]-1];var a=new Dh(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Dh(1<<e);var o=15-e;for(i=0;i<r;++i)if(t[i])for(var d=i<<4|t[i],p=e-t[i],A=a[t[i]-1]++<<p,v=A|(1<<p)-1;A<=v;++A)l[nz[A]>>>o]=d}else for(l=new Dh(r),i=0;i<r;++i)l[i]=nz[a[t[i]-1]++]>>>15-t[i];return l},p_=new Sd(288);for(var cl=0;cl<144;++cl)p_[cl]=8;for(var cl=144;cl<256;++cl)p_[cl]=9;for(var cl=256;cl<280;++cl)p_[cl]=7;for(var cl=280;cl<288;++cl)p_[cl]=8;var SB=new Sd(32);for(var cl=0;cl<32;++cl)SB[cl]=5;var H0t=tm(p_,9,0),G0t=tm(p_,9,1),Q0t=tm(SB,5,0),j0t=tm(SB,5,1),n6=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},gA=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(e&7)&n},r6=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},iQ=function(t){return(t/8>>0)+(t&7&&1)},$ge=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Dh?Dh:t instanceof EB?EB:Sd)(n-e);return r.set(t.subarray(e,n)),r},K0t=function(t,e,n){var r=t.length,i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Sd(r*3));var a=function(Re){var Ie=e.length;if(Re>Ie){var Ne=new Sd(Math.max(Ie*2,Re));Ne.set(e),e=Ne}},l=n.f||0,o=n.p||0,d=n.b||0,p=n.l,A=n.d,v=n.m,y=n.n,C=r*8;do{if(!p){n.f=l=gA(t,o,1);var x=gA(t,o+1,3);if(o+=3,x)if(x==1)p=G0t,A=j0t,v=9,y=5;else if(x==2){var F=gA(t,o,31)+257,D=gA(t,o+10,15)+4,V=F+gA(t,o+5,31)+1;o+=14;for(var H=new Sd(V),Q=new Sd(19),G=0;G<D;++G)Q[ez[G]]=gA(t,o+G*3,7);o+=D*3;var W=n6(Q),te=(1<<W)-1;if(!s&&o+V*(W+7)>C)break;for(var q=tm(Q,W,1),G=0;G<V;){var Y=q[gA(t,o,te)];o+=Y&15;var M=Y>>>4;if(M<16)H[G++]=M;else{var ee=0,ce=0;for(M==16?(ce=3+gA(t,o,3),o+=2,ee=H[G-1]):M==17?(ce=3+gA(t,o,7),o+=3):M==18&&(ce=11+gA(t,o,127),o+=7);ce--;)H[G++]=ee}}var se=H.subarray(0,F),le=H.subarray(F);v=n6(se),y=n6(le),p=tm(se,v,1),A=tm(le,y,1)}else throw"invalid block type";else{var M=iQ(o)+4,I=t[M-4]|t[M-3]<<8,P=M+I;if(P>r){if(s)throw"unexpected EOF";break}i&&a(d+I),e.set(t.subarray(M,P),d),n.b=d+=I,n.p=o=P*8;continue}if(o>C)throw"unexpected EOF"}i&&a(d+131072);for(var ie=(1<<v)-1,pe=(1<<y)-1,ue=v+y+18;s||o+ue<C;){var ee=p[r6(t,o)&ie],me=ee>>>4;if(o+=ee&15,o>C)throw"unexpected EOF";if(!ee)throw"invalid length/literal";if(me<256)e[d++]=me;else if(me==256){p=null;break}else{var Le=me-254;if(me>264){var G=me-257,ae=_N[G];Le=gA(t,o,(1<<ae)-1)+Uge[G],o+=ae}var be=A[r6(t,o)&pe],_e=be>>>4;if(!be)throw"invalid distance";o+=be&15;var le=V0t[_e];if(_e>3){var ae=bN[_e];le+=r6(t,o)&(1<<ae)-1,o+=ae}if(o>C)throw"unexpected EOF";i&&a(d+131072);for(var $e=d+Le;d<$e;d+=4)e[d]=e[d-le],e[d+1]=e[d+1-le],e[d+2]=e[d+2-le],e[d+3]=e[d+3-le];d=$e}}n.l=p,n.p=o,n.b=d,p&&(l=1,n.m=v,n.d=A,n.n=y)}while(!l);return d==e.length?e:$ge(e,0,d)},Av=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},XS=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},i6=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Sd(0),0];if(i==1){var a=new Sd(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort(function(V,H){return V.f-H.f}),n.push({s:-1,f:25001});var l=n[0],o=n[1],d=0,p=1,A=2;for(n[0]={s:-1,f:l.f+o.f,l,r:o};p!=i-1;)l=n[n[d].f<n[A].f?d++:A++],o=n[d!=p&&n[d].f<n[A].f?d++:A++],n[p++]={s:-1,f:l.f+o.f,l,r:o};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var y=new Dh(v+1),C=rz(n[p-1],y,0);if(C>e){var r=0,x=0,M=C-e,I=1<<M;for(s.sort(function(H,Q){return y[Q.s]-y[H.s]||H.f-Q.f});r<i;++r){var P=s[r].s;if(y[P]>e)x+=I-(1<<C-y[P]),y[P]=e;else break}for(x>>>=M;x>0;){var F=s[r].s;y[F]<e?x-=1<<e-y[F]++-1:++r}for(;r>=0&&x;--r){var D=s[r].s;y[D]==e&&(--y[D],++x)}C=e}return[new Sd(y),C]},rz=function(t,e,n){return t.s==-1?Math.max(rz(t.l,e,n+1),rz(t.r,e,n+1)):e[t.s]=n},Jte=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Dh(++e),r=0,i=t[0],s=1,a=function(o){n[r++]=o},l=1;l<=e;++l)if(t[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[l]}return[n.subarray(0,r),e]},ZS=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},iz=function(t,e,n){var r=n.length,i=iQ(e+2);t[i]=r&255,t[i+1]=r>>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},ene=function(t,e,n,r,i,s,a,l,o,d,p){Av(e,p++,n),++i[256];for(var A=i6(i,15),v=A[0],y=A[1],C=i6(s,15),x=C[0],M=C[1],I=Jte(v),P=I[0],F=I[1],D=Jte(x),V=D[0],H=D[1],Q=new Dh(19),G=0;G<P.length;++G)Q[P[G]&31]++;for(var G=0;G<V.length;++G)Q[V[G]&31]++;for(var W=i6(Q,7),te=W[0],q=W[1],Y=19;Y>4&&!te[ez[Y-1]];--Y);var ee=d+5<<3,ce=ZS(i,p_)+ZS(s,SB)+a,se=ZS(i,v)+ZS(s,x)+a+14+3*Y+ZS(Q,te)+(2*Q[16]+3*Q[17]+7*Q[18]);if(ee<=ce&&ee<=se)return iz(e,p,t.subarray(o,o+d));var le,ie,pe,ue;if(Av(e,p,1+(se<ce)),p+=2,se<ce){le=tm(v,y,0),ie=v,pe=tm(x,M,0),ue=x;var me=tm(te,q,0);Av(e,p,F-257),Av(e,p+5,H-1),Av(e,p+10,Y-4),p+=14;for(var G=0;G<Y;++G)Av(e,p+3*G,te[ez[G]]);p+=3*Y;for(var Le=[P,V],ae=0;ae<2;++ae)for(var be=Le[ae],G=0;G<be.length;++G){var _e=be[G]&31;Av(e,p,me[_e]),p+=te[_e],_e>15&&(Av(e,p,be[G]>>>5&127),p+=be[G]>>>12)}}else le=H0t,ie=p_,pe=Q0t,ue=SB;for(var G=0;G<l;++G)if(r[G]>255){var _e=r[G]>>>18&31;XS(e,p,le[_e+257]),p+=ie[_e+257],_e>7&&(Av(e,p,r[G]>>>23&31),p+=_N[_e]);var $e=r[G]&31;XS(e,p,pe[$e]),p+=ue[$e],$e>3&&(XS(e,p,r[G]>>>5&8191),p+=bN[$e])}else XS(e,p,le[r[G]]),p+=ie[r[G]];return XS(e,p,le[256]),p+ie[256]},W0t=new EB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q0t=function(t,e,n,r,i,s){var a=t.length,l=new Sd(r+a+5*(1+Math.floor(a/7e3))+i),o=l.subarray(r,l.length-i),d=0;if(!e||a<8)for(var p=0;p<=a;p+=65535){var A=p+65535;A<a?d=iz(o,d,t.subarray(p,A)):(o[p]=s,d=iz(o,d,t.subarray(p,a)))}else{for(var v=W0t[e-1],y=v>>>13,C=v&8191,x=(1<<n)-1,M=new Dh(32768),I=new Dh(x+1),P=Math.ceil(n/3),F=2*P,D=function(Ye){return(t[Ye]^t[Ye+1]<<P^t[Ye+2]<<F)&x},V=new EB(25e3),H=new Dh(288),Q=new Dh(32),G=0,W=0,p=0,te=0,q=0,Y=0;p<a;++p){var ee=D(p),ce=p&32767,se=I[ee];if(M[ce]=se,I[ee]=ce,q<=p){var le=a-p;if((G>7e3||te>24576)&&le>423){d=ene(t,o,0,V,H,Q,W,te,Y,p-Y,d),te=G=W=0,Y=p;for(var ie=0;ie<286;++ie)H[ie]=0;for(var ie=0;ie<30;++ie)Q[ie]=0}var pe=2,ue=0,me=C,Le=ce-se&32767;if(le>2&&ee==D(p-Le))for(var ae=Math.min(y,le)-1,be=Math.min(32767,p),_e=Math.min(258,le);Le<=be&&--me&&ce!=se;){if(t[p+pe]==t[p+pe-Le]){for(var $e=0;$e<_e&&t[p+$e]==t[p+$e-Le];++$e);if($e>pe){if(pe=$e,ue=Le,$e>ae)break;for(var Re=Math.min(Le,$e-2),Ie=0,ie=0;ie<Re;++ie){var Ne=p-Le+ie+32768&32767,Je=M[Ne],je=Ne-Je+32768&32767;je>Ie&&(Ie=je,se=Ne)}}}ce=se,se=M[ce],Le+=ce-se+32768&32767}if(ue){V[te++]=268435456|tz[pe]<<18|Zte[ue];var ft=tz[pe]&31,Et=Zte[ue]&31;W+=_N[ft]+bN[Et],++H[257+ft],++Q[Et],q=p+pe,++G}else V[te++]=t[p],++H[t[p]]}}d=ene(t,o,s,V,H,Q,W,te,Y,p-Y,d)}return $ge(l,0,r+iQ(d)+i)},Y0t=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length,a=0;a!=s;){for(var l=Math.min(a+5552,s);a<l;++a)r+=n[a],i+=r;r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},X0t=function(t,e,n,r,i){return q0t(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,!i)},Z0t=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},J0t=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},eyt=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function sz(t,e){e===void 0&&(e={});var n=Y0t();n.p(t);var r=X0t(t,e,2,4);return J0t(r,e),Z0t(r,r.length-4,n.d()),r}function tyt(t,e){return K0t((eyt(t),t.subarray(2,-4)),e)}/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var Cs=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function s6(){Cs.console&&typeof Cs.console.log=="function"&&Cs.console.log.apply(Cs.console,arguments)}var ka={log:s6,warn:function(t){Cs.console&&(typeof Cs.console.warn=="function"?Cs.console.warn.apply(Cs.console,arguments):s6.call(null,arguments))},error:function(t){Cs.console&&(typeof Cs.console.error=="function"?Cs.console.error.apply(Cs.console,arguments):s6(t))}};function o6(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){I1(r.response,e,n)},r.onerror=function(){ka.error("could not download file")},r.send()}function tne(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ZR(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var fI,oz,I1=Cs.saveAs||((typeof window>"u"?"undefined":Ho(window))!=="object"||window!==Cs?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Cs.URL||Cs.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?tne(i.href)?o6(t,e,n):ZR(i,i.target="_blank"):ZR(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ZR(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(tne(t))o6(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){ZR(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ho(s)!=="object"&&(ka.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return o6(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Cs.HTMLElement)||Cs.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Ho(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(t)}else{var o=Cs.URL||Cs.webkitURL,d=o.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){o.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Vge(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),o=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),o.length==1&&(o="0"+o),d.length==1&&(d="0"+d),"#"+l+o+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function a6(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=sh(n,r,i,s,e[0],7,-680876936),s=sh(s,n,r,i,e[1],12,-389564586),i=sh(i,s,n,r,e[2],17,606105819),r=sh(r,i,s,n,e[3],22,-1044525330),n=sh(n,r,i,s,e[4],7,-176418897),s=sh(s,n,r,i,e[5],12,1200080426),i=sh(i,s,n,r,e[6],17,-1473231341),r=sh(r,i,s,n,e[7],22,-45705983),n=sh(n,r,i,s,e[8],7,1770035416),s=sh(s,n,r,i,e[9],12,-1958414417),i=sh(i,s,n,r,e[10],17,-42063),r=sh(r,i,s,n,e[11],22,-1990404162),n=sh(n,r,i,s,e[12],7,1804603682),s=sh(s,n,r,i,e[13],12,-40341101),i=sh(i,s,n,r,e[14],17,-1502002290),n=oh(n,r=sh(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=oh(s,n,r,i,e[6],9,-1069501632),i=oh(i,s,n,r,e[11],14,643717713),r=oh(r,i,s,n,e[0],20,-373897302),n=oh(n,r,i,s,e[5],5,-701558691),s=oh(s,n,r,i,e[10],9,38016083),i=oh(i,s,n,r,e[15],14,-660478335),r=oh(r,i,s,n,e[4],20,-405537848),n=oh(n,r,i,s,e[9],5,568446438),s=oh(s,n,r,i,e[14],9,-1019803690),i=oh(i,s,n,r,e[3],14,-187363961),r=oh(r,i,s,n,e[8],20,1163531501),n=oh(n,r,i,s,e[13],5,-1444681467),s=oh(s,n,r,i,e[2],9,-51403784),i=oh(i,s,n,r,e[7],14,1735328473),n=ah(n,r=oh(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ah(s,n,r,i,e[8],11,-2022574463),i=ah(i,s,n,r,e[11],16,1839030562),r=ah(r,i,s,n,e[14],23,-35309556),n=ah(n,r,i,s,e[1],4,-1530992060),s=ah(s,n,r,i,e[4],11,1272893353),i=ah(i,s,n,r,e[7],16,-155497632),r=ah(r,i,s,n,e[10],23,-1094730640),n=ah(n,r,i,s,e[13],4,681279174),s=ah(s,n,r,i,e[0],11,-358537222),i=ah(i,s,n,r,e[3],16,-722521979),r=ah(r,i,s,n,e[6],23,76029189),n=ah(n,r,i,s,e[9],4,-640364487),s=ah(s,n,r,i,e[12],11,-421815835),i=ah(i,s,n,r,e[15],16,530742520),n=lh(n,r=ah(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=lh(s,n,r,i,e[7],10,1126891415),i=lh(i,s,n,r,e[14],15,-1416354905),r=lh(r,i,s,n,e[5],21,-57434055),n=lh(n,r,i,s,e[12],6,1700485571),s=lh(s,n,r,i,e[3],10,-1894986606),i=lh(i,s,n,r,e[10],15,-1051523),r=lh(r,i,s,n,e[1],21,-2054922799),n=lh(n,r,i,s,e[8],6,1873313359),s=lh(s,n,r,i,e[15],10,-30611744),i=lh(i,s,n,r,e[6],15,-1560198380),r=lh(r,i,s,n,e[13],21,1309151649),n=lh(n,r,i,s,e[4],6,-145523070),s=lh(s,n,r,i,e[11],10,-1120210379),i=lh(i,s,n,r,e[2],15,718787259),r=lh(r,i,s,n,e[9],21,-343485551),t[0]=ky(n,t[0]),t[1]=ky(r,t[1]),t[2]=ky(i,t[2]),t[3]=ky(s,t[3])}function wN(t,e,n,r,i,s){return e=ky(ky(e,t),ky(r,s)),ky(e<<i|e>>>32-i,n)}function sh(t,e,n,r,i,s,a){return wN(e&n|~e&r,t,e,i,s,a)}function oh(t,e,n,r,i,s,a){return wN(e&r|n&~r,t,e,i,s,a)}function ah(t,e,n,r,i,s,a){return wN(e^n^r,t,e,i,s,a)}function lh(t,e,n,r,i,s,a){return wN(n^(e|~r),t,e,i,s,a)}function Hge(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)a6(r,nyt(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(a6(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,a6(r,i),r}function nyt(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}fI=Cs.atob.bind(Cs),oz=Cs.btoa.bind(Cs);var nne="0123456789abcdef".split("");function ryt(t){for(var e="",n=0;n<4;n++)e+=nne[t>>8*n+4&15]+nne[t>>8*n&15];return e}function iyt(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function az(t){return Hge(t).map(iyt).join("")}var syt=function(t){for(var e=0;e<t.length;e++)t[e]=ryt(t[e]);return t.join("")}(Hge("hello"))!="5d41402abc4b2a76b9719d911017c592";function ky(t,e){if(syt){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lz(t,e){var n,r,i,s;if(t!==n){for(var a=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),l=[],o=0;o<256;o++)l[o]=o;var d=0;for(o=0;o<256;o++){var p=l[o];d=(d+p+a.charCodeAt(o))%256,l[o]=l[d],l[d]=p}n=t,r=l}else l=r;var A=e.length,v=0,y=0,C="";for(o=0;o<A;o++)y=(y+(p=l[v=(v+1)%256]))%256,l[v]=l[y],l[y]=p,a=l[(l[v]+l[y])%256],C+=String.fromCharCode(e.charCodeAt(o)^a);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var rne={print:4,modify:8,copy:16,"annot-forms":32};function Rx(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(rne.perm!==void 0)throw new Error("Invalid permission: "+l);i+=rne[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=az(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=lz(this.encryptionKey,this.padding)}function Px(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function ine(t){if(Ho(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var a=e[n][s];try{a[0].apply(t,r)}catch(l){Cs.console&&ka.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function m5(t){if(!(this instanceof m5))return new m5(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Gge(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function P1(t,e,n,r,i){if(!(this instanceof P1))return new P1(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Gge.call(this,r,i)}function Zx(t,e,n,r,i){if(!(this instanceof Zx))return new Zx(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Gge.call(this,r,i)}function xs(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,o=16,d="S",p=null;Ho(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(o=t.floatPrecision),d=t.defaultPathOperation||"S"),a=t.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var A=t.putOnlyUsedFonts||!1,v={},y={internal:{},__private__:{}};y.__private__.PubSub=ine;var C="1.3",x=y.__private__.getPdfVersion=function(){return C};y.__private__.setPdfVersion=function(de){C=de};var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return M};var I=y.__private__.getPageFormat=function(de){return M[de]};i=i||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},F=P.COMPAT;function D(){this.saveGraphicsState(),He(new zr(Qe,0,0,-Qe,0,vl()*Qe).toString()+" cm"),this.setFontSize(this.getFontSize()/Qe),d="n",F=P.ADVANCED}function V(){this.restoreGraphicsState(),d="S",F=P.COMPAT}var H=y.__private__.combineFontStyleAndFontWeight=function(de,We){if(de=="bold"&&We=="normal"||de=="bold"&&We==400||de=="normal"&&We=="italic"||de=="bold"&&We=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return We&&(de=We==400||We==="normal"?de==="italic"?"italic":"normal":We!=700&&We!=="bold"||de!=="normal"?(We==700?"bold":We)+""+de:"bold"),de};y.advancedAPI=function(de){var We=F===P.COMPAT;return We&&D.call(this),typeof de!="function"||(de(this),We&&V.call(this)),this},y.compatAPI=function(de){var We=F===P.ADVANCED;return We&&V.call(this),typeof de!="function"||(de(this),We&&D.call(this)),this},y.isAdvancedAPI=function(){return F===P.ADVANCED};var Q,G=function(de){if(F!==P.ADVANCED)throw new Error(de+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},W=y.roundToPrecision=y.__private__.roundToPrecision=function(de,We){var Ot=e||We;if(isNaN(de)||isNaN(Ot))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return de.toFixed(Ot).replace(/0+$/,"")};Q=y.hpf=y.__private__.hpf=typeof o=="number"?function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.hpf");return W(de,o)}:o==="smart"?function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.hpf");return W(de,de>-1&&de<1?16:5)}:function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.hpf");return W(de,16)};var te=y.f2=y.__private__.f2=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.f2");return W(de,2)},q=y.__private__.f3=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.f3");return W(de,3)},Y=y.scale=y.__private__.scale=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.scale");return F===P.COMPAT?de*Qe:F===P.ADVANCED?de:void 0},ee=function(de){return F===P.COMPAT?vl()-de:F===P.ADVANCED?de:void 0},ce=function(de){return Y(ee(de))};y.__private__.setPrecision=y.setPrecision=function(de){typeof parseInt(de,10)=="number"&&(e=parseInt(de,10))};var se,le="00000000000000000000000000000000",ie=y.__private__.getFileId=function(){return le},pe=y.__private__.setFileId=function(de){return le=de!==void 0&&/^[a-fA-F0-9]{32}$/.test(de)?de.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(fl=new Rx(p.userPermissions,p.userPassword,p.ownerPassword,le)),le};y.setFileId=function(de){return pe(de),this},y.getFileId=function(){return ie()};var ue=y.__private__.convertDateToPDFDate=function(de){var We=de.getTimezoneOffset(),Ot=We<0?"+":"-",Jt=Math.floor(Math.abs(We/60)),xn=Math.abs(We%60),Wn=[Ot,_e(Jt),"'",_e(xn),"'"].join("");return["D:",de.getFullYear(),_e(de.getMonth()+1),_e(de.getDate()),_e(de.getHours()),_e(de.getMinutes()),_e(de.getSeconds()),Wn].join("")},me=y.__private__.convertPDFDateToDate=function(de){var We=parseInt(de.substr(2,4),10),Ot=parseInt(de.substr(6,2),10)-1,Jt=parseInt(de.substr(8,2),10),xn=parseInt(de.substr(10,2),10),Wn=parseInt(de.substr(12,2),10),xr=parseInt(de.substr(14,2),10);return new Date(We,Ot,Jt,xn,Wn,xr,0)},Le=y.__private__.setCreationDate=function(de){var We;if(de===void 0&&(de=new Date),de instanceof Date)We=ue(de);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(de))throw new Error("Invalid argument passed to jsPDF.setCreationDate");We=de}return se=We},ae=y.__private__.getCreationDate=function(de){var We=se;return de==="jsDate"&&(We=me(se)),We};y.setCreationDate=function(de){return Le(de),this},y.getCreationDate=function(de){return ae(de)};var be,_e=y.__private__.padd2=function(de){return("0"+parseInt(de)).slice(-2)},$e=y.__private__.padd2Hex=function(de){return("00"+(de=de.toString())).substr(de.length)},Re=0,Ie=[],Ne=[],Je=0,je=[],ft=[],Et=!1,ke=Ne,Ye=function(){Re=0,Je=0,Ne=[],Ie=[],je=[],sn=En(),Mn=En()};y.__private__.setCustomOutputDestination=function(de){Et=!0,ke=de};var at=function(de){Et||(ke=de)};y.__private__.resetCustomOutputDestination=function(){Et=!1,ke=Ne};var He=y.__private__.out=function(de){return de=de.toString(),Je+=de.length+1,ke.push(de),ke},Tt=y.__private__.write=function(de){return He(arguments.length===1?de.toString():Array.prototype.join.call(arguments," "))},Ut=y.__private__.getArrayBuffer=function(de){for(var We=de.length,Ot=new ArrayBuffer(We),Jt=new Uint8Array(Ot);We--;)Jt[We]=de.charCodeAt(We);return Ot},Rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Rt};var Bt=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(de){return Bt=F===P.ADVANCED?de/Qe:de,this};var Ht,xt=y.__private__.getFontSize=y.getFontSize=function(){return F===P.COMPAT?Bt:Bt*Qe},Zt=t.R2L||!1;y.__private__.setR2L=y.setR2L=function(de){return Zt=de,this},y.__private__.getR2L=y.getR2L=function(){return Zt};var un,Ft=y.__private__.setZoomMode=function(de){var We=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(de))Ht=de;else if(isNaN(de)){if(We.indexOf(de)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+de+'" is not recognized.');Ht=de}else Ht=parseInt(de,10)};y.__private__.getZoomMode=function(){return Ht};var mt,Be=y.__private__.setPageMode=function(de){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(de)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+de+'" is not recognized.');un=de};y.__private__.getPageMode=function(){return un};var ze=y.__private__.setLayoutMode=function(de){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(de)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+de+'" is not recognized.');mt=de};y.__private__.getLayoutMode=function(){return mt},y.__private__.setDisplayMode=y.setDisplayMode=function(de,We,Ot){return Ft(de),ze(We),Be(Ot),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(de){if(Object.keys(it).indexOf(de)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[de]},y.__private__.getDocumentProperties=function(){return it},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(de){for(var We in it)it.hasOwnProperty(We)&&de[We]&&(it[We]=de[We]);return this},y.__private__.setDocumentProperty=function(de,We){if(Object.keys(it).indexOf(de)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[de]=We};var bt,Qe,St,yt,Xe,_t={},Gt={},gt=[],hn={},rr={},br={},Qr={},hr=null,Kn=0,ur=[],ni=new ine(y),us=t.hotfixes||[],bi={},is={},Fs=[],zr=function de(We,Ot,Jt,xn,Wn,xr){if(!(this instanceof de))return new de(We,Ot,Jt,xn,Wn,xr);isNaN(We)&&(We=1),isNaN(Ot)&&(Ot=0),isNaN(Jt)&&(Jt=0),isNaN(xn)&&(xn=1),isNaN(Wn)&&(Wn=0),isNaN(xr)&&(xr=0),this._matrix=[We,Ot,Jt,xn,Wn,xr]};Object.defineProperty(zr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(de){this._matrix[0]=de}}),Object.defineProperty(zr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(de){this._matrix[1]=de}}),Object.defineProperty(zr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(de){this._matrix[2]=de}}),Object.defineProperty(zr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(de){this._matrix[3]=de}}),Object.defineProperty(zr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(de){this._matrix[4]=de}}),Object.defineProperty(zr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(de){this._matrix[5]=de}}),Object.defineProperty(zr.prototype,"a",{get:function(){return this._matrix[0]},set:function(de){this._matrix[0]=de}}),Object.defineProperty(zr.prototype,"b",{get:function(){return this._matrix[1]},set:function(de){this._matrix[1]=de}}),Object.defineProperty(zr.prototype,"c",{get:function(){return this._matrix[2]},set:function(de){this._matrix[2]=de}}),Object.defineProperty(zr.prototype,"d",{get:function(){return this._matrix[3]},set:function(de){this._matrix[3]=de}}),Object.defineProperty(zr.prototype,"e",{get:function(){return this._matrix[4]},set:function(de){this._matrix[4]=de}}),Object.defineProperty(zr.prototype,"f",{get:function(){return this._matrix[5]},set:function(de){this._matrix[5]=de}}),Object.defineProperty(zr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(zr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(zr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(zr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),zr.prototype.join=function(de){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(de)},zr.prototype.multiply=function(de){var We=de.sx*this.sx+de.shy*this.shx,Ot=de.sx*this.shy+de.shy*this.sy,Jt=de.shx*this.sx+de.sy*this.shx,xn=de.shx*this.shy+de.sy*this.sy,Wn=de.tx*this.sx+de.ty*this.shx+this.tx,xr=de.tx*this.shy+de.ty*this.sy+this.ty;return new zr(We,Ot,Jt,xn,Wn,xr)},zr.prototype.decompose=function(){var de=this.sx,We=this.shy,Ot=this.shx,Jt=this.sy,xn=this.tx,Wn=this.ty,xr=Math.sqrt(de*de+We*We),ei=(de/=xr)*Ot+(We/=xr)*Jt;Ot-=de*ei,Jt-=We*ei;var Ci=Math.sqrt(Ot*Ot+Jt*Jt);return ei/=Ci,de*(Jt/=Ci)<We*(Ot/=Ci)&&(de=-de,We=-We,ei=-ei,xr=-xr),{scale:new zr(xr,0,0,Ci,0,0),translate:new zr(1,0,0,1,xn,Wn),rotate:new zr(de,We,-We,de,0,0),skew:new zr(1,0,ei,1,0,0)}},zr.prototype.toString=function(de){return this.join(" ")},zr.prototype.inversed=function(){var de=this.sx,We=this.shy,Ot=this.shx,Jt=this.sy,xn=this.tx,Wn=this.ty,xr=1/(de*Jt-We*Ot),ei=Jt*xr,Ci=-We*xr,_s=-Ot*xr,ts=de*xr;return new zr(ei,Ci,_s,ts,-ei*xn-_s*Wn,-Ci*xn-ts*Wn)},zr.prototype.applyToPoint=function(de){var We=de.x*this.sx+de.y*this.shx+this.tx,Ot=de.x*this.shy+de.y*this.sy+this.ty;return new Xd(We,Ot)},zr.prototype.applyToRectangle=function(de){var We=this.applyToPoint(de),Ot=this.applyToPoint(new Xd(de.x+de.w,de.y+de.h));return new Xh(We.x,We.y,Ot.x-We.x,Ot.y-We.y)},zr.prototype.clone=function(){var de=this.sx,We=this.shy,Ot=this.shx,Jt=this.sy,xn=this.tx,Wn=this.ty;return new zr(de,We,Ot,Jt,xn,Wn)},y.Matrix=zr;var ss=y.matrixMult=function(de,We){return We.multiply(de)},Zi=new zr(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Zi;var en=function(de,We){if(!rr[de]){var Ot=(We instanceof P1?"Sh":"P")+(Object.keys(hn).length+1).toString(10);We.id=Ot,rr[de]=Ot,hn[Ot]=We,ni.publish("addPattern",We)}};y.ShadingPattern=P1,y.TilingPattern=Zx,y.addShadingPattern=function(de,We){return G("addShadingPattern()"),en(de,We),this},y.beginTilingPattern=function(de){G("beginTilingPattern()"),Xu(de.boundingBox[0],de.boundingBox[1],de.boundingBox[2]-de.boundingBox[0],de.boundingBox[3]-de.boundingBox[1],de.matrix)},y.endTilingPattern=function(de,We){G("endTilingPattern()"),We.stream=ft[be].join(`
`),en(de,We),ni.publish("endTilingPattern",We),Fs.pop().restore()};var dn=y.__private__.newObject=function(){var de=En();return Vn(de,!0),de},En=y.__private__.newObjectDeferred=function(){return Re++,Ie[Re]=function(){return Je},Re},Vn=function(de,We){return We=typeof We=="boolean"&&We,Ie[de]=Je,We&&He(de+" 0 obj"),de},Dt=y.__private__.newAdditionalObject=function(){var de={objId:En(),content:""};return je.push(de),de},sn=En(),Mn=En(),Rn=y.__private__.decodeColorString=function(de){var We=de.split(" ");if(We.length!==2||We[1]!=="g"&&We[1]!=="G")We.length===5&&(We[4]==="k"||We[4]==="K")&&(We=[(1-We[0])*(1-We[3]),(1-We[1])*(1-We[3]),(1-We[2])*(1-We[3]),"r"]);else{var Ot=parseFloat(We[0]);We=[Ot,Ot,Ot,"r"]}for(var Jt="#",xn=0;xn<3;xn++)Jt+=("0"+Math.floor(255*parseFloat(We[xn])).toString(16)).slice(-2);return Jt},er=y.__private__.encodeColorString=function(de){var We;typeof de=="string"&&(de={ch1:de});var Ot=de.ch1,Jt=de.ch2,xn=de.ch3,Wn=de.ch4,xr=de.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ot=="string"&&Ot.charAt(0)!=="#"){var ei=new Vge(Ot);if(ei.ok)Ot=ei.toHex();else if(!/^\d*\.?\d*$/.test(Ot))throw new Error('Invalid color "'+Ot+'" passed to jsPDF.encodeColorString.')}if(typeof Ot=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ot)&&(Ot="#"+Ot[1]+Ot[1]+Ot[2]+Ot[2]+Ot[3]+Ot[3]),typeof Ot=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ot)){var Ci=parseInt(Ot.substr(1),16);Ot=Ci>>16&255,Jt=Ci>>8&255,xn=255&Ci}if(Jt===void 0||Wn===void 0&&Ot===Jt&&Jt===xn)if(typeof Ot=="string")We=Ot+" "+xr[0];else switch(de.precision){case 2:We=te(Ot/255)+" "+xr[0];break;case 3:default:We=q(Ot/255)+" "+xr[0]}else if(Wn===void 0||Ho(Wn)==="object"){if(Wn&&!isNaN(Wn.a)&&Wn.a===0)return We=["1.","1.","1.",xr[1]].join(" ");if(typeof Ot=="string")We=[Ot,Jt,xn,xr[1]].join(" ");else switch(de.precision){case 2:We=[te(Ot/255),te(Jt/255),te(xn/255),xr[1]].join(" ");break;default:case 3:We=[q(Ot/255),q(Jt/255),q(xn/255),xr[1]].join(" ")}}else if(typeof Ot=="string")We=[Ot,Jt,xn,Wn,xr[2]].join(" ");else switch(de.precision){case 2:We=[te(Ot),te(Jt),te(xn),te(Wn),xr[2]].join(" ");break;case 3:default:We=[q(Ot),q(Jt),q(xn),q(Wn),xr[2]].join(" ")}return We},Qn=y.__private__.getFilters=function(){return a},Nr=y.__private__.putStream=function(de){var We=(de=de||{}).data||"",Ot=de.filters||Qn(),Jt=de.alreadyAppliedFilters||[],xn=de.addLength1||!1,Wn=We.length,xr=de.objectId,ei=function(Ml){return Ml};if(p!==null&&xr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ei=fl.encryptor(xr,0));var Ci={};Ot===!0&&(Ot=["FlateEncode"]);var _s=de.additionalKeyValues||[],ts=(Ci=xs.API.processDataByFilters!==void 0?xs.API.processDataByFilters(We,Ot):{data:We,reverseChain:[]}).reverseChain+(Array.isArray(Jt)?Jt.join(" "):Jt.toString());if(Ci.data.length!==0&&(_s.push({key:"Length",value:Ci.data.length}),xn===!0&&_s.push({key:"Length1",value:Wn})),ts.length!=0)if(ts.split("/").length-1==1)_s.push({key:"Filter",value:ts});else{_s.push({key:"Filter",value:"["+ts+"]"});for(var zn=0;zn<_s.length;zn+=1)if(_s[zn].key==="DecodeParms"){for(var na=[],wa=0;wa<Ci.reverseChain.split("/").length-1;wa+=1)na.push("null");na.push(_s[zn].value),_s[zn].value="["+na.join(" ")+"]"}}He("<<");for(var xa=0;xa<_s.length;xa++)He("/"+_s[xa].key+" "+_s[xa].value);He(">>"),Ci.data.length!==0&&(He("stream"),He(ei(Ci.data)),He("endstream"))},si=y.__private__.putPage=function(de){var We=de.number,Ot=de.data,Jt=de.objId,xn=de.contentsObjId;Vn(Jt,!0),He("<</Type /Page"),He("/Parent "+de.rootDictionaryObjId+" 0 R"),He("/Resources "+de.resourceDictionaryObjId+" 0 R"),He("/MediaBox ["+parseFloat(Q(de.mediaBox.bottomLeftX))+" "+parseFloat(Q(de.mediaBox.bottomLeftY))+" "+Q(de.mediaBox.topRightX)+" "+Q(de.mediaBox.topRightY)+"]"),de.cropBox!==null&&He("/CropBox ["+Q(de.cropBox.bottomLeftX)+" "+Q(de.cropBox.bottomLeftY)+" "+Q(de.cropBox.topRightX)+" "+Q(de.cropBox.topRightY)+"]"),de.bleedBox!==null&&He("/BleedBox ["+Q(de.bleedBox.bottomLeftX)+" "+Q(de.bleedBox.bottomLeftY)+" "+Q(de.bleedBox.topRightX)+" "+Q(de.bleedBox.topRightY)+"]"),de.trimBox!==null&&He("/TrimBox ["+Q(de.trimBox.bottomLeftX)+" "+Q(de.trimBox.bottomLeftY)+" "+Q(de.trimBox.topRightX)+" "+Q(de.trimBox.topRightY)+"]"),de.artBox!==null&&He("/ArtBox ["+Q(de.artBox.bottomLeftX)+" "+Q(de.artBox.bottomLeftY)+" "+Q(de.artBox.topRightX)+" "+Q(de.artBox.topRightY)+"]"),typeof de.userUnit=="number"&&de.userUnit!==1&&He("/UserUnit "+de.userUnit),ni.publish("putPage",{objId:Jt,pageContext:ur[We],pageNumber:We,page:Ot}),He("/Contents "+xn+" 0 R"),He(">>"),He("endobj");var Wn=Ot.join(`
`);return F===P.ADVANCED&&(Wn+=`
Q`),Vn(xn,!0),Nr({data:Wn,filters:Qn(),objectId:xn}),He("endobj"),Jt},Tn=y.__private__.putPages=function(){var de,We,Ot=[];for(de=1;de<=Kn;de++)ur[de].objId=En(),ur[de].contentsObjId=En();for(de=1;de<=Kn;de++)Ot.push(si({number:de,data:ft[de],objId:ur[de].objId,contentsObjId:ur[de].contentsObjId,mediaBox:ur[de].mediaBox,cropBox:ur[de].cropBox,bleedBox:ur[de].bleedBox,trimBox:ur[de].trimBox,artBox:ur[de].artBox,userUnit:ur[de].userUnit,rootDictionaryObjId:sn,resourceDictionaryObjId:Mn}));Vn(sn,!0),He("<</Type /Pages");var Jt="/Kids [";for(We=0;We<Kn;We++)Jt+=Ot[We]+" 0 R ";He(Jt+"]"),He("/Count "+Kn),He(">>"),He("endobj"),ni.publish("postPutPages")},jt=function(de){ni.publish("putFont",{font:de,out:He,newObject:dn,putStream:Nr}),de.isAlreadyPutted!==!0&&(de.objectNumber=dn(),He("<<"),He("/Type /Font"),He("/BaseFont /"+Px(de.postScriptName)),He("/Subtype /Type1"),typeof de.encoding=="string"&&He("/Encoding /"+de.encoding),He("/FirstChar 32"),He("/LastChar 255"),He(">>"),He("endobj"))},Zn=function(){for(var de in _t)_t.hasOwnProperty(de)&&(A===!1||A===!0&&v.hasOwnProperty(de))&&jt(_t[de])},Vt=function(de){de.objectNumber=dn();var We=[];We.push({key:"Type",value:"/XObject"}),We.push({key:"Subtype",value:"/Form"}),We.push({key:"BBox",value:"["+[Q(de.x),Q(de.y),Q(de.x+de.width),Q(de.y+de.height)].join(" ")+"]"}),We.push({key:"Matrix",value:"["+de.matrix.toString()+"]"});var Ot=de.pages[1].join(`
`);Nr({data:Ot,additionalKeyValues:We,objectId:de.objectNumber}),He("endobj")},Xn=function(){for(var de in bi)bi.hasOwnProperty(de)&&Vt(bi[de])},Ur=function(de,We){var Ot,Jt=[],xn=1/(We-1);for(Ot=0;Ot<1;Ot+=xn)Jt.push(Ot);if(Jt.push(1),de[0].offset!=0){var Wn={offset:0,color:de[0].color};de.unshift(Wn)}if(de[de.length-1].offset!=1){var xr={offset:1,color:de[de.length-1].color};de.push(xr)}for(var ei="",Ci=0,_s=0;_s<Jt.length;_s++){for(Ot=Jt[_s];Ot>de[Ci+1].offset;)Ci++;var ts=de[Ci].offset,zn=(Ot-ts)/(de[Ci+1].offset-ts),na=de[Ci].color,wa=de[Ci+1].color;ei+=$e(Math.round((1-zn)*na[0]+zn*wa[0]).toString(16))+$e(Math.round((1-zn)*na[1]+zn*wa[1]).toString(16))+$e(Math.round((1-zn)*na[2]+zn*wa[2]).toString(16))}return ei.trim()},Cr=function(de,We){We||(We=21);var Ot=dn(),Jt=Ur(de.colors,We),xn=[];xn.push({key:"FunctionType",value:"0"}),xn.push({key:"Domain",value:"[0.0 1.0]"}),xn.push({key:"Size",value:"["+We+"]"}),xn.push({key:"BitsPerSample",value:"8"}),xn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nr({data:Jt,additionalKeyValues:xn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ot}),He("endobj"),de.objectNumber=dn(),He("<< /ShadingType "+de.type),He("/ColorSpace /DeviceRGB");var Wn="/Coords ["+Q(parseFloat(de.coords[0]))+" "+Q(parseFloat(de.coords[1]))+" ";de.type===2?Wn+=Q(parseFloat(de.coords[2]))+" "+Q(parseFloat(de.coords[3])):Wn+=Q(parseFloat(de.coords[2]))+" "+Q(parseFloat(de.coords[3]))+" "+Q(parseFloat(de.coords[4]))+" "+Q(parseFloat(de.coords[5])),He(Wn+="]"),de.matrix&&He("/Matrix ["+de.matrix.toString()+"]"),He("/Function "+Ot+" 0 R"),He("/Extend [true true]"),He(">>"),He("endobj")},Is=function(de,We){var Ot=En(),Jt=dn();We.push({resourcesOid:Ot,objectOid:Jt}),de.objectNumber=Jt;var xn=[];xn.push({key:"Type",value:"/Pattern"}),xn.push({key:"PatternType",value:"1"}),xn.push({key:"PaintType",value:"1"}),xn.push({key:"TilingType",value:"1"}),xn.push({key:"BBox",value:"["+de.boundingBox.map(Q).join(" ")+"]"}),xn.push({key:"XStep",value:Q(de.xStep)}),xn.push({key:"YStep",value:Q(de.yStep)}),xn.push({key:"Resources",value:Ot+" 0 R"}),de.matrix&&xn.push({key:"Matrix",value:"["+de.matrix.toString()+"]"}),Nr({data:de.stream,additionalKeyValues:xn,objectId:de.objectNumber}),He("endobj")},Bo=function(de){var We;for(We in hn)hn.hasOwnProperty(We)&&(hn[We]instanceof P1?Cr(hn[We]):hn[We]instanceof Zx&&Is(hn[We],de))},Qs=function(de){for(var We in de.objectNumber=dn(),He("<<"),de)switch(We){case"opacity":He("/ca "+te(de[We]));break;case"stroke-opacity":He("/CA "+te(de[We]))}He(">>"),He("endobj")},xh=function(){var de;for(de in br)br.hasOwnProperty(de)&&Qs(br[de])},zc=function(){for(var de in He("/XObject <<"),bi)bi.hasOwnProperty(de)&&bi[de].objectNumber>=0&&He("/"+de+" "+bi[de].objectNumber+" 0 R");ni.publish("putXobjectDict"),He(">>")},zd=function(){fl.oid=dn(),He("<<"),He("/Filter /Standard"),He("/V "+fl.v),He("/R "+fl.r),He("/U <"+fl.toHexString(fl.U)+">"),He("/O <"+fl.toHexString(fl.O)+">"),He("/P "+fl.P),He(">>"),He("endobj")},eg=function(){for(var de in He("/Font <<"),_t)_t.hasOwnProperty(de)&&(A===!1||A===!0&&v.hasOwnProperty(de))&&He("/"+de+" "+_t[de].objectNumber+" 0 R");He(">>")},$d=function(){if(Object.keys(hn).length>0){for(var de in He("/Shading <<"),hn)hn.hasOwnProperty(de)&&hn[de]instanceof P1&&hn[de].objectNumber>=0&&He("/"+de+" "+hn[de].objectNumber+" 0 R");ni.publish("putShadingPatternDict"),He(">>")}},Df=function(de){if(Object.keys(hn).length>0){for(var We in He("/Pattern <<"),hn)hn.hasOwnProperty(We)&&hn[We]instanceof y.TilingPattern&&hn[We].objectNumber>=0&&hn[We].objectNumber<de&&He("/"+We+" "+hn[We].objectNumber+" 0 R");ni.publish("putTilingPatternDict"),He(">>")}},Uf=function(){if(Object.keys(br).length>0){var de;for(de in He("/ExtGState <<"),br)br.hasOwnProperty(de)&&br[de].objectNumber>=0&&He("/"+de+" "+br[de].objectNumber+" 0 R");ni.publish("putGStateDict"),He(">>")}},za=function(de){Vn(de.resourcesOid,!0),He("<<"),He("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),eg(),$d(),Df(de.objectOid),Uf(),zc(),He(">>"),He("endobj")},Rp=function(){var de=[];Zn(),xh(),Xn(),Bo(de),ni.publish("putResources"),de.forEach(za),za({resourcesOid:Mn,objectOid:Number.MAX_SAFE_INTEGER}),ni.publish("postPutResources")},tg=function(){ni.publish("putAdditionalObjects");for(var de=0;de<je.length;de++){var We=je[de];Vn(We.objId,!0),He(We.content),He("endobj")}ni.publish("postPutAdditionalObjects")},Pp=function(de){Gt[de.fontName]=Gt[de.fontName]||{},Gt[de.fontName][de.fontStyle]=de.id},Fp=function(de,We,Ot,Jt,xn){var Wn={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:de,fontName:We,fontStyle:Ot,encoding:Jt,isStandardFont:xn||!1,metadata:{}};return ni.publish("addFont",{font:Wn,instance:this}),_t[Wn.id]=Wn,Pp(Wn),Wn.id},_c=function(de){for(var We=0,Ot=Rt.length;We<Ot;We++){var Jt=Fp.call(this,de[We][0],de[We][1],de[We][2],Rt[We][3],!0);A===!1&&(v[Jt]=!0);var xn=de[We][0].split("-");Pp({id:Jt,fontName:xn[0],fontStyle:xn[1]||""})}ni.publish("addFonts",{fonts:_t,dictionary:Gt})},po=function(de){return de.foo=function(){try{return de.apply(this,arguments)}catch(Jt){var We=Jt.stack||"";~We.indexOf(" at ")&&(We=We.split(" at ")[1]);var Ot="Error in function "+We.split(`
`)[0].split("<")[0]+": "+Jt.message;if(!Cs.console)throw new Error(Ot);Cs.console.error(Ot,Jt),Cs.alert&&alert(Ot)}},de.foo.bar=de,de.foo},Qi=function(de,We){var Ot,Jt,xn,Wn,xr,ei,Ci,_s,ts;if(xn=(We=We||{}).sourceEncoding||"Unicode",xr=We.outputEncoding,(We.autoencode||xr)&&_t[bt].metadata&&_t[bt].metadata[xn]&&_t[bt].metadata[xn].encoding&&(Wn=_t[bt].metadata[xn].encoding,!xr&&_t[bt].encoding&&(xr=_t[bt].encoding),!xr&&Wn.codePages&&(xr=Wn.codePages[0]),typeof xr=="string"&&(xr=Wn[xr]),xr)){for(Ci=!1,ei=[],Ot=0,Jt=de.length;Ot<Jt;Ot++)(_s=xr[de.charCodeAt(Ot)])?ei.push(String.fromCharCode(_s)):ei.push(de[Ot]),ei[Ot].charCodeAt(0)>>8&&(Ci=!0);de=ei.join("")}for(Ot=de.length;Ci===void 0&&Ot!==0;)de.charCodeAt(Ot-1)>>8&&(Ci=!0),Ot--;if(!Ci)return de;for(ei=We.noBOM?[]:[254,255],Ot=0,Jt=de.length;Ot<Jt;Ot++){if((ts=(_s=de.charCodeAt(Ot))>>8)>>8)throw new Error("Character at position "+Ot+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ei.push(ts),ei.push(_s-(ts<<8))}return String.fromCharCode.apply(void 0,ei)},$c=y.__private__.pdfEscape=y.pdfEscape=function(de,We){return Qi(de,We).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zf=y.__private__.beginPage=function(de){ft[++Kn]=[],ur[Kn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(de[0]),topRightY:Number(de[1])}},Tu(Kn),at(ft[be])},ng=function(de,We){var Ot,Jt,xn;switch(n=We||n,typeof de=="string"&&(Ot=I(de.toLowerCase()),Array.isArray(Ot)&&(Jt=Ot[0],xn=Ot[1])),Array.isArray(de)&&(Jt=de[0]*Qe,xn=de[1]*Qe),isNaN(Jt)&&(Jt=i[0],xn=i[1]),(Jt>14400||xn>14400)&&(ka.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Jt=Math.min(14400,Jt),xn=Math.min(14400,xn)),i=[Jt,xn],n.substr(0,1)){case"l":xn>Jt&&(i=[xn,Jt]);break;case"p":Jt>xn&&(i=[xn,Jt])}zf(i),Wd(Op),He(Wl),Em!==0&&He(Em+" J"),Yu!==0&&He(Yu+" j"),ni.publish("addPage",{pageNumber:Kn})},N_=function(de){de>0&&de<=Kn&&(ft.splice(de,1),ur.splice(de,1),Kn--,be>Kn&&(be=Kn),this.setPage(be))},Tu=function(de){de>0&&de<=Kn&&(be=de)},Cm=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return ft.length-1},w0=function(de,We,Ot){var Jt,xn=void 0;return Ot=Ot||{},de=de!==void 0?de:_t[bt].fontName,We=We!==void 0?We:_t[bt].fontStyle,Jt=de.toLowerCase(),Gt[Jt]!==void 0&&Gt[Jt][We]!==void 0?xn=Gt[Jt][We]:Gt[de]!==void 0&&Gt[de][We]!==void 0?xn=Gt[de][We]:Ot.disableWarning===!1&&ka.warn("Unable to look up font label for font '"+de+"', '"+We+"'. Refer to getFontList() for available fonts."),xn||Ot.noFallback||(xn=Gt.times[We])==null&&(xn=Gt.times.normal),xn},$f=y.__private__.putInfo=function(){var de=dn(),We=function(Jt){return Jt};for(var Ot in p!==null&&(We=fl.encryptor(de,0)),He("<<"),He("/Producer ("+$c(We("jsPDF "+xs.version))+")"),it)it.hasOwnProperty(Ot)&&it[Ot]&&He("/"+Ot.substr(0,1).toUpperCase()+Ot.substr(1)+" ("+$c(We(it[Ot]))+")");He("/CreationDate ("+$c(We(se))+")"),He(">>"),He("endobj")},yr=y.__private__.putCatalog=function(de){var We=(de=de||{}).rootDictionaryObjId||sn;switch(dn(),He("<<"),He("/Type /Catalog"),He("/Pages "+We+" 0 R"),Ht||(Ht="fullwidth"),Ht){case"fullwidth":He("/OpenAction [3 0 R /FitH null]");break;case"fullheight":He("/OpenAction [3 0 R /FitV null]");break;case"fullpage":He("/OpenAction [3 0 R /Fit]");break;case"original":He("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ot=""+Ht;Ot.substr(Ot.length-1)==="%"&&(Ht=parseInt(Ht)/100),typeof Ht=="number"&&He("/OpenAction [3 0 R /XYZ null null "+te(Ht)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":He("/PageLayout /OneColumn");break;case"single":He("/PageLayout /SinglePage");break;case"two":case"twoleft":He("/PageLayout /TwoColumnLeft");break;case"tworight":He("/PageLayout /TwoColumnRight")}un&&He("/PageMode /"+un),ni.publish("putCatalog"),He(">>"),He("endobj")},Bs=y.__private__.putTrailer=function(){He("trailer"),He("<<"),He("/Size "+(Re+1)),He("/Root "+Re+" 0 R"),He("/Info "+(Re-1)+" 0 R"),p!==null&&He("/Encrypt "+fl.oid+" 0 R"),He("/ID [ <"+le+"> <"+le+"> ]"),He(">>")},Ms=y.__private__.putHeader=function(){He("%PDF-"+C),He("%")},ou=y.__private__.putXRef=function(){var de="0000000000";He("xref"),He("0 "+(Re+1)),He("0000000000 65535 f ");for(var We=1;We<=Re;We++)typeof Ie[We]=="function"?He((de+Ie[We]()).slice(-10)+" 00000 n "):Ie[We]!==void 0?He((de+Ie[We]).slice(-10)+" 00000 n "):He("0000000000 00000 n ")},au=y.__private__.buildDocument=function(){Ye(),at(Ne),ni.publish("buildDocument"),Ms(),Tn(),tg(),Rp(),p!==null&&zd(),$f(),yr();var de=Je;return ou(),Bs(),He("startxref"),He(""+de),He("%%EOF"),at(ft[be]),Ne.join(`
`)},es=y.__private__.getBlob=function(de){return new Blob([Ut(de)],{type:"application/pdf"})},Vd=y.output=y.__private__.output=po(function(de,We){switch(typeof(We=We||{})=="string"?We={filename:We}:We.filename=We.filename||"generated.pdf",de){case void 0:return au();case"save":y.save(We.filename);break;case"arraybuffer":return Ut(au());case"blob":return es(au());case"bloburi":case"bloburl":if(Cs.URL!==void 0&&typeof Cs.URL.createObjectURL=="function")return Cs.URL&&Cs.URL.createObjectURL(es(au()))||void 0;ka.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ot="",Jt=au();try{Ot=oz(Jt)}catch{Ot=oz(unescape(encodeURIComponent(Jt)))}return"data:application/pdf;filename="+We.filename+";base64,"+Ot;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cs)==="[object Window]"){var xn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Wn=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';We.pdfObjectUrl&&(xn=We.pdfObjectUrl,Wn="");var xr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xn+'"'+Wn+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(We)+");<\/script></body></html>",ei=Cs.open();return ei!==null&&ei.document.write(xr),ei}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cs)==="[object Window]"){var Ci='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(We.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+We.filename+'" width="500px" height="400px" /></body></html>',_s=Cs.open();if(_s!==null){_s.document.write(Ci);var ts=this;_s.document.documentElement.querySelector("#pdfViewer").onload=function(){_s.document.title=We.filename,_s.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ts.output("bloburl"))}}return _s}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cs)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",We)+'"></iframe></body></html>',na=Cs.open();if(na!==null&&(na.document.write(zn),na.document.title=We.filename),na||typeof safari>"u")return na;break;case"datauri":case"dataurl":return Cs.document.location.href=this.output("datauristring",We);default:return null}}),Hd=function(de){return Array.isArray(us)===!0&&us.indexOf(de)>-1};switch(r){case"pt":Qe=1;break;case"mm":Qe=72/25.4;break;case"cm":Qe=72/2.54;break;case"in":Qe=72;break;case"px":Qe=Hd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qe=12;break;case"ex":Qe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Qe=r}var fl=null;Le(),pe();var bc=function(de){return p!==null?fl.encryptor(de,0):function(We){return We}},jo=y.__private__.getPageInfo=y.getPageInfo=function(de){if(isNaN(de)||de%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ur[de].objId,pageNumber:de,pageContext:ur[de]}},ir=y.__private__.getPageInfoByObjId=function(de){if(isNaN(de)||de%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var We in ur)if(ur[We].objId===de)break;return jo(We)},Gd=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:ur[be].objId,pageNumber:be,pageContext:ur[be]}};y.addPage=function(){return ng.apply(this,arguments),this},y.setPage=function(){return Tu.apply(this,arguments),at.call(this,ft[be]),this},y.insertPage=function(de){return this.addPage(),this.movePage(be,de),this},y.movePage=function(de,We){var Ot,Jt;if(de>We){Ot=ft[de],Jt=ur[de];for(var xn=de;xn>We;xn--)ft[xn]=ft[xn-1],ur[xn]=ur[xn-1];ft[We]=Ot,ur[We]=Jt,this.setPage(We)}else if(de<We){Ot=ft[de],Jt=ur[de];for(var Wn=de;Wn<We;Wn++)ft[Wn]=ft[Wn+1],ur[Wn]=ur[Wn+1];ft[We]=Ot,ur[We]=Jt,this.setPage(We)}return this},y.deletePage=function(){return N_.apply(this,arguments),this},y.__private__.text=y.text=function(de,We,Ot,Jt,xn){var Wn,xr,ei,Ci,_s,ts,zn,na,wa,xa=(Jt=Jt||{}).scope||this;if(typeof de=="number"&&typeof We=="number"&&(typeof Ot=="string"||Array.isArray(Ot))){var Ml=Ot;Ot=We,We=de,de=Ml}if(arguments[3]instanceof zr?(G("The transform parameter of text() with a Matrix value"),wa=xn):(ei=arguments[4],Ci=arguments[5],Ho(zn=arguments[3])==="object"&&zn!==null||(typeof ei=="string"&&(Ci=ei,ei=null),typeof zn=="string"&&(Ci=zn,zn=null),typeof zn=="number"&&(ei=zn,zn=null),Jt={flags:zn,angle:ei,align:Ci})),isNaN(We)||isNaN(Ot)||de==null)throw new Error("Invalid arguments passed to jsPDF.text");if(de.length===0)return xa;var fa="",el=!1,Vc=typeof Jt.lineHeightFactor=="number"?Jt.lineHeightFactor:Kd,Hc=xa.internal.scaleFactor;function zp(Ao){return Ao=Ao.split("	").join(Array(Jt.TabLen||9).join(" ")),$c(Ao,zn)}function Eh(Ao){for(var Ko,ra=Ao.concat(),tl=[],id=ra.length;id--;)typeof(Ko=ra.shift())=="string"?tl.push(Ko):Array.isArray(Ao)&&(Ko.length===1||Ko[1]===void 0&&Ko[2]===void 0)?tl.push(Ko[0]):tl.push([Ko[0],Ko[1],Ko[2]]);return tl}function $p(Ao,Ko){var ra;if(typeof Ao=="string")ra=Ko(Ao)[0];else if(Array.isArray(Ao)){for(var tl,id,Qf=Ao.concat(),Tc=[],jp=Qf.length;jp--;)typeof(tl=Qf.shift())=="string"?Tc.push(Ko(tl)[0]):Array.isArray(tl)&&typeof tl[0]=="string"&&(id=Ko(tl[0],tl[1],tl[2]),Tc.push([id[0],id[1],id[2]]));ra=Tc}return ra}var sg=!1,ed=!0;if(typeof de=="string")sg=!0;else if(Array.isArray(de)){var Sm=de.concat();xr=[];for(var Vp,Gc=Sm.length;Gc--;)(typeof(Vp=Sm.shift())!="string"||Array.isArray(Vp)&&typeof Vp[0]!="string")&&(ed=!1);sg=ed}if(sg===!1)throw new Error('Type of text must be string or Array. "'+de+'" is not recognized.');typeof de=="string"&&(de=de.match(/[\r?\n]/)?de.split(/\r\n|\r|\n/g):[de]);var Hf=Bt/xa.internal.scaleFactor,og=Hf*(Vc-1);switch(Jt.baseline){case"bottom":Ot-=og;break;case"top":Ot+=Hf-og;break;case"hanging":Ot+=Hf-2*og;break;case"middle":Ot+=Hf/2-og}if((ts=Jt.maxWidth||0)>0&&(typeof de=="string"?de=xa.splitTextToSize(de,ts):Object.prototype.toString.call(de)==="[object Array]"&&(de=de.reduce(function(Ao,Ko){return Ao.concat(xa.splitTextToSize(Ko,ts))},[]))),Wn={text:de,x:We,y:Ot,options:Jt,mutex:{pdfEscape:$c,activeFontKey:bt,fonts:_t,activeFontSize:Bt}},ni.publish("preProcessText",Wn),de=Wn.text,ei=(Jt=Wn.options).angle,!(wa instanceof zr)&&ei&&typeof ei=="number"){ei*=Math.PI/180,Jt.rotationDirection===0&&(ei=-ei),F===P.ADVANCED&&(ei=-ei);var ag=Math.cos(ei),Tm=Math.sin(ei);wa=new zr(ag,Tm,-Tm,ag,0,0)}else ei&&ei instanceof zr&&(wa=ei);F!==P.ADVANCED||wa||(wa=Zi),(_s=Jt.charSpace||Vf)!==void 0&&(fa+=Q(Y(_s))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(na=Jt.horizontalScale)!==void 0&&(fa+=Q(100*na)+` Tz
`),Jt.lang;var Qc=-1,Hp=Jt.renderingMode!==void 0?Jt.renderingMode:Jt.stroke,Im=xa.internal.getCurrentPageInfo().pageContext;switch(Hp){case 0:case!1:case"fill":Qc=0;break;case 1:case!0:case"stroke":Qc=1;break;case 2:case"fillThenStroke":Qc=2;break;case 3:case"invisible":Qc=3;break;case 4:case"fillAndAddForClipping":Qc=4;break;case 5:case"strokeAndAddPathForClipping":Qc=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qc=6;break;case 7:case"addToPathForClipping":Qc=7}var Gp=Im.usedRenderingMode!==void 0?Im.usedRenderingMode:-1;Qc!==-1?fa+=Qc+` Tr
`:Gp!==-1&&(fa+=`0 Tr
`),Qc!==-1&&(Im.usedRenderingMode=Qc),Ci=Jt.align||"left";var Iu,lg=Bt*Vc,Bm=xa.internal.pageSize.getWidth(),cg=_t[bt];_s=Jt.charSpace||Vf,ts=Jt.maxWidth||0,zn=Object.assign({autoencode:!0,noBOM:!0},Jt.flags);var td=[];if(Object.prototype.toString.call(de)==="[object Array]"){var Ll;xr=Eh(de),Ci!=="left"&&(Iu=xr.map(function(Ao){return xa.getStringUnitWidth(Ao,{font:cg,charSpace:_s,fontSize:Bt,doKerning:!1})*Bt/Hc}));var hu,Zu=0;if(Ci==="right"){We-=Iu[0],de=[],Gc=xr.length;for(var Ju=0;Ju<Gc;Ju++)Ju===0?(hu=qu(We),Ll=Cc(Ot)):(hu=Y(Zu-Iu[Ju]),Ll=-lg),de.push([xr[Ju],hu,Ll]),Zu=Iu[Ju]}else if(Ci==="center"){We-=Iu[0]/2,de=[],Gc=xr.length;for(var Bu=0;Bu<Gc;Bu++)Bu===0?(hu=qu(We),Ll=Cc(Ot)):(hu=Y((Zu-Iu[Bu])/2),Ll=-lg),de.push([xr[Bu],hu,Ll]),Zu=Iu[Bu]}else if(Ci==="left"){de=[],Gc=xr.length;for(var Sh=0;Sh<Gc;Sh++)de.push(xr[Sh])}else{if(Ci!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');de=[],Gc=xr.length,ts=ts!==0?ts:Bm;for(var Ec=0;Ec<Gc;Ec++)Ll=Ec===0?Cc(Ot):-lg,hu=Ec===0?qu(We):0,Ec<Gc-1?td.push(Q(Y((ts-Iu[Ec])/(xr[Ec].split(" ").length-1)))):td.push(0),de.push([xr[Ec],hu,Ll])}}var nd=typeof Jt.R2L=="boolean"?Jt.R2L:Zt;nd===!0&&(de=$p(de,function(Ao,Ko,ra){return[Ao.split("").reverse().join(""),Ko,ra]})),Wn={text:de,x:We,y:Ot,options:Jt,mutex:{pdfEscape:$c,activeFontKey:bt,fonts:_t,activeFontSize:Bt}},ni.publish("postProcessText",Wn),de=Wn.text,el=Wn.mutex.isHex||!1;var Jd=_t[bt].encoding;Jd!=="WinAnsiEncoding"&&Jd!=="StandardEncoding"||(de=$p(de,function(Ao,Ko,ra){return[zp(Ao),Ko,ra]})),xr=Eh(de),de=[];for(var pa,Rl,Oa,ef=0,Qp=1,tf=Array.isArray(xr[0])?Qp:ef,du="",Gf=function(Ao,Ko,ra){var tl="";return ra instanceof zr?(ra=typeof Jt.angle=="number"?ss(ra,new zr(1,0,0,1,Ao,Ko)):ss(new zr(1,0,0,1,Ao,Ko),ra),F===P.ADVANCED&&(ra=ss(new zr(1,0,0,-1,0,0),ra)),tl=ra.join(" ")+` Tm
`):tl=Q(Ao)+" "+Q(Ko)+` Td
`,tl},Sc=0;Sc<xr.length;Sc++){switch(du="",tf){case Qp:Oa=(el?"<":"(")+xr[Sc][0]+(el?">":")"),pa=parseFloat(xr[Sc][1]),Rl=parseFloat(xr[Sc][2]);break;case ef:Oa=(el?"<":"(")+xr[Sc]+(el?">":")"),pa=qu(We),Rl=Cc(Ot)}td!==void 0&&td[Sc]!==void 0&&(du=td[Sc]+` Tw
`),Sc===0?de.push(du+Gf(pa,Rl,wa)+Oa):tf===ef?de.push(du+Oa):tf===Qp&&de.push(du+Gf(pa,Rl,wa)+Oa)}de=tf===ef?de.join(` Tj
T* `):de.join(` Tj
`),de+=` Tj
`;var rd=`BT
/`;return rd+=bt+" "+Bt+` Tf
`,rd+=Q(Bt*Vc)+` TL
`,rd+=ji+`
`,rd+=fa,rd+=de,He(rd+="ET"),v[bt]=!0,xa};var di=y.__private__.clip=y.clip=function(de){return He(de==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return di("evenodd")},y.__private__.discardPath=y.discardPath=function(){return He("n"),this};var Kl=y.__private__.isValidStyle=function(de){var We=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(de)!==-1&&(We=!0),We};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(de){return Kl(de)&&(d=de),this};var Ui=y.__private__.getStyle=y.getStyle=function(de){var We=d;switch(de){case"D":case"S":We="S";break;case"F":We="f";break;case"FD":case"DF":We="B";break;case"f":case"f*":case"B":case"B*":We=de}return We},Qd=y.close=function(){return He("h"),this};y.stroke=function(){return He("S"),this},y.fill=function(de){return Fa("f",de),this},y.fillEvenOdd=function(de){return Fa("f*",de),this},y.fillStroke=function(de){return Fa("B",de),this},y.fillStrokeEvenOdd=function(de){return Fa("B*",de),this};var Fa=function(de,We){Ho(We)==="object"?jd(We,de):He(de)},Yr=function(de){de===null||F===P.ADVANCED&&de===void 0||(de=Ui(de),He(de))};function x0(de,We,Ot,Jt,xn){var Wn=new Zx(We||this.boundingBox,Ot||this.xStep,Jt||this.yStep,this.gState,xn||this.matrix);Wn.stream=this.stream;var xr=de+"$$"+this.cloneIndex+++"$$";return en(xr,Wn),Wn}var jd=function(de,We){var Ot=rr[de.key],Jt=hn[Ot];if(Jt instanceof P1)He("q"),He(_a(We)),Jt.gState&&y.setGState(Jt.gState),He(de.matrix.toString()+" cm"),He("/"+Ot+" sh"),He("Q");else if(Jt instanceof Zx){var xn=new zr(1,0,0,-1,0,vl());de.matrix&&(xn=xn.multiply(de.matrix||Zi),Ot=x0.call(Jt,de.key,de.boundingBox,de.xStep,de.yStep,xn).id),He("q"),He("/Pattern cs"),He("/"+Ot+" scn"),Jt.gState&&y.setGState(Jt.gState),He(We),He("Q")}},_a=function(de){switch(de){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wc=y.moveTo=function(de,We){return He(Q(Y(de))+" "+Q(ce(We))+" m"),this},lu=y.lineTo=function(de,We){return He(Q(Y(de))+" "+Q(ce(We))+" l"),this},xc=y.curveTo=function(de,We,Ot,Jt,xn,Wn){return He([Q(Y(de)),Q(ce(We)),Q(Y(Ot)),Q(ce(Jt)),Q(Y(xn)),Q(ce(Wn)),"c"].join(" ")),this};y.__private__.line=y.line=function(de,We,Ot,Jt,xn){if(isNaN(de)||isNaN(We)||isNaN(Ot)||isNaN(Jt)||!Kl(xn))throw new Error("Invalid arguments passed to jsPDF.line");return F===P.COMPAT?this.lines([[Ot-de,Jt-We]],de,We,[1,1],xn||"S"):this.lines([[Ot-de,Jt-We]],de,We,[1,1]).stroke()},y.__private__.lines=y.lines=function(de,We,Ot,Jt,xn,Wn){var xr,ei,Ci,_s,ts,zn,na,wa,xa,Ml,fa,el;if(typeof de=="number"&&(el=Ot,Ot=We,We=de,de=el),Jt=Jt||[1,1],Wn=Wn||!1,isNaN(We)||isNaN(Ot)||!Array.isArray(de)||!Array.isArray(Jt)||!Kl(xn)||typeof Wn!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wc(We,Ot),xr=Jt[0],ei=Jt[1],_s=de.length,Ml=We,fa=Ot,Ci=0;Ci<_s;Ci++)(ts=de[Ci]).length===2?(Ml=ts[0]*xr+Ml,fa=ts[1]*ei+fa,lu(Ml,fa)):(zn=ts[0]*xr+Ml,na=ts[1]*ei+fa,wa=ts[2]*xr+Ml,xa=ts[3]*ei+fa,Ml=ts[4]*xr+Ml,fa=ts[5]*ei+fa,xc(zn,na,wa,xa,Ml,fa));return Wn&&Qd(),Yr(xn),this},y.path=function(de){for(var We=0;We<de.length;We++){var Ot=de[We],Jt=Ot.c;switch(Ot.op){case"m":wc(Jt[0],Jt[1]);break;case"l":lu(Jt[0],Jt[1]);break;case"c":xc.apply(this,Jt);break;case"h":Qd()}}return this},y.__private__.rect=y.rect=function(de,We,Ot,Jt,xn){if(isNaN(de)||isNaN(We)||isNaN(Ot)||isNaN(Jt)||!Kl(xn))throw new Error("Invalid arguments passed to jsPDF.rect");return F===P.COMPAT&&(Jt=-Jt),He([Q(Y(de)),Q(ce(We)),Q(Y(Ot)),Q(Y(Jt)),"re"].join(" ")),Yr(xn),this},y.__private__.triangle=y.triangle=function(de,We,Ot,Jt,xn,Wn,xr){if(isNaN(de)||isNaN(We)||isNaN(Ot)||isNaN(Jt)||isNaN(xn)||isNaN(Wn)||!Kl(xr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ot-de,Jt-We],[xn-Ot,Wn-Jt],[de-xn,We-Wn]],de,We,[1,1],xr,!0),this},y.__private__.roundedRect=y.roundedRect=function(de,We,Ot,Jt,xn,Wn,xr){if(isNaN(de)||isNaN(We)||isNaN(Ot)||isNaN(Jt)||isNaN(xn)||isNaN(Wn)||!Kl(xr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ei=4/3*(Math.SQRT2-1);return xn=Math.min(xn,.5*Ot),Wn=Math.min(Wn,.5*Jt),this.lines([[Ot-2*xn,0],[xn*ei,0,xn,Wn-Wn*ei,xn,Wn],[0,Jt-2*Wn],[0,Wn*ei,-xn*ei,Wn,-xn,Wn],[2*xn-Ot,0],[-xn*ei,0,-xn,-Wn*ei,-xn,-Wn],[0,2*Wn-Jt],[0,-Wn*ei,xn*ei,-Wn,xn,-Wn]],de+xn,We,[1,1],xr,!0),this},y.__private__.ellipse=y.ellipse=function(de,We,Ot,Jt,xn){if(isNaN(de)||isNaN(We)||isNaN(Ot)||isNaN(Jt)||!Kl(xn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Wn=4/3*(Math.SQRT2-1)*Ot,xr=4/3*(Math.SQRT2-1)*Jt;return wc(de+Ot,We),xc(de+Ot,We-xr,de+Wn,We-Jt,de,We-Jt),xc(de-Wn,We-Jt,de-Ot,We-xr,de-Ot,We),xc(de-Ot,We+xr,de-Wn,We+Jt,de,We+Jt),xc(de+Wn,We+Jt,de+Ot,We+xr,de+Ot,We),Yr(xn),this},y.__private__.circle=y.circle=function(de,We,Ot,Jt){if(isNaN(de)||isNaN(We)||isNaN(Ot)||!Kl(Jt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(de,We,Ot,Ot,Jt)},y.setFont=function(de,We,Ot){return Ot&&(We=H(We,Ot)),bt=w0(de,We,{disableWarning:!1}),this};var ba=y.__private__.getFont=y.getFont=function(){return _t[w0.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var de,We,Ot={};for(de in Gt)if(Gt.hasOwnProperty(de))for(We in Ot[de]=[],Gt[de])Gt[de].hasOwnProperty(We)&&Ot[de].push(We);return Ot},y.addFont=function(de,We,Ot,Jt,xn){var Wn=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Wn.indexOf(arguments[3])!==-1?xn=arguments[3]:arguments[3]&&Wn.indexOf(arguments[3])==-1&&(Ot=H(Ot,Jt)),xn=xn||"Identity-H",Fp.call(this,de,We,Ot,xn)};var Kd,Op=t.lineWidth||.200025,cu=y.__private__.getLineWidth=y.getLineWidth=function(){return Op},Wd=y.__private__.setLineWidth=y.setLineWidth=function(de){return Op=de,He(Q(Y(de))+" w"),this};y.__private__.setLineDash=xs.API.setLineDash=xs.API.setLineDashPattern=function(de,We){if(de=de||[],We=We||0,isNaN(We)||!Array.isArray(de))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return de=de.map(function(Ot){return Q(Y(Ot))}).join(" "),We=Q(Y(We)),He("["+de+"] "+We+" d"),this};var Yh=y.__private__.getLineHeight=y.getLineHeight=function(){return Bt*Kd};y.__private__.getLineHeight=y.getLineHeight=function(){return Bt*Kd};var qd=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(de){return typeof(de=de||1.15)=="number"&&(Kd=de),this},uu=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Kd};qd(t.lineHeight);var qu=y.__private__.getHorizontalCoordinate=function(de){return Y(de)},Cc=y.__private__.getVerticalCoordinate=function(de){return F===P.ADVANCED?de:ur[be].mediaBox.topRightY-ur[be].mediaBox.bottomLeftY-Y(de)},Np=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(de){return Q(qu(de))},Yd=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(de){return Q(Cc(de))},Wl=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Rn(Wl)},y.__private__.setStrokeColor=y.setDrawColor=function(de,We,Ot,Jt){return Wl=er({ch1:de,ch2:We,ch3:Ot,ch4:Jt,pdfColorType:"draw",precision:2}),He(Wl),this};var rg=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Rn(rg)},y.__private__.setFillColor=y.setFillColor=function(de,We,Ot,Jt){return rg=er({ch1:de,ch2:We,ch3:Ot,ch4:Jt,pdfColorType:"fill",precision:2}),He(rg),this};var ji=t.textColor||"0 g",kp=y.__private__.getTextColor=y.getTextColor=function(){return Rn(ji)};y.__private__.setTextColor=y.setTextColor=function(de,We,Ot,Jt){return ji=er({ch1:de,ch2:We,ch3:Ot,ch4:Jt,pdfColorType:"text",precision:3}),this};var Vf=t.charSpace,k_=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(Vf||0)};y.__private__.setCharSpace=y.setCharSpace=function(de){if(isNaN(de))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vf=de,this};var Em=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(de){var We=y.CapJoinStyles[de];if(We===void 0)throw new Error("Line cap style of '"+de+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Em=We,He(We+" J"),this};var Yu=0;y.__private__.setLineJoin=y.setLineJoin=function(de){var We=y.CapJoinStyles[de];if(We===void 0)throw new Error("Line join style of '"+de+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yu=We,He(We+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(de){if(de=de||0,isNaN(de))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return He(Q(Y(de))+" M"),this},y.GState=m5,y.setGState=function(de){(de=typeof de=="string"?br[Qr[de]]:Ch(null,de)).equals(hr)||(He("/"+de.id+" gs"),hr=de)};var Ch=function(de,We){if(!de||!Qr[de]){var Ot=!1;for(var Jt in br)if(br.hasOwnProperty(Jt)&&br[Jt].equals(We)){Ot=!0;break}if(Ot)We=br[Jt];else{var xn="GS"+(Object.keys(br).length+1).toString(10);br[xn]=We,We.id=xn}return de&&(Qr[de]=We.id),ni.publish("addGState",We),We}};y.addGState=function(de,We){return Ch(de,We),this},y.saveGraphicsState=function(){return He("q"),gt.push({key:bt,size:Bt,color:ji}),this},y.restoreGraphicsState=function(){He("Q");var de=gt.pop();return bt=de.key,Bt=de.size,ji=de.color,hr=null,this},y.setCurrentTransformationMatrix=function(de){return He(de.toString()+" cm"),this},y.comment=function(de){return He("#"+de),this};var Xd=function(de,We){var Ot=de||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ot},set:function(Wn){isNaN(Wn)||(Ot=parseFloat(Wn))}});var Jt=We||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Jt},set:function(Wn){isNaN(Wn)||(Jt=parseFloat(Wn))}});var xn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xn},set:function(Wn){xn=Wn.toString()}}),this},Xh=function(de,We,Ot,Jt){Xd.call(this,de,We),this.type="rect";var xn=Ot||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xn},set:function(xr){isNaN(xr)||(xn=parseFloat(xr))}});var Wn=Jt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Wn},set:function(xr){isNaN(xr)||(Wn=parseFloat(xr))}}),this},Dp=function(){this.page=Kn,this.currentPage=be,this.pages=ft.slice(0),this.pagesContext=ur.slice(0),this.x=St,this.y=yt,this.matrix=Xe,this.width=Zd(be),this.height=vl(be),this.outputDestination=ke,this.id="",this.objectNumber=-1};Dp.prototype.restore=function(){Kn=this.page,be=this.currentPage,ur=this.pagesContext,ft=this.pages,St=this.x,yt=this.y,Xe=this.matrix,Up(be,this.width),ig(be,this.height),ke=this.outputDestination};var Xu=function(de,We,Ot,Jt,xn){Fs.push(new Dp),Kn=be=0,ft=[],St=de,yt=We,Xe=xn,zf([Ot,Jt])},Zh=function(de){if(is[de])Fs.pop().restore();else{var We=new Dp,Ot="Xo"+(Object.keys(bi).length+1).toString(10);We.id=Ot,is[de]=Ot,bi[Ot]=We,ni.publish("addFormObject",We),Fs.pop().restore()}};for(var Jh in y.beginFormObject=function(de,We,Ot,Jt,xn){return Xu(de,We,Ot,Jt,xn),this},y.endFormObject=function(de){return Zh(de),this},y.doFormObject=function(de,We){var Ot=bi[is[de]];return He("q"),He(We.toString()+" cm"),He("/"+Ot.id+" Do"),He("Q"),this},y.getFormObject=function(de){var We=bi[is[de]];return{x:We.x,y:We.y,width:We.width,height:We.height,matrix:We.matrix}},y.save=function(de,We){return de=de||"generated.pdf",(We=We||{}).returnPromise=We.returnPromise||!1,We.returnPromise===!1?(I1(es(au()),de),typeof I1.unload=="function"&&Cs.setTimeout&&setTimeout(I1.unload,911),this):new Promise(function(Ot,Jt){try{var xn=I1(es(au()),de);typeof I1.unload=="function"&&Cs.setTimeout&&setTimeout(I1.unload,911),Ot(xn)}catch(Wn){Jt(Wn.message)}})},xs.API)xs.API.hasOwnProperty(Jh)&&(Jh==="events"&&xs.API.events.length?function(de,We){var Ot,Jt,xn;for(xn=We.length-1;xn!==-1;xn--)Ot=We[xn][0],Jt=We[xn][1],de.subscribe.apply(de,[Ot].concat(typeof Jt=="function"?[Jt]:Jt))}(ni,xs.API.events):y[Jh]=xs.API[Jh]);var Zd=y.getPageWidth=function(de){return(ur[de=de||be].mediaBox.topRightX-ur[de].mediaBox.bottomLeftX)/Qe},Up=y.setPageWidth=function(de,We){ur[de].mediaBox.topRightX=We*Qe+ur[de].mediaBox.bottomLeftX},vl=y.getPageHeight=function(de){return(ur[de=de||be].mediaBox.topRightY-ur[de].mediaBox.bottomLeftY)/Qe},ig=y.setPageHeight=function(de,We){ur[de].mediaBox.topRightY=We*Qe+ur[de].mediaBox.bottomLeftY};return y.internal={pdfEscape:$c,getStyle:Ui,getFont:ba,getFontSize:xt,getCharSpace:k_,getTextColor:kp,getLineHeight:Yh,getLineHeightFactor:uu,getLineWidth:cu,write:Tt,getHorizontalCoordinate:qu,getVerticalCoordinate:Cc,getCoordinateString:Np,getVerticalCoordinateString:Yd,collections:{},newObject:dn,newAdditionalObject:Dt,newObjectDeferred:En,newObjectDeferredBegin:Vn,getFilters:Qn,putStream:Nr,events:ni,scaleFactor:Qe,pageSize:{getWidth:function(){return Zd(be)},setWidth:function(de){Up(be,de)},getHeight:function(){return vl(be)},setHeight:function(de){ig(be,de)}},encryptionOptions:p,encryption:fl,getEncryptor:bc,output:Vd,getNumberOfPages:Cm,pages:ft,out:He,f2:te,f3:q,getPageInfo:jo,getPageInfoByObjId:ir,getCurrentPageInfo:Gd,getPDFVersion:x,Point:Xd,Rectangle:Xh,Matrix:zr,hasHotfix:Hd},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Zd(be)},set:function(de){Up(be,de)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return vl(be)},set:function(de){ig(be,de)},enumerable:!0,configurable:!0}),_c.call(y,Rt),bt="F1",ng(i,n),ni.publish("initialized"),y}Rx.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Rx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rx.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Rx.prototype.processOwnerPassword=function(t,e){return lz(az(e).substr(0,5),t)},Rx.prototype.encryptor=function(t,e){var n=az(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return lz(n,r)}},m5.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ho(t)!==Ho(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},xs.API={events:[]},xs.version="2.5.1";var Dl=xs.API,sQ=1,tw=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cx=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qs=function(t){return t.toFixed(2)},cy=function(t){return t.toFixed(5)};Dl.__acroform__={};var Ud=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},sne=function(t){return t*sQ},Ng=function(t){var e=new jge,n=Ti.internal.getHeight(t)||0,r=Ti.internal.getWidth(t)||0;return e.BBox=[0,0,Number(qs(r)),Number(qs(n))],e},oyt=Dl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},ayt=Dl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},lyt=Dl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ac=Dl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lyt(t,e-1)},lc=Dl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return oyt(t,e-1)},cc=Dl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ayt(t,e-1)},cyt=Dl.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],a=t[2],l=t[3],o={};return o.lowerLeft_X=n(i)||0,o.lowerLeft_Y=r(s+l)||0,o.upperRight_X=n(i+a)||0,o.upperRight_Y=r(s)||0,[Number(qs(o.lowerLeft_X)),Number(qs(o.lowerLeft_Y)),Number(qs(o.upperRight_X)),Number(qs(o.upperRight_Y))]},uyt=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=cz(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+qs(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ng(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},cz=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(q){return q.split(`
`)}):i.map(function(q){return[q]});var s=n,a=Ti.internal.getHeight(t)||0;a=a<0?-a:a;var l=Ti.internal.getWidth(t)||0;l=l<0?-l:l;var o=function(q,Y,ee){if(q+1<i.length){var ce=Y+" "+i[q+1][0];return JR(ce,t,ee).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var d,p,A=JR("3",t,s).height,v=t.multiline?a-s:(a-A)/2,y=v+=2,C=0,x=0,M=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+JR(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var I="",P=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var D=!1;if(i[F].length!==1&&M!==i[F].length-1){if((A+2)*(P+2)+2>a)continue e;I+=i[F][M],D=!0,x=F,F--}else{I=(I+=i[F][M]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var V=parseInt(F),H=o(V,I,s),Q=F>=i.length-1;if(H&&!Q){I+=" ",M=0;continue}if(H||Q){if(Q)x=V;else if(t.multiline&&(A+2)*(P+2)+2>a)continue e}else{if(!t.multiline||(A+2)*(P+2)+2>a)continue e;x=V}}for(var G="",W=C;W<=x;W++){var te=i[W];if(t.multiline){if(W===x){G+=te[M]+" ",M=(M+1)%te.length;continue}if(W===C){G+=te[te.length-1]+" ";continue}}G+=te[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,p=JR(G,t,s).width,t.textAlign){case"right":d=l-p-2;break;case"center":d=(l-p)/2;break;case"left":default:d=2}e+=qs(d)+" "+qs(y)+` Td
`,e+="("+tw(G)+`) Tj
`,e+=-qs(d)+` 0 Td
`,y=-(s+2),p=0,C=D?x:x+1,P++,I=""}break}return r.text=e,r.fontSize=s,r},JR=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},hyt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dyt=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},fyt=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ho(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},pyt=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(qA.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(hyt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");sQ=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Kge,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&dyt(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],o=[],d=l.Rect;if(l.Rect&&(l.Rect=cyt(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ti.createDefaultAppearanceStream(l),Ho(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(o=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=uyt(l);o.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var A="";for(var v in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(v)){var y=l.appearanceStreamContent[v];if(A+="/"+v+" ",A+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var a in y)if(y.hasOwnProperty(a)){var C=y[a];typeof C=="function"&&(C=C.call(i,l)),A+="/"+a+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=y)=="function"&&(C=C.call(i,l)),A+="/"+a+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);A+=">>"}o.push({key:"AP",value:`<<
`+A+">>"})}i.internal.putStream({additionalKeyValues:o,objectId:l.objId}),i.internal.out("endobj")}s&&fyt(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Qge=Dl.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ho(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+tw(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},l6=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+tw(r(t))+")"},Yg=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yg.prototype.toString=function(){return this.objId+" 0 R"},Yg.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Yg.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Qge(i,this.objId,this.scope)}):i instanceof Yg?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var jge=function(){Yg.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ud(jge,Yg);var Kge=function(){Yg.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+tw(n(t))+")"}},set:function(n){t=n}})};Ud(Kge,Yg);var qA=function t(){Yg.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ac(e,3)},set:function(I){I?this.F=lc(e,3):this.F=cc(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');n=I}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(I){r=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(I){r[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(I){r[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(I){r[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(I){r[3]=I}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof v5)return;s="FieldObject"+t.FieldNum++}var I=function(P){return P};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+tw(I(s))+")"},set:function(I){s=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(I){s=I}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(I){a=I}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(I){l=I}});var o=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return o},set:function(I){o=I}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/sQ:d},set:function(I){d=I}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(I){p=I}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof v5||this instanceof fb))return l6(A,this.objId,this.scope)},set:function(I){I=I.toString(),A=I}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof vu?v:l6(v,this.objId,this.scope)},set:function(I){I=I.toString(),v=this instanceof vu?I:I.substr(0,1)==="("?cx(I.substr(1,I.length-2)):cx(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vu?cx(v.substr(1,v.length-1)):v},set:function(I){I=I.toString(),v=this instanceof vu?"/"+I:I}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof vu?y:l6(y,this.objId,this.scope)},set:function(I){I=I.toString(),y=this instanceof vu?I:I.substr(0,1)==="("?cx(I.substr(1,I.length-2)):cx(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vu?cx(y.substr(1,y.length-1)):y},set:function(I){I=I.toString(),y=this instanceof vu?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(I){I=!!I,x=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(I){C=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,1)},set:function(I){I?this.Ff=lc(this.Ff,1):this.Ff=cc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,2)},set:function(I){I?this.Ff=lc(this.Ff,2):this.Ff=cc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,3)},set:function(I){I?this.Ff=lc(this.Ff,3):this.Ff=cc(this.Ff,3)}});var M=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(M!==null)return M},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');M=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(M){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:M=2;break;case"center":case 1:M=1;break;case"left":case 0:default:M=0}}})};Ud(qA,Yg);var wC=function(){qA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Qge(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var o,d=[];o=a.exec(s);)d.push(o[l]);return d}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,18)},set:function(n){n?this.Ff=lc(this.Ff,18):this.Ff=cc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=lc(this.Ff,19):this.Ff=cc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,20)},set:function(n){n?(this.Ff=lc(this.Ff,20),e.sort()):this.Ff=cc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,22)},set:function(n){n?this.Ff=lc(this.Ff,22):this.Ff=cc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,23)},set:function(n){n?this.Ff=lc(this.Ff,23):this.Ff=cc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,27)},set:function(n){n?this.Ff=lc(this.Ff,27):this.Ff=cc(this.Ff,27)}}),this.hasAppearanceStream=!1};Ud(wC,qA);var xC=function(){wC.call(this),this.fontName="helvetica",this.combo=!1};Ud(xC,wC);var CC=function(){xC.call(this),this.combo=!0};Ud(CC,xC);var MF=function(){CC.call(this),this.edit=!0};Ud(MF,CC);var vu=function(){qA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,15)},set:function(n){n?this.Ff=lc(this.Ff,15):this.Ff=cc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,16)},set:function(n){n?this.Ff=lc(this.Ff,16):this.Ff=cc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,17)},set:function(n){n?this.Ff=lc(this.Ff,17):this.Ff=cc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,26)},set:function(n){n?this.Ff=lc(this.Ff,26):this.Ff=cc(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+tw(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ho(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ud(vu,qA);var LF=function(){vu.call(this),this.pushButton=!0};Ud(LF,vu);var EC=function(){vu.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ud(EC,vu);var v5=function(){var t,e;qA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+tw(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Ho(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ti.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ud(v5,qA),EC.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},EC.prototype.createOption=function(t){var e=new v5;return e.Parent=this,e.optionName=t,this.Kids.push(e),Ayt.call(this.scope,e),e};var RF=function(){vu.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ti.CheckBox.createAppearanceStream()};Ud(RF,vu);var fb=function(){qA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,13)},set:function(e){e?this.Ff=lc(this.Ff,13):this.Ff=cc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,21)},set:function(e){e?this.Ff=lc(this.Ff,21):this.Ff=cc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,23)},set:function(e){e?this.Ff=lc(this.Ff,23):this.Ff=cc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,24)},set:function(e){e?this.Ff=lc(this.Ff,24):this.Ff=cc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,25)},set:function(e){e?this.Ff=lc(this.Ff,25):this.Ff=cc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,26)},set:function(e){e?this.Ff=lc(this.Ff,26):this.Ff=cc(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ud(fb,qA);var PF=function(){fb.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ac(this.Ff,14)},set:function(t){t?this.Ff=lc(this.Ff,14):this.Ff=cc(this.Ff,14)}}),this.password=!0};Ud(PF,fb);var Ti={CheckBox:{createAppearanceStream:function(){return{N:{On:Ti.CheckBox.YesNormal},D:{On:Ti.CheckBox.YesPushDown,Off:Ti.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ng(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=cz(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+qs(Ti.internal.getWidth(t))+" "+qs(Ti.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+qs(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ng(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ti.internal.getHeight(t),a=Ti.internal.getWidth(t),l=cz(t,t.caption);return i.push("1 g"),i.push("0 0 "+qs(a)+" "+qs(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+qs(a-1)+" "+qs(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+qs(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ng(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qs(Ti.internal.getWidth(t))+" "+qs(Ti.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ti.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ti.RadioButton.Circle.YesNormal,e.D[t]=Ti.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ng(t);e.scope=t.scope;var n=[],r=Ti.internal.getWidth(t)<=Ti.internal.getHeight(t)?Ti.internal.getWidth(t)/4:Ti.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ti.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+cy(Ti.internal.getWidth(t)/2)+" "+cy(Ti.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ng(t);e.scope=t.scope;var n=[],r=Ti.internal.getWidth(t)<=Ti.internal.getHeight(t)?Ti.internal.getWidth(t)/4:Ti.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ti.internal.Bezier_C).toFixed(5)),a=Number((r*Ti.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+cy(Ti.internal.getWidth(t)/2)+" "+cy(Ti.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+cy(Ti.internal.getWidth(t)/2)+" "+cy(Ti.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ng(t);e.scope=t.scope;var n=[],r=Ti.internal.getWidth(t)<=Ti.internal.getHeight(t)?Ti.internal.getWidth(t)/4:Ti.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ti.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+cy(Ti.internal.getWidth(t)/2)+" "+cy(Ti.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ti.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ti.RadioButton.Cross.YesNormal,e.D[t]=Ti.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ng(t);e.scope=t.scope;var n=[],r=Ti.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+qs(Ti.internal.getWidth(t)-2)+" "+qs(Ti.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(qs(r.x1.x)+" "+qs(r.x1.y)+" m"),n.push(qs(r.x2.x)+" "+qs(r.x2.y)+" l"),n.push(qs(r.x4.x)+" "+qs(r.x4.y)+" m"),n.push(qs(r.x3.x)+" "+qs(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ng(t);e.scope=t.scope;var n=Ti.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+qs(Ti.internal.getWidth(t))+" "+qs(Ti.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+qs(Ti.internal.getWidth(t)-2)+" "+qs(Ti.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(qs(n.x1.x)+" "+qs(n.x1.y)+" m"),r.push(qs(n.x2.x)+" "+qs(n.x2.y)+" l"),r.push(qs(n.x4.x)+" "+qs(n.x4.y)+" m"),r.push(qs(n.x3.x)+" "+qs(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ng(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+qs(Ti.internal.getWidth(t))+" "+qs(Ti.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ti.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ti.internal.getWidth(t),n=Ti.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ti.internal.getWidth=function(t){var e=0;return Ho(t)==="object"&&(e=sne(t.Rect[2])),e},Ti.internal.getHeight=function(t){var e=0;return Ho(t)==="object"&&(e=sne(t.Rect[3])),e};var Ayt=Dl.addField=function(t){if(pyt(this,t),!(t instanceof qA))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Dl.AcroFormChoiceField=wC,Dl.AcroFormListBox=xC,Dl.AcroFormComboBox=CC,Dl.AcroFormEditBox=MF,Dl.AcroFormButton=vu,Dl.AcroFormPushButton=LF,Dl.AcroFormRadioButton=EC,Dl.AcroFormCheckBox=RF,Dl.AcroFormTextField=fb,Dl.AcroFormPasswordField=PF,Dl.AcroFormAppearance=Ti,Dl.AcroForm={ChoiceField:wC,ListBox:xC,ComboBox:CC,EditBox:MF,Button:vu,PushButton:LF,RadioButton:EC,CheckBox:RF,TextField:fb,PasswordField:PF,Appearance:Ti},xs.AcroForm={ChoiceField:wC,ListBox:xC,ComboBox:CC,EditBox:MF,Button:vu,PushButton:LF,RadioButton:EC,CheckBox:RF,TextField:fb,PasswordField:PF,Appearance:Ti};function Wge(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(q,Y){var ee,ce,se,le,ie,pe=e;if((Y=Y||e)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(H(q))for(ie in n)for(se=n[ie],ee=0;ee<se.length;ee+=1){for(le=!0,ce=0;ce<se[ee].length;ce+=1)if(se[ee][ce]!==void 0&&se[ee][ce]!==q[ce]){le=!1;break}if(le===!0){pe=ie;break}}else for(ie in n)for(se=n[ie],ee=0;ee<se.length;ee+=1){for(le=!0,ce=0;ce<se[ee].length;ce+=1)if(se[ee][ce]!==void 0&&se[ee][ce]!==q.charCodeAt(ce)){le=!1;break}if(le===!0){pe=ie;break}}return pe===e&&Y!==e&&(pe=Y),pe},i=function q(Y){for(var ee=this.internal.write,ce=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:Y.width}),le.push({key:"Height",value:Y.height}),Y.colorSpace===M.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===M.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)){for(var ie="",pe=0,ue=Y.transparency.length;pe<ue;pe++)ie+=Y.transparency[pe]+" "+Y.transparency[pe]+" ";le.push({key:"Mask",value:"["+ie+"]"})}Y.sMask!==void 0&&le.push({key:"SMask",value:Y.objectId+1+" 0 R"});var me=Y.filter!==void 0?["/"+Y.filter]:void 0;if(ce({data:Y.data,additionalKeyValues:le,alreadyAppliedFilters:me,objectId:Y.objectId}),ee("endobj"),"sMask"in Y&&Y.sMask!==void 0){var Le="/Predictor "+Y.predictor+" /Colors 1 /BitsPerComponent "+Y.bitsPerComponent+" /Columns "+Y.width,ae={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:Y.bitsPerComponent,decodeParameters:Le,data:Y.sMask};"filter"in Y&&(ae.filter=Y.filter),q.call(this,ae)}if(Y.colorSpace===M.INDEXED){var be=this.internal.newObject();ce({data:G(new Uint8Array(Y.palette)),objectId:be}),ee("endobj")}},s=function(){var q=this.internal.collections.addImage_images;for(var Y in q)i.call(this,q[Y])},a=function(){var q,Y=this.internal.collections.addImage_images,ee=this.internal.write;for(var ce in Y)ee("/I"+(q=Y[ce]).index,q.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},o=function(){var q=this.internal.collections.addImage_images;return l.call(this),q},d=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(q){return typeof t["process"+q.toUpperCase()]=="function"},A=function(q){return Ho(q)==="object"&&q.nodeType===1},v=function(q,Y){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var ee=""+q.getAttribute("src");if(ee.indexOf("data:image/")===0)return fI(unescape(ee).split("base64,").pop());var ce=t.loadFile(ee,!0);if(ce!==void 0)return ce}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var se;switch(Y){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;case"JPEG":case"JPG":default:se="image/jpeg"}return fI(q.toDataURL(se,1).split("base64,").pop())}},y=function(q){var Y=this.internal.collections.addImage_images;if(Y){for(var ee in Y)if(q===Y[ee].alias)return Y[ee]}},C=function(q,Y,ee){return q||Y||(q=-96,Y=-96),q<0&&(q=-1*ee.width*72/q/this.internal.scaleFactor),Y<0&&(Y=-1*ee.height*72/Y/this.internal.scaleFactor),q===0&&(q=Y*ee.width/ee.height),Y===0&&(Y=q*ee.height/ee.width),[q,Y]},x=function(q,Y,ee,ce,se,le){var ie=C.call(this,ee,ce,se),pe=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,me=o.call(this);if(ee=ie[0],ce=ie[1],me[se.index]=se,le){le*=Math.PI/180;var Le=Math.cos(le),ae=Math.sin(le),be=function($e){return $e.toFixed(4)},_e=[be(Le),be(ae),be(-1*ae),be(Le),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,pe(q),ue(Y+ce),"cm"].join(" ")),this.internal.write(_e.join(" ")),this.internal.write([pe(ee),"0","0",pe(ce),"0","0","cm"].join(" "))):this.internal.write([pe(ee),"0","0",pe(ce),pe(q),ue(Y+ce),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},M=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=t.__addimage__.sHashCode=function(q){var Y,ee,ce=0;if(typeof q=="string")for(ee=q.length,Y=0;Y<ee;Y++)ce=(ce<<5)-ce+q.charCodeAt(Y),ce|=0;else if(H(q))for(ee=q.byteLength/2,Y=0;Y<ee;Y++)ce=(ce<<5)-ce+q[Y],ce|=0;return ce},F=t.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var Y=!0;return q.length===0&&(Y=!1),q.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(Y=!1),Y},D=t.__addimage__.extractImageFromDataUrl=function(q){var Y=(q=q||"").split("base64,"),ee=null;if(Y.length===2){var ce=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Y[0]);Array.isArray(ce)&&(ee={mimeType:ce[1],charset:ce[2],data:Y[1]})}return ee},V=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(q){return V()&&q instanceof ArrayBuffer};var H=t.__addimage__.isArrayBufferView=function(q){return V()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},Q=t.__addimage__.binaryStringToUint8Array=function(q){for(var Y=q.length,ee=new Uint8Array(Y),ce=0;ce<Y;ce++)ee[ce]=q.charCodeAt(ce);return ee},G=t.__addimage__.arrayBufferToBinaryString=function(q){for(var Y="",ee=H(q)?q:new Uint8Array(q),ce=0;ce<ee.length;ce+=8192)Y+=String.fromCharCode.apply(null,ee.subarray(ce,ce+8192));return Y};t.addImage=function(){var q,Y,ee,ce,se,le,ie,pe,ue;if(typeof arguments[1]=="number"?(Y=e,ee=arguments[1],ce=arguments[2],se=arguments[3],le=arguments[4],ie=arguments[5],pe=arguments[6],ue=arguments[7]):(Y=arguments[1],ee=arguments[2],ce=arguments[3],se=arguments[4],le=arguments[5],ie=arguments[6],pe=arguments[7],ue=arguments[8]),Ho(q=arguments[0])==="object"&&!A(q)&&"imageData"in q){var me=q;q=me.imageData,Y=me.format||Y||e,ee=me.x||ee||0,ce=me.y||ce||0,se=me.w||me.width||se,le=me.h||me.height||le,ie=me.alias||ie,pe=me.compression||pe,ue=me.rotation||me.angle||ue}var Le=this.internal.getFilters();if(pe===void 0&&Le.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(ee)||isNaN(ce))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var ae=W.call(this,q,Y,ie,pe);return x.call(this,ee,ce,se,le,ae,ue),this};var W=function(q,Y,ee,ce){var se,le,ie;if(typeof q=="string"&&r(q)===e){q=unescape(q);var pe=te(q,!1);(pe!==""||(pe=t.loadFile(q,!0))!==void 0)&&(q=pe)}if(A(q)&&(q=v(q,Y)),Y=r(q,Y),!p(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((ie=ee)==null||ie.length===0)&&(ee=function(ue){return typeof ue=="string"||H(ue)?P(ue):H(ue.data)?P(ue.data):null}(q)),(se=y.call(this,ee))||(V()&&(q instanceof Uint8Array||Y==="RGBA"||(le=q,q=Q(q))),se=this["process"+Y.toUpperCase()](q,d.call(this),ee,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in t.image_compression?ue:I.NONE}(ce),le)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},te=t.__addimage__.convertBase64ToBinaryString=function(q,Y){var ee;Y=typeof Y!="boolean"||Y;var ce,se="";if(typeof q=="string"){ce=(ee=D(q))!==null?ee.data:q;try{se=fI(ce)}catch(le){if(Y)throw F(ce)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};t.getImageProperties=function(q){var Y,ee,ce="";if(A(q)&&(q=v(q)),typeof q=="string"&&r(q)===e&&((ce=te(q,!1))===""&&(ce=t.loadFile(q)||""),q=ce),ee=r(q),!p(ee))throw new Error("addImage does not support files of type '"+ee+"', please ensure that a plugin for '"+ee+"' support is added.");if(!V()||q instanceof Uint8Array||(q=Q(q)),!(Y=this["process"+ee.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=ee,Y}})(xs.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};xs.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,p=!1,A=0;A<d.length&&!p;A++)switch((r=d[A]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var v=0;v<d.length;v++){r=d[v];var y=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),M=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(x.objId),P=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+y(I(r.contents))+")",s+=" /Popup "+M.objId+" 0 R",s+=" /P "+o.objId+" 0 R",s+=" /T ("+y(I(P))+") >>",x.content=s;var F=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+F,r.open&&(s+=" /Open true"),s+=" >>",M.content=s,this.internal.write(x.objId,"0 R",M.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var D=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+y(C(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var V=this.annotations._nameMap[r.options.name];r.options.pageNumber=V.page,r.options.top=V.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+y(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var H=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+H+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:o(n),y:d(r),w:o(n+i),h:d(r+s)},options:a,type:"link"})},t.textWithLink=function(n,r,i,s){var a,l,o=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(d*p)}else l=o,a=d;return this.text(n,r,i,s),i+=.2*d,s.align==="center"&&(r-=o/2),s.align==="right"&&(r-=o),this.link(r,i-d,l,a,s),o},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(xs.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=t.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},o=t.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length==4},A=t.__arabicParser__.resolveLigatures=function(x){var M=0,I=n,P="",F=0;for(M=0;M<x.length;M+=1)I[x.charCodeAt(M)]!==void 0?(F++,typeof(I=I[x.charCodeAt(M)])=="number"&&(P+=String.fromCharCode(I),I=n,F=0),M===x.length-1&&(I=n,P+=x.charAt(M-(F-1)),M-=F-1,F=0)):(I=n,P+=x.charAt(M-F),M-=F,F=0);return P};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(x,M,I){return a(x)?s(x)===!1?-1:!d(x)||!a(M)&&!a(I)||!a(I)&&l(M)||l(x)&&!a(M)||l(x)&&o(M)||l(x)&&l(M)?0:p(x)&&a(M)&&!l(M)&&a(I)&&d(I)?3:l(x)||!a(I)?1:2:-1},y=function(x){var M=0,I=0,P=0,F="",D="",V="",H=(x=x||"").split("\\s+"),Q=[];for(M=0;M<H.length;M+=1){for(Q.push(""),I=0;I<H[M].length;I+=1)F=H[M][I],D=H[M][I-1],V=H[M][I+1],a(F)?(P=v(F,D,V),Q[M]+=P!==-1?String.fromCharCode(e[F.charCodeAt(0)][P]):F):Q[M]+=F;Q[M]=A(Q[M])}return Q.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var x,M=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(M)){var P=0;for(I=[],P=0;P<M.length;P+=1)Array.isArray(M[P])?I.push([y(M[P][0]),M[P][1],M[P][2]]):I.push([y(M[P])]);x=I}else x=y(M);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",C])}(xs.API),xs.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(xs.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var o=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return o},set:function(x){o=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(x){A=x}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(x){v=x}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(x){y=x}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(x){C=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(o){return r.call(this),this.internal.__cell__.headerFunction=typeof o=="function"?o:void 0,this},t.getTextDimensions=function(o,d){r.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),A=d.font||this.getFont(),v=d.scaleFactor||this.internal.scaleFactor,y=0,C=0,x=0,M=this;if(!Array.isArray(o)&&typeof o!="string"){if(typeof o!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");o=String(o)}var I=d.maxWidth;I>0?typeof o=="string"?o=this.splitTextToSize(o,I):Object.prototype.toString.call(o)==="[object Array]"&&(o=o.reduce(function(F,D){return F.concat(M.splitTextToSize(D,I))},[])):o=Array.isArray(o)?o:[o];for(var P=0;P<o.length;P++)y<(x=this.getStringUnitWidth(o[P],{font:A})*p)&&(y=x);return y!==0&&(C=o.length),{w:y/=v,h:Math.max((C*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var o=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(o.left,o.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var o;o=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,A=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===o.lineNumber?(o.x=(d.x||0)+(d.width||0),o.y=d.y||0):d.y+d.height+o.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),o.y=A.top,y&&v&&(this.printHeaderRow(o.lineNumber,!0),o.y+=v[0].height)):o.y=d.y+d.height||o.y),o.text[0]!==void 0&&(this.rect(o.x,o.y,o.width,o.height,n===!0?"FD":void 0),o.align==="right"?this.text(o.text,o.x+o.width-p,o.y+p,{align:"right",baseline:"top"}):o.align==="center"?this.text(o.text,o.x+o.width/2,o.y+p,{align:"center",baseline:"top",maxWidth:o.width-p-p}):this.text(o.text,o.x+p,o.y+p,{align:"left",baseline:"top",maxWidth:o.width-p-p})),this.internal.__cell__.lastCell=o,this};t.table=function(o,d,p,A,v){if(r.call(this),!p)throw new Error("No data for PDF table.");var y,C,x,M,I=[],P=[],F=[],D={},V={},H=[],Q=[],G=(v=v||{}).autoSize||!1,W=v.printHeaders!==!1,te=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,q=v.margins||Object.assign({width:this.getPageWidth()},e),Y=typeof v.padding=="number"?v.padding:3,ee=v.headerBackgroundColor||"#c8c8c8",ce=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=te,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=ee,this.internal.__cell__.headerTextColor=ce,this.setFontSize(te),A==null)P=I=Object.keys(p[0]),F=I.map(function(){return"left"});else if(Array.isArray(A)&&Ho(A[0])==="object")for(I=A.map(function(me){return me.name}),P=A.map(function(me){return me.prompt||me.name||""}),F=A.map(function(me){return me.align||"left"}),y=0;y<A.length;y+=1)V[A[y].name]=A[y].width*(19.049976/25.4);else Array.isArray(A)&&typeof A[0]=="string"&&(P=I=A,F=I.map(function(){return"left"}));if(G||Array.isArray(A)&&typeof A[0]=="string")for(y=0;y<I.length;y+=1){for(D[M=I[y]]=p.map(function(me){return me[M]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(P[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=D[M],this.setFont(void 0,"normal"),x=0;x<C.length;x+=1)H.push(this.getTextDimensions(C[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[M]=Math.max.apply(null,H)+Y+Y,H=[]}if(W){var se={};for(y=0;y<I.length;y+=1)se[I[y]]={},se[I[y]].text=P[y],se[I[y]].align=F[y];var le=l.call(this,se,V);Q=I.map(function(me){return new s(o,d,V[me],le,se[me].text,void 0,se[me].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var ie=A.reduce(function(me,Le){return me[Le.name]=Le.align,me},{});for(y=0;y<p.length;y+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:y,data:p[y]},this);var pe=l.call(this,p[y],V);for(x=0;x<I.length;x+=1){var ue=p[y][I[x]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:y,col:x,data:ue},this),a.call(this,new s(o,d,V[I[x]],pe,ue,y+2,ie[I[x]]))}}return this.internal.__cell__.table_x=o,this.internal.__cell__.table_y=d,this};var l=function(o,d){var p=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(o).map(function(y){var C=o[y];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,d[y]-p-p)},this).map(function(y){return this.getLineHeightFactor()*y.length*A/v+p+p},this).reduce(function(y,C){return Math.max(y,C)},0)};t.setTableHeaderRow=function(o){r.call(this),this.internal.__cell__.tableHeaderRow=o},t.printHeaderRow=function(o,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){p=this.internal.__cell__.tableHeaderRow[y].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,v.push(p)),p.lineNumber=o;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(xs.API);var qge={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Yge=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uz=Wge(Yge),Xge=[100,200,300,400,500,600,700,800,900],gyt=Wge(Xge);function hz(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return qge[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof uz[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function one(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var myt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ane={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lne(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function vyt(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},myt,n.genericFontFamilies||{}),s=null,a=null,l=0;l<e.length;++l)if(i[(s=hz(e[l])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){a=t[s.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+lne(s)+"' and default family '"+r+"'.");if(a=function(o,d){if(d[o])return d[o];var p=uz[o],A=p<=uz.normal?-1:1,v=one(d,Yge,p,A);if(!v)throw new Error("Could not find a matching font-stretch value for "+o);return v}(s.stretch,a),a=function(o,d){if(d[o])return d[o];for(var p=qge[o],A=0;A<p.length;++A)if(d[p[A]])return d[p[A]];throw new Error("Could not find a matching font-style for "+o)}(s.style,a),!(a=function(o,d){if(d[o])return d[o];if(o===400&&d[500])return d[500];if(o===500&&d[400])return d[400];var p=gyt[o],A=one(d,Xge,p,o<400?-1:1);if(!A)throw new Error("Could not find a matching font-weight for value "+o);return A}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+lne(s)+"'.");return a}function cne(t){return t.trimLeft()}function yyt(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function _yt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var eP,une,hne,c6=["times"];(function(t){var e,n,r,i,s,a,l,o,d,p=function(ae){return ae=ae||{},this.isStrokeTransparent=ae.isStrokeTransparent||!1,this.strokeOpacity=ae.strokeOpacity||1,this.strokeStyle=ae.strokeStyle||"#000000",this.fillStyle=ae.fillStyle||"#000000",this.isFillTransparent=ae.isFillTransparent||!1,this.fillOpacity=ae.fillOpacity||1,this.font=ae.font||"10px sans-serif",this.textBaseline=ae.textBaseline||"alphabetic",this.textAlign=ae.textAlign||"left",this.lineWidth=ae.lineWidth||1,this.lineJoin=ae.lineJoin||"miter",this.lineCap=ae.lineCap||"butt",this.path=ae.path||[],this.transform=ae.transform!==void 0?ae.transform.clone():new o,this.globalCompositeOperation=ae.globalCompositeOperation||"normal",this.globalAlpha=ae.globalAlpha||1,this.clip_path=ae.clip_path||[],this.currentPoint=ae.currentPoint||new a,this.miterLimit=ae.miterLimit||10,this.lastPoint=ae.lastPoint||new a,this.lineDashOffset=ae.lineDashOffset||0,this.lineDash=ae.lineDash||[],this.margin=ae.margin||[0,0,0,0],this.prevPageLastElemOffset=ae.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ae.ignoreClearRect!="boolean"||ae.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new A(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,o=this.internal.Matrix,d=new p}]);var A=function(ae){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var be=ae;Object.defineProperty(this,"pdf",{get:function(){return be}});var _e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return _e},set:function(at){_e=!!at}});var $e=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $e},set:function(at){$e=!!at}});var Re=0;Object.defineProperty(this,"posX",{get:function(){return Re},set:function(at){isNaN(at)||(Re=at)}});var Ie=0;Object.defineProperty(this,"posY",{get:function(){return Ie},set:function(at){isNaN(at)||(Ie=at)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(at){var He;typeof at=="number"?He=[at,at,at,at]:((He=new Array(4))[0]=at[0],He[1]=at.length>=2?at[1]:He[0],He[2]=at.length>=3?at[2]:He[0],He[3]=at.length>=4?at[3]:He[1]),d.margin=He}});var Ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ne},set:function(at){Ne=at}});var Je=0;Object.defineProperty(this,"lastBreak",{get:function(){return Je},set:function(at){Je=at}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(at){je=at}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(at){at instanceof p&&(d=at)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(at){d.path=at}});var ft=[];Object.defineProperty(this,"ctxStack",{get:function(){return ft},set:function(at){ft=at}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(at){var He;He=v(at),this.ctx.fillStyle=He.style,this.ctx.isFillTransparent=He.a===0,this.ctx.fillOpacity=He.a,this.pdf.setFillColor(He.r,He.g,He.b,{a:He.a}),this.pdf.setTextColor(He.r,He.g,He.b,{a:He.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(at){var He=v(at);this.ctx.strokeStyle=He.style,this.ctx.isStrokeTransparent=He.a===0,this.ctx.strokeOpacity=He.a,He.a===0?this.pdf.setDrawColor(255,255,255):(He.a,this.pdf.setDrawColor(He.r,He.g,He.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(at){["butt","round","square"].indexOf(at)!==-1&&(this.ctx.lineCap=at,this.pdf.setLineCap(at))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(at){isNaN(at)||(this.ctx.lineWidth=at,this.pdf.setLineWidth(at))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(at){["bevel","round","miter"].indexOf(at)!==-1&&(this.ctx.lineJoin=at,this.pdf.setLineJoin(at))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(at){isNaN(at)||(this.ctx.miterLimit=at,this.pdf.setMiterLimit(at))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(at){this.ctx.textBaseline=at}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(at){["right","end","center","left","start"].indexOf(at)!==-1&&(this.ctx.textAlign=at)}});var Et=null;function ke(at,He){if(Et===null){var Tt=function(Ut){var Rt=[];return Object.keys(Ut).forEach(function(Bt){Ut[Bt].forEach(function(Ht){var xt=null;switch(Ht){case"bold":xt={family:Bt,weight:"bold"};break;case"italic":xt={family:Bt,style:"italic"};break;case"bolditalic":xt={family:Bt,weight:"bold",style:"italic"};break;case"":case"normal":xt={family:Bt}}xt!==null&&(xt.ref={name:Bt,style:Ht},Rt.push(xt))})}),Rt}(at.getFontList());Et=function(Ut){for(var Rt={},Bt=0;Bt<Ut.length;++Bt){var Ht=hz(Ut[Bt]),xt=Ht.family,Zt=Ht.stretch,un=Ht.style,Ft=Ht.weight;Rt[xt]=Rt[xt]||{},Rt[xt][Zt]=Rt[xt][Zt]||{},Rt[xt][Zt][un]=Rt[xt][Zt][un]||{},Rt[xt][Zt][un][Ft]=Ht}return Rt}(Tt.concat(He))}return Et}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(at){Et=null,Ye=at}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(at){var He;if(this.ctx.font=at,(He=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(at))!==null){var Tt=He[1],Ut=(He[2],He[3]),Rt=He[4],Bt=(He[5],He[6]),Ht=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Rt)[2];Rt=Math.floor(Ht==="px"?parseFloat(Rt)*this.pdf.internal.scaleFactor:Ht==="em"?parseFloat(Rt)*this.pdf.getFontSize():parseFloat(Rt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Rt);var xt=function(it){var bt,Qe,St=[],yt=it.trim();if(yt==="")return c6;if(yt in ane)return[ane[yt]];for(;yt!=="";){switch(Qe=null,bt=(yt=cne(yt)).charAt(0)){case'"':case"'":Qe=yyt(yt.substring(1),bt);break;default:Qe=_yt(yt)}if(Qe===null||(St.push(Qe[0]),(yt=cne(Qe[1]))!==""&&yt.charAt(0)!==","))return c6;yt=yt.replace(/^,/,"")}return St}(Bt);if(this.fontFaces){var Zt=vyt(ke(this.pdf,this.fontFaces),xt.map(function(it){return{family:it,stretch:"normal",weight:Ut,style:Tt}}));this.pdf.setFont(Zt.ref.name,Zt.ref.style)}else{var un="";(Ut==="bold"||parseInt(Ut,10)>=700||Tt==="bold")&&(un="bold"),Tt==="italic"&&(un+="italic"),un.length===0&&(un="normal");for(var Ft="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<xt.length;Be++){if(this.pdf.internal.getFont(xt[Be],un,{noFallback:!0,disableWarning:!0})!==void 0){Ft=xt[Be];break}if(un==="bolditalic"&&this.pdf.internal.getFont(xt[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=xt[Be],un="bold";else if(this.pdf.internal.getFont(xt[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=xt[Be],un="normal";break}}if(Ft===""){for(var ze=0;ze<xt.length;ze++)if(mt[xt[ze]]){Ft=mt[xt[ze]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,un)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(at){this.ctx.globalCompositeOperation=at}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(at){this.ctx.globalAlpha=at}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(at){this.ctx.lineDashOffset=at,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(at){this.ctx.lineDash=at,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(at){this.ctx.ignoreClearRect=!!at}})};A.prototype.setLineDash=function(ae){this.lineDash=ae},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){D.call(this,"fill",!1)},A.prototype.stroke=function(){D.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(ae,be){if(isNaN(ae)||isNaN(be))throw ka.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var _e=this.ctx.transform.applyToPoint(new a(ae,be));this.path.push({type:"mt",x:_e.x,y:_e.y}),this.ctx.lastPoint=new a(ae,be)},A.prototype.closePath=function(){var ae=new a(0,0),be=0;for(be=this.path.length-1;be!==-1;be--)if(this.path[be].type==="begin"&&Ho(this.path[be+1])==="object"&&typeof this.path[be+1].x=="number"){ae=new a(this.path[be+1].x,this.path[be+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(ae.x,ae.y)},A.prototype.lineTo=function(ae,be){if(isNaN(ae)||isNaN(be))throw ka.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var _e=this.ctx.transform.applyToPoint(new a(ae,be));this.path.push({type:"lt",x:_e.x,y:_e.y}),this.ctx.lastPoint=new a(_e.x,_e.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},A.prototype.quadraticCurveTo=function(ae,be,_e,$e){if(isNaN(_e)||isNaN($e)||isNaN(ae)||isNaN(be))throw ka.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Re=this.ctx.transform.applyToPoint(new a(_e,$e)),Ie=this.ctx.transform.applyToPoint(new a(ae,be));this.path.push({type:"qct",x1:Ie.x,y1:Ie.y,x:Re.x,y:Re.y}),this.ctx.lastPoint=new a(Re.x,Re.y)},A.prototype.bezierCurveTo=function(ae,be,_e,$e,Re,Ie){if(isNaN(Re)||isNaN(Ie)||isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e))throw ka.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ne=this.ctx.transform.applyToPoint(new a(Re,Ie)),Je=this.ctx.transform.applyToPoint(new a(ae,be)),je=this.ctx.transform.applyToPoint(new a(_e,$e));this.path.push({type:"bct",x1:Je.x,y1:Je.y,x2:je.x,y2:je.y,x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new a(Ne.x,Ne.y)},A.prototype.arc=function(ae,be,_e,$e,Re,Ie){if(isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e)||isNaN(Re))throw ka.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ie=!!Ie,!this.ctx.transform.isIdentity){var Ne=this.ctx.transform.applyToPoint(new a(ae,be));ae=Ne.x,be=Ne.y;var Je=this.ctx.transform.applyToPoint(new a(0,_e)),je=this.ctx.transform.applyToPoint(new a(0,0));_e=Math.sqrt(Math.pow(Je.x-je.x,2)+Math.pow(Je.y-je.y,2))}Math.abs(Re-$e)>=2*Math.PI&&($e=0,Re=2*Math.PI),this.path.push({type:"arc",x:ae,y:be,radius:_e,startAngle:$e,endAngle:Re,counterclockwise:Ie})},A.prototype.arcTo=function(ae,be,_e,$e,Re){throw new Error("arcTo not implemented.")},A.prototype.rect=function(ae,be,_e,$e){if(isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e))throw ka.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ae,be),this.lineTo(ae+_e,be),this.lineTo(ae+_e,be+$e),this.lineTo(ae,be+$e),this.lineTo(ae,be),this.lineTo(ae+_e,be),this.lineTo(ae,be)},A.prototype.fillRect=function(ae,be,_e,$e){if(isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e))throw ka.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var Re={};this.lineCap!=="butt"&&(Re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ae,be,_e,$e),this.fill(),Re.hasOwnProperty("lineCap")&&(this.lineCap=Re.lineCap),Re.hasOwnProperty("lineJoin")&&(this.lineJoin=Re.lineJoin)}},A.prototype.strokeRect=function(ae,be,_e,$e){if(isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e))throw ka.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(ae,be,_e,$e),this.stroke())},A.prototype.clearRect=function(ae,be,_e,$e){if(isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e))throw ka.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ae,be,_e,$e))},A.prototype.save=function(ae){ae=typeof ae!="boolean"||ae;for(var be=this.pdf.internal.getCurrentPageInfo().pageNumber,_e=0;_e<this.pdf.internal.getNumberOfPages();_e++)this.pdf.setPage(_e+1),this.pdf.internal.out("q");if(this.pdf.setPage(be),ae){this.ctx.fontSize=this.pdf.internal.getFontSize();var $e=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$e}},A.prototype.restore=function(ae){ae=typeof ae!="boolean"||ae;for(var be=this.pdf.internal.getCurrentPageInfo().pageNumber,_e=0;_e<this.pdf.internal.getNumberOfPages();_e++)this.pdf.setPage(_e+1),this.pdf.internal.out("Q");this.pdf.setPage(be),ae&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ae){var be,_e,$e,Re;if(ae.isCanvasGradient===!0&&(ae=ae.getColor()),!ae)return{r:0,g:0,b:0,a:0,style:ae};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ae))be=0,_e=0,$e=0,Re=0;else{var Ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ae);if(Ie!==null)be=parseInt(Ie[1]),_e=parseInt(Ie[2]),$e=parseInt(Ie[3]),Re=1;else if((Ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ae))!==null)be=parseInt(Ie[1]),_e=parseInt(Ie[2]),$e=parseInt(Ie[3]),Re=parseFloat(Ie[4]);else{if(Re=1,typeof ae=="string"&&ae.charAt(0)!=="#"){var Ne=new Vge(ae);ae=Ne.ok?Ne.toHex():"#000000"}ae.length===4?(be=ae.substring(1,2),be+=be,_e=ae.substring(2,3),_e+=_e,$e=ae.substring(3,4),$e+=$e):(be=ae.substring(1,3),_e=ae.substring(3,5),$e=ae.substring(5,7)),be=parseInt(be,16),_e=parseInt(_e,16),$e=parseInt($e,16)}}return{r:be,g:_e,b:$e,a:Re,style:ae}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(ae,be,_e,$e){if(isNaN(be)||isNaN(_e)||typeof ae!="string")throw ka.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($e=isNaN($e)?void 0:$e,!y.call(this)){var Re=pe(this.ctx.transform.rotation),Ie=this.ctx.transform.scaleX;Y.call(this,{text:ae,x:be,y:_e,scale:Ie,angle:Re,align:this.textAlign,maxWidth:$e})}},A.prototype.strokeText=function(ae,be,_e,$e){if(isNaN(be)||isNaN(_e)||typeof ae!="string")throw ka.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){$e=isNaN($e)?void 0:$e;var Re=pe(this.ctx.transform.rotation),Ie=this.ctx.transform.scaleX;Y.call(this,{text:ae,x:be,y:_e,scale:Ie,renderingMode:"stroke",angle:Re,align:this.textAlign,maxWidth:$e})}},A.prototype.measureText=function(ae){if(typeof ae!="string")throw ka.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var be=this.pdf,_e=this.pdf.internal.scaleFactor,$e=be.internal.getFontSize(),Re=be.getStringUnitWidth(ae)*$e/be.internal.scaleFactor,Ie=function(Ne){var Je=(Ne=Ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Je}}),this};return new Ie({width:Re*=Math.round(96*_e/72*1e4)/1e4})},A.prototype.scale=function(ae,be){if(isNaN(ae)||isNaN(be))throw ka.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var _e=new o(ae,0,0,be,0,0);this.ctx.transform=this.ctx.transform.multiply(_e)},A.prototype.rotate=function(ae){if(isNaN(ae))throw ka.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var be=new o(Math.cos(ae),Math.sin(ae),-Math.sin(ae),Math.cos(ae),0,0);this.ctx.transform=this.ctx.transform.multiply(be)},A.prototype.translate=function(ae,be){if(isNaN(ae)||isNaN(be))throw ka.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var _e=new o(1,0,0,1,ae,be);this.ctx.transform=this.ctx.transform.multiply(_e)},A.prototype.transform=function(ae,be,_e,$e,Re,Ie){if(isNaN(ae)||isNaN(be)||isNaN(_e)||isNaN($e)||isNaN(Re)||isNaN(Ie))throw ka.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ne=new o(ae,be,_e,$e,Re,Ie);this.ctx.transform=this.ctx.transform.multiply(Ne)},A.prototype.setTransform=function(ae,be,_e,$e,Re,Ie){ae=isNaN(ae)?1:ae,be=isNaN(be)?0:be,_e=isNaN(_e)?0:_e,$e=isNaN($e)?1:$e,Re=isNaN(Re)?0:Re,Ie=isNaN(Ie)?0:Ie,this.ctx.transform=new o(ae,be,_e,$e,Re,Ie)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(ae,be,_e,$e,Re,Ie,Ne,Je,je){var ft=this.pdf.getImageProperties(ae),Et=1,ke=1,Ye=1,at=1;$e!==void 0&&Je!==void 0&&(Ye=Je/$e,at=je/Re,Et=ft.width/$e*Je/$e,ke=ft.height/Re*je/Re),Ie===void 0&&(Ie=be,Ne=_e,be=0,_e=0),$e!==void 0&&Je===void 0&&(Je=$e,je=Re),$e===void 0&&Je===void 0&&(Je=ft.width,je=ft.height);for(var He,Tt=this.ctx.transform.decompose(),Ut=pe(Tt.rotate.shx),Rt=new o,Bt=(Rt=(Rt=(Rt=Rt.multiply(Tt.translate)).multiply(Tt.skew)).multiply(Tt.scale)).applyToRectangle(new l(Ie-be*Ye,Ne-_e*at,$e*Et,Re*ke)),Ht=M.call(this,Bt),xt=[],Zt=0;Zt<Ht.length;Zt+=1)xt.indexOf(Ht[Zt])===-1&&xt.push(Ht[Zt]);if(F(xt),this.autoPaging)for(var un=xt[0],Ft=xt[xt.length-1],mt=un;mt<Ft+1;mt++){this.pdf.setPage(mt);var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=mt===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=mt===1?0:it+(mt-2)*bt;if(this.ctx.clip_path.length!==0){var St=this.path;He=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(He,this.posX+this.margin[3],-Qe+ze+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=St}var yt=JSON.parse(JSON.stringify(Bt));yt=P([yt],this.posX+this.margin[3],-Qe+ze+this.ctx.prevPageLastElemOffset)[0];var Xe=(mt>un||mt<Ft)&&x.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,bt,null).clip().discardPath()),this.pdf.addImage(ae,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,Ut),Xe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ae,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,Ut)};var M=function(ae,be,_e){var $e=[];be=be||this.pdf.internal.pageSize.width,_e=_e||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Re=this.posY+this.ctx.prevPageLastElemOffset;switch(ae.type){default:case"mt":case"lt":$e.push(Math.floor((ae.y+Re)/_e)+1);break;case"arc":$e.push(Math.floor((ae.y+Re-ae.radius)/_e)+1),$e.push(Math.floor((ae.y+Re+ae.radius)/_e)+1);break;case"qct":var Ie=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x,ae.y);$e.push(Math.floor((Ie.y+Re)/_e)+1),$e.push(Math.floor((Ie.y+Ie.h+Re)/_e)+1);break;case"bct":var Ne=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y);$e.push(Math.floor((Ne.y+Re)/_e)+1),$e.push(Math.floor((Ne.y+Ne.h+Re)/_e)+1);break;case"rect":$e.push(Math.floor((ae.y+Re)/_e)+1),$e.push(Math.floor((ae.y+ae.h+Re)/_e)+1)}for(var Je=0;Je<$e.length;Je+=1)for(;this.pdf.internal.getNumberOfPages()<$e[Je];)I.call(this);return $e},I=function(){var ae=this.fillStyle,be=this.strokeStyle,_e=this.font,$e=this.lineCap,Re=this.lineWidth,Ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=ae,this.strokeStyle=be,this.font=_e,this.lineCap=$e,this.lineWidth=Re,this.lineJoin=Ie},P=function(ae,be,_e){for(var $e=0;$e<ae.length;$e++)switch(ae[$e].type){case"bct":ae[$e].x2+=be,ae[$e].y2+=_e;case"qct":ae[$e].x1+=be,ae[$e].y1+=_e;case"mt":case"lt":case"arc":default:ae[$e].x+=be,ae[$e].y+=_e}return ae},F=function(ae){return ae.sort(function(be,_e){return be-_e})},D=function(ae,be){for(var _e,$e,Re=this.fillStyle,Ie=this.strokeStyle,Ne=this.lineCap,Je=this.lineWidth,je=Math.abs(Je*this.ctx.transform.scaleX),ft=this.lineJoin,Et=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ye=[],at=0;at<ke.length;at++)if(ke[at].x!==void 0)for(var He=M.call(this,ke[at]),Tt=0;Tt<He.length;Tt+=1)Ye.indexOf(He[Tt])===-1&&Ye.push(He[Tt]);for(var Ut=0;Ut<Ye.length;Ut++)for(;this.pdf.internal.getNumberOfPages()<Ye[Ut];)I.call(this);if(F(Ye),this.autoPaging)for(var Rt=Ye[0],Bt=Ye[Ye.length-1],Ht=Rt;Ht<Bt+1;Ht++){this.pdf.setPage(Ht),this.fillStyle=Re,this.strokeStyle=Ie,this.lineCap=Ne,this.lineWidth=je,this.lineJoin=ft;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Ht===1?this.posY+this.margin[0]:this.margin[0],un=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Ht===1?0:un+(Ht-2)*Ft;if(this.ctx.clip_path.length!==0){var Be=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(_e,this.posX+this.margin[3],-mt+Zt+this.ctx.prevPageLastElemOffset),V.call(this,ae,!0),this.path=Be}if($e=JSON.parse(JSON.stringify(Et)),this.path=P($e,this.posX+this.margin[3],-mt+Zt+this.ctx.prevPageLastElemOffset),be===!1||Ht===0){var ze=(Ht>Rt||Ht<Bt)&&x.call(this);ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,Ft,null).clip().discardPath()),V.call(this,ae,be),ze&&this.pdf.restoreGraphicsState()}this.lineWidth=Je}else this.lineWidth=je,V.call(this,ae,be),this.lineWidth=Je;this.path=Et},V=function(ae,be){if((ae!=="stroke"||be||!C.call(this))&&(ae==="stroke"||be||!y.call(this))){for(var _e,$e,Re=[],Ie=this.path,Ne=0;Ne<Ie.length;Ne++){var Je=Ie[Ne];switch(Je.type){case"begin":Re.push({begin:!0});break;case"close":Re.push({close:!0});break;case"mt":Re.push({start:Je,deltas:[],abs:[]});break;case"lt":var je=Re.length;if(Ie[Ne-1]&&!isNaN(Ie[Ne-1].x)&&(_e=[Je.x-Ie[Ne-1].x,Je.y-Ie[Ne-1].y],je>0)){for(;je>=0;je--)if(Re[je-1].close!==!0&&Re[je-1].begin!==!0){Re[je-1].deltas.push(_e),Re[je-1].abs.push(Je);break}}break;case"bct":_e=[Je.x1-Ie[Ne-1].x,Je.y1-Ie[Ne-1].y,Je.x2-Ie[Ne-1].x,Je.y2-Ie[Ne-1].y,Je.x-Ie[Ne-1].x,Je.y-Ie[Ne-1].y],Re[Re.length-1].deltas.push(_e);break;case"qct":var ft=Ie[Ne-1].x+2/3*(Je.x1-Ie[Ne-1].x),Et=Ie[Ne-1].y+2/3*(Je.y1-Ie[Ne-1].y),ke=Je.x+2/3*(Je.x1-Je.x),Ye=Je.y+2/3*(Je.y1-Je.y),at=Je.x,He=Je.y;_e=[ft-Ie[Ne-1].x,Et-Ie[Ne-1].y,ke-Ie[Ne-1].x,Ye-Ie[Ne-1].y,at-Ie[Ne-1].x,He-Ie[Ne-1].y],Re[Re.length-1].deltas.push(_e);break;case"arc":Re.push({deltas:[],abs:[],arc:!0}),Array.isArray(Re[Re.length-1].abs)&&Re[Re.length-1].abs.push(Je)}}$e=be?null:ae==="stroke"?"stroke":"fill";for(var Tt=!1,Ut=0;Ut<Re.length;Ut++)if(Re[Ut].arc)for(var Rt=Re[Ut].abs,Bt=0;Bt<Rt.length;Bt++){var Ht=Rt[Bt];Ht.type==="arc"?G.call(this,Ht.x,Ht.y,Ht.radius,Ht.startAngle,Ht.endAngle,Ht.counterclockwise,void 0,be,!Tt):ee.call(this,Ht.x,Ht.y),Tt=!0}else if(Re[Ut].close===!0)this.pdf.internal.out("h"),Tt=!1;else if(Re[Ut].begin!==!0){var xt=Re[Ut].start.x,Zt=Re[Ut].start.y;ce.call(this,Re[Ut].deltas,xt,Zt),Tt=!0}$e&&W.call(this,$e),be&&te.call(this)}},H=function(ae){var be=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,_e=be*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ae-_e;case"top":return ae+be-_e;case"hanging":return ae+be-2*_e;case"middle":return ae+be/2-_e;case"ideographic":return ae;case"alphabetic":default:return ae}},Q=function(ae){return ae+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var ae=function(){};return ae.colorStops=[],ae.addColorStop=function(be,_e){this.colorStops.push([be,_e])},ae.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ae.isCanvasGradient=!0,ae},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(ae,be,_e,$e,Re,Ie,Ne,Je,je){for(var ft=le.call(this,_e,$e,Re,Ie),Et=0;Et<ft.length;Et++){var ke=ft[Et];Et===0&&(je?q.call(this,ke.x1+ae,ke.y1+be):ee.call(this,ke.x1+ae,ke.y1+be)),se.call(this,ae,be,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}Je?te.call(this):W.call(this,Ne)},W=function(ae){switch(ae){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},te=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(ae,be){this.pdf.internal.out(n(ae)+" "+r(be)+" m")},Y=function(ae){var be;switch(ae.align){case"right":case"end":be="right";break;case"center":be="center";break;case"left":case"start":default:be="left"}var _e=this.pdf.getTextDimensions(ae.text),$e=H.call(this,ae.y),Re=Q.call(this,$e)-_e.h,Ie=this.ctx.transform.applyToPoint(new a(ae.x,$e)),Ne=this.ctx.transform.decompose(),Je=new o;Je=(Je=(Je=Je.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale);for(var je,ft,Et,ke=this.ctx.transform.applyToRectangle(new l(ae.x,$e,_e.w,_e.h)),Ye=Je.applyToRectangle(new l(ae.x,Re,_e.w,_e.h)),at=M.call(this,Ye),He=[],Tt=0;Tt<at.length;Tt+=1)He.indexOf(at[Tt])===-1&&He.push(at[Tt]);if(F(He),this.autoPaging)for(var Ut=He[0],Rt=He[He.length-1],Bt=Ut;Bt<Rt+1;Bt++){this.pdf.setPage(Bt);var Ht=Bt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[2],un=Zt-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],mt=Ft-this.margin[3],Be=Bt===1?0:xt+(Bt-2)*un;if(this.ctx.clip_path.length!==0){var ze=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(je,this.posX+this.margin[3],-1*Be+Ht),V.call(this,"fill",!0),this.path=ze}var it=P([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-Be+Ht+this.ctx.prevPageLastElemOffset)[0];ae.scale>=.01&&(ft=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ft*ae.scale),Et=this.lineWidth,this.lineWidth=Et*ae.scale);var bt=this.autoPaging!=="text";if(bt||it.y+it.h<=Zt){if(bt||it.y>=Ht&&it.x<=Ft){var Qe=bt?ae.text:this.pdf.splitTextToSize(ae.text,ae.maxWidth||Ft-it.x)[0],St=P([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-Be+Ht+this.ctx.prevPageLastElemOffset)[0],yt=bt&&(Bt>Ut||Bt<Rt)&&x.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,un,null).clip().discardPath()),this.pdf.text(Qe,St.x,St.y,{angle:ae.angle,align:be,renderingMode:ae.renderingMode}),yt&&this.pdf.restoreGraphicsState()}}else it.y<Zt&&(this.ctx.prevPageLastElemOffset+=Zt-it.y);ae.scale>=.01&&(this.pdf.setFontSize(ft),this.lineWidth=Et)}else ae.scale>=.01&&(ft=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ft*ae.scale),Et=this.lineWidth,this.lineWidth=Et*ae.scale),this.pdf.text(ae.text,Ie.x+this.posX,Ie.y+this.posY,{angle:ae.angle,align:be,renderingMode:ae.renderingMode,maxWidth:ae.maxWidth}),ae.scale>=.01&&(this.pdf.setFontSize(ft),this.lineWidth=Et)},ee=function(ae,be,_e,$e){_e=_e||0,$e=$e||0,this.pdf.internal.out(n(ae+_e)+" "+r(be+$e)+" l")},ce=function(ae,be,_e){return this.pdf.lines(ae,be,_e,null,null)},se=function(ae,be,_e,$e,Re,Ie,Ne,Je){this.pdf.internal.out([e(i(_e+ae)),e(s($e+be)),e(i(Re+ae)),e(s(Ie+be)),e(i(Ne+ae)),e(s(Je+be)),"c"].join(" "))},le=function(ae,be,_e,$e){for(var Re=2*Math.PI,Ie=Math.PI/2;be>_e;)be-=Re;var Ne=Math.abs(_e-be);Ne<Re&&$e&&(Ne=Re-Ne);for(var Je=[],je=$e?-1:1,ft=be;Ne>1e-5;){var Et=ft+je*Math.min(Ne,Ie);Je.push(ie.call(this,ae,ft,Et)),Ne-=Math.abs(Et-ft),ft=Et}return Je},ie=function(ae,be,_e){var $e=(_e-be)/2,Re=ae*Math.cos($e),Ie=ae*Math.sin($e),Ne=Re,Je=-Ie,je=Ne*Ne+Je*Je,ft=je+Ne*Re+Je*Ie,Et=4/3*(Math.sqrt(2*je*ft)-ft)/(Ne*Ie-Je*Re),ke=Ne-Et*Je,Ye=Je+Et*Ne,at=ke,He=-Ye,Tt=$e+be,Ut=Math.cos(Tt),Rt=Math.sin(Tt);return{x1:ae*Math.cos(be),y1:ae*Math.sin(be),x2:ke*Ut-Ye*Rt,y2:ke*Rt+Ye*Ut,x3:at*Ut-He*Rt,y3:at*Rt+He*Ut,x4:ae*Math.cos(_e),y4:ae*Math.sin(_e)}},pe=function(ae){return 180*ae/Math.PI},ue=function(ae,be,_e,$e,Re,Ie){var Ne=ae+.5*(_e-ae),Je=be+.5*($e-be),je=Re+.5*(_e-Re),ft=Ie+.5*($e-Ie),Et=Math.min(ae,Re,Ne,je),ke=Math.max(ae,Re,Ne,je),Ye=Math.min(be,Ie,Je,ft),at=Math.max(be,Ie,Je,ft);return new l(Et,Ye,ke-Et,at-Ye)},me=function(ae,be,_e,$e,Re,Ie,Ne,Je){var je,ft,Et,ke,Ye,at,He,Tt,Ut,Rt,Bt,Ht,xt,Zt,un=_e-ae,Ft=$e-be,mt=Re-_e,Be=Ie-$e,ze=Ne-Re,it=Je-Ie;for(ft=0;ft<41;ft++)Ut=(He=(Et=ae+(je=ft/40)*un)+je*((Ye=_e+je*mt)-Et))+je*(Ye+je*(Re+je*ze-Ye)-He),Rt=(Tt=(ke=be+je*Ft)+je*((at=$e+je*Be)-ke))+je*(at+je*(Ie+je*it-at)-Tt),ft==0?(Bt=Ut,Ht=Rt,xt=Ut,Zt=Rt):(Bt=Math.min(Bt,Ut),Ht=Math.min(Ht,Rt),xt=Math.max(xt,Ut),Zt=Math.max(Zt,Rt));return new l(Math.round(Bt),Math.round(Ht),Math.round(xt-Bt),Math.round(Zt-Ht))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ae,be,_e=(ae=this.ctx.lineDash,be=this.ctx.lineDashOffset,JSON.stringify({lineDash:ae,lineDashOffset:be}));this.prevLineDash!==_e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=_e)}}})(xs.API),function(t){var e=function(s){var a,l,o,d,p,A,v,y,C,x;for(l=[],o=0,d=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;d>o;o+=4)(p=(s.charCodeAt(o)<<24)+(s.charCodeAt(o+1)<<16)+(s.charCodeAt(o+2)<<8)+s.charCodeAt(o+3))!==0?(A=(p=((p=((p=((p=(p-(x=p%85))/85)-(C=p%85))/85)-(y=p%85))/85)-(v=p%85))/85)%85,l.push(A+33,v+33,y+33,C+33,x+33)):l.push(122);return function(M,I){for(var P=I;P>0;P--)M.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,o,d,p,A=String,v="length",y=255,C="charCodeAt",x="slice",M="replace";for(s[x](-2),s=s[x](0,-2)[M](/\s/g,"")[M]("z","!!!!!"),o=[],d=0,p=(s+=a="uuuuu"[x](s[v]%5||5))[v];p>d;d+=5)l=52200625*(s[C](d)-33)+614125*(s[C](d+1)-33)+7225*(s[C](d+2)-33)+85*(s[C](d+3)-33)+(s[C](d+4)-33),o.push(y&l>>24,y&l>>16,y&l>>8,y&l);return function(I,P){for(var F=P;F>0;F--)I.pop()}(o,a[v]),A.fromCharCode.apply(A,o)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",o=0;o<s.length;o+=2)l+=String.fromCharCode("0x"+(s[o]+s[o+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=sz(a)).reduce(function(o,d){return o+String.fromCharCode(d)},"")};t.processDataByFilters=function(s,a){var l=0,o=s||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":o=n(o),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=e(o),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=r(o),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=i(o),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:o,reverseChain:d.reverse().join(" ")}}}(xs.API),function(t){t.loadFile=function(e,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(o,d,p){var A=new XMLHttpRequest,v=0,y=function(C){var x=C.length,M=[],I=String.fromCharCode;for(v=0;v<x;v+=1)M.push(I(255&C.charCodeAt(v)));return M.join("")};if(A.open("GET",o,!d),A.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(A.onload=function(){A.status===200?p(y(this.responseText)):p(void 0)}),A.send(null),d&&A.status===200)return y(A.responseText)}(i,s,a)}catch{}return l}(e,n,r)},t.loadImageFile=t.loadFile}(xs.API),function(t){function e(){return(Cs.html2canvas?Promise.resolve(Cs.html2canvas):Promise.resolve().then(()=>uEt)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(Cs.DOMPurify?Promise.resolve(Cs.DOMPurify):Promise.resolve().then(()=>zEt)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Ho(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var o=document.createElement(a);for(var d in l.className&&(o.className=l.className),l.innerHTML&&l.dompurify&&(o.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)o.style[d]=l.style[d];return o},s=function a(l){var o=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),o);return d=(d=d.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(o){switch(r(o)){case"string":return"string";case"element":return o.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(o){return this.set({src:i("div",{innerHTML:a,dompurify:o})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function o(d,p){for(var A=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),v=d.firstChild;v;v=v.nextSibling)p!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||A.appendChild(o(v,p));return d.nodeType===1&&(d.nodeName==="CANVAS"?(A.width=d.width,A.height=d.height,A.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(A.value=d.value),A.addEventListener("load",function(){A.scrollTop=d.scrollTop,A.scrollLeft=d.scrollLeft},!0)),A}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var o=Object.assign({},this.opt.html2canvas);return delete o.onrendered,l(this.prop.container,o)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var o=this.opt.jsPDF,d=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,o.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,o.context2d.posX=this.opt.x,o.context2d.posY=this.opt.y,o.context2d.margin=this.opt.margin,o.context2d.fontFaces=d,d)for(var v=0;v<d.length;++v){var y=d[v],C=y.src.find(function(x){return x.format==="truetype"});C&&o.addFont(C.url,y.ref.name,y.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,o.context2d.save(!0),l(this.prop.container,A)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,o){return(o=o||"pdf").toLowerCase()==="img"||o.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(o){if(o in s.template.prop)return function(){this.prop[o]=a[o]};switch(o){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[o]=a[o]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var o=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(o):o})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(o,d){return Math.floor(o*d/72*96)}return this.then(function(){(a=a||xs.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,o,d){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),o!=null&&(this.progress.n=o),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,o,d){return this.setProgress(a?this.progress.val+a:null,l||null,o?this.progress.n+o:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(a,l){var o=this;return this.thenCore(a,l,function(d,p){return o.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return o.updateProgress(null,d),A}).then(d,p).then(function(A){return o.updateProgress(1),A})})},s.prototype.thenCore=function(a,l,o){o=o||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=o.call(d,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(o){l=l.thenCore(o)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,xs.getPageSize=function(a,l,o){if(Ho(a)==="object"){var d=a;a=d.orientation,l=d.unit||l,o=d.format||o}l=l||"mm",o=o||"a4",a=(""+(a||"P")).toLowerCase();var p,A=(""+o).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var y,C=0,x=0;if(v.hasOwnProperty(A))C=v[A][1]/p,x=v[A][0]/p;else try{C=o[1],x=o[0]}catch{throw new Error("Invalid format: "+o)}if(a==="p"||a==="portrait")a="p",x>C&&(y=x,x=C,C=y);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",C>x&&(y=x,x=C,C=y)}return{width:x,height:C,unit:l,k:p,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(hz):null;var o=new s(l);return l.worker?o:o.from(a).doCallback()}}(xs.API),xs.API.addJS=function(t){return hne=t,this.internal.events.subscribe("postPutResources",function(){eP=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(eP+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),une=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hne+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){eP!==void 0&&une!==void 0&&this.internal.out("/Names <</JavaScript "+eP+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var o=l[1];n.internal.newObjectDeferredBegin(o,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(s=0;s<d;s++){var A=n.internal.newObject();p.push(A);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var y=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+y+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var o=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(xs.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,a,l){var o,d=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(o=function(A){for(var v,y=256*A.charCodeAt(4)+A.charCodeAt(5),C=A.length,x={width:0,height:0,numcomponents:1},M=4;M<C;M+=2){if(M+=y,e.indexOf(A.charCodeAt(M+1))!==-1){v=256*A.charCodeAt(M+5)+A.charCodeAt(M+6),x={width:256*A.charCodeAt(M+7)+A.charCodeAt(M+8),height:v,numcomponents:A.charCodeAt(M+9)};break}y=256*A.charCodeAt(M+2)+A.charCodeAt(M+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:o.width,height:o.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:i}}return p}}(xs.API);var ux,tP,dne,fne,pne,byt=function(){var t,e,n;function r(s){var a,l,o,d,p,A,v,y,C,x,M,I,P,F;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},A=null;;){switch(a=this.readUInt32(),C=(function(){var D,V;for(V=[],D=0;D<4;++D)V.push(String.fromCharCode(this.data[this.pos++]));return V}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":A&&this.animation.frames.push(A),this.pos+=4,A={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),d=this.readUInt16()||100,A.delay=1e3*p/d,A.disposeOp=this.data[this.pos++],A.blendOp=this.data[this.pos++],A.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,a-=4),s=(A!=null?A.data:void 0)||this.imgData,I=0;0<=a?I<a:I>a;0<=a?++I:--I)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(o=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>o)throw new Error("More transparent colors than palette size");if((x=o-this.transparency.indexed.length)>0)for(P=0;0<=x?P<x:P>x;0<=x?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":v=(M=this.read(a)).indexOf(0),y=String.fromCharCode.apply(String,M.slice(0,v)),this.text[y]=String.fromCharCode.apply(String,M.slice(v+1));break;case"IEND":return A&&this.animation.frames.push(A),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),o=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(A,v,y,C){var x,M,I,P,F,D,V,H,Q,G,W,te,q,Y,ee,ce,se,le,ie,pe,ue,me=Math.ceil((d.width-A)/y),Le=Math.ceil((d.height-v)/C),ae=d.width==me&&d.height==Le;for(Y=a*me,te=ae?l:new Uint8Array(Y*Le),D=s.length,q=0,M=0;q<Le&&o<D;){switch(s[o++]){case 0:for(P=se=0;se<Y;P=se+=1)te[M++]=s[o++];break;case 1:for(P=le=0;le<Y;P=le+=1)x=s[o++],F=P<a?0:te[M-a],te[M++]=(x+F)%256;break;case 2:for(P=ie=0;ie<Y;P=ie+=1)x=s[o++],I=(P-P%a)/a,ee=q&&te[(q-1)*Y+I*a+P%a],te[M++]=(ee+x)%256;break;case 3:for(P=pe=0;pe<Y;P=pe+=1)x=s[o++],I=(P-P%a)/a,F=P<a?0:te[M-a],ee=q&&te[(q-1)*Y+I*a+P%a],te[M++]=(x+Math.floor((F+ee)/2))%256;break;case 4:for(P=ue=0;ue<Y;P=ue+=1)x=s[o++],I=(P-P%a)/a,F=P<a?0:te[M-a],q===0?ee=ce=0:(ee=te[(q-1)*Y+I*a+P%a],ce=I&&te[(q-1)*Y+(I-1)*a+P%a]),V=F+ee-ce,H=Math.abs(V-F),G=Math.abs(V-ee),W=Math.abs(V-ce),Q=H<=G&&H<=W?F:G<=W?ee:ce,te[M++]=(x+Q)%256;break;default:throw new Error("Invalid filter algorithm: "+s[o-1])}if(!ae){var be=((v+q*C)*d.width+A)*a,_e=q*Y;for(P=0;P<me;P+=1){for(var $e=0;$e<a;$e+=1)l[be++]=te[_e++];be+=(y-1)*a}}q++}}return s=tyt(s),d.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,o,d,p,A,v,y;for(l=this.palette,p=this.transparency.indexed||[],d=new Uint8Array((p.length||0)+l.length),o=0,s=0,a=A=0,v=l.length;A<v;a=A+=3)d[o++]=l[a],d[o++]=l[a+1],d[o++]=l[a+2],d[o++]=(y=p[s++])!=null?y:255;return d},r.prototype.copyToImageData=function(s,a){var l,o,d,p,A,v,y,C,x,M,I;if(o=this.colors,x=null,l=this.hasAlphaChannel,this.palette.length&&(x=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),o=4,l=!0),C=(d=s.data||s).length,A=x||a,p=v=0,o===1)for(;p<C;)y=x?4*a[p/4]:v,M=A[y++],d[p++]=M,d[p++]=M,d[p++]=M,d[p++]=l?A[y++]:255,v=y;else for(;p<C;)y=x?4*a[p/4]:v,d[p++]=A[y++],d[p++]=A[y++],d[p++]=A[y++],d[p++]=l?A[y++]:255,v=y},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Cs)==="[object Window]"){try{e=Cs.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,o,d,p,A,v,y;if(this.animation){for(y=[],l=p=0,A=(v=this.animation.frames).length;p<A;l=++p)a=v[l],o=s.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(o,d),a.imageData=o,y.push(a.image=t(o));return y}},r.prototype.renderFrame=function(s,a){var l,o,d;return l=(o=this.animation.frames)[a],d=o[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,o,d,p,A,v=this;return l=0,A=this.animation,d=A.numFrames,o=A.frames,p=A.numPlays,(a=function(){var y,C;if(y=l++%d,C=o[y],v.renderFrame(s,y),d>1&&l/d<p)return v.animation._timeout=setTimeout(a,C.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function wyt(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++],t[e++];var l=null,o=null;s&&(l=e,o=a,e+=3*a);var d=!0,p=[],A=0,v=null,y=0,C=null;for(this.width=n,this.height=r;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((q=t[e++])>=0))throw Error("Invalid block size");if(q===0)break;e+=q}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];A=t[e++]|t[e++]<<8,v=t[e++],!(1&x)&&(v=null),y=x>>2&7,e++;break;case 254:for(;;){if(!((q=t[e++])>=0))throw Error("Invalid block size");if(q===0)break;e+=q}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var M=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,D=t[e++],V=D>>6&1,H=1<<(7&D)+1,Q=l,G=o,W=!1;D>>7&&(W=!0,Q=e,G=H,e+=3*H);var te=e;for(e++;;){var q;if(!((q=t[e++])>=0))throw Error("Invalid block size");if(q===0)break;e+=q}p.push({x:M,y:I,width:P,height:F,has_local_palette:W,palette_offset:Q,palette_size:G,data_offset:te,data_length:e-te,transparent_index:v,interlaced:!!V,delay:A,disposal:y});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return C},this.frameInfo=function(Y){if(Y<0||Y>=p.length)throw new Error("Frame index out of range.");return p[Y]},this.decodeAndBlitFrameBGRA=function(Y,ee){var ce=this.frameInfo(Y),se=ce.width*ce.height,le=new Uint8Array(se);Ane(t,ce.data_offset,le,se);var ie=ce.palette_offset,pe=ce.transparent_index;pe===null&&(pe=256);var ue=ce.width,me=n-ue,Le=ue,ae=4*(ce.y*n+ce.x),be=4*((ce.y+ce.height)*n+ce.x),_e=ae,$e=4*me;ce.interlaced===!0&&($e+=4*n*7);for(var Re=8,Ie=0,Ne=le.length;Ie<Ne;++Ie){var Je=le[Ie];if(Le===0&&(Le=ue,(_e+=$e)>=be&&($e=4*me+4*n*(Re-1),_e=ae+(ue+me)*(Re<<1),Re>>=1)),Je===pe)_e+=4;else{var je=t[ie+3*Je],ft=t[ie+3*Je+1],Et=t[ie+3*Je+2];ee[_e++]=Et,ee[_e++]=ft,ee[_e++]=je,ee[_e++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(Y,ee){var ce=this.frameInfo(Y),se=ce.width*ce.height,le=new Uint8Array(se);Ane(t,ce.data_offset,le,se);var ie=ce.palette_offset,pe=ce.transparent_index;pe===null&&(pe=256);var ue=ce.width,me=n-ue,Le=ue,ae=4*(ce.y*n+ce.x),be=4*((ce.y+ce.height)*n+ce.x),_e=ae,$e=4*me;ce.interlaced===!0&&($e+=4*n*7);for(var Re=8,Ie=0,Ne=le.length;Ie<Ne;++Ie){var Je=le[Ie];if(Le===0&&(Le=ue,(_e+=$e)>=be&&($e=4*me+4*n*(Re-1),_e=ae+(ue+me)*(Re<<1),Re>>=1)),Je===pe)_e+=4;else{var je=t[ie+3*Je],ft=t[ie+3*Je+1],Et=t[ie+3*Je+2];ee[_e++]=je,ee[_e++]=ft,ee[_e++]=Et,ee[_e++]=255}--Le}}}function Ane(t,e,n,r){for(var i=t[e++],s=1<<i,a=s+1,l=a+1,o=i+1,d=(1<<o)-1,p=0,A=0,v=0,y=t[e++],C=new Int32Array(4096),x=null;;){for(;p<16&&y!==0;)A|=t[e++]<<p,p+=8,y===1?y=t[e++]:--y;if(p<o)break;var M=A&d;if(A>>=o,p-=o,M!==s){if(M===a)break;for(var I=M<l?M:x,P=0,F=I;F>s;)F=C[F]>>8,++P;var D=F;if(v+P+(I!==M?1:0)>r)return void ka.log("Warning, gif stream longer than expected.");n[v++]=D;var V=v+=P;for(I!==M&&(n[v++]=D),F=I;P--;)F=C[F],n[--V]=255&F,F>>=8;x!==null&&l<4096&&(C[l++]=x<<8|D,l>=d+1&&o<12&&(++o,d=d<<1|1)),x=M}else l=a+1,d=(1<<(o=i+1))-1,x=null}return v!==r&&ka.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function u6(t){var e,n,r,i,s,a=Math.floor,l=new Array(64),o=new Array(64),d=new Array(64),p=new Array(64),A=new Array(65535),v=new Array(65535),y=new Array(64),C=new Array(64),x=[],M=0,I=7,P=new Array(64),F=new Array(64),D=new Array(64),V=new Array(256),H=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(ae,be){for(var _e=0,$e=0,Re=new Array,Ie=1;Ie<=16;Ie++){for(var Ne=1;Ne<=ae[Ie];Ne++)Re[be[$e]]=[],Re[be[$e]][0]=_e,Re[be[$e]][1]=Ie,$e++,_e++;_e*=2}return Re}function ie(ae){for(var be=ae[0],_e=ae[1]-1;_e>=0;)be&1<<_e&&(M|=1<<I),_e--,--I<0&&(M==255?(pe(255),pe(0)):pe(M),I=7,M=0)}function pe(ae){x.push(ae)}function ue(ae){pe(ae>>8&255),pe(255&ae)}function me(ae,be,_e,$e,Re){for(var Ie,Ne=Re[0],Je=Re[240],je=function(Rt,Bt){var Ht,xt,Zt,un,Ft,mt,Be,ze,it,bt,Qe=0;for(it=0;it<8;++it){Ht=Rt[Qe],xt=Rt[Qe+1],Zt=Rt[Qe+2],un=Rt[Qe+3],Ft=Rt[Qe+4],mt=Rt[Qe+5],Be=Rt[Qe+6];var St=Ht+(ze=Rt[Qe+7]),yt=Ht-ze,Xe=xt+Be,_t=xt-Be,Gt=Zt+mt,gt=Zt-mt,hn=un+Ft,rr=un-Ft,br=St+hn,Qr=St-hn,hr=Xe+Gt,Kn=Xe-Gt;Rt[Qe]=br+hr,Rt[Qe+4]=br-hr;var ur=.707106781*(Kn+Qr);Rt[Qe+2]=Qr+ur,Rt[Qe+6]=Qr-ur;var ni=.382683433*((br=rr+gt)-(Kn=_t+yt)),us=.5411961*br+ni,bi=1.306562965*Kn+ni,is=.707106781*(hr=gt+_t),Fs=yt+is,zr=yt-is;Rt[Qe+5]=zr+us,Rt[Qe+3]=zr-us,Rt[Qe+1]=Fs+bi,Rt[Qe+7]=Fs-bi,Qe+=8}for(Qe=0,it=0;it<8;++it){Ht=Rt[Qe],xt=Rt[Qe+8],Zt=Rt[Qe+16],un=Rt[Qe+24],Ft=Rt[Qe+32],mt=Rt[Qe+40],Be=Rt[Qe+48];var ss=Ht+(ze=Rt[Qe+56]),Zi=Ht-ze,en=xt+Be,dn=xt-Be,En=Zt+mt,Vn=Zt-mt,Dt=un+Ft,sn=un-Ft,Mn=ss+Dt,Rn=ss-Dt,er=en+En,Qn=en-En;Rt[Qe]=Mn+er,Rt[Qe+32]=Mn-er;var Nr=.707106781*(Qn+Rn);Rt[Qe+16]=Rn+Nr,Rt[Qe+48]=Rn-Nr;var si=.382683433*((Mn=sn+Vn)-(Qn=dn+Zi)),Tn=.5411961*Mn+si,jt=1.306562965*Qn+si,Zn=.707106781*(er=Vn+dn),Vt=Zi+Zn,Xn=Zi-Zn;Rt[Qe+40]=Xn+Tn,Rt[Qe+24]=Xn-Tn,Rt[Qe+8]=Vt+jt,Rt[Qe+56]=Vt-jt,Qe++}for(it=0;it<64;++it)bt=Rt[it]*Bt[it],y[it]=bt>0?bt+.5|0:bt-.5|0;return y}(ae,be),ft=0;ft<64;++ft)C[Q[ft]]=je[ft];var Et=C[0]-_e;_e=C[0],Et==0?ie($e[0]):(ie($e[v[Ie=32767+Et]]),ie(A[Ie]));for(var ke=63;ke>0&&C[ke]==0;)ke--;if(ke==0)return ie(Ne),_e;for(var Ye,at=1;at<=ke;){for(var He=at;C[at]==0&&at<=ke;)++at;var Tt=at-He;if(Tt>=16){Ye=Tt>>4;for(var Ut=1;Ut<=Ye;++Ut)ie(Je);Tt&=15}Ie=32767+C[at],ie(Re[(Tt<<4)+v[Ie]]),ie(A[Ie]),at++}return ke!=63&&ie(Ne),_e}function Le(ae){ae=Math.min(Math.max(ae,1),100),s!=ae&&(function(be){for(var _e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$e=0;$e<64;$e++){var Re=a((_e[$e]*be+50)/100);Re=Math.min(Math.max(Re,1),255),l[Q[$e]]=Re}for(var Ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ne=0;Ne<64;Ne++){var Je=a((Ie[Ne]*be+50)/100);Je=Math.min(Math.max(Je,1),255),o[Q[Ne]]=Je}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ft=0,Et=0;Et<8;Et++)for(var ke=0;ke<8;ke++)d[ft]=1/(l[Q[ft]]*je[Et]*je[ke]*8),p[ft]=1/(o[Q[ft]]*je[Et]*je[ke]*8),ft++}(ae<50?Math.floor(5e3/ae):Math.floor(200-2*ae)),s=ae)}this.encode=function(ae,be){be&&Le(be),x=new Array,M=0,I=7,ue(65496),ue(65504),ue(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),ue(1),ue(1),pe(0),pe(0),function(){ue(65499),ue(132),pe(0);for(var xt=0;xt<64;xt++)pe(l[xt]);pe(1);for(var Zt=0;Zt<64;Zt++)pe(o[Zt])}(),function(xt,Zt){ue(65472),ue(17),pe(8),ue(Zt),ue(xt),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)}(ae.width,ae.height),function(){ue(65476),ue(418),pe(0);for(var xt=0;xt<16;xt++)pe(G[xt+1]);for(var Zt=0;Zt<=11;Zt++)pe(W[Zt]);pe(16);for(var un=0;un<16;un++)pe(te[un+1]);for(var Ft=0;Ft<=161;Ft++)pe(q[Ft]);pe(1);for(var mt=0;mt<16;mt++)pe(Y[mt+1]);for(var Be=0;Be<=11;Be++)pe(ee[Be]);pe(17);for(var ze=0;ze<16;ze++)pe(ce[ze+1]);for(var it=0;it<=161;it++)pe(se[it])}(),ue(65498),ue(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var _e=0,$e=0,Re=0;M=0,I=7,this.encode.displayName="_encode_";for(var Ie,Ne,Je,je,ft,Et,ke,Ye,at,He=ae.data,Tt=ae.width,Ut=ae.height,Rt=4*Tt,Bt=0;Bt<Ut;){for(Ie=0;Ie<Rt;){for(ft=Rt*Bt+Ie,ke=-1,Ye=0,at=0;at<64;at++)Et=ft+(Ye=at>>3)*Rt+(ke=4*(7&at)),Bt+Ye>=Ut&&(Et-=Rt*(Bt+1+Ye-Ut)),Ie+ke>=Rt&&(Et-=Ie+ke-Rt+4),Ne=He[Et++],Je=He[Et++],je=He[Et++],P[at]=(H[Ne]+H[Je+256>>0]+H[je+512>>0]>>16)-128,F[at]=(H[Ne+768>>0]+H[Je+1024>>0]+H[je+1280>>0]>>16)-128,D[at]=(H[Ne+1280>>0]+H[Je+1536>>0]+H[je+1792>>0]>>16)-128;_e=me(P,d,_e,e,r),$e=me(F,p,$e,n,i),Re=me(D,p,Re,n,i),Ie+=32}Bt+=8}if(I>=0){var Ht=[];Ht[1]=I+1,Ht[0]=(1<<I+1)-1,ie(Ht)}return ue(65497),new Uint8Array(x)},t=t||50,function(){for(var ae=String.fromCharCode,be=0;be<256;be++)V[be]=ae(be)}(),e=le(G,W),n=le(Y,ee),r=le(te,q),i=le(ce,se),function(){for(var ae=1,be=2,_e=1;_e<=15;_e++){for(var $e=ae;$e<be;$e++)v[32767+$e]=_e,A[32767+$e]=[],A[32767+$e][1]=_e,A[32767+$e][0]=$e;for(var Re=-(be-1);Re<=-ae;Re++)v[32767+Re]=_e,A[32767+Re]=[],A[32767+Re][1]=_e,A[32767+Re][0]=be-1+Re;ae<<=1,be<<=1}}(),function(){for(var ae=0;ae<256;ae++)H[ae]=19595*ae,H[ae+256>>0]=38470*ae,H[ae+512>>0]=7471*ae+32768,H[ae+768>>0]=-11059*ae,H[ae+1024>>0]=-21709*ae,H[ae+1280>>0]=32768*ae+8421375,H[ae+1536>>0]=-27439*ae,H[ae+1792>>0]=-5329*ae}(),Le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function mA(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function gne(t){function e(G){if(!G)throw Error("assert :P")}function n(G,W,te){for(var q=0;4>q;q++)if(G[W+q]!=te.charCodeAt(q))return!0;return!1}function r(G,W,te,q,Y){for(var ee=0;ee<Y;ee++)G[W+ee]=te[q+ee]}function i(G,W,te,q){for(var Y=0;Y<q;Y++)G[W+Y]=te}function s(G){return new Int32Array(G)}function a(G,W){for(var te=[],q=0;q<G;q++)te.push(new W);return te}function l(G,W){var te=[];return function q(Y,ee,ce){for(var se=ce[ee],le=0;le<se&&(Y.push(ce.length>ee+1?[]:new W),!(ce.length<ee+1));le++)q(Y[le],ee+1,ce)}(te,0,G),te}var o=function(){var G=this;function W($,Z){for(var Ae=1<<Z-1>>>0;$&Ae;)Ae>>>=1;return Ae?($&Ae-1)+Ae:$}function te($,Z,Ae,Se,Pe){e(!(Se%Ae));do $[Z+(Se-=Ae)]=Pe;while(0<Se)}function q($,Z,Ae,Se,Pe){if(e(2328>=Pe),512>=Pe)var nt=s(512);else if((nt=s(Pe))==null)return 0;return function(st,ht,At,ot,nn,In){var Bn,gn,cr=ht,Hn=1<<At,cn=s(16),fn=s(16);for(e(nn!=0),e(ot!=null),e(st!=null),e(0<At),gn=0;gn<nn;++gn){if(15<ot[gn])return 0;++cn[ot[gn]]}if(cn[0]==nn)return 0;for(fn[1]=0,Bn=1;15>Bn;++Bn){if(cn[Bn]>1<<Bn)return 0;fn[Bn+1]=fn[Bn]+cn[Bn]}for(gn=0;gn<nn;++gn)Bn=ot[gn],0<ot[gn]&&(In[fn[Bn]++]=gn);if(fn[15]==1)return(ot=new Y).g=0,ot.value=In[0],te(st,cr,1,Hn,ot),Hn;var or,fr=-1,ar=Hn-1,ri=0,Lr=1,Ii=1,Jr=1<<At;for(gn=0,Bn=1,nn=2;Bn<=At;++Bn,nn<<=1){if(Lr+=Ii<<=1,0>(Ii-=cn[Bn]))return 0;for(;0<cn[Bn];--cn[Bn])(ot=new Y).g=Bn,ot.value=In[gn++],te(st,cr+ri,nn,Jr,ot),ri=W(ri,Bn)}for(Bn=At+1,nn=2;15>=Bn;++Bn,nn<<=1){if(Lr+=Ii<<=1,0>(Ii-=cn[Bn]))return 0;for(;0<cn[Bn];--cn[Bn]){if(ot=new Y,(ri&ar)!=fr){for(cr+=Jr,or=1<<(fr=Bn)-At;15>fr&&!(0>=(or-=cn[fr]));)++fr,or<<=1;Hn+=Jr=1<<(or=fr-At),st[ht+(fr=ri&ar)].g=or+At,st[ht+fr].value=cr-ht-fr}ot.g=Bn-At,ot.value=In[gn++],te(st,cr+(ri>>At),nn,Jr,ot),ri=W(ri,Bn)}}return Lr!=2*fn[15]-1?0:Hn}($,Z,Ae,Se,Pe,nt)}function Y(){this.value=this.g=0}function ee(){this.value=this.g=0}function ce(){this.G=a(5,Y),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Gc,ee)}function se($,Z,Ae,Se){e($!=null),e(Z!=null),e(2147483648>Se),$.Ca=254,$.I=0,$.b=-8,$.Ka=0,$.oa=Z,$.pa=Ae,$.Jd=Z,$.Yc=Ae+Se,$.Zc=4<=Se?Ae+Se-4+1:Ae,Ie($)}function le($,Z){for(var Ae=0;0<Z--;)Ae|=Je($,128)<<Z;return Ae}function ie($,Z){var Ae=le($,Z);return Ne($)?-Ae:Ae}function pe($,Z,Ae,Se){var Pe,nt=0;for(e($!=null),e(Z!=null),e(4294967288>Se),$.Sb=Se,$.Ra=0,$.u=0,$.h=0,4<Se&&(Se=4),Pe=0;Pe<Se;++Pe)nt+=Z[Ae+Pe]<<8*Pe;$.Ra=nt,$.bb=Se,$.oa=Z,$.pa=Ae}function ue($){for(;8<=$.u&&$.bb<$.Sb;)$.Ra>>>=8,$.Ra+=$.oa[$.pa+$.bb]<<ag-8>>>0,++$.bb,$.u-=8;_e($)&&($.h=1,$.u=0)}function me($,Z){if(e(0<=Z),!$.h&&Z<=og){var Ae=be($)&Hf[Z];return $.u+=Z,ue($),Ae}return $.h=1,$.u=0}function Le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ae(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function be($){return $.Ra>>>($.u&ag-1)>>>0}function _e($){return e($.bb<=$.Sb),$.h||$.bb==$.Sb&&$.u>ag}function $e($,Z){$.u=Z,$.h=_e($)}function Re($){$.u>=Tm&&(e($.u>=Tm),ue($))}function Ie($){e($!=null&&$.oa!=null),$.pa<$.Zc?($.I=($.oa[$.pa++]|$.I<<8)>>>0,$.b+=8):(e($!=null&&$.oa!=null),$.pa<$.Yc?($.b+=8,$.I=$.oa[$.pa++]|$.I<<8):$.Ka?$.b=0:($.I<<=8,$.b+=8,$.Ka=1))}function Ne($){return le($,1)}function Je($,Z){var Ae=$.Ca;0>$.b&&Ie($);var Se=$.b,Pe=Ae*Z>>>8,nt=($.I>>>Se>Pe)+0;for(nt?(Ae-=Pe,$.I-=Pe+1<<Se>>>0):Ae=Pe+1,Se=Ae,Pe=0;256<=Se;)Pe+=8,Se>>=8;return Se=7^Pe+Qc[Se],$.b-=Se,$.Ca=(Ae<<Se)-1,nt}function je($,Z,Ae){$[Z+0]=Ae>>24&255,$[Z+1]=Ae>>16&255,$[Z+2]=Ae>>8&255,$[Z+3]=Ae>>0&255}function ft($,Z){return $[Z+0]<<0|$[Z+1]<<8}function Et($,Z){return ft($,Z)|$[Z+2]<<16}function ke($,Z){return ft($,Z)|ft($,Z+2)<<16}function Ye($,Z){var Ae=1<<Z;return e($!=null),e(0<Z),$.X=s(Ae),$.X==null?0:($.Mb=32-Z,$.Xa=Z,1)}function at($,Z){e($!=null),e(Z!=null),e($.Xa==Z.Xa),r(Z.X,0,$.X,0,1<<Z.Xa)}function He(){this.X=[],this.Xa=this.Mb=0}function Tt($,Z,Ae,Se){e(Ae!=null),e(Se!=null);var Pe=Ae[0],nt=Se[0];return Pe==0&&(Pe=($*nt+Z/2)/Z),nt==0&&(nt=(Z*Pe+$/2)/$),0>=Pe||0>=nt?0:(Ae[0]=Pe,Se[0]=nt,1)}function Ut($,Z){return $+(1<<Z)-1>>>Z}function Rt($,Z){return((4278255360&$)+(4278255360&Z)>>>0&4278255360)+((16711935&$)+(16711935&Z)>>>0&16711935)>>>0}function Bt($,Z){G[Z]=function(Ae,Se,Pe,nt,st,ht,At){var ot;for(ot=0;ot<st;++ot){var nn=G[$](ht[At+ot-1],Pe,nt+ot);ht[At+ot]=Rt(Ae[Se+ot],nn)}}}function Ht(){this.ud=this.hd=this.jd=0}function xt($,Z){return((4278124286&($^Z))>>>1)+($&Z)>>>0}function Zt($){return 0<=$&&256>$?$:0>$?0:255<$?255:void 0}function un($,Z){return Zt($+($-Z+.5>>1))}function Ft($,Z,Ae){return Math.abs(Z-Ae)-Math.abs($-Ae)}function mt($,Z,Ae,Se,Pe,nt,st){for(Se=nt[st-1],Ae=0;Ae<Pe;++Ae)nt[st+Ae]=Se=Rt($[Z+Ae],Se)}function Be($,Z,Ae,Se,Pe){var nt;for(nt=0;nt<Ae;++nt){var st=$[Z+nt],ht=st>>8&255,At=16711935&(At=(At=16711935&st)+((ht<<16)+ht));Se[Pe+nt]=(4278255360&st)+At>>>0}}function ze($,Z){Z.jd=$>>0&255,Z.hd=$>>8&255,Z.ud=$>>16&255}function it($,Z,Ae,Se,Pe,nt){var st;for(st=0;st<Se;++st){var ht=Z[Ae+st],At=ht>>>8,ot=ht,nn=255&(nn=(nn=ht>>>16)+(($.jd<<24>>24)*(At<<24>>24)>>>5));ot=255&(ot=(ot=ot+(($.hd<<24>>24)*(At<<24>>24)>>>5))+(($.ud<<24>>24)*(nn<<24>>24)>>>5)),Pe[nt+st]=(4278255360&ht)+(nn<<16)+ot}}function bt($,Z,Ae,Se,Pe){G[Z]=function(nt,st,ht,At,ot,nn,In,Bn,gn){for(At=In;At<Bn;++At)for(In=0;In<gn;++In)ot[nn++]=Pe(ht[Se(nt[st++])])},G[$]=function(nt,st,ht,At,ot,nn,In){var Bn=8>>nt.b,gn=nt.Ea,cr=nt.K[0],Hn=nt.w;if(8>Bn)for(nt=(1<<nt.b)-1,Hn=(1<<Bn)-1;st<ht;++st){var cn,fn=0;for(cn=0;cn<gn;++cn)cn&nt||(fn=Se(At[ot++])),nn[In++]=Pe(cr[fn&Hn]),fn>>=Bn}else G["VP8LMapColor"+Ae](At,ot,cr,Hn,nn,In,st,ht,gn)}}function Qe($,Z,Ae,Se,Pe){for(Ae=Z+Ae;Z<Ae;){var nt=$[Z++];Se[Pe++]=nt>>16&255,Se[Pe++]=nt>>8&255,Se[Pe++]=nt>>0&255}}function St($,Z,Ae,Se,Pe){for(Ae=Z+Ae;Z<Ae;){var nt=$[Z++];Se[Pe++]=nt>>16&255,Se[Pe++]=nt>>8&255,Se[Pe++]=nt>>0&255,Se[Pe++]=nt>>24&255}}function yt($,Z,Ae,Se,Pe){for(Ae=Z+Ae;Z<Ae;){var nt=(st=$[Z++])>>16&240|st>>12&15,st=st>>0&240|st>>28&15;Se[Pe++]=nt,Se[Pe++]=st}}function Xe($,Z,Ae,Se,Pe){for(Ae=Z+Ae;Z<Ae;){var nt=(st=$[Z++])>>16&248|st>>13&7,st=st>>5&224|st>>3&31;Se[Pe++]=nt,Se[Pe++]=st}}function _t($,Z,Ae,Se,Pe){for(Ae=Z+Ae;Z<Ae;){var nt=$[Z++];Se[Pe++]=nt>>0&255,Se[Pe++]=nt>>8&255,Se[Pe++]=nt>>16&255}}function Gt($,Z,Ae,Se,Pe,nt){if(nt==0)for(Ae=Z+Ae;Z<Ae;)je(Se,((nt=$[Z++])[0]>>24|nt[1]>>8&65280|nt[2]<<8&16711680|nt[3]<<24)>>>0),Pe+=32;else r(Se,Pe,$,Z,Ae)}function gt($,Z){G[Z][0]=G[$+"0"],G[Z][1]=G[$+"1"],G[Z][2]=G[$+"2"],G[Z][3]=G[$+"3"],G[Z][4]=G[$+"4"],G[Z][5]=G[$+"5"],G[Z][6]=G[$+"6"],G[Z][7]=G[$+"7"],G[Z][8]=G[$+"8"],G[Z][9]=G[$+"9"],G[Z][10]=G[$+"10"],G[Z][11]=G[$+"11"],G[Z][12]=G[$+"12"],G[Z][13]=G[$+"13"],G[Z][14]=G[$+"0"],G[Z][15]=G[$+"0"]}function hn($){return $==ds||$==Fm||$==S0||$==hg}function rr(){this.eb=[],this.size=this.A=this.fb=0}function br(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rr,this.f.kb=new br,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ur($){return alert("todo:WebPSamplerProcessPlane"),$.T}function ni($,Z){var Ae=$.T,Se=Z.ba.f.RGBA,Pe=Se.eb,nt=Se.fb+$.ka*Se.A,st=Pl[Z.ba.S],ht=$.y,At=$.O,ot=$.f,nn=$.N,In=$.ea,Bn=$.W,gn=Z.cc,cr=Z.dc,Hn=Z.Mc,cn=Z.Nc,fn=$.ka,or=$.ka+$.T,fr=$.U,ar=fr+1>>1;for(fn==0?st(ht,At,null,null,ot,nn,In,Bn,ot,nn,In,Bn,Pe,nt,null,null,fr):(st(Z.ec,Z.fc,ht,At,gn,cr,Hn,cn,ot,nn,In,Bn,Pe,nt-Se.A,Pe,nt,fr),++Ae);fn+2<or;fn+=2)gn=ot,cr=nn,Hn=In,cn=Bn,nn+=$.Rc,Bn+=$.Rc,nt+=2*Se.A,st(ht,(At+=2*$.fa)-$.fa,ht,At,gn,cr,Hn,cn,ot,nn,In,Bn,Pe,nt-Se.A,Pe,nt,fr);return At+=$.fa,$.j+or<$.o?(r(Z.ec,Z.fc,ht,At,fr),r(Z.cc,Z.dc,ot,nn,ar),r(Z.Mc,Z.Nc,In,Bn,ar),Ae--):1&or||st(ht,At,null,null,ot,nn,In,Bn,ot,nn,In,Bn,Pe,nt+Se.A,null,null,fr),Ae}function us($,Z,Ae){var Se=$.F,Pe=[$.J];if(Se!=null){var nt=$.U,st=Z.ba.S,ht=st==Wp||st==S0;Z=Z.ba.f.RGBA;var At=[0],ot=$.ka;At[0]=$.T,$.Kb&&(ot==0?--At[0]:(--ot,Pe[0]-=$.width),$.j+$.ka+$.T==$.o&&(At[0]=$.o-$.j-ot));var nn=Z.eb;ot=Z.fb+ot*Z.A,$=jp(Se,Pe[0],$.width,nt,At,nn,ot+(ht?0:3),Z.A),e(Ae==At),$&&hn(st)&&Qf(nn,ot,ht,nt,At,Z.A)}return 0}function bi($){var Z=$.ma,Ae=Z.ba.S,Se=11>Ae,Pe=Ae==Bc||Ae==ug||Ae==Wp||Ae==Pm||Ae==12||hn(Ae);if(Z.memory=null,Z.Ib=null,Z.Jb=null,Z.Nd=null,!ed(Z.Oa,$,Pe?11:12))return 0;if(Pe&&hn(Ae)&&xr(),$.da)alert("todo:use_scaling");else{if(Se){if(Z.Ib=ur,$.Kb){if(Ae=$.U+1>>1,Z.memory=s($.U+2*Ae),Z.memory==null)return 0;Z.ec=Z.memory,Z.fc=0,Z.cc=Z.ec,Z.dc=Z.fc+$.U,Z.Mc=Z.cc,Z.Nc=Z.dc+Ae,Z.Ib=ni,xr()}}else alert("todo:EmitYUV");Pe&&(Z.Jb=us,Se&&xn())}if(Se&&!gw){for($=0;256>$;++$)mw[$]=89858*($-128)+Yp>>pg,Um[$]=-22014*($-128)+Yp,M0[$]=-45773*($-128),vw[$]=113618*($-128)+Yp>>pg;for($=Ag;$<Dm;++$)Z=76283*($-16)+Yp>>pg,L0[$-Ag]=Vc(Z,255),K_[$-Ag]=Vc(Z+8>>4,15);gw=1}return 1}function is($){var Z=$.ma,Ae=$.U,Se=$.T;return e(!(1&$.ka)),0>=Ae||0>=Se?0:(Ae=Z.Ib($,Z),Z.Jb!=null&&Z.Jb($,Z,Ae),Z.Dc+=Ae,1)}function Fs($){$.ma.memory=null}function zr($,Z,Ae,Se){return me($,8)!=47?0:(Z[0]=me($,14)+1,Ae[0]=me($,14)+1,Se[0]=me($,1),me($,3)!=0?0:!$.h)}function ss($,Z){if(4>$)return $+1;var Ae=$-2>>1;return(2+(1&$)<<Ae)+me(Z,Ae)+1}function Zi($,Z){return 120<Z?Z-120:1<=(Ae=((Ae=Om[Z-1])>>4)*$+(8-(15&Ae)))?Ae:1;var Ae}function en($,Z,Ae){var Se=be(Ae),Pe=$[Z+=255&Se].g-8;return 0<Pe&&($e(Ae,Ae.u+8),Se=be(Ae),Z+=$[Z].value,Z+=Se&(1<<Pe)-1),$e(Ae,Ae.u+$[Z].g),$[Z].value}function dn($,Z,Ae){return Ae.g+=$.g,Ae.value+=$.value<<Z>>>0,e(8>=Ae.g),$.g}function En($,Z,Ae){var Se=$.xc;return e((Z=Se==0?0:$.vc[$.md*(Ae>>Se)+(Z>>Se)])<$.Wb),$.Ya[Z]}function Vn($,Z,Ae,Se){var Pe=$.ab,nt=$.c*Z,st=$.C;Z=st+Z;var ht=Ae,At=Se;for(Se=$.Ta,Ae=$.Ua;0<Pe--;){var ot=$.gc[Pe],nn=st,In=Z,Bn=ht,gn=At,cr=(At=Se,ht=Ae,ot.Ea);switch(e(nn<In),e(In<=ot.nc),ot.hc){case 2:Gp(Bn,gn,(In-nn)*cr,At,ht);break;case 0:var Hn=nn,cn=In,fn=At,or=ht,fr=(Jr=ot).Ea;Hn==0&&(Hp(Bn,gn,null,null,1,fn,or),mt(Bn,gn+1,0,0,fr-1,fn,or+1),gn+=fr,or+=fr,++Hn);for(var ar=1<<Jr.b,ri=ar-1,Lr=Ut(fr,Jr.b),Ii=Jr.K,Jr=Jr.w+(Hn>>Jr.b)*Lr;Hn<cn;){var go=Ii,Mo=Jr,js=1;for(Im(Bn,gn,fn,or-fr,1,fn,or);js<fr;){var ro=(js&~ri)+ar;ro>fr&&(ro=fr),(0,td[go[Mo++]>>8&15])(Bn,gn+ +js,fn,or+js-fr,ro-js,fn,or+js),js=ro}gn+=fr,or+=fr,++Hn&ri||(Jr+=Lr)}In!=ot.nc&&r(At,ht-cr,At,ht+(In-nn-1)*cr,cr);break;case 1:for(cr=Bn,cn=gn,fr=(Bn=ot.Ea)-(or=Bn&~(fn=(gn=1<<ot.b)-1)),Hn=Ut(Bn,ot.b),ar=ot.K,ot=ot.w+(nn>>ot.b)*Hn;nn<In;){for(ri=ar,Lr=ot,Ii=new Ht,Jr=cn+or,go=cn+Bn;cn<Jr;)ze(ri[Lr++],Ii),Ll(Ii,cr,cn,gn,At,ht),cn+=gn,ht+=gn;cn<go&&(ze(ri[Lr++],Ii),Ll(Ii,cr,cn,fr,At,ht),cn+=fr,ht+=fr),++nn&fn||(ot+=Hn)}break;case 3:if(Bn==At&&gn==ht&&0<ot.b){for(cn=At,Bn=cr=ht+(In-nn)*cr-(or=(In-nn)*Ut(ot.Ea,ot.b)),gn=At,fn=ht,Hn=[],or=(fr=or)-1;0<=or;--or)Hn[or]=gn[fn+or];for(or=fr-1;0<=or;--or)cn[Bn+or]=Hn[or];Iu(ot,nn,In,At,cr,At,ht)}else Iu(ot,nn,In,Bn,gn,At,ht)}ht=Se,At=Ae}At!=Ae&&r(Se,Ae,ht,At,nt)}function Dt($,Z){var Ae=$.V,Se=$.Ba+$.c*$.C,Pe=Z-$.C;if(e(Z<=$.l.o),e(16>=Pe),0<Pe){var nt=$.l,st=$.Ta,ht=$.Ua,At=nt.width;if(Vn($,Pe,Ae,Se),Pe=ht=[ht],e((Ae=$.C)<(Se=Z)),e(nt.v<nt.va),Se>nt.o&&(Se=nt.o),Ae<nt.j){var ot=nt.j-Ae;Ae=nt.j,Pe[0]+=ot*At}if(Ae>=Se?Ae=0:(Pe[0]+=4*nt.v,nt.ka=Ae-nt.j,nt.U=nt.va-nt.v,nt.T=Se-Ae,Ae=1),Ae){if(ht=ht[0],11>(Ae=$.ca).S){var nn=Ae.f.RGBA,In=(Se=Ae.S,Pe=nt.U,nt=nt.T,ot=nn.eb,nn.A),Bn=nt;for(nn=nn.fb+$.Ma*nn.A;0<Bn--;){var gn=st,cr=ht,Hn=Pe,cn=ot,fn=nn;switch(Se){case rf:hu(gn,cr,Hn,cn,fn);break;case Bc:Zu(gn,cr,Hn,cn,fn);break;case ds:Zu(gn,cr,Hn,cn,fn),Qf(cn,fn,0,Hn,1,0);break;case Kp:Sh(gn,cr,Hn,cn,fn);break;case ug:Gt(gn,cr,Hn,cn,fn,1);break;case Fm:Gt(gn,cr,Hn,cn,fn,1),Qf(cn,fn,0,Hn,1,0);break;case Wp:Gt(gn,cr,Hn,cn,fn,0);break;case S0:Gt(gn,cr,Hn,cn,fn,0),Qf(cn,fn,1,Hn,1,0);break;case Pm:Ju(gn,cr,Hn,cn,fn);break;case hg:Ju(gn,cr,Hn,cn,fn),Tc(cn,fn,Hn,1,0);break;case sf:Bu(gn,cr,Hn,cn,fn);break;default:e(0)}ht+=At,nn+=In}$.Ma+=nt}else alert("todo:EmitRescaledRowsYUVA");e($.Ma<=Ae.height)}}$.C=Z,e($.C<=$.i)}function sn($){var Z;if(0<$.ua)return 0;for(Z=0;Z<$.Wb;++Z){var Ae=$.Ya[Z].G,Se=$.Ya[Z].H;if(0<Ae[1][Se[1]+0].g||0<Ae[2][Se[2]+0].g||0<Ae[3][Se[3]+0].g)return 0}return 1}function Mn($,Z,Ae,Se,Pe,nt){if($.Z!=0){var st=$.qd,ht=$.rd;for(e(sd[$.Z]!=null);Z<Ae;++Z)sd[$.Z](st,ht,Se,Pe,Se,Pe,nt),st=Se,ht=Pe,Pe+=nt;$.qd=st,$.rd=ht}}function Rn($,Z){var Ae=$.l.ma,Se=Ae.Z==0||Ae.Z==1?$.l.j:$.C;if(Se=$.C<Se?Se:$.C,e(Z<=$.l.o),Z>Se){var Pe=$.l.width,nt=Ae.ca,st=Ae.tb+Pe*Se,ht=$.V,At=$.Ba+$.c*Se,ot=$.gc;e($.ab==1),e(ot[0].hc==3),Bm(ot[0],Se,Z,ht,At,nt,st),Mn(Ae,Se,Z,nt,st,Pe)}$.C=$.Ma=Z}function er($,Z,Ae,Se,Pe,nt,st){var ht=$.$/Se,At=$.$%Se,ot=$.m,nn=$.s,In=Ae+$.$,Bn=In;Pe=Ae+Se*Pe;var gn=Ae+Se*nt,cr=280+nn.ua,Hn=$.Pb?ht:16777216,cn=0<nn.ua?nn.Wa:null,fn=nn.wc,or=In<gn?En(nn,At,ht):null;e($.C<nt),e(gn<=Pe);var fr=!1;e:for(;;){for(;fr||In<gn;){var ar=0;if(ht>=Hn){var ri=In-Ae;e((Hn=$).Pb),Hn.wd=Hn.m,Hn.xd=ri,0<Hn.s.ua&&at(Hn.s.Wa,Hn.s.vb),Hn=ht+$_}if(At&fn||(or=En(nn,At,ht)),e(or!=null),or.Qb&&(Z[In]=or.qb,fr=!0),!fr)if(Re(ot),or.jc){ar=ot,ri=Z;var Lr=In,Ii=or.pd[be(ar)&Gc-1];e(or.jc),256>Ii.g?($e(ar,ar.u+Ii.g),ri[Lr]=Ii.value,ar=0):($e(ar,ar.u+Ii.g-256),e(256<=Ii.value),ar=Ii.value),ar==0&&(fr=!0)}else ar=en(or.G[0],or.H[0],ot);if(ot.h)break;if(fr||256>ar){if(!fr)if(or.nd)Z[In]=(or.qb|ar<<8)>>>0;else{if(Re(ot),fr=en(or.G[1],or.H[1],ot),Re(ot),ri=en(or.G[2],or.H[2],ot),Lr=en(or.G[3],or.H[3],ot),ot.h)break;Z[In]=(Lr<<24|fr<<16|ar<<8|ri)>>>0}if(fr=!1,++In,++At>=Se&&(At=0,++ht,st!=null&&ht<=nt&&!(ht%16)&&st($,ht),cn!=null))for(;Bn<In;)ar=Z[Bn++],cn.X[(506832829*ar&4294967295)>>>cn.Mb]=ar}else if(280>ar){if(ar=ss(ar-256,ot),ri=en(or.G[4],or.H[4],ot),Re(ot),ri=Zi(Se,ri=ss(ri,ot)),ot.h)break;if(In-Ae<ri||Pe-In<ar)break e;for(Lr=0;Lr<ar;++Lr)Z[In+Lr]=Z[In+Lr-ri];for(In+=ar,At+=ar;At>=Se;)At-=Se,++ht,st!=null&&ht<=nt&&!(ht%16)&&st($,ht);if(e(In<=Pe),At&fn&&(or=En(nn,At,ht)),cn!=null)for(;Bn<In;)ar=Z[Bn++],cn.X[(506832829*ar&4294967295)>>>cn.Mb]=ar}else{if(!(ar<cr))break e;for(fr=ar-280,e(cn!=null);Bn<In;)ar=Z[Bn++],cn.X[(506832829*ar&4294967295)>>>cn.Mb]=ar;ar=In,e(!(fr>>>(ri=cn).Xa)),Z[ar]=ri.X[fr],fr=!0}fr||e(ot.h==_e(ot))}if($.Pb&&ot.h&&In<Pe)e($.m.h),$.a=5,$.m=$.wd,$.$=$.xd,0<$.s.ua&&at($.s.vb,$.s.Wa);else{if(ot.h)break e;st!=null&&st($,ht>nt?nt:ht),$.a=0,$.$=In-Ae}return 1}return $.a=3,0}function Qn($){e($!=null),$.vc=null,$.yc=null,$.Ya=null;var Z=$.Wa;Z!=null&&(Z.X=null),$.vb=null,e($!=null)}function Nr(){var $=new Zh;return $==null?null:($.a=0,$.xb=I0,gt("Predictor","VP8LPredictors"),gt("Predictor","VP8LPredictors_C"),gt("PredictorAdd","VP8LPredictorsAdd"),gt("PredictorAdd","VP8LPredictorsAdd_C"),Gp=Be,Ll=it,hu=Qe,Zu=St,Ju=yt,Bu=Xe,Sh=_t,G.VP8LMapColor32b=lg,G.VP8LMapColor8b=cg,$)}function si($,Z,Ae,Se,Pe){var nt=1,st=[$],ht=[Z],At=Se.m,ot=Se.s,nn=null,In=0;e:for(;;){if(Ae)for(;nt&&me(At,1);){var Bn=st,gn=ht,cr=Se,Hn=1,cn=cr.m,fn=cr.gc[cr.ab],or=me(cn,2);if(cr.Oc&1<<or)nt=0;else{switch(cr.Oc|=1<<or,fn.hc=or,fn.Ea=Bn[0],fn.nc=gn[0],fn.K=[null],++cr.ab,e(4>=cr.ab),or){case 0:case 1:fn.b=me(cn,3)+2,Hn=si(Ut(fn.Ea,fn.b),Ut(fn.nc,fn.b),0,cr,fn.K),fn.K=fn.K[0];break;case 3:var fr,ar=me(cn,8)+1,ri=16<ar?0:4<ar?1:2<ar?2:3;if(Bn[0]=Ut(fn.Ea,ri),fn.b=ri,fr=Hn=si(ar,1,0,cr,fn.K)){var Lr,Ii=ar,Jr=fn,go=1<<(8>>Jr.b),Mo=s(go);if(Mo==null)fr=0;else{var js=Jr.K[0],ro=Jr.w;for(Mo[0]=Jr.K[0][0],Lr=1;Lr<1*Ii;++Lr)Mo[Lr]=Rt(js[ro+Lr],Mo[Lr-1]);for(;Lr<4*go;++Lr)Mo[Lr]=0;Jr.K[0]=null,Jr.K[0]=Mo,fr=1}}Hn=fr;break;case 2:break;default:e(0)}nt=Hn}}if(st=st[0],ht=ht[0],nt&&me(At,1)&&!(nt=1<=(In=me(At,4))&&11>=In)){Se.a=3;break e}var Zs;if(Zs=nt)t:{var $i,bs,$a,Va=Se,Ha=st,pl=ht,Fo=In,Fl=Ae,ql=Va.m,Gn=Va.s,Mr=[null],nl=1,Js=0,fu=dg[Fo];n:for(;;){if(Fl&&me(ql,1)){var Ga=me(ql,3)+2,rn=Ut(Ha,Ga),af=Ut(pl,Ga),Ol=rn*af;if(!si(rn,af,0,Va,Mr))break n;for(Mr=Mr[0],Gn.xc=Ga,$i=0;$i<Ol;++$i){var lf=Mr[$i]>>8&65535;Mr[$i]=lf,lf>=nl&&(nl=lf+1)}}if(ql.h)break n;for(bs=0;5>bs;++bs){var Ca=z_[bs];!bs&&0<Fo&&(Ca+=1<<Fo),Js<Ca&&(Js=Ca)}var qf=a(nl*fu,Y),_w=nl,bw=a(_w,ce);if(bw==null)var Vm=null;else e(65536>=_w),Vm=bw;var cf=s(Js);if(Vm==null||cf==null||qf==null){Va.a=1;break n}var Yf=qf;for($i=$a=0;$i<nl;++$i){var Lu=Vm[$i],Zp=Lu.G,od=Lu.H,Hm=0,vg=1,yg=0;for(bs=0;5>bs;++bs){Ca=z_[bs],Zp[bs]=Yf,od[bs]=$a,!bs&&0<Fo&&(Ca+=1<<Fo);i:{var Yl,W_=Ca,Jp=Va,ho=cf,Ks=Yf,Gm=$a,Ru=0,Qa=Jp.m,uf=me(Qa,1);if(i(ho,0,0,W_),uf){var q_=me(Qa,1)+1,Y_=me(Qa,1),hf=me(Qa,Y_==0?1:8);ho[hf]=1,q_==2&&(ho[hf=me(Qa,8)]=1);var Ih=1}else{var eA=s(19),Qm=me(Qa,4)+4;if(19<Qm){Jp.a=3;var Xf=0;break i}for(Yl=0;Yl<Qm;++Yl)eA[hw[Yl]]=me(Qa,3);var jm=void 0,tA=void 0,Bh=Jp,X_=eA,Zf=W_,Km=ho,Wm=0,Wo=Bh.m,nA=8,qm=a(128,Y);r:for(;q(qm,0,7,X_,19);){if(me(Wo,1)){var Ym=2+2*me(Wo,3);if((jm=2+me(Wo,Ym))>Zf)break r}else jm=Zf;for(tA=0;tA<Zf&&jm--;){Re(Wo);var df=qm[0+(127&be(Wo))];$e(Wo,Wo.u+df.g);var Jf=df.value;if(16>Jf)Km[tA++]=Jf,Jf!=0&&(nA=Jf);else{var Xm=Jf==16,R0=Jf-16,rA=U_[R0],_g=me(Wo,uw[R0])+rA;if(tA+_g>Zf)break r;for(var Z_=Xm?nA:0;0<_g--;)Km[tA++]=Z_}}Wm=1;break r}Wm||(Bh.a=3),Ih=Wm}(Ih=Ih&&!Qa.h)&&(Ru=q(Ks,Gm,8,ho,W_)),Ih&&Ru!=0?Xf=Ru:(Jp.a=3,Xf=0)}if(Xf==0)break n;if(vg&&T0[bs]==1&&(vg=Yf[$a].g==0),Hm+=Yf[$a].g,$a+=Xf,3>=bs){var ff,Zm=cf[0];for(ff=1;ff<Ca;++ff)cf[ff]>Zm&&(Zm=cf[ff]);yg+=Zm}}if(Lu.nd=vg,Lu.Qb=0,vg&&(Lu.qb=(Zp[3][od[3]+0].value<<24|Zp[1][od[1]+0].value<<16|Zp[2][od[2]+0].value)>>>0,Hm==0&&256>Zp[0][od[0]+0].value&&(Lu.Qb=1,Lu.qb+=Zp[0][od[0]+0].value<<8)),Lu.jc=!Lu.Qb&&6>yg,Lu.jc){var Jm,ad=Lu;for(Jm=0;Jm<Gc;++Jm){var pf=Jm,Af=ad.pd[pf],ev=ad.G[0][ad.H[0]+pf];256<=ev.value?(Af.g=ev.g+256,Af.value=ev.value):(Af.g=0,Af.value=0,pf>>=dn(ev,8,Af),pf>>=dn(ad.G[1][ad.H[1]+pf],16,Af),pf>>=dn(ad.G[2][ad.H[2]+pf],0,Af),dn(ad.G[3][ad.H[3]+pf],24,Af))}}}Gn.vc=Mr,Gn.Wb=nl,Gn.Ya=Vm,Gn.yc=qf,Zs=1;break t}Zs=0}if(!(nt=Zs)){Se.a=3;break e}if(0<In){if(ot.ua=1<<In,!Ye(ot.Wa,In)){Se.a=1,nt=0;break e}}else ot.ua=0;var P0=Se,J_=st,tv=ht,F0=P0.s,O0=F0.xc;if(P0.c=J_,P0.i=tv,F0.md=Ut(J_,O0),F0.wc=O0==0?-1:(1<<O0)-1,Ae){Se.xb=pw;break e}if((nn=s(st*ht))==null){Se.a=1,nt=0;break e}nt=(nt=er(Se,nn,0,st,ht,ht,null))&&!At.h;break e}return nt?(Pe!=null?Pe[0]=nn:(e(nn==null),e(Ae)),Se.$=0,Ae||Qn(ot)):Qn(ot),nt}function Tn($,Z){var Ae=$.c*$.i,Se=Ae+Z+16*Z;return e($.c<=Z),$.V=s(Se),$.V==null?($.Ta=null,$.Ua=0,$.a=1,0):($.Ta=$.V,$.Ua=$.Ba+Ae+Z,1)}function jt($,Z){var Ae=$.C,Se=Z-Ae,Pe=$.V,nt=$.Ba+$.c*Ae;for(e(Z<=$.l.o);0<Se;){var st=16<Se?16:Se,ht=$.l.ma,At=$.l.width,ot=At*st,nn=ht.ca,In=ht.tb+At*Ae,Bn=$.Ta,gn=$.Ua;Vn($,st,Pe,nt),Mm(Bn,gn,nn,In,ot),Mn(ht,Ae,Ae+st,nn,In,At),Se-=st,Pe+=st*$.c,Ae+=st}e(Ae==Z),$.C=$.Ma=Z}function Zn(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ur(){this.Yb=function(){var $=[];return function Z(Ae,Se,Pe){for(var nt=Pe[Se],st=0;st<nt&&(Ae.push(Pe.length>Se+1?[]:0),!(Pe.length<Se+1));st++)Z(Ae[st],Se+1,Pe)}($,0,[3,11]),$}()}function Cr(){this.jb=s(3),this.Wc=l([4,8],Ur),this.Xc=l([4,17],Ur)}function Is(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Bo(){this.ld=this.La=this.dd=this.tc=0}function Qs(){this.Na=this.la=0}function xh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zc(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zd(){this.uc=this.M=this.Nb=0,this.wa=Array(new Bo),this.Y=0,this.ya=Array(new zc),this.aa=0,this.l=new Df}function eg(){this.y=s(16),this.f=s(8),this.ea=s(8)}function $d(){this.cb=this.a=0,this.sc="",this.m=new Le,this.Od=new Zn,this.Kc=new Vt,this.ed=new Is,this.Qa=new Xn,this.Ic=this.$c=this.Aa=0,this.D=new zd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Le),this.ia=0,this.pb=a(4,xh),this.Pa=new Cr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new eg),this.Hd=0,this.rb=Array(new Qs),this.sb=0,this.wa=Array(new Bo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zc),this.L=this.aa=0,this.gd=l([4,2],Bo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Df(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uf(){var $=new $d;return $!=null&&($.a=0,$.sc="OK",$.cb=0,$.Xb=0,qp||(qp=Pp)),$}function za($,Z,Ae){return $.a==0&&($.a=Z,$.sc=Ae,$.cb=0),0}function Rp($,Z,Ae){return 3<=Ae&&$[Z+0]==157&&$[Z+1]==1&&$[Z+2]==42}function tg($,Z){if($==null)return 0;if($.a=0,$.sc="OK",Z==null)return za($,2,"null VP8Io passed to VP8GetHeaders()");var Ae=Z.data,Se=Z.w,Pe=Z.ha;if(4>Pe)return za($,7,"Truncated header.");var nt=Ae[Se+0]|Ae[Se+1]<<8|Ae[Se+2]<<16,st=$.Od;if(st.Rb=!(1&nt),st.td=nt>>1&7,st.yd=nt>>4&1,st.ub=nt>>5,3<st.td)return za($,3,"Incorrect keyframe parameters.");if(!st.yd)return za($,4,"Frame not displayable.");Se+=3,Pe-=3;var ht=$.Kc;if(st.Rb){if(7>Pe)return za($,7,"cannot parse picture header");if(!Rp(Ae,Se,Pe))return za($,3,"Bad code word");ht.c=16383&(Ae[Se+4]<<8|Ae[Se+3]),ht.Td=Ae[Se+4]>>6,ht.i=16383&(Ae[Se+6]<<8|Ae[Se+5]),ht.Ud=Ae[Se+6]>>6,Se+=7,Pe-=7,$.za=ht.c+15>>4,$.Ub=ht.i+15>>4,Z.width=ht.c,Z.height=ht.i,Z.Da=0,Z.j=0,Z.v=0,Z.va=Z.width,Z.o=Z.height,Z.da=0,Z.ib=Z.width,Z.hb=Z.height,Z.U=Z.width,Z.T=Z.height,i((nt=$.Pa).jb,0,255,nt.jb.length),e((nt=$.Qa)!=null),nt.Cb=0,nt.Bb=0,nt.Fb=1,i(nt.Zb,0,0,nt.Zb.length),i(nt.Lb,0,0,nt.Lb)}if(st.ub>Pe)return za($,7,"bad partition length");se(nt=$.m,Ae,Se,st.ub),Se+=st.ub,Pe-=st.ub,st.Rb&&(ht.Ld=Ne(nt),ht.Kd=Ne(nt)),ht=$.Qa;var At,ot=$.Pa;if(e(nt!=null),e(ht!=null),ht.Cb=Ne(nt),ht.Cb){if(ht.Bb=Ne(nt),Ne(nt)){for(ht.Fb=Ne(nt),At=0;4>At;++At)ht.Zb[At]=Ne(nt)?ie(nt,7):0;for(At=0;4>At;++At)ht.Lb[At]=Ne(nt)?ie(nt,6):0}if(ht.Bb)for(At=0;3>At;++At)ot.jb[At]=Ne(nt)?le(nt,8):255}else ht.Bb=0;if(nt.Ka)return za($,3,"cannot parse segment header");if((ht=$.ed).zd=Ne(nt),ht.Tb=le(nt,6),ht.wb=le(nt,3),ht.Pc=Ne(nt),ht.Pc&&Ne(nt)){for(ot=0;4>ot;++ot)Ne(nt)&&(ht.vd[ot]=ie(nt,6));for(ot=0;4>ot;++ot)Ne(nt)&&(ht.od[ot]=ie(nt,6))}if($.L=ht.Tb==0?0:ht.zd?1:2,nt.Ka)return za($,3,"cannot parse filter header");var nn=Pe;if(Pe=At=Se,Se=At+nn,ht=nn,$.Xb=(1<<le($.m,2))-1,nn<3*(ot=$.Xb))Ae=7;else{for(At+=3*ot,ht-=3*ot,nn=0;nn<ot;++nn){var In=Ae[Pe+0]|Ae[Pe+1]<<8|Ae[Pe+2]<<16;In>ht&&(In=ht),se($.Jc[+nn],Ae,At,In),At+=In,ht-=In,Pe+=3}se($.Jc[+ot],Ae,At,ht),Ae=At<Se?0:5}if(Ae!=0)return za($,Ae,"cannot parse partitions");for(Ae=le(At=$.m,7),Pe=Ne(At)?ie(At,4):0,Se=Ne(At)?ie(At,4):0,ht=Ne(At)?ie(At,4):0,ot=Ne(At)?ie(At,4):0,At=Ne(At)?ie(At,4):0,nn=$.Qa,In=0;4>In;++In){if(nn.Cb){var Bn=nn.Zb[In];nn.Fb||(Bn+=Ae)}else{if(0<In){$.pb[In]=$.pb[0];continue}Bn=Ae}var gn=$.pb[In];gn.Sc[0]=Nm[Vc(Bn+Pe,127)],gn.Sc[1]=Kf[Vc(Bn+0,127)],gn.Eb[0]=2*Nm[Vc(Bn+Se,127)],gn.Eb[1]=101581*Kf[Vc(Bn+ht,127)]>>16,8>gn.Eb[1]&&(gn.Eb[1]=8),gn.Qc[0]=Nm[Vc(Bn+ot,117)],gn.Qc[1]=Kf[Vc(Bn+At,127)],gn.lc=Bn+At}if(!st.Rb)return za($,4,"Not a key frame.");for(Ne(nt),st=$.Pa,Ae=0;4>Ae;++Ae){for(Pe=0;8>Pe;++Pe)for(Se=0;3>Se;++Se)for(ht=0;11>ht;++ht)ot=Je(nt,H_[Ae][Pe][Se][ht])?le(nt,8):fw[Ae][Pe][Se][ht],st.Wc[Ae][Pe].Yb[Se][ht]=ot;for(Pe=0;17>Pe;++Pe)st.Xc[Ae][Pe]=st.Wc[Ae][G_[Pe]]}return $.kc=Ne(nt),$.kc&&($.Bd=le(nt,8)),$.cb=1}function Pp($,Z,Ae,Se,Pe,nt,st){var ht=Z[Pe].Yb[Ae];for(Ae=0;16>Pe;++Pe){if(!Je($,ht[Ae+0]))return Pe;for(;!Je($,ht[Ae+1]);)if(ht=Z[++Pe].Yb[0],Ae=0,Pe==16)return 16;var At=Z[Pe+1].Yb;if(Je($,ht[Ae+2])){var ot=$,nn=0;if(Je(ot,(Bn=ht)[(In=Ae)+3]))if(Je(ot,Bn[In+6])){for(ht=0,In=2*(nn=Je(ot,Bn[In+8]))+(Bn=Je(ot,Bn[In+9+nn])),nn=0,Bn=V_[In];Bn[ht];++ht)nn+=nn+Je(ot,Bn[ht]);nn+=3+(8<<In)}else Je(ot,Bn[In+7])?(nn=7+2*Je(ot,165),nn+=Je(ot,145)):nn=5+Je(ot,159);else nn=Je(ot,Bn[In+4])?3+Je(ot,Bn[In+5]):2;ht=At[2]}else nn=1,ht=At[1];At=st+YE[Pe],0>(ot=$).b&&Ie(ot);var In,Bn=ot.b,gn=(In=ot.Ca>>1)-(ot.I>>Bn)>>31;--ot.b,ot.Ca+=gn,ot.Ca|=1,ot.I-=(In+1&gn)<<Bn,nt[At]=((nn^gn)-gn)*Se[(0<Pe)+0]}return 16}function Fp($){var Z=$.rb[$.sb-1];Z.la=0,Z.Na=0,i($.zc,0,0,$.zc.length),$.ja=0}function _c($,Z){if($==null)return 0;if(Z==null)return za($,2,"NULL VP8Io parameter in VP8Decode().");if(!$.cb&&!tg($,Z))return 0;if(e($.cb),Z.ac==null||Z.ac(Z)){Z.ob&&($.L=0);var Ae=Xp[$.L];if($.L==2?($.yb=0,$.zb=0):($.yb=Z.v-Ae>>4,$.zb=Z.j-Ae>>4,0>$.yb&&($.yb=0),0>$.zb&&($.zb=0)),$.Va=Z.o+15+Ae>>4,$.Hb=Z.va+15+Ae>>4,$.Hb>$.za&&($.Hb=$.za),$.Va>$.Ub&&($.Va=$.Ub),0<$.L){var Se=$.ed;for(Ae=0;4>Ae;++Ae){var Pe;if($.Qa.Cb){var nt=$.Qa.Lb[Ae];$.Qa.Fb||(nt+=Se.Tb)}else nt=Se.Tb;for(Pe=0;1>=Pe;++Pe){var st=$.gd[Ae][Pe],ht=nt;if(Se.Pc&&(ht+=Se.vd[0],Pe&&(ht+=Se.od[0])),0<(ht=0>ht?0:63<ht?63:ht)){var At=ht;0<Se.wb&&(At=4<Se.wb?At>>2:At>>1)>9-Se.wb&&(At=9-Se.wb),1>At&&(At=1),st.dd=At,st.tc=2*ht+At,st.ld=40<=ht?2:15<=ht?1:0}else st.tc=0;st.La=Pe}}}Ae=0}else za($,6,"Frame setup failed"),Ae=$.a;if(Ae=Ae==0){if(Ae){$.$c=0,0<$.Aa||($.Ic=$m);e:{Ae=$.Ic,Se=4*(At=$.za);var ot=32*At,nn=At+1,In=0<$.L?At*(0<$.Aa?2:1):0,Bn=($.Aa==2?2:1)*At;if((st=Se+832+(Pe=3*(16*Ae+Xp[$.L])/2*ot)+(nt=$.Fa!=null&&0<$.Fa.length?$.Kc.c*$.Kc.i:0))!=st)Ae=0;else{if(st>$.Vb){if($.Vb=0,$.Ec=s(st),$.Fc=0,$.Ec==null){Ae=za($,1,"no memory during frame initialization.");break e}$.Vb=st}st=$.Ec,ht=$.Fc,$.Ac=st,$.Bc=ht,ht+=Se,$.Gd=a(ot,eg),$.Hd=0,$.rb=a(nn+1,Qs),$.sb=1,$.wa=In?a(In,Bo):null,$.Y=0,$.D.Nb=0,$.D.wa=$.wa,$.D.Y=$.Y,0<$.Aa&&($.D.Y+=At),e(!0),$.oc=st,$.pc=ht,ht+=832,$.ya=a(Bn,zc),$.aa=0,$.D.ya=$.ya,$.D.aa=$.aa,$.Aa==2&&($.D.aa+=At),$.R=16*At,$.B=8*At,At=(ot=Xp[$.L])*$.R,ot=ot/2*$.B,$.sa=st,$.ta=ht+At,$.qa=$.sa,$.ra=$.ta+16*Ae*$.R+ot,$.Ha=$.qa,$.Ia=$.ra+8*Ae*$.B+ot,$.$c=0,ht+=Pe,$.mb=nt?st:null,$.nb=nt?ht:null,e(ht+nt<=$.Fc+$.Vb),Fp($),i($.Ac,$.Bc,0,Se),Ae=1}}if(Ae){if(Z.ka=0,Z.y=$.sa,Z.O=$.ta,Z.f=$.qa,Z.N=$.ra,Z.ea=$.Ha,Z.Vd=$.Ia,Z.fa=$.R,Z.Rc=$.B,Z.F=null,Z.J=0,!D_){for(Ae=-255;255>=Ae;++Ae)Lm[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)Rm[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)C0[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)E0[255+Ae]=0>Ae?0:255<Ae?255:Ae;D_=1}Ec=$f,nd=N_,pa=Tu,Rl=Cm,Oa=w0,Jd=ng,ef=rg,Qp=ji,tf=k_,du=Em,Gf=kp,Sc=Vf,rd=Yu,Ao=Ch,Ko=uu,ra=qu,tl=Cc,id=Np,Mu[0]=Kl,Mu[1]=Bs,Mu[2]=Gd,Mu[3]=di,Mu[4]=Ui,Mu[5]=Fa,Mu[6]=Qd,Mu[7]=Yr,Mu[8]=jd,Mu[9]=x0,of[0]=Hd,of[1]=ou,of[2]=au,of[3]=es,of[4]=fl,of[5]=bc,of[6]=jo,Th[0]=xc,Th[1]=Ms,Th[2]=_a,Th[3]=wc,Th[4]=Kd,Th[5]=ba,Th[6]=Op,Ae=1}else Ae=0}Ae&&(Ae=function(gn,cr){for(gn.M=0;gn.M<gn.Va;++gn.M){var Hn,cn=gn.Jc[gn.M&gn.Xb],fn=gn.m,or=gn;for(Hn=0;Hn<or.za;++Hn){var fr=fn,ar=or,ri=ar.Ac,Lr=ar.Bc+4*Hn,Ii=ar.zc,Jr=ar.ya[ar.aa+Hn];if(ar.Qa.Bb?Jr.$b=Je(fr,ar.Pa.jb[0])?2+Je(fr,ar.Pa.jb[2]):Je(fr,ar.Pa.jb[1]):Jr.$b=0,ar.kc&&(Jr.Ad=Je(fr,ar.Bd)),Jr.Za=!Je(fr,145)+0,Jr.Za){var go=Jr.Ob,Mo=0;for(ar=0;4>ar;++ar){var js,ro=Ii[0+ar];for(js=0;4>js;++js){ro=XE[ri[Lr+js]][ro];for(var Zs=dw[Je(fr,ro[0])];0<Zs;)Zs=dw[2*Zs+Je(fr,ro[Zs])];ro=-Zs,ri[Lr+js]=ro}r(go,Mo,ri,Lr,4),Mo+=4,Ii[0+ar]=ro}}else ro=Je(fr,156)?Je(fr,128)?1:3:Je(fr,163)?2:0,Jr.Ob[0]=ro,i(ri,Lr,ro,4),i(Ii,0,ro,4);Jr.Dd=Je(fr,142)?Je(fr,114)?Je(fr,183)?1:3:2:0}if(or.m.Ka)return za(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(or=cn,fr=(fn=gn).rb[fn.sb-1],ri=fn.rb[fn.sb+fn.ja],Hn=fn.ya[fn.aa+fn.ja],Lr=fn.kc?Hn.Ad:0)fr.la=ri.la=0,Hn.Za||(fr.Na=ri.Na=0),Hn.Hc=0,Hn.Gc=0,Hn.ia=0;else{var $i,bs;if(fr=ri,ri=or,Lr=fn.Pa.Xc,Ii=fn.ya[fn.aa+fn.ja],Jr=fn.pb[Ii.$b],ar=Ii.ad,go=0,Mo=fn.rb[fn.sb-1],ro=js=0,i(ar,go,0,384),Ii.Za)var $a=0,Va=Lr[3];else{Zs=s(16);var Ha=fr.Na+Mo.Na;if(Ha=qp(ri,Lr[1],Ha,Jr.Eb,0,Zs,0),fr.Na=Mo.Na=(0<Ha)+0,1<Ha)Ec(Zs,0,ar,go);else{var pl=Zs[0]+3>>3;for(Zs=0;256>Zs;Zs+=16)ar[go+Zs]=pl}$a=1,Va=Lr[0]}var Fo=15&fr.la,Fl=15&Mo.la;for(Zs=0;4>Zs;++Zs){var ql=1&Fl;for(pl=bs=0;4>pl;++pl)Fo=Fo>>1|(ql=(Ha=qp(ri,Va,Ha=ql+(1&Fo),Jr.Sc,$a,ar,go))>$a)<<7,bs=bs<<2|(3<Ha?3:1<Ha?2:ar[go+0]!=0),go+=16;Fo>>=4,Fl=Fl>>1|ql<<7,js=(js<<8|bs)>>>0}for(Va=Fo,$a=Fl>>4,$i=0;4>$i;$i+=2){for(bs=0,Fo=fr.la>>4+$i,Fl=Mo.la>>4+$i,Zs=0;2>Zs;++Zs){for(ql=1&Fl,pl=0;2>pl;++pl)Ha=ql+(1&Fo),Fo=Fo>>1|(ql=0<(Ha=qp(ri,Lr[2],Ha,Jr.Qc,0,ar,go)))<<3,bs=bs<<2|(3<Ha?3:1<Ha?2:ar[go+0]!=0),go+=16;Fo>>=2,Fl=Fl>>1|ql<<5}ro|=bs<<4*$i,Va|=Fo<<4<<$i,$a|=(240&Fl)<<$i}fr.la=Va,Mo.la=$a,Ii.Hc=js,Ii.Gc=ro,Ii.ia=43690&ro?0:Jr.ia,Lr=!(js|ro)}if(0<fn.L&&(fn.wa[fn.Y+fn.ja]=fn.gd[Hn.$b][Hn.Za],fn.wa[fn.Y+fn.ja].La|=!Lr),or.Ka)return za(gn,7,"Premature end-of-file encountered.")}if(Fp(gn),fn=cr,or=1,Hn=(cn=gn).D,fr=0<cn.L&&cn.M>=cn.zb&&cn.M<=cn.Va,cn.Aa==0)e:{if(Hn.M=cn.M,Hn.uc=fr,$p(cn,Hn),or=1,Hn=(bs=cn.D).Nb,fr=(ro=Xp[cn.L])*cn.R,ri=ro/2*cn.B,Zs=16*Hn*cn.R,pl=8*Hn*cn.B,Lr=cn.sa,Ii=cn.ta-fr+Zs,Jr=cn.qa,ar=cn.ra-ri+pl,go=cn.Ha,Mo=cn.Ia-ri+pl,Fl=(Fo=bs.M)==0,js=Fo>=cn.Va-1,cn.Aa==2&&$p(cn,bs),bs.uc)for(ql=(Ha=cn).D.M,e(Ha.D.uc),bs=Ha.yb;bs<Ha.Hb;++bs){$a=bs,Va=ql;var Gn=(Mr=(Ca=Ha).D).Nb;$i=Ca.R;var Mr=Mr.wa[Mr.Y+$a],nl=Ca.sa,Js=Ca.ta+16*Gn*$i+16*$a,fu=Mr.dd,Ga=Mr.tc;if(Ga!=0)if(e(3<=Ga),Ca.L==1)0<$a&&ra(nl,Js,$i,Ga+4),Mr.La&&id(nl,Js,$i,Ga),0<Va&&Ko(nl,Js,$i,Ga+4),Mr.La&&tl(nl,Js,$i,Ga);else{var rn=Ca.B,af=Ca.qa,Ol=Ca.ra+8*Gn*rn+8*$a,lf=Ca.Ha,Ca=Ca.Ia+8*Gn*rn+8*$a;Gn=Mr.ld,0<$a&&(Qp(nl,Js,$i,Ga+4,fu,Gn),du(af,Ol,lf,Ca,rn,Ga+4,fu,Gn)),Mr.La&&(Sc(nl,Js,$i,Ga,fu,Gn),Ao(af,Ol,lf,Ca,rn,Ga,fu,Gn)),0<Va&&(ef(nl,Js,$i,Ga+4,fu,Gn),tf(af,Ol,lf,Ca,rn,Ga+4,fu,Gn)),Mr.La&&(Gf(nl,Js,$i,Ga,fu,Gn),rd(af,Ol,lf,Ca,rn,Ga,fu,Gn))}}if(cn.ia&&alert("todo:DitherRow"),fn.put!=null){if(bs=16*Fo,Fo=16*(Fo+1),Fl?(fn.y=cn.sa,fn.O=cn.ta+Zs,fn.f=cn.qa,fn.N=cn.ra+pl,fn.ea=cn.Ha,fn.W=cn.Ia+pl):(bs-=ro,fn.y=Lr,fn.O=Ii,fn.f=Jr,fn.N=ar,fn.ea=go,fn.W=Mo),js||(Fo-=ro),Fo>fn.o&&(Fo=fn.o),fn.F=null,fn.J=null,cn.Fa!=null&&0<cn.Fa.length&&bs<Fo&&(fn.J=ig(cn,fn,bs,Fo-bs),fn.F=cn.mb,fn.F==null&&fn.F.length==0)){or=za(cn,3,"Could not decode alpha data.");break e}bs<fn.j&&(ro=fn.j-bs,bs=fn.j,e(!(1&ro)),fn.O+=cn.R*ro,fn.N+=cn.B*(ro>>1),fn.W+=cn.B*(ro>>1),fn.F!=null&&(fn.J+=fn.width*ro)),bs<Fo&&(fn.O+=fn.v,fn.N+=fn.v>>1,fn.W+=fn.v>>1,fn.F!=null&&(fn.J+=fn.v),fn.ka=bs-fn.j,fn.U=fn.va-fn.v,fn.T=Fo-bs,or=fn.put(fn))}Hn+1!=cn.Ic||js||(r(cn.sa,cn.ta-fr,Lr,Ii+16*cn.R,fr),r(cn.qa,cn.ra-ri,Jr,ar+8*cn.B,ri),r(cn.Ha,cn.Ia-ri,go,Mo+8*cn.B,ri))}if(!or)return za(gn,6,"Output aborted.")}return 1}($,Z)),Z.bc!=null&&Z.bc(Z),Ae&=1}return Ae?($.cb=0,Ae):0}function po($,Z,Ae,Se,Pe){Pe=$[Z+Ae+32*Se]+(Pe>>3),$[Z+Ae+32*Se]=-256&Pe?0>Pe?0:255:Pe}function Qi($,Z,Ae,Se,Pe,nt){po($,Z,0,Ae,Se+Pe),po($,Z,1,Ae,Se+nt),po($,Z,2,Ae,Se-nt),po($,Z,3,Ae,Se-Pe)}function $c($){return(20091*$>>16)+$}function zf($,Z,Ae,Se){var Pe,nt=0,st=s(16);for(Pe=0;4>Pe;++Pe){var ht=$[Z+0]+$[Z+8],At=$[Z+0]-$[Z+8],ot=(35468*$[Z+4]>>16)-$c($[Z+12]),nn=$c($[Z+4])+(35468*$[Z+12]>>16);st[nt+0]=ht+nn,st[nt+1]=At+ot,st[nt+2]=At-ot,st[nt+3]=ht-nn,nt+=4,Z++}for(Pe=nt=0;4>Pe;++Pe)ht=($=st[nt+0]+4)+st[nt+8],At=$-st[nt+8],ot=(35468*st[nt+4]>>16)-$c(st[nt+12]),po(Ae,Se,0,0,ht+(nn=$c(st[nt+4])+(35468*st[nt+12]>>16))),po(Ae,Se,1,0,At+ot),po(Ae,Se,2,0,At-ot),po(Ae,Se,3,0,ht-nn),nt++,Se+=32}function ng($,Z,Ae,Se){var Pe=$[Z+0]+4,nt=35468*$[Z+4]>>16,st=$c($[Z+4]),ht=35468*$[Z+1]>>16;Qi(Ae,Se,0,Pe+st,$=$c($[Z+1]),ht),Qi(Ae,Se,1,Pe+nt,$,ht),Qi(Ae,Se,2,Pe-nt,$,ht),Qi(Ae,Se,3,Pe-st,$,ht)}function N_($,Z,Ae,Se,Pe){zf($,Z,Ae,Se),Pe&&zf($,Z+16,Ae,Se+4)}function Tu($,Z,Ae,Se){nd($,Z+0,Ae,Se,1),nd($,Z+32,Ae,Se+128,1)}function Cm($,Z,Ae,Se){var Pe;for($=$[Z+0]+4,Pe=0;4>Pe;++Pe)for(Z=0;4>Z;++Z)po(Ae,Se,Z,Pe,$)}function w0($,Z,Ae,Se){$[Z+0]&&Rl($,Z+0,Ae,Se),$[Z+16]&&Rl($,Z+16,Ae,Se+4),$[Z+32]&&Rl($,Z+32,Ae,Se+128),$[Z+48]&&Rl($,Z+48,Ae,Se+128+4)}function $f($,Z,Ae,Se){var Pe,nt=s(16);for(Pe=0;4>Pe;++Pe){var st=$[Z+0+Pe]+$[Z+12+Pe],ht=$[Z+4+Pe]+$[Z+8+Pe],At=$[Z+4+Pe]-$[Z+8+Pe],ot=$[Z+0+Pe]-$[Z+12+Pe];nt[0+Pe]=st+ht,nt[8+Pe]=st-ht,nt[4+Pe]=ot+At,nt[12+Pe]=ot-At}for(Pe=0;4>Pe;++Pe)st=($=nt[0+4*Pe]+3)+nt[3+4*Pe],ht=nt[1+4*Pe]+nt[2+4*Pe],At=nt[1+4*Pe]-nt[2+4*Pe],ot=$-nt[3+4*Pe],Ae[Se+0]=st+ht>>3,Ae[Se+16]=ot+At>>3,Ae[Se+32]=st-ht>>3,Ae[Se+48]=ot-At>>3,Se+=64}function yr($,Z,Ae){var Se,Pe=Z-32,nt=jc,st=255-$[Pe-1];for(Se=0;Se<Ae;++Se){var ht,At=nt,ot=st+$[Z-1];for(ht=0;ht<Ae;++ht)$[Z+ht]=At[ot+$[Pe+ht]];Z+=32}}function Bs($,Z){yr($,Z,4)}function Ms($,Z){yr($,Z,8)}function ou($,Z){yr($,Z,16)}function au($,Z){var Ae;for(Ae=0;16>Ae;++Ae)r($,Z+32*Ae,$,Z-32,16)}function es($,Z){var Ae;for(Ae=16;0<Ae;--Ae)i($,Z,$[Z-1],16),Z+=32}function Vd($,Z,Ae){var Se;for(Se=0;16>Se;++Se)i(Z,Ae+32*Se,$,16)}function Hd($,Z){var Ae,Se=16;for(Ae=0;16>Ae;++Ae)Se+=$[Z-1+32*Ae]+$[Z+Ae-32];Vd(Se>>5,$,Z)}function fl($,Z){var Ae,Se=8;for(Ae=0;16>Ae;++Ae)Se+=$[Z-1+32*Ae];Vd(Se>>4,$,Z)}function bc($,Z){var Ae,Se=8;for(Ae=0;16>Ae;++Ae)Se+=$[Z+Ae-32];Vd(Se>>4,$,Z)}function jo($,Z){Vd(128,$,Z)}function ir($,Z,Ae){return $+2*Z+Ae+2>>2}function Gd($,Z){var Ae,Se=Z-32;for(Se=new Uint8Array([ir($[Se-1],$[Se+0],$[Se+1]),ir($[Se+0],$[Se+1],$[Se+2]),ir($[Se+1],$[Se+2],$[Se+3]),ir($[Se+2],$[Se+3],$[Se+4])]),Ae=0;4>Ae;++Ae)r($,Z+32*Ae,Se,0,Se.length)}function di($,Z){var Ae=$[Z-1],Se=$[Z-1+32],Pe=$[Z-1+64],nt=$[Z-1+96];je($,Z+0,16843009*ir($[Z-1-32],Ae,Se)),je($,Z+32,16843009*ir(Ae,Se,Pe)),je($,Z+64,16843009*ir(Se,Pe,nt)),je($,Z+96,16843009*ir(Pe,nt,nt))}function Kl($,Z){var Ae,Se=4;for(Ae=0;4>Ae;++Ae)Se+=$[Z+Ae-32]+$[Z-1+32*Ae];for(Se>>=3,Ae=0;4>Ae;++Ae)i($,Z+32*Ae,Se,4)}function Ui($,Z){var Ae=$[Z-1+0],Se=$[Z-1+32],Pe=$[Z-1+64],nt=$[Z-1-32],st=$[Z+0-32],ht=$[Z+1-32],At=$[Z+2-32],ot=$[Z+3-32];$[Z+0+96]=ir(Se,Pe,$[Z-1+96]),$[Z+1+96]=$[Z+0+64]=ir(Ae,Se,Pe),$[Z+2+96]=$[Z+1+64]=$[Z+0+32]=ir(nt,Ae,Se),$[Z+3+96]=$[Z+2+64]=$[Z+1+32]=$[Z+0+0]=ir(st,nt,Ae),$[Z+3+64]=$[Z+2+32]=$[Z+1+0]=ir(ht,st,nt),$[Z+3+32]=$[Z+2+0]=ir(At,ht,st),$[Z+3+0]=ir(ot,At,ht)}function Qd($,Z){var Ae=$[Z+1-32],Se=$[Z+2-32],Pe=$[Z+3-32],nt=$[Z+4-32],st=$[Z+5-32],ht=$[Z+6-32],At=$[Z+7-32];$[Z+0+0]=ir($[Z+0-32],Ae,Se),$[Z+1+0]=$[Z+0+32]=ir(Ae,Se,Pe),$[Z+2+0]=$[Z+1+32]=$[Z+0+64]=ir(Se,Pe,nt),$[Z+3+0]=$[Z+2+32]=$[Z+1+64]=$[Z+0+96]=ir(Pe,nt,st),$[Z+3+32]=$[Z+2+64]=$[Z+1+96]=ir(nt,st,ht),$[Z+3+64]=$[Z+2+96]=ir(st,ht,At),$[Z+3+96]=ir(ht,At,At)}function Fa($,Z){var Ae=$[Z-1+0],Se=$[Z-1+32],Pe=$[Z-1+64],nt=$[Z-1-32],st=$[Z+0-32],ht=$[Z+1-32],At=$[Z+2-32],ot=$[Z+3-32];$[Z+0+0]=$[Z+1+64]=nt+st+1>>1,$[Z+1+0]=$[Z+2+64]=st+ht+1>>1,$[Z+2+0]=$[Z+3+64]=ht+At+1>>1,$[Z+3+0]=At+ot+1>>1,$[Z+0+96]=ir(Pe,Se,Ae),$[Z+0+64]=ir(Se,Ae,nt),$[Z+0+32]=$[Z+1+96]=ir(Ae,nt,st),$[Z+1+32]=$[Z+2+96]=ir(nt,st,ht),$[Z+2+32]=$[Z+3+96]=ir(st,ht,At),$[Z+3+32]=ir(ht,At,ot)}function Yr($,Z){var Ae=$[Z+0-32],Se=$[Z+1-32],Pe=$[Z+2-32],nt=$[Z+3-32],st=$[Z+4-32],ht=$[Z+5-32],At=$[Z+6-32],ot=$[Z+7-32];$[Z+0+0]=Ae+Se+1>>1,$[Z+1+0]=$[Z+0+64]=Se+Pe+1>>1,$[Z+2+0]=$[Z+1+64]=Pe+nt+1>>1,$[Z+3+0]=$[Z+2+64]=nt+st+1>>1,$[Z+0+32]=ir(Ae,Se,Pe),$[Z+1+32]=$[Z+0+96]=ir(Se,Pe,nt),$[Z+2+32]=$[Z+1+96]=ir(Pe,nt,st),$[Z+3+32]=$[Z+2+96]=ir(nt,st,ht),$[Z+3+64]=ir(st,ht,At),$[Z+3+96]=ir(ht,At,ot)}function x0($,Z){var Ae=$[Z-1+0],Se=$[Z-1+32],Pe=$[Z-1+64],nt=$[Z-1+96];$[Z+0+0]=Ae+Se+1>>1,$[Z+2+0]=$[Z+0+32]=Se+Pe+1>>1,$[Z+2+32]=$[Z+0+64]=Pe+nt+1>>1,$[Z+1+0]=ir(Ae,Se,Pe),$[Z+3+0]=$[Z+1+32]=ir(Se,Pe,nt),$[Z+3+32]=$[Z+1+64]=ir(Pe,nt,nt),$[Z+3+64]=$[Z+2+64]=$[Z+0+96]=$[Z+1+96]=$[Z+2+96]=$[Z+3+96]=nt}function jd($,Z){var Ae=$[Z-1+0],Se=$[Z-1+32],Pe=$[Z-1+64],nt=$[Z-1+96],st=$[Z-1-32],ht=$[Z+0-32],At=$[Z+1-32],ot=$[Z+2-32];$[Z+0+0]=$[Z+2+32]=Ae+st+1>>1,$[Z+0+32]=$[Z+2+64]=Se+Ae+1>>1,$[Z+0+64]=$[Z+2+96]=Pe+Se+1>>1,$[Z+0+96]=nt+Pe+1>>1,$[Z+3+0]=ir(ht,At,ot),$[Z+2+0]=ir(st,ht,At),$[Z+1+0]=$[Z+3+32]=ir(Ae,st,ht),$[Z+1+32]=$[Z+3+64]=ir(Se,Ae,st),$[Z+1+64]=$[Z+3+96]=ir(Pe,Se,Ae),$[Z+1+96]=ir(nt,Pe,Se)}function _a($,Z){var Ae;for(Ae=0;8>Ae;++Ae)r($,Z+32*Ae,$,Z-32,8)}function wc($,Z){var Ae;for(Ae=0;8>Ae;++Ae)i($,Z,$[Z-1],8),Z+=32}function lu($,Z,Ae){var Se;for(Se=0;8>Se;++Se)i(Z,Ae+32*Se,$,8)}function xc($,Z){var Ae,Se=8;for(Ae=0;8>Ae;++Ae)Se+=$[Z+Ae-32]+$[Z-1+32*Ae];lu(Se>>4,$,Z)}function ba($,Z){var Ae,Se=4;for(Ae=0;8>Ae;++Ae)Se+=$[Z+Ae-32];lu(Se>>3,$,Z)}function Kd($,Z){var Ae,Se=4;for(Ae=0;8>Ae;++Ae)Se+=$[Z-1+32*Ae];lu(Se>>3,$,Z)}function Op($,Z){lu(128,$,Z)}function cu($,Z,Ae){var Se=$[Z-Ae],Pe=$[Z+0],nt=3*(Pe-Se)+jf[1020+$[Z-2*Ae]-$[Z+Ae]],st=nf[112+(nt+4>>3)];$[Z-Ae]=jc[255+Se+nf[112+(nt+3>>3)]],$[Z+0]=jc[255+Pe-st]}function Wd($,Z,Ae,Se){var Pe=$[Z+0],nt=$[Z+Ae];return Ic[255+$[Z-2*Ae]-$[Z-Ae]]>Se||Ic[255+nt-Pe]>Se}function Yh($,Z,Ae,Se){return 4*Ic[255+$[Z-Ae]-$[Z+0]]+Ic[255+$[Z-2*Ae]-$[Z+Ae]]<=Se}function qd($,Z,Ae,Se,Pe){var nt=$[Z-3*Ae],st=$[Z-2*Ae],ht=$[Z-Ae],At=$[Z+0],ot=$[Z+Ae],nn=$[Z+2*Ae],In=$[Z+3*Ae];return 4*Ic[255+ht-At]+Ic[255+st-ot]>Se?0:Ic[255+$[Z-4*Ae]-nt]<=Pe&&Ic[255+nt-st]<=Pe&&Ic[255+st-ht]<=Pe&&Ic[255+In-nn]<=Pe&&Ic[255+nn-ot]<=Pe&&Ic[255+ot-At]<=Pe}function uu($,Z,Ae,Se){var Pe=2*Se+1;for(Se=0;16>Se;++Se)Yh($,Z+Se,Ae,Pe)&&cu($,Z+Se,Ae)}function qu($,Z,Ae,Se){var Pe=2*Se+1;for(Se=0;16>Se;++Se)Yh($,Z+Se*Ae,1,Pe)&&cu($,Z+Se*Ae,1)}function Cc($,Z,Ae,Se){var Pe;for(Pe=3;0<Pe;--Pe)uu($,Z+=4*Ae,Ae,Se)}function Np($,Z,Ae,Se){var Pe;for(Pe=3;0<Pe;--Pe)qu($,Z+=4,Ae,Se)}function Yd($,Z,Ae,Se,Pe,nt,st,ht){for(nt=2*nt+1;0<Pe--;){if(qd($,Z,Ae,nt,st))if(Wd($,Z,Ae,ht))cu($,Z,Ae);else{var At=$,ot=Z,nn=Ae,In=At[ot-2*nn],Bn=At[ot-nn],gn=At[ot+0],cr=At[ot+nn],Hn=At[ot+2*nn],cn=27*(or=jf[1020+3*(gn-Bn)+jf[1020+In-cr]])+63>>7,fn=18*or+63>>7,or=9*or+63>>7;At[ot-3*nn]=jc[255+At[ot-3*nn]+or],At[ot-2*nn]=jc[255+In+fn],At[ot-nn]=jc[255+Bn+cn],At[ot+0]=jc[255+gn-cn],At[ot+nn]=jc[255+cr-fn],At[ot+2*nn]=jc[255+Hn-or]}Z+=Se}}function Wl($,Z,Ae,Se,Pe,nt,st,ht){for(nt=2*nt+1;0<Pe--;){if(qd($,Z,Ae,nt,st))if(Wd($,Z,Ae,ht))cu($,Z,Ae);else{var At=$,ot=Z,nn=Ae,In=At[ot-nn],Bn=At[ot+0],gn=At[ot+nn],cr=nf[112+((Hn=3*(Bn-In))+4>>3)],Hn=nf[112+(Hn+3>>3)],cn=cr+1>>1;At[ot-2*nn]=jc[255+At[ot-2*nn]+cn],At[ot-nn]=jc[255+In+Hn],At[ot+0]=jc[255+Bn-cr],At[ot+nn]=jc[255+gn-cn]}Z+=Se}}function rg($,Z,Ae,Se,Pe,nt){Yd($,Z,Ae,1,16,Se,Pe,nt)}function ji($,Z,Ae,Se,Pe,nt){Yd($,Z,1,Ae,16,Se,Pe,nt)}function kp($,Z,Ae,Se,Pe,nt){var st;for(st=3;0<st;--st)Wl($,Z+=4*Ae,Ae,1,16,Se,Pe,nt)}function Vf($,Z,Ae,Se,Pe,nt){var st;for(st=3;0<st;--st)Wl($,Z+=4,1,Ae,16,Se,Pe,nt)}function k_($,Z,Ae,Se,Pe,nt,st,ht){Yd($,Z,Pe,1,8,nt,st,ht),Yd(Ae,Se,Pe,1,8,nt,st,ht)}function Em($,Z,Ae,Se,Pe,nt,st,ht){Yd($,Z,1,Pe,8,nt,st,ht),Yd(Ae,Se,1,Pe,8,nt,st,ht)}function Yu($,Z,Ae,Se,Pe,nt,st,ht){Wl($,Z+4*Pe,Pe,1,8,nt,st,ht),Wl(Ae,Se+4*Pe,Pe,1,8,nt,st,ht)}function Ch($,Z,Ae,Se,Pe,nt,st,ht){Wl($,Z+4,1,Pe,8,nt,st,ht),Wl(Ae,Se+4,1,Pe,8,nt,st,ht)}function Xd(){this.ba=new Qr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xh(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Dp(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xu(){this.ua=0,this.Wa=new He,this.vb=new He,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ce,this.yc=new Y}function Zh(){this.xb=this.a=0,this.l=new Df,this.ca=new Qr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ae,this.Pb=0,this.wd=new ae,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xu,this.ab=0,this.gc=a(4,Dp),this.Oc=0}function Jh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Df,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zd($,Z,Ae,Se,Pe,nt,st){for($=$==null?0:$[Z+0],Z=0;Z<st;++Z)Pe[nt+Z]=$+Ae[Se+Z]&255,$=Pe[nt+Z]}function Up($,Z,Ae,Se,Pe,nt,st){var ht;if($==null)Zd(null,null,Ae,Se,Pe,nt,st);else for(ht=0;ht<st;++ht)Pe[nt+ht]=$[Z+ht]+Ae[Se+ht]&255}function vl($,Z,Ae,Se,Pe,nt,st){if($==null)Zd(null,null,Ae,Se,Pe,nt,st);else{var ht,At=$[Z+0],ot=At,nn=At;for(ht=0;ht<st;++ht)ot=nn+(At=$[Z+ht])-ot,nn=Ae[Se+ht]+(-256&ot?0>ot?0:255:ot)&255,ot=At,Pe[nt+ht]=nn}}function ig($,Z,Ae,Se){var Pe=Z.width,nt=Z.o;if(e($!=null&&Z!=null),0>Ae||0>=Se||Ae+Se>nt)return null;if(!$.Cc){if($.ga==null){var st;if($.ga=new Jh,(st=$.ga==null)||(st=Z.width*Z.o,e($.Gb.length==0),$.Gb=s(st),$.Uc=0,$.Gb==null?st=0:($.mb=$.Gb,$.nb=$.Uc,$.rc=null,st=1),st=!st),!st){st=$.ga;var ht=$.Fa,At=$.P,ot=$.qc,nn=$.mb,In=$.nb,Bn=At+1,gn=ot-1,cr=st.l;if(e(ht!=null&&nn!=null&&Z!=null),sd[0]=null,sd[1]=Zd,sd[2]=Up,sd[3]=vl,st.ca=nn,st.tb=In,st.c=Z.width,st.i=Z.height,e(0<st.c&&0<st.i),1>=ot)Z=0;else if(st.$a=ht[At+0]>>0&3,st.Z=ht[At+0]>>2&3,st.Lc=ht[At+0]>>4&3,At=ht[At+0]>>6&3,0>st.$a||1<st.$a||4<=st.Z||1<st.Lc||At)Z=0;else if(cr.put=is,cr.ac=bi,cr.bc=Fs,cr.ma=st,cr.width=Z.width,cr.height=Z.height,cr.Da=Z.Da,cr.v=Z.v,cr.va=Z.va,cr.j=Z.j,cr.o=Z.o,st.$a)e:{e(st.$a==1),Z=Nr();t:for(;;){if(Z==null){Z=0;break e}if(e(st!=null),st.mc=Z,Z.c=st.c,Z.i=st.i,Z.l=st.l,Z.l.ma=st,Z.l.width=st.c,Z.l.height=st.i,Z.a=0,pe(Z.m,ht,Bn,gn),!si(st.c,st.i,1,Z,null)||(Z.ab==1&&Z.gc[0].hc==3&&sn(Z.s)?(st.ic=1,ht=Z.c*Z.i,Z.Ta=null,Z.Ua=0,Z.V=s(ht),Z.Ba=0,Z.V==null?(Z.a=1,Z=0):Z=1):(st.ic=0,Z=Tn(Z,st.c)),!Z))break t;Z=1;break e}st.mc=null,Z=0}else Z=gn>=st.c*st.i;st=!Z}if(st)return null;$.ga.Lc!=1?$.Ga=0:Se=nt-Ae}e($.ga!=null),e(Ae+Se<=nt);e:{if(Z=(ht=$.ga).c,nt=ht.l.o,ht.$a==0){if(Bn=$.rc,gn=$.Vc,cr=$.Fa,At=$.P+1+Ae*Z,ot=$.mb,nn=$.nb+Ae*Z,e(At<=$.P+$.qc),ht.Z!=0)for(e(sd[ht.Z]!=null),st=0;st<Se;++st)sd[ht.Z](Bn,gn,cr,At,ot,nn,Z),Bn=ot,gn=nn,nn+=Z,At+=Z;else for(st=0;st<Se;++st)r(ot,nn,cr,At,Z),Bn=ot,gn=nn,nn+=Z,At+=Z;$.rc=Bn,$.Vc=gn}else{if(e(ht.mc!=null),Z=Ae+Se,e((st=ht.mc)!=null),e(Z<=st.i),st.C>=Z)Z=1;else if(ht.ic||xn(),ht.ic){ht=st.V,Bn=st.Ba,gn=st.c;var Hn=st.i,cn=(cr=1,At=st.$/gn,ot=st.$%gn,nn=st.m,In=st.s,st.$),fn=gn*Hn,or=gn*Z,fr=In.wc,ar=cn<or?En(In,ot,At):null;e(cn<=fn),e(Z<=Hn),e(sn(In));t:for(;;){for(;!nn.h&&cn<or;){if(ot&fr||(ar=En(In,ot,At)),e(ar!=null),Re(nn),256>(Hn=en(ar.G[0],ar.H[0],nn)))ht[Bn+cn]=Hn,++cn,++ot>=gn&&(ot=0,++At<=Z&&!(At%16)&&Rn(st,At));else{if(!(280>Hn)){cr=0;break t}Hn=ss(Hn-256,nn);var ri,Lr=en(ar.G[4],ar.H[4],nn);if(Re(nn),!(cn>=(Lr=Zi(gn,Lr=ss(Lr,nn)))&&fn-cn>=Hn)){cr=0;break t}for(ri=0;ri<Hn;++ri)ht[Bn+cn+ri]=ht[Bn+cn+ri-Lr];for(cn+=Hn,ot+=Hn;ot>=gn;)ot-=gn,++At<=Z&&!(At%16)&&Rn(st,At);cn<or&&ot&fr&&(ar=En(In,ot,At))}e(nn.h==_e(nn))}Rn(st,At>Z?Z:At);break t}!cr||nn.h&&cn<fn?(cr=0,st.a=nn.h?5:3):st.$=cn,Z=cr}else Z=er(st,st.V,st.Ba,st.c,st.i,Z,jt);if(!Z){Se=0;break e}}Ae+Se>=nt&&($.Cc=1),Se=1}if(!Se)return null;if($.Cc&&((Se=$.ga)!=null&&(Se.mc=null),$.ga=null,0<$.Ga))return alert("todo:WebPDequantizeLevels"),null}return $.nb+Ae*Pe}function de($,Z,Ae,Se,Pe,nt){for(;0<Pe--;){var st,ht=$,At=Z+(Ae?1:0),ot=$,nn=Z+(Ae?0:3);for(st=0;st<Se;++st){var In=ot[nn+4*st];In!=255&&(In*=32897,ht[At+4*st+0]=ht[At+4*st+0]*In>>23,ht[At+4*st+1]=ht[At+4*st+1]*In>>23,ht[At+4*st+2]=ht[At+4*st+2]*In>>23)}Z+=nt}}function We($,Z,Ae,Se,Pe){for(;0<Se--;){var nt;for(nt=0;nt<Ae;++nt){var st=$[Z+2*nt+0],ht=15&(ot=$[Z+2*nt+1]),At=4369*ht,ot=(240&ot|ot>>4)*At>>16;$[Z+2*nt+0]=(240&st|st>>4)*At>>16&240|(15&st|st<<4)*At>>16>>4&15,$[Z+2*nt+1]=240&ot|ht}Z+=Pe}}function Ot($,Z,Ae,Se,Pe,nt,st,ht){var At,ot,nn=255;for(ot=0;ot<Pe;++ot){for(At=0;At<Se;++At){var In=$[Z+At];nt[st+4*At]=In,nn&=In}Z+=Ae,st+=ht}return nn!=255}function Jt($,Z,Ae,Se,Pe){var nt;for(nt=0;nt<Pe;++nt)Ae[Se+nt]=$[Z+nt]>>8}function xn(){Qf=de,Tc=We,jp=Ot,Mm=Jt}function Wn($,Z,Ae){G[$]=function(Se,Pe,nt,st,ht,At,ot,nn,In,Bn,gn,cr,Hn,cn,fn,or,fr){var ar,ri=fr-1>>1,Lr=ht[At+0]|ot[nn+0]<<16,Ii=In[Bn+0]|gn[cr+0]<<16;e(Se!=null);var Jr=3*Lr+Ii+131074>>2;for(Z(Se[Pe+0],255&Jr,Jr>>16,Hn,cn),nt!=null&&(Jr=3*Ii+Lr+131074>>2,Z(nt[st+0],255&Jr,Jr>>16,fn,or)),ar=1;ar<=ri;++ar){var go=ht[At+ar]|ot[nn+ar]<<16,Mo=In[Bn+ar]|gn[cr+ar]<<16,js=Lr+go+Ii+Mo+524296,ro=js+2*(go+Ii)>>3;Jr=ro+Lr>>1,Lr=(js=js+2*(Lr+Mo)>>3)+go>>1,Z(Se[Pe+2*ar-1],255&Jr,Jr>>16,Hn,cn+(2*ar-1)*Ae),Z(Se[Pe+2*ar-0],255&Lr,Lr>>16,Hn,cn+(2*ar-0)*Ae),nt!=null&&(Jr=js+Ii>>1,Lr=ro+Mo>>1,Z(nt[st+2*ar-1],255&Jr,Jr>>16,fn,or+(2*ar-1)*Ae),Z(nt[st+2*ar+0],255&Lr,Lr>>16,fn,or+(2*ar+0)*Ae)),Lr=go,Ii=Mo}1&fr||(Jr=3*Lr+Ii+131074>>2,Z(Se[Pe+fr-1],255&Jr,Jr>>16,Hn,cn+(fr-1)*Ae),nt!=null&&(Jr=3*Ii+Lr+131074>>2,Z(nt[st+fr-1],255&Jr,Jr>>16,fn,or+(fr-1)*Ae)))}}function xr(){Pl[rf]=fg,Pl[Bc]=Wf,Pl[Kp]=Q_,Pl[ug]=j_,Pl[Wp]=km,Pl[Pm]=B0,Pl[sf]=Aw,Pl[ds]=Wf,Pl[Fm]=j_,Pl[S0]=km,Pl[hg]=B0}function ei($){return $&~ZE?0>$?0:255:$>>gg}function Ci($,Z){return ei((19077*$>>8)+(26149*Z>>8)-14234)}function _s($,Z,Ae){return ei((19077*$>>8)-(6419*Z>>8)-(13320*Ae>>8)+8708)}function ts($,Z){return ei((19077*$>>8)+(33050*Z>>8)-17685)}function zn($,Z,Ae,Se,Pe){Se[Pe+0]=Ci($,Ae),Se[Pe+1]=_s($,Z,Ae),Se[Pe+2]=ts($,Z)}function na($,Z,Ae,Se,Pe){Se[Pe+0]=ts($,Z),Se[Pe+1]=_s($,Z,Ae),Se[Pe+2]=Ci($,Ae)}function wa($,Z,Ae,Se,Pe){var nt=_s($,Z,Ae);Z=nt<<3&224|ts($,Z)>>3,Se[Pe+0]=248&Ci($,Ae)|nt>>5,Se[Pe+1]=Z}function xa($,Z,Ae,Se,Pe){var nt=240&ts($,Z)|15;Se[Pe+0]=240&Ci($,Ae)|_s($,Z,Ae)>>4,Se[Pe+1]=nt}function Ml($,Z,Ae,Se,Pe){Se[Pe+0]=255,zn($,Z,Ae,Se,Pe+1)}function fa($,Z,Ae,Se,Pe){na($,Z,Ae,Se,Pe),Se[Pe+3]=255}function el($,Z,Ae,Se,Pe){zn($,Z,Ae,Se,Pe),Se[Pe+3]=255}function Vc($,Z){return 0>$?0:$>Z?Z:$}function Hc($,Z,Ae){G[$]=function(Se,Pe,nt,st,ht,At,ot,nn,In){for(var Bn=nn+(-2&In)*Ae;nn!=Bn;)Z(Se[Pe+0],nt[st+0],ht[At+0],ot,nn),Z(Se[Pe+1],nt[st+0],ht[At+0],ot,nn+Ae),Pe+=2,++st,++At,nn+=2*Ae;1&In&&Z(Se[Pe+0],nt[st+0],ht[At+0],ot,nn)}}function zp($,Z,Ae){return Ae==0?$==0?Z==0?6:5:Z==0?4:0:Ae}function Eh($,Z,Ae,Se,Pe){switch($>>>30){case 3:nd(Z,Ae,Se,Pe,0);break;case 2:Jd(Z,Ae,Se,Pe);break;case 1:Rl(Z,Ae,Se,Pe)}}function $p($,Z){var Ae,Se,Pe=Z.M,nt=Z.Nb,st=$.oc,ht=$.pc+40,At=$.oc,ot=$.pc+584,nn=$.oc,In=$.pc+600;for(Ae=0;16>Ae;++Ae)st[ht+32*Ae-1]=129;for(Ae=0;8>Ae;++Ae)At[ot+32*Ae-1]=129,nn[In+32*Ae-1]=129;for(0<Pe?st[ht-1-32]=At[ot-1-32]=nn[In-1-32]=129:(i(st,ht-32-1,127,21),i(At,ot-32-1,127,9),i(nn,In-32-1,127,9)),Se=0;Se<$.za;++Se){var Bn=Z.ya[Z.aa+Se];if(0<Se){for(Ae=-1;16>Ae;++Ae)r(st,ht+32*Ae-4,st,ht+32*Ae+12,4);for(Ae=-1;8>Ae;++Ae)r(At,ot+32*Ae-4,At,ot+32*Ae+4,4),r(nn,In+32*Ae-4,nn,In+32*Ae+4,4)}var gn=$.Gd,cr=$.Hd+Se,Hn=Bn.ad,cn=Bn.Hc;if(0<Pe&&(r(st,ht-32,gn[cr].y,0,16),r(At,ot-32,gn[cr].f,0,8),r(nn,In-32,gn[cr].ea,0,8)),Bn.Za){var fn=st,or=ht-32+16;for(0<Pe&&(Se>=$.za-1?i(fn,or,gn[cr].y[15],4):r(fn,or,gn[cr+1].y,0,4)),Ae=0;4>Ae;Ae++)fn[or+128+Ae]=fn[or+256+Ae]=fn[or+384+Ae]=fn[or+0+Ae];for(Ae=0;16>Ae;++Ae,cn<<=2)fn=st,or=ht+mg[Ae],Mu[Bn.Ob[Ae]](fn,or),Eh(cn,Hn,16*+Ae,fn,or)}else if(fn=zp(Se,Pe,Bn.Ob[0]),of[fn](st,ht),cn!=0)for(Ae=0;16>Ae;++Ae,cn<<=2)Eh(cn,Hn,16*+Ae,st,ht+mg[Ae]);for(Ae=Bn.Gc,fn=zp(Se,Pe,Bn.Dd),Th[fn](At,ot),Th[fn](nn,In),cn=Hn,fn=At,or=ot,255&(Bn=Ae>>0)&&(170&Bn?pa(cn,256,fn,or):Oa(cn,256,fn,or)),Bn=nn,cn=In,255&(Ae>>=8)&&(170&Ae?pa(Hn,320,Bn,cn):Oa(Hn,320,Bn,cn)),Pe<$.Ub-1&&(r(gn[cr].y,0,st,ht+480,16),r(gn[cr].f,0,At,ot+224,8),r(gn[cr].ea,0,nn,In+224,8)),Ae=8*nt*$.B,gn=$.sa,cr=$.ta+16*Se+16*nt*$.R,Hn=$.qa,Bn=$.ra+8*Se+Ae,cn=$.Ha,fn=$.Ia+8*Se+Ae,Ae=0;16>Ae;++Ae)r(gn,cr+Ae*$.R,st,ht+32*Ae,16);for(Ae=0;8>Ae;++Ae)r(Hn,Bn+Ae*$.B,At,ot+32*Ae,8),r(cn,fn+Ae*$.B,nn,In+32*Ae,8)}}function sg($,Z,Ae,Se,Pe,nt,st,ht,At){var ot=[0],nn=[0],In=0,Bn=At!=null?At.kd:0,gn=At??new Xh;if($==null||12>Ae)return 7;gn.data=$,gn.w=Z,gn.ha=Ae,Z=[Z],Ae=[Ae],gn.gb=[gn.gb];e:{var cr=Z,Hn=Ae,cn=gn.gb;if(e($!=null),e(Hn!=null),e(cn!=null),cn[0]=0,12<=Hn[0]&&!n($,cr[0],"RIFF")){if(n($,cr[0]+8,"WEBP")){cn=3;break e}var fn=ke($,cr[0]+4);if(12>fn||4294967286<fn){cn=3;break e}if(Bn&&fn>Hn[0]-8){cn=7;break e}cn[0]=fn,cr[0]+=12,Hn[0]-=12}cn=0}if(cn!=0)return cn;for(fn=0<gn.gb[0],Ae=Ae[0];;){e:{var or=$;Hn=Z,cn=Ae;var fr=ot,ar=nn,ri=cr=[0];if((Jr=In=[In])[0]=0,8>cn[0])cn=7;else{if(!n(or,Hn[0],"VP8X")){if(ke(or,Hn[0]+4)!=10){cn=3;break e}if(18>cn[0]){cn=7;break e}var Lr=ke(or,Hn[0]+8),Ii=1+Et(or,Hn[0]+12);if(2147483648<=Ii*(or=1+Et(or,Hn[0]+15))){cn=3;break e}ri!=null&&(ri[0]=Lr),fr!=null&&(fr[0]=Ii),ar!=null&&(ar[0]=or),Hn[0]+=18,cn[0]-=18,Jr[0]=1}cn=0}}if(In=In[0],cr=cr[0],cn!=0)return cn;if(Hn=!!(2&cr),!fn&&In)return 3;if(nt!=null&&(nt[0]=!!(16&cr)),st!=null&&(st[0]=Hn),ht!=null&&(ht[0]=0),st=ot[0],cr=nn[0],In&&Hn&&At==null){cn=0;break}if(4>Ae){cn=7;break}if(fn&&In||!fn&&!In&&!n($,Z[0],"ALPH")){Ae=[Ae],gn.na=[gn.na],gn.P=[gn.P],gn.Sa=[gn.Sa];e:{Lr=$,cn=Z,fn=Ae;var Jr=gn.gb;fr=gn.na,ar=gn.P,ri=gn.Sa,Ii=22,e(Lr!=null),e(fn!=null),or=cn[0];var go=fn[0];for(e(fr!=null),e(ri!=null),fr[0]=null,ar[0]=null,ri[0]=0;;){if(cn[0]=or,fn[0]=go,8>go){cn=7;break e}var Mo=ke(Lr,or+4);if(4294967286<Mo){cn=3;break e}var js=8+Mo+1&-2;if(Ii+=js,0<Jr&&Ii>Jr){cn=3;break e}if(!n(Lr,or,"VP8 ")||!n(Lr,or,"VP8L")){cn=0;break e}if(go[0]<js){cn=7;break e}n(Lr,or,"ALPH")||(fr[0]=Lr,ar[0]=or+8,ri[0]=Mo),or+=js,go-=js}}if(Ae=Ae[0],gn.na=gn.na[0],gn.P=gn.P[0],gn.Sa=gn.Sa[0],cn!=0)break}Ae=[Ae],gn.Ja=[gn.Ja],gn.xa=[gn.xa];e:if(Jr=$,cn=Z,fn=Ae,fr=gn.gb[0],ar=gn.Ja,ri=gn.xa,Lr=cn[0],or=!n(Jr,Lr,"VP8 "),Ii=!n(Jr,Lr,"VP8L"),e(Jr!=null),e(fn!=null),e(ar!=null),e(ri!=null),8>fn[0])cn=7;else{if(or||Ii){if(Jr=ke(Jr,Lr+4),12<=fr&&Jr>fr-12){cn=3;break e}if(Bn&&Jr>fn[0]-8){cn=7;break e}ar[0]=Jr,cn[0]+=8,fn[0]-=8,ri[0]=Ii}else ri[0]=5<=fn[0]&&Jr[Lr+0]==47&&!(Jr[Lr+4]>>5),ar[0]=fn[0];cn=0}if(Ae=Ae[0],gn.Ja=gn.Ja[0],gn.xa=gn.xa[0],Z=Z[0],cn!=0)break;if(4294967286<gn.Ja)return 3;if(ht==null||Hn||(ht[0]=gn.xa?2:1),st=[st],cr=[cr],gn.xa){if(5>Ae){cn=7;break}ht=st,Bn=cr,Hn=nt,$==null||5>Ae?$=0:5<=Ae&&$[Z+0]==47&&!($[Z+4]>>5)?(fn=[0],Jr=[0],fr=[0],pe(ar=new ae,$,Z,Ae),zr(ar,fn,Jr,fr)?(ht!=null&&(ht[0]=fn[0]),Bn!=null&&(Bn[0]=Jr[0]),Hn!=null&&(Hn[0]=fr[0]),$=1):$=0):$=0}else{if(10>Ae){cn=7;break}ht=cr,$==null||10>Ae||!Rp($,Z+3,Ae-3)?$=0:(Bn=$[Z+0]|$[Z+1]<<8|$[Z+2]<<16,Hn=16383&($[Z+7]<<8|$[Z+6]),$=16383&($[Z+9]<<8|$[Z+8]),1&Bn||3<(Bn>>1&7)||!(Bn>>4&1)||Bn>>5>=gn.Ja||!Hn||!$?$=0:(st&&(st[0]=Hn),ht&&(ht[0]=$),$=1))}if(!$||(st=st[0],cr=cr[0],In&&(ot[0]!=st||nn[0]!=cr)))return 3;At!=null&&(At[0]=gn,At.offset=Z-At.w,e(4294967286>Z-At.w),e(At.offset==At.ha-Ae));break}return cn==0||cn==7&&In&&At==null?(nt!=null&&(nt[0]|=gn.na!=null&&0<gn.na.length),Se!=null&&(Se[0]=st),Pe!=null&&(Pe[0]=cr),0):cn}function ed($,Z,Ae){var Se=Z.width,Pe=Z.height,nt=0,st=0,ht=Se,At=Pe;if(Z.Da=$!=null&&0<$.Da,Z.Da&&(ht=$.cd,At=$.bd,nt=$.v,st=$.j,11>Ae||(nt&=-2,st&=-2),0>nt||0>st||0>=ht||0>=At||nt+ht>Se||st+At>Pe))return 0;if(Z.v=nt,Z.j=st,Z.va=nt+ht,Z.o=st+At,Z.U=ht,Z.T=At,Z.da=$!=null&&0<$.da,Z.da){if(!Tt(ht,At,Ae=[$.ib],nt=[$.hb]))return 0;Z.ib=Ae[0],Z.hb=nt[0]}return Z.ob=$!=null&&$.ob,Z.Kb=$==null||!$.Sd,Z.da&&(Z.ob=Z.ib<3*Se/4&&Z.hb<3*Pe/4,Z.Kb=0),1}function Sm($){if($==null)return 2;if(11>$.S){var Z=$.f.RGBA;Z.fb+=($.height-1)*Z.A,Z.A=-Z.A}else Z=$.f.kb,$=$.height,Z.O+=($-1)*Z.fa,Z.fa=-Z.fa,Z.N+=($-1>>1)*Z.Ab,Z.Ab=-Z.Ab,Z.W+=($-1>>1)*Z.Db,Z.Db=-Z.Db,Z.F!=null&&(Z.J+=($-1)*Z.lb,Z.lb=-Z.lb);return 0}function Vp($,Z,Ae,Se){if(Se==null||0>=$||0>=Z)return 2;if(Ae!=null){if(Ae.Da){var Pe=Ae.cd,nt=Ae.bd,st=-2&Ae.v,ht=-2&Ae.j;if(0>st||0>ht||0>=Pe||0>=nt||st+Pe>$||ht+nt>Z)return 2;$=Pe,Z=nt}if(Ae.da){if(!Tt($,Z,Pe=[Ae.ib],nt=[Ae.hb]))return 2;$=Pe[0],Z=nt[0]}}Se.width=$,Se.height=Z;e:{var At=Se.width,ot=Se.height;if($=Se.S,0>=At||0>=ot||!($>=rf&&13>$))$=2;else{if(0>=Se.Rd&&Se.sd==null){st=nt=Pe=Z=0;var nn=(ht=At*yw[$])*ot;if(11>$||(nt=(ot+1)/2*(Z=(At+1)/2),$==12&&(st=(Pe=At)*ot)),(ot=s(nn+2*nt+st))==null){$=1;break e}Se.sd=ot,11>$?((At=Se.f.RGBA).eb=ot,At.fb=0,At.A=ht,At.size=nn):((At=Se.f.kb).y=ot,At.O=0,At.fa=ht,At.Fd=nn,At.f=ot,At.N=0+nn,At.Ab=Z,At.Cd=nt,At.ea=ot,At.W=0+nn+nt,At.Db=Z,At.Ed=nt,$==12&&(At.F=ot,At.J=0+nn+2*nt),At.Tc=st,At.lb=Pe)}if(Z=1,Pe=Se.S,nt=Se.width,st=Se.height,Pe>=rf&&13>Pe)if(11>Pe)$=Se.f.RGBA,Z&=(ht=Math.abs($.A))*(st-1)+nt<=$.size,Z&=ht>=nt*yw[Pe],Z&=$.eb!=null;else{$=Se.f.kb,ht=(nt+1)/2,nn=(st+1)/2,At=Math.abs($.fa),ot=Math.abs($.Ab);var In=Math.abs($.Db),Bn=Math.abs($.lb),gn=Bn*(st-1)+nt;Z&=At*(st-1)+nt<=$.Fd,Z&=ot*(nn-1)+ht<=$.Cd,Z=(Z&=In*(nn-1)+ht<=$.Ed)&At>=nt&ot>=ht&In>=ht,Z&=$.y!=null,Z&=$.f!=null,Z&=$.ea!=null,Pe==12&&(Z&=Bn>=nt,Z&=gn<=$.Tc,Z&=$.F!=null)}else Z=0;$=Z?0:2}}return $!=0||Ae!=null&&Ae.fd&&($=Sm(Se)),$}var Gc=64,Hf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],og=24,ag=32,Tm=8,Qc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Bt("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function($){return $},G.Predictor2=function($,Z,Ae){return Z[Ae+0]},G.Predictor3=function($,Z,Ae){return Z[Ae+1]},G.Predictor4=function($,Z,Ae){return Z[Ae-1]},G.Predictor5=function($,Z,Ae){return xt(xt($,Z[Ae+1]),Z[Ae+0])},G.Predictor6=function($,Z,Ae){return xt($,Z[Ae-1])},G.Predictor7=function($,Z,Ae){return xt($,Z[Ae+0])},G.Predictor8=function($,Z,Ae){return xt(Z[Ae-1],Z[Ae+0])},G.Predictor9=function($,Z,Ae){return xt(Z[Ae+0],Z[Ae+1])},G.Predictor10=function($,Z,Ae){return xt(xt($,Z[Ae-1]),xt(Z[Ae+0],Z[Ae+1]))},G.Predictor11=function($,Z,Ae){var Se=Z[Ae+0];return 0>=Ft(Se>>24&255,$>>24&255,(Z=Z[Ae-1])>>24&255)+Ft(Se>>16&255,$>>16&255,Z>>16&255)+Ft(Se>>8&255,$>>8&255,Z>>8&255)+Ft(255&Se,255&$,255&Z)?Se:$},G.Predictor12=function($,Z,Ae){var Se=Z[Ae+0];return(Zt(($>>24&255)+(Se>>24&255)-((Z=Z[Ae-1])>>24&255))<<24|Zt(($>>16&255)+(Se>>16&255)-(Z>>16&255))<<16|Zt(($>>8&255)+(Se>>8&255)-(Z>>8&255))<<8|Zt((255&$)+(255&Se)-(255&Z)))>>>0},G.Predictor13=function($,Z,Ae){var Se=Z[Ae-1];return(un(($=xt($,Z[Ae+0]))>>24&255,Se>>24&255)<<24|un($>>16&255,Se>>16&255)<<16|un($>>8&255,Se>>8&255)<<8|un($>>0&255,Se>>0&255))>>>0};var Hp=G.PredictorAdd0;G.PredictorAdd1=mt,Bt("Predictor2","PredictorAdd2"),Bt("Predictor3","PredictorAdd3"),Bt("Predictor4","PredictorAdd4"),Bt("Predictor5","PredictorAdd5"),Bt("Predictor6","PredictorAdd6"),Bt("Predictor7","PredictorAdd7"),Bt("Predictor8","PredictorAdd8"),Bt("Predictor9","PredictorAdd9"),Bt("Predictor10","PredictorAdd10"),Bt("Predictor11","PredictorAdd11"),Bt("Predictor12","PredictorAdd12"),Bt("Predictor13","PredictorAdd13");var Im=G.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function($){return $>>8&255},function($){return $}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function($){return $},function($){return $>>8&255});var Gp,Iu=G.ColorIndexInverseTransform,lg=G.MapARGB,Bm=G.VP8LColorIndexInverseTransformAlpha,cg=G.MapAlpha,td=G.VP8LPredictorsAdd=[];td.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var Ll,hu,Zu,Ju,Bu,Sh,Ec,nd,Jd,pa,Rl,Oa,ef,Qp,tf,du,Gf,Sc,rd,Ao,Ko,ra,tl,id,Qf,Tc,jp,Mm,Lm=s(511),Rm=s(2041),C0=s(225),E0=s(767),D_=0,jf=Rm,nf=C0,jc=E0,Ic=Lm,rf=0,Bc=1,Kp=2,ug=3,Wp=4,Pm=5,sf=6,ds=7,Fm=8,S0=9,hg=10,uw=[2,3,7],U_=[3,3,11],z_=[280,256,256,256,40],T0=[0,1,1,1,0],hw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Om=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$_=8,Nm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qp=null,V_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],YE=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],XE=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],H_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],G_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],of=[],Mu=[],Th=[],pw=1,I0=2,sd=[],Pl=[];Wn("UpsampleRgbLinePair",zn,3),Wn("UpsampleBgrLinePair",na,3),Wn("UpsampleRgbaLinePair",el,4),Wn("UpsampleBgraLinePair",fa,4),Wn("UpsampleArgbLinePair",Ml,4),Wn("UpsampleRgba4444LinePair",xa,2),Wn("UpsampleRgb565LinePair",wa,2);var fg=G.UpsampleRgbLinePair,Q_=G.UpsampleBgrLinePair,Wf=G.UpsampleRgbaLinePair,j_=G.UpsampleBgraLinePair,km=G.UpsampleArgbLinePair,B0=G.UpsampleRgba4444LinePair,Aw=G.UpsampleRgb565LinePair,pg=16,Yp=1<<pg-1,Ag=-227,Dm=482,gg=6,ZE=(256<<gg)-1,gw=0,mw=s(256),vw=s(256),M0=s(256),Um=s(256),L0=s(Dm-Ag),K_=s(Dm-Ag);Hc("YuvToRgbRow",zn,3),Hc("YuvToBgrRow",na,3),Hc("YuvToRgbaRow",el,4),Hc("YuvToBgraRow",fa,4),Hc("YuvToArgbRow",Ml,4),Hc("YuvToRgba4444Row",xa,2),Hc("YuvToRgb565Row",wa,2);var mg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xp=[0,2,8],zm=[8,7,6,4,4,2,2,2,1,1,1,1],$m=1;this.WebPDecodeRGBA=function($,Z,Ae,Se,Pe){var nt=Bc,st=new Xd,ht=new Qr;st.ba=ht,ht.S=nt,ht.width=[ht.width],ht.height=[ht.height];var At=ht.width,ot=ht.height,nn=new hr;if(nn==null||$==null)var In=2;else e(nn!=null),In=sg($,Z,Ae,nn.width,nn.height,nn.Pd,nn.Qd,nn.format,null);if(In!=0?At=0:(At!=null&&(At[0]=nn.width[0]),ot!=null&&(ot[0]=nn.height[0]),At=1),At){ht.width=ht.width[0],ht.height=ht.height[0],Se!=null&&(Se[0]=ht.width),Pe!=null&&(Pe[0]=ht.height);e:{if(Se=new Df,(Pe=new Xh).data=$,Pe.w=Z,Pe.ha=Ae,Pe.kd=1,Z=[0],e(Pe!=null),(($=sg(Pe.data,Pe.w,Pe.ha,null,null,null,Z,null,Pe))==0||$==7)&&Z[0]&&($=4),(Z=$)==0){if(e(st!=null),Se.data=Pe.data,Se.w=Pe.w+Pe.offset,Se.ha=Pe.ha-Pe.offset,Se.put=is,Se.ac=bi,Se.bc=Fs,Se.ma=st,Pe.xa){if(($=Nr())==null){st=1;break e}if(function(Bn,gn){var cr=[0],Hn=[0],cn=[0];t:for(;;){if(Bn==null)return 0;if(gn==null)return Bn.a=2,0;if(Bn.l=gn,Bn.a=0,pe(Bn.m,gn.data,gn.w,gn.ha),!zr(Bn.m,cr,Hn,cn)){Bn.a=3;break t}if(Bn.xb=I0,gn.width=cr[0],gn.height=Hn[0],!si(cr[0],Hn[0],1,Bn,null))break t;return 1}return e(Bn.a!=0),0}($,Se)){if(Se=(Z=Vp(Se.width,Se.height,st.Oa,st.ba))==0){t:{Se=$;n:for(;;){if(Se==null){Se=0;break t}if(e(Se.s.yc!=null),e(Se.s.Ya!=null),e(0<Se.s.Wb),e((Ae=Se.l)!=null),e((Pe=Ae.ma)!=null),Se.xb!=0){if(Se.ca=Pe.ba,Se.tb=Pe.tb,e(Se.ca!=null),!ed(Pe.Oa,Ae,ug)){Se.a=2;break n}if(!Tn(Se,Ae.width)||Ae.da)break n;if((Ae.da||hn(Se.ca.S))&&xn(),11>Se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Se.ca.f.kb.F!=null&&xn()),Se.Pb&&0<Se.s.ua&&Se.s.vb.X==null&&!Ye(Se.s.vb,Se.s.Wa.Xa)){Se.a=1;break n}Se.xb=0}if(!er(Se,Se.V,Se.Ba,Se.c,Se.i,Ae.o,Dt))break n;Pe.Dc=Se.Ma,Se=1;break t}e(Se.a!=0),Se=0}Se=!Se}Se&&(Z=$.a)}else Z=$.a}else{if(($=new Uf)==null){st=1;break e}if($.Fa=Pe.na,$.P=Pe.P,$.qc=Pe.Sa,tg($,Se)){if((Z=Vp(Se.width,Se.height,st.Oa,st.ba))==0){if($.Aa=0,Ae=st.Oa,e((Pe=$)!=null),Ae!=null){if(0<(At=0>(At=Ae.Md)?0:100<At?255:255*At/100)){for(ot=nn=0;4>ot;++ot)12>(In=Pe.pb[ot]).lc&&(In.ia=At*zm[0>In.lc?0:In.lc]>>3),nn|=In.ia;nn&&(alert("todo:VP8InitRandom"),Pe.ia=1)}Pe.Ga=Ae.Id,100<Pe.Ga?Pe.Ga=100:0>Pe.Ga&&(Pe.Ga=0)}_c($,Se)||(Z=$.a)}}else Z=$.a}Z==0&&st.Oa!=null&&st.Oa.fd&&(Z=Sm(st.ba))}st=Z}nt=st!=0?null:11>nt?ht.f.RGBA.eb:ht.f.kb.y}else nt=null;return nt};var yw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(G,W){for(var te="",q=0;q<4;q++)te+=String.fromCharCode(G[W++]);return te}function p(G,W){return(G[W+0]<<0|G[W+1]<<8|G[W+2]<<16)>>>0}function A(G,W){return(G[W+0]<<0|G[W+1]<<8|G[W+2]<<16|G[W+3]<<24)>>>0}new o;var v=[0],y=[0],C=[],x=new o,M=t,I=function(G,W){var te={},q=0,Y=!1,ee=0,ce=0;if(te.frames=[],!function(be,_e,$e,Re){for(var Ie=0;Ie<Re;Ie++)if(be[_e+Ie]!=$e.charCodeAt(Ie))return!0;return!1}(G,W,"RIFF",4)){var se,le;for(A(G,W+=4),W+=8;W<G.length;){var ie=d(G,W),pe=A(G,W+=4);W+=4;var ue=pe+(1&pe);switch(ie){case"VP8 ":case"VP8L":te.frames[q]===void 0&&(te.frames[q]={}),(ae=te.frames[q]).src_off=Y?ce:W-8,ae.src_size=ee+pe+8,q++,Y&&(Y=!1,ee=0,ce=0);break;case"VP8X":(ae=te.header={}).feature_flags=G[W];var me=W+4;ae.canvas_width=1+p(G,me),me+=3,ae.canvas_height=1+p(G,me),me+=3;break;case"ALPH":Y=!0,ee=ue+8,ce=W-8;break;case"ANIM":(ae=te.header).bgcolor=A(G,W),me=W+4,ae.loop_count=(se=G)[(le=me)+0]<<0|se[le+1]<<8,me+=2;break;case"ANMF":var Le,ae;(ae=te.frames[q]={}).offset_x=2*p(G,W),W+=3,ae.offset_y=2*p(G,W),W+=3,ae.width=1+p(G,W),W+=3,ae.height=1+p(G,W),W+=3,ae.duration=p(G,W),W+=3,Le=G[W++],ae.dispose=1&Le,ae.blend=Le>>1&1}ie!="ANMF"&&(W+=ue)}return te}}(M,0);I.response=M,I.rgbaoutput=!0,I.dataurl=!1;var P=I.header?I.header:null,F=I.frames?I.frames:null;if(P){P.loop_counter=P.loop_count,v=[P.canvas_height],y=[P.canvas_width];for(var D=0;D<F.length&&F[D].blend!=0;D++);}var V=F[0],H=x.WebPDecodeRGBA(M,V.src_off,V.src_size,y,v);V.rgba=H,V.imgwidth=y[0],V.imgheight=v[0];for(var Q=0;Q<y[0]*v[0]*4;Q++)C[Q]=H[Q];return this.width=y,this.height=v,this.data=C,this}(function(t){var e=function(){return typeof sz=="function"},n=function(v,y,C,x){var M=4,I=a;switch(x){case t.image_compression.FAST:M=1,I=s;break;case t.image_compression.MEDIUM:M=6,I=l;break;case t.image_compression.SLOW:M=9,I=o}v=r(v,y,C,I);var P=sz(v,{level:M});return t.__addimage__.arrayBufferToBinaryString(P)},r=function(v,y,C,x){for(var M,I,P,F=v.length/y,D=new Uint8Array(v.length+F),V=p(),H=0;H<F;H+=1){if(P=H*y,M=v.subarray(P,P+y),x)D.set(x(M,C,I),P+H);else{for(var Q,G=V.length,W=[];Q<G;Q+=1)W[Q]=V[Q](M,C,I);var te=A(W.concat());D.set(W[te],P+H)}I=M}return D},i=function(v){var y=Array.apply([],v);return y.unshift(0),y},s=function(v,y){var C,x=[],M=v.length;x[0]=1;for(var I=0;I<M;I+=1)C=v[I-y]||0,x[I+1]=v[I]-C+256&255;return x},a=function(v,y,C){var x,M=[],I=v.length;M[0]=2;for(var P=0;P<I;P+=1)x=C&&C[P]||0,M[P+1]=v[P]-x+256&255;return M},l=function(v,y,C){var x,M,I=[],P=v.length;I[0]=3;for(var F=0;F<P;F+=1)x=v[F-y]||0,M=C&&C[F]||0,I[F+1]=v[F]+256-(x+M>>>1)&255;return I},o=function(v,y,C){var x,M,I,P,F=[],D=v.length;F[0]=4;for(var V=0;V<D;V+=1)x=v[V-y]||0,M=C&&C[V]||0,I=C&&C[V-y]||0,P=d(x,M,I),F[V+1]=v[V]-P+256&255;return F},d=function(v,y,C){if(v===y&&y===C)return v;var x=Math.abs(y-C),M=Math.abs(v-C),I=Math.abs(v+y-C-C);return x<=M&&x<=I?v:M<=I?y:C},p=function(){return[i,s,a,l,o]},A=function(v){var y=v.map(function(C){return C.reduce(function(x,M){return x+Math.abs(M)},0)});return y.indexOf(Math.min.apply(null,y))};t.processPNG=function(v,y,C,x){var M,I,P,F,D,V,H,Q,G,W,te,q,Y,ee,ce,se=this.decode.FLATE_DECODE,le="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(P=new byt(v)).imgData,I=P.bits,M=P.colorSpace,D=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){G=(Q=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,te=new Uint8Array(G*P.colors),W=new Uint8Array(G);var ie,pe=P.pixelBitlength-P.bits;for(ee=0,ce=0;ee<G;ee++){for(Y=Q[ee],ie=0;ie<pe;)te[ce++]=Y>>>ie&255,ie+=P.bits;W[ee]=Y>>>ie&255}}if(P.bits===16){G=(Q=new Uint32Array(P.decodePixels().buffer)).length,te=new Uint8Array(G*(32/P.pixelBitlength)*P.colors),W=new Uint8Array(G*(32/P.pixelBitlength)),q=P.colors>1,ee=0,ce=0;for(var ue=0;ee<G;)Y=Q[ee++],te[ce++]=Y>>>0&255,q&&(te[ce++]=Y>>>16&255,Y=Q[ee++],te[ce++]=Y>>>0&255),W[ue++]=Y>>>16&255;I=8}x!==t.image_compression.NONE&&e()?(v=n(te,P.width*P.colors,P.colors,x),H=n(W,P.width,1,x)):(v=te,H=W,se=void 0)}if(P.colorType===3&&(M=this.color_spaces.INDEXED,V=P.palette,P.transparency.indexed)){var me=P.transparency.indexed,Le=0;for(ee=0,G=me.length;ee<G;++ee)Le+=me[ee];if((Le/=255)===G-1&&me.indexOf(0)!==-1)F=[me.indexOf(0)];else if(Le!==G){for(Q=P.decodePixels(),W=new Uint8Array(Q.length),ee=0,G=Q.length;ee<G;ee++)W[ee]=me[Q[ee]];H=n(W,P.width,1)}}var ae=function(be){var _e;switch(be){case t.image_compression.FAST:_e=11;break;case t.image_compression.MEDIUM:_e=13;break;case t.image_compression.SLOW:_e=14;break;default:_e=12}return _e}(x);return se===this.decode.FLATE_DECODE&&(le="/Predictor "+ae+" "),le+="/Colors "+D+" /BitsPerComponent "+I+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(H&&this.__addimage__.isArrayBuffer(H)||this.__addimage__.isArrayBufferView(H))&&(H=this.__addimage__.arrayBufferToBinaryString(H)),{alias:C,data:v,index:y,filter:se,decodeParameters:le,transparency:F,palette:V,sMask:H,predictor:ae,width:P.width,height:P.height,bitsPerComponent:I,colorSpace:M}}}})(xs.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new wyt(e),a=s.width,l=s.height,o=[];s.decodeAndBlitFrameRGBA(0,o);var d={data:o,width:a,height:l},p=new u6(100).encode(d,100);return t.processJPEG.call(this,p,n,r,i)},t.processGIF87A=t.processGIF89A}(xs.API),mA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mA.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ka.log("bit decode error:"+n)}},mA.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var o=this.palette[s>>7-l&1];this.data[a+4*l]=o.blue,this.data[a+4*l+1]=o.green,this.data[a+4*l+2]=o.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},mA.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,o=15&s,d=this.palette[l];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*i+1>=this.width)break;d=this.palette[o],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},mA.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},mA.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,o=(s>>10&e)/e*255|0,d=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=o,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=d}this.pos+=t}},mA.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,o=(a>>5&n)/n*255|0,d=(a>>11)/e*255|0,p=i*this.width*4+4*s;this.data[p]=d,this.data[p+1]=o,this.data[p+2]=l,this.data[p+3]=255}this.pos+=t}},mA.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},mA.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},mA.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new mA(e,!1),a=s.width,l=s.height,o={data:s.getData(),width:a,height:l},d=new u6(100).encode(o,100);return t.processJPEG.call(this,d,n,r,i)}}(xs.API),gne.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new gne(e),a=s.width,l=s.height,o={data:s.getData(),width:a,height:l},d=new u6(100).encode(o,100);return t.processJPEG.call(this,d,n,r,i)}}(xs.API),xs.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,o=0,d=0;d<i;d+=4){var p=r[d],A=r[d+1],v=r[d+2],y=r[d+3];s[l++]=p,s[l++]=A,s[l++]=v,a[o++]=y}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},xs.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ux=xs.API,tP=ux.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,o=l.fof?l.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=d.fof?d.fof:1,A=e.doKerning!==!1,v=0,y=t.length,C=0,x=l[0]||o,M=[];for(n=0;n<y;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?M.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(v=A&&Ho(d[r])==="object"&&!isNaN(parseInt(d[r][C],10))?d[r][C]/p:0,M.push((l[r]||x)/o+v)),C=r;return M},dne=ux.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ux.processArabic&&(t=ux.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:tP.apply(this,arguments).reduce(function(s,a){return s+a},0)},fne=function(t,e,n,r){for(var i=[],s=0,a=t.length,l=0;s!==a&&l+e[s]<n;)l+=e[s],s++;i.push(t.slice(0,s));var o=s;for(l=0;s!==a;)l+e[s]>r&&(i.push(t.slice(o,s)),l=0,o=s),l+=e[s],s++;return o!==s&&i.push(t.slice(o,s)),i},pne=function(t,e,n){n||(n={});var r,i,s,a,l,o,d,p=[],A=[p],v=n.textIndent||0,y=0,C=0,x=t.split(" "),M=tP.apply(this,[" ",n])[0];if(o=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var I=Array(o).join(" "),P=[];x.map(function(D){(D=D.split(/\s*\n/)).length>1?P=P.concat(D.map(function(V,H){return(H&&V.length?`
`:"")+V})):P.push(D[0])}),x=P,o=dne.apply(this,[I,n])}for(s=0,a=x.length;s<a;s++){var F=0;if(r=x[s],o&&r[0]==`
`&&(r=r.substr(1),F=1),v+y+(C=(i=tP.apply(this,[r,n])).reduce(function(D,V){return D+V},0))>e||F){if(C>e){for(l=fne.apply(this,[r,i,e-(v+y),e]),p.push(l.shift()),p=[l.pop()];l.length;)A.push([l.shift()]);C=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(D,V){return D+V},0)}else p=[r];A.push(p),v=C+o,y=M}else p.push(r),v+=y+C,y=M}return d=o?function(D,V){return(V?I:"")+D.join(" ")}:function(D){return D.join(" ")},A.map(d)},ux.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var A=this.internal.getFont(p.fontName,p.fontStyle);return A.metadata.Unicode?{widths:A.metadata.Unicode.widths||{0:1},kerning:A.metadata.Unicode.kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,o,d=[];for(l=0,o=r.length;l<o;l++)d=d.concat(pne.apply(this,[r[l],a,s]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(A){return"0x"+parseInt(A,10).toString(16)},a=t.__fontmetrics__.compress=function(A){var v,y,C,x,M=["{"];for(var I in A){if(v=A[I],isNaN(parseInt(I,10))?y="'"+I+"'":(I=parseInt(I,10),y=(y=s(I).slice(2)).slice(0,-1)+r[y.slice(-1)]),typeof v=="number")v<0?(C=s(v).slice(3),x="-"):(C=s(v).slice(2),x=""),C=x+C.slice(0,-1)+r[C.slice(-1)];else{if(Ho(v)!=="object")throw new Error("Don't know what to do with value type "+Ho(v)+".");C=a(v)}M.push(y+C)}return M.push("}"),M.join("")},l=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,y,C,x,M={},I=1,P=M,F=[],D="",V="",H=A.length-1,Q=1;Q<H;Q+=1)(x=A[Q])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(x):x=="{"?(F.push([P,C]),P={},C=void 0):x=="}"?((y=F.pop())[0][y[1]]=P,C=void 0,P=y[0]):x=="-"?I=-1:C===void 0?n.hasOwnProperty(x)?(D+=n[x],C=parseInt(D,16)*I,I=1,D=""):D+=x:n.hasOwnProperty(x)?(V+=n[x],P[C]=parseInt(V,16)*I,I=1,C=void 0,V=""):V+=x;return M},o={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:o,"Courier-Bold":o,"Courier-BoldOblique":o,"Courier-Oblique":o,Helvetica:o,"Helvetica-Bold":o,"Helvetica-BoldOblique":o,"Helvetica-Oblique":o,"Times-Roman":o,"Times-Bold":o,"Times-BoldItalic":o,"Times-Italic":o}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var v=A.font,y=p.Unicode[v.postScriptName];y&&(v.metadata.Unicode={},v.metadata.Unicode.widths=y.widths,v.metadata.Unicode.kerning=y.kerning);var C=d.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])}(xs.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(fI(l)),a.metadata=t.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(xs),function(t){function e(){return(Cs.canvg?Promise.resolve(Cs.canvg):Promise.resolve().then(()=>P2t)).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}xs.API.addSvgAsImage=function(n,r,i,s,a,l,o,d){if(isNaN(r)||isNaN(i))throw ka.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw ka.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var A=p.getContext("2d");A.fillStyle="#fff",A.fillRect(0,0,p.width,p.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return e().then(function(C){return C.fromString(A,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(v)}).then(function(){y.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,o,d)})}}(),xs.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},xs.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),o=[],d=0,p=0,A=0;function v(C,x){var M,I=!1;for(M=0;M<C.length;M+=1)C[M]===x&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var y=l.length;for(A=0;A<y;A+=1)n[l[A]].value=n[l[A]].defaultValue,n[l[A]].explicitSet=!1}if(Ho(t)==="object"){for(i in t)if(s=t[i],v(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")o.push(String(s[d]-1));else if(s[d].length>1){for(p=0;p<s[d].length;p+=1)typeof s[d][p]!="number"&&(r=!1);r===!0&&o.push([s[d][0]-1,s[d][1]-1].join(" "))}n[i].value="["+o.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,x=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?x.push("/"+C+" /"+n[C].value):x.push("/"+C+" "+n[C].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+a.length+l.length+i.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(xs.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,a){for(var l,o=a.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],A=0,v=s.length;A<v;++A){if(l=a.metadata.characterToGlyph(s.charCodeAt(A)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(A),o.indexOf(l)==-1&&(o.push(l),o.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(d[4-l.length],l)}return p.join("")},r=function(s){var a,l,o,d,p,A,v;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,o=[],A=0,v=(l=Object.keys(s).sort(function(y,C){return y-C})).length;A<v;A++)a=l[A],o.length>=100&&(p+=`
`+o.length+` beginbfchar
`+o.join(`
`)+`
endbfchar`,o=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(d=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),o.push("<"+a+"><"+d+">"));return o.length&&(p+=`
`+o.length+` beginbfchar
`+o.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var l=a.font,o=a.out,d=a.newObject,p=a.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var A=l.metadata.Unicode.widths,v=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),y="",C=0;C<v.length;C++)y+=String.fromCharCode(v[C]);var x=d();p({data:y,addLength1:!0,objectId:x}),o("endobj");var M=d();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:M}),o("endobj");var I=d();o("<<"),o("/Type /FontDescriptor"),o("/FontName /"+Px(l.fontName)),o("/FontFile2 "+x+" 0 R"),o("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),o("/Flags "+l.metadata.flags),o("/StemV "+l.metadata.stemV),o("/ItalicAngle "+l.metadata.italicAngle),o("/Ascent "+l.metadata.ascender),o("/Descent "+l.metadata.decender),o("/CapHeight "+l.metadata.capHeight),o(">>"),o("endobj");var P=d();o("<<"),o("/Type /Font"),o("/BaseFont /"+Px(l.fontName)),o("/FontDescriptor "+I+" 0 R"),o("/W "+t.API.PDFObject.convert(A)),o("/CIDToGIDMap /Identity"),o("/DW 1000"),o("/Subtype /CIDFontType2"),o("/CIDSystemInfo"),o("<<"),o("/Supplement 0"),o("/Registry (Adobe)"),o("/Ordering ("+l.encoding+")"),o(">>"),o(">>"),o("endobj"),l.objectNumber=d(),o("<<"),o("/Type /Font"),o("/Subtype /Type0"),o("/ToUnicode "+M+" 0 R"),o("/BaseFont /"+Px(l.fontName)),o("/Encoding /"+l.encoding),o("/DescendantFonts ["+P+" 0 R]"),o(">>"),o("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var l=a.font,o=a.out,d=a.newObject,p=a.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var A=l.metadata.rawData,v="",y=0;y<A.length;y++)v+=String.fromCharCode(A[y]);var C=d();p({data:v,addLength1:!0,objectId:C}),o("endobj");var x=d();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:x}),o("endobj");var M=d();o("<<"),o("/Descent "+l.metadata.decender),o("/CapHeight "+l.metadata.capHeight),o("/StemV "+l.metadata.stemV),o("/Type /FontDescriptor"),o("/FontFile2 "+C+" 0 R"),o("/Flags 96"),o("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),o("/FontName /"+Px(l.fontName)),o("/ItalicAngle "+l.metadata.italicAngle),o("/Ascent "+l.metadata.ascender),o(">>"),o("endobj"),l.objectNumber=d();for(var I=0;I<l.metadata.hmtx.widths.length;I++)l.metadata.hmtx.widths[I]=parseInt(l.metadata.hmtx.widths[I]*(1e3/l.metadata.head.unitsPerEm));o("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Px(l.fontName)+"/FontDescriptor "+M+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),o("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",o=s.x,d=s.y,p=s.options||{},A=s.mutex||{},v=A.pdfEscape,y=A.activeFontKey,C=A.fonts,x=y,M="",I=0,P="",F=C[x].encoding;if(C[x].encoding!=="Identity-H")return{text:l,x:o,y:d,options:p,mutex:A};for(P=l,x=y,Array.isArray(l)&&(P=l[0]),I=0;I<P.length;I+=1)C[x].metadata.hasOwnProperty("cmap")&&(a=C[x].metadata.cmap.unicode.codeMap[P[I].charCodeAt(0)]),a||P[I].charCodeAt(0)<256&&C[x].metadata.hasOwnProperty("Unicode")?M+=P[I]:M+="";var D="";return parseInt(x.slice(1))<14||F==="WinAnsiEncoding"?D=v(M,x).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(D=n(M,C[x])),A.isHex=!0,{text:D,x:o,y:d,options:p,mutex:A}};e.events.push(["postProcessText",function(s){var a=s.text||"",l=[],o={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?l.push([i(Object.assign({},o,{text:a[d][0]})).text,a[d][1],a[d][2]]):l.push(i(Object.assign({},o,{text:a[d]})).text);s.text=l}else s.text=i(Object.assign({},o,{text:a})).text}])}(xs),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(xs.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,a,l,o,d,p,A=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},M=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,F=0;this.__bidiEngine__={};var D=function(q){var Y=q.charCodeAt(),ee=Y>>8,ce=x[ee];return ce!==void 0?A[256*ce+(255&Y)]:ee===252||ee===253?"AL":I.test(ee)?"L":ee===8?"R":"N"},V=function(q){for(var Y,ee=0;ee<q.length;ee++){if((Y=D(q.charAt(ee)))==="L")return!1;if(Y==="R")return!0}return!1},H=function(q,Y,ee,ce){var se,le,ie,pe,ue=Y[ce];switch(ue){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(ue="AN");break;case"AL":P=!0,ue="R";break;case"WS":ue="N";break;case"CS":ce<1||ce+1>=Y.length||(se=ee[ce-1])!=="EN"&&se!=="AN"||(le=Y[ce+1])!=="EN"&&le!=="AN"?ue="N":P&&(le="AN"),ue=le===se?le:"N";break;case"ES":ue=(se=ce>0?ee[ce-1]:"B")==="EN"&&ce+1<Y.length&&Y[ce+1]==="EN"?"EN":"N";break;case"ET":if(ce>0&&ee[ce-1]==="EN"){ue="EN";break}if(P){ue="N";break}for(ie=ce+1,pe=Y.length;ie<pe&&Y[ie]==="ET";)ie++;ue=ie<pe&&Y[ie]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(pe=Y.length,ie=ce+1;ie<pe&&Y[ie]==="NSM";)ie++;if(ie<pe){var me=q[ce],Le=me>=1425&&me<=2303||me===64286;if(se=Y[ie],Le&&(se==="R"||se==="AL")){ue="R";break}}}ue=ce<1||(se=Y[ce-1])==="B"?"N":ee[ce-1];break;case"B":P=!1,i=!0,ue=F;break;case"S":s=!0,ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":ue="N"}return ue},Q=function(q,Y,ee){var ce=q.split("");return ee&&G(ce,ee,{hiLevel:F}),ce.reverse(),Y&&Y.reverse(),ce.join("")},G=function(q,Y,ee){var ce,se,le,ie,pe,ue=-1,me=q.length,Le=0,ae=[],be=F?y:v,_e=[];for(P=!1,i=!1,s=!1,se=0;se<me;se++)_e[se]=D(q[se]);for(le=0;le<me;le++){if(pe=Le,ae[le]=H(q,_e,ae,le),ce=240&(Le=be[pe][C[ae[le]]]),Le&=15,Y[le]=ie=be[Le][5],ce>0)if(ce===16){for(se=ue;se<le;se++)Y[se]=1;ue=-1}else ue=-1;if(be[Le][6])ue===-1&&(ue=le);else if(ue>-1){for(se=ue;se<le;se++)Y[se]=ie;ue=-1}_e[le]==="B"&&(Y[le]=0),ee.hiLevel|=ie}s&&function($e,Re,Ie){for(var Ne=0;Ne<Ie;Ne++)if($e[Ne]==="S"){Re[Ne]=F;for(var Je=Ne-1;Je>=0&&$e[Je]==="WS";Je--)Re[Je]=F}}(_e,Y,me)},W=function(q,Y,ee,ce,se){if(!(se.hiLevel<q)){if(q===1&&F===1&&!i)return Y.reverse(),void(ee&&ee.reverse());for(var le,ie,pe,ue,me=Y.length,Le=0;Le<me;){if(ce[Le]>=q){for(pe=Le+1;pe<me&&ce[pe]>=q;)pe++;for(ue=Le,ie=pe-1;ue<ie;ue++,ie--)le=Y[ue],Y[ue]=Y[ie],Y[ie]=le,ee&&(le=ee[ue],ee[ue]=ee[ie],ee[ie]=le);Le=pe}Le++}}},te=function(q,Y,ee){var ce=q.split(""),se={hiLevel:F};return ee||(ee=[]),G(ce,ee,se),function(le,ie,pe){if(pe.hiLevel!==0&&p)for(var ue,me=0;me<le.length;me++)ie[me]===1&&(ue=M.indexOf(le[me]))>=0&&(le[me]=M[ue+1])}(ce,ee,se),W(2,ce,Y,ee,se),W(1,ce,Y,ee,se),ce.join("")};return this.__bidiEngine__.doBidiReorder=function(q,Y,ee){if(function(se,le){if(le)for(var ie=0;ie<se.length;ie++)le[ie]=ie;l===void 0&&(l=V(se)),d===void 0&&(d=V(se))}(q,Y),a||!o||d)if(a&&o&&l^d)F=l?1:0,q=Q(q,Y,ee);else if(!a&&o&&d)F=l?1:0,q=te(q,Y,ee),q=Q(q,Y);else if(!a||l||o||d){if(a&&!o&&l^d)q=Q(q,Y),l?(F=0,q=te(q,Y,ee)):(F=1,q=te(q,Y,ee),q=Q(q,Y));else if(a&&l&&!o&&d)F=1,q=te(q,Y,ee),q=Q(q,Y);else if(!a&&!o&&l^d){var ce=p;l?(F=1,q=te(q,Y,ee),F=0,p=!1,q=te(q,Y,ee),p=ce):(F=0,q=te(q,Y,ee),q=Q(q,Y),F=1,p=!1,q=te(q,Y,ee),p=ce,q=Q(q,Y))}}else F=0,q=te(q,Y,ee);else F=l?1:0,q=te(q,Y,ee);return q},this.__bidiEngine__.setOptions=function(q){q&&(a=q.isInputVisual,o=q.isOutputVisual,l=q.isInputRtl,d=q.isOutputRtl,p=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(xs),xs.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new A_(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new kyt(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new xyt(this.contents),this.head=new Eyt(this),this.name=new Myt(this),this.cmap=new Zge(this),this.toUnicode={},this.hhea=new Syt(this),this.maxp=new Lyt(this),this.hmtx=new Ryt(this),this.post=new Iyt(this),this.os2=new Tyt(this),this.loca=new Nyt(this),this.glyf=new Pyt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,o,d;for(d=[],a=0,l=(o=this.bbox).length;a<l;a++)e=o[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,a,l;for(a=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var YA,A_=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,a,l,o;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^o)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+o},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),xyt=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,a,l,o,d,p,A,v,y,C,x;for(x in y=Object.keys(n).length,o=Math.log(2),A=16*Math.floor(Math.log(y)/o),a=Math.floor(A/o),p=16*y-A,(i=new A_).writeInt(this.scalarType),i.writeShort(y),i.writeShort(A),i.writeShort(a),i.writeShort(p),s=16*y,d=i.pos+s,l=null,C=[],n)for(v=n[x],i.writeString(x),i.writeInt(t(v)),i.writeInt(d),i.writeInt(v.length),C=C.concat(v),x==="head"&&(l=d),d+=v.length;d%4;)C.push(0),d++;return i.write(C),r=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,a;for(n=Jge.call(n);n.length%4;)n.push(0);for(s=new A_(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Cyt={}.hasOwnProperty,vm=function(t,e){for(var n in e)Cyt.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};YA=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Eyt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new A_).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),mne=function(){function t(e,n){var r,i,s,a,l,o,d,p,A,v,y,C,x,M,I,P,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),A=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(y=e.readUInt16(),v=y/2,e.pos+=6,s=function(){var D,V;for(V=[],o=D=0;0<=v?D<v:D>v;o=0<=v?++D:--D)V.push(e.readUInt16());return V}(),e.pos+=2,x=function(){var D,V;for(V=[],o=D=0;0<=v?D<v:D>v;o=0<=v?++D:--D)V.push(e.readUInt16());return V}(),d=function(){var D,V;for(V=[],o=D=0;0<=v?D<v:D>v;o=0<=v?++D:--D)V.push(e.readUInt16());return V}(),p=function(){var D,V;for(V=[],o=D=0;0<=v?D<v:D>v;o=0<=v?++D:--D)V.push(e.readUInt16());return V}(),i=(this.length-e.pos+this.offset)/2,l=function(){var D,V;for(V=[],o=D=0;0<=i?D<i:D>i;o=0<=i?++D:--D)V.push(e.readUInt16());return V}(),o=I=0,F=s.length;I<F;o=++I)for(M=s[o],r=P=C=x[o];C<=M?P<=M:P>=M;r=C<=M?++P:--P)p[o]===0?a=r+d[o]:(a=l[p[o]/2+(r-C)-(v-o)]||0)!==0&&(a+=d[o]),this.codeMap[r]=65535&a}e.pos=A}return t.encode=function(e,n){var r,i,s,a,l,o,d,p,A,v,y,C,x,M,I,P,F,D,V,H,Q,G,W,te,q,Y,ee,ce,se,le,ie,pe,ue,me,Le,ae,be,_e,$e,Re,Ie,Ne,Je,je,ft,Et;switch(ce=new A_,a=Object.keys(e).sort(function(ke,Ye){return ke-Ye}),n){case"macroman":for(x=0,M=function(){var ke=[];for(C=0;C<256;++C)ke.push(0);return ke}(),P={0:0},s={},se=0,ue=a.length;se<ue;se++)P[Je=e[i=a[se]]]==null&&(P[Je]=++x),s[i]={old:e[i],new:P[e[i]]},M[i]=P[e[i]];return ce.writeUInt16(1),ce.writeUInt16(0),ce.writeUInt32(12),ce.writeUInt16(0),ce.writeUInt16(262),ce.writeUInt16(0),ce.write(M),{charMap:s,subtable:ce.data,maxGlyphID:x+1};case"unicode":for(Y=[],A=[],F=0,P={},r={},I=d=null,le=0,me=a.length;le<me;le++)P[V=e[i=a[le]]]==null&&(P[V]=++F),r[i]={old:V,new:P[V]},l=P[V]-i,I!=null&&l===d||(I&&A.push(I),Y.push(i),d=l),I=i;for(I&&A.push(I),A.push(65535),Y.push(65535),te=2*(W=Y.length),G=2*Math.pow(Math.log(W)/Math.LN2,2),v=Math.log(G/2)/Math.LN2,Q=2*W-G,o=[],H=[],y=[],C=ie=0,Le=Y.length;ie<Le;C=++ie){if(q=Y[C],p=A[C],q===65535){o.push(0),H.push(0);break}if(q-(ee=r[q].new)>=32768)for(o.push(0),H.push(2*(y.length+W-C)),i=pe=q;q<=p?pe<=p:pe>=p;i=q<=p?++pe:--pe)y.push(r[i].new);else o.push(ee-q),H.push(0)}for(ce.writeUInt16(3),ce.writeUInt16(1),ce.writeUInt32(12),ce.writeUInt16(4),ce.writeUInt16(16+8*W+2*y.length),ce.writeUInt16(0),ce.writeUInt16(te),ce.writeUInt16(G),ce.writeUInt16(v),ce.writeUInt16(Q),Ie=0,ae=A.length;Ie<ae;Ie++)i=A[Ie],ce.writeUInt16(i);for(ce.writeUInt16(0),Ne=0,be=Y.length;Ne<be;Ne++)i=Y[Ne],ce.writeUInt16(i);for(je=0,_e=o.length;je<_e;je++)l=o[je],ce.writeUInt16(l);for(ft=0,$e=H.length;ft<$e;ft++)D=H[ft],ce.writeUInt16(D);for(Et=0,Re=y.length;Et<Re;Et++)x=y[Et],ce.writeUInt16(x);return{charMap:r,subtable:ce.data,maxGlyphID:F+1}}},t}(),Zge=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new mne(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=mne.encode(n,r),(s=new A_).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Syt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Tyt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Iyt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,o,d;for(d=[],a=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;a=0<=o?++l:--l)d.push(n.readUInt32());return d}).call(this)}},e}(),Byt=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Myt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,a,l,o,d,p,A,v,y;for(n.pos=this.offset,n.readShort(),r=n.readShort(),o=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+o+n.readShort()});for(d={},a=A=0,v=i.length;A<v;a=++A)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new Byt(p,s),d[y=s.nameID]==null&&(d[y]=[]),d[s.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),Lyt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Ryt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,a,l,o,d;for(n.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,A;for(A=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)A.push(n.readInt16());return A}(),this.widths=(function(){var p,A,v,y;for(y=[],p=0,A=(v=this.metrics).length;p<A;p++)a=v[p],y.push(a.advance);return y}).call(this),i=this.widths[this.widths.length-1],d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),Jge=[].slice,Pyt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,a,l,o,d,p,A,v;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(o=new A_(r.read(s))).readShort(),p=o.readShort(),v=o.readShort(),d=o.readShort(),A=o.readShort(),this.cache[n]=l===-1?new Oyt(o,p,v,d,A):new Fyt(o,l,p,v,d,A),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,a,l,o,d;for(l=[],a=[],o=0,d=r.length;o<d;o++)s=n[r[o]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},e}(),Fyt=function(){function t(e,n,r,i,s,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Oyt=function(){function t(e,n,r,i,s){var a,l;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new A_(Jge.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Nyt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vm(e,YA),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var o=this.offsets[l],d=this.offsets[l+1]-o;d>0&&(s+=d)}for(var p=new Array(4*i.length),A=0;A<i.length;++A)p[4*A+3]=255&i[A],p[4*A+2]=(65280&i[A])>>8,p[4*A+1]=(16711680&i[A])>>16,p[4*A]=(4278190080&i[A])>>24;return p},e}(),kyt=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,a,l,o;for(i={},a=0,l=e.length;a<l;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in o=this.glyphsFor(n))r=o[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,a,l,o,d,p,A,v,y,C,x,M,I;for(i in r=Zge.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),y={0:0},I=r.charMap)y[(o=I[i]).old]=o.new;for(C in v=r.maxGlyphID,a)C in y||(y[C]=v++);return p=function(P){var F,D;for(F in D={},P)D[P[F]]=F;return D}(y),A=Object.keys(p).sort(function(P,F){return P-F}),x=function(){var P,F,D;for(D=[],P=0,F=A.length;P<F;P++)l=A[P],D.push(p[l]);return D}(),s=this.font.glyf.encode(a,x,y),d=this.font.loca.encode(s.offsets,x),M={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(M["OS/2"]=this.font.os2.raw()),this.font.directory.encode(M)},t}();xs.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,o,d;for(d=[],l=0,o=n.length;l<o;l++)r=n[l],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+n},e}();const Dyt=Ge({__name:"OlPrintdialogControl",props:{className:{},lang:{},imageType:{},quality:{},orientation:{},immediate:{type:Boolean},openWindow:{type:Boolean},copy:{type:Boolean},print:{type:Boolean},pdf:{type:Boolean},saveAs:{},northImage:{},jsPDF:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(ew,i,r);return s.value.on(["print","error"],a=>{if(a.image)if(a.pdf){const l=new xs({orientation:a.print.orientation,unit:a.print.unit,format:a.print.size});l.addImage(a.image,"JPEG",a.print.position[0],a.print.position[0],a.print.imageWidth,a.print.imageHeight),l.save(a.print.legend?"legend.pdf":"map.pdf")}else a.canvas.toBlob(l=>{const o=(a.print.legend?"legend.":"map.")+a.imageType.replace("image/","");Nge.saveAs(l,o)},a.imageType,a.quality);else console.warn("No canvas to export")}),e({control:s}),(a,l)=>wt("",!0)}}),Uyt=Ge({inheritAttrs:!1,__name:"OlProfileControl",props:{className:{},title:{},style:{},selectStyle:{},info:{},width:{},height:{},feature:{},selectable:{type:Boolean},zoomable:{type:Boolean},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(E7,i,r);return Uo(s,["over","out","show","dragstart","dragging","dragend","dragcancel"]),e({control:s}),(a,l)=>wt("",!0)}}),zyt=Ge({__name:"OlRotateControl",props:{className:{default:"ol-rotate"},label:{default:""},tipLabel:{default:"Reset rotation"},compassClassName:{default:"ol-compass"},duration:{default:250},autoHide:{type:Boolean,default:!1},render:{},resetNorth:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Sfe,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),$yt=Ge({__name:"OlScalelineControl",props:{className:{default:"ol-scale-line"},minWidth:{default:64},render:{},target:{},units:{default:"metric"},bar:{type:Boolean,default:!1},steps:{default:4},text:{default:""},dpi:{default:void 0}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Fot,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),Vyt=Ge({inheritAttrs:!1,__name:"OlSearchControl",props:{className:{default:"ol-search"},title:{},label:{},reverseTitle:{},placeholder:{},reverse:{type:Boolean},inputLabel:{},collapsed:{type:Boolean},noCollapse:{type:Boolean},typing:{},minLength:{},maxItems:{},maxHistory:{},getTitle:{},autocomplete:{},onselect:{},centerOnSelect:{type:Boolean},zoomOnSelect:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(fAe,i,r);return Uo(s,["select"]),e({control:s}),(a,l)=>wt("",!0)}}),Hyt=Ge({__name:"OlSwipeControl",props:{layerList:{},className:{default:"ol-swipe"},position:{default:.5},orientation:{default:"vertical"}},setup(t,{expose:e}){var n;const r=t,i=Ra(),s=gi(r),{control:a}=Ac(Xot,s,i);return(n=r.layerList)==null||n.forEach((l,o)=>{a.value.addLayer(l,o===1)}),e({control:a}),(l,o)=>wt("",!0)}}),Gyt=Ge({__name:"OlToggleControl",props:{className:{},title:{},html:{},interaction:{},active:{type:Boolean},disable:{type:Boolean},bar:{},autoActive:{type:Boolean},onToggle:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Zot,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),Qyt=Ge({inheritAttrs:!1,__name:"OlVideorecorderControl",props:{className:{},frameRate:{},videoBitsPerSecond:{},videoTarget:{},element:{},render:{},target:{},downloadName:{default:"mapVideo.mp4"}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Qx,i,r);return Uo(s,["start","stop","pause","resume"]),s.value.on("stop",a=>{n.downloadName&&Nge.saveAs(a.videoURL,n.downloadName)}),e({control:s}),(a,l)=>wt("",!0)}}),jyt=Ge({__name:"OlZoneControl",props:{className:{default:"ol-mapzone"},layer:{},projection:{default:"EPSG:3857"},centerOnClick:{type:Boolean,default:!0},element:{},render:{},target:{},zones:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(hb,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),Kyt=Ge({__name:"OlZoomControl",props:{duration:{default:250},className:{default:"ol-zoom"},zoomInClassName:{default:"ol-zoom-in"},zoomOutClassName:{default:"ol-zoom-out"},zoomInLabel:{default:"+"},zoomOutLabel:{default:"-"},zoomInTipLabel:{default:"Zoom in"},zoomOutTipLabel:{default:"Zoom Out"},delta:{default:1},target:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Tfe,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),Wyt=Ge({__name:"OlZoomsliderControl",props:{duration:{default:200},className:{default:"ol-zoomslider"},render:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Oot,i,r);return e({control:s}),(a,l)=>wt("",!0)}}),qyt=Ge({__name:"OlZoomtoextentControl",props:{className:{default:"ol-zoom-extent"},target:{},label:{default:"E"},tipLabel:{default:"Fit to extent"},extent:{}},setup(t,{expose:e}){const n=t,r=Ra(),i=gi(n),{control:s}=Ac(Not,i,r);return e({control:s}),(a,l)=>wt("",!0)}});function Yyt(t,e){t.component("OlAttributionControl",P0t),t.component("OlFullscreenControl",k0t),t.component("OlMousepositionControl",z0t),t.component("OlOverviewmapControl",$0t),t.component("OlScalelineControl",$yt),t.component("OlZoomControl",Kyt),t.component("OlZoomsliderControl",Wyt),t.component("OlZoomtoextentControl",qyt),t.component("OlRotateControl",zyt),t.component("OlContextMenuControl",O0t),t.component("OlSearchControl",Vyt),t.component("OlSwipeControl",Hyt),t.component("OlControlBar",N0t),t.component("OlToggleControl",Gyt),t.component("OlButtonControl",F0t),t.component("OlPrintdialogControl",Dyt),t.component("OlProfileControl",Uyt),t.component("OlVideorecorderControl",Qyt),t.component("OlLayerswitcherControl",D0t),t.component("OlLayerswitcherimageControl",U0t),t.component("OlZoneControl",jyt),e&&t.provide("ol-options",e)}function nw(t,e){const n=mn("feature"),r=gi(e),i=oe(()=>{const s=Object.values(r);return new t(...s)});return zt(r,()=>{var s,a;(s=n==null?void 0:n.value)==null||s.setGeometry(i.value),(a=n==null?void 0:n.value)==null||a.changed()}),zt(()=>n,()=>{var s;(s=n==null?void 0:n.value)==null||s.setGeometry(i.value)}),dr(()=>{var s;(s=n==null?void 0:n.value)==null||s.setGeometry(i.value)}),Ss(()=>{var s;(s=n==null?void 0:n.value)==null||s.setGeometry(void 0)}),i}const Xyt=Ge({__name:"OlGeomCircle",props:{center:{},radius:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(Jb,t);return e({geometry:r}),(i,s)=>wt("",!0)}}),Zyt=Ge({__name:"OlGeomLineString",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(ko,t);return e({geometry:r}),(i,s)=>wt("",!0)}}),Jyt=Ge({__name:"OlGeomMultiLineString",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(kc,t);return e({geometry:r}),(i,s)=>wt("",!0)}}),e_t=Ge({__name:"OlGeomMultiPoint",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(Nd,t);return e({geometry:r}),(i,s)=>wt("",!0)}}),t_t=Ge({__name:"OlGeomMultiPolygon",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(Dc,t);return e({geometry:r}),(i,s)=>wt("",!0)}}),n_t=Ge({__name:"OlGeomPoint",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(So,t);return e({geometry:r}),(i,s)=>wt("",!0)}}),r_t=Ge({__name:"OlGeomPolygon",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const r=nw(La,t);return e({geometry:r}),(i,s)=>wt("",!0)}});function i_t(t,e){t.component("OlGeomCircle",Xyt),t.component("OlGeomLineString",Zyt),t.component("OlGeomMultiLineString",Jyt),t.component("OlGeomMultiPoint",e_t),t.component("OlGeomMultiPolygon",t_t),t.component("OlGeomPoint",n_t),t.component("OlGeomPolygon",r_t),e&&t.provide("ol-options",e)}const s_t=Ge({__name:"OlStyle",props:{zIndex:{},overrideStyleFunction:{}},setup(t,{expose:e}){const n=t,r=mn("stylable",void 0),i=gi(n),s=oe(()=>new No(i)),a=o=>{const d=r==null?void 0:r.value;if(d)if(d instanceof S7||d instanceof T7)d.getOverlay().setStyle(o),d.changed(),d.dispatchEvent("styleChanged");else try{d.setStyle(o),d.changed(),d.dispatchEvent("styleChanged")}catch{d.style_=o,d.values_.style=o,d.changed(),d.dispatchEvent("styleChanged")}},l=oe(()=>(o,d)=>i.overrideStyleFunction?i.overrideStyleFunction(o,s.value,d):s.value);return zt(i,()=>a(i.overrideStyleFunction?l.value:s.value)),dr(()=>a(i.overrideStyleFunction?l.value:s.value)),Ss(()=>{a(new No)}),Rr("style",s),Rr("styledObj",r),e({style:s}),(o,d)=>(ve(),Ue("div",null,[kt(o.$slots,"default")]))}}),o_t=Ge({__name:"OlStyleCircle",props:{radius:{},scale:{}},setup(t){const e=t,n=mn("style",null),r=mn("styledObj",null),i=gi(e),s=o=>new I_({...o,fill:new Hl,stroke:new Za}),a=oe(()=>s(i)),l=()=>{var o,d,p;(o=n==null?void 0:n.value)==null||o.setImage(null),(d=n==null?void 0:n.value)==null||d.setImage(a.value),(p=r==null?void 0:r.value)==null||p.changed()};return zt(i,()=>{l()}),zt(()=>n,()=>{l()}),dr(()=>{var o;(o=n==null?void 0:n.value)==null||o.setImage(a.value)}),Ss(()=>{var o;(o=n==null?void 0:n.value)==null||o.setImage(null)}),Rr("circle",a),Rr("styledObj",r),(o,d)=>(ve(),Ue("div",null,[kt(o.$slots,"default")]))}}),a_t=Ge({__name:"OlStyleStroke",props:{color:{},lineCap:{default:"round"},lineJoin:{default:"round"},lineDash:{},lineDashOffset:{default:0},miterLimit:{default:10},width:{default:1}},setup(t){var e;const n=t,r=mn("style",null),i=mn("styledObj",null),s=mn("circle",null),a=gi(n);if(r!=null&&s==null){let l=new Za(a);(e=r.value)==null||e.setStroke(l);const o=()=>{var d,p;(d=r==null?void 0:r.value)==null||d.setStroke(new Za),l=new Za(a),(p=r==null?void 0:r.value)==null||p.setStroke(l)};zt(a,()=>{o()}),zt(r,()=>{o()}),dr(()=>{var d;(d=r==null?void 0:r.value)==null||d.setStroke(l)}),Ss(()=>{var d;(d=r==null?void 0:r.value)==null||d.setStroke(new Za)})}else if(s!=null){const l=o=>{var d,p,A,v,y,C,x,M,I,P,F,D,V,H,Q,G,W,te;(p=(d=s==null?void 0:s.value)==null?void 0:d.getStroke())==null||p.setColor(o.color||""),(v=(A=s==null?void 0:s.value)==null?void 0:A.getStroke())==null||v.setLineCap(o.lineCap),(C=(y=s==null?void 0:s.value)==null?void 0:y.getStroke())==null||C.setLineDash(o.lineDash||[]),(M=(x=s==null?void 0:s.value)==null?void 0:x.getStroke())==null||M.setLineDashOffset(o.lineDashOffset),(P=(I=s==null?void 0:s.value)==null?void 0:I.getStroke())==null||P.setLineJoin(o.lineJoin),(D=(F=s==null?void 0:s.value)==null?void 0:F.getStroke())==null||D.setMiterLimit(o.miterLimit),(H=(V=s==null?void 0:s.value)==null?void 0:V.getStroke())==null||H.setWidth(o.width),(G=s==null?void 0:s.value)==null||G.setRadius((Q=s==null?void 0:s.value)==null?void 0:Q.getRadius());try{(W=i==null?void 0:i.value)==null||W.changed()}catch{(te=i==null?void 0:i.value)==null||te.changed()}};l(a),zt(a,o=>{l(o)}),zt(s,()=>{l(a)})}return(l,o)=>wt("",!0)}}),l_t=Ge({__name:"OlStyleFill",props:{color:{}},setup(t){var e;const n=t,r=mn("style",null),i=mn("circle",null),s=mn("styledObj",null),a=gi(n);if(r!=null&&i==null){let l=new Hl(a);(e=r==null?void 0:r.value)==null||e.setFill(l);const o=()=>{var d,p;(d=r==null?void 0:r.value)==null||d.setFill(new Hl),l=new Hl(a),(p=r==null?void 0:r.value)==null||p.setFill(l)};zt(a,()=>{o()}),zt(r,()=>{o()}),dr(()=>{var d;(d=r==null?void 0:r.value)==null||d.setFill(l)}),Ss(()=>{var d;(d=r==null?void 0:r.value)==null||d.setFill(new Hl)})}else if(i!=null){const l=o=>{var d,p,A;(d=i==null?void 0:i.value)==null||d.getFill().setColor(o||null),(p=i==null?void 0:i.value)==null||p.setRadius(i==null?void 0:i.value.getRadius());try{(A=s==null?void 0:s.value)==null||A.changed()}catch{s==null||s.value.changed()}};l(a.color),zt(a,()=>{l(a.color)}),zt(i,()=>{l(a.color)})}return(l,o)=>wt("",!0)}});var eme={exports:{}};/*! dom-to-image-more 14-02-2024 */(function(t,e){(function(n){const r=function(){let Q=0;return{escape:function(ee){return ee.replace(/([.*+?^${}()|[]\/\\])/g,"\\$1")},isDataUrl:function(ee){return ee.search(/^(data:)/)!==-1},canvasToBlob:function(ee){return ee.toBlob?new Promise(function(ce){ee.toBlob(ce)}):function(ce){return new Promise(function(se){var le=y(ce.toDataURL().split(",")[1]),ie=le.length,pe=new Uint8Array(ie);for(let ue=0;ue<ie;ue++)pe[ue]=le.charCodeAt(ue);se(new Blob([pe],{type:"image/png"}))})}(ee)},resolveUrl:function(ee,ce){var se=document.implementation.createHTMLDocument(),le=se.createElement("base"),ie=(se.head.appendChild(le),se.createElement("a"));return se.body.appendChild(ie),le.href=ce,ie.href=ee,ie.href},getAndEncode:function(ee){let ce=p.impl.urlCache.find(function(se){return se.url===ee});return ce||(ce={url:ee,promise:null},p.impl.urlCache.push(ce)),ce.promise===null&&(p.impl.options.cacheBust&&(ee+=(/\?/.test(ee)?"&":"?")+new Date().getTime()),ce.promise=new Promise(function(se){const le=p.impl.options.httpTimeout,ie=new XMLHttpRequest;if(ie.onreadystatechange=function(){if(ie.readyState===4)if(300<=ie.status)ue?se(ue):me(`cannot fetch resource: ${ee}, status: `+ie.status);else{const Le=new FileReader;Le.onloadend=function(){se(Le.result)},Le.readAsDataURL(ie.response)}},ie.ontimeout=function(){ue?se(ue):me(`timeout of ${le}ms occured while fetching resource: `+ee)},ie.responseType="blob",ie.timeout=le,0<p.impl.options.useCredentialsFilters.length&&(p.impl.options.useCredentials=0<p.impl.options.useCredentialsFilters.filter(Le=>0<=ee.search(Le)).length),p.impl.options.useCredentials&&(ie.withCredentials=!0),p.impl.options.corsImg&&ee.indexOf("http")===0&&ee.indexOf(window.location.origin)===-1){var pe=(p.impl.options.corsImg.method||"GET").toUpperCase()==="POST"?"POST":"GET";ie.open(pe,(p.impl.options.corsImg.url||"").replace("#{cors}",ee),!0);let Le=!1;const ae=p.impl.options.corsImg.headers||{},be=(Object.keys(ae).forEach(function(_e){ae[_e].indexOf("application/json")!==-1&&(Le=!0),ie.setRequestHeader(_e,ae[_e])}),function(_e){try{return JSON.parse(JSON.stringify(_e))}catch{me("corsImg.data is missing or invalid")}}(p.impl.options.corsImg.data||""));Object.keys(be).forEach(function(_e){typeof be[_e]=="string"&&(be[_e]=be[_e].replace("#{cors}",ee))}),ie.send(Le?JSON.stringify(be):be)}else ie.open("GET",ee,!0),ie.send();let ue;function me(Le){console.error(Le),se("")}p.impl.options.imagePlaceholder&&(pe=p.impl.options.imagePlaceholder.split(/,/))&&pe[1]&&(ue=pe[1])})),ce.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+Q++},delay:function(ee){return function(ce){return new Promise(function(se){setTimeout(function(){se(ce)},ee)})}},asArray:function(ee){var ce=[],se=ee.length;for(let le=0;le<se;le++)ce.push(ee[le]);return ce},escapeXhtml:function(ee){return ee.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(ee){return ee!=="data:,"?new Promise(function(ce,se){const le=new Image;p.impl.options.useCredentials&&(le.crossOrigin="use-credentials"),le.onload=function(){window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){ce(le)}):ce(le)},le.onerror=se,le.src=ee}):Promise.resolve()},width:function(ee){var ce=Y(ee,"width");if(!isNaN(ce))return ce;var ce=Y(ee,"border-left-width"),se=Y(ee,"border-right-width");return ee.scrollWidth+ce+se},height:function(ee){var ce=Y(ee,"height");if(!isNaN(ce))return ce;var ce=Y(ee,"border-top-width"),se=Y(ee,"border-bottom-width");return ee.scrollHeight+ce+se},getWindow:G,isElement:q,isElementHostForOpenShadowRoot:function(ee){return q(ee)&&ee.shadowRoot!==null},isShadowRoot:W,isInShadowRoot:te,isHTMLElement:function(ee){return ee instanceof G(ee).HTMLElement},isHTMLCanvasElement:function(ee){return ee instanceof G(ee).HTMLCanvasElement},isHTMLInputElement:function(ee){return ee instanceof G(ee).HTMLInputElement},isHTMLImageElement:function(ee){return ee instanceof G(ee).HTMLImageElement},isHTMLLinkElement:function(ee){return ee instanceof G(ee).HTMLLinkElement},isHTMLScriptElement:function(ee){return ee instanceof G(ee).HTMLScriptElement},isHTMLStyleElement:function(ee){return ee instanceof G(ee).HTMLStyleElement},isHTMLTextAreaElement:function(ee){return ee instanceof G(ee).HTMLTextAreaElement},isShadowSlotElement:function(ee){return te(ee)&&ee instanceof G(ee).HTMLSlotElement},isSVGElement:function(ee){return ee instanceof G(ee).SVGElement},isSVGRectElement:function(ee){return ee instanceof G(ee).SVGRectElement},isDimensionMissing:function(ee){return isNaN(ee)||ee<=0}};function G(ee){return ee=ee?ee.ownerDocument:void 0,(ee?ee.defaultView:void 0)||n||window}function W(ee){return ee instanceof G(ee).ShadowRoot}function te(ee){return ee!==null&&Object.prototype.hasOwnProperty.call(ee,"getRootNode")&&W(ee.getRootNode())}function q(ee){return ee instanceof G(ee).Element}function Y(ee,ce){if(ee.nodeType===A){let se=v(ee).getPropertyValue(ce);if(se.slice(-2)==="px")return se=se.slice(0,-2),parseFloat(se)}return NaN}}(),i=function(){const Q=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(q,Y,ee){return G(q)?Promise.resolve(q).then(W).then(function(ce){let se=Promise.resolve(q);return ce.forEach(function(le){se=se.then(function(ie){return te(ie,le,Y,ee)})}),se}):Promise.resolve(q)},shouldProcess:G,impl:{readUrls:W,inline:te}};function G(q){return q.search(Q)!==-1}function W(q){for(var Y,ee=[];(Y=Q.exec(q))!==null;)ee.push(Y[1]);return ee.filter(function(ce){return!r.isDataUrl(ce)})}function te(q,Y,ee,ce){return Promise.resolve(Y).then(function(se){return ee?r.resolveUrl(se,ee):se}).then(ce||r.getAndEncode).then(function(se){return q.replace((le=Y,new RegExp(`(url\\(['"]?)(${r.escape(le)})(['"]?\\))`,"g")),`$1${se}$3`);var le})}}(),s={resolveAll:function(){return a().then(function(Q){return Promise.all(Q.map(function(G){return G.resolve()}))}).then(function(Q){return Q.join(`
`)})},impl:{readAll:a}};function a(){return Promise.resolve(r.asArray(document.styleSheets)).then(function(G){const W=[];return G.forEach(function(te){if(Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(te),"cssRules"))try{r.asArray(te.cssRules||[]).forEach(W.push.bind(W))}catch(q){console.error("domtoimage: Error while reading CSS rules from "+te.href,q.toString())}}),W}).then(function(G){return G.filter(function(W){return W.type===CSSRule.FONT_FACE_RULE}).filter(function(W){return i.shouldProcess(W.style.getPropertyValue("src"))})}).then(function(G){return G.map(Q)});function Q(G){return{resolve:function(){var W=(G.parentStyleSheet||{}).href;return i.inlineAll(G.cssText,W)},src:function(){return G.style.getPropertyValue("src")}}}}const l={inlineAll:function Q(G){if(!r.isElement(G))return Promise.resolve(G);return W(G).then(function(){return r.isHTMLImageElement(G)?o(G).inline():Promise.all(r.asArray(G.childNodes).map(function(te){return Q(te)}))});function W(te){const q=["background","background-image"],Y=q.map(function(ee){const ce=te.style.getPropertyValue(ee),se=te.style.getPropertyPriority(ee);return ce?i.inlineAll(ce).then(function(le){te.style.setProperty(ee,le,se)}):Promise.resolve()});return Promise.all(Y).then(function(){return te})}},impl:{newImage:o}};function o(Q){return{inline:function(G){return r.isDataUrl(Q.src)?Promise.resolve():Promise.resolve(Q.src).then(G||r.getAndEncode).then(function(W){return new Promise(function(te){Q.onload=te,Q.onerror=te,Q.src=W})})}}}const d={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,useCredentialsFilters:[],httpTimeout:3e4,styleCaching:"strict",corsImg:void 0,adjustClonedNode:void 0},p={toSvg:C,toPng:function(Q,G){return x(Q,G).then(function(W){return W.toDataURL()})},toJpeg:function(Q,G){return x(Q,G).then(function(W){return W.toDataURL("image/jpeg",(G?G.quality:void 0)||1)})},toBlob:function(Q,G){return x(Q,G).then(r.canvasToBlob)},toPixelData:function(Q,G){return x(Q,G).then(function(W){return W.getContext("2d").getImageData(0,0,r.width(Q),r.height(Q)).data})},toCanvas:x,impl:{fontFaces:s,images:l,util:r,inliner:i,urlCache:[],options:{}}},A=(t.exports=p,(typeof Node<"u"?Node.ELEMENT_NODE:void 0)||1),v=(n!==void 0?n.getComputedStyle:void 0)||(typeof window<"u"?window.getComputedStyle:void 0)||globalThis.getComputedStyle,y=(n!==void 0?n.atob:void 0)||(typeof window<"u"?window.atob:void 0)||globalThis.atob;function C(Q,G){p.impl.util.getWindow(Q);var W=G=G||{};W.copyDefaultStyles===void 0?p.impl.options.copyDefaultStyles=d.copyDefaultStyles:p.impl.options.copyDefaultStyles=W.copyDefaultStyles,W.imagePlaceholder===void 0?p.impl.options.imagePlaceholder=d.imagePlaceholder:p.impl.options.imagePlaceholder=W.imagePlaceholder,W.cacheBust===void 0?p.impl.options.cacheBust=d.cacheBust:p.impl.options.cacheBust=W.cacheBust,W.corsImg===void 0?p.impl.options.corsImg=d.corsImg:p.impl.options.corsImg=W.corsImg,W.useCredentials===void 0?p.impl.options.useCredentials=d.useCredentials:p.impl.options.useCredentials=W.useCredentials,W.useCredentialsFilters===void 0?p.impl.options.useCredentialsFilters=d.useCredentialsFilters:p.impl.options.useCredentialsFilters=W.useCredentialsFilters,W.httpTimeout===void 0?p.impl.options.httpTimeout=d.httpTimeout:p.impl.options.httpTimeout=W.httpTimeout,W.styleCaching===void 0?p.impl.options.styleCaching=d.styleCaching:p.impl.options.styleCaching=W.styleCaching;let te=[];return Promise.resolve(Q).then(function(q){if(q.nodeType===A)return q;var Y=q,ee=q.parentNode,ce=document.createElement("span");return ee.replaceChild(ce,Y),ce.append(q),te.push({parent:ee,child:Y,wrapper:ce}),ce}).then(function(q){return function Y(ee,ce,se,le){const ie=ce.filter;if(ee===M||r.isHTMLScriptElement(ee)||r.isHTMLStyleElement(ee)||r.isHTMLLinkElement(ee)||se!==null&&ie&&!ie(ee))return Promise.resolve();return Promise.resolve(ee).then(pe).then(ue).then(function(_e){return ae(_e,Le(ee))}).then(me).then(function(_e){return be(_e,ee)});function pe(_e){return r.isHTMLCanvasElement(_e)?r.makeImage(_e.toDataURL()):_e.cloneNode(!1)}function ue(_e){return ce.adjustClonedNode&&ce.adjustClonedNode(ee,_e,!1),Promise.resolve(_e)}function me(_e){return ce.adjustClonedNode&&ce.adjustClonedNode(ee,_e,!0),Promise.resolve(_e)}function Le(_e){return r.isElementHostForOpenShadowRoot(_e)?_e.shadowRoot:_e}function ae(_e,$e){const Re=Je($e);let Ie=Promise.resolve();if(Re.length!==0){const je=v(Ne($e));r.asArray(Re).forEach(function(ft){Ie=Ie.then(function(){return Y(ft,ce,je).then(function(Et){Et&&_e.appendChild(Et)})})})}return Ie.then(function(){return _e});function Ne(je){return r.isShadowRoot(je)?je.host:je}function Je(je){return r.isShadowSlotElement(je)?je.assignedNodes():je.childNodes}}function be(_e,$e){return!r.isElement(_e)||r.isShadowSlotElement($e)?Promise.resolve(_e):Promise.resolve().then(Re).then(Ie).then(Ne).then(Je).then(function(){return _e});function Re(){function je(Et,ke){ke.font=Et.font,ke.fontFamily=Et.fontFamily,ke.fontFeatureSettings=Et.fontFeatureSettings,ke.fontKerning=Et.fontKerning,ke.fontSize=Et.fontSize,ke.fontStretch=Et.fontStretch,ke.fontStyle=Et.fontStyle,ke.fontVariant=Et.fontVariant,ke.fontVariantCaps=Et.fontVariantCaps,ke.fontVariantEastAsian=Et.fontVariantEastAsian,ke.fontVariantLigatures=Et.fontVariantLigatures,ke.fontVariantNumeric=Et.fontVariantNumeric,ke.fontVariationSettings=Et.fontVariationSettings,ke.fontWeight=Et.fontWeight}function ft(Et,ke){const Ye=v(Et);Ye.cssText?(ke.style.cssText=Ye.cssText,je(Ye,ke.style)):(F(ce,Et,Ye,se,ke),se===null&&(["inset-block","inset-block-start","inset-block-end"].forEach(at=>ke.style.removeProperty(at)),["left","right","top","bottom"].forEach(at=>{ke.style.getPropertyValue(at)&&ke.style.setProperty(at,"0px")})))}ft($e,_e)}function Ie(){const je=r.uid();function ft(Et){const ke=v($e,Et),Ye=ke.getPropertyValue("content");if(Ye!==""&&Ye!=="none"){let at=function(){const Ut=`.${je}:`+Et,Rt=(ke.cssText?Bt:Ht)();return document.createTextNode(Ut+`{${Rt}}`);function Bt(){return`${ke.cssText} content: ${Ye};`}function Ht(){return r.asArray(ke).map(Zt).join("; ")+";";function Zt(un){const Ft=ke.getPropertyValue(un),mt=ke.getPropertyPriority(un)?" !important":"";return un+": "+Ft+mt}}};const He=_e.getAttribute("class")||"",Tt=(_e.setAttribute("class",He+" "+je),document.createElement("style"));Tt.appendChild(at()),_e.appendChild(Tt)}}[":before",":after"].forEach(function(Et){ft(Et)})}function Ne(){r.isHTMLTextAreaElement($e)&&(_e.innerHTML=$e.value),r.isHTMLInputElement($e)&&_e.setAttribute("value",$e.value)}function Je(){r.isSVGElement(_e)&&(_e.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.isSVGRectElement(_e))&&["width","height"].forEach(function(je){const ft=_e.getAttribute(je);ft&&_e.style.setProperty(je,ft)})}}}(q,G,null)}).then(I).then(P).then(function(q){G.bgcolor&&(q.style.backgroundColor=G.bgcolor),G.width&&(q.style.width=G.width+"px"),G.height&&(q.style.height=G.height+"px"),G.style&&Object.keys(G.style).forEach(function(ee){q.style[ee]=G.style[ee]});let Y=null;return typeof G.onclone=="function"&&(Y=G.onclone(q)),Promise.resolve(Y).then(function(){return q})}).then(function(q){let Y=G.width||r.width(q),ee=G.height||r.height(q);return Promise.resolve(q).then(function(ce){return ce.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(ce)}).then(r.escapeXhtml).then(function(ce){var se=(r.isDimensionMissing(Y)?' width="100%"':` width="${Y}"`)+(r.isDimensionMissing(ee)?' height="100%"':` height="${ee}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(r.isDimensionMissing(Y)?"":` width="${Y}"`)+(r.isDimensionMissing(ee)?"":` height="${ee}"`)}><foreignObject${se}>${ce}</foreignObject></svg>`}).then(function(ce){return"data:image/svg+xml;charset=utf-8,"+ce})}).then(function(q){for(;0<te.length;){var Y=te.pop();Y.parent.replaceChild(Y.child,Y.wrapper)}return q}).then(function(q){return p.impl.urlCache=[],function(){M&&(document.body.removeChild(M),M=null),D&&clearTimeout(D),D=setTimeout(()=>{D=null,V={}},2e4)}(),q})}function x(Q,G){return C(Q,G=G||{}).then(r.makeImage).then(function(W){var te=typeof G.scale!="number"?1:G.scale,q=function(ee,ce){let se=G.width||r.width(ee),le=G.height||r.height(ee);return r.isDimensionMissing(se)&&(se=r.isDimensionMissing(le)?300:2*le),r.isDimensionMissing(le)&&(le=se/2),ee=document.createElement("canvas"),ee.width=se*ce,ee.height=le*ce,G.bgcolor&&((ce=ee.getContext("2d")).fillStyle=G.bgcolor,ce.fillRect(0,0,ee.width,ee.height)),ee}(Q,te),Y=q.getContext("2d");return Y.msImageSmoothingEnabled=!1,Y.imageSmoothingEnabled=!1,W&&(Y.scale(te,te),Y.drawImage(W,0,0)),q})}let M=null;function I(Q){return s.resolveAll().then(function(G){var W;return G!==""&&(W=document.createElement("style"),Q.appendChild(W),W.appendChild(document.createTextNode(G))),Q})}function P(Q){return l.inlineAll(Q).then(function(){return Q})}function F(Q,G,W,te,q){const Y=p.impl.options.copyDefaultStyles?function(ce,ie){var ie=function(ue){var me=[];do if(ue.nodeType===A){var Le=ue.tagName;if(me.push(Le),H.includes(Le))break}while(ue=ue.parentNode,ue);return me}(ie),le=function(ue){return(ce.styleCaching!=="relaxed"?ue:ue.filter((me,Le,ae)=>Le===0||Le===ae.length-1)).join(">")}(ie);if(V[le])return V[le];var pe=function(){if(M)return M.contentWindow;var ue=document.characterSet||"UTF-8",me=document.doctype,me=me?(`<!DOCTYPE ${Le(me.name)} ${Le(me.publicId)} `+Le(me.systemId)).trim()+">":"";return(M=document.createElement("iframe")).id="domtoimage-sandbox-"+r.uid(),M.style.visibility="hidden",M.style.position="fixed",document.body.appendChild(M),function(ae,be,_e,$e){try{return ae.contentWindow.document.write(be+`<html><head><meta charset='${_e}'><title>${$e}</title></head><body></body></html>`),ae.contentWindow}catch{}var Re=document.createElement("meta");Re.setAttribute("charset",_e);try{var Ie=document.implementation.createHTMLDocument($e),Ne=(Ie.head.appendChild(Re),be+Ie.documentElement.outerHTML);return ae.setAttribute("srcdoc",Ne),ae.contentWindow}catch{}return ae.contentDocument.head.appendChild(Re),ae.contentDocument.title=$e,ae.contentWindow}(M,me,ue,"domtoimage-sandbox");function Le(ae){var be;return ae?((be=document.createElement("div")).innerText=ae,be.innerHTML):""}}(),ie=function(ue,me){let Le=ue.body;do{var ae=me.pop(),ae=ue.createElement(ae);Le.appendChild(ae),Le=ae}while(0<me.length);return Le.textContent="",Le}(pe.document,ie),pe=function(ue,me){const Le={},ae=ue.getComputedStyle(me);return r.asArray(ae).forEach(function(be){Le[be]=be==="width"||be==="height"?"auto":ae.getPropertyValue(be)}),Le}(pe,ie);return function(ue){do{var me=ue.parentElement;me!==null&&me.removeChild(ue),ue=me}while(ue&&ue.tagName!=="BODY")}(ie),V[le]=pe}(Q,G):{},ee=q.style;r.asArray(W).forEach(function(ce){var se,le=W.getPropertyValue(ce),ie=Y[ce],pe=te?te.getPropertyValue(ce):void 0;(le!==ie||te&&le!==pe)&&(ie=W.getPropertyPriority(ce),pe=ee,le=le,ie=ie,se=0<=["background-clip"].indexOf(ce=ce),ie?(pe.setProperty(ce,le,ie),se&&pe.setProperty("-webkit-"+ce,le,ie)):(pe.setProperty(ce,le),se&&pe.setProperty("-webkit-"+ce,le)))})}let D=null,V={};const H=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]})(fp)})(eme);var c_t=eme.exports;const u_t=rQ(c_t),h_t=Ge({__name:"OlStyleIcon",props:{anchor:{},anchorOrigin:{default:"top-left"},anchorXUnits:{default:"fraction"},anchorYUnits:{},color:{},crossOrigin:{},img:{},displacement:{default:()=>[0,0]},opacity:{default:1},width:{},height:{},scale:{},rotateWithView:{type:Boolean,default:!1},rotation:{default:0},offset:{default:()=>[0,0]},offsetOrigin:{default:"top-left"},size:{},src:{},declutterMode:{}},setup(t){const e=t,n=Uc(),r=Me(),i=Me(""),s=mn("style",null),a=mn("styledObj",null),l=gi(e),o=oe(()=>{const p=new B_({...l,src:l.src||i.value});return p.load(),p}),d=()=>{var p,A,v;(p=s==null?void 0:s.value)==null||p.setImage(null),(A=s==null?void 0:s.value)==null||A.setImage(o.value),(v=a==null?void 0:a.value)==null||v.changed()};return zt(l,()=>{d()}),zt(s,()=>{d()}),dr(async()=>{n.default&&r.value&&(i.value=await u_t.toSvg(r.value,{width:r.value.offsetWidth,height:r.value.offsetHeight,copyDefaultStyles:!0})),d()}),Ss(()=>{var p;(p=s==null?void 0:s.value)==null||p.setImage(null)}),(p,A)=>i.value?wt("",!0):(ve(),Ue("div",{key:0,ref_key:"htmlContent",ref:r,style:{display:"flex",position:"absolute","z-index":"-1000"}},[kt(p.$slots,"default")],512))}}),d_t=Ge({__name:"OlStyleText",props:{font:{},maxAngle:{default:Math.PI/4},offsetX:{default:0},offsetY:{default:0},overflow:{type:Boolean,default:!1},placement:{default:"point"},scale:{},rotateWithView:{type:Boolean,default:!1},rotation:{default:0},text:{},textAlign:{},textBaseline:{default:"middle"},padding:{default:()=>[0,0,0,0]},fill:{},stroke:{},backgroundFill:{},backgroundStroke:{}},setup(t){const e=t,n=mn("style",null),r=mn("styledObj",null),i=gi(e),s=o=>{const p={...o};return o.fill&&(p.fill=new Hl({color:o.fill})),o.stroke&&(p.stroke=new Za(o.stroke)),o.backgroundFill&&(p.backgroundFill=new Hl({color:o.backgroundFill})),o.backgroundStroke&&(p.backgroundStroke=new Za(o.backgroundStroke)),new Pf(p)},a=oe(()=>s(i)),l=()=>{var o,d,p;(o=n==null?void 0:n.value)==null||o.setText(new Pf),(d=n==null?void 0:n.value)==null||d.setText(a.value),(p=r==null?void 0:r.value)==null||p.changed()};return zt(i,()=>{l()}),zt(()=>n==null?void 0:n.value,()=>{l()}),dr(()=>{var o;(o=n==null?void 0:n.value)==null||o.setText(a.value)}),Ss(()=>{var o;(o=n==null?void 0:n.value)==null||o.setText(new Pf)}),Rr("style",a),Rr("styledObj",r),(o,d)=>(ve(),Ue("div",null,[kt(o.$slots,"default")]))}}),f_t=Ge({__name:"OlStyleFlowline",props:{visible:{type:Boolean,default:!0},width:{},width2:{},color:{},color2:{},arrowClor:{},lineCap:{default:"butt"},arrowSize:{default:16},arrow:{},noOverlap:{type:Boolean},offset0:{},offset1:{},overrideStyleFunction:{}},setup(t,{expose:e}){const n=t,r=mn("stylable",null),i=gi(n),s=oe(()=>new sat(i)),a=o=>{var d,p,A;if(r!=null&&r.value){if(r.value instanceof S7||(r==null?void 0:r.value)instanceof T7){r.value.getOverlay().setStyle(o),r.value.dispatchEvent("styleChanged");return}try{r.value.setStyle(o),r.value.changed(),(d=r==null?void 0:r.value)==null||d.dispatchEvent("styleChanged")}catch{r!=null&&r.value&&(r.value.style_=o,r.value.values_.style=o,(p=r.value)==null||p.changed(),(A=r.value)==null||A.dispatchEvent("styleChanged"))}}},l=oe(()=>(o,d)=>(i.overrideStyleFunction&&i.overrideStyleFunction(o,s.value,d),s.value));return zt(i,()=>{a(i.overrideStyleFunction?l.value:s.value)}),dr(()=>{a(i.overrideStyleFunction?l.value:s.value)}),Ss(()=>{a(new No)}),e({style:s}),(o,d)=>(ve(),Ue("div",null,[kt(o.$slots,"default")]))}});function p_t(t,e){t.component("OlStyle",s_t),t.component("OlStyleCircle",o_t),t.component("OlStyleStroke",a_t),t.component("OlStyleFill",l_t),t.component("OlStyleIcon",h_t),t.component("OlStyleText",d_t),t.component("OlStyleFlowline",f_t),e&&t.provide("ol-options",e)}const A_t=Ge({inheritAttrs:!1,__name:"OlInteractionClusterselect",props:{featureStyle:{},selectCluster:{type:Boolean,default:!0},pointRadius:{default:7},spiral:{type:Boolean,default:!0},circleMaxObject:{},maxObjects:{},animate:{type:Boolean,default:!0},animationDuration:{default:500},autoClose:{type:Boolean,default:!0},addCondition:{},condition:{},layers:{},style:{},removeCondition:{},toggleCondition:{},multi:{type:Boolean,default:!1},features:{},filter:{},hitTolerance:{}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=oe(()=>new cat({style:new No,...i}));return Uo(s,["select"]),zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),Rr("stylable",s),e({select:s}),(a,l)=>kt(a.$slots,"default")}}),g_t=Ge({inheritAttrs:!1,__name:"OlInteractionDragbox",props:{className:{},condition:{},minArea:{},boxEndCondition:{},onBoxEnd:{}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=oe(()=>new Pfe(i));return Uo(s,["boxcancel","boxdrag","boxend","boxstart"]),zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),e({dragbox:s}),(a,l)=>kt(a.$slots,"default")}}),m_t=Ge({__name:"OlInteractionDragrotate",props:{condition:{},duration:{default:250}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=oe(()=>new Rfe(i));return zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),e({dragrotate:s}),(a,l)=>kt(a.$slots,"default")}}),v_t=Ge({__name:"OlInteractionDragrotatezoom",props:{condition:{},duration:{default:400}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=oe(()=>new uat(i));return zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),e({dragRotateZoom:s}),(a,l)=>kt(a.$slots,"default")}}),y_t=Ge({inheritAttrs:!1,__name:"OlInteractionLink",props:{animate:{type:[Boolean,Object],default:!0},params:{default:["x","y","z","r","l"]},replace:{type:Boolean,default:!1},prefix:{default:""}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=Ds(new fat(i));return Uo(s,["change:active"]),zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),Rr("stylable",s),e({link:s}),(a,l)=>kt(a.$slots,"default")}}),__t=Ge({inheritAttrs:!1,__name:"OlInteractionSelect",props:{multi:{type:Boolean,default:!1},condition:{},filter:{},features:{},hitTolerance:{default:0},removeCondition:{}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=oe(()=>new aN({...i,style:new No}));return Uo(s,["select"]),zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),Rr("stylable",s),e({select:s}),(a,l)=>kt(a.$slots,"default")}}),b_t=Ge({inheritAttrs:!1,__name:"OlInteractionDraw",props:{type:{},clickTolerance:{default:6},dragVertexDelay:{default:500},snapTolerance:{default:12},stopClick:{type:Boolean,default:!1},maxPoints:{},minPoints:{},finishCondition:{},geometryFunction:{},geometryName:{},condition:{},freehand:{type:Boolean,default:!1},freehandCondition:{},wrapX:{type:Boolean,default:!1}},setup(t,{expose:e}){const n=t,r=mn("map"),i=mn("vectorSource"),{type:s,clickTolerance:a,dragVertexDelay:l,snapTolerance:o,stopClick:d,maxPoints:p,minPoints:A,finishCondition:v,geometryFunction:y,geometryName:C,condition:x,freehand:M,freehandCondition:I,wrapX:P}=dc(n);function F(){return new S7({source:i==null?void 0:i.value,type:s.value,clickTolerance:a.value,dragVertexDelay:l.value,snapTolerance:o.value,stopClick:d.value,maxPoints:p==null?void 0:p.value,minPoints:A==null?void 0:A.value,finishCondition:v==null?void 0:v.value,geometryFunction:y==null?void 0:y.value,geometryName:C==null?void 0:C.value,condition:x==null?void 0:x.value,freehand:M.value,freehandCondition:I==null?void 0:I.value,wrapX:P.value})}let D=F();return Uo(D,["drawstart","drawend"]),zt([s,a,l,o,d,p,A,v,y,C,x,M,I,P],()=>{D.abortDrawing(),r==null||r.removeInteraction(D),D=F(),r==null||r.addInteraction(D),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(D)}),Ss(()=>{r==null||r.removeInteraction(D)}),Rr("stylable",D),e({draw:D}),(V,H)=>kt(V.$slots,"default")}}),w_t=Ge({inheritAttrs:!1,__name:"OlInteractionModify",props:{condition:{},deleteCondition:{},insertVertexCondition:{},pixelTolerance:{default:10},wrapX:{type:Boolean,default:!1},hitDetection:{type:Boolean},features:{}},setup(t,{expose:e}){const n=t,r=mn("map"),i=mn("vectorSource"),{features:s,condition:a,deleteCondition:l,insertVertexCondition:o,pixelTolerance:d,wrapX:p,hitDetection:A}=dc(n);function v(){return new T7({source:i==null?void 0:i.value,features:s==null?void 0:s.value,condition:a==null?void 0:a.value,deleteCondition:l==null?void 0:l.value,insertVertexCondition:o==null?void 0:o.value,pixelTolerance:d.value,wrapX:p.value,hitDetection:A.value})}let y=v();return Uo(y,["modifystart","modifyend"]),zt([a,l,o,d,p,A],()=>{y.dispose(),r==null||r.removeInteraction(y),y=v(),r==null||r.addInteraction(y),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(y)}),Ss(()=>{r==null||r.removeInteraction(y)}),Rr("stylable",y),e({modify:y}),(C,x)=>kt(C.$slots,"default")}}),x_t=Ge({inheritAttrs:!1,__name:"OlInteractionPointer",props:{handleEvent:{type:Function},stopDown:{type:Function}},emits:["down","move","up","drag"],setup(t,{expose:e,emit:n}){const r=n,i=t,s=mn("map"),a=gi(i),l=Ds(new WA({...a,handleDownEvent:o=>(r("down",o),!0),handleDragEvent:o=>(r("drag",o),!0),handleMoveEvent:o=>{r("move",o)},handleUpEvent:o=>(r("up",o),!0)}));return Uo(l,["change:active"]),zt(l,(o,d)=>{s==null||s.removeInteraction(d),s==null||s.addInteraction(o),s==null||s.changed()}),dr(()=>{s==null||s.addInteraction(l.value)}),Ss(()=>{s==null||s.removeInteraction(l.value)}),e({pointer:l}),(o,d)=>kt(o.$slots,"default")}}),C_t=Ge({__name:"OlInteractionSnap",props:{vertex:{type:Boolean,default:!0},edge:{type:Boolean,default:!0},pixelTolerance:{default:10}},setup(t,{expose:e}){const n=t,r=mn("map"),i=mn("vectorSource"),s=gi(n),a=()=>new gat({...s,source:i==null?void 0:i.value});let l=a();return zt(s,()=>{r==null||r.removeInteraction(l),l=a(),r==null||r.addInteraction(l),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(l)}),Ss(()=>{r==null||r.removeInteraction(l)}),e({snap:l}),(o,d)=>kt(o.$slots,"default")}}),E_t=Ge({inheritAttrs:!1,__name:"OlInteractionTransform",props:{enableRotatedTransform:{type:Boolean,default:!1},condition:{},addCondition:{},filter:{},hitTolerance:{default:2},translateFeature:{type:Boolean,default:!0},scale:{type:Boolean,default:!0},rotate:{type:Boolean,default:!0},keepAspectRatio:{type:Function,default:()=>!1},translate:{type:Boolean,default:!0},stretch:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,r=mn("map"),i=gi(n),s=oe(()=>new gAe(i));return Uo(s,["select","rotatestart","rotating","rotateend","translatestart","translating","translateend","scalestart","scaling","scaleend"]),zt(s,(a,l)=>{r==null||r.removeInteraction(l),r==null||r.addInteraction(a),r==null||r.changed()}),dr(()=>{r==null||r.addInteraction(s.value)}),Ss(()=>{r==null||r.removeInteraction(s.value)}),Rr("stylable",s),e({transform:s}),(a,l)=>kt(a.$slots,"default")}});function S_t(t,e){t.component("OlInteractionClusterselect",A_t),t.component("OlInteractionDragbox",g_t),t.component("OlInteractionDragrotate",m_t),t.component("OlInteractionDragrotatezoom",v_t),t.component("OlInteractionLink",y_t),t.component("OlInteractionSelect",__t),t.component("OlInteractionDraw",b_t),t.component("OlInteractionModify",w_t),t.component("OlInteractionPointer",x_t),t.component("OlInteractionSnap",C_t),t.component("OlInteractionTransform",E_t),e&&t.provide("ol-options",e)}function rw(t,e){const n=mn("map"),r=mn("vectorLayer"),i=gi(e),s=oe(()=>new t(i));return Rr("animation",s),{map:n,vectorLayer:r,animation:s,properties:i}}const iw={duration:1e3,revers:!1,repeat:0,easing:Mp},T_t=Ge({__name:"OlAnimationDrop",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},speed:{},side:{}},{...iw,side:0,speed:0}),setup(t,{expose:e}){const r=rw(mat,t);return e(r),(i,s)=>kt(i.$slots,"default")}}),I_t=Ge({__name:"OlAnimationFade",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function}},iw),setup(t,{expose:e}){const r=rw(vat,t);return e(r),(i,s)=>kt(i.$slots,"default")}}),B_t=Ge({__name:"OlAnimationPath",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},rotate:{type:Boolean},speed:{},path:{}},{...iw,rotate:!1,speed:0}),setup(t,{expose:e}){const r=rw(yat,t);return e(r),(i,s)=>kt(i.$slots,"default")}}),M_t=Ge({__name:"OlAnimationShake",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},bounce:{},amplitude:{},horizontal:{type:Boolean}},{...iw,bounce:6,amplitude:40,horizontal:!1}),setup(t,{expose:e}){const r=rw(_at,t);return e(r),(i,s)=>kt(i.$slots,"default")}}),L_t=Ge({__name:"OlAnimationSlide",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},speed:{}},{...iw,speed:0}),setup(t,{expose:e}){const r=rw(bat,t);return e(r),(i,s)=>kt(i.$slots,"default")}}),R_t=Ge({__name:"OlAnimationTeleport",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function}},iw),setup(t,{expose:e}){const r=rw(wat,t);return e(r),(i,s)=>kt(i.$slots,"default")}}),P_t=Ge({__name:"OlAnimationZoom",props:Qu({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},zoomOut:{type:Boolean}},{...iw,zoomOut:!1}),setup(t,{expose:e}){const r=rw(xat,t);return e(r),(i,s)=>kt(i.$slots,"default")}});function F_t(t,e){t.component("OlAnimationDrop",T_t),t.component("OlAnimationFade",I_t),t.component("OlAnimationPath",B_t),t.component("OlAnimationShake",M_t),t.component("OlAnimationSlide",L_t),t.component("OlAnimationTeleport",R_t),t.component("OlAnimationZoom",P_t),e&&t.provide("ol-options",e)}const O_t=(t,e)=>{t.provide("ol-feature",Ys),t.provide("ol-geom",Ant),t.provide("ol-animations",XJe),t.provide("ol-format",lpt),t.provide("ol-loadingstrategy",vnt),t.provide("ol-selectconditions",Vtt),t.provide("ol-extent",rJe),e&&t.provide("ol-options",e)},N_t={install:O_t},k_t=(t,e)=>{t.use(n0t),t.use(p0t),t.use(R0t),t.use(Yyt),t.use(i_t),t.use(p_t),t.use(S_t),t.use(F_t),t.use(N_t.install),t.provide("ol-options",e)},D_t={install:k_t};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dz=function(t,e){return dz=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},dz(t,e)};function XA(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dz(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var fz=function(){return fz=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fz.apply(this,arguments)};function Fh(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{d(r.next(p))}catch(A){a(A)}}function o(p){try{d(r.throw(p))}catch(A){a(A)}}function d(p){p.done?s(p.value):i(p.value).then(l,o)}d((r=r.apply(t,[])).next())})}function hh(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(d){return function(p){return o([d,p])}}function o(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(p){d=[6,p],i=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function nP(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var n0=function(){function t(e,n,r,i){this.left=e,this.top=n,this.width=r,this.height=i}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(i){return i.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),xN=function(t,e){return n0.fromClientRect(t,e.getBoundingClientRect())},U_t=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new n0(0,0,r,i)},CN=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e},ic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var a=t[i];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},vne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z_t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rP=0;rP<vne.length;rP++)z_t[vne.charCodeAt(rP)]=rP;var yne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var iP=0;iP<yne.length;iP++)xT[yne.charCodeAt(iP)]=iP;var $_t=function(t){var e=t.length*.75,n=t.length,r,i=0,s,a,l,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),p=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<n;r+=4)s=xT[t.charCodeAt(r)],a=xT[t.charCodeAt(r+1)],l=xT[t.charCodeAt(r+2)],o=xT[t.charCodeAt(r+3)],p[i++]=s<<2|a>>4,p[i++]=(a&15)<<4|l>>2,p[i++]=(l&3)<<6|o&63;return d},V_t=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},H_t=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},pb=5,oQ=11,h6=2,G_t=oQ-pb,tme=65536>>pb,Q_t=1<<pb,d6=Q_t-1,j_t=1024>>pb,K_t=tme+j_t,W_t=K_t,q_t=32,Y_t=W_t+q_t,X_t=65536>>oQ,Z_t=1<<G_t,J_t=Z_t-1,_ne=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},e1t=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},t1t=function(t,e){var n=$_t(t),r=Array.isArray(n)?H_t(n):new Uint32Array(n),i=Array.isArray(n)?V_t(n):new Uint16Array(n),s=24,a=_ne(i,s/2,r[4]/2),l=r[5]===2?_ne(i,(s+r[4])/2):e1t(r,Math.ceil((s+r[4])/4));return new n1t(r[0],r[1],r[2],r[3],a,l)},n1t=function(){function t(e,n,r,i,s,a){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=a}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>pb],n=(n<<h6)+(e&d6),this.data[n];if(e<=65535)return n=this.index[tme+(e-55296>>pb)],n=(n<<h6)+(e&d6),this.data[n];if(e<this.highStart)return n=Y_t-X_t+(e>>oQ),n=this.index[n],n+=e>>pb&J_t,n=this.index[n],n=(n<<h6)+(e&d6),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),bne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r1t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sP=0;sP<bne.length;sP++)r1t[bne.charCodeAt(sP)]=sP;var i1t="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",wne=50,s1t=1,nme=2,rme=3,o1t=4,a1t=5,xne=7,ime=8,Cne=9,Dy=10,pz=11,Ene=12,Az=13,l1t=14,CT=15,gz=16,oP=17,JS=18,c1t=19,Sne=20,mz=21,eT=22,f6=23,hx=24,xf=25,ET=26,ST=27,dx=28,u1t=29,F1=30,h1t=31,aP=32,lP=33,vz=34,yz=35,_z=36,TB=37,bz=38,FF=39,OF=40,p6=41,sme=42,d1t=43,f1t=[9001,65288],ome="!",Eo="",cP="",wz=t1t(i1t),gv=[F1,_z],xz=[s1t,nme,rme,a1t],ame=[Dy,ime],Tne=[ST,ET],p1t=xz.concat(ame),Ine=[bz,FF,OF,vz,yz],A1t=[CT,Az],g1t=function(t,e){e===void 0&&(e="strict");var n=[],r=[],i=[];return t.forEach(function(s,a){var l=wz.get(s);if(l>wne?(i.push(!0),l-=wne):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(a),n.push(gz);if(l===o1t||l===pz){if(a===0)return r.push(a),n.push(F1);var o=n[a-1];return p1t.indexOf(o)===-1?(r.push(r[a-1]),n.push(o)):(r.push(a),n.push(F1))}if(r.push(a),l===h1t)return n.push(e==="strict"?mz:TB);if(l===sme||l===u1t)return n.push(F1);if(l===d1t)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(TB):n.push(F1);n.push(l)}),[r,n,i]},A6=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var s=n;s<=r.length;){s++;var a=r[s];if(a===e)return!0;if(a!==Dy)break}if(i===Dy)for(var s=n;s>0;){s--;var l=r[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var o=n;o<=r.length;){o++;var a=r[o];if(a===e)return!0;if(a!==Dy)break}if(l!==Dy)break}return!1},Bne=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Dy)n--;else return r}return 0},m1t=function(t,e,n,r,i){if(n[r]===0)return Eo;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return Eo;var a=s-1,l=s+1,o=e[s],d=a>=0?e[a]:0,p=e[l];if(o===nme&&p===rme)return Eo;if(xz.indexOf(o)!==-1)return ome;if(xz.indexOf(p)!==-1||ame.indexOf(p)!==-1)return Eo;if(Bne(s,e)===ime)return cP;if(wz.get(t[s])===pz||(o===aP||o===lP)&&wz.get(t[l])===pz||o===xne||p===xne||o===Cne||[Dy,Az,CT].indexOf(o)===-1&&p===Cne||[oP,JS,c1t,hx,dx].indexOf(p)!==-1||Bne(s,e)===eT||A6(f6,eT,s,e)||A6([oP,JS],mz,s,e)||A6(Ene,Ene,s,e))return Eo;if(o===Dy)return cP;if(o===f6||p===f6)return Eo;if(p===gz||o===gz)return cP;if([Az,CT,mz].indexOf(p)!==-1||o===l1t||d===_z&&A1t.indexOf(o)!==-1||o===dx&&p===_z||p===Sne||gv.indexOf(p)!==-1&&o===xf||gv.indexOf(o)!==-1&&p===xf||o===ST&&[TB,aP,lP].indexOf(p)!==-1||[TB,aP,lP].indexOf(o)!==-1&&p===ET||gv.indexOf(o)!==-1&&Tne.indexOf(p)!==-1||Tne.indexOf(o)!==-1&&gv.indexOf(p)!==-1||[ST,ET].indexOf(o)!==-1&&(p===xf||[eT,CT].indexOf(p)!==-1&&e[l+1]===xf)||[eT,CT].indexOf(o)!==-1&&p===xf||o===xf&&[xf,dx,hx].indexOf(p)!==-1)return Eo;if([xf,dx,hx,oP,JS].indexOf(p)!==-1)for(var A=s;A>=0;){var v=e[A];if(v===xf)return Eo;if([dx,hx].indexOf(v)!==-1)A--;else break}if([ST,ET].indexOf(p)!==-1)for(var A=[oP,JS].indexOf(o)!==-1?a:s;A>=0;){var v=e[A];if(v===xf)return Eo;if([dx,hx].indexOf(v)!==-1)A--;else break}if(bz===o&&[bz,FF,vz,yz].indexOf(p)!==-1||[FF,vz].indexOf(o)!==-1&&[FF,OF].indexOf(p)!==-1||[OF,yz].indexOf(o)!==-1&&p===OF||Ine.indexOf(o)!==-1&&[Sne,ET].indexOf(p)!==-1||Ine.indexOf(p)!==-1&&o===ST||gv.indexOf(o)!==-1&&gv.indexOf(p)!==-1||o===hx&&gv.indexOf(p)!==-1||gv.concat(xf).indexOf(o)!==-1&&p===eT&&f1t.indexOf(t[l])===-1||gv.concat(xf).indexOf(p)!==-1&&o===JS)return Eo;if(o===p6&&p===p6){for(var y=n[s],C=1;y>0&&(y--,e[y]===p6);)C++;if(C%2!==0)return Eo}return o===aP&&p===lP?Eo:cP},v1t=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=g1t(t,e.lineBreak),r=n[0],i=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(l){return[xf,F1,sme].indexOf(l)!==-1?TB:l}));var a=e.wordBreak==="keep-all"?s.map(function(l,o){return l&&t[o]>=19968&&t[o]<=40959}):void 0;return[r,i,a]},y1t=function(){function t(e,n,r,i){this.codePoints=e,this.required=n===ome,this.start=r,this.end=i}return t.prototype.slice=function(){return ic.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),_1t=function(t,e){var n=CN(t),r=v1t(n,e),i=r[0],s=r[1],a=r[2],l=n.length,o=0,d=0;return{next:function(){if(d>=l)return{done:!0,value:null};for(var p=Eo;d<l&&(p=m1t(n,s,i,++d,a))===Eo;);if(p!==Eo||d===l){var A=new y1t(n,p,o,d);return o=d,{value:A,done:!1}}return{done:!0,value:null}}}},b1t=1,w1t=2,TM=4,Mne=8,y5=10,Lne=47,pI=92,x1t=9,C1t=32,uP=34,tT=61,E1t=35,S1t=36,T1t=37,hP=39,dP=40,nT=41,I1t=95,yd=45,B1t=33,M1t=60,L1t=62,R1t=64,P1t=91,F1t=93,O1t=61,N1t=123,fP=63,k1t=125,Rne=124,D1t=126,U1t=128,Pne=65533,g6=42,Y1=43,z1t=44,$1t=58,V1t=59,IB=46,H1t=0,G1t=8,Q1t=11,j1t=14,K1t=31,W1t=127,Rg=-1,lme=48,cme=97,ume=101,q1t=102,Y1t=117,X1t=122,hme=65,dme=69,fme=70,Z1t=85,J1t=90,fh=function(t){return t>=lme&&t<=57},ebt=function(t){return t>=55296&&t<=57343},fx=function(t){return fh(t)||t>=hme&&t<=fme||t>=cme&&t<=q1t},tbt=function(t){return t>=cme&&t<=X1t},nbt=function(t){return t>=hme&&t<=J1t},rbt=function(t){return tbt(t)||nbt(t)},ibt=function(t){return t>=U1t},pP=function(t){return t===y5||t===x1t||t===C1t},_5=function(t){return rbt(t)||ibt(t)||t===I1t},Fne=function(t){return _5(t)||fh(t)||t===yd},sbt=function(t){return t>=H1t&&t<=G1t||t===Q1t||t>=j1t&&t<=K1t||t===W1t},xy=function(t,e){return t!==pI?!1:e!==y5},AP=function(t,e,n){return t===yd?_5(e)||xy(e,n):_5(t)?!0:!!(t===pI&&xy(t,e))},m6=function(t,e,n){return t===Y1||t===yd?fh(e)?!0:e===IB&&fh(n):fh(t===IB?e:t)},obt=function(t){var e=0,n=1;(t[e]===Y1||t[e]===yd)&&(t[e]===yd&&(n=-1),e++);for(var r=[];fh(t[e]);)r.push(t[e++]);var i=r.length?parseInt(ic.apply(void 0,r),10):0;t[e]===IB&&e++;for(var s=[];fh(t[e]);)s.push(t[e++]);var a=s.length,l=a?parseInt(ic.apply(void 0,s),10):0;(t[e]===dme||t[e]===ume)&&e++;var o=1;(t[e]===Y1||t[e]===yd)&&(t[e]===yd&&(o=-1),e++);for(var d=[];fh(t[e]);)d.push(t[e++]);var p=d.length?parseInt(ic.apply(void 0,d),10):0;return n*(i+l*Math.pow(10,-a))*Math.pow(10,o*p)},abt={type:2},lbt={type:3},cbt={type:4},ubt={type:13},hbt={type:8},dbt={type:21},fbt={type:9},pbt={type:10},Abt={type:11},gbt={type:12},mbt={type:14},gP={type:23},vbt={type:1},ybt={type:25},_bt={type:24},bbt={type:26},wbt={type:27},xbt={type:28},Cbt={type:29},Ebt={type:31},Cz={type:32},pme=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(CN(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Cz;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case uP:return this.consumeStringToken(uP);case E1t:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Fne(n)||xy(r,i)){var s=AP(n,r,i)?w1t:b1t,a=this.consumeName();return{type:5,value:a,flags:s}}break;case S1t:if(this.peekCodePoint(0)===tT)return this.consumeCodePoint(),ubt;break;case hP:return this.consumeStringToken(hP);case dP:return abt;case nT:return lbt;case g6:if(this.peekCodePoint(0)===tT)return this.consumeCodePoint(),mbt;break;case Y1:if(m6(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case z1t:return cbt;case yd:var l=e,o=this.peekCodePoint(0),d=this.peekCodePoint(1);if(m6(l,o,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(AP(l,o,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===yd&&d===L1t)return this.consumeCodePoint(),this.consumeCodePoint(),_bt;break;case IB:if(m6(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Lne:if(this.peekCodePoint(0)===g6)for(this.consumeCodePoint();;){var p=this.consumeCodePoint();if(p===g6&&(p=this.consumeCodePoint(),p===Lne))return this.consumeToken();if(p===Rg)return this.consumeToken()}break;case $1t:return bbt;case V1t:return wbt;case M1t:if(this.peekCodePoint(0)===B1t&&this.peekCodePoint(1)===yd&&this.peekCodePoint(2)===yd)return this.consumeCodePoint(),this.consumeCodePoint(),ybt;break;case R1t:var A=this.peekCodePoint(0),v=this.peekCodePoint(1),y=this.peekCodePoint(2);if(AP(A,v,y)){var a=this.consumeName();return{type:7,value:a}}break;case P1t:return xbt;case pI:if(xy(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case F1t:return Cbt;case O1t:if(this.peekCodePoint(0)===tT)return this.consumeCodePoint(),hbt;break;case N1t:return Abt;case k1t:return gbt;case Y1t:case Z1t:var C=this.peekCodePoint(0),x=this.peekCodePoint(1);return C===Y1&&(fx(x)||x===fP)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Rne:if(this.peekCodePoint(0)===tT)return this.consumeCodePoint(),fbt;if(this.peekCodePoint(0)===Rne)return this.consumeCodePoint(),dbt;break;case D1t:if(this.peekCodePoint(0)===tT)return this.consumeCodePoint(),pbt;break;case Rg:return Cz}return pP(e)?(this.consumeWhiteSpace(),Ebt):fh(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):_5(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ic(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();fx(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===fP&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(ic.apply(void 0,e.map(function(o){return o===fP?lme:o})),16),s=parseInt(ic.apply(void 0,e.map(function(o){return o===fP?fme:o})),16);return{type:30,start:i,end:s}}var a=parseInt(ic.apply(void 0,e),16);if(this.peekCodePoint(0)===yd&&fx(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var l=[];fx(n)&&l.length<6;)l.push(n),n=this.consumeCodePoint();var s=parseInt(ic.apply(void 0,l),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===dP?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===dP?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rg)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===hP||n===uP){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Rg||this.peekCodePoint(0)===nT)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),gP)}for(;;){var i=this.consumeCodePoint();if(i===Rg||i===nT)return{type:22,value:ic.apply(void 0,e)};if(pP(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Rg||this.peekCodePoint(0)===nT?(this.consumeCodePoint(),{type:22,value:ic.apply(void 0,e)}):(this.consumeBadUrlRemnants(),gP);if(i===uP||i===hP||i===dP||sbt(i))return this.consumeBadUrlRemnants(),gP;if(i===pI)if(xy(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),gP;else e.push(i)}},t.prototype.consumeWhiteSpace=function(){for(;pP(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===nT||e===Rg)return;xy(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var i=Math.min(n,e);r+=ic.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var i=this._value[r];if(i===Rg||i===void 0||i===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(i===y5)return this._value.splice(0,r),vbt;if(i===pI){var s=this._value[r+1];s!==Rg&&s!==void 0&&(s===y5?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):xy(i,s)&&(n+=this.consumeStringSlice(r),n+=ic(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=TM,r=this.peekCodePoint(0);for((r===Y1||r===yd)&&e.push(this.consumeCodePoint());fh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===IB&&fh(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Mne;fh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===dme||r===ume)&&((i===Y1||i===yd)&&fh(s)||fh(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=Mne;fh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[obt(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(AP(i,s,a)){var l=this.consumeName();return{type:15,number:n,flags:r,unit:l}}return i===T1t?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(fx(e)){for(var n=ic(e);fx(this.peekCodePoint(0))&&n.length<6;)n+=ic(this.consumeCodePoint());pP(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||ebt(r)||r>1114111?Pne:r}return e===Rg?Pne:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(Fne(n))e+=ic(n);else if(xy(n,this.peekCodePoint(0)))e+=ic(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),Ame=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new pme;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Tbt(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Cz:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),IM=function(t){return t.type===15},QE=function(t){return t.type===17},Ma=function(t){return t.type===20},Sbt=function(t){return t.type===0},Ez=function(t,e){return Ma(t)&&t.value===e},gme=function(t){return t.type!==31},pE=function(t){return t.type!==31&&t.type!==4},ym=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},Tbt=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},g_=function(t){return t.type===17||t.type===15},Fc=function(t){return t.type===16||g_(t)},mme=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},$u={type:17,number:0,flags:TM},aQ={type:16,number:50,flags:TM},Uy={type:16,number:100,flags:TM},TT=function(t,e,n){var r=t[0],i=t[1];return[qa(r,e),qa(typeof i<"u"?i:r,n)]},qa=function(t,e){if(t.type===16)return t.number/100*e;if(IM(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},vme="deg",yme="grad",_me="rad",bme="turn",EN={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case vme:return Math.PI*e.number/180;case yme:return Math.PI/200*e.number;case _me:return e.number;case bme:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},wme=function(t){return t.type===15&&(t.unit===vme||t.unit===yme||t.unit===_me||t.unit===bme)},xme=function(t){var e=t.filter(Ma).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$u,$u];case"to top":case"bottom":return vp(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$u,Uy];case"to right":case"left":return vp(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Uy,Uy];case"to bottom":case"top":return vp(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Uy,$u];case"to left":case"right":return vp(270)}return 0},vp=function(t){return Math.PI*t/180},Ky={name:"color",parse:function(t,e){if(e.type===18){var n=Ibt[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return zy(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return zy(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return zy(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return zy(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var l=zv[e.value.toUpperCase()];if(typeof l<"u")return l}return zv.TRANSPARENT}},Wy=function(t){return(255&t)===0},gu=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},zy=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},One=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},Nne=function(t,e){var n=e.filter(pE);if(n.length===3){var r=n.map(One),i=r[0],s=r[1],a=r[2];return zy(i,s,a,1)}if(n.length===4){var l=n.map(One),i=l[0],s=l[1],a=l[2],o=l[3];return zy(i,s,a,o)}return 0};function v6(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var kne=function(t,e){var n=e.filter(pE),r=n[0],i=n[1],s=n[2],a=n[3],l=(r.type===17?vp(r.number):EN.parse(t,r))/(Math.PI*2),o=Fc(i)?i.number/100:0,d=Fc(s)?s.number/100:0,p=typeof a<"u"&&Fc(a)?qa(a,1):1;if(o===0)return zy(d*255,d*255,d*255,1);var A=d<=.5?d*(o+1):d+o-d*o,v=d*2-A,y=v6(v,A,l+1/3),C=v6(v,A,l),x=v6(v,A,l-1/3);return zy(y*255,C*255,x*255,p)},Ibt={hsl:kne,hsla:kne,rgb:Nne,rgba:Nne},AI=function(t,e){return Ky.parse(t,Ame.create(e).parseComponentValue())},zv={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Bbt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Ma(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Mbt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},SN=function(t,e){var n=Ky.parse(t,e[0]),r=e[1];return r&&Fc(r)?{color:n,stop:r}:{color:n,stop:null}},Dne=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=$u),r.stop===null&&(r.stop=Uy);for(var i=[],s=0,a=0;a<t.length;a++){var l=t[a].stop;if(l!==null){var o=qa(l,e);o>s?i.push(o):i.push(s),s=o}else i.push(null)}for(var d=null,a=0;a<i.length;a++){var p=i[a];if(p===null)d===null&&(d=a);else if(d!==null){for(var A=a-d,v=i[d-1],y=(p-v)/(A+1),C=1;C<=A;C++)i[d+C-1]=y*C;d=null}}return t.map(function(x,M){var I=x.color;return{color:I,stop:Math.max(Math.min(1,i[M]/e),0)}})},Lbt=function(t,e,n){var r=e/2,i=n/2,s=qa(t[0],e)-r,a=i-qa(t[1],n);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},Rbt=function(t,e,n){var r=typeof t=="number"?t:Lbt(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,a=n/2,l=i/2,o=Math.sin(r-Math.PI/2)*l,d=Math.cos(r-Math.PI/2)*l;return[i,s-d,s+d,a-o,a+o]},bA=function(t,e){return Math.sqrt(t*t+e*e)},Une=function(t,e,n,r,i){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(a,l){var o=l[0],d=l[1],p=bA(n-o,r-d);return(i?p<a.optimumDistance:p>a.optimumDistance)?{optimumCorner:l,optimumDistance:p}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Pbt=function(t,e,n,r,i){var s=0,a=0;switch(t.size){case 0:t.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(t.shape===0)s=a=Math.min(bA(e,n),bA(e,n-i),bA(e-r,n),bA(e-r,n-i));else if(t.shape===1){var l=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),o=Une(r,i,e,n,!0),d=o[0],p=o[1];s=bA(d-e,(p-n)/l),a=l*s}break;case 1:t.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(t.shape===0)s=a=Math.max(bA(e,n),bA(e,n-i),bA(e-r,n),bA(e-r,n-i));else if(t.shape===1){var l=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r)),A=Une(r,i,e,n,!1),d=A[0],p=A[1];s=bA(d-e,(p-n)/l),a=l*s}break}return Array.isArray(t.size)&&(s=qa(t.size[0],r),a=t.size.length===2?qa(t.size[1],i):s),[s,a]},Fbt=function(t,e){var n=vp(180),r=[];return ym(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){n=xme(i);return}else if(wme(a)){n=EN.parse(t,a);return}}var l=SN(t,i);r.push(l)}),{angle:n,stops:r,type:1}},mP=function(t,e){var n=vp(180),r=[];return ym(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){n=xme(i);return}else if(wme(a)){n=(EN.parse(t,a)+vp(270))%vp(360);return}}var l=SN(t,i);r.push(l)}),{angle:n,stops:r,type:1}},Obt=function(t,e){var n=vp(180),r=[],i=1,s=0,a=3,l=[];return ym(e).forEach(function(o,d){var p=o[0];if(d===0){if(Ma(p)&&p.value==="linear"){i=1;return}else if(Ma(p)&&p.value==="radial"){i=2;return}}if(p.type===18){if(p.name==="from"){var A=Ky.parse(t,p.values[0]);r.push({stop:$u,color:A})}else if(p.name==="to"){var A=Ky.parse(t,p.values[0]);r.push({stop:Uy,color:A})}else if(p.name==="color-stop"){var v=p.values.filter(pE);if(v.length===2){var A=Ky.parse(t,v[1]),y=v[0];QE(y)&&r.push({stop:{type:16,number:y.number*100,flags:y.flags},color:A})}}}}),i===1?{angle:(n+vp(180))%vp(360),stops:r,type:i}:{size:a,shape:s,stops:r,position:l,type:i}},Cme="closest-side",Eme="farthest-side",Sme="closest-corner",Tme="farthest-corner",Ime="circle",Bme="ellipse",Mme="cover",Lme="contain",Nbt=function(t,e){var n=0,r=3,i=[],s=[];return ym(e).forEach(function(a,l){var o=!0;if(l===0){var d=!1;o=a.reduce(function(A,v){if(d)if(Ma(v))switch(v.value){case"center":return s.push(aQ),A;case"top":case"left":return s.push($u),A;case"right":case"bottom":return s.push(Uy),A}else(Fc(v)||g_(v))&&s.push(v);else if(Ma(v))switch(v.value){case Ime:return n=0,!1;case Bme:return n=1,!1;case"at":return d=!0,!1;case Cme:return r=0,!1;case Mme:case Eme:return r=1,!1;case Lme:case Sme:return r=2,!1;case Tme:return r=3,!1}else if(g_(v)||Fc(v))return Array.isArray(r)||(r=[]),r.push(v),!1;return A},o)}if(o){var p=SN(t,a);i.push(p)}}),{size:r,shape:n,stops:i,position:s,type:2}},vP=function(t,e){var n=0,r=3,i=[],s=[];return ym(e).forEach(function(a,l){var o=!0;if(l===0?o=a.reduce(function(p,A){if(Ma(A))switch(A.value){case"center":return s.push(aQ),!1;case"top":case"left":return s.push($u),!1;case"right":case"bottom":return s.push(Uy),!1}else if(Fc(A)||g_(A))return s.push(A),!1;return p},o):l===1&&(o=a.reduce(function(p,A){if(Ma(A))switch(A.value){case Ime:return n=0,!1;case Bme:return n=1,!1;case Lme:case Cme:return r=0,!1;case Eme:return r=1,!1;case Sme:return r=2,!1;case Mme:case Tme:return r=3,!1}else if(g_(A)||Fc(A))return Array.isArray(r)||(r=[]),r.push(A),!1;return p},o)),o){var d=SN(t,a);i.push(d)}}),{size:r,shape:n,stops:i,position:s,type:2}},kbt=function(t){return t.type===1},Dbt=function(t){return t.type===2},lQ={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=Rme[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Ubt(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Rme[t.name])}var Rme={"linear-gradient":Fbt,"-moz-linear-gradient":mP,"-ms-linear-gradient":mP,"-o-linear-gradient":mP,"-webkit-linear-gradient":mP,"radial-gradient":Nbt,"-moz-radial-gradient":vP,"-ms-radial-gradient":vP,"-o-radial-gradient":vP,"-webkit-radial-gradient":vP,"-webkit-gradient":Obt},zbt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return pE(r)&&Ubt(r)}).map(function(r){return lQ.parse(t,r)})}},$bt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Ma(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Vbt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ym(e).map(function(n){return n.filter(Fc)}).map(mme)}},Hbt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ym(e).map(function(n){return n.filter(Ma).map(function(r){return r.value}).join(" ")}).map(Gbt)}},Gbt=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},SC;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(SC||(SC={}));var Qbt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ym(e).map(function(n){return n.filter(jbt)})}},jbt=function(t){return Ma(t)||Fc(t)},TN=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Kbt=TN("top"),Wbt=TN("right"),qbt=TN("bottom"),Ybt=TN("left"),IN=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return mme(n.filter(Fc))}}},Xbt=IN("top-left"),Zbt=IN("top-right"),Jbt=IN("bottom-right"),ewt=IN("bottom-left"),BN=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},twt=BN("top"),nwt=BN("right"),rwt=BN("bottom"),iwt=BN("left"),MN=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return IM(n)?n.number:0}}},swt=MN("top"),owt=MN("right"),awt=MN("bottom"),lwt=MN("left"),cwt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uwt={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},hwt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ma).reduce(function(n,r){return n|dwt(r.value)},0)}},dwt=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},fwt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},pwt={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},b5;(function(t){t.NORMAL="normal",t.STRICT="strict"})(b5||(b5={}));var Awt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return b5.STRICT;case"normal":default:return b5.NORMAL}}},gwt={name:"line-height",initialValue:"normal",prefix:!1,type:4},zne=function(t,e){return Ma(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Fc(t)?qa(t,e):e},mwt={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:lQ.parse(t,e)}},vwt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Sz={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},LN=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},ywt=LN("top"),_wt=LN("right"),bwt=LN("bottom"),wwt=LN("left"),xwt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ma).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Cwt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},RN=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ewt=RN("top"),Swt=RN("right"),Twt=RN("bottom"),Iwt=RN("left"),Bwt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Mwt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Lwt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Ez(e[0],"none")?[]:ym(e).map(function(n){for(var r={color:zv.TRANSPARENT,offsetX:$u,offsetY:$u,blur:$u},i=0,s=0;s<n.length;s++){var a=n[s];g_(a)?(i===0?r.offsetX=a:i===1?r.offsetY=a:r.blur=a,i++):r.color=Ky.parse(t,a)}return r})}},Rwt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Pwt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=Nwt[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},Fwt=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},Owt=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),n=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],l=e[13];return e[14],e[15],e.length===16?[n,r,i,s,a,l]:null},Nwt={matrix:Fwt,matrix3d:Owt},$ne={type:16,number:50,flags:TM},kwt=[$ne,$ne],Dwt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Fc);return n.length!==2?kwt:[n[0],n[1]]}},Uwt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},gI;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(gI||(gI={}));var zwt={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return gI.BREAK_ALL;case"keep-all":return gI.KEEP_ALL;case"normal":default:return gI.NORMAL}}},$wt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(QE(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Pme={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Vwt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return QE(e)?e.number:1}},Hwt={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gwt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ma).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Qwt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:n.push(i.value);break;case 17:n.push(i.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},jwt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Kwt={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(QE(e))return e.number;if(Ma(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Wwt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ma).map(function(n){return n.value})}},qwt={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Xc=function(t,e){return(t&e)!==0},Ywt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},Xwt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],i=e.filter(gme),s=0;s<i.length;s++){var a=i[s],l=i[s+1];if(a.type===20){var o=l&&QE(l)?l.number:1;r.push({counter:a.value,increment:o})}}return r}},Zwt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(gme),i=0;i<r.length;i++){var s=r[i],a=r[i+1];if(Ma(s)&&s.value!=="none"){var l=a&&QE(a)?a.number:0;n.push({counter:s.value,reset:l})}}return n}},Jwt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(IM).map(function(n){return Pme.parse(t,n)})}},ext={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],i=e.filter(Sbt);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var a=i[s].value,l=i[s+1].value;r.push({open:a,close:l})}return r}},Vne=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},txt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Ez(e[0],"none")?[]:ym(e).map(function(n){for(var r={color:255,offsetX:$u,offsetY:$u,blur:$u,spread:$u,inset:!1},i=0,s=0;s<n.length;s++){var a=n[s];Ez(a,"inset")?r.inset=!0:g_(a)?(i===0?r.offsetX=a:i===1?r.offsetY=a:i===2?r.blur=a:r.spread=a,i++):r.color=Ky.parse(t,a)}return r})}},nxt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Ma).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},rxt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},ixt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return IM(e)?e.number:0}},sxt=function(){function t(e,n){var r,i;this.animationDuration=fi(e,Jwt,n.animationDuration),this.backgroundClip=fi(e,Bbt,n.backgroundClip),this.backgroundColor=fi(e,Mbt,n.backgroundColor),this.backgroundImage=fi(e,zbt,n.backgroundImage),this.backgroundOrigin=fi(e,$bt,n.backgroundOrigin),this.backgroundPosition=fi(e,Vbt,n.backgroundPosition),this.backgroundRepeat=fi(e,Hbt,n.backgroundRepeat),this.backgroundSize=fi(e,Qbt,n.backgroundSize),this.borderTopColor=fi(e,Kbt,n.borderTopColor),this.borderRightColor=fi(e,Wbt,n.borderRightColor),this.borderBottomColor=fi(e,qbt,n.borderBottomColor),this.borderLeftColor=fi(e,Ybt,n.borderLeftColor),this.borderTopLeftRadius=fi(e,Xbt,n.borderTopLeftRadius),this.borderTopRightRadius=fi(e,Zbt,n.borderTopRightRadius),this.borderBottomRightRadius=fi(e,Jbt,n.borderBottomRightRadius),this.borderBottomLeftRadius=fi(e,ewt,n.borderBottomLeftRadius),this.borderTopStyle=fi(e,twt,n.borderTopStyle),this.borderRightStyle=fi(e,nwt,n.borderRightStyle),this.borderBottomStyle=fi(e,rwt,n.borderBottomStyle),this.borderLeftStyle=fi(e,iwt,n.borderLeftStyle),this.borderTopWidth=fi(e,swt,n.borderTopWidth),this.borderRightWidth=fi(e,owt,n.borderRightWidth),this.borderBottomWidth=fi(e,awt,n.borderBottomWidth),this.borderLeftWidth=fi(e,lwt,n.borderLeftWidth),this.boxShadow=fi(e,txt,n.boxShadow),this.color=fi(e,cwt,n.color),this.direction=fi(e,uwt,n.direction),this.display=fi(e,hwt,n.display),this.float=fi(e,fwt,n.cssFloat),this.fontFamily=fi(e,Qwt,n.fontFamily),this.fontSize=fi(e,jwt,n.fontSize),this.fontStyle=fi(e,qwt,n.fontStyle),this.fontVariant=fi(e,Wwt,n.fontVariant),this.fontWeight=fi(e,Kwt,n.fontWeight),this.letterSpacing=fi(e,pwt,n.letterSpacing),this.lineBreak=fi(e,Awt,n.lineBreak),this.lineHeight=fi(e,gwt,n.lineHeight),this.listStyleImage=fi(e,mwt,n.listStyleImage),this.listStylePosition=fi(e,vwt,n.listStylePosition),this.listStyleType=fi(e,Sz,n.listStyleType),this.marginTop=fi(e,ywt,n.marginTop),this.marginRight=fi(e,_wt,n.marginRight),this.marginBottom=fi(e,bwt,n.marginBottom),this.marginLeft=fi(e,wwt,n.marginLeft),this.opacity=fi(e,Vwt,n.opacity);var s=fi(e,xwt,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=fi(e,Cwt,n.overflowWrap),this.paddingTop=fi(e,Ewt,n.paddingTop),this.paddingRight=fi(e,Swt,n.paddingRight),this.paddingBottom=fi(e,Twt,n.paddingBottom),this.paddingLeft=fi(e,Iwt,n.paddingLeft),this.paintOrder=fi(e,nxt,n.paintOrder),this.position=fi(e,Mwt,n.position),this.textAlign=fi(e,Bwt,n.textAlign),this.textDecorationColor=fi(e,Hwt,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=fi(e,Gwt,(i=n.textDecorationLine)!==null&&i!==void 0?i:n.textDecoration),this.textShadow=fi(e,Lwt,n.textShadow),this.textTransform=fi(e,Rwt,n.textTransform),this.transform=fi(e,Pwt,n.transform),this.transformOrigin=fi(e,Dwt,n.transformOrigin),this.visibility=fi(e,Uwt,n.visibility),this.webkitTextStrokeColor=fi(e,rxt,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=fi(e,ixt,n.webkitTextStrokeWidth),this.wordBreak=fi(e,zwt,n.wordBreak),this.zIndex=fi(e,$wt,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Wy(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Xc(this.display,4)||Xc(this.display,33554432)||Xc(this.display,268435456)||Xc(this.display,536870912)||Xc(this.display,67108864)||Xc(this.display,134217728)},t}(),oxt=function(){function t(e,n){this.content=fi(e,Ywt,n.content),this.quotes=fi(e,ext,n.quotes)}return t}(),Hne=function(){function t(e,n){this.counterIncrement=fi(e,Xwt,n.counterIncrement),this.counterReset=fi(e,Zwt,n.counterReset)}return t}(),fi=function(t,e,n){var r=new pme,i=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(i);var s=new Ame(r.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(t,Ma(a)?a.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return EN.parse(t,s.parseComponentValue());case"color":return Ky.parse(t,s.parseComponentValue());case"image":return lQ.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return g_(l)?l:$u;case"length-percentage":var o=s.parseComponentValue();return Fc(o)?o:$u;case"time":return Pme.parse(t,s.parseComponentValue())}break}},axt="data-html2canvas-debug",lxt=function(t){var e=t.getAttribute(axt);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Tz=function(t,e){var n=lxt(t);return n===1||e===n},_m=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Tz(n,3))debugger;this.styles=new sxt(e,window.getComputedStyle(n,null)),Mz(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=xN(this.context,n),Tz(n,4)&&(this.flags|=16)}return t}(),cxt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Gne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",IT=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yP=0;yP<Gne.length;yP++)IT[Gne.charCodeAt(yP)]=yP;var uxt=function(t){var e=t.length*.75,n=t.length,r,i=0,s,a,l,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),p=Array.isArray(d)?d:new Uint8Array(d);for(r=0;r<n;r+=4)s=IT[t.charCodeAt(r)],a=IT[t.charCodeAt(r+1)],l=IT[t.charCodeAt(r+2)],o=IT[t.charCodeAt(r+3)],p[i++]=s<<2|a>>4,p[i++]=(a&15)<<4|l>>2,p[i++]=(l&3)<<6|o&63;return d},hxt=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},dxt=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Ab=5,cQ=11,y6=2,fxt=cQ-Ab,Fme=65536>>Ab,pxt=1<<Ab,_6=pxt-1,Axt=1024>>Ab,gxt=Fme+Axt,mxt=gxt,vxt=32,yxt=mxt+vxt,_xt=65536>>cQ,bxt=1<<fxt,wxt=bxt-1,Qne=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},xxt=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},Cxt=function(t,e){var n=uxt(t),r=Array.isArray(n)?dxt(n):new Uint32Array(n),i=Array.isArray(n)?hxt(n):new Uint16Array(n),s=24,a=Qne(i,s/2,r[4]/2),l=r[5]===2?Qne(i,(s+r[4])/2):xxt(r,Math.ceil((s+r[4])/4));return new Ext(r[0],r[1],r[2],r[3],a,l)},Ext=function(){function t(e,n,r,i,s,a){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=a}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Ab],n=(n<<y6)+(e&_6),this.data[n];if(e<=65535)return n=this.index[Fme+(e-55296>>Ab)],n=(n<<y6)+(e&_6),this.data[n];if(e<this.highStart)return n=yxt-_xt+(e>>cQ),n=this.index[n],n+=e>>Ab&wxt,n=this.index[n],n=(n<<y6)+(e&_6),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),jne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sxt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _P=0;_P<jne.length;_P++)Sxt[jne.charCodeAt(_P)]=_P;var Txt=1,b6=2,w6=3,Kne=4,Wne=5,Ixt=7,qne=8,x6=9,C6=10,Yne=11,Xne=12,Zne=13,Jne=14,E6=15,Bxt=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e},Mxt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,s="";++i<n;){var a=t[i];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(i+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Lxt=Cxt(cxt),ap="",S6="",Rxt=function(t){return Lxt.get(t)},Pxt=function(t,e,n){var r=n-2,i=e[r],s=e[n-1],a=e[n];if(s===b6&&a===w6)return ap;if(s===b6||s===w6||s===Kne||a===b6||a===w6||a===Kne)return S6;if(s===qne&&[qne,x6,Yne,Xne].indexOf(a)!==-1||(s===Yne||s===x6)&&(a===x6||a===C6)||(s===Xne||s===C6)&&a===C6||a===Zne||a===Wne||a===Ixt||s===Txt)return ap;if(s===Zne&&a===Jne){for(;i===Wne;)i=e[--r];if(i===Jne)return ap}if(s===E6&&a===E6){for(var l=0;i===E6;)l++,i=e[--r];if(l%2===0)return ap}return S6},Fxt=function(t){var e=Bxt(t),n=e.length,r=0,i=0,s=e.map(Rxt);return{next:function(){if(r>=n)return{done:!0,value:null};for(var a=ap;r<n&&(a=Pxt(e,s,++r))===ap;);if(a!==ap||r===n){var l=Mxt.apply(null,e.slice(i,r));return i=r,{value:l,done:!1}}return{done:!0,value:null}}}},Oxt=function(t){for(var e=Fxt(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},Nxt=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),s=Math.round(i.height);if(t.body.removeChild(r),s===e)return!0}}return!1},kxt=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=CN(r.data).map(function(o){return ic(o)}),s=0,a={},l=i.every(function(o,d){n.setStart(r,s),n.setEnd(r,s+o.length);var p=n.getBoundingClientRect();s+=o.length;var A=p.x>a.x||p.y>a.y;return a=p,d===0?!0:A});return t.body.removeChild(e),l},Dxt=function(){return typeof new Image().crossOrigin<"u"},Uxt=function(){return typeof new XMLHttpRequest().responseType=="string"},zxt=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},ere=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},$xt=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,s=e.toDataURL();i.src=s;var a=Iz(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),tre(a).then(function(l){r.drawImage(l,0,0);var o=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var d=t.createElement("div");return d.style.backgroundImage="url("+s+")",d.style.height=n+"px",ere(o)?tre(Iz(n,n,0,0,d)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),ere(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},Iz=function(t,e,n,r,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(l),l.appendChild(i),a},tre=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ou={get SUPPORT_RANGE_BOUNDS(){var t=Nxt(document);return Object.defineProperty(Ou,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ou.SUPPORT_RANGE_BOUNDS&&kxt(document);return Object.defineProperty(Ou,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=zxt(document);return Object.defineProperty(Ou,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?$xt(document):Promise.resolve(!1);return Object.defineProperty(Ou,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Dxt();return Object.defineProperty(Ou,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Uxt();return Object.defineProperty(Ou,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ou,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ou,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},mI=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),Vxt=function(t,e,n,r){var i=Qxt(e,n),s=[],a=0;return i.forEach(function(l){if(n.textDecorationLine.length||l.trim().length>0)if(Ou.SUPPORT_RANGE_BOUNDS){var o=nre(r,a,l.length).getClientRects();if(o.length>1){var d=uQ(l),p=0;d.forEach(function(v){s.push(new mI(v,n0.fromDOMRectList(t,nre(r,p+a,v.length).getClientRects()))),p+=v.length})}else s.push(new mI(l,n0.fromDOMRectList(t,o)))}else{var A=r.splitText(l.length);s.push(new mI(l,Hxt(t,r))),r=A}else Ou.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));a+=l.length}),s},Hxt=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=xN(t,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return n0.EMPTY},nre=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),i},uQ=function(t){if(Ou.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return Oxt(t)},Gxt=function(t,e){if(Ou.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return Kxt(t,e)},Qxt=function(t,e){return e.letterSpacing!==0?uQ(t):Gxt(t,e)},jxt=[32,160,4961,65792,65793,4153,4241],Kxt=function(t,e){for(var n=_1t(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var a=i.value.slice(),l=CN(a),o="";l.forEach(function(d){jxt.indexOf(d)===-1?o+=ic(d):(o.length&&r.push(o),r.push(ic(d)),o="")}),o.length&&r.push(o)}};!(i=n.next()).done;)s();return r},Wxt=function(){function t(e,n,r){this.text=qxt(n.data,r.textTransform),this.textBounds=Vxt(e,this.text,r,n)}return t}(),qxt=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Yxt,Xxt);case 2:return t.toUpperCase();default:return t}},Yxt=/(^|\s|:|-|\(|\))([a-z])/g,Xxt=function(t,e,n){return t.length>0?e+n.toUpperCase():t},Ome=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(_m),Nme=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(_m),kme=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this,s=new XMLSerializer,a=xN(n,r);return r.setAttribute("width",a.width+"px"),r.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(_m),Dme=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.value=r.value,i}return e}(_m),Bz=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(_m),Zxt=[{type:15,flags:0,unit:"px",number:3}],Jxt=[{type:16,flags:0,number:50}],eCt=function(t){return t.width>t.height?new n0(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new n0(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},tCt=function(t){var e=t.type===nCt?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},w5="checkbox",x5="radio",nCt="password",rre=707406591,hQ=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=tCt(r),(i.type===w5||i.type===x5)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=eCt(i.bounds)),i.type){case w5:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Zxt;break;case x5:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Jxt;break}return i}return e}(_m),Ume=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(_m),zme=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.value=r.value,i}return e}(_m),$me=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=Hme(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?AI(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):zv.TRANSPARENT,a=r.contentWindow.document.body?AI(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):zv.TRANSPARENT;i.backgroundColor=Wy(s)?Wy(a)?i.styles.backgroundColor:a:s}}catch{}return i}return e}(_m),rCt=["OL","UL","MENU"],NF=function(t,e,n,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,Gme(i)&&i.data.trim().length>0)n.textNodes.push(new Wxt(t,i,n.styles));else if(Jx(i))if(Wme(i)&&i.assignedNodes)i.assignedNodes().forEach(function(l){return NF(t,l,n,r)});else{var a=Vme(t,i);a.styles.isVisible()&&(iCt(i,a,r)?a.flags|=4:sCt(a.styles)&&(a.flags|=2),rCt.indexOf(i.tagName)!==-1&&(a.flags|=8),n.elements.push(a),i.slot,i.shadowRoot?NF(t,i.shadowRoot,a,r):!C5(i)&&!Qme(i)&&!E5(i)&&NF(t,i,a,r))}},Vme=function(t,e){return Lz(e)?new Ome(t,e):jme(e)?new Nme(t,e):Qme(e)?new kme(t,e):oCt(e)?new Dme(t,e):aCt(e)?new Bz(t,e):lCt(e)?new hQ(t,e):E5(e)?new Ume(t,e):C5(e)?new zme(t,e):Kme(e)?new $me(t,e):new _m(t,e)},Hme=function(t,e){var n=Vme(t,e);return n.flags|=4,NF(t,e,n,n),n},iCt=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||dQ(t)&&n.styles.isTransparent()},sCt=function(t){return t.isPositioned()||t.isFloating()},Gme=function(t){return t.nodeType===Node.TEXT_NODE},Jx=function(t){return t.nodeType===Node.ELEMENT_NODE},Mz=function(t){return Jx(t)&&typeof t.style<"u"&&!kF(t)},kF=function(t){return typeof t.className=="object"},oCt=function(t){return t.tagName==="LI"},aCt=function(t){return t.tagName==="OL"},lCt=function(t){return t.tagName==="INPUT"},cCt=function(t){return t.tagName==="HTML"},Qme=function(t){return t.tagName==="svg"},dQ=function(t){return t.tagName==="BODY"},jme=function(t){return t.tagName==="CANVAS"},ire=function(t){return t.tagName==="VIDEO"},Lz=function(t){return t.tagName==="IMG"},Kme=function(t){return t.tagName==="IFRAME"},sre=function(t){return t.tagName==="STYLE"},uCt=function(t){return t.tagName==="SCRIPT"},C5=function(t){return t.tagName==="TEXTAREA"},E5=function(t){return t.tagName==="SELECT"},Wme=function(t){return t.tagName==="SLOT"},ore=function(t){return t.tagName.indexOf("-")>0},hCt=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,i=e.counterReset,s=!0;r!==null&&r.forEach(function(l){var o=n.counters[l.counter];o&&l.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=l.increment)});var a=[];return s&&i.forEach(function(l){var o=n.counters[l.counter];a.push(l.counter),o||(o=n.counters[l.counter]=[]),o.push(l.reset)}),a},t}(),are={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},lre={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dCt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},fCt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},px=function(t,e,n,r,i,s){return t<e||t>n?BB(t,i,s.length>0):r.integers.reduce(function(a,l,o){for(;t>=l;)t-=l,a+=r.values[o];return a},"")+s},qme=function(t,e,n,r){var i="";do n||t--,i=r(t)+i,t/=e;while(t*e>=e);return i},nc=function(t,e,n,r,i){var s=n-e+1;return(t<0?"-":"")+(qme(Math.abs(t),s,r,function(a){return ic(Math.floor(a%s)+e)})+i)},b1=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return qme(Math.abs(t),r,!1,function(i){return e[Math.floor(i%r)]})+n},Fx=1,Ay=2,gy=4,BT=8,mv=function(t,e,n,r,i,s){if(t<-9999||t>9999)return BB(t,4,i.length>0);var a=Math.abs(t),l=i;if(a===0)return e[0]+l;for(var o=0;a>0&&o<=4;o++){var d=a%10;d===0&&Xc(s,Fx)&&l!==""?l=e[d]+l:d>1||d===1&&o===0||d===1&&o===1&&Xc(s,Ay)||d===1&&o===1&&Xc(s,gy)&&t>100||d===1&&o>1&&Xc(s,BT)?l=e[d]+(o>0?n[o-1]:"")+l:d===1&&o>0&&(l=n[o-1]+l),a=Math.floor(a/10)}return(t<0?r:"")+l},cre="",ure="",hre="",T6="",BB=function(t,e,n){var r=n?". ":"",i=n?"":"",s=n?", ":"",a=n?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var l=nc(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return b1(t,"",i);case 6:return px(t,1,3999,are,3,r).toLowerCase();case 7:return px(t,1,3999,are,3,r);case 8:return nc(t,945,969,!1,r);case 9:return nc(t,97,122,!1,r);case 10:return nc(t,65,90,!1,r);case 11:return nc(t,1632,1641,!0,r);case 12:case 49:return px(t,1,9999,lre,3,r);case 35:return px(t,1,9999,lre,3,r).toLowerCase();case 13:return nc(t,2534,2543,!0,r);case 14:case 30:return nc(t,6112,6121,!0,r);case 15:return b1(t,"",i);case 16:return b1(t,"",i);case 17:case 48:return mv(t,"",cre,"",i,Ay|gy|BT);case 47:return mv(t,"",ure,"",i,Fx|Ay|gy|BT);case 42:return mv(t,"",cre,"",i,Ay|gy|BT);case 41:return mv(t,"",ure,"",i,Fx|Ay|gy|BT);case 26:return mv(t,"","",hre,i,0);case 25:return mv(t,"","",hre,i,Fx|Ay|gy);case 31:return mv(t,"","",T6,s,Fx|Ay|gy);case 33:return mv(t,"","",T6,s,0);case 32:return mv(t,"","",T6,s,Fx|Ay|gy);case 18:return nc(t,2406,2415,!0,r);case 20:return px(t,1,19999,fCt,3,r);case 21:return nc(t,2790,2799,!0,r);case 22:return nc(t,2662,2671,!0,r);case 22:return px(t,1,10999,dCt,3,r);case 23:return b1(t,"");case 24:return b1(t,"");case 27:return nc(t,3302,3311,!0,r);case 28:return b1(t,"",i);case 29:return b1(t,"",i);case 34:return nc(t,3792,3801,!0,r);case 37:return nc(t,6160,6169,!0,r);case 38:return nc(t,4160,4169,!0,r);case 39:return nc(t,2918,2927,!0,r);case 40:return nc(t,1776,1785,!0,r);case 43:return nc(t,3046,3055,!0,r);case 44:return nc(t,3174,3183,!0,r);case 45:return nc(t,3664,3673,!0,r);case 46:return nc(t,3872,3881,!0,r);case 3:default:return nc(t,48,57,!0,r)}},Yme="data-html2canvas-ignore",dre=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new hCt,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,i=pCt(e,n);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,l=i.contentWindow,o=l.document,d=mCt(i).then(function(){return Fh(r,void 0,void 0,function(){var p,A;return hh(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(bCt),l&&(l.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==n.top||l.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-n.left,l.scrollY-n.top,0,0))),p=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,gCt(o)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof p=="function"?[2,Promise.resolve().then(function(){return p(o,A)}).then(function(){return i})]:[2,i]}})})});return o.open(),o.write(yCt(document.doctype)+"<html></html>"),_Ct(this.referenceElement.ownerDocument,s,a),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),d},t.prototype.createElementClone=function(e){if(Tz(e,2))debugger;if(jme(e))return this.createCanvasClone(e);if(ire(e))return this.createVideoClone(e);if(sre(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return Lz(n)&&(Lz(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),ore(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return I6(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),i=e.cloneNode(!1);return i.textContent=r,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),a=i.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(l){var o=l.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},t.prototype.appendChildNode=function(e,n,r){(!Jx(n)||!uCt(n)&&!n.hasAttribute(Yme)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Jx(n)||!sre(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Jx(s)&&Wme(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(l){return i.appendChildNode(n,l,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(Gme(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Jx(e)&&(Mz(e)||kF(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=r.getComputedStyle(e),a=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&Mz(i)&&(this.clonedReferenceElement=i),dQ(i)&&CCt(i);var o=this.counters.parse(new Hne(this.context,s)),d=this.resolvePseudoContent(e,i,a,vI.BEFORE);ore(e)&&(n=!0),ire(e)||this.cloneChildNodes(e,i,n),d&&i.insertBefore(d,i.firstChild);var p=this.resolvePseudoContent(e,i,l,vI.AFTER);return p&&i.appendChild(p),this.counters.pop(o),(s&&(this.options.copyStyles||kF(e))&&!Kme(e)||n)&&I6(s,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(C5(e)||E5(e))&&(C5(i)||E5(i))&&(i.value=e.value),i}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,i){var s=this;if(r){var a=r.content,l=n.ownerDocument;if(!(!l||!a||a==="none"||a==="-moz-alt-content"||r.display==="none")){this.counters.parse(new Hne(this.context,r));var o=new oxt(this.context,r),d=l.createElement("html2canvaspseudoelement");I6(r,d),o.content.forEach(function(A){if(A.type===0)d.appendChild(l.createTextNode(A.value));else if(A.type===22){var v=l.createElement("img");v.src=A.value,v.style.opacity="1",d.appendChild(v)}else if(A.type===18){if(A.name==="attr"){var y=A.values.filter(Ma);y.length&&d.appendChild(l.createTextNode(e.getAttribute(y[0].value)||""))}else if(A.name==="counter"){var C=A.values.filter(pE),x=C[0],M=C[1];if(x&&Ma(x)){var I=s.counters.getCounterValue(x.value),P=M&&Ma(M)?Sz.parse(s.context,M.value):3;d.appendChild(l.createTextNode(BB(I,P,!1)))}}else if(A.name==="counters"){var F=A.values.filter(pE),x=F[0],D=F[1],M=F[2];if(x&&Ma(x)){var V=s.counters.getCounterValues(x.value),H=M&&Ma(M)?Sz.parse(s.context,M.value):3,Q=D&&D.type===0?D.value:"",G=V.map(function(q){return BB(q,H,!1)}).join(Q);d.appendChild(l.createTextNode(G))}}}else if(A.type===20)switch(A.value){case"open-quote":d.appendChild(l.createTextNode(Vne(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":d.appendChild(l.createTextNode(Vne(o.quotes,--s.quoteDepth,!1)));break;default:d.appendChild(l.createTextNode(A.value))}}),d.className=Rz+" "+Pz;var p=i===vI.BEFORE?" "+Rz:" "+Pz;return kF(n)?n.className.baseValue+=p:n.className+=p,d}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),vI;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(vI||(vI={}));var pCt=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(Yme,"true"),t.body.appendChild(n),n},ACt=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},gCt=function(t){return Promise.all([].slice.call(t.images,0).map(ACt))},mCt=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},vCt=["all","d","content"],I6=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);vCt.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},yCt=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},_Ct=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},bCt=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},wCt=":before",xCt=":after",Rz="___html2canvas___pseudoelement_before",Pz="___html2canvas___pseudoelement_after",fre=`{
    content: "" !important;
    display: none !important;
}`,CCt=function(t){ECt(t,"."+Rz+wCt+fre+`
         .`+Pz+xCt+fre)},ECt=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},Xme=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),SCt=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(M6(e)||MCt(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Fh(this,void 0,void 0,function(){var n,r,i,s,a=this;return hh(this,function(l){switch(l.label){case 0:return n=Xme.isSameOrigin(e),r=!B6(e)&&this._options.useCORS===!0&&Ou.SUPPORT_CORS_IMAGES&&!n,i=!B6(e)&&!n&&!M6(e)&&typeof this._options.proxy=="string"&&Ou.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!B6(e)&&!M6(e)&&!i&&!r?[2]:(s=e,i?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,d){var p=new Image;p.onload=function(){return o(p)},p.onerror=d,(LCt(s)||r)&&(p.crossOrigin="anonymous"),p.src=s,p.complete===!0&&setTimeout(function(){return o(p)},500),a._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(s,a){var l=Ou.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(l==="text")s(o.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(v){return a(v)},!1),A.readAsDataURL(o.response)}else a("Failed to proxy resource "+i+" with status code "+o.status)},o.onerror=a;var d=r.indexOf("?")>-1?"&":"?";if(o.open("GET",""+r+d+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=l),n._options.imageTimeout){var p=n._options.imageTimeout;o.timeout=p,o.ontimeout=function(){return a("Timed out ("+p+"ms) proxying "+i)}}o.send()})},t}(),TCt=/^data:image\/svg\+xml/i,ICt=/^data:image\/.*;base64,/i,BCt=/^data:image\/.*/i,MCt=function(t){return Ou.SUPPORT_SVG_DRAWING||!RCt(t)},B6=function(t){return BCt.test(t)},LCt=function(t){return ICt.test(t)},M6=function(t){return t.substr(0,4)==="blob"},RCt=function(t){return t.substr(-3).toLowerCase()==="svg"||TCt.test(t)},li=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Ax=function(t,e,n){return new li(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},bP=function(){function t(e,n,r,i){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=i}return t.prototype.subdivide=function(e,n){var r=Ax(this.start,this.startControl,e),i=Ax(this.startControl,this.endControl,e),s=Ax(this.endControl,this.end,e),a=Ax(r,i,e),l=Ax(i,s,e),o=Ax(a,l,e);return n?new t(this.start,r,a,o):new t(o,l,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),cp=function(t){return t.type===1},PCt=function(){function t(e){var n=e.styles,r=e.bounds,i=TT(n.borderTopLeftRadius,r.width,r.height),s=i[0],a=i[1],l=TT(n.borderTopRightRadius,r.width,r.height),o=l[0],d=l[1],p=TT(n.borderBottomRightRadius,r.width,r.height),A=p[0],v=p[1],y=TT(n.borderBottomLeftRadius,r.width,r.height),C=y[0],x=y[1],M=[];M.push((s+o)/r.width),M.push((C+A)/r.width),M.push((a+x)/r.height),M.push((d+v)/r.height);var I=Math.max.apply(Math,M);I>1&&(s/=I,a/=I,o/=I,d/=I,A/=I,v/=I,C/=I,x/=I);var P=r.width-o,F=r.height-v,D=r.width-A,V=r.height-x,H=n.borderTopWidth,Q=n.borderRightWidth,G=n.borderBottomWidth,W=n.borderLeftWidth,te=qa(n.paddingTop,e.bounds.width),q=qa(n.paddingRight,e.bounds.width),Y=qa(n.paddingBottom,e.bounds.width),ee=qa(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?gl(r.left+W/3,r.top+H/3,s-W/3,a-H/3,aa.TOP_LEFT):new li(r.left+W/3,r.top+H/3),this.topRightBorderDoubleOuterBox=s>0||a>0?gl(r.left+P,r.top+H/3,o-Q/3,d-H/3,aa.TOP_RIGHT):new li(r.left+r.width-Q/3,r.top+H/3),this.bottomRightBorderDoubleOuterBox=A>0||v>0?gl(r.left+D,r.top+F,A-Q/3,v-G/3,aa.BOTTOM_RIGHT):new li(r.left+r.width-Q/3,r.top+r.height-G/3),this.bottomLeftBorderDoubleOuterBox=C>0||x>0?gl(r.left+W/3,r.top+V,C-W/3,x-G/3,aa.BOTTOM_LEFT):new li(r.left+W/3,r.top+r.height-G/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?gl(r.left+W*2/3,r.top+H*2/3,s-W*2/3,a-H*2/3,aa.TOP_LEFT):new li(r.left+W*2/3,r.top+H*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?gl(r.left+P,r.top+H*2/3,o-Q*2/3,d-H*2/3,aa.TOP_RIGHT):new li(r.left+r.width-Q*2/3,r.top+H*2/3),this.bottomRightBorderDoubleInnerBox=A>0||v>0?gl(r.left+D,r.top+F,A-Q*2/3,v-G*2/3,aa.BOTTOM_RIGHT):new li(r.left+r.width-Q*2/3,r.top+r.height-G*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||x>0?gl(r.left+W*2/3,r.top+V,C-W*2/3,x-G*2/3,aa.BOTTOM_LEFT):new li(r.left+W*2/3,r.top+r.height-G*2/3),this.topLeftBorderStroke=s>0||a>0?gl(r.left+W/2,r.top+H/2,s-W/2,a-H/2,aa.TOP_LEFT):new li(r.left+W/2,r.top+H/2),this.topRightBorderStroke=s>0||a>0?gl(r.left+P,r.top+H/2,o-Q/2,d-H/2,aa.TOP_RIGHT):new li(r.left+r.width-Q/2,r.top+H/2),this.bottomRightBorderStroke=A>0||v>0?gl(r.left+D,r.top+F,A-Q/2,v-G/2,aa.BOTTOM_RIGHT):new li(r.left+r.width-Q/2,r.top+r.height-G/2),this.bottomLeftBorderStroke=C>0||x>0?gl(r.left+W/2,r.top+V,C-W/2,x-G/2,aa.BOTTOM_LEFT):new li(r.left+W/2,r.top+r.height-G/2),this.topLeftBorderBox=s>0||a>0?gl(r.left,r.top,s,a,aa.TOP_LEFT):new li(r.left,r.top),this.topRightBorderBox=o>0||d>0?gl(r.left+P,r.top,o,d,aa.TOP_RIGHT):new li(r.left+r.width,r.top),this.bottomRightBorderBox=A>0||v>0?gl(r.left+D,r.top+F,A,v,aa.BOTTOM_RIGHT):new li(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=C>0||x>0?gl(r.left,r.top+V,C,x,aa.BOTTOM_LEFT):new li(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||a>0?gl(r.left+W,r.top+H,Math.max(0,s-W),Math.max(0,a-H),aa.TOP_LEFT):new li(r.left+W,r.top+H),this.topRightPaddingBox=o>0||d>0?gl(r.left+Math.min(P,r.width-Q),r.top+H,P>r.width+Q?0:Math.max(0,o-Q),Math.max(0,d-H),aa.TOP_RIGHT):new li(r.left+r.width-Q,r.top+H),this.bottomRightPaddingBox=A>0||v>0?gl(r.left+Math.min(D,r.width-W),r.top+Math.min(F,r.height-G),Math.max(0,A-Q),Math.max(0,v-G),aa.BOTTOM_RIGHT):new li(r.left+r.width-Q,r.top+r.height-G),this.bottomLeftPaddingBox=C>0||x>0?gl(r.left+W,r.top+Math.min(V,r.height-G),Math.max(0,C-W),Math.max(0,x-G),aa.BOTTOM_LEFT):new li(r.left+W,r.top+r.height-G),this.topLeftContentBox=s>0||a>0?gl(r.left+W+ee,r.top+H+te,Math.max(0,s-(W+ee)),Math.max(0,a-(H+te)),aa.TOP_LEFT):new li(r.left+W+ee,r.top+H+te),this.topRightContentBox=o>0||d>0?gl(r.left+Math.min(P,r.width+W+ee),r.top+H+te,P>r.width+W+ee?0:o-W+ee,d-(H+te),aa.TOP_RIGHT):new li(r.left+r.width-(Q+q),r.top+H+te),this.bottomRightContentBox=A>0||v>0?gl(r.left+Math.min(D,r.width-(W+ee)),r.top+Math.min(F,r.height+H+te),Math.max(0,A-(Q+q)),v-(G+Y),aa.BOTTOM_RIGHT):new li(r.left+r.width-(Q+q),r.top+r.height-(G+Y)),this.bottomLeftContentBox=C>0||x>0?gl(r.left+W+ee,r.top+V,Math.max(0,C-(W+ee)),x-(G+Y),aa.BOTTOM_LEFT):new li(r.left+W+ee,r.top+r.height-(G+Y))}return t}(),aa;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(aa||(aa={}));var gl=function(t,e,n,r,i){var s=4*((Math.sqrt(2)-1)/3),a=n*s,l=r*s,o=t+n,d=e+r;switch(i){case aa.TOP_LEFT:return new bP(new li(t,d),new li(t,d-l),new li(o-a,e),new li(o,e));case aa.TOP_RIGHT:return new bP(new li(t,e),new li(t+a,e),new li(o,d-l),new li(o,d));case aa.BOTTOM_RIGHT:return new bP(new li(o,e),new li(o,e+l),new li(t+a,d),new li(t,d));case aa.BOTTOM_LEFT:default:return new bP(new li(o,d),new li(o-a,d),new li(t,e+l),new li(t,e))}},S5=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},FCt=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},T5=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},OCt=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),wP=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),NCt=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),kCt=function(t){return t.type===0},Zme=function(t){return t.type===1},DCt=function(t){return t.type===2},pre=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},UCt=function(t,e,n,r,i){return t.map(function(s,a){switch(a){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+i);case 3:return s.add(e,n+i)}return s})},Jme=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),eve=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new PCt(this.container),this.container.styles.opacity<1&&this.effects.push(new NCt(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new OCt(r,i,s))}if(this.container.styles.overflowX!==0){var a=S5(this.curves),l=T5(this.curves);pre(a,l)?this.effects.push(new wP(a,6)):(this.effects.push(new wP(a,2)),this.effects.push(new wP(l,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(o){return!Zme(o)});if(n||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var a=S5(r.curves),l=T5(r.curves);pre(a,l)||i.unshift(new wP(l,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(o){return Xc(o.target,e)})},t}(),Fz=function(t,e,n,r){t.container.elements.forEach(function(i){var s=Xc(i.flags,4),a=Xc(i.flags,2),l=new eve(i,t);Xc(i.styles.display,2048)&&r.push(l);var o=Xc(i.flags,8)?[]:r;if(s||a){var d=s||i.styles.isPositioned()?n:e,p=new Jme(l);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var A=i.styles.zIndex.order;if(A<0){var v=0;d.negativeZIndex.some(function(C,x){return A>C.element.container.styles.zIndex.order?(v=x,!1):v>0}),d.negativeZIndex.splice(v,0,p)}else if(A>0){var y=0;d.positiveZIndex.some(function(C,x){return A>=C.element.container.styles.zIndex.order?(y=x+1,!1):y>0}),d.positiveZIndex.splice(y,0,p)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(p)}else i.styles.isFloating()?d.nonPositionedFloats.push(p):d.nonPositionedInlineLevel.push(p);Fz(l,p,s?p:n,o)}else i.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Fz(l,e,n,o);Xc(i.flags,8)&&tve(i,o)})},tve=function(t,e){for(var n=t instanceof Bz?t.start:1,r=t instanceof Bz?t.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof Dme&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=BB(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},zCt=function(t){var e=new eve(t,null),n=new Jme(e),r=[];return Fz(e,n,n,r),tve(e.container,r),n},Are=function(t,e){switch(e){case 0:return yp(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return yp(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return yp(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return yp(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$Ct=function(t,e){switch(e){case 0:return yp(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return yp(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return yp(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return yp(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},VCt=function(t,e){switch(e){case 0:return yp(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return yp(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return yp(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return yp(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},HCt=function(t,e){switch(e){case 0:return xP(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return xP(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return xP(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return xP(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},xP=function(t,e){var n=[];return cp(t)?n.push(t.subdivide(.5,!1)):n.push(t),cp(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},yp=function(t,e,n,r){var i=[];return cp(t)?i.push(t.subdivide(.5,!1)):i.push(t),cp(n)?i.push(n.subdivide(.5,!0)):i.push(n),cp(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),cp(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},nve=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},I5=function(t){var e=t.styles,n=t.bounds,r=qa(e.paddingLeft,n.width),i=qa(e.paddingRight,n.width),s=qa(e.paddingTop,n.width),a=qa(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+a))},GCt=function(t,e){return t===0?e.bounds:t===2?I5(e):nve(e)},QCt=function(t,e){return t===0?e.bounds:t===2?I5(e):nve(e)},L6=function(t,e,n){var r=GCt(Ox(t.styles.backgroundOrigin,e),t),i=QCt(Ox(t.styles.backgroundClip,e),t),s=jCt(Ox(t.styles.backgroundSize,e),n,r),a=s[0],l=s[1],o=TT(Ox(t.styles.backgroundPosition,e),r.width-a,r.height-l),d=KCt(Ox(t.styles.backgroundRepeat,e),o,s,r,i),p=Math.round(r.left+o[0]),A=Math.round(r.top+o[1]);return[d,p,A,a,l]},gx=function(t){return Ma(t)&&t.value===SC.AUTO},CP=function(t){return typeof t=="number"},jCt=function(t,e,n){var r=e[0],i=e[1],s=e[2],a=t[0],l=t[1];if(!a)return[0,0];if(Fc(a)&&l&&Fc(l))return[qa(a,n.width),qa(l,n.height)];var o=CP(s);if(Ma(a)&&(a.value===SC.CONTAIN||a.value===SC.COVER)){if(CP(s)){var d=n.width/n.height;return d<s!=(a.value===SC.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var p=CP(r),A=CP(i),v=p||A;if(gx(a)&&(!l||gx(l))){if(p&&A)return[r,i];if(!o&&!v)return[n.width,n.height];if(v&&o){var y=p?r:i*s,C=A?i:r/s;return[y,C]}var x=p?r:n.width,M=A?i:n.height;return[x,M]}if(o){var I=0,P=0;return Fc(a)?I=qa(a,n.width):Fc(l)&&(P=qa(l,n.height)),gx(a)?I=P*s:(!l||gx(l))&&(P=I/s),[I,P]}var F=null,D=null;if(Fc(a)?F=qa(a,n.width):l&&Fc(l)&&(D=qa(l,n.height)),F!==null&&(!l||gx(l))&&(D=p&&A?F/r*i:n.height),D!==null&&gx(a)&&(F=p&&A?D/i*r:n.width),F!==null&&D!==null)return[F,D];throw new Error("Unable to calculate background-size for element")},Ox=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},KCt=function(t,e,n,r,i){var s=e[0],a=e[1],l=n[0],o=n[1];switch(t){case 2:return[new li(Math.round(r.left),Math.round(r.top+a)),new li(Math.round(r.left+r.width),Math.round(r.top+a)),new li(Math.round(r.left+r.width),Math.round(o+r.top+a)),new li(Math.round(r.left),Math.round(o+r.top+a))];case 3:return[new li(Math.round(r.left+s),Math.round(r.top)),new li(Math.round(r.left+s+l),Math.round(r.top)),new li(Math.round(r.left+s+l),Math.round(r.height+r.top)),new li(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new li(Math.round(r.left+s),Math.round(r.top+a)),new li(Math.round(r.left+s+l),Math.round(r.top+a)),new li(Math.round(r.left+s+l),Math.round(r.top+a+o)),new li(Math.round(r.left+s),Math.round(r.top+a+o))];default:return[new li(Math.round(i.left),Math.round(i.top)),new li(Math.round(i.left+i.width),Math.round(i.top)),new li(Math.round(i.left+i.width),Math.round(i.height+i.top)),new li(Math.round(i.left),Math.round(i.height+i.top))]}},WCt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",gre="Hidden Text",qCt=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",a.appendChild(r),i.src=WCt,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(gre)),r.appendChild(s),r.appendChild(i);var l=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(gre)),r.style.lineHeight="normal",i.style.verticalAlign="super";var o=i.offsetTop-r.offsetTop+2;return a.removeChild(r),{baseline:l,middle:o}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),rve=function(){function t(e,n){this.context=e,this.options=n}return t}(),YCt=1e4,XCt=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new qCt(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(n){this.ctx.save(),DCt(n)&&(this.ctx.globalAlpha=n.opacity),kCt(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),Zme(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Fh(this,void 0,void 0,function(){var r;return hh(this,function(i){switch(i.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Fh(this,void 0,void 0,function(){return hh(this,function(r){switch(r.label){case 0:if(Xc(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,i){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+i);else{var a=uQ(n.text);a.reduce(function(l,o){return s.ctx.fillText(o,l,n.bounds.top+i),l+s.ctx.measureText(o).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=nEt(n.fontFamily).join(", "),s=IM(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(n,r){return Fh(this,void 0,void 0,function(){var i,s,a,l,o,d,p,A,v=this;return hh(this,function(y){return i=this.createFontStyle(r),s=i[0],a=i[1],l=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(a,l),d=o.baseline,p=o.middle,A=r.paintOrder,n.textBounds.forEach(function(C){A.forEach(function(x){switch(x){case 0:v.ctx.fillStyle=gu(r.color),v.renderTextWithLetterSpacing(C,r.letterSpacing,d);var M=r.textShadow;M.length&&C.text.trim().length&&(M.slice(0).reverse().forEach(function(I){v.ctx.shadowColor=gu(I.color),v.ctx.shadowOffsetX=I.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=I.offsetY.number*v.options.scale,v.ctx.shadowBlur=I.blur.number,v.renderTextWithLetterSpacing(C,r.letterSpacing,d)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),r.textDecorationLine.length&&(v.ctx.fillStyle=gu(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(I){switch(I){case 1:v.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+d),C.bounds.width,1);break;case 2:v.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:v.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+p),C.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&C.text.trim().length&&(v.ctx.strokeStyle=gu(r.webkitTextStrokeColor),v.ctx.lineWidth=r.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+d)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,i){if(i&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=I5(n),a=T5(r);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Fh(this,void 0,void 0,function(){var r,i,s,a,l,o,P,P,d,p,A,v,D,y,C,V,x,M,I,P,F,D,V;return hh(this,function(H){switch(H.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,i=n.curves,s=r.styles,a=0,l=r.textNodes,H.label=1;case 1:return a<l.length?(o=l[a],[4,this.renderTextNode(o,s)]):[3,4];case 2:H.sent(),H.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof Ome))return[3,8];H.label=5;case 5:return H.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return P=H.sent(),this.renderReplacedElement(r,i,P),[3,8];case 7:return H.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Nme&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof kme))return[3,12];H.label=9;case 9:return H.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return P=H.sent(),this.renderReplacedElement(r,i,P),[3,12];case 11:return H.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof $me&&r.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,d.render(r.tree)]):[3,14];case 13:p=H.sent(),r.width&&r.height&&this.ctx.drawImage(p,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),H.label=14;case 14:if(r instanceof hQ&&(A=Math.min(r.bounds.width,r.bounds.height),r.type===w5?r.checked&&(this.ctx.save(),this.path([new li(r.bounds.left+A*.39363,r.bounds.top+A*.79),new li(r.bounds.left+A*.16,r.bounds.top+A*.5549),new li(r.bounds.left+A*.27347,r.bounds.top+A*.44071),new li(r.bounds.left+A*.39694,r.bounds.top+A*.5649),new li(r.bounds.left+A*.72983,r.bounds.top+A*.23),new li(r.bounds.left+A*.84,r.bounds.top+A*.34085),new li(r.bounds.left+A*.39363,r.bounds.top+A*.79)]),this.ctx.fillStyle=gu(rre),this.ctx.fill(),this.ctx.restore()):r.type===x5&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+A/2,r.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=gu(rre),this.ctx.fill(),this.ctx.restore())),ZCt(r)&&r.value.length){switch(v=this.createFontStyle(s),D=v[0],y=v[1],C=this.fontMetrics.getMetrics(D,y).baseline,this.ctx.font=D,this.ctx.fillStyle=gu(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=eEt(r.styles.textAlign),V=I5(r),x=0,r.styles.textAlign){case 1:x+=V.width/2;break;case 2:x+=V.width;break}M=V.add(x,0,0,-V.height/2+1),this.ctx.save(),this.path([new li(V.left,V.top),new li(V.left+V.width,V.top),new li(V.left+V.width,V.top+V.height),new li(V.left,V.top+V.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new mI(r.value,M),s.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Xc(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(I=r.styles.listStyleImage,I.type!==0)return[3,18];P=void 0,F=I.url,H.label=15;case 15:return H.trys.push([15,17,,18]),[4,this.context.cache.match(F)];case 16:return P=H.sent(),this.ctx.drawImage(P,r.bounds.left-(P.width+10),r.bounds.top),[3,18];case 17:return H.sent(),this.context.logger.error("Error loading list-style-image "+F),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(D=this.createFontStyle(s)[0],this.ctx.font=D,this.ctx.fillStyle=gu(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",V=new n0(r.bounds.left,r.bounds.top+qa(r.styles.paddingTop,r.bounds.width),r.bounds.width,zne(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new mI(n.listValue,V),s.letterSpacing,zne(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),H.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Fh(this,void 0,void 0,function(){var r,i,I,s,a,I,l,o,I,d,p,I,A,v,I,y,C,I,x,M,I;return hh(this,function(P){switch(P.label){case 0:if(Xc(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:P.sent(),r=0,i=n.negativeZIndex,P.label=2;case 2:return r<i.length?(I=i[r],[4,this.renderStack(I)]):[3,5];case 3:P.sent(),P.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:P.sent(),s=0,a=n.nonInlineLevel,P.label=7;case 7:return s<a.length?(I=a[s],[4,this.renderNode(I)]):[3,10];case 8:P.sent(),P.label=9;case 9:return s++,[3,7];case 10:l=0,o=n.nonPositionedFloats,P.label=11;case 11:return l<o.length?(I=o[l],[4,this.renderStack(I)]):[3,14];case 12:P.sent(),P.label=13;case 13:return l++,[3,11];case 14:d=0,p=n.nonPositionedInlineLevel,P.label=15;case 15:return d<p.length?(I=p[d],[4,this.renderStack(I)]):[3,18];case 16:P.sent(),P.label=17;case 17:return d++,[3,15];case 18:A=0,v=n.inlineLevel,P.label=19;case 19:return A<v.length?(I=v[A],[4,this.renderNode(I)]):[3,22];case 20:P.sent(),P.label=21;case 21:return A++,[3,19];case 22:y=0,C=n.zeroOrAutoZIndexOrTransformedOrOpacity,P.label=23;case 23:return y<C.length?(I=C[y],[4,this.renderStack(I)]):[3,26];case 24:P.sent(),P.label=25;case 25:return y++,[3,23];case 26:x=0,M=n.positiveZIndex,P.label=27;case 27:return x<M.length?(I=M[x],[4,this.renderStack(I)]):[3,30];case 28:P.sent(),P.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(i,s){var a=cp(i)?i.start:i;s===0?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),cp(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(n,r,i,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(n,r,i){var s;if(n.width===r&&n.height===i)return n;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=a.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,i);var o=l.getContext("2d");return o.drawImage(n,0,0,n.width,n.height,0,0,r,i),l},e.prototype.renderBackgroundImage=function(n){return Fh(this,void 0,void 0,function(){var r,i,s,a,l,o;return hh(this,function(d){switch(d.label){case 0:r=n.styles.backgroundImage.length-1,i=function(p){var A,v,y,te,le,ie,ee,ce,G,C,te,le,ie,ee,ce,x,M,I,P,F,D,V,H,Q,G,W,te,q,Y,ee,ce,se,le,ie,pe,ue,me,Le,ae,be,_e,$e;return hh(this,function(Re){switch(Re.label){case 0:if(p.type!==0)return[3,5];A=void 0,v=p.url,Re.label=1;case 1:return Re.trys.push([1,3,,4]),[4,s.context.cache.match(v)];case 2:return A=Re.sent(),[3,4];case 3:return Re.sent(),s.context.logger.error("Error loading background-image "+v),[3,4];case 4:return A&&(y=L6(n,r,[A.width,A.height,A.width/A.height]),te=y[0],le=y[1],ie=y[2],ee=y[3],ce=y[4],G=s.ctx.createPattern(s.resizeImage(A,ee,ce),"repeat"),s.renderRepeat(te,G,le,ie)),[3,6];case 5:kbt(p)?(C=L6(n,r,[null,null,null]),te=C[0],le=C[1],ie=C[2],ee=C[3],ce=C[4],x=Rbt(p.angle,ee,ce),M=x[0],I=x[1],P=x[2],F=x[3],D=x[4],V=document.createElement("canvas"),V.width=ee,V.height=ce,H=V.getContext("2d"),Q=H.createLinearGradient(I,F,P,D),Dne(p.stops,M).forEach(function(Ie){return Q.addColorStop(Ie.stop,gu(Ie.color))}),H.fillStyle=Q,H.fillRect(0,0,ee,ce),ee>0&&ce>0&&(G=s.ctx.createPattern(V,"repeat"),s.renderRepeat(te,G,le,ie))):Dbt(p)&&(W=L6(n,r,[null,null,null]),te=W[0],q=W[1],Y=W[2],ee=W[3],ce=W[4],se=p.position.length===0?[aQ]:p.position,le=qa(se[0],ee),ie=qa(se[se.length-1],ce),pe=Pbt(p,le,ie,ee,ce),ue=pe[0],me=pe[1],ue>0&&me>0&&(Le=s.ctx.createRadialGradient(q+le,Y+ie,0,q+le,Y+ie,ue),Dne(p.stops,ue*2).forEach(function(Ie){return Le.addColorStop(Ie.stop,gu(Ie.color))}),s.path(te),s.ctx.fillStyle=Le,ue!==me?(ae=n.bounds.left+.5*n.bounds.width,be=n.bounds.top+.5*n.bounds.height,_e=me/ue,$e=1/_e,s.ctx.save(),s.ctx.translate(ae,be),s.ctx.transform(1,0,0,_e,0,0),s.ctx.translate(-ae,-be),s.ctx.fillRect(q,$e*(Y-be)+be,ee,ce*$e),s.ctx.restore()):s.ctx.fill())),Re.label=6;case 6:return r--,[2]}})},s=this,a=0,l=n.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return a<l.length?(o=l[a],[5,i(o)]):[3,4];case 2:d.sent(),d.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,i){return Fh(this,void 0,void 0,function(){return hh(this,function(s){return this.path(Are(i,r)),this.ctx.fillStyle=gu(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,i,s){return Fh(this,void 0,void 0,function(){var a,l;return hh(this,function(o){switch(o.label){case 0:return r<3?[4,this.renderSolidBorder(n,i,s)]:[3,2];case 1:return o.sent(),[2];case 2:return a=$Ct(s,i),this.path(a),this.ctx.fillStyle=gu(n),this.ctx.fill(),l=VCt(s,i),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Fh(this,void 0,void 0,function(){var r,i,s,a,l,o,d,p,A=this;return hh(this,function(v){switch(v.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,i=!Wy(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],a=JCt(Ox(r.backgroundClip,0),n.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Wy(r.backgroundColor)||(this.ctx.fillStyle=gu(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(y){A.ctx.save();var C=S5(n.curves),x=y.inset?0:YCt,M=UCt(C,-x+(y.inset?1:-1)*y.spread.number,(y.inset?1:-1)*y.spread.number,y.spread.number*(y.inset?-2:2),y.spread.number*(y.inset?-2:2));y.inset?(A.path(C),A.ctx.clip(),A.mask(M)):(A.mask(C),A.ctx.clip(),A.path(M)),A.ctx.shadowOffsetX=y.offsetX.number+x,A.ctx.shadowOffsetY=y.offsetY.number,A.ctx.shadowColor=gu(y.color),A.ctx.shadowBlur=y.blur.number,A.ctx.fillStyle=y.inset?gu(y.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),v.label=2;case 2:l=0,o=0,d=s,v.label=3;case 3:return o<d.length?(p=d[o],p.style!==0&&!Wy(p.color)&&p.width>0?p.style!==2?[3,5]:[4,this.renderDashedDottedBorder(p.color,p.width,l,n.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return p.style!==3?[3,7]:[4,this.renderDashedDottedBorder(p.color,p.width,l,n.curves,3)];case 6:return v.sent(),[3,11];case 7:return p.style!==4?[3,9]:[4,this.renderDoubleBorder(p.color,p.width,l,n.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(p.color,l,n.curves)];case 10:v.sent(),v.label=11;case 11:l++,v.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,i,s,a){return Fh(this,void 0,void 0,function(){var l,o,d,p,A,v,y,C,x,M,I,P,F,D,V,H,V,H;return hh(this,function(Q){return this.ctx.save(),l=HCt(s,i),o=Are(s,i),a===2&&(this.path(o),this.ctx.clip()),cp(o[0])?(d=o[0].start.x,p=o[0].start.y):(d=o[0].x,p=o[0].y),cp(o[1])?(A=o[1].end.x,v=o[1].end.y):(A=o[1].x,v=o[1].y),i===0||i===2?y=Math.abs(d-A):y=Math.abs(p-v),this.ctx.beginPath(),a===3?this.formatPath(l):this.formatPath(o.slice(0,2)),C=r<3?r*3:r*2,x=r<3?r*2:r,a===3&&(C=r,x=r),M=!0,y<=C*2?M=!1:y<=C*2+x?(I=y/(2*C+x),C*=I,x*=I):(P=Math.floor((y+x)/(C+x)),F=(y-P*C)/(P-1),D=(y-(P+1)*C)/P,x=D<=0||Math.abs(x-F)<Math.abs(x-D)?F:D),M&&(a===3?this.ctx.setLineDash([0,C+x]):this.ctx.setLineDash([C,x])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=gu(n),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(cp(o[0])&&(V=o[3],H=o[0],this.ctx.beginPath(),this.formatPath([new li(V.end.x,V.end.y),new li(H.start.x,H.start.y)]),this.ctx.stroke()),cp(o[1])&&(V=o[1],H=o[2],this.ctx.beginPath(),this.formatPath([new li(V.end.x,V.end.y),new li(H.start.x,H.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Fh(this,void 0,void 0,function(){var r;return hh(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=gu(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=zCt(n),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(rve),ZCt=function(t){return t instanceof zme||t instanceof Ume?!0:t instanceof hQ&&t.type!==x5&&t.type!==w5},JCt=function(t,e){switch(t){case 0:return S5(e);case 2:return FCt(e);case 1:default:return T5(e)}},eEt=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},tEt=["-apple-system","system-ui"],nEt=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return tEt.indexOf(e)===-1}):t},rEt=function(t){XA(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(n){return Fh(this,void 0,void 0,function(){var r,i;return hh(this,function(s){switch(s.label){case 0:return r=Iz(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,iEt(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=gu(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(rve),iEt=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},sEt=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,nP([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,nP([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,nP([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,nP([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),oEt=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new sEt({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new SCt(this,e)}return t.instanceCount=1,t}(),aEt=function(t,e){return e===void 0&&(e={}),lEt(t,e)};typeof window<"u"&&Xme.setContext(window);var lEt=function(t,e){return Fh(void 0,void 0,void 0,function(){var n,r,i,s,a,l,o,d,p,A,v,y,C,x,M,I,P,F,D,V,Q,H,Q,G,W,te,q,Y,ee,ce,se,le,ie,pe,ue,me,Le,ae,be,_e;return hh(this,function($e){switch($e.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return i={allowTaint:(G=e.allowTaint)!==null&&G!==void 0?G:!1,imageTimeout:(W=e.imageTimeout)!==null&&W!==void 0?W:15e3,proxy:e.proxy,useCORS:(te=e.useCORS)!==null&&te!==void 0?te:!1},s=fz({logging:(q=e.logging)!==null&&q!==void 0?q:!0,cache:e.cache},i),a={windowWidth:(Y=e.windowWidth)!==null&&Y!==void 0?Y:r.innerWidth,windowHeight:(ee=e.windowHeight)!==null&&ee!==void 0?ee:r.innerHeight,scrollX:(ce=e.scrollX)!==null&&ce!==void 0?ce:r.pageXOffset,scrollY:(se=e.scrollY)!==null&&se!==void 0?se:r.pageYOffset},l=new n0(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),o=new oEt(s,l),d=(le=e.foreignObjectRendering)!==null&&le!==void 0?le:!1,p={allowTaint:(ie=e.allowTaint)!==null&&ie!==void 0?ie:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},o.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),A=new dre(o,t,p),v=A.clonedReferenceElement,v?[4,A.toIFrame(n,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return y=$e.sent(),C=dQ(v)||cCt(v)?U_t(v.ownerDocument):xN(o,v),x=C.width,M=C.height,I=C.left,P=C.top,F=cEt(o,v,e.backgroundColor),D={canvas:e.canvas,backgroundColor:F,scale:(ue=(pe=e.scale)!==null&&pe!==void 0?pe:r.devicePixelRatio)!==null&&ue!==void 0?ue:1,x:((me=e.x)!==null&&me!==void 0?me:0)+I,y:((Le=e.y)!==null&&Le!==void 0?Le:0)+P,width:(ae=e.width)!==null&&ae!==void 0?ae:Math.ceil(x),height:(be=e.height)!==null&&be!==void 0?be:Math.ceil(M)},d?(o.logger.debug("Document cloned, using foreign object rendering"),Q=new rEt(o,D),[4,Q.render(v)]):[3,3];case 2:return V=$e.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+I+","+P+" with size "+x+"x"+M+" using computed rendering"),o.logger.debug("Starting DOM parsing"),H=Hme(o,v),F===H.styles.backgroundColor&&(H.styles.backgroundColor=zv.TRANSPARENT),o.logger.debug("Starting renderer for element at "+D.x+","+D.y+" with size "+D.width+"x"+D.height),Q=new XCt(o,D),[4,Q.render(H)];case 4:V=$e.sent(),$e.label=5;case 5:return(!((_e=e.removeContainer)!==null&&_e!==void 0)||_e)&&(dre.destroy(y)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,V]}})})},cEt=function(t,e,n){var r=e.ownerDocument,i=r.documentElement?AI(t,getComputedStyle(r.documentElement).backgroundColor):zv.TRANSPARENT,s=r.body?AI(t,getComputedStyle(r.body).backgroundColor):zv.TRANSPARENT,a=typeof n=="string"?AI(t,n):n===null?zv.TRANSPARENT:4294967295;return e===r.documentElement?Wy(i)?Wy(s)?a:s:i:a};const uEt=Object.freeze(Object.defineProperty({__proto__:null,default:aEt},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function Oz(t,e){return Oz=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Oz(t,e)}function hEt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function DF(t,e,n){return hEt()?DF=Reflect.construct:DF=function(i,s,a){var l=[null];l.push.apply(l,s);var o=Function.bind.apply(i,l),d=new o;return a&&Oz(d,a.prototype),d},DF.apply(null,arguments)}function wA(t){return dEt(t)||fEt(t)||pEt(t)||AEt()}function dEt(t){if(Array.isArray(t))return Nz(t)}function fEt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pEt(t,e){if(t){if(typeof t=="string")return Nz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nz(t,e)}}function Nz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AEt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gEt=Object.hasOwnProperty,mre=Object.setPrototypeOf,mEt=Object.isFrozen,vEt=Object.getPrototypeOf,yEt=Object.getOwnPropertyDescriptor,Qh=Object.freeze,VA=Object.seal,_Et=Object.create,ive=typeof Reflect<"u"&&Reflect,B5=ive.apply,kz=ive.construct;B5||(B5=function(e,n,r){return e.apply(n,r)});Qh||(Qh=function(e){return e});VA||(VA=function(e){return e});kz||(kz=function(e,n){return DF(e,wA(n))});var bEt=Bp(Array.prototype.forEach),vre=Bp(Array.prototype.pop),rT=Bp(Array.prototype.push),UF=Bp(String.prototype.toLowerCase),R6=Bp(String.prototype.toString),wEt=Bp(String.prototype.match),vA=Bp(String.prototype.replace),xEt=Bp(String.prototype.indexOf),CEt=Bp(String.prototype.trim),Rh=Bp(RegExp.prototype.test),P6=EEt(TypeError);function Bp(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return B5(t,e,r)}}function EEt(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kz(t,n)}}function ao(t,e,n){var r;n=(r=n)!==null&&r!==void 0?r:UF,mre&&mre(t,null);for(var i=e.length;i--;){var s=e[i];if(typeof s=="string"){var a=n(s);a!==s&&(mEt(e)||(e[i]=a),s=a)}t[s]=!0}return t}function w1(t){var e=_Et(null),n;for(n in t)B5(gEt,t,[n])===!0&&(e[n]=t[n]);return e}function EP(t,e){for(;t!==null;){var n=yEt(t,e);if(n){if(n.get)return Bp(n.get);if(typeof n.value=="function")return Bp(n.value)}t=vEt(t)}function r(i){return console.warn("fallback value for",i),null}return r}var yre=Qh(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),F6=Qh(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),O6=Qh(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),SEt=Qh(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),N6=Qh(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),TEt=Qh(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_re=Qh(["#text"]),bre=Qh(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),k6=Qh(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wre=Qh(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),SP=Qh(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IEt=VA(/\{\{[\w\W]*|[\w\W]*\}\}/gm),BEt=VA(/<%[\w\W]*|[\w\W]*%>/gm),MEt=VA(/\${[\w\W]*}/gm),LEt=VA(/^data-[\-\w.\u00B7-\uFFFF]/),REt=VA(/^aria-[\-\w]+$/),PEt=VA(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),FEt=VA(/^(?:\w+script|data):/i),OEt=VA(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),NEt=VA(/^html$/i),kEt=function(){return typeof window>"u"?null:window},DEt=function(e,n){if(By(e)!=="object"||typeof e.createPolicy!="function")return null;var r=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(r=n.currentScript.getAttribute(i));var s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function sve(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kEt(),e=function(jt){return sve(jt)};if(e.version="2.4.7",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var n=t.document,r=t.document,i=t.DocumentFragment,s=t.HTMLTemplateElement,a=t.Node,l=t.Element,o=t.NodeFilter,d=t.NamedNodeMap,p=d===void 0?t.NamedNodeMap||t.MozNamedAttrMap:d,A=t.HTMLFormElement,v=t.DOMParser,y=t.trustedTypes,C=l.prototype,x=EP(C,"cloneNode"),M=EP(C,"nextSibling"),I=EP(C,"childNodes"),P=EP(C,"parentNode");if(typeof s=="function"){var F=r.createElement("template");F.content&&F.content.ownerDocument&&(r=F.content.ownerDocument)}var D=DEt(y,n),V=D?D.createHTML(""):"",H=r,Q=H.implementation,G=H.createNodeIterator,W=H.createDocumentFragment,te=H.getElementsByTagName,q=n.importNode,Y={};try{Y=w1(r).documentMode?r.documentMode:{}}catch{}var ee={};e.isSupported=typeof P=="function"&&Q&&Q.createHTMLDocument!==void 0&&Y!==9;var ce=IEt,se=BEt,le=MEt,ie=LEt,pe=REt,ue=FEt,me=OEt,Le=PEt,ae=null,be=ao({},[].concat(wA(yre),wA(F6),wA(O6),wA(N6),wA(_re))),_e=null,$e=ao({},[].concat(wA(bre),wA(k6),wA(wre),wA(SP))),Re=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Ne=null,Je=!0,je=!0,ft=!1,Et=!0,ke=!1,Ye=!1,at=!1,He=!1,Tt=!1,Ut=!1,Rt=!1,Bt=!0,Ht=!1,xt="user-content-",Zt=!0,un=!1,Ft={},mt=null,Be=ao({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ze=null,it=ao({},["audio","video","img","source","image","track"]),bt=null,Qe=ao({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),St="http://www.w3.org/1998/Math/MathML",yt="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml",_t=Xe,Gt=!1,gt=null,hn=ao({},[St,yt,Xe],R6),rr,br=["application/xhtml+xml","text/html"],Qr="text/html",hr,Kn=null,ur=r.createElement("form"),ni=function(jt){return jt instanceof RegExp||jt instanceof Function},us=function(jt){Kn&&Kn===jt||((!jt||By(jt)!=="object")&&(jt={}),jt=w1(jt),rr=br.indexOf(jt.PARSER_MEDIA_TYPE)===-1?rr=Qr:rr=jt.PARSER_MEDIA_TYPE,hr=rr==="application/xhtml+xml"?R6:UF,ae="ALLOWED_TAGS"in jt?ao({},jt.ALLOWED_TAGS,hr):be,_e="ALLOWED_ATTR"in jt?ao({},jt.ALLOWED_ATTR,hr):$e,gt="ALLOWED_NAMESPACES"in jt?ao({},jt.ALLOWED_NAMESPACES,R6):hn,bt="ADD_URI_SAFE_ATTR"in jt?ao(w1(Qe),jt.ADD_URI_SAFE_ATTR,hr):Qe,ze="ADD_DATA_URI_TAGS"in jt?ao(w1(it),jt.ADD_DATA_URI_TAGS,hr):it,mt="FORBID_CONTENTS"in jt?ao({},jt.FORBID_CONTENTS,hr):Be,Ie="FORBID_TAGS"in jt?ao({},jt.FORBID_TAGS,hr):{},Ne="FORBID_ATTR"in jt?ao({},jt.FORBID_ATTR,hr):{},Ft="USE_PROFILES"in jt?jt.USE_PROFILES:!1,Je=jt.ALLOW_ARIA_ATTR!==!1,je=jt.ALLOW_DATA_ATTR!==!1,ft=jt.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=jt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ke=jt.SAFE_FOR_TEMPLATES||!1,Ye=jt.WHOLE_DOCUMENT||!1,Tt=jt.RETURN_DOM||!1,Ut=jt.RETURN_DOM_FRAGMENT||!1,Rt=jt.RETURN_TRUSTED_TYPE||!1,He=jt.FORCE_BODY||!1,Bt=jt.SANITIZE_DOM!==!1,Ht=jt.SANITIZE_NAMED_PROPS||!1,Zt=jt.KEEP_CONTENT!==!1,un=jt.IN_PLACE||!1,Le=jt.ALLOWED_URI_REGEXP||Le,_t=jt.NAMESPACE||Xe,Re=jt.CUSTOM_ELEMENT_HANDLING||{},jt.CUSTOM_ELEMENT_HANDLING&&ni(jt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Re.tagNameCheck=jt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),jt.CUSTOM_ELEMENT_HANDLING&&ni(jt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Re.attributeNameCheck=jt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),jt.CUSTOM_ELEMENT_HANDLING&&typeof jt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Re.allowCustomizedBuiltInElements=jt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(je=!1),Ut&&(Tt=!0),Ft&&(ae=ao({},wA(_re)),_e=[],Ft.html===!0&&(ao(ae,yre),ao(_e,bre)),Ft.svg===!0&&(ao(ae,F6),ao(_e,k6),ao(_e,SP)),Ft.svgFilters===!0&&(ao(ae,O6),ao(_e,k6),ao(_e,SP)),Ft.mathMl===!0&&(ao(ae,N6),ao(_e,wre),ao(_e,SP))),jt.ADD_TAGS&&(ae===be&&(ae=w1(ae)),ao(ae,jt.ADD_TAGS,hr)),jt.ADD_ATTR&&(_e===$e&&(_e=w1(_e)),ao(_e,jt.ADD_ATTR,hr)),jt.ADD_URI_SAFE_ATTR&&ao(bt,jt.ADD_URI_SAFE_ATTR,hr),jt.FORBID_CONTENTS&&(mt===Be&&(mt=w1(mt)),ao(mt,jt.FORBID_CONTENTS,hr)),Zt&&(ae["#text"]=!0),Ye&&ao(ae,["html","head","body"]),ae.table&&(ao(ae,["tbody"]),delete Ie.tbody),Qh&&Qh(jt),Kn=jt)},bi=ao({},["mi","mo","mn","ms","mtext"]),is=ao({},["foreignobject","desc","title","annotation-xml"]),Fs=ao({},["title","style","font","a","script"]),zr=ao({},F6);ao(zr,O6),ao(zr,SEt);var ss=ao({},N6);ao(ss,TEt);var Zi=function(jt){var Zn=P(jt);(!Zn||!Zn.tagName)&&(Zn={namespaceURI:_t,tagName:"template"});var Vt=UF(jt.tagName),Xn=UF(Zn.tagName);return gt[jt.namespaceURI]?jt.namespaceURI===yt?Zn.namespaceURI===Xe?Vt==="svg":Zn.namespaceURI===St?Vt==="svg"&&(Xn==="annotation-xml"||bi[Xn]):!!zr[Vt]:jt.namespaceURI===St?Zn.namespaceURI===Xe?Vt==="math":Zn.namespaceURI===yt?Vt==="math"&&is[Xn]:!!ss[Vt]:jt.namespaceURI===Xe?Zn.namespaceURI===yt&&!is[Xn]||Zn.namespaceURI===St&&!bi[Xn]?!1:!ss[Vt]&&(Fs[Vt]||!zr[Vt]):!!(rr==="application/xhtml+xml"&&gt[jt.namespaceURI]):!1},en=function(jt){rT(e.removed,{element:jt});try{jt.parentNode.removeChild(jt)}catch{try{jt.outerHTML=V}catch{jt.remove()}}},dn=function(jt,Zn){try{rT(e.removed,{attribute:Zn.getAttributeNode(jt),from:Zn})}catch{rT(e.removed,{attribute:null,from:Zn})}if(Zn.removeAttribute(jt),jt==="is"&&!_e[jt])if(Tt||Ut)try{en(Zn)}catch{}else try{Zn.setAttribute(jt,"")}catch{}},En=function(jt){var Zn,Vt;if(He)jt="<remove></remove>"+jt;else{var Xn=wEt(jt,/^[\r\n\t ]+/);Vt=Xn&&Xn[0]}rr==="application/xhtml+xml"&&_t===Xe&&(jt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+jt+"</body></html>");var Ur=D?D.createHTML(jt):jt;if(_t===Xe)try{Zn=new v().parseFromString(Ur,rr)}catch{}if(!Zn||!Zn.documentElement){Zn=Q.createDocument(_t,"template",null);try{Zn.documentElement.innerHTML=Gt?V:Ur}catch{}}var Cr=Zn.body||Zn.documentElement;return jt&&Vt&&Cr.insertBefore(r.createTextNode(Vt),Cr.childNodes[0]||null),_t===Xe?te.call(Zn,Ye?"html":"body")[0]:Ye?Zn.documentElement:Cr},Vn=function(jt){return G.call(jt.ownerDocument||jt,jt,o.SHOW_ELEMENT|o.SHOW_COMMENT|o.SHOW_TEXT,null,!1)},Dt=function(jt){return jt instanceof A&&(typeof jt.nodeName!="string"||typeof jt.textContent!="string"||typeof jt.removeChild!="function"||!(jt.attributes instanceof p)||typeof jt.removeAttribute!="function"||typeof jt.setAttribute!="function"||typeof jt.namespaceURI!="string"||typeof jt.insertBefore!="function"||typeof jt.hasChildNodes!="function")},sn=function(jt){return By(a)==="object"?jt instanceof a:jt&&By(jt)==="object"&&typeof jt.nodeType=="number"&&typeof jt.nodeName=="string"},Mn=function(jt,Zn,Vt){ee[jt]&&bEt(ee[jt],function(Xn){Xn.call(e,Zn,Vt,Kn)})},Rn=function(jt){var Zn;if(Mn("beforeSanitizeElements",jt,null),Dt(jt)||Rh(/[\u0080-\uFFFF]/,jt.nodeName))return en(jt),!0;var Vt=hr(jt.nodeName);if(Mn("uponSanitizeElement",jt,{tagName:Vt,allowedTags:ae}),jt.hasChildNodes()&&!sn(jt.firstElementChild)&&(!sn(jt.content)||!sn(jt.content.firstElementChild))&&Rh(/<[/\w]/g,jt.innerHTML)&&Rh(/<[/\w]/g,jt.textContent)||Vt==="select"&&Rh(/<template/i,jt.innerHTML))return en(jt),!0;if(!ae[Vt]||Ie[Vt]){if(!Ie[Vt]&&Qn(Vt)&&(Re.tagNameCheck instanceof RegExp&&Rh(Re.tagNameCheck,Vt)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(Vt)))return!1;if(Zt&&!mt[Vt]){var Xn=P(jt)||jt.parentNode,Ur=I(jt)||jt.childNodes;if(Ur&&Xn)for(var Cr=Ur.length,Is=Cr-1;Is>=0;--Is)Xn.insertBefore(x(Ur[Is],!0),M(jt))}return en(jt),!0}return jt instanceof l&&!Zi(jt)||(Vt==="noscript"||Vt==="noembed"||Vt==="noframes")&&Rh(/<\/no(script|embed|frames)/i,jt.innerHTML)?(en(jt),!0):(ke&&jt.nodeType===3&&(Zn=jt.textContent,Zn=vA(Zn,ce," "),Zn=vA(Zn,se," "),Zn=vA(Zn,le," "),jt.textContent!==Zn&&(rT(e.removed,{element:jt.cloneNode()}),jt.textContent=Zn)),Mn("afterSanitizeElements",jt,null),!1)},er=function(jt,Zn,Vt){if(Bt&&(Zn==="id"||Zn==="name")&&(Vt in r||Vt in ur))return!1;if(!(je&&!Ne[Zn]&&Rh(ie,Zn))){if(!(Je&&Rh(pe,Zn))){if(!_e[Zn]||Ne[Zn]){if(!(Qn(jt)&&(Re.tagNameCheck instanceof RegExp&&Rh(Re.tagNameCheck,jt)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(jt))&&(Re.attributeNameCheck instanceof RegExp&&Rh(Re.attributeNameCheck,Zn)||Re.attributeNameCheck instanceof Function&&Re.attributeNameCheck(Zn))||Zn==="is"&&Re.allowCustomizedBuiltInElements&&(Re.tagNameCheck instanceof RegExp&&Rh(Re.tagNameCheck,Vt)||Re.tagNameCheck instanceof Function&&Re.tagNameCheck(Vt))))return!1}else if(!bt[Zn]){if(!Rh(Le,vA(Vt,me,""))){if(!((Zn==="src"||Zn==="xlink:href"||Zn==="href")&&jt!=="script"&&xEt(Vt,"data:")===0&&ze[jt])){if(!(ft&&!Rh(ue,vA(Vt,me,"")))){if(Vt)return!1}}}}}}return!0},Qn=function(jt){return jt.indexOf("-")>0},Nr=function(jt){var Zn,Vt,Xn,Ur;Mn("beforeSanitizeAttributes",jt,null);var Cr=jt.attributes;if(Cr){var Is={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(Ur=Cr.length;Ur--;){Zn=Cr[Ur];var Bo=Zn,Qs=Bo.name,xh=Bo.namespaceURI;if(Vt=Qs==="value"?Zn.value:CEt(Zn.value),Xn=hr(Qs),Is.attrName=Xn,Is.attrValue=Vt,Is.keepAttr=!0,Is.forceKeepAttr=void 0,Mn("uponSanitizeAttribute",jt,Is),Vt=Is.attrValue,!Is.forceKeepAttr&&(dn(Qs,jt),!!Is.keepAttr)){if(!Et&&Rh(/\/>/i,Vt)){dn(Qs,jt);continue}ke&&(Vt=vA(Vt,ce," "),Vt=vA(Vt,se," "),Vt=vA(Vt,le," "));var zc=hr(jt.nodeName);if(er(zc,Xn,Vt)){if(Ht&&(Xn==="id"||Xn==="name")&&(dn(Qs,jt),Vt=xt+Vt),D&&By(y)==="object"&&typeof y.getAttributeType=="function"&&!xh)switch(y.getAttributeType(zc,Xn)){case"TrustedHTML":{Vt=D.createHTML(Vt);break}case"TrustedScriptURL":{Vt=D.createScriptURL(Vt);break}}try{xh?jt.setAttributeNS(xh,Qs,Vt):jt.setAttribute(Qs,Vt),vre(e.removed)}catch{}}}}Mn("afterSanitizeAttributes",jt,null)}},si=function Tn(jt){var Zn,Vt=Vn(jt);for(Mn("beforeSanitizeShadowDOM",jt,null);Zn=Vt.nextNode();)Mn("uponSanitizeShadowNode",Zn,null),!Rn(Zn)&&(Zn.content instanceof i&&Tn(Zn.content),Nr(Zn));Mn("afterSanitizeShadowDOM",jt,null)};return e.sanitize=function(Tn){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Zn,Vt,Xn,Ur,Cr;if(Gt=!Tn,Gt&&(Tn="<!-->"),typeof Tn!="string"&&!sn(Tn))if(typeof Tn.toString=="function"){if(Tn=Tn.toString(),typeof Tn!="string")throw P6("dirty is not a string, aborting")}else throw P6("toString is not a function");if(!e.isSupported){if(By(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Tn=="string")return t.toStaticHTML(Tn);if(sn(Tn))return t.toStaticHTML(Tn.outerHTML)}return Tn}if(at||us(jt),e.removed=[],typeof Tn=="string"&&(un=!1),un){if(Tn.nodeName){var Is=hr(Tn.nodeName);if(!ae[Is]||Ie[Is])throw P6("root node is forbidden and cannot be sanitized in-place")}}else if(Tn instanceof a)Zn=En("<!---->"),Vt=Zn.ownerDocument.importNode(Tn,!0),Vt.nodeType===1&&Vt.nodeName==="BODY"||Vt.nodeName==="HTML"?Zn=Vt:Zn.appendChild(Vt);else{if(!Tt&&!ke&&!Ye&&Tn.indexOf("<")===-1)return D&&Rt?D.createHTML(Tn):Tn;if(Zn=En(Tn),!Zn)return Tt?null:Rt?V:""}Zn&&He&&en(Zn.firstChild);for(var Bo=Vn(un?Tn:Zn);Xn=Bo.nextNode();)Xn.nodeType===3&&Xn===Ur||Rn(Xn)||(Xn.content instanceof i&&si(Xn.content),Nr(Xn),Ur=Xn);if(Ur=null,un)return Tn;if(Tt){if(Ut)for(Cr=W.call(Zn.ownerDocument);Zn.firstChild;)Cr.appendChild(Zn.firstChild);else Cr=Zn;return(_e.shadowroot||_e.shadowrootmod)&&(Cr=q.call(n,Cr,!0)),Cr}var Qs=Ye?Zn.outerHTML:Zn.innerHTML;return Ye&&ae["!doctype"]&&Zn.ownerDocument&&Zn.ownerDocument.doctype&&Zn.ownerDocument.doctype.name&&Rh(NEt,Zn.ownerDocument.doctype.name)&&(Qs="<!DOCTYPE "+Zn.ownerDocument.doctype.name+`>
`+Qs),ke&&(Qs=vA(Qs,ce," "),Qs=vA(Qs,se," "),Qs=vA(Qs,le," ")),D&&Rt?D.createHTML(Qs):Qs},e.setConfig=function(Tn){us(Tn),at=!0},e.clearConfig=function(){Kn=null,at=!1},e.isValidAttribute=function(Tn,jt,Zn){Kn||us({});var Vt=hr(Tn),Xn=hr(jt);return er(Vt,Xn,Zn)},e.addHook=function(Tn,jt){typeof jt=="function"&&(ee[Tn]=ee[Tn]||[],rT(ee[Tn],jt))},e.removeHook=function(Tn){if(ee[Tn])return vre(ee[Tn])},e.removeHooks=function(Tn){ee[Tn]&&(ee[Tn]=[])},e.removeAllHooks=function(){ee={}},e}var UEt=sve();const zEt=Object.freeze(Object.defineProperty({__proto__:null,default:UEt},Symbol.toStringTag,{value:"Module"}));var iT=function(t){return t&&t.Math===Math&&t},gc=iT(typeof globalThis=="object"&&globalThis)||iT(typeof window=="object"&&window)||iT(typeof self=="object"&&self)||iT(typeof fp=="object"&&fp)||iT(typeof fp=="object"&&fp)||function(){return this}()||Function("return this")(),BM={},mc=function(t){try{return!!t()}catch{return!0}},$Et=mc,ZA=!$Et(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),VEt=mc,PN=!VEt(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),HEt=PN,TP=Function.prototype.call,Wu=HEt?TP.bind(TP):function(){return TP.apply(TP,arguments)},ove={},ave={}.propertyIsEnumerable,lve=Object.getOwnPropertyDescriptor,GEt=lve&&!ave.call({1:2},1);ove.f=GEt?function(e){var n=lve(this,e);return!!n&&n.enumerable}:ave;var fQ=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}},cve=PN,uve=Function.prototype,Dz=uve.call,QEt=cve&&uve.bind.bind(Dz,Dz),vc=cve?QEt:function(t){return function(){return Dz.apply(t,arguments)}},hve=vc,jEt=hve({}.toString),KEt=hve("".slice),sw=function(t){return KEt(jEt(t),8,-1)},WEt=vc,qEt=mc,YEt=sw,D6=Object,XEt=WEt("".split),dve=qEt(function(){return!D6("z").propertyIsEnumerable(0)})?function(t){return YEt(t)==="String"?XEt(t,""):D6(t)}:D6,ow=function(t){return t==null},ZEt=ow,JEt=TypeError,bm=function(t){if(ZEt(t))throw new JEt("Can't call method on "+t);return t},eSt=dve,tSt=bm,MM=function(t){return eSt(tSt(t))},U6=typeof document=="object"&&document.all,yc=typeof U6>"u"&&U6!==void 0?function(t){return typeof t=="function"||t===U6}:function(t){return typeof t=="function"},nSt=yc,wm=function(t){return typeof t=="object"?t!==null:nSt(t)},z6=gc,rSt=yc,iSt=function(t){return rSt(t)?t:void 0},aw=function(t,e){return arguments.length<2?iSt(z6[t]):z6[t]&&z6[t][e]},sSt=vc,FN=sSt({}.isPrototypeOf),ON=typeof navigator<"u"&&String(navigator.userAgent)||"",fve=gc,$6=ON,xre=fve.process,Cre=fve.Deno,Ere=xre&&xre.versions||Cre&&Cre.version,Sre=Ere&&Ere.v8,IA,M5;Sre&&(IA=Sre.split("."),M5=IA[0]>0&&IA[0]<4?1:+(IA[0]+IA[1]));!M5&&$6&&(IA=$6.match(/Edge\/(\d+)/),(!IA||IA[1]>=74)&&(IA=$6.match(/Chrome\/(\d+)/),IA&&(M5=+IA[1])));var pQ=M5,Tre=pQ,oSt=mc,aSt=gc,lSt=aSt.String,pve=!!Object.getOwnPropertySymbols&&!oSt(function(){var t=Symbol("symbol detection");return!lSt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Tre&&Tre<41}),cSt=pve,Ave=cSt&&!Symbol.sham&&typeof Symbol.iterator=="symbol",uSt=aw,hSt=yc,dSt=FN,fSt=Ave,pSt=Object,gve=fSt?function(t){return typeof t=="symbol"}:function(t){var e=uSt("Symbol");return hSt(e)&&dSt(e.prototype,pSt(t))},ASt=String,NN=function(t){try{return ASt(t)}catch{return"Object"}},gSt=yc,mSt=NN,vSt=TypeError,_0=function(t){if(gSt(t))return t;throw new vSt(mSt(t)+" is not a function")},ySt=_0,_St=ow,jE=function(t,e){var n=t[e];return _St(n)?void 0:ySt(n)},V6=Wu,H6=yc,G6=wm,bSt=TypeError,wSt=function(t,e){var n,r;if(e==="string"&&H6(n=t.toString)&&!G6(r=V6(n,t))||H6(n=t.valueOf)&&!G6(r=V6(n,t))||e!=="string"&&H6(n=t.toString)&&!G6(r=V6(n,t)))return r;throw new bSt("Can't convert object to primitive value")},mve={exports:{}},Ire=gc,xSt=Object.defineProperty,AQ=function(t,e){try{xSt(Ire,t,{value:e,configurable:!0,writable:!0})}catch{Ire[t]=e}return e},CSt=gc,ESt=AQ,Bre="__core-js_shared__",Mre=mve.exports=CSt[Bre]||ESt(Bre,{});(Mre.versions||(Mre.versions=[])).push({version:"3.36.0",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"});var gQ=mve.exports,Lre=gQ,mQ=function(t,e){return Lre[t]||(Lre[t]=e||{})},SSt=bm,TSt=Object,kN=function(t){return TSt(SSt(t))},ISt=vc,BSt=kN,MSt=ISt({}.hasOwnProperty),JA=Object.hasOwn||function(e,n){return MSt(BSt(e),n)},LSt=vc,RSt=0,PSt=Math.random(),FSt=LSt(1 .toString),vve=function(t){return"Symbol("+(t===void 0?"":t)+")_"+FSt(++RSt+PSt,36)},OSt=gc,NSt=mQ,Rre=JA,kSt=vve,DSt=pve,USt=Ave,eC=OSt.Symbol,Q6=NSt("wks"),zSt=USt?eC.for||eC:eC&&eC.withoutSetter||kSt,Su=function(t){return Rre(Q6,t)||(Q6[t]=DSt&&Rre(eC,t)?eC[t]:zSt("Symbol."+t)),Q6[t]},$St=Wu,Pre=wm,Fre=gve,VSt=jE,HSt=wSt,GSt=Su,QSt=TypeError,jSt=GSt("toPrimitive"),KSt=function(t,e){if(!Pre(t)||Fre(t))return t;var n=VSt(t,jSt),r;if(n){if(e===void 0&&(e="default"),r=$St(n,t,e),!Pre(r)||Fre(r))return r;throw new QSt("Can't convert object to primitive value")}return e===void 0&&(e="number"),HSt(t,e)},WSt=KSt,qSt=gve,yve=function(t){var e=WSt(t,"string");return qSt(e)?e:e+""},YSt=gc,Ore=wm,Uz=YSt.document,XSt=Ore(Uz)&&Ore(Uz.createElement),DN=function(t){return XSt?Uz.createElement(t):{}},ZSt=ZA,JSt=mc,eTt=DN,_ve=!ZSt&&!JSt(function(){return Object.defineProperty(eTt("div"),"a",{get:function(){return 7}}).a!==7}),tTt=ZA,nTt=Wu,rTt=ove,iTt=fQ,sTt=MM,oTt=yve,aTt=JA,lTt=_ve,Nre=Object.getOwnPropertyDescriptor;BM.f=tTt?Nre:function(e,n){if(e=sTt(e),n=oTt(n),lTt)try{return Nre(e,n)}catch{}if(aTt(e,n))return iTt(!nTt(rTt.f,e,n),e[n])};var b0={},cTt=ZA,uTt=mc,bve=cTt&&uTt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),hTt=wm,dTt=String,fTt=TypeError,wh=function(t){if(hTt(t))return t;throw new fTt(dTt(t)+" is not an object")},pTt=ZA,ATt=_ve,gTt=bve,IP=wh,kre=yve,mTt=TypeError,j6=Object.defineProperty,vTt=Object.getOwnPropertyDescriptor,K6="enumerable",W6="configurable",q6="writable";b0.f=pTt?gTt?function(e,n,r){if(IP(e),n=kre(n),IP(r),typeof e=="function"&&n==="prototype"&&"value"in r&&q6 in r&&!r[q6]){var i=vTt(e,n);i&&i[q6]&&(e[n]=r.value,r={configurable:W6 in r?r[W6]:i[W6],enumerable:K6 in r?r[K6]:i[K6],writable:!1})}return j6(e,n,r)}:j6:function(e,n,r){if(IP(e),n=kre(n),IP(r),ATt)try{return j6(e,n,r)}catch{}if("get"in r||"set"in r)throw new mTt("Accessors not supported");return"value"in r&&(e[n]=r.value),e};var yTt=ZA,_Tt=b0,bTt=fQ,LM=yTt?function(t,e,n){return _Tt.f(t,e,bTt(1,n))}:function(t,e,n){return t[e]=n,t},wve={exports:{}},zz=ZA,wTt=JA,xve=Function.prototype,xTt=zz&&Object.getOwnPropertyDescriptor,vQ=wTt(xve,"name"),CTt=vQ&&(function(){}).name==="something",ETt=vQ&&(!zz||zz&&xTt(xve,"name").configurable),UN={EXISTS:vQ,PROPER:CTt,CONFIGURABLE:ETt},STt=vc,TTt=yc,$z=gQ,ITt=STt(Function.toString);TTt($z.inspectSource)||($z.inspectSource=function(t){return ITt(t)});var yQ=$z.inspectSource,BTt=gc,MTt=yc,Dre=BTt.WeakMap,LTt=MTt(Dre)&&/native code/.test(String(Dre)),RTt=mQ,PTt=vve,Ure=RTt("keys"),_Q=function(t){return Ure[t]||(Ure[t]=PTt(t))},bQ={},FTt=LTt,Cve=gc,OTt=wm,NTt=LM,Y6=JA,X6=gQ,kTt=_Q,DTt=bQ,zre="Object already initialized",Vz=Cve.TypeError,UTt=Cve.WeakMap,L5,MB,R5,zTt=function(t){return R5(t)?MB(t):L5(t,{})},$Tt=function(t){return function(e){var n;if(!OTt(e)||(n=MB(e)).type!==t)throw new Vz("Incompatible receiver, "+t+" required");return n}};if(FTt||X6.state){var Pg=X6.state||(X6.state=new UTt);Pg.get=Pg.get,Pg.has=Pg.has,Pg.set=Pg.set,L5=function(t,e){if(Pg.has(t))throw new Vz(zre);return e.facade=t,Pg.set(t,e),e},MB=function(t){return Pg.get(t)||{}},R5=function(t){return Pg.has(t)}}else{var mx=kTt("state");DTt[mx]=!0,L5=function(t,e){if(Y6(t,mx))throw new Vz(zre);return e.facade=t,NTt(t,mx,e),e},MB=function(t){return Y6(t,mx)?t[mx]:{}},R5=function(t){return Y6(t,mx)}}var zN={set:L5,get:MB,has:R5,enforce:zTt,getterFor:$Tt},wQ=vc,VTt=mc,HTt=yc,BP=JA,Hz=ZA,GTt=UN.CONFIGURABLE,QTt=yQ,Eve=zN,jTt=Eve.enforce,KTt=Eve.get,$re=String,zF=Object.defineProperty,WTt=wQ("".slice),qTt=wQ("".replace),YTt=wQ([].join),XTt=Hz&&!VTt(function(){return zF(function(){},"length",{value:8}).length!==8}),ZTt=String(String).split("String"),JTt=wve.exports=function(t,e,n){WTt($re(e),0,7)==="Symbol("&&(e="["+qTt($re(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!BP(t,"name")||GTt&&t.name!==e)&&(Hz?zF(t,"name",{value:e,configurable:!0}):t.name=e),XTt&&n&&BP(n,"arity")&&t.length!==n.arity&&zF(t,"length",{value:n.arity});try{n&&BP(n,"constructor")&&n.constructor?Hz&&zF(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var r=jTt(t);return BP(r,"source")||(r.source=YTt(ZTt,typeof e=="string"?e:"")),t};Function.prototype.toString=JTt(function(){return HTt(this)&&KTt(this).source||QTt(this)},"toString");var Sve=wve.exports,eIt=yc,tIt=b0,nIt=Sve,rIt=AQ,lw=function(t,e,n,r){r||(r={});var i=r.enumerable,s=r.name!==void 0?r.name:e;if(eIt(n)&&nIt(n,s,r),r.global)i?t[e]=n:rIt(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch{}i?t[e]=n:tIt.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},Tve={},iIt=Math.ceil,sIt=Math.floor,oIt=Math.trunc||function(e){var n=+e;return(n>0?sIt:iIt)(n)},aIt=oIt,$N=function(t){var e=+t;return e!==e||e===0?0:aIt(e)},lIt=$N,cIt=Math.max,uIt=Math.min,hIt=function(t,e){var n=lIt(t);return n<0?cIt(n+e,0):uIt(n,e)},dIt=$N,fIt=Math.min,KE=function(t){var e=dIt(t);return e>0?fIt(e,9007199254740991):0},pIt=KE,xQ=function(t){return pIt(t.length)},AIt=MM,gIt=hIt,mIt=xQ,Vre=function(t){return function(e,n,r){var i=AIt(e),s=mIt(i);if(s===0)return!t&&-1;var a=gIt(r,s),l;if(t&&n!==n){for(;s>a;)if(l=i[a++],l!==l)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Ive={includes:Vre(!0),indexOf:Vre(!1)},vIt=vc,Z6=JA,yIt=MM,_It=Ive.indexOf,bIt=bQ,Hre=vIt([].push),Bve=function(t,e){var n=yIt(t),r=0,i=[],s;for(s in n)!Z6(bIt,s)&&Z6(n,s)&&Hre(i,s);for(;e.length>r;)Z6(n,s=e[r++])&&(~_It(i,s)||Hre(i,s));return i},CQ=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wIt=Bve,xIt=CQ,CIt=xIt.concat("length","prototype");Tve.f=Object.getOwnPropertyNames||function(e){return wIt(e,CIt)};var Mve={};Mve.f=Object.getOwnPropertySymbols;var EIt=aw,SIt=vc,TIt=Tve,IIt=Mve,BIt=wh,MIt=SIt([].concat),LIt=EIt("Reflect","ownKeys")||function(e){var n=TIt.f(BIt(e)),r=IIt.f;return r?MIt(n,r(e)):n},Gre=JA,RIt=LIt,PIt=BM,FIt=b0,OIt=function(t,e,n){for(var r=RIt(e),i=FIt.f,s=PIt.f,a=0;a<r.length;a++){var l=r[a];!Gre(t,l)&&!(n&&Gre(n,l))&&i(t,l,s(e,l))}},NIt=mc,kIt=yc,DIt=/#|\.prototype\./,RM=function(t,e){var n=zIt[UIt(t)];return n===VIt?!0:n===$It?!1:kIt(e)?NIt(e):!!e},UIt=RM.normalize=function(t){return String(t).replace(DIt,".").toLowerCase()},zIt=RM.data={},$It=RM.NATIVE="N",VIt=RM.POLYFILL="P",Lve=RM,MP=gc,HIt=BM.f,GIt=LM,QIt=lw,jIt=AQ,KIt=OIt,WIt=Lve,qh=function(t,e){var n=t.target,r=t.global,i=t.stat,s,a,l,o,d,p;if(r?a=MP:i?a=MP[n]||jIt(n,{}):a=MP[n]&&MP[n].prototype,a)for(l in e){if(d=e[l],t.dontCallGetSet?(p=HIt(a,l),o=p&&p.value):o=a[l],s=WIt(r?l:n+(i?".":"#")+l,t.forced),!s&&o!==void 0){if(typeof d==typeof o)continue;KIt(d,o)}(t.sham||o&&o.sham)&&GIt(d,"sham",!0),QIt(a,l,d,t)}},qIt=gc,YIt=sw,PM=YIt(qIt.process)==="process",XIt=vc,ZIt=_0,JIt=function(t,e,n){try{return XIt(ZIt(Object.getOwnPropertyDescriptor(t,e)[n]))}catch{}},eBt=wm,tBt=function(t){return eBt(t)||t===null},nBt=tBt,rBt=String,iBt=TypeError,sBt=function(t){if(nBt(t))return t;throw new iBt("Can't set "+rBt(t)+" as a prototype")},oBt=JIt,aBt=wh,lBt=sBt,Rve=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},n;try{n=oBt(Object.prototype,"__proto__","set"),n(e,[]),t=e instanceof Array}catch{}return function(i,s){return aBt(i),lBt(s),t?n(i,s):i.__proto__=s,i}}():void 0),cBt=b0.f,uBt=JA,hBt=Su,Qre=hBt("toStringTag"),VN=function(t,e,n){t&&!n&&(t=t.prototype),t&&!uBt(t,Qre)&&cBt(t,Qre,{configurable:!0,value:e})},jre=Sve,dBt=b0,fBt=function(t,e,n){return n.get&&jre(n.get,e,{getter:!0}),n.set&&jre(n.set,e,{setter:!0}),dBt.f(t,e,n)},pBt=aw,ABt=fBt,gBt=Su,mBt=ZA,Kre=gBt("species"),vBt=function(t){var e=pBt(t);mBt&&e&&!e[Kre]&&ABt(e,Kre,{configurable:!0,get:function(){return this}})},yBt=FN,_Bt=TypeError,bBt=function(t,e){if(yBt(e,t))return t;throw new _Bt("Incorrect invocation")},wBt=Su,xBt=wBt("toStringTag"),Pve={};Pve[xBt]="z";var CBt=String(Pve)==="[object z]",EBt=CBt,SBt=yc,$F=sw,TBt=Su,IBt=TBt("toStringTag"),BBt=Object,MBt=$F(function(){return arguments}())==="Arguments",LBt=function(t,e){try{return t[e]}catch{}},EQ=EBt?$F:function(t){var e,n,r;return t===void 0?"Undefined":t===null?"Null":typeof(n=LBt(e=BBt(t),IBt))=="string"?n:MBt?$F(e):(r=$F(e))==="Object"&&SBt(e.callee)?"Arguments":r},RBt=vc,PBt=mc,Fve=yc,FBt=EQ,OBt=aw,NBt=yQ,Ove=function(){},Nve=OBt("Reflect","construct"),SQ=/^\s*(?:class|function)\b/,kBt=RBt(SQ.exec),DBt=!SQ.test(Ove),sT=function(e){if(!Fve(e))return!1;try{return Nve(Ove,[],e),!0}catch{return!1}},kve=function(e){if(!Fve(e))return!1;switch(FBt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return DBt||!!kBt(SQ,NBt(e))}catch{return!0}};kve.sham=!0;var UBt=!Nve||PBt(function(){var t;return sT(sT.call)||!sT(Object)||!sT(function(){t=!0})||t})?kve:sT,zBt=UBt,$Bt=NN,VBt=TypeError,HBt=function(t){if(zBt(t))return t;throw new VBt($Bt(t)+" is not a constructor")},Wre=wh,GBt=HBt,QBt=ow,jBt=Su,KBt=jBt("species"),Dve=function(t,e){var n=Wre(t).constructor,r;return n===void 0||QBt(r=Wre(n)[KBt])?e:GBt(r)},WBt=PN,Uve=Function.prototype,qre=Uve.apply,Yre=Uve.call,zve=typeof Reflect=="object"&&Reflect.apply||(WBt?Yre.bind(qre):function(){return Yre.apply(qre,arguments)}),qBt=sw,YBt=vc,HN=function(t){if(qBt(t)==="Function")return YBt(t)},Xre=HN,XBt=_0,ZBt=PN,JBt=Xre(Xre.bind),TQ=function(t,e){return XBt(t),e===void 0?t:ZBt?JBt(t,e):function(){return t.apply(e,arguments)}},eMt=aw,$ve=eMt("document","documentElement"),tMt=vc,nMt=tMt([].slice),rMt=TypeError,iMt=function(t,e){if(t<e)throw new rMt("Not enough arguments");return t},sMt=ON,Vve=/(?:ipad|iphone|ipod).*applewebkit/i.test(sMt),Mf=gc,oMt=zve,aMt=TQ,Zre=yc,lMt=JA,Hve=mc,Jre=$ve,cMt=nMt,eie=DN,uMt=iMt,hMt=Vve,dMt=PM,Gz=Mf.setImmediate,Qz=Mf.clearImmediate,fMt=Mf.process,J6=Mf.Dispatch,pMt=Mf.Function,tie=Mf.MessageChannel,AMt=Mf.String,eU=0,yI={},nie="onreadystatechange",LB,x1,tU,nU;Hve(function(){LB=Mf.location});var IQ=function(t){if(lMt(yI,t)){var e=yI[t];delete yI[t],e()}},rU=function(t){return function(){IQ(t)}},rie=function(t){IQ(t.data)},iie=function(t){Mf.postMessage(AMt(t),LB.protocol+"//"+LB.host)};(!Gz||!Qz)&&(Gz=function(e){uMt(arguments.length,1);var n=Zre(e)?e:pMt(e),r=cMt(arguments,1);return yI[++eU]=function(){oMt(n,void 0,r)},x1(eU),eU},Qz=function(e){delete yI[e]},dMt?x1=function(t){fMt.nextTick(rU(t))}:J6&&J6.now?x1=function(t){J6.now(rU(t))}:tie&&!hMt?(tU=new tie,nU=tU.port2,tU.port1.onmessage=rie,x1=aMt(nU.postMessage,nU)):Mf.addEventListener&&Zre(Mf.postMessage)&&!Mf.importScripts&&LB&&LB.protocol!=="file:"&&!Hve(iie)?(x1=iie,Mf.addEventListener("message",rie,!1)):nie in eie("script")?x1=function(t){Jre.appendChild(eie("script"))[nie]=function(){Jre.removeChild(this),IQ(t)}}:x1=function(t){setTimeout(rU(t),0)});var Gve={set:Gz,clear:Qz},sie=gc,gMt=ZA,mMt=Object.getOwnPropertyDescriptor,vMt=function(t){if(!gMt)return sie[t];var e=mMt(sie,t);return e&&e.value},Qve=function(){this.head=null,this.tail=null};Qve.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t){var e=this.head=t.next;return e===null&&(this.tail=null),t.item}}};var jve=Qve,yMt=ON,_Mt=/ipad|iphone|ipod/i.test(yMt)&&typeof Pebble<"u",bMt=ON,wMt=/web0s(?!.*chrome)/i.test(bMt),AE=gc,xMt=vMt,oie=TQ,iU=Gve.set,CMt=jve,EMt=Vve,SMt=_Mt,TMt=wMt,sU=PM,aie=AE.MutationObserver||AE.WebKitMutationObserver,lie=AE.document,cie=AE.process,LP=AE.Promise,jz=xMt("queueMicrotask"),vx,oU,aU,RP,uie;if(!jz){var PP=new CMt,FP=function(){var t,e;for(sU&&(t=cie.domain)&&t.exit();e=PP.get();)try{e()}catch(n){throw PP.head&&vx(),n}t&&t.enter()};!EMt&&!sU&&!TMt&&aie&&lie?(oU=!0,aU=lie.createTextNode(""),new aie(FP).observe(aU,{characterData:!0}),vx=function(){aU.data=oU=!oU}):!SMt&&LP&&LP.resolve?(RP=LP.resolve(void 0),RP.constructor=LP,uie=oie(RP.then,RP),vx=function(){uie(FP)}):sU?vx=function(){cie.nextTick(FP)}:(iU=oie(iU,AE),vx=function(){iU(FP)}),jz=function(t){PP.head||vx(),PP.add(t)}}var IMt=jz,BMt=function(t,e){try{arguments.length===1?console.error(t):console.error(t,e)}catch{}},BQ=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},MMt=gc,GN=MMt.Promise,Kve=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",LMt=Kve,RMt=PM,PMt=!LMt&&!RMt&&typeof window=="object"&&typeof document=="object",FMt=gc,_I=GN,OMt=yc,NMt=Lve,kMt=yQ,DMt=Su,UMt=PMt,zMt=Kve,lU=pQ;_I&&_I.prototype;var $Mt=DMt("species"),Kz=!1,Wve=OMt(FMt.PromiseRejectionEvent),VMt=NMt("Promise",function(){var t=kMt(_I),e=t!==String(_I);if(!e&&lU===66)return!0;if(!lU||lU<51||!/native code/.test(t)){var n=new _I(function(s){s(1)}),r=function(s){s(function(){},function(){})},i=n.constructor={};if(i[$Mt]=r,Kz=n.then(function(){})instanceof r,!Kz)return!0}return!e&&(UMt||zMt)&&!Wve}),FM={CONSTRUCTOR:VMt,REJECTION_EVENT:Wve,SUBCLASSING:Kz},WE={},hie=_0,HMt=TypeError,GMt=function(t){var e,n;this.promise=new t(function(r,i){if(e!==void 0||n!==void 0)throw new HMt("Bad Promise constructor");e=r,n=i}),this.resolve=hie(e),this.reject=hie(n)};WE.f=function(t){return new GMt(t)};var QMt=qh,P5=PM,m_=gc,gE=Wu,die=lw,fie=Rve,jMt=VN,KMt=vBt,WMt=_0,VF=yc,qMt=wm,YMt=bBt,XMt=Dve,qve=Gve.set,MQ=IMt,ZMt=BMt,JMt=BQ,eLt=jve,Yve=zN,F5=GN,LQ=FM,Xve=WE,QN="Promise",Zve=LQ.CONSTRUCTOR,tLt=LQ.REJECTION_EVENT,nLt=LQ.SUBCLASSING,cU=Yve.getterFor(QN),rLt=Yve.set,Nx=F5&&F5.prototype,O1=F5,OP=Nx,Jve=m_.TypeError,Wz=m_.document,RQ=m_.process,qz=Xve.f,iLt=qz,sLt=!!(Wz&&Wz.createEvent&&m_.dispatchEvent),e0e="unhandledrejection",oLt="rejectionhandled",pie=0,t0e=1,aLt=2,PQ=1,n0e=2,NP,Aie,lLt,gie,r0e=function(t){var e;return qMt(t)&&VF(e=t.then)?e:!1},i0e=function(t,e){var n=e.value,r=e.state===t0e,i=r?t.ok:t.fail,s=t.resolve,a=t.reject,l=t.domain,o,d,p;try{i?(r||(e.rejection===n0e&&uLt(e),e.rejection=PQ),i===!0?o=n:(l&&l.enter(),o=i(n),l&&(l.exit(),p=!0)),o===t.promise?a(new Jve("Promise-chain cycle")):(d=r0e(o))?gE(d,o,s,a):s(o)):a(n)}catch(A){l&&!p&&l.exit(),a(A)}},s0e=function(t,e){t.notified||(t.notified=!0,MQ(function(){for(var n=t.reactions,r;r=n.get();)i0e(r,t);t.notified=!1,e&&!t.rejection&&cLt(t)}))},o0e=function(t,e,n){var r,i;sLt?(r=Wz.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),m_.dispatchEvent(r)):r={promise:e,reason:n},!tLt&&(i=m_["on"+t])?i(r):t===e0e&&ZMt("Unhandled promise rejection",n)},cLt=function(t){gE(qve,m_,function(){var e=t.facade,n=t.value,r=mie(t),i;if(r&&(i=JMt(function(){P5?RQ.emit("unhandledRejection",n,e):o0e(e0e,e,n)}),t.rejection=P5||mie(t)?n0e:PQ,i.error))throw i.value})},mie=function(t){return t.rejection!==PQ&&!t.parent},uLt=function(t){gE(qve,m_,function(){var e=t.facade;P5?RQ.emit("rejectionHandled",e):o0e(oLt,e,t.value)})},tC=function(t,e,n){return function(r){t(e,r,n)}},TC=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=aLt,s0e(t,!0))},Yz=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new Jve("Promise can't be resolved itself");var r=r0e(e);r?MQ(function(){var i={done:!1};try{gE(r,e,tC(Yz,i,t),tC(TC,i,t))}catch(s){TC(i,s,t)}}):(t.value=e,t.state=t0e,s0e(t,!1))}catch(i){TC({done:!1},i,t)}}};if(Zve&&(O1=function(e){YMt(this,OP),WMt(e),gE(NP,this);var n=cU(this);try{e(tC(Yz,n),tC(TC,n))}catch(r){TC(n,r)}},OP=O1.prototype,NP=function(e){rLt(this,{type:QN,done:!1,notified:!1,parent:!1,reactions:new eLt,rejection:!1,state:pie,value:void 0})},NP.prototype=die(OP,"then",function(e,n){var r=cU(this),i=qz(XMt(this,O1));return r.parent=!0,i.ok=VF(e)?e:!0,i.fail=VF(n)&&n,i.domain=P5?RQ.domain:void 0,r.state===pie?r.reactions.add(i):MQ(function(){i0e(i,r)}),i.promise}),Aie=function(){var t=new NP,e=cU(t);this.promise=t,this.resolve=tC(Yz,e),this.reject=tC(TC,e)},Xve.f=qz=function(t){return t===O1||t===lLt?new Aie(t):iLt(t)},VF(F5)&&Nx!==Object.prototype)){gie=Nx.then,nLt||die(Nx,"then",function(e,n){var r=this;return new O1(function(i,s){gE(gie,r,i,s)}).then(e,n)},{unsafe:!0});try{delete Nx.constructor}catch{}fie&&fie(Nx,OP)}QMt({global:!0,constructor:!0,wrap:!0,forced:Zve},{Promise:O1});jMt(O1,QN,!1);KMt(QN);var OM={},hLt=Su,dLt=OM,fLt=hLt("iterator"),pLt=Array.prototype,ALt=function(t){return t!==void 0&&(dLt.Array===t||pLt[fLt]===t)},gLt=EQ,vie=jE,mLt=ow,vLt=OM,yLt=Su,_Lt=yLt("iterator"),a0e=function(t){if(!mLt(t))return vie(t,_Lt)||vie(t,"@@iterator")||vLt[gLt(t)]},bLt=Wu,wLt=_0,xLt=wh,CLt=NN,ELt=a0e,SLt=TypeError,TLt=function(t,e){var n=arguments.length<2?ELt(t):e;if(wLt(n))return xLt(bLt(n,t));throw new SLt(CLt(t)+" is not iterable")},ILt=Wu,yie=wh,BLt=jE,MLt=function(t,e,n){var r,i;yie(t);try{if(r=BLt(t,"return"),!r){if(e==="throw")throw n;return n}r=ILt(r,t)}catch(s){i=!0,r=s}if(e==="throw")throw n;if(i)throw r;return yie(r),n},LLt=TQ,RLt=Wu,PLt=wh,FLt=NN,OLt=ALt,NLt=xQ,_ie=FN,kLt=TLt,DLt=a0e,bie=MLt,ULt=TypeError,HF=function(t,e){this.stopped=t,this.result=e},wie=HF.prototype,l0e=function(t,e,n){var r=n&&n.that,i=!!(n&&n.AS_ENTRIES),s=!!(n&&n.IS_RECORD),a=!!(n&&n.IS_ITERATOR),l=!!(n&&n.INTERRUPTED),o=LLt(e,r),d,p,A,v,y,C,x,M=function(P){return d&&bie(d,"normal",P),new HF(!0,P)},I=function(P){return i?(PLt(P),l?o(P[0],P[1],M):o(P[0],P[1])):l?o(P,M):o(P)};if(s)d=t.iterator;else if(a)d=t;else{if(p=DLt(t),!p)throw new ULt(FLt(t)+" is not iterable");if(OLt(p)){for(A=0,v=NLt(t);v>A;A++)if(y=I(t[A]),y&&_ie(wie,y))return y;return new HF(!1)}d=kLt(t,p)}for(C=s?t.next:d.next;!(x=RLt(C,d)).done;){try{y=I(x.value)}catch(P){bie(d,"throw",P)}if(typeof y=="object"&&y&&_ie(wie,y))return y}return new HF(!1)},zLt=Su,c0e=zLt("iterator"),u0e=!1;try{var $Lt=0,xie={next:function(){return{done:!!$Lt++}},return:function(){u0e=!0}};xie[c0e]=function(){return this},Array.from(xie,function(){throw 2})}catch{}var VLt=function(t,e){try{if(!e&&!u0e)return!1}catch{return!1}var n=!1;try{var r={};r[c0e]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch{}return n},HLt=GN,GLt=VLt,QLt=FM.CONSTRUCTOR,h0e=QLt||!GLt(function(t){HLt.all(t).then(void 0,function(){})}),jLt=qh,KLt=Wu,WLt=_0,qLt=WE,YLt=BQ,XLt=l0e,ZLt=h0e;jLt({target:"Promise",stat:!0,forced:ZLt},{all:function(e){var n=this,r=qLt.f(n),i=r.resolve,s=r.reject,a=YLt(function(){var l=WLt(n.resolve),o=[],d=0,p=1;XLt(e,function(A){var v=d++,y=!1;p++,KLt(l,n,A).then(function(C){y||(y=!0,o[v]=C,--p||i(o))},s)}),--p||i(o)});return a.error&&s(a.value),r.promise}});var JLt=qh,eRt=FM.CONSTRUCTOR,Xz=GN,tRt=aw,nRt=yc,rRt=lw,Cie=Xz&&Xz.prototype;JLt({target:"Promise",proto:!0,forced:eRt,real:!0},{catch:function(t){return this.then(void 0,t)}});if(nRt(Xz)){var Eie=tRt("Promise").prototype.catch;Cie.catch!==Eie&&rRt(Cie,"catch",Eie,{unsafe:!0})}var iRt=qh,sRt=Wu,oRt=_0,aRt=WE,lRt=BQ,cRt=l0e,uRt=h0e;iRt({target:"Promise",stat:!0,forced:uRt},{race:function(e){var n=this,r=aRt.f(n),i=r.reject,s=lRt(function(){var a=oRt(n.resolve);cRt(e,function(l){sRt(a,n,l).then(r.resolve,i)})});return s.error&&i(s.value),r.promise}});var hRt=qh,dRt=WE,fRt=FM.CONSTRUCTOR;hRt({target:"Promise",stat:!0,forced:fRt},{reject:function(e){var n=dRt.f(this),r=n.reject;return r(e),n.promise}});var pRt=wh,ARt=wm,gRt=WE,mRt=function(t,e){if(pRt(t),ARt(e)&&e.constructor===t)return e;var n=gRt.f(t),r=n.resolve;return r(e),n.promise},vRt=qh,yRt=aw,_Rt=FM.CONSTRUCTOR,bRt=mRt;yRt("Promise");vRt({target:"Promise",stat:!0,forced:_Rt},{resolve:function(e){return bRt(this,e)}});function Sie(t,e,n,r,i,s,a){try{var l=t[s](a),o=l.value}catch(d){n(d);return}l.done?e(o):Promise.resolve(o).then(r,i)}function r0(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function a(o){Sie(s,r,i,a,l,"next",o)}function l(o){Sie(s,r,i,a,l,"throw",o)}a(void 0)})}}var wRt=EQ,xRt=String,xm=function(t){if(wRt(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return xRt(t)},CRt=wh,d0e=function(){var t=CRt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},FQ=mc,ERt=gc,OQ=ERt.RegExp,NQ=FQ(function(){var t=OQ("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),SRt=NQ||FQ(function(){return!OQ("a","y").sticky}),TRt=NQ||FQ(function(){var t=OQ("^r","gy");return t.lastIndex=2,t.exec("str")!==null}),f0e={BROKEN_CARET:TRt,MISSED_STICKY:SRt,UNSUPPORTED_Y:NQ},p0e={},IRt=Bve,BRt=CQ,MRt=Object.keys||function(e){return IRt(e,BRt)},LRt=ZA,RRt=bve,PRt=b0,FRt=wh,ORt=MM,NRt=MRt;p0e.f=LRt&&!RRt?Object.defineProperties:function(e,n){FRt(e);for(var r=ORt(n),i=NRt(n),s=i.length,a=0,l;s>a;)PRt.f(e,l=i[a++],r[l]);return e};var kRt=wh,DRt=p0e,Tie=CQ,URt=bQ,zRt=$ve,$Rt=DN,VRt=_Q,Iie=">",Bie="<",Zz="prototype",Jz="script",A0e=VRt("IE_PROTO"),uU=function(){},g0e=function(t){return Bie+Jz+Iie+t+Bie+"/"+Jz+Iie},Mie=function(t){t.write(g0e("")),t.close();var e=t.parentWindow.Object;return t=null,e},HRt=function(){var t=$Rt("iframe"),e="java"+Jz+":",n;return t.style.display="none",zRt.appendChild(t),t.src=String(e),n=t.contentWindow.document,n.open(),n.write(g0e("document.F=Object")),n.close(),n.F},kP,GF=function(){try{kP=new ActiveXObject("htmlfile")}catch{}GF=typeof document<"u"?document.domain&&kP?Mie(kP):HRt():Mie(kP);for(var t=Tie.length;t--;)delete GF[Zz][Tie[t]];return GF()};URt[A0e]=!0;var kQ=Object.create||function(e,n){var r;return e!==null?(uU[Zz]=kRt(e),r=new uU,uU[Zz]=null,r[A0e]=e):r=GF(),n===void 0?r:DRt.f(r,n)},GRt=mc,QRt=gc,jRt=QRt.RegExp,KRt=GRt(function(){var t=jRt(".","s");return!(t.dotAll&&t.test(`
`)&&t.flags==="s")}),WRt=mc,qRt=gc,YRt=qRt.RegExp,XRt=WRt(function(){var t=YRt("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"}),nC=Wu,jN=vc,ZRt=xm,JRt=d0e,ePt=f0e,tPt=mQ,nPt=kQ,rPt=zN.get,iPt=KRt,sPt=XRt,oPt=tPt("native-string-replace",String.prototype.replace),O5=RegExp.prototype.exec,e$=O5,aPt=jN("".charAt),lPt=jN("".indexOf),cPt=jN("".replace),hU=jN("".slice),t$=function(){var t=/a/,e=/b*/g;return nC(O5,t,"a"),nC(O5,e,"a"),t.lastIndex!==0||e.lastIndex!==0}(),m0e=ePt.BROKEN_CARET,n$=/()??/.exec("")[1]!==void 0,uPt=t$||n$||m0e||iPt||sPt;uPt&&(e$=function(e){var n=this,r=rPt(n),i=ZRt(e),s=r.raw,a,l,o,d,p,A,v;if(s)return s.lastIndex=n.lastIndex,a=nC(e$,s,i),n.lastIndex=s.lastIndex,a;var y=r.groups,C=m0e&&n.sticky,x=nC(JRt,n),M=n.source,I=0,P=i;if(C&&(x=cPt(x,"y",""),lPt(x,"g")===-1&&(x+="g"),P=hU(i,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&aPt(i,n.lastIndex-1)!==`
`)&&(M="(?: "+M+")",P=" "+P,I++),l=new RegExp("^(?:"+M+")",x)),n$&&(l=new RegExp("^"+M+"$(?!\\s)",x)),t$&&(o=n.lastIndex),d=nC(O5,C?l:n,P),C?d?(d.input=hU(d.input,I),d[0]=hU(d[0],I),d.index=n.lastIndex,n.lastIndex+=d[0].length):n.lastIndex=0:t$&&d&&(n.lastIndex=n.global?d.index+d[0].length:o),n$&&d&&d.length>1&&nC(oPt,d[0],l,function(){for(p=1;p<arguments.length-2;p++)arguments[p]===void 0&&(d[p]=void 0)}),d&&y)for(d.groups=A=nPt(null),p=0;p<y.length;p++)v=y[p],A[v[0]]=d[v[1]];return d});var DQ=e$,hPt=qh,Lie=DQ;hPt({target:"RegExp",proto:!0,forced:/./.exec!==Lie},{exec:Lie});var Rie=Wu,Pie=lw,dPt=DQ,Fie=mc,v0e=Su,fPt=LM,pPt=v0e("species"),dU=RegExp.prototype,UQ=function(t,e,n,r){var i=v0e(t),s=!Fie(function(){var d={};return d[i]=function(){return 7},""[t](d)!==7}),a=s&&!Fie(function(){var d=!1,p=/a/;return t==="split"&&(p={},p.constructor={},p.constructor[pPt]=function(){return p},p.flags="",p[i]=/./[i]),p.exec=function(){return d=!0,null},p[i](""),!d});if(!s||!a||n){var l=/./[i],o=e(i,""[t],function(d,p,A,v,y){var C=p.exec;return C===dPt||C===dU.exec?s&&!y?{done:!0,value:Rie(l,p,A,v)}:{done:!0,value:Rie(d,A,p,v)}:{done:!1}});Pie(String.prototype,t,o[0]),Pie(dU,i,o[1])}r&&fPt(dU[i],"sham",!0)},zQ=vc,APt=$N,gPt=xm,mPt=bm,vPt=zQ("".charAt),Oie=zQ("".charCodeAt),yPt=zQ("".slice),Nie=function(t){return function(e,n){var r=gPt(mPt(e)),i=APt(n),s=r.length,a,l;return i<0||i>=s?t?"":void 0:(a=Oie(r,i),a<55296||a>56319||i+1===s||(l=Oie(r,i+1))<56320||l>57343?t?vPt(r,i):a:t?yPt(r,i,i+2):(a-55296<<10)+(l-56320)+65536)}},_Pt={codeAt:Nie(!1),charAt:Nie(!0)},bPt=_Pt.charAt,$Q=function(t,e,n){return e+(n?bPt(t,e).length:1)},kie=Wu,wPt=wh,xPt=yc,CPt=sw,EPt=DQ,SPt=TypeError,VQ=function(t,e){var n=t.exec;if(xPt(n)){var r=kie(n,t,e);return r!==null&&wPt(r),r}if(CPt(t)==="RegExp")return kie(EPt,t,e);throw new SPt("RegExp#exec called on incompatible receiver")},TPt=Wu,IPt=UQ,BPt=wh,MPt=ow,LPt=KE,fU=xm,RPt=bm,PPt=jE,FPt=$Q,Die=VQ;IPt("match",function(t,e,n){return[function(i){var s=RPt(this),a=MPt(i)?void 0:PPt(i,t);return a?TPt(a,i,s):new RegExp(i)[t](fU(s))},function(r){var i=BPt(this),s=fU(r),a=n(e,i,s);if(a.done)return a.value;if(!i.global)return Die(i,s);var l=i.unicode;i.lastIndex=0;for(var o=[],d=0,p;(p=Die(i,s))!==null;){var A=fU(p[0]);o[d]=A,A===""&&(i.lastIndex=FPt(s,LPt(i.lastIndex),l)),d++}return d===0?null:o}]});var HQ=vc,OPt=kN,NPt=Math.floor,pU=HQ("".charAt),kPt=HQ("".replace),AU=HQ("".slice),DPt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,UPt=/\$([$&'`]|\d{1,2})/g,zPt=function(t,e,n,r,i,s){var a=n+t.length,l=r.length,o=UPt;return i!==void 0&&(i=OPt(i),o=DPt),kPt(s,o,function(d,p){var A;switch(pU(p,0)){case"$":return"$";case"&":return t;case"`":return AU(e,0,n);case"'":return AU(e,a);case"<":A=i[AU(p,1,-1)];break;default:var v=+p;if(v===0)return d;if(v>l){var y=NPt(v/10);return y===0?d:y<=l?r[y-1]===void 0?pU(p,1):r[y-1]+pU(p,1):d}A=r[v-1]}return A===void 0?"":A})},$Pt=zve,Uie=Wu,KN=vc,VPt=UQ,HPt=mc,GPt=wh,QPt=yc,jPt=ow,KPt=$N,WPt=KE,yx=xm,qPt=bm,YPt=$Q,XPt=jE,ZPt=zPt,JPt=VQ,eFt=Su,r$=eFt("replace"),tFt=Math.max,nFt=Math.min,rFt=KN([].concat),gU=KN([].push),zie=KN("".indexOf),$ie=KN("".slice),iFt=function(t){return t===void 0?t:String(t)},sFt=function(){return"a".replace(/./,"$0")==="$0"}(),Vie=function(){return/./[r$]?/./[r$]("a","$0")==="":!1}(),oFt=!HPt(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(t,"$<a>")!=="7"});VPt("replace",function(t,e,n){var r=Vie?"$":"$0";return[function(s,a){var l=qPt(this),o=jPt(s)?void 0:XPt(s,r$);return o?Uie(o,s,l,a):Uie(e,yx(l),s,a)},function(i,s){var a=GPt(this),l=yx(i);if(typeof s=="string"&&zie(s,r)===-1&&zie(s,"$<")===-1){var o=n(e,a,l,s);if(o.done)return o.value}var d=QPt(s);d||(s=yx(s));var p=a.global,A;p&&(A=a.unicode,a.lastIndex=0);for(var v=[],y;y=JPt(a,l),!(y===null||(gU(v,y),!p));){var C=yx(y[0]);C===""&&(a.lastIndex=YPt(l,WPt(a.lastIndex),A))}for(var x="",M=0,I=0;I<v.length;I++){y=v[I];for(var P=yx(y[0]),F=tFt(nFt(KPt(y.index),l.length),0),D=[],V,H=1;H<y.length;H++)gU(D,iFt(y[H]));var Q=y.groups;if(d){var G=rFt([P],D,F,l);Q!==void 0&&gU(G,Q),V=yx($Pt(s,void 0,G))}else V=ZPt(P,l,F,D,Q,s);F>=M&&(x+=$ie(l,M,F)+V,M=F+P.length)}return x+$ie(l,M)}]},!oFt||!sFt||Vie);var aFt=wm,lFt=sw,cFt=Su,uFt=cFt("match"),hFt=function(t){var e;return aFt(t)&&((e=t[uFt])!==void 0?!!e:lFt(t)==="RegExp")},dFt=hFt,fFt=TypeError,GQ=function(t){if(dFt(t))throw new fFt("The method doesn't accept regular expressions");return t},pFt=Su,AFt=pFt("match"),QQ=function(t){var e=/./;try{"/./"[t](e)}catch{try{return e[AFt]=!1,"/./"[t](e)}catch{}}return!1},gFt=qh,mFt=HN,vFt=BM.f,yFt=KE,Hie=xm,_Ft=GQ,bFt=bm,wFt=QQ,xFt=mFt("".slice),CFt=Math.min,y0e=wFt("startsWith"),EFt=!y0e&&!!function(){var t=vFt(String.prototype,"startsWith");return t&&!t.writable}();gFt({target:"String",proto:!0,forced:!EFt&&!y0e},{startsWith:function(e){var n=Hie(bFt(this));_Ft(e);var r=yFt(CFt(arguments.length>1?arguments[1]:void 0,n.length)),i=Hie(e);return xFt(n,r,r+i.length)===i}});var SFt=Su,TFt=kQ,IFt=b0.f,i$=SFt("unscopables"),s$=Array.prototype;s$[i$]===void 0&&IFt(s$,i$,{configurable:!0,value:TFt(null)});var BFt=function(t){s$[i$][t]=!0},MFt=mc,LFt=!MFt(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),RFt=JA,PFt=yc,FFt=kN,OFt=_Q,NFt=LFt,Gie=OFt("IE_PROTO"),o$=Object,kFt=o$.prototype,_0e=NFt?o$.getPrototypeOf:function(t){var e=FFt(t);if(RFt(e,Gie))return e[Gie];var n=e.constructor;return PFt(n)&&e instanceof n?n.prototype:e instanceof o$?kFt:null},DFt=mc,UFt=yc,zFt=wm,Qie=_0e,$Ft=lw,VFt=Su,a$=VFt("iterator"),b0e=!1,Nb,mU,vU;[].keys&&(vU=[].keys(),"next"in vU?(mU=Qie(Qie(vU)),mU!==Object.prototype&&(Nb=mU)):b0e=!0);var HFt=!zFt(Nb)||DFt(function(){var t={};return Nb[a$].call(t)!==t});HFt&&(Nb={});UFt(Nb[a$])||$Ft(Nb,a$,function(){return this});var w0e={IteratorPrototype:Nb,BUGGY_SAFARI_ITERATORS:b0e},GFt=w0e.IteratorPrototype,QFt=kQ,jFt=fQ,KFt=VN,WFt=OM,qFt=function(){return this},YFt=function(t,e,n,r){var i=e+" Iterator";return t.prototype=QFt(GFt,{next:jFt(+!r,n)}),KFt(t,i,!1),WFt[i]=qFt,t},XFt=qh,ZFt=Wu,x0e=UN,JFt=yc,eOt=YFt,jie=_0e,Kie=Rve,tOt=VN,nOt=LM,yU=lw,rOt=Su,iOt=OM,C0e=w0e,sOt=x0e.PROPER,oOt=x0e.CONFIGURABLE,Wie=C0e.IteratorPrototype,DP=C0e.BUGGY_SAFARI_ITERATORS,oT=rOt("iterator"),qie="keys",aT="values",Yie="entries",aOt=function(){return this},lOt=function(t,e,n,r,i,s,a){eOt(n,e,r);var l=function(I){if(I===i&&v)return v;if(!DP&&I&&I in p)return p[I];switch(I){case qie:return function(){return new n(this,I)};case aT:return function(){return new n(this,I)};case Yie:return function(){return new n(this,I)}}return function(){return new n(this)}},o=e+" Iterator",d=!1,p=t.prototype,A=p[oT]||p["@@iterator"]||i&&p[i],v=!DP&&A||l(i),y=e==="Array"&&p.entries||A,C,x,M;if(y&&(C=jie(y.call(new t)),C!==Object.prototype&&C.next&&(jie(C)!==Wie&&(Kie?Kie(C,Wie):JFt(C[oT])||yU(C,oT,aOt)),tOt(C,o,!0))),sOt&&i===aT&&A&&A.name!==aT&&(oOt?nOt(p,"name",aT):(d=!0,v=function(){return ZFt(A,this)})),i)if(x={values:l(aT),keys:s?v:l(qie),entries:l(Yie)},a)for(M in x)(DP||d||!(M in p))&&yU(p,M,x[M]);else XFt({target:e,proto:!0,forced:DP||d},x);return p[oT]!==v&&yU(p,oT,v,{name:i}),iOt[e]=v,x},cOt=function(t,e){return{value:t,done:e}},uOt=MM,jQ=BFt,Xie=OM,E0e=zN,hOt=b0.f,dOt=lOt,UP=cOt,fOt=ZA,S0e="Array Iterator",pOt=E0e.set,AOt=E0e.getterFor(S0e),gOt=dOt(Array,"Array",function(t,e){pOt(this,{type:S0e,target:uOt(t),index:0,kind:e})},function(){var t=AOt(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,UP(void 0,!0);switch(t.kind){case"keys":return UP(n,!1);case"values":return UP(e[n],!1)}return UP([n,e[n]],!1)},"values"),Zie=Xie.Arguments=Xie.Array;jQ("keys");jQ("values");jQ("entries");if(fOt&&Zie.name!=="values")try{hOt(Zie,"name",{value:"values"})}catch{}var mOt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},vOt=DN,_U=vOt("span").classList,Jie=_U&&_U.constructor&&_U.constructor.prototype,yOt=Jie===Object.prototype?void 0:Jie,ese=gc,T0e=mOt,_Ot=yOt,MT=gOt,tse=LM,bOt=VN,wOt=Su,bU=wOt("iterator"),wU=MT.values,I0e=function(t,e){if(t){if(t[bU]!==wU)try{tse(t,bU,wU)}catch{t[bU]=wU}if(bOt(t,e,!0),T0e[e]){for(var n in MT)if(t[n]!==MT[n])try{tse(t,n,MT[n])}catch{t[n]=MT[n]}}}};for(var xU in T0e)I0e(ese[xU]&&ese[xU].prototype,xU);I0e(_Ot,"DOMTokenList");function xOt(t,e){if(Ho(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ho(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function COt(t){var e=xOt(t,"string");return Ho(e)=="symbol"?e:String(e)}function KQ(t,e,n){return e=COt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var EOt=_0,SOt=kN,TOt=dve,IOt=xQ,nse=TypeError,rse="Reduce of empty array with no initial value",ise=function(t){return function(e,n,r,i){var s=SOt(e),a=TOt(s),l=IOt(s);if(EOt(n),l===0&&r<2)throw new nse(rse);var o=t?l-1:0,d=t?-1:1;if(r<2)for(;;){if(o in a){i=a[o],o+=d;break}if(o+=d,t?o<0:l<=o)throw new nse(rse)}for(;t?o>=0:l>o;o+=d)o in a&&(i=n(i,a[o],o,s));return i}},BOt={left:ise(!1),right:ise(!0)},MOt=mc,B0e=function(t,e){var n=[][t];return!!n&&MOt(function(){n.call(null,e||function(){return 1},1)})},LOt=qh,ROt=BOt.left,POt=B0e,sse=pQ,FOt=PM,OOt=!FOt&&sse>79&&sse<83,NOt=OOt||!POt("reduce");LOt({target:"Array",proto:!0,forced:NOt},{reduce:function(e){var n=arguments.length;return ROt(this,e,n,n>1?arguments[1]:void 0)}});var kOt=qh,DOt=HN,UOt=BM.f,zOt=KE,ose=xm,$Ot=GQ,VOt=bm,HOt=QQ,GOt=DOt("".slice),QOt=Math.min,M0e=HOt("endsWith"),jOt=!M0e&&!!function(){var t=UOt(String.prototype,"endsWith");return t&&!t.writable}();kOt({target:"String",proto:!0,forced:!jOt&&!M0e},{endsWith:function(e){var n=ose(VOt(this));$Ot(e);var r=arguments.length>1?arguments[1]:void 0,i=n.length,s=r===void 0?i:QOt(zOt(r),i),a=ose(e);return GOt(n,s-a.length,s)===a}});var CU=Wu,L0e=vc,KOt=UQ,WOt=wh,qOt=ow,YOt=bm,XOt=Dve,ZOt=$Q,JOt=KE,ase=xm,e5t=jE,lse=VQ,t5t=f0e,n5t=mc,_x=t5t.UNSUPPORTED_Y,r5t=4294967295,i5t=Math.min,EU=L0e([].push),SU=L0e("".slice),s5t=!n5t(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return n.length!==2||n[0]!=="a"||n[1]!=="b"}),cse="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;KOt("split",function(t,e,n){var r="0".split(void 0,0).length?function(i,s){return i===void 0&&s===0?[]:CU(e,this,i,s)}:e;return[function(s,a){var l=YOt(this),o=qOt(s)?void 0:e5t(s,t);return o?CU(o,s,l,a):CU(r,ase(l),s,a)},function(i,s){var a=WOt(this),l=ase(i);if(!cse){var o=n(r,a,l,s,r!==e);if(o.done)return o.value}var d=XOt(a,RegExp),p=a.unicode,A=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(_x?"g":"y"),v=new d(_x?"^(?:"+a.source+")":a,A),y=s===void 0?r5t:s>>>0;if(y===0)return[];if(l.length===0)return lse(v,l)===null?[l]:[];for(var C=0,x=0,M=[];x<l.length;){v.lastIndex=_x?0:x;var I=lse(v,_x?SU(l,x):l),P;if(I===null||(P=i5t(JOt(v.lastIndex+(_x?x:0)),l.length))===C)x=ZOt(l,x,p);else{if(EU(M,SU(l,C,x)),M.length===y)return M;for(var F=1;F<=I.length-1;F++)if(EU(M,I[F]),M.length===y)return M;x=C=P}}return EU(M,SU(l,C)),M}]},cse||!s5t,_x);var WN={exports:{}},LT={exports:{}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?LT.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(LT.exports=function(){return(t()-i)/1e6},e=process.hrtime,t=function(){var a;return a=e(),a[0]*1e9+a[1]},r=t(),s=process.uptime()*1e9,i=r-s):Date.now?(LT.exports=function(){return Date.now()-n},n=Date.now()):(LT.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(fp);var o5t=LT.exports,a5t=o5t,$v=typeof window>"u"?fp:window,zP=["moz","webkit"],IC="AnimationFrame",mE=$v["request"+IC],RB=$v["cancel"+IC]||$v["cancelRequest"+IC];for(var lT=0;!mE&&lT<zP.length;lT++)mE=$v[zP[lT]+"Request"+IC],RB=$v[zP[lT]+"Cancel"+IC]||$v[zP[lT]+"CancelRequest"+IC];if(!mE||!RB){var TU=0,use=0,C1=[],l5t=1e3/60;mE=function(t){if(C1.length===0){var e=a5t(),n=Math.max(0,l5t-(e-TU));TU=n+e,setTimeout(function(){var r=C1.slice(0);C1.length=0;for(var i=0;i<r.length;i++)if(!r[i].cancelled)try{r[i].callback(TU)}catch(s){setTimeout(function(){throw s},0)}},Math.round(n))}return C1.push({handle:++use,callback:t,cancelled:!1}),use},RB=function(t){for(var e=0;e<C1.length;e++)C1[e].handle===t&&(C1[e].cancelled=!0)}}WN.exports=function(t){return mE.call($v,t)};WN.exports.cancel=function(){RB.apply($v,arguments)};WN.exports.polyfill=function(t){t||(t=$v),t.requestAnimationFrame=mE,t.cancelAnimationFrame=RB};var c5t=WN.exports;const IU=rQ(c5t);var R0e=`	
\v\f\r \u2028\u2029\uFEFF`,u5t=vc,h5t=bm,d5t=xm,l$=R0e,hse=u5t("".replace),f5t=RegExp("^["+l$+"]+"),p5t=RegExp("(^|[^"+l$+"])["+l$+"]+$"),BU=function(t){return function(e){var n=d5t(h5t(e));return t&1&&(n=hse(n,f5t,"")),t&2&&(n=hse(n,p5t,"$1")),n}},A5t={start:BU(1),end:BU(2),trim:BU(3)},g5t=UN.PROPER,m5t=mc,dse=R0e,fse="",v5t=function(t){return m5t(function(){return!!dse[t]()||fse[t]()!==fse||g5t&&dse[t].name!==t})},y5t=qh,_5t=A5t.trim,b5t=v5t;y5t({target:"String",proto:!0,forced:b5t("trim")},{trim:function(){return _5t(this)}});var w5t=function(t){this.ok=!1,this.alpha=1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseFloat(o[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(t);if(a){var l=s(a);this.r=l[0],this.g=l[1],this.b=l[2],l.length>3&&(this.alpha=l[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var o=this.r.toString(16),d=this.g.toString(16),p=this.b.toString(16);return o.length==1&&(o="0"+o),d.length==1&&(d="0"+d),p.length==1&&(p="0"+p),"#"+o+d+p},this.getHelpXML=function(){for(var o=new Array,d=0;d<n.length;d++)for(var p=n[d].example,A=0;A<p.length;A++)o[o.length]=p[A];for(var v in e)o[o.length]=v;var y=document.createElement("ul");y.setAttribute("id","rgbcolor-examples");for(var d=0;d<o.length;d++)try{var C=document.createElement("li"),x=new RGBColor(o[d]),M=document.createElement("div");M.style.cssText="margin: 3px; border: 1px solid black; background:"+x.toHex()+"; color:"+x.toHex(),M.appendChild(document.createTextNode("test"));var I=document.createTextNode(" "+o[d]+" -> "+x.toRGB()+" -> "+x.toHex());C.appendChild(M),C.appendChild(I),y.appendChild(C)}catch{}return y}};const c$=rQ(w5t);var x5t=qh,C5t=HN,E5t=Ive.indexOf,S5t=B0e,u$=C5t([].indexOf),P0e=!!u$&&1/u$([1],1,-0)<0,T5t=P0e||!S5t("indexOf");x5t({target:"Array",proto:!0,forced:T5t},{indexOf:function(e){var n=arguments.length>1?arguments[1]:void 0;return P0e?u$(this,e,n)||0:E5t(this,e,n)}});var I5t=qh,B5t=vc,M5t=GQ,L5t=bm,pse=xm,R5t=QQ,P5t=B5t("".indexOf);I5t({target:"String",proto:!0,forced:!R5t("includes")},{includes:function(e){return!!~P5t(pse(L5t(this)),pse(M5t(e)),arguments.length>1?arguments[1]:void 0)}});var F5t=sw,O5t=Array.isArray||function(e){return F5t(e)==="Array"},N5t=qh,k5t=vc,D5t=O5t,U5t=k5t([].reverse),Ase=[1,2];N5t({target:"Array",proto:!0,forced:String(Ase)===String(Ase.reverse())},{reverse:function(){return D5t(this)&&(this.length=this.length),U5t(this)}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F0e=function(t,e){return(F0e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(t,e)};function O0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}F0e(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function z5t(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.type===Sr.CLOSE_PATH)e+="z";else if(r.type===Sr.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===Sr.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===Sr.MOVE_TO)e+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===Sr.LINE_TO)e+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===Sr.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===Sr.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===Sr.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===Sr.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==Sr.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");e+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return e}function h$(t,e){var n=t[0],r=t[1];return[n*Math.cos(e)-r*Math.sin(e),n*Math.sin(e)+r*Math.cos(e)]}function xA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if(typeof t[n]!="number")throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof t[n]+" == typeof "+t[n]);return!0}var Cy=Math.PI;function MU(t,e,n){t.lArcFlag=t.lArcFlag===0?0:1,t.sweepFlag=t.sweepFlag===0?0:1;var r=t.rX,i=t.rY,s=t.x,a=t.y;r=Math.abs(t.rX),i=Math.abs(t.rY);var l=h$([(e-s)/2,(n-a)/2],-t.xRot/180*Cy),o=l[0],d=l[1],p=Math.pow(o,2)/Math.pow(r,2)+Math.pow(d,2)/Math.pow(i,2);1<p&&(r*=Math.sqrt(p),i*=Math.sqrt(p)),t.rX=r,t.rY=i;var A=Math.pow(r,2)*Math.pow(d,2)+Math.pow(i,2)*Math.pow(o,2),v=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-A)/A)),y=r*d/i*v,C=-i*o/r*v,x=h$([y,C],t.xRot/180*Cy);t.cX=x[0]+(e+s)/2,t.cY=x[1]+(n+a)/2,t.phi1=Math.atan2((d-C)/i,(o-y)/r),t.phi2=Math.atan2((-d-C)/i,(-o-y)/r),t.sweepFlag===0&&t.phi2>t.phi1&&(t.phi2-=2*Cy),t.sweepFlag===1&&t.phi2<t.phi1&&(t.phi2+=2*Cy),t.phi1*=180/Cy,t.phi2*=180/Cy}function gse(t,e,n){xA(t,e,n);var r=t*t+e*e-n*n;if(0>r)return[];if(r===0)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var i=Math.sqrt(r);return[[(t*n+e*i)/(t*t+e*e),(e*n-t*i)/(t*t+e*e)],[(t*n-e*i)/(t*t+e*e),(e*n+t*i)/(t*t+e*e)]]}var Pc,vv=Math.PI/180;function mse(t,e,n){return(1-n)*t+n*e}function vse(t,e,n,r){return t+Math.cos(r/180*Cy)*e+Math.sin(r/180*Cy)*n}function yse(t,e,n,r){var i=1e-6,s=e-t,a=n-e,l=3*s+3*(r-n)-6*a,o=6*(a-s),d=3*s;return Math.abs(l)<i?[-d/o]:function(p,A,v){var y=p*p/4-A;if(y<-v)return[];if(y<=v)return[-p/2];var C=Math.sqrt(y);return[-p/2-C,-p/2+C]}(o/l,d/l,i)}function _se(t,e,n,r,i){var s=1-i;return t*(s*s*s)+e*(3*s*s*i)+n*(3*s*i*i)+r*(i*i*i)}(function(t){function e(){return i(function(l,o,d){return l.relative&&(l.x1!==void 0&&(l.x1+=o),l.y1!==void 0&&(l.y1+=d),l.x2!==void 0&&(l.x2+=o),l.y2!==void 0&&(l.y2+=d),l.x!==void 0&&(l.x+=o),l.y!==void 0&&(l.y+=d),l.relative=!1),l})}function n(){var l=NaN,o=NaN,d=NaN,p=NaN;return i(function(A,v,y){return A.type&Sr.SMOOTH_CURVE_TO&&(A.type=Sr.CURVE_TO,l=isNaN(l)?v:l,o=isNaN(o)?y:o,A.x1=A.relative?v-l:2*v-l,A.y1=A.relative?y-o:2*y-o),A.type&Sr.CURVE_TO?(l=A.relative?v+A.x2:A.x2,o=A.relative?y+A.y2:A.y2):(l=NaN,o=NaN),A.type&Sr.SMOOTH_QUAD_TO&&(A.type=Sr.QUAD_TO,d=isNaN(d)?v:d,p=isNaN(p)?y:p,A.x1=A.relative?v-d:2*v-d,A.y1=A.relative?y-p:2*y-p),A.type&Sr.QUAD_TO?(d=A.relative?v+A.x1:A.x1,p=A.relative?y+A.y1:A.y1):(d=NaN,p=NaN),A})}function r(){var l=NaN,o=NaN;return i(function(d,p,A){if(d.type&Sr.SMOOTH_QUAD_TO&&(d.type=Sr.QUAD_TO,l=isNaN(l)?p:l,o=isNaN(o)?A:o,d.x1=d.relative?p-l:2*p-l,d.y1=d.relative?A-o:2*A-o),d.type&Sr.QUAD_TO){l=d.relative?p+d.x1:d.x1,o=d.relative?A+d.y1:d.y1;var v=d.x1,y=d.y1;d.type=Sr.CURVE_TO,d.x1=((d.relative?0:p)+2*v)/3,d.y1=((d.relative?0:A)+2*y)/3,d.x2=(d.x+2*v)/3,d.y2=(d.y+2*y)/3}else l=NaN,o=NaN;return d})}function i(l){var o=0,d=0,p=NaN,A=NaN;return function(v){if(isNaN(p)&&!(v.type&Sr.MOVE_TO))throw new Error("path must start with moveto");var y=l(v,o,d,p,A);return v.type&Sr.CLOSE_PATH&&(o=p,d=A),v.x!==void 0&&(o=v.relative?o+v.x:v.x),v.y!==void 0&&(d=v.relative?d+v.y:v.y),v.type&Sr.MOVE_TO&&(p=o,A=d),y}}function s(l,o,d,p,A,v){return xA(l,o,d,p,A,v),i(function(y,C,x,M){var I=y.x1,P=y.x2,F=y.relative&&!isNaN(M),D=y.x!==void 0?y.x:F?0:C,V=y.y!==void 0?y.y:F?0:x;function H(ae){return ae*ae}y.type&Sr.HORIZ_LINE_TO&&o!==0&&(y.type=Sr.LINE_TO,y.y=y.relative?0:x),y.type&Sr.VERT_LINE_TO&&d!==0&&(y.type=Sr.LINE_TO,y.x=y.relative?0:C),y.x!==void 0&&(y.x=y.x*l+V*d+(F?0:A)),y.y!==void 0&&(y.y=D*o+y.y*p+(F?0:v)),y.x1!==void 0&&(y.x1=y.x1*l+y.y1*d+(F?0:A)),y.y1!==void 0&&(y.y1=I*o+y.y1*p+(F?0:v)),y.x2!==void 0&&(y.x2=y.x2*l+y.y2*d+(F?0:A)),y.y2!==void 0&&(y.y2=P*o+y.y2*p+(F?0:v));var Q=l*p-o*d;if(y.xRot!==void 0&&(l!==1||o!==0||d!==0||p!==1))if(Q===0)delete y.rX,delete y.rY,delete y.xRot,delete y.lArcFlag,delete y.sweepFlag,y.type=Sr.LINE_TO;else{var G=y.xRot*Math.PI/180,W=Math.sin(G),te=Math.cos(G),q=1/H(y.rX),Y=1/H(y.rY),ee=H(te)*q+H(W)*Y,ce=2*W*te*(q-Y),se=H(W)*q+H(te)*Y,le=ee*p*p-ce*o*p+se*o*o,ie=ce*(l*p+o*d)-2*(ee*d*p+se*l*o),pe=ee*d*d-ce*l*d+se*l*l,ue=(Math.atan2(ie,le-pe)+Math.PI)%Math.PI/2,me=Math.sin(ue),Le=Math.cos(ue);y.rX=Math.abs(Q)/Math.sqrt(le*H(Le)+ie*me*Le+pe*H(me)),y.rY=Math.abs(Q)/Math.sqrt(le*H(me)-ie*me*Le+pe*H(Le)),y.xRot=180*ue/Math.PI}return y.sweepFlag!==void 0&&0>Q&&(y.sweepFlag=+!y.sweepFlag),y})}function a(){return function(l){var o={};for(var d in l)o[d]=l[d];return o}}t.ROUND=function(l){function o(d){return Math.round(d*l)/l}return l===void 0&&(l=1e13),xA(l),function(d){return d.x1!==void 0&&(d.x1=o(d.x1)),d.y1!==void 0&&(d.y1=o(d.y1)),d.x2!==void 0&&(d.x2=o(d.x2)),d.y2!==void 0&&(d.y2=o(d.y2)),d.x!==void 0&&(d.x=o(d.x)),d.y!==void 0&&(d.y=o(d.y)),d.rX!==void 0&&(d.rX=o(d.rX)),d.rY!==void 0&&(d.rY=o(d.rY)),d}},t.TO_ABS=e,t.TO_REL=function(){return i(function(l,o,d){return l.relative||(l.x1!==void 0&&(l.x1-=o),l.y1!==void 0&&(l.y1-=d),l.x2!==void 0&&(l.x2-=o),l.y2!==void 0&&(l.y2-=d),l.x!==void 0&&(l.x-=o),l.y!==void 0&&(l.y-=d),l.relative=!0),l})},t.NORMALIZE_HVZ=function(l,o,d){return l===void 0&&(l=!0),o===void 0&&(o=!0),d===void 0&&(d=!0),i(function(p,A,v,y,C){if(isNaN(y)&&!(p.type&Sr.MOVE_TO))throw new Error("path must start with moveto");return o&&p.type&Sr.HORIZ_LINE_TO&&(p.type=Sr.LINE_TO,p.y=p.relative?0:v),d&&p.type&Sr.VERT_LINE_TO&&(p.type=Sr.LINE_TO,p.x=p.relative?0:A),l&&p.type&Sr.CLOSE_PATH&&(p.type=Sr.LINE_TO,p.x=p.relative?y-A:y,p.y=p.relative?C-v:C),p.type&Sr.ARC&&(p.rX===0||p.rY===0)&&(p.type=Sr.LINE_TO,delete p.rX,delete p.rY,delete p.xRot,delete p.lArcFlag,delete p.sweepFlag),p})},t.NORMALIZE_ST=n,t.QT_TO_C=r,t.INFO=i,t.SANITIZE=function(l){l===void 0&&(l=0),xA(l);var o=NaN,d=NaN,p=NaN,A=NaN;return i(function(v,y,C,x,M){var I=Math.abs,P=!1,F=0,D=0;if(v.type&Sr.SMOOTH_CURVE_TO&&(F=isNaN(o)?0:y-o,D=isNaN(d)?0:C-d),v.type&(Sr.CURVE_TO|Sr.SMOOTH_CURVE_TO)?(o=v.relative?y+v.x2:v.x2,d=v.relative?C+v.y2:v.y2):(o=NaN,d=NaN),v.type&Sr.SMOOTH_QUAD_TO?(p=isNaN(p)?y:2*y-p,A=isNaN(A)?C:2*C-A):v.type&Sr.QUAD_TO?(p=v.relative?y+v.x1:v.x1,A=v.relative?C+v.y1:v.y2):(p=NaN,A=NaN),v.type&Sr.LINE_COMMANDS||v.type&Sr.ARC&&(v.rX===0||v.rY===0||!v.lArcFlag)||v.type&Sr.CURVE_TO||v.type&Sr.SMOOTH_CURVE_TO||v.type&Sr.QUAD_TO||v.type&Sr.SMOOTH_QUAD_TO){var V=v.x===void 0?0:v.relative?v.x:v.x-y,H=v.y===void 0?0:v.relative?v.y:v.y-C;F=isNaN(p)?v.x1===void 0?F:v.relative?v.x:v.x1-y:p-y,D=isNaN(A)?v.y1===void 0?D:v.relative?v.y:v.y1-C:A-C;var Q=v.x2===void 0?0:v.relative?v.x:v.x2-y,G=v.y2===void 0?0:v.relative?v.y:v.y2-C;I(V)<=l&&I(H)<=l&&I(F)<=l&&I(D)<=l&&I(Q)<=l&&I(G)<=l&&(P=!0)}return v.type&Sr.CLOSE_PATH&&I(y-x)<=l&&I(C-M)<=l&&(P=!0),P?[]:v})},t.MATRIX=s,t.ROTATE=function(l,o,d){o===void 0&&(o=0),d===void 0&&(d=0),xA(l,o,d);var p=Math.sin(l),A=Math.cos(l);return s(A,p,-p,A,o-o*A+d*p,d-o*p-d*A)},t.TRANSLATE=function(l,o){return o===void 0&&(o=0),xA(l,o),s(1,0,0,1,l,o)},t.SCALE=function(l,o){return o===void 0&&(o=l),xA(l,o),s(l,0,0,o,0,0)},t.SKEW_X=function(l){return xA(l),s(1,0,Math.atan(l),1,0,0)},t.SKEW_Y=function(l){return xA(l),s(1,Math.atan(l),0,1,0,0)},t.X_AXIS_SYMMETRY=function(l){return l===void 0&&(l=0),xA(l),s(-1,0,0,1,l,0)},t.Y_AXIS_SYMMETRY=function(l){return l===void 0&&(l=0),xA(l),s(1,0,0,-1,0,l)},t.A_TO_C=function(){return i(function(l,o,d){return Sr.ARC===l.type?function(p,A,v){var y,C,x,M;p.cX||MU(p,A,v);for(var I=Math.min(p.phi1,p.phi2),P=Math.max(p.phi1,p.phi2)-I,F=Math.ceil(P/90),D=new Array(F),V=A,H=v,Q=0;Q<F;Q++){var G=mse(p.phi1,p.phi2,Q/F),W=mse(p.phi1,p.phi2,(Q+1)/F),te=W-G,q=4/3*Math.tan(te*vv/4),Y=[Math.cos(G*vv)-q*Math.sin(G*vv),Math.sin(G*vv)+q*Math.cos(G*vv)],ee=Y[0],ce=Y[1],se=[Math.cos(W*vv),Math.sin(W*vv)],le=se[0],ie=se[1],pe=[le+q*Math.sin(W*vv),ie-q*Math.cos(W*vv)],ue=pe[0],me=pe[1];D[Q]={relative:p.relative,type:Sr.CURVE_TO};var Le=function(ae,be){var _e=h$([ae*p.rX,be*p.rY],p.xRot),$e=_e[0],Re=_e[1];return[p.cX+$e,p.cY+Re]};y=Le(ee,ce),D[Q].x1=y[0],D[Q].y1=y[1],C=Le(ue,me),D[Q].x2=C[0],D[Q].y2=C[1],x=Le(le,ie),D[Q].x=x[0],D[Q].y=x[1],p.relative&&(D[Q].x1-=V,D[Q].y1-=H,D[Q].x2-=V,D[Q].y2-=H,D[Q].x-=V,D[Q].y-=H),V=(M=[D[Q].x,D[Q].y])[0],H=M[1]}return D}(l,l.relative?0:o,l.relative?0:d):l})},t.ANNOTATE_ARCS=function(){return i(function(l,o,d){return l.relative&&(o=0,d=0),Sr.ARC===l.type&&MU(l,o,d),l})},t.CLONE=a,t.CALCULATE_BOUNDS=function(){var l=function(v){var y={};for(var C in v)y[C]=v[C];return y},o=e(),d=r(),p=n(),A=i(function(v,y,C){var x=p(d(o(l(v))));function M(me){me>A.maxX&&(A.maxX=me),me<A.minX&&(A.minX=me)}function I(me){me>A.maxY&&(A.maxY=me),me<A.minY&&(A.minY=me)}if(x.type&Sr.DRAWING_COMMANDS&&(M(y),I(C)),x.type&Sr.HORIZ_LINE_TO&&M(x.x),x.type&Sr.VERT_LINE_TO&&I(x.y),x.type&Sr.LINE_TO&&(M(x.x),I(x.y)),x.type&Sr.CURVE_TO){M(x.x),I(x.y);for(var P=0,F=yse(y,x.x1,x.x2,x.x);P<F.length;P++)0<(ue=F[P])&&1>ue&&M(_se(y,x.x1,x.x2,x.x,ue));for(var D=0,V=yse(C,x.y1,x.y2,x.y);D<V.length;D++)0<(ue=V[D])&&1>ue&&I(_se(C,x.y1,x.y2,x.y,ue))}if(x.type&Sr.ARC){M(x.x),I(x.y),MU(x,y,C);for(var H=x.xRot/180*Math.PI,Q=Math.cos(H)*x.rX,G=Math.sin(H)*x.rX,W=-Math.sin(H)*x.rY,te=Math.cos(H)*x.rY,q=x.phi1<x.phi2?[x.phi1,x.phi2]:-180>x.phi2?[x.phi2+360,x.phi1+360]:[x.phi2,x.phi1],Y=q[0],ee=q[1],ce=function(me){var Le=me[0],ae=me[1],be=180*Math.atan2(ae,Le)/Math.PI;return be<Y?be+360:be},se=0,le=gse(W,-Q,0).map(ce);se<le.length;se++)(ue=le[se])>Y&&ue<ee&&M(vse(x.cX,Q,W,ue));for(var ie=0,pe=gse(te,-G,0).map(ce);ie<pe.length;ie++){var ue;(ue=pe[ie])>Y&&ue<ee&&I(vse(x.cY,G,te,ue))}}return v});return A.minX=1/0,A.maxX=-1/0,A.minY=1/0,A.maxY=-1/0,A}})(Pc||(Pc={}));var yA,N0e=function(){function t(){}return t.prototype.round=function(e){return this.transform(Pc.ROUND(e))},t.prototype.toAbs=function(){return this.transform(Pc.TO_ABS())},t.prototype.toRel=function(){return this.transform(Pc.TO_REL())},t.prototype.normalizeHVZ=function(e,n,r){return this.transform(Pc.NORMALIZE_HVZ(e,n,r))},t.prototype.normalizeST=function(){return this.transform(Pc.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(Pc.QT_TO_C())},t.prototype.aToC=function(){return this.transform(Pc.A_TO_C())},t.prototype.sanitize=function(e){return this.transform(Pc.SANITIZE(e))},t.prototype.translate=function(e,n){return this.transform(Pc.TRANSLATE(e,n))},t.prototype.scale=function(e,n){return this.transform(Pc.SCALE(e,n))},t.prototype.rotate=function(e,n,r){return this.transform(Pc.ROTATE(e,n,r))},t.prototype.matrix=function(e,n,r,i,s,a){return this.transform(Pc.MATRIX(e,n,r,i,s,a))},t.prototype.skewX=function(e){return this.transform(Pc.SKEW_X(e))},t.prototype.skewY=function(e){return this.transform(Pc.SKEW_Y(e))},t.prototype.xSymmetry=function(e){return this.transform(Pc.X_AXIS_SYMMETRY(e))},t.prototype.ySymmetry=function(e){return this.transform(Pc.Y_AXIS_SYMMETRY(e))},t.prototype.annotateArcs=function(){return this.transform(Pc.ANNOTATE_ARCS())},t}(),$5t=function(t){return t===" "||t==="	"||t==="\r"||t===`
`},bse=function(t){return 48<=t.charCodeAt(0)&&t.charCodeAt(0)<=57},V5t=function(t){function e(){var n=t.call(this)||this;return n.curNumber="",n.curCommandType=-1,n.curCommandRelative=!1,n.canParseCommandOrComma=!0,n.curNumberHasExp=!1,n.curNumberHasExpDigits=!1,n.curNumberHasDecimal=!1,n.curArgs=[],n}return O0e(e,t),e.prototype.finish=function(n){if(n===void 0&&(n=[]),this.parse(" ",n),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return n},e.prototype.parse=function(n,r){var i=this;r===void 0&&(r=[]);for(var s=function(A){r.push(A),i.curArgs.length=0,i.canParseCommandOrComma=!0},a=0;a<n.length;a++){var l=n[a],o=!(this.curCommandType!==Sr.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),d=bse(l)&&(this.curNumber==="0"&&l==="0"||o);if(!bse(l)||d)if(l!=="e"&&l!=="E")if(l!=="-"&&l!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(l!=="."||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&this.curCommandType!==-1){var p=Number(this.curNumber);if(isNaN(p))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===Sr.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>p)throw new SyntaxError('Expected positive number, got "'+p+'" at index "'+a+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"')}this.curArgs.push(p),this.curArgs.length===H5t[this.curCommandType]&&(Sr.HORIZ_LINE_TO===this.curCommandType?s({type:Sr.HORIZ_LINE_TO,relative:this.curCommandRelative,x:p}):Sr.VERT_LINE_TO===this.curCommandType?s({type:Sr.VERT_LINE_TO,relative:this.curCommandRelative,y:p}):this.curCommandType===Sr.MOVE_TO||this.curCommandType===Sr.LINE_TO||this.curCommandType===Sr.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Sr.MOVE_TO===this.curCommandType&&(this.curCommandType=Sr.LINE_TO)):this.curCommandType===Sr.CURVE_TO?s({type:Sr.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Sr.SMOOTH_CURVE_TO?s({type:Sr.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Sr.QUAD_TO?s({type:Sr.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Sr.ARC&&s({type:Sr.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!$5t(l))if(l===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(l!=="+"&&l!=="-"&&l!==".")if(d)this.curNumber=l,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+l+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,l!=="z"&&l!=="Z")if(l==="h"||l==="H")this.curCommandType=Sr.HORIZ_LINE_TO,this.curCommandRelative=l==="h";else if(l==="v"||l==="V")this.curCommandType=Sr.VERT_LINE_TO,this.curCommandRelative=l==="v";else if(l==="m"||l==="M")this.curCommandType=Sr.MOVE_TO,this.curCommandRelative=l==="m";else if(l==="l"||l==="L")this.curCommandType=Sr.LINE_TO,this.curCommandRelative=l==="l";else if(l==="c"||l==="C")this.curCommandType=Sr.CURVE_TO,this.curCommandRelative=l==="c";else if(l==="s"||l==="S")this.curCommandType=Sr.SMOOTH_CURVE_TO,this.curCommandRelative=l==="s";else if(l==="q"||l==="Q")this.curCommandType=Sr.QUAD_TO,this.curCommandRelative=l==="q";else if(l==="t"||l==="T")this.curCommandType=Sr.SMOOTH_QUAD_TO,this.curCommandRelative=l==="t";else{if(l!=="a"&&l!=="A")throw new SyntaxError('Unexpected character "'+l+'" at index '+a+".");this.curCommandType=Sr.ARC,this.curCommandRelative=l==="a"}else r.push({type:Sr.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=l,this.curNumberHasDecimal=l==="."}else this.curNumber+=l,this.curNumberHasDecimal=!0;else this.curNumber+=l;else this.curNumber+=l,this.curNumberHasExp=!0;else this.curNumber+=l,this.curNumberHasExpDigits=this.curNumberHasExp}return r},e.prototype.transform=function(n){return Object.create(this,{parse:{value:function(r,i){i===void 0&&(i=[]);for(var s=0,a=Object.getPrototypeOf(this).parse.call(this,r);s<a.length;s++){var l=a[s],o=n(l);Array.isArray(o)?i.push.apply(i,o):i.push(o)}return i}}})},e}(N0e),Sr=function(t){function e(n){var r=t.call(this)||this;return r.commands=typeof n=="string"?e.parse(n):n,r}return O0e(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var n=Pc.CALCULATE_BOUNDS();return this.transform(n),n},e.prototype.transform=function(n){for(var r=[],i=0,s=this.commands;i<s.length;i++){var a=n(s[i]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return this.commands=r,this},e.encode=function(n){return z5t(n)},e.parse=function(n){var r=new V5t,i=[];return r.parse(n,i),r.finish(i),i},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(N0e),H5t=((yA={})[Sr.MOVE_TO]=2,yA[Sr.LINE_TO]=2,yA[Sr.HORIZ_LINE_TO]=1,yA[Sr.VERT_LINE_TO]=1,yA[Sr.CLOSE_PATH]=0,yA[Sr.QUAD_TO]=4,yA[Sr.SMOOTH_QUAD_TO]=2,yA[Sr.CURVE_TO]=6,yA[Sr.SMOOTH_CURVE_TO]=4,yA[Sr.ARC]=7,yA),G5t=Wu,Q5t=JA,j5t=FN,K5t=d0e,wse=RegExp.prototype,W5t=function(t){var e=t.flags;return e===void 0&&!("flags"in wse)&&!Q5t(t,"flags")&&j5t(wse,t)?G5t(K5t,t):e},q5t=UN.PROPER,Y5t=lw,X5t=wh,xse=xm,Z5t=mc,J5t=W5t,WQ="toString",k0e=RegExp.prototype,D0e=k0e[WQ],e2t=Z5t(function(){return D0e.call({source:"a",flags:"b"})!=="/a/b"}),t2t=q5t&&D0e.name!==WQ;(e2t||t2t)&&Y5t(k0e,WQ,function(){var e=X5t(this),n=xse(e.source),r=xse(J5t(e));return"/"+n+"/"+r},{unsafe:!0});function QF(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?QF=function(e){return typeof e}:QF=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QF(t)}function n2t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r2t=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i2t=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s2t(t,e,n,r,i){if(typeof t=="string"&&(t=document.getElementById(t)),!t||QF(t)!=="object"||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=t.getContext("2d");try{return s.getImageData(e,n,r,i)}catch(a){throw new Error("unable to access image data: "+a)}}function o2t(t,e,n,r,i,s){if(!(isNaN(s)||s<1)){s|=0;var a=s2t(t,e,n,r,i);a=a2t(a,e,n,r,i,s),t.getContext("2d").putImageData(a,e,n)}}function a2t(t,e,n,r,i,s){for(var a=t.data,l=2*s+1,o=r-1,d=i-1,p=s+1,A=p*(p+1)/2,v=new Cse,y=v,C,x=1;x<l;x++)y=y.next=new Cse,x===p&&(C=y);y.next=v;for(var M=null,I=null,P=0,F=0,D=r2t[s],V=i2t[s],H=0;H<i;H++){y=v;for(var Q=a[F],G=a[F+1],W=a[F+2],te=a[F+3],q=0;q<p;q++)y.r=Q,y.g=G,y.b=W,y.a=te,y=y.next;for(var Y=0,ee=0,ce=0,se=0,le=p*Q,ie=p*G,pe=p*W,ue=p*te,me=A*Q,Le=A*G,ae=A*W,be=A*te,_e=1;_e<p;_e++){var $e=F+((o<_e?o:_e)<<2),Re=a[$e],Ie=a[$e+1],Ne=a[$e+2],Je=a[$e+3],je=p-_e;me+=(y.r=Re)*je,Le+=(y.g=Ie)*je,ae+=(y.b=Ne)*je,be+=(y.a=Je)*je,Y+=Re,ee+=Ie,ce+=Ne,se+=Je,y=y.next}M=v,I=C;for(var ft=0;ft<r;ft++){var Et=be*D>>>V;if(a[F+3]=Et,Et!==0){var ke=255/Et;a[F]=(me*D>>>V)*ke,a[F+1]=(Le*D>>>V)*ke,a[F+2]=(ae*D>>>V)*ke}else a[F]=a[F+1]=a[F+2]=0;me-=le,Le-=ie,ae-=pe,be-=ue,le-=M.r,ie-=M.g,pe-=M.b,ue-=M.a;var Ye=ft+s+1;Ye=P+(Ye<o?Ye:o)<<2,Y+=M.r=a[Ye],ee+=M.g=a[Ye+1],ce+=M.b=a[Ye+2],se+=M.a=a[Ye+3],me+=Y,Le+=ee,ae+=ce,be+=se,M=M.next;var at=I,He=at.r,Tt=at.g,Ut=at.b,Rt=at.a;le+=He,ie+=Tt,pe+=Ut,ue+=Rt,Y-=He,ee-=Tt,ce-=Ut,se-=Rt,I=I.next,F+=4}P+=r}for(var Bt=0;Bt<r;Bt++){F=Bt<<2;var Ht=a[F],xt=a[F+1],Zt=a[F+2],un=a[F+3],Ft=p*Ht,mt=p*xt,Be=p*Zt,ze=p*un,it=A*Ht,bt=A*xt,Qe=A*Zt,St=A*un;y=v;for(var yt=0;yt<p;yt++)y.r=Ht,y.g=xt,y.b=Zt,y.a=un,y=y.next;for(var Xe=r,_t=0,Gt=0,gt=0,hn=0,rr=1;rr<=s;rr++){F=Xe+Bt<<2;var br=p-rr;it+=(y.r=Ht=a[F])*br,bt+=(y.g=xt=a[F+1])*br,Qe+=(y.b=Zt=a[F+2])*br,St+=(y.a=un=a[F+3])*br,hn+=Ht,_t+=xt,Gt+=Zt,gt+=un,y=y.next,rr<d&&(Xe+=r)}F=Bt,M=v,I=C;for(var Qr=0;Qr<i;Qr++){var hr=F<<2;a[hr+3]=un=St*D>>>V,un>0?(un=255/un,a[hr]=(it*D>>>V)*un,a[hr+1]=(bt*D>>>V)*un,a[hr+2]=(Qe*D>>>V)*un):a[hr]=a[hr+1]=a[hr+2]=0,it-=Ft,bt-=mt,Qe-=Be,St-=ze,Ft-=M.r,mt-=M.g,Be-=M.b,ze-=M.a,hr=Bt+((hr=Qr+p)<d?hr:d)*r<<2,it+=hn+=M.r=a[hr],bt+=_t+=M.g=a[hr+1],Qe+=Gt+=M.b=a[hr+2],St+=gt+=M.a=a[hr+3],M=M.next,Ft+=Ht=I.r,mt+=xt=I.g,Be+=Zt=I.b,ze+=un=I.a,hn-=Ht,_t-=xt,Gt-=Zt,gt-=un,I=I.next,F+=r}}return t}var Cse=function t(){n2t(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function l2t(){var{DOMParser:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,createCanvas(n,r){return new OffscreenCanvas(n,r)},createImage(n){return r0(function*(){var r=yield fetch(n),i=yield r.blob(),s=yield createImageBitmap(i);return s})()}};return(typeof DOMParser<"u"||typeof t>"u")&&Reflect.deleteProperty(e,"DOMParser"),e}function c2t(t){var{DOMParser:e,canvas:n,fetch:r}=t;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:r,createCanvas:n.createCanvas,createImage:n.loadImage}}var u2t=Object.freeze({__proto__:null,offscreen:l2t,node:c2t});function cw(t){return t.replace(/(?!\u3000)\s+/gm," ")}function U0e(t){return t.replace(/^[\n \t]+/,"")}function z0e(t){return t.replace(/[\n \t]+$/,"")}function Md(t){var e=(t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}var h2t=/^[A-Z-]+$/;function $0e(t){return h2t.test(t)?t.toLowerCase():t}function qQ(t){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t)||[];return e[2]||e[3]||e[4]}function V0e(t){if(!t.startsWith("rgb"))return t;var e=3,n=t.replace(/\d+(\.\d+)?/g,(r,i)=>e--&&i?String(Math.round(parseFloat(r))):r);return n}var d2t=/(\[[^\]]+\])/g,f2t=/(#[^\s+>~.[:]+)/g,p2t=/(\.[^\s+>~.[:]+)/g,A2t=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,g2t=/(:[\w-]+\([^)]*\))/gi,m2t=/(:[^\s+>~.[:]+)/g,v2t=/([^\s+>~.[:]+)/g;function E1(t,e){var n=e.exec(t);return n?[t.replace(e," "),n.length]:[t,0]}function H0e(t){var e=[0,0,0],n=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0;return[n,r]=E1(n,d2t),e[1]+=r,[n,r]=E1(n,f2t),e[0]+=r,[n,r]=E1(n,p2t),e[1]+=r,[n,r]=E1(n,A2t),e[2]+=r,[n,r]=E1(n,g2t),e[1]+=r,[n,r]=E1(n,m2t),e[1]+=r,n=n.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[n,r]=E1(n,v2t),e[2]+=r,e.join("")}var gb=1e-8;function d$(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function N5(t,e){return(t[0]*e[0]+t[1]*e[1])/(d$(t)*d$(e))}function f$(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(N5(t,e))}function p$(t){return t*t*t}function A$(t){return 3*t*t*(1-t)}function g$(t){return 3*t*(1-t)*(1-t)}function m$(t){return(1-t)*(1-t)*(1-t)}function v$(t){return t*t}function y$(t){return 2*t*(1-t)}function _$(t){return(1-t)*(1-t)}class Ji{constructor(e,n,r){this.document=e,this.name=n,this.value=r,this.isNormalizedColor=!1}static empty(e){return new Ji(e,"EMPTY","")}split(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:n,name:r}=this;return cw(this.getString()).trim().split(e).map(i=>new Ji(n,r,i))}hasValue(e){var{value:n}=this;return n!==null&&n!==""&&(e||n!==0)&&typeof n<"u"}isString(e){var{value:n}=this,r=typeof n=="string";return!r||!e?r:e.test(n)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>"u"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>"u"?0:parseFloat(e);var{value:n}=this,r=parseFloat(n);return this.isString(/%$/)&&(r/=100),r}getString(e){return typeof e>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(e)}getColor(e){var n=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,n=V0e(n),this.value=n),n}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[r,i]=typeof e=="boolean"?[void 0,e]:[e],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&i):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(r);default:{var a=this.getNumber();return n&&a<1?a*s.computeSize(r):a}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),n=/#([^)'"]+)/.exec(e);return n&&(n=n[1]),n||(n=e),this.document.definitions[n]}getFillStyleDefinition(e,n){var r=this.getDefinition();if(!r)return null;if(typeof r.createGradient=="function")return r.createGradient(this.document.ctx,e,n);if(typeof r.createPattern=="function"){if(r.getHrefAttribute().hasValue()){var i=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),i.hasValue()&&r.getAttribute("patternTransform",!0).setValue(i.value)}return r.createPattern(this.document.ctx,e,n)}return null}getTextBaseline(){return this.hasValue()?Ji.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var n=this.getColor(),r=n.length,i=0,s=0;s<r&&(n[s]===","&&i++,i!==3);s++);if(e.hasValue()&&this.isString()&&i!==3){var a=new c$(n);a.ok&&(a.alpha=e.getNumber(),n=a.toRGBA())}return new Ji(this.document,this.name,n)}}Ji.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class G0e{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,n){this.viewPorts.push({width:e,height:n})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e=="number"?e:e==="x"?this.width:e==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class Vl{constructor(e,n){this.x=e,this.y=n}static parse(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[r=n,i=n]=Md(e);return new Vl(r,i)}static parseScale(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[r=n,i=r]=Md(e);return new Vl(r,i)}static parsePath(e){for(var n=Md(e),r=n.length,i=[],s=0;s<r;s+=2)i.push(new Vl(n[s],n[s+1]));return i}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:n,y:r}=this,i=n*e[0]+r*e[2]+e[4],s=n*e[1]+r*e[3]+e[5];this.x=i,this.y=s}}class Q0e{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:n,onMouseMove:r}=this,i=e.ctx.canvas;i.onclick=n,i.onmousemove=r,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:n,eventElements:r}=this,{style:i}=e.ctx.canvas;i&&(i.cursor=""),n.forEach((s,a)=>{for(var{run:l}=s,o=r[a];o;)l(o),o=o.parent}),this.events=[],this.eventElements=[]}}checkPath(e,n){if(!(!this.working||!n)){var{events:r,eventElements:i}=this;r.forEach((s,a)=>{var{x:l,y:o}=s;!i[a]&&n.isPointInPath&&n.isPointInPath(l,o)&&(i[a]=e)})}}checkBoundingBox(e,n){if(!(!this.working||!n)){var{events:r,eventElements:i}=this;r.forEach((s,a)=>{var{x:l,y:o}=s;!i[a]&&n.isPointInBox(l,o)&&(i[a]=e)})}}mapXY(e,n){for(var{window:r,ctx:i}=this.screen,s=new Vl(e,n),a=i.canvas;a;)s.x-=a.offsetLeft,s.y-=a.offsetTop,a=a.offsetParent;return r.scrollX&&(s.x+=r.scrollX),r.scrollY&&(s.y+=r.scrollY),s}onClick(e){var{x:n,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:n,y:r,run(i){i.onClick&&i.onClick()}})}onMouseMove(e){var{x:n,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:n,y:r,run(i){i.onMouseMove&&i.onMouseMove()}})}}var j0e=typeof window<"u"?window:null,K0e=typeof fetch<"u"?fetch.bind(void 0):null;class NM{constructor(e){var{fetch:n=K0e,window:r=j0e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new G0e,this.mouse=new Q0e(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,this.fetch=n}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every(n=>n());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){var{document:n,ctx:r,aspectRatio:i,width:s,desiredWidth:a,height:l,desiredHeight:o,minX:d=0,minY:p=0,refX:A,refY:v,clip:y=!1,clipX:C=0,clipY:x=0}=e,M=cw(i).replace(/^defer\s/,""),[I,P]=M.split(" "),F=I||"xMidYMid",D=P||"meet",V=s/a,H=l/o,Q=Math.min(V,H),G=Math.max(V,H),W=a,te=o;D==="meet"&&(W*=Q,te*=Q),D==="slice"&&(W*=G,te*=G);var q=new Ji(n,"refX",A),Y=new Ji(n,"refY",v),ee=q.hasValue()&&Y.hasValue();if(ee&&r.translate(-Q*q.getPixels("x"),-Q*Y.getPixels("y")),y){var ce=Q*C,se=Q*x;r.beginPath(),r.moveTo(ce,se),r.lineTo(s,se),r.lineTo(s,l),r.lineTo(ce,l),r.closePath(),r.clip()}if(!ee){var le=D==="meet"&&Q===H,ie=D==="slice"&&G===H,pe=D==="meet"&&Q===V,ue=D==="slice"&&G===V;F.startsWith("xMid")&&(le||ie)&&r.translate(s/2-W/2,0),F.endsWith("YMid")&&(pe||ue)&&r.translate(0,l/2-te/2),F.startsWith("xMax")&&(le||ie)&&r.translate(s-W,0),F.endsWith("YMax")&&(pe||ue)&&r.translate(0,l-te)}switch(!0){case F==="none":r.scale(V,H);break;case D==="meet":r.scale(Q,Q);break;case D==="slice":r.scale(G,G);break}r.translate(-d,-p)}start(e){var{enableRedraw:n=!1,ignoreMouse:r=!1,ignoreAnimation:i=!1,ignoreDimensions:s=!1,ignoreClear:a=!1,forceRedraw:l,scaleWidth:o,scaleHeight:d,offsetX:p,offsetY:A}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:v,mouse:y}=this,C=1e3/v;if(this.frameDuration=C,this.readyPromise=new Promise(F=>{this.resolveReady=F}),this.isReady()&&this.render(e,s,a,o,d,p,A),!!n){var x=Date.now(),M=x,I=0,P=()=>{x=Date.now(),I=x-M,I>=C&&(M=x-I%C,this.shouldUpdate(i,l)&&(this.render(e,s,a,o,d,p,A),y.runEvents())),this.intervalId=IU(P)};r||y.start(),this.intervalId=IU(P)}}stop(){this.intervalId&&(IU.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,n){if(!e){var{frameDuration:r}=this,i=this.animations.reduce((s,a)=>a.update(r)||s,!1);if(i)return!0}return!!(typeof n=="function"&&n()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,n,r,i,s,a,l){var{CLIENT_WIDTH:o,CLIENT_HEIGHT:d,viewPort:p,ctx:A,isFirstRender:v}=this,y=A.canvas;p.clear(),y.width&&y.height?p.setCurrent(y.width,y.height):p.setCurrent(o,d);var C=e.getStyle("width"),x=e.getStyle("height");!n&&(v||typeof i!="number"&&typeof s!="number")&&(C.hasValue()&&(y.width=C.getPixels("x"),y.style&&(y.style.width="".concat(y.width,"px"))),x.hasValue()&&(y.height=x.getPixels("y"),y.style&&(y.style.height="".concat(y.height,"px"))));var M=y.clientWidth||y.width,I=y.clientHeight||y.height;if(n&&C.hasValue()&&x.hasValue()&&(M=C.getPixels("x"),I=x.getPixels("y")),p.setCurrent(M,I),typeof a=="number"&&e.getAttribute("x",!0).setValue(a),typeof l=="number"&&e.getAttribute("y",!0).setValue(l),typeof i=="number"||typeof s=="number"){var P=Md(e.getAttribute("viewBox").getString()),F=0,D=0;if(typeof i=="number"){var V=e.getStyle("width");V.hasValue()?F=V.getPixels("x")/i:isNaN(P[2])||(F=P[2]/i)}if(typeof s=="number"){var H=e.getStyle("height");H.hasValue()?D=H.getPixels("y")/s:isNaN(P[3])||(D=P[3]/s)}F||(F=D),D||(D=F),e.getAttribute("width",!0).setValue(i),e.getAttribute("height",!0).setValue(s);var Q=e.getStyle("transform",!0,!0);Q.setValue("".concat(Q.getString()," scale(").concat(1/F,", ").concat(1/D,")"))}r||A.clearRect(0,0,M,I),e.render(A),v&&(this.isFirstRender=!1)}}NM.defaultWindow=j0e;NM.defaultFetch=K0e;var{defaultFetch:y2t}=NM,_2t=typeof DOMParser<"u"?DOMParser:null;class jF{constructor(){var{fetch:e=y2t,DOMParser:n=_2t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=e,this.DOMParser=n}parse(e){var n=this;return r0(function*(){return e.startsWith("<")?n.parseFromString(e):n.load(e)})()}parseFromString(e){var n=new this.DOMParser;try{return this.checkDocument(n.parseFromString(e,"image/svg+xml"))}catch{return this.checkDocument(n.parseFromString(e,"text/xml"))}}checkDocument(e){var n=e.getElementsByTagName("parsererror")[0];if(n)throw new Error(n.textContent);return e}load(e){var n=this;return r0(function*(){var r=yield n.fetch(e),i=yield r.text();return n.parseFromString(i)})()}}class W0e{constructor(e,n){this.type="translate",this.point=null,this.point=Vl.parse(n)}apply(e){var{x:n,y:r}=this.point;e.translate(n||0,r||0)}unapply(e){var{x:n,y:r}=this.point;e.translate(-1*n||0,-1*r||0)}applyToPoint(e){var{x:n,y:r}=this.point;e.applyTransform([1,0,0,1,n||0,r||0])}}class q0e{constructor(e,n,r){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var i=Md(n);this.angle=new Ji(e,"angle",i[0]),this.originX=r[0],this.originY=r[1],this.cx=i[1]||0,this.cy=i[2]||0}apply(e){var{cx:n,cy:r,originX:i,originY:s,angle:a}=this,l=n+i.getPixels("x"),o=r+s.getPixels("y");e.translate(l,o),e.rotate(a.getRadians()),e.translate(-l,-o)}unapply(e){var{cx:n,cy:r,originX:i,originY:s,angle:a}=this,l=n+i.getPixels("x"),o=r+s.getPixels("y");e.translate(l,o),e.rotate(-1*a.getRadians()),e.translate(-l,-o)}applyToPoint(e){var{cx:n,cy:r,angle:i}=this,s=i.getRadians();e.applyTransform([1,0,0,1,n||0,r||0]),e.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),e.applyTransform([1,0,0,1,-n||0,-r||0])}}class Y0e{constructor(e,n,r){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var i=Vl.parseScale(n);(i.x===0||i.y===0)&&(i.x=gb,i.y=gb),this.scale=i,this.originX=r[0],this.originY=r[1]}apply(e){var{scale:{x:n,y:r},originX:i,originY:s}=this,a=i.getPixels("x"),l=s.getPixels("y");e.translate(a,l),e.scale(n,r||n),e.translate(-a,-l)}unapply(e){var{scale:{x:n,y:r},originX:i,originY:s}=this,a=i.getPixels("x"),l=s.getPixels("y");e.translate(a,l),e.scale(1/n,1/r||n),e.translate(-a,-l)}applyToPoint(e){var{x:n,y:r}=this.scale;e.applyTransform([n||0,0,0,r||0,0,0])}}class YQ{constructor(e,n,r){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=Md(n),this.originX=r[0],this.originY=r[1]}apply(e){var{originX:n,originY:r,matrix:i}=this,s=n.getPixels("x"),a=r.getPixels("y");e.translate(s,a),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.translate(-s,-a)}unapply(e){var{originX:n,originY:r,matrix:i}=this,s=i[0],a=i[2],l=i[4],o=i[1],d=i[3],p=i[5],A=0,v=0,y=1,C=1/(s*(d*y-p*v)-a*(o*y-p*A)+l*(o*v-d*A)),x=n.getPixels("x"),M=r.getPixels("y");e.translate(x,M),e.transform(C*(d*y-p*v),C*(p*A-o*y),C*(l*v-a*y),C*(s*y-l*A),C*(a*p-l*d),C*(l*o-s*p)),e.translate(-x,-M)}applyToPoint(e){e.applyTransform(this.matrix)}}class XQ extends YQ{constructor(e,n,r){super(e,n,r),this.type="skew",this.angle=null,this.angle=new Ji(e,"angle",n)}}class X0e extends XQ{constructor(e,n,r){super(e,n,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class Z0e extends XQ{constructor(e,n,r){super(e,n,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function b2t(t){return cw(t).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function w2t(t){var[e,n]=t.split("(");return[e.trim(),n.trim().replace(")","")]}class v_{constructor(e,n,r){this.document=e,this.transforms=[];var i=b2t(n);i.forEach(s=>{if(s!=="none"){var[a,l]=w2t(s),o=v_.transformTypes[a];typeof o<"u"&&this.transforms.push(new o(this.document,l,r))}})}static fromElement(e,n){var r=n.getStyle("transform",!1,!0),[i,s=i]=n.getStyle("transform-origin",!1,!0).split(),a=[i,s];return r.hasValue()?new v_(e,r.getString(),a):null}apply(e){for(var{transforms:n}=this,r=n.length,i=0;i<r;i++)n[i].apply(e)}unapply(e){for(var{transforms:n}=this,r=n.length,i=r-1;i>=0;i--)n[i].unapply(e)}applyToPoint(e){for(var{transforms:n}=this,r=n.length,i=0;i<r;i++)n[i].applyToPoint(e)}}v_.transformTypes={translate:W0e,rotate:q0e,scale:Y0e,matrix:YQ,skewX:X0e,skewY:Z0e};let Bl=class b${constructor(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=e,this.node=n,this.captureTextNodes=r,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!n||n.nodeType!==1)){if(Array.from(n.attributes).forEach(l=>{var o=$0e(l.nodeName);this.attributes[o]=new Ji(e,o,l.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var i=this.getAttribute("style").getString().split(";").map(l=>l.trim());i.forEach(l=>{if(l){var[o,d]=l.split(":").map(p=>p.trim());this.styles[o]=new Ji(e,o,d)}})}var{definitions:s}=e,a=this.getAttribute("id");a.hasValue()&&(s[a.getString()]||(s[a.getString()]=this)),Array.from(n.childNodes).forEach(l=>{if(l.nodeType===1)this.addChild(l);else if(r&&(l.nodeType===3||l.nodeType===4)){var o=e.createTextNode(l);o.getText().length>0&&this.addChild(o)}})}}getAttribute(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.attributes[e];if(!r&&n){var i=new Ji(this.document,e,"");return this.attributes[e]=i,i}return r||Ji.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if(e==="href"||e.endsWith(":href"))return this.attributes[e];return Ji.empty(this.document)}getStyle(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.styles[e];if(i)return i;var s=this.getAttribute(e);if(s!=null&&s.hasValue())return this.styles[e]=s,s;if(!r){var{parent:a}=this;if(a){var l=a.getStyle(e);if(l!=null&&l.hasValue())return l}}if(n){var o=new Ji(this.document,e,"");return this.styles[e]=o,o}return i||Ji.empty(this.document)}render(e){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(e.save(),this.getStyle("mask").hasValue()){var n=this.getStyle("mask").getDefinition();n&&(this.applyEffects(e),n.apply(e,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(e),r.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var n=v_.fromElement(this.document,this);n&&n.apply(e);var r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){var i=r.getDefinition();i&&i.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(n=>{n.render(e)})}addChild(e){var n=e instanceof b$?e:this.document.createElement(e);n.parent=this,b$.ignoreChildTypes.includes(n.type)||this.children.push(n)}matchesSelector(e){var n,{node:r}=this;if(typeof r.matches=="function")return r.matches(e);var i=(n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class");return!i||i===""?!1:i.split(" ").some(s=>".".concat(s)===e)}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:n}=this.document;for(var r in e)if(!r.startsWith("@")&&this.matchesSelector(r)){var i=e[r],s=n[r];if(i)for(var a in i){var l=this.stylesSpecificity[a];typeof l>"u"&&(l="000"),s>=l&&(this.styles[a]=i[a],this.stylesSpecificity[a]=s)}}}removeStyles(e,n){var r=n.reduce((i,s)=>{var a=e.getStyle(s);if(!a.hasValue())return i;var l=a.getString();return a.setValue(""),[...i,[s,l]]},[]);return r}restoreStyles(e,n){n.forEach(r=>{var[i,s]=r;e.getStyle(i,!0).setValue(s)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}};Bl.ignoreChildTypes=["title"];class J0e extends Bl{constructor(e,n,r){super(e,n,r)}}function x2t(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function C2t(t){return typeof process>"u"?t:t.trim().split(",").map(x2t).join(",")}function E2t(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function S2t(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class Ah{constructor(e,n,r,i,s,a){var l=a?typeof a=="string"?Ah.parse(a):a:{};this.fontFamily=s||l.fontFamily,this.fontSize=i||l.fontSize,this.fontStyle=e||l.fontStyle,this.fontWeight=r||l.fontWeight,this.fontVariant=n||l.fontVariant}static parse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r="",i="",s="",a="",l="",o=cw(e).trim().split(" "),d={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return o.forEach(p=>{switch(!0){case(!d.fontStyle&&Ah.styles.includes(p)):p!=="inherit"&&(r=p),d.fontStyle=!0;break;case(!d.fontVariant&&Ah.variants.includes(p)):p!=="inherit"&&(i=p),d.fontStyle=!0,d.fontVariant=!0;break;case(!d.fontWeight&&Ah.weights.includes(p)):p!=="inherit"&&(s=p),d.fontStyle=!0,d.fontVariant=!0,d.fontWeight=!0;break;case!d.fontSize:p!=="inherit"&&([a]=p.split("/")),d.fontStyle=!0,d.fontVariant=!0,d.fontWeight=!0,d.fontSize=!0;break;default:p!=="inherit"&&(l+=p)}}),new Ah(r,i,s,a,l,n)}toString(){return[E2t(this.fontStyle),this.fontVariant,S2t(this.fontWeight),this.fontSize,C2t(this.fontFamily)].join(" ").trim()}}Ah.styles="normal|italic|oblique|inherit";Ah.variants="normal|small-caps|inherit";Ah.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Lp{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=e,this.y1=n,this.x2=r,this.y2=i,this.addPoint(e,n),this.addPoint(r,i)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,n){typeof e<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof n<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=n,this.y2=n),n<this.y1&&(this.y1=n),n>this.y2&&(this.y2=n))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:n,y1:r,x2:i,y2:s}=e;this.addPoint(n,r),this.addPoint(i,s)}}sumCubic(e,n,r,i,s){return Math.pow(1-e,3)*n+3*Math.pow(1-e,2)*e*r+3*(1-e)*Math.pow(e,2)*i+Math.pow(e,3)*s}bezierCurveAdd(e,n,r,i,s){var a=6*n-12*r+6*i,l=-3*n+9*r-9*i+3*s,o=3*r-3*n;if(l===0){if(a===0)return;var d=-o/a;0<d&&d<1&&(e?this.addX(this.sumCubic(d,n,r,i,s)):this.addY(this.sumCubic(d,n,r,i,s)));return}var p=Math.pow(a,2)-4*o*l;if(!(p<0)){var A=(-a+Math.sqrt(p))/(2*l);0<A&&A<1&&(e?this.addX(this.sumCubic(A,n,r,i,s)):this.addY(this.sumCubic(A,n,r,i,s)));var v=(-a-Math.sqrt(p))/(2*l);0<v&&v<1&&(e?this.addX(this.sumCubic(v,n,r,i,s)):this.addY(this.sumCubic(v,n,r,i,s)))}}addBezierCurve(e,n,r,i,s,a,l,o){this.addPoint(e,n),this.addPoint(l,o),this.bezierCurveAdd(!0,e,r,s,l),this.bezierCurveAdd(!1,n,i,a,o)}addQuadraticCurve(e,n,r,i,s,a){var l=e+.6666666666666666*(r-e),o=n+2/3*(i-n),d=l+1/3*(s-e),p=o+1/3*(a-n);this.addBezierCurve(e,n,l,d,o,p,s,a)}isPointInBox(e,n){var{x1:r,y1:i,x2:s,y2:a}=this;return r<=e&&e<=s&&i<=n&&n<=a}}class eo extends Sr{constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Vl(0,0),this.control=new Vl(0,0),this.current=new Vl(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:n}=this;return e>=n.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",r=new Vl(this.command[e],this.command[n]);return this.makeAbsolute(r)}getAsControlPoint(e,n){var r=this.getPoint(e,n);return this.control=r,r}getAsCurrentPoint(e,n){var r=this.getPoint(e,n);return this.current=r,r}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==Sr.CURVE_TO&&e!==Sr.SMOOTH_CURVE_TO&&e!==Sr.QUAD_TO&&e!==Sr.SMOOTH_QUAD_TO)return this.current;var{current:{x:n,y:r},control:{x:i,y:s}}=this,a=new Vl(2*n-i,2*r-s);return a}makeAbsolute(e){if(this.command.relative){var{x:n,y:r}=this.current;e.x+=n,e.y+=r}return e}addMarker(e,n,r){var{points:i,angles:s}=this;r&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=i[i.length-1].angleTo(r)),this.addMarkerAngle(e,n?n.angleTo(e):null)}addMarkerAngle(e,n){this.points.push(e),this.angles.push(n)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,n=e.length,r=0;r<n;r++)if(!e[r]){for(var i=r+1;i<n;i++)if(e[i]){e[r]=e[i];break}}return e}}class O_ extends Bl{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,n=this;n;){var r=n.getStyle("opacity",!1,!0);r.hasValue(!0)&&(e*=r.getNumber()),n=n.parent}return e}setContext(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n){var r=this.getStyle("fill"),i=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),a=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){var l=r.getFillStyleDefinition(this,i);l&&(e.fillStyle=l)}else if(r.hasValue()){r.getString()==="currentColor"&&r.setValue(this.getStyle("color").getColor());var o=r.getColor();o!=="inherit"&&(e.fillStyle=o==="none"?"rgba(0,0,0,0)":o)}if(i.hasValue()){var d=new Ji(this.document,"fill",e.fillStyle).addOpacity(i).getColor();e.fillStyle=d}if(s.isUrlDefinition()){var p=s.getFillStyleDefinition(this,a);p&&(e.strokeStyle=p)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var A=s.getString();A!=="inherit"&&(e.strokeStyle=A==="none"?"rgba(0,0,0,0)":A)}if(a.hasValue()){var v=new Ji(this.document,"stroke",e.strokeStyle).addOpacity(a).getString();e.strokeStyle=v}var y=this.getStyle("stroke-width");if(y.hasValue()){var C=y.getPixels();e.lineWidth=C||gb}var x=this.getStyle("stroke-linecap"),M=this.getStyle("stroke-linejoin"),I=this.getStyle("stroke-miterlimit"),P=this.getStyle("stroke-dasharray"),F=this.getStyle("stroke-dashoffset");if(x.hasValue()&&(e.lineCap=x.getString()),M.hasValue()&&(e.lineJoin=M.getString()),I.hasValue()&&(e.miterLimit=I.getNumber()),P.hasValue()&&P.getString()!=="none"){var D=Md(P.getString());typeof e.setLineDash<"u"?e.setLineDash(D):typeof e.webkitLineDash<"u"?e.webkitLineDash=D:typeof e.mozDash<"u"&&!(D.length===1&&D[0]===0)&&(e.mozDash=D);var V=F.getPixels();typeof e.lineDashOffset<"u"?e.lineDashOffset=V:typeof e.webkitLineDashOffset<"u"?e.webkitLineDashOffset=V:typeof e.mozDashOffset<"u"&&(e.mozDashOffset=V)}}if(this.modifiedEmSizeStack=!1,typeof e.font<"u"){var H=this.getStyle("font"),Q=this.getStyle("font-style"),G=this.getStyle("font-variant"),W=this.getStyle("font-weight"),te=this.getStyle("font-size"),q=this.getStyle("font-family"),Y=new Ah(Q.getString(),G.getString(),W.getString(),te.hasValue()?"".concat(te.getPixels(!0),"px"):"",q.getString(),Ah.parse(H.getString(),e.font));Q.setValue(Y.fontStyle),G.setValue(Y.fontVariant),W.setValue(Y.fontWeight),te.setValue(Y.fontSize),q.setValue(Y.fontFamily),e.font=Y.toString(),te.isPixels()&&(this.document.emSize=te.getPixels(),this.modifiedEmSizeStack=!0)}n||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}}class ha extends O_{constructor(e,n,r){super(e,n,r),this.type="path",this.pathParser=null,this.pathParser=new eo(this.getAttribute("d").getString())}path(e){var{pathParser:n}=this,r=new Lp;for(n.reset(),e&&e.beginPath();!n.isEnd();)switch(n.next().type){case eo.MOVE_TO:this.pathM(e,r);break;case eo.LINE_TO:this.pathL(e,r);break;case eo.HORIZ_LINE_TO:this.pathH(e,r);break;case eo.VERT_LINE_TO:this.pathV(e,r);break;case eo.CURVE_TO:this.pathC(e,r);break;case eo.SMOOTH_CURVE_TO:this.pathS(e,r);break;case eo.QUAD_TO:this.pathQ(e,r);break;case eo.SMOOTH_QUAD_TO:this.pathT(e,r);break;case eo.ARC:this.pathA(e,r);break;case eo.CLOSE_PATH:this.pathZ(e,r);break}return r}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,n=e.getMarkerPoints(),r=e.getMarkerAngles(),i=n.map((s,a)=>[s,r[a]]);return i}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var n=this.getStyle("fill-rule");e.fillStyle!==""&&(n.getString("inherit")!=="inherit"?e.fill(n.getString()):e.fill()),e.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var r=this.getMarkers();if(r){var i=r.length-1,s=this.getStyle("marker-start"),a=this.getStyle("marker-mid"),l=this.getStyle("marker-end");if(s.isUrlDefinition()){var o=s.getDefinition(),[d,p]=r[0];o.render(e,d,p)}if(a.isUrlDefinition())for(var A=a.getDefinition(),v=1;v<i;v++){var[y,C]=r[v];A.render(e,y,C)}if(l.isUrlDefinition()){var x=l.getDefinition(),[M,I]=r[i];x.render(e,M,I)}}}static pathM(e){var n=e.getAsCurrentPoint();return e.start=e.current,{point:n}}pathM(e,n){var{pathParser:r}=this,{point:i}=ha.pathM(r),{x:s,y:a}=i;r.addMarker(i),n.addPoint(s,a),e&&e.moveTo(s,a)}static pathL(e){var{current:n}=e,r=e.getAsCurrentPoint();return{current:n,point:r}}pathL(e,n){var{pathParser:r}=this,{current:i,point:s}=ha.pathL(r),{x:a,y:l}=s;r.addMarker(s,i),n.addPoint(a,l),e&&e.lineTo(a,l)}static pathH(e){var{current:n,command:r}=e,i=new Vl((r.relative?n.x:0)+r.x,n.y);return e.current=i,{current:n,point:i}}pathH(e,n){var{pathParser:r}=this,{current:i,point:s}=ha.pathH(r),{x:a,y:l}=s;r.addMarker(s,i),n.addPoint(a,l),e&&e.lineTo(a,l)}static pathV(e){var{current:n,command:r}=e,i=new Vl(n.x,(r.relative?n.y:0)+r.y);return e.current=i,{current:n,point:i}}pathV(e,n){var{pathParser:r}=this,{current:i,point:s}=ha.pathV(r),{x:a,y:l}=s;r.addMarker(s,i),n.addPoint(a,l),e&&e.lineTo(a,l)}static pathC(e){var{current:n}=e,r=e.getPoint("x1","y1"),i=e.getAsControlPoint("x2","y2"),s=e.getAsCurrentPoint();return{current:n,point:r,controlPoint:i,currentPoint:s}}pathC(e,n){var{pathParser:r}=this,{current:i,point:s,controlPoint:a,currentPoint:l}=ha.pathC(r);r.addMarker(l,a,s),n.addBezierCurve(i.x,i.y,s.x,s.y,a.x,a.y,l.x,l.y),e&&e.bezierCurveTo(s.x,s.y,a.x,a.y,l.x,l.y)}static pathS(e){var{current:n}=e,r=e.getReflectedControlPoint(),i=e.getAsControlPoint("x2","y2"),s=e.getAsCurrentPoint();return{current:n,point:r,controlPoint:i,currentPoint:s}}pathS(e,n){var{pathParser:r}=this,{current:i,point:s,controlPoint:a,currentPoint:l}=ha.pathS(r);r.addMarker(l,a,s),n.addBezierCurve(i.x,i.y,s.x,s.y,a.x,a.y,l.x,l.y),e&&e.bezierCurveTo(s.x,s.y,a.x,a.y,l.x,l.y)}static pathQ(e){var{current:n}=e,r=e.getAsControlPoint("x1","y1"),i=e.getAsCurrentPoint();return{current:n,controlPoint:r,currentPoint:i}}pathQ(e,n){var{pathParser:r}=this,{current:i,controlPoint:s,currentPoint:a}=ha.pathQ(r);r.addMarker(a,s,s),n.addQuadraticCurve(i.x,i.y,s.x,s.y,a.x,a.y),e&&e.quadraticCurveTo(s.x,s.y,a.x,a.y)}static pathT(e){var{current:n}=e,r=e.getReflectedControlPoint();e.control=r;var i=e.getAsCurrentPoint();return{current:n,controlPoint:r,currentPoint:i}}pathT(e,n){var{pathParser:r}=this,{current:i,controlPoint:s,currentPoint:a}=ha.pathT(r);r.addMarker(a,s,s),n.addQuadraticCurve(i.x,i.y,s.x,s.y,a.x,a.y),e&&e.quadraticCurveTo(s.x,s.y,a.x,a.y)}static pathA(e){var{current:n,command:r}=e,{rX:i,rY:s,xRot:a,lArcFlag:l,sweepFlag:o}=r,d=a*(Math.PI/180),p=e.getAsCurrentPoint(),A=new Vl(Math.cos(d)*(n.x-p.x)/2+Math.sin(d)*(n.y-p.y)/2,-Math.sin(d)*(n.x-p.x)/2+Math.cos(d)*(n.y-p.y)/2),v=Math.pow(A.x,2)/Math.pow(i,2)+Math.pow(A.y,2)/Math.pow(s,2);v>1&&(i*=Math.sqrt(v),s*=Math.sqrt(v));var y=(l===o?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(s,2)-Math.pow(i,2)*Math.pow(A.y,2)-Math.pow(s,2)*Math.pow(A.x,2))/(Math.pow(i,2)*Math.pow(A.y,2)+Math.pow(s,2)*Math.pow(A.x,2)));isNaN(y)&&(y=0);var C=new Vl(y*i*A.y/s,y*-s*A.x/i),x=new Vl((n.x+p.x)/2+Math.cos(d)*C.x-Math.sin(d)*C.y,(n.y+p.y)/2+Math.sin(d)*C.x+Math.cos(d)*C.y),M=f$([1,0],[(A.x-C.x)/i,(A.y-C.y)/s]),I=[(A.x-C.x)/i,(A.y-C.y)/s],P=[(-A.x-C.x)/i,(-A.y-C.y)/s],F=f$(I,P);return N5(I,P)<=-1&&(F=Math.PI),N5(I,P)>=1&&(F=0),{currentPoint:p,rX:i,rY:s,sweepFlag:o,xAxisRotation:d,centp:x,a1:M,ad:F}}pathA(e,n){var{pathParser:r}=this,{currentPoint:i,rX:s,rY:a,sweepFlag:l,xAxisRotation:o,centp:d,a1:p,ad:A}=ha.pathA(r),v=1-l?1:-1,y=p+v*(A/2),C=new Vl(d.x+s*Math.cos(y),d.y+a*Math.sin(y));if(r.addMarkerAngle(C,y-v*Math.PI/2),r.addMarkerAngle(i,y-v*Math.PI),n.addPoint(i.x,i.y),e&&!isNaN(p)&&!isNaN(A)){var x=s>a?s:a,M=s>a?1:s/a,I=s>a?a/s:1;e.translate(d.x,d.y),e.rotate(o),e.scale(M,I),e.arc(0,0,x,p,p+A,!!(1-l)),e.scale(1/M,1/I),e.rotate(-o),e.translate(-d.x,-d.y)}}static pathZ(e){e.current=e.start}pathZ(e,n){ha.pathZ(this.pathParser),e&&n.x1!==n.x2&&n.y1!==n.y2&&e.closePath()}}class ZQ extends ha{constructor(e,n,r){super(e,n,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class i0 extends O_{constructor(e,n,r){super(e,n,new.target===i0?!0:r),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,n);var r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(e.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!=="text")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var n=null;return this.children.forEach((r,i)=>{var s=this.getChildBoundingBox(e,this,this,i);n?n.addBoundingBox(s):n=s}),n}getFontSize(){var{document:e,parent:n}=this,r=Ah.parse(e.ctx.font).fontSize,i=n.getStyle("font-size").getNumber(r);return i}getTElementBoundingBox(e){var n=this.getFontSize();return new Lp(this.x,this.y-n,this.x+this.measureText(e),this.y)}getGlyph(e,n,r){var i=n[r],s=null;if(e.isArabic){var a=n.length,l=n[r-1],o=n[r+1],d="isolated";if((r===0||l===" ")&&r<a-1&&o!==" "&&(d="terminal"),r>0&&l!==" "&&r<a-1&&o!==" "&&(d="medial"),r>0&&l!==" "&&(r===a-1||o===" ")&&(d="initial"),typeof e.glyphs[i]<"u"){var p=e.glyphs[i];s=p instanceof ZQ?p:p[d]}}else s=e.glyphs[i];return s||(s=e.missingGlyph),s}getText(){return""}getTextFromNode(e){var n=e||this.node,r=Array.from(n.parentNode.childNodes),i=r.indexOf(n),s=r.length-1,a=cw(n.textContent||"");return i===0&&(a=U0e(a)),i===s&&(a=z0e(a)),a}renderChildren(e){if(this.type!=="text"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((r,i)=>{this.renderChild(e,this,this,i)});var{mouse:n}=this.document.screen;n.isWorking()&&n.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){var{document:n,parent:r}=this,i=this.getText(),s=r.getStyle("font-family").getDefinition();if(s){for(var{unitsPerEm:a}=s.fontFace,l=Ah.parse(n.ctx.font),o=r.getStyle("font-size").getNumber(l.fontSize),d=r.getStyle("font-style").getString(l.fontStyle),p=o/a,A=s.isRTL?i.split("").reverse().join(""):i,v=Md(r.getAttribute("dx").getString()),y=A.length,C=0;C<y;C++){var x=this.getGlyph(s,A,C);e.translate(this.x,this.y),e.scale(p,-p);var M=e.lineWidth;e.lineWidth=e.lineWidth*a/o,d==="italic"&&e.transform(1,0,.4,1,0,0),x.render(e),d==="italic"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=M,e.scale(1/p,-1/p),e.translate(-this.x,-this.y),this.x+=o*(x.horizAdvX||s.horizAdvX)/a,typeof v[C]<"u"&&!isNaN(v[C])&&(this.x+=v[C])}return}var{x:I,y:P}=this;e.fillStyle&&e.fillText(i,I,P),e.strokeStyle&&e.strokeText(i,I,P)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],n=e.getStyle("text-anchor").getString("start"),r=!1,i=0;n==="start"&&!r||n==="end"&&r?i=e.x-this.minX:n==="end"&&!r||n==="start"&&r?i=e.x-this.maxX:i=e.x-(this.minX+this.maxX)/2;for(var s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=i;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach((n,r)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,r)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,n,r,i){var s=r.children[i];s.children.length>0?s.children.forEach((a,l)=>{n.adjustChildCoordinatesRecursiveCore(e,n,s,l)}):this.adjustChildCoordinates(e,n,r,i)}adjustChildCoordinates(e,n,r,i){var s=r.children[i];if(typeof s.measureText!="function")return s;e.save(),s.setContext(e,!0);var a=s.getAttribute("x"),l=s.getAttribute("y"),o=s.getAttribute("dx"),d=s.getAttribute("dy"),p=s.getStyle("font-family").getDefinition(),A=!!p&&p.isRTL;i===0&&(a.hasValue()||a.setValue(s.getInheritedAttribute("x")),l.hasValue()||l.setValue(s.getInheritedAttribute("y")),o.hasValue()||o.setValue(s.getInheritedAttribute("dx")),d.hasValue()||d.setValue(s.getInheritedAttribute("dy")));var v=s.measureText(e);return A&&(n.x-=v),a.hasValue()?(n.applyAnchoring(),s.x=a.getPixels("x"),o.hasValue()&&(s.x+=o.getPixels("x"))):(o.hasValue()&&(n.x+=o.getPixels("x")),s.x=n.x),n.x=s.x,A||(n.x+=v),l.hasValue()?(s.y=l.getPixels("y"),d.hasValue()&&(s.y+=d.getPixels("y"))):(d.hasValue()&&(n.y+=d.getPixels("y")),s.y=n.y),n.y=s.y,n.leafTexts.push(s),n.minX=Math.min(n.minX,s.x,s.x+v),n.maxX=Math.max(n.maxX,s.x,s.x+v),s.clearContext(e),e.restore(),s}getChildBoundingBox(e,n,r,i){var s=r.children[i];if(typeof s.getBoundingBox!="function")return null;var a=s.getBoundingBox(e);return a?(s.children.forEach((l,o)=>{var d=n.getChildBoundingBox(e,n,s,o);a.addBoundingBox(d)}),a):null}renderChild(e,n,r,i){var s=r.children[i];s.render(e),s.children.forEach((a,l)=>{n.renderChild(e,n,s,l)})}measureText(e){var{measureCache:n}=this;if(~n)return n;var r=this.getText(),i=this.measureTargetText(e,r);return this.measureCache=i,i}measureTargetText(e,n){if(!n.length)return 0;var{parent:r}=this,i=r.getStyle("font-family").getDefinition();if(i){for(var s=this.getFontSize(),a=i.isRTL?n.split("").reverse().join(""):n,l=Md(r.getAttribute("dx").getString()),o=a.length,d=0,p=0;p<o;p++){var A=this.getGlyph(i,a,p);d+=(A.horizAdvX||i.horizAdvX)*s/i.fontFace.unitsPerEm,typeof l[p]<"u"&&!isNaN(l[p])&&(d+=l[p])}return d}if(!e.measureText)return n.length*10;e.save(),this.setContext(e,!0);var{width:v}=e.measureText(n);return this.clearContext(e),e.restore(),v}getInheritedAttribute(e){for(var n=this;n instanceof i0&&n.isFirstChild();){var r=n.parent.getAttribute(e);if(r.hasValue(!0))return r.getValue("0");n=n.parent}return null}}class kM extends i0{constructor(e,n,r){super(e,n,new.target===kM?!0:r),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class T2t extends kM{constructor(){super(...arguments),this.type="textNode"}}let qE=class extends O_{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(e){var n,{document:r}=this,{screen:i,window:s}=r,a=e.canvas;if(i.setDefaults(e),a.style&&typeof e.font<"u"&&s&&typeof s.getComputedStyle<"u"){e.font=s.getComputedStyle(a).getPropertyValue("font");var l=new Ji(r,"fontSize",Ah.parse(e.font).fontSize);l.hasValue()&&(r.rootEmSize=l.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:o,height:d}=i.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var p=this.getAttribute("refX"),A=this.getAttribute("refY"),v=this.getAttribute("viewBox"),y=v.hasValue()?Md(v.getString()):null,C=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",x=0,M=0,I=0,P=0;y&&(x=y[0],M=y[1]),this.root||(o=this.getStyle("width").getPixels("x"),d=this.getStyle("height").getPixels("y"),this.type==="marker"&&(I=x,P=M,x=0,M=0)),i.viewPort.setCurrent(o,d),this.node&&(!this.parent||((n=this.node.parentNode)===null||n===void 0?void 0:n.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),y&&(o=y[2],d=y[3]),r.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i.viewPort.width,desiredWidth:o,height:i.viewPort.height,desiredHeight:d,minX:x,minY:M,refX:p.getValue(),refY:A.getValue(),clip:C,clipX:I,clipY:P}),y&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(o,d))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.getAttribute("width",!0),s=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),l=this.getAttribute("style"),o=i.getNumber(0),d=s.getNumber(0);if(r)if(typeof r=="string")this.getAttribute("preserveAspectRatio",!0).setValue(r);else{var p=this.getAttribute("preserveAspectRatio");p.hasValue()&&p.setValue(p.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(i.setValue(e),s.setValue(n),a.hasValue()||a.setValue("0 0 ".concat(o||e," ").concat(d||n)),l.hasValue()){var A=this.getStyle("width"),v=this.getStyle("height");A.hasValue()&&A.setValue("".concat(e,"px")),v.hasValue()&&v.setValue("".concat(n,"px"))}}};class JQ extends ha{constructor(){super(...arguments),this.type="rect"}path(e){var n=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),i=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),l=this.getAttribute("ry"),o=a.getPixels("x"),d=l.getPixels("y");if(a.hasValue()&&!l.hasValue()&&(d=o),l.hasValue()&&!a.hasValue()&&(o=d),o=Math.min(o,i/2),d=Math.min(d,s/2),e){var p=4*((Math.sqrt(2)-1)/3);e.beginPath(),s>0&&i>0&&(e.moveTo(n+o,r),e.lineTo(n+i-o,r),e.bezierCurveTo(n+i-o+p*o,r,n+i,r+d-p*d,n+i,r+d),e.lineTo(n+i,r+s-d),e.bezierCurveTo(n+i,r+s-d+p*d,n+i-o+p*o,r+s,n+i-o,r+s),e.lineTo(n+o,r+s),e.bezierCurveTo(n+o-p*o,r+s,n,r+s-d+p*d,n,r+s-d),e.lineTo(n,r+d),e.bezierCurveTo(n,r+d-p*d,n+o-p*o,r,n+o,r),e.closePath())}return new Lp(n,r,n+i,r+s)}getMarkers(){return null}}class eye extends ha{constructor(){super(...arguments),this.type="circle"}path(e){var n=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),i=this.getAttribute("r").getPixels();return e&&i>0&&(e.beginPath(),e.arc(n,r,i,0,Math.PI*2,!1),e.closePath()),new Lp(n-i,r-i,n+i,r+i)}getMarkers(){return null}}class tye extends ha{constructor(){super(...arguments),this.type="ellipse"}path(e){var n=4*((Math.sqrt(2)-1)/3),r=this.getAttribute("rx").getPixels("x"),i=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return e&&r>0&&i>0&&(e.beginPath(),e.moveTo(s+r,a),e.bezierCurveTo(s+r,a+n*i,s+n*r,a+i,s,a+i),e.bezierCurveTo(s-n*r,a+i,s-r,a+n*i,s-r,a),e.bezierCurveTo(s-r,a-n*i,s-n*r,a-i,s,a-i),e.bezierCurveTo(s+n*r,a-i,s+r,a-n*i,s+r,a),e.closePath()),new Lp(s-r,a-i,s+r,a+i)}getMarkers(){return null}}class nye extends ha{constructor(){super(...arguments),this.type="line"}getPoints(){return[new Vl(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Vl(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){var[{x:n,y:r},{x:i,y:s}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(n,r),e.lineTo(i,s)),new Lp(n,r,i,s)}getMarkers(){var[e,n]=this.getPoints(),r=e.angleTo(n);return[[e,r],[n,r]]}}class ej extends ha{constructor(e,n,r){super(e,n,r),this.type="polyline",this.points=[],this.points=Vl.parsePath(this.getAttribute("points").getString())}path(e){var{points:n}=this,[{x:r,y:i}]=n,s=new Lp(r,i);return e&&(e.beginPath(),e.moveTo(r,i)),n.forEach(a=>{var{x:l,y:o}=a;s.addPoint(l,o),e&&e.lineTo(l,o)}),s}getMarkers(){var{points:e}=this,n=e.length-1,r=[];return e.forEach((i,s)=>{s!==n&&r.push([i,i.angleTo(e[s+1])])}),r.length>0&&r.push([e[e.length-1],r[r.length-1][1]]),r}}class rye extends ej{constructor(){super(...arguments),this.type="polygon"}path(e){var n=super.path(e),[{x:r,y:i}]=this.points;return e&&(e.lineTo(r,i),e.closePath()),n}}class iye extends Bl{constructor(){super(...arguments),this.type="pattern"}createPattern(e,n,r){var i=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),a=new qE(this.document,null);a.attributes.viewBox=new Ji(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new Ji(this.document,"width","".concat(i,"px")),a.attributes.height=new Ji(this.document,"height","".concat(s,"px")),a.attributes.transform=new Ji(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var l=this.document.createCanvas(i,s),o=l.getContext("2d"),d=this.getAttribute("x"),p=this.getAttribute("y");d.hasValue()&&p.hasValue()&&o.translate(d.getPixels("x",!0),p.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(var A=-1;A<=1;A++)for(var v=-1;v<=1;v++)o.save(),a.attributes.x=new Ji(this.document,"x",A*l.width),a.attributes.y=new Ji(this.document,"y",v*l.height),a.render(o),o.restore();var y=e.createPattern(l,"repeat");return y}}class sye extends Bl{constructor(){super(...arguments),this.type="marker"}render(e,n,r){if(n){var{x:i,y:s}=n,a=this.getAttribute("orient").getString("auto"),l=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(i,s),a==="auto"&&e.rotate(r),l==="strokeWidth"&&e.scale(e.lineWidth,e.lineWidth),e.save();var o=new qE(this.document,null);o.type=this.type,o.attributes.viewBox=new Ji(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.refX=new Ji(this.document,"refX",this.getAttribute("refX").getValue()),o.attributes.refY=new Ji(this.document,"refY",this.getAttribute("refY").getValue()),o.attributes.width=new Ji(this.document,"width",this.getAttribute("markerWidth").getValue()),o.attributes.height=new Ji(this.document,"height",this.getAttribute("markerHeight").getValue()),o.attributes.overflow=new Ji(this.document,"overflow",this.getAttribute("overflow").getValue()),o.attributes.fill=new Ji(this.document,"fill",this.getAttribute("fill").getColor("black")),o.attributes.stroke=new Ji(this.document,"stroke",this.getAttribute("stroke").getValue("none")),o.children=this.children,o.render(e),e.restore(),l==="strokeWidth"&&e.scale(1/e.lineWidth,1/e.lineWidth),a==="auto"&&e.rotate(-r),e.translate(-i,-s)}}}class oye extends Bl{constructor(){super(...arguments),this.type="defs"}render(){}}class qN extends O_{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var n=new Lp;return this.children.forEach(r=>{n.addBoundingBox(r.getBoundingBox(e))}),n}}class tj extends Bl{constructor(e,n,r){super(e,n,r),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:i,children:s}=this;s.forEach(a=>{a.type==="stop"&&i.push(a)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,n,r){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var{stops:s}=i,a=this.getGradient(e,n);if(!a)return this.addParentOpacity(r,s[s.length-1].color);if(s.forEach(M=>{a.addColorStop(M.offset,this.addParentOpacity(r,M.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:l}=this,{MAX_VIRTUAL_PIXELS:o,viewPort:d}=l.screen,[p]=d.viewPorts,A=new JQ(l,null);A.attributes.x=new Ji(l,"x",-o/3),A.attributes.y=new Ji(l,"y",-o/3),A.attributes.width=new Ji(l,"width",o),A.attributes.height=new Ji(l,"height",o);var v=new qN(l,null);v.attributes.transform=new Ji(l,"transform",this.getAttribute("gradientTransform").getValue()),v.children=[A];var y=new qE(l,null);y.attributes.x=new Ji(l,"x",0),y.attributes.y=new Ji(l,"y",0),y.attributes.width=new Ji(l,"width",p.width),y.attributes.height=new Ji(l,"height",p.height),y.children=[v];var C=l.createCanvas(p.width,p.height),x=C.getContext("2d");return x.fillStyle=a,y.render(x),x.createPattern(C,"no-repeat")}return a}inheritStopContainer(e){this.attributesToInherit.forEach(n=>{!this.getAttribute(n).hasValue()&&e.getAttribute(n).hasValue()&&this.getAttribute(n,!0).setValue(e.getAttribute(n).getValue())})}addParentOpacity(e,n){if(e.hasValue()){var r=new Ji(this.document,"color",n);return r.addOpacity(e).getColor()}return n}}class aye extends tj{constructor(e,n,r){super(e,n,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(e,n){var r=this.getGradientUnits()==="objectBoundingBox",i=r?n.getBoundingBox(e):null;if(r&&!i)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var s=r?i.x+i.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=r?i.y+i.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),l=r?i.x+i.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),o=r?i.y+i.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===l&&a===o?null:e.createLinearGradient(s,a,l,o)}}class lye extends tj{constructor(e,n,r){super(e,n,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(e,n){var r=this.getGradientUnits()==="objectBoundingBox",i=n.getBoundingBox(e);if(r&&!i)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var s=r?i.x+i.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=r?i.y+i.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),l=s,o=a;this.getAttribute("fx").hasValue()&&(l=r?i.x+i.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(o=r?i.y+i.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var d=r?(i.width+i.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),p=this.getAttribute("fr").getPixels();return e.createRadialGradient(l,o,p,s,a,d)}}class cye extends Bl{constructor(e,n,r){super(e,n,r),this.type="stop";var i=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity"),a=this.getStyle("stop-color",!0);a.getString()===""&&a.setValue("#000"),s.hasValue()&&(a=a.addOpacity(s)),this.offset=i,this.color=a.getColor()}}class YN extends Bl{constructor(e,n,r){super(e,n,r),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Ji(e,"values",null);var i=this.getAttribute("values");i.hasValue()&&this.values.setValue(i.getString().split(";"))}getProperty(){var e=this.getAttribute("attributeType").getString(),n=this.getAttribute("attributeName").getString();return e==="CSS"?this.parent.getStyle(n,!0):this.parent.getAttribute(n,!0)}calcValue(){var{initialUnits:e}=this,{progress:n,from:r,to:i}=this.getProgress(),s=r.getNumber()+(i.getNumber()-r.getNumber())*n;return e==="%"&&(s*=100),"".concat(s).concat(e)}update(e){var{parent:n}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var i=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(i==="freeze"&&!this.frozen)this.frozen=!0,n.animationFrozen=!0,n.animationFrozenValue=r.getString();else if(i==="remove"&&!this.removed)return this.removed=!0,r.setValue(n.animationFrozen?n.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;var s=!1;if(this.begin<this.duration){var a=this.calcValue(),l=this.getAttribute("type");if(l.hasValue()){var o=l.getString();a="".concat(o,"(").concat(a,")")}r.setValue(a),s=!0}return s}getProgress(){var{document:e,values:n}=this,r={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(n.hasValue()){var i=r.progress*(n.getValue().length-1),s=Math.floor(i),a=Math.ceil(i);r.from=new Ji(e,"from",parseFloat(n.getValue()[s])),r.to=new Ji(e,"to",parseFloat(n.getValue()[a])),r.progress=(i-s)/(a-s)}else r.from=this.from,r.to=this.to;return r}}class uye extends YN{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:e,from:n,to:r}=this.getProgress(),i=new c$(n.getColor()),s=new c$(r.getColor());if(i.ok&&s.ok){var a=i.r+(s.r-i.r)*e,l=i.g+(s.g-i.g)*e,o=i.b+(s.b-i.b)*e;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(l),", ").concat(Math.floor(o),")")}return this.getAttribute("from").getColor()}}class hye extends YN{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:e,from:n,to:r}=this.getProgress(),i=Md(n.getString()),s=Md(r.getString()),a=i.map((l,o)=>{var d=s[o];return l+(d-l)*e}).join(" ");return a}}class dye extends Bl{constructor(e,n,r){super(e,n,r),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:i}=e,{children:s}=this;for(var a of s)switch(a.type){case"font-face":{this.fontFace=a;var l=a.getStyle("font-family");l.hasValue()&&(i[l.getString()]=this);break}case"missing-glyph":this.missingGlyph=a;break;case"glyph":{var o=a;o.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[o.unicode]>"u"&&(this.glyphs[o.unicode]={}),this.glyphs[o.unicode][o.arabicForm]=o):this.glyphs[o.unicode]=o;break}}}render(){}}class fye extends Bl{constructor(e,n,r){super(e,n,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class pye extends ha{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class Aye extends i0{constructor(){super(...arguments),this.type="tref"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var n=e.children[0];if(n)return n.getText()}return""}}class gye extends i0{constructor(e,n,r){super(e,n,r),this.type="a";var{childNodes:i}=n,s=i[0],a=i.length>0&&Array.from(i).every(l=>l.nodeType===3);this.hasText=a,this.text=a?this.getTextFromNode(s):""}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:n,x:r,y:i}=this,{mouse:s}=n.screen,a=new Ji(n,"fontSize",Ah.parse(n.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new Lp(r,i-a.getPixels("y"),r+this.measureText(e),i))}else if(this.children.length>0){var l=new qN(this.document,null);l.children=this.children,l.parent=this,l.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){var e=this.document.ctx;e.canvas.style.cursor="pointer"}}function Ese(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ese(Object(n),!0).forEach(function(r){KQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ese(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class mye extends i0{constructor(e,n,r){super(e,n,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var i=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(i)}getText(){return this.text}path(e){var{dataArray:n}=this;e&&e.beginPath(),n.forEach(r=>{var{type:i,points:s}=r;switch(i){case eo.LINE_TO:e&&e.lineTo(s[0],s[1]);break;case eo.MOVE_TO:e&&e.moveTo(s[0],s[1]);break;case eo.CURVE_TO:e&&e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case eo.QUAD_TO:e&&e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case eo.ARC:{var[a,l,o,d,p,A,v,y]=s,C=o>d?o:d,x=o>d?1:o/d,M=o>d?d/o:1;e&&(e.translate(a,l),e.rotate(v),e.scale(x,M),e.arc(0,0,C,p,p+A,!!(1-y)),e.scale(1/x,1/M),e.rotate(-v),e.translate(-a,-l));break}case eo.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();var n=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),{glyphInfo:i}=this,s=e.fillStyle;n==="underline"&&e.beginPath(),i.forEach((a,l)=>{var{p0:o,p1:d,rotation:p,text:A}=a;e.save(),e.translate(o.x,o.y),e.rotate(p),e.fillStyle&&e.fillText(A,0,0),e.strokeStyle&&e.strokeText(A,0,0),e.restore(),n==="underline"&&(l===0&&e.moveTo(o.x,o.y+r/8),e.lineTo(d.x,d.y+r/5))}),n==="underline"&&(e.lineWidth=r/20,e.strokeStyle=s,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,n,r,i,s,a,l,o,d){var p=a,A=this.measureText(e,o);o===" "&&n==="justify"&&r<i&&(A+=(i-r)/s),d>-1&&(p+=this.getLetterSpacingAt(d));var v=this.textHeight/20,y=this.getEquidistantPointOnPath(p,v,0),C=this.getEquidistantPointOnPath(p+A,v,0),x={p0:y,p1:C},M=y&&C?Math.atan2(C.y-y.y,C.x-y.x):0;if(l){var I=Math.cos(Math.PI/2+M)*l,P=Math.cos(-M)*l;x.p0=$P($P({},y),{},{x:y.x+I,y:y.y+P}),x.p1=$P($P({},C),{},{x:C.x+I,y:C.y+P})}return p+=A,{offset:p,segment:x,rotation:M}}measureText(e,n){var{measuresCache:r}=this,i=n||this.getText();if(r.has(i))return r.get(i);var s=this.measureTargetText(e,i);return r.set(i,s),s}setTextData(e){if(!this.glyphInfo){var n=this.getText(),r=n.split(""),i=n.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(D=>D.getPixels("x")),a=this.parent.getAttribute("dy").getPixels("y"),l=this.parent.getStyle("text-anchor").getString("start"),o=this.getStyle("letter-spacing"),d=this.parent.getStyle("letter-spacing"),p=0;!o.hasValue()||o.getValue()==="inherit"?p=d.getPixels():o.hasValue()&&o.getValue()!=="initial"&&o.getValue()!=="unset"&&(p=o.getPixels());var A=[],v=n.length;this.letterSpacingCache=A;for(var y=0;y<v;y++)A.push(typeof s[y]<"u"?s[y]:p);var C=A.reduce((D,V,H)=>H===0?0:D+V||0,0),x=this.measureText(e),M=Math.max(x+C,0);this.textWidth=x,this.textHeight=this.getFontSize(),this.glyphInfo=[];var I=this.getPathLength(),P=this.getStyle("startOffset").getNumber(0)*I,F=0;(l==="middle"||l==="center")&&(F=-M/2),(l==="end"||l==="right")&&(F=-M),F+=P,r.forEach((D,V)=>{var{offset:H,segment:Q,rotation:G}=this.findSegmentToFitChar(e,l,M,I,i,F,a,D,V);F=H,!(!Q.p0||!Q.p1)&&this.glyphInfo.push({text:r[V],p0:Q.p0,p1:Q.p1,rotation:G})})}}parsePathData(e){if(this.pathLength=-1,!e)return[];var n=[],{pathParser:r}=e;for(r.reset();!r.isEnd();){var{current:i}=r,s=i?i.x:0,a=i?i.y:0,l=r.next(),o=l.type,d=[];switch(l.type){case eo.MOVE_TO:this.pathM(r,d);break;case eo.LINE_TO:o=this.pathL(r,d);break;case eo.HORIZ_LINE_TO:o=this.pathH(r,d);break;case eo.VERT_LINE_TO:o=this.pathV(r,d);break;case eo.CURVE_TO:this.pathC(r,d);break;case eo.SMOOTH_CURVE_TO:o=this.pathS(r,d);break;case eo.QUAD_TO:this.pathQ(r,d);break;case eo.SMOOTH_QUAD_TO:o=this.pathT(r,d);break;case eo.ARC:d=this.pathA(r);break;case eo.CLOSE_PATH:ha.pathZ(r);break}l.type!==eo.CLOSE_PATH?n.push({type:o,points:d,start:{x:s,y:a},pathLength:this.calcLength(s,a,o,d)}):n.push({type:eo.CLOSE_PATH,points:[],pathLength:0})}return n}pathM(e,n){var{x:r,y:i}=ha.pathM(e).point;n.push(r,i)}pathL(e,n){var{x:r,y:i}=ha.pathL(e).point;return n.push(r,i),eo.LINE_TO}pathH(e,n){var{x:r,y:i}=ha.pathH(e).point;return n.push(r,i),eo.LINE_TO}pathV(e,n){var{x:r,y:i}=ha.pathV(e).point;return n.push(r,i),eo.LINE_TO}pathC(e,n){var{point:r,controlPoint:i,currentPoint:s}=ha.pathC(e);n.push(r.x,r.y,i.x,i.y,s.x,s.y)}pathS(e,n){var{point:r,controlPoint:i,currentPoint:s}=ha.pathS(e);return n.push(r.x,r.y,i.x,i.y,s.x,s.y),eo.CURVE_TO}pathQ(e,n){var{controlPoint:r,currentPoint:i}=ha.pathQ(e);n.push(r.x,r.y,i.x,i.y)}pathT(e,n){var{controlPoint:r,currentPoint:i}=ha.pathT(e);return n.push(r.x,r.y,i.x,i.y),eo.QUAD_TO}pathA(e){var{rX:n,rY:r,sweepFlag:i,xAxisRotation:s,centp:a,a1:l,ad:o}=ha.pathA(e);return i===0&&o>0&&(o-=2*Math.PI),i===1&&o<0&&(o+=2*Math.PI),[a.x,a.y,n,r,l,o,s,i]}calcLength(e,n,r,i){var s=0,a=null,l=null,o=0;switch(r){case eo.LINE_TO:return this.getLineLength(e,n,i[0],i[1]);case eo.CURVE_TO:for(s=0,a=this.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),o=.01;o<=1;o+=.01)l=this.getPointOnCubicBezier(o,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=this.getLineLength(a.x,a.y,l.x,l.y),a=l;return s;case eo.QUAD_TO:for(s=0,a=this.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]),o=.01;o<=1;o+=.01)l=this.getPointOnQuadraticBezier(o,e,n,i[0],i[1],i[2],i[3]),s+=this.getLineLength(a.x,a.y,l.x,l.y),a=l;return s;case eo.ARC:{s=0;var d=i[4],p=i[5],A=i[4]+p,v=Math.PI/180;if(Math.abs(d-A)<v&&(v=Math.abs(d-A)),a=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),p<0)for(o=d-v;o>A;o-=v)l=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),s+=this.getLineLength(a.x,a.y,l.x,l.y),a=l;else for(o=d+v;o<A;o+=v)l=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),s+=this.getLineLength(a.x,a.y,l.x,l.y),a=l;return l=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],A,0),s+=this.getLineLength(a.x,a.y,l.x,l.y),s}}return 0}getPointOnLine(e,n,r,i,s){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:n,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:r,o=(s-r)/(i-n+gb),d=Math.sqrt(e*e/(1+o*o));i<n&&(d*=-1);var p=o*d,A=null;if(i===n)A={x:a,y:l+p};else if((l-r)/(a-n+gb)===o)A={x:a+d,y:l+p};else{var v=0,y=0,C=this.getLineLength(n,r,i,s);if(C<gb)return null;var x=(a-n)*(i-n)+(l-r)*(s-r);x/=C*C,v=n+x*(i-n),y=r+x*(s-r);var M=this.getLineLength(a,l,v,y),I=Math.sqrt(e*e-M*M);d=Math.sqrt(I*I/(1+o*o)),i<n&&(d*=-1),p=o*d,A={x:v+d,y:y+p}}return A}getPointOnPath(e){var n=this.getPathLength(),r=0,i=null;if(e<-5e-5||e-5e-5>n)return null;var{dataArray:s}=this;for(var a of s){if(a&&(a.pathLength<5e-5||r+a.pathLength+5e-5<e)){r+=a.pathLength;continue}var l=e-r,o=0;switch(a.type){case eo.LINE_TO:i=this.getPointOnLine(l,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case eo.ARC:{var d=a.points[4],p=a.points[5],A=a.points[4]+p;if(o=d+l/a.pathLength*p,p<0&&o<A||p>=0&&o>A)break;i=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],o,a.points[6]);break}case eo.CURVE_TO:o=l/a.pathLength,o>1&&(o=1),i=this.getPointOnCubicBezier(o,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case eo.QUAD_TO:o=l/a.pathLength,o>1&&(o=1),i=this.getPointOnQuadraticBezier(o,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3]);break}if(i)return i;break}return null}getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,n)=>n.pathLength>0?e+n.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,n,r,i,s,a,l,o,d){var p=o*p$(e)+a*A$(e)+i*g$(e)+n*m$(e),A=d*p$(e)+l*A$(e)+s*g$(e)+r*m$(e);return{x:p,y:A}}getPointOnQuadraticBezier(e,n,r,i,s,a,l){var o=a*v$(e)+i*y$(e)+n*_$(e),d=l*v$(e)+s*y$(e)+r*_$(e);return{x:o,y:d}}getPointOnEllipticalArc(e,n,r,i,s,a){var l=Math.cos(a),o=Math.sin(a),d={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(d.x*l-d.y*o),y:n+(d.x*o+d.y*l)}}buildEquidistantCache(e,n){var r=this.getPathLength(),i=n||.25,s=e||r/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==i){this.equidistantCache={step:s,precision:i,points:[]};for(var a=0,l=0;l<=r;l+=i){var o=this.getPointOnPath(l),d=this.getPointOnPath(l+i);!o||!d||(a+=this.getLineLength(o.x,o.y,d.x,d.y),a>=s&&(this.equidistantCache.points.push({x:o.x,y:o.y,distance:l}),a-=s))}}}getEquidistantPointOnPath(e,n,r){if(this.buildEquidistantCache(n,r),e<0||e-this.getPathLength()>5e-5)return null;var i=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[i]||null}}var I2t=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class vye extends O_{constructor(e,n,r){super(e,n,r),this.type="image",this.loaded=!1;var i=this.getHrefAttribute().getString();if(i){var s=i.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(i);e.images.push(this),s?this.loadSvg(i):this.loadImage(i),this.isSvg=s}}loadImage(e){var n=this;return r0(function*(){try{var r=yield n.document.createImage(e);n.image=r}catch(i){console.error('Error while loading image "'.concat(e,'":'),i)}n.loaded=!0})()}loadSvg(e){var n=this;return r0(function*(){var r=I2t.exec(e);if(r){var i=r[5];r[4]==="base64"?n.image=atob(i):n.image=decodeURIComponent(i)}else try{var s=yield n.document.fetch(e),a=yield s.text();n.image=a}catch(l){console.error('Error while loading image "'.concat(e,'":'),l)}n.loaded=!0})()}renderChildren(e){var{document:n,image:r,loaded:i}=this,s=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),l=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!(!i||!r||!l||!o)){if(e.save(),e.translate(s,a),this.isSvg){var d=n.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:l,scaleHeight:o});d.document.documentElement.parent=this,d.render()}else{var p=this.image;n.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:l,desiredWidth:p.width,height:o,desiredHeight:p.height}),this.loaded&&(typeof p.complete>"u"||p.complete)&&e.drawImage(p,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y");return new Lp(e,n,e+r,n+i)}}class yye extends O_{constructor(){super(...arguments),this.type="symbol"}render(e){}}class _ye{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,n){var r=this;return r0(function*(){try{var{document:i}=r,s=yield i.canvg.parser.load(n),a=s.getElementsByTagName("font");Array.from(a).forEach(l=>{var o=i.createElement(l);i.definitions[e]=o})}catch(l){console.error('Error while loading font "'.concat(n,'":'),l)}r.loaded=!0})()}}class nj extends Bl{constructor(e,n,r){super(e,n,r),this.type="style";var i=cw(Array.from(n.childNodes).map(a=>a.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),s=i.split("}");s.forEach(a=>{var l=a.trim();if(l){var o=l.split("{"),d=o[0].split(","),p=o[1].split(";");d.forEach(A=>{var v=A.trim();if(v){var y=e.styles[v]||{};if(p.forEach(M=>{var I=M.indexOf(":"),P=M.substr(0,I).trim(),F=M.substr(I+1,M.length-I).trim();P&&F&&(y[P]=new Ji(e,P,F))}),e.styles[v]=y,e.stylesSpecificity[v]=H0e(v),v==="@font-face"){var C=y["font-family"].getString().replace(/"|'/g,""),x=y.src.getString().split(",");x.forEach(M=>{if(M.indexOf('format("svg")')>0){var I=qQ(M);I&&new _ye(e).load(C,I)}})}}})}})}}nj.parseExternalUrl=qQ;class bye extends O_{constructor(){super(...arguments),this.type="use"}setContext(e){super.setContext(e);var n=this.getAttribute("x"),r=this.getAttribute("y");n.hasValue()&&e.translate(n.getPixels("x"),0),r.hasValue()&&e.translate(0,r.getPixels("y"))}path(e){var{element:n}=this;n&&n.path(e)}renderChildren(e){var{document:n,element:r}=this;if(r){var i=r;if(r.type==="symbol"&&(i=new qE(n,null),i.attributes.viewBox=new Ji(n,"viewBox",r.getAttribute("viewBox").getString()),i.attributes.preserveAspectRatio=new Ji(n,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString()),i.attributes.overflow=new Ji(n,"overflow",r.getAttribute("overflow").getString()),i.children=r.children,r.styles.opacity=new Ji(n,"opacity",this.calculateOpacity())),i.type==="svg"){var s=this.getStyle("width",!1,!0),a=this.getStyle("height",!1,!0);s.hasValue()&&(i.attributes.width=new Ji(n,"width",s.getString())),a.hasValue()&&(i.attributes.height=new Ji(n,"height",a.getString()))}var l=i.parent;i.parent=this,i.render(e),i.parent=l}}getBoundingBox(e){var{element:n}=this;return n?n.getBoundingBox(e):null}elementTransform(){var{document:e,element:n}=this;return v_.fromElement(e,n)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function VP(t,e,n,r,i,s){return t[n*r*4+e*4+s]}function HP(t,e,n,r,i,s,a){t[n*r*4+e*4+s]=a}function Rc(t,e,n){var r=t[e];return r*n}function yv(t,e,n,r){return e+Math.cos(t)*n+Math.sin(t)*r}class rj extends Bl{constructor(e,n,r){super(e,n,r),this.type="feColorMatrix";var i=Md(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var s=i[0];i=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var a=i[0]*Math.PI/180;i=[yv(a,.213,.787,-.213),yv(a,.715,-.715,-.715),yv(a,.072,-.072,.928),0,0,yv(a,.213,-.213,.143),yv(a,.715,.285,.14),yv(a,.072,-.072,-.283),0,0,yv(a,.213,-.213,-.787),yv(a,.715,-.715,.715),yv(a,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=i,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(e,n,r,i,s){for(var{includeOpacity:a,matrix:l}=this,o=e.getImageData(0,0,i,s),d=0;d<s;d++)for(var p=0;p<i;p++){var A=VP(o.data,p,d,i,s,0),v=VP(o.data,p,d,i,s,1),y=VP(o.data,p,d,i,s,2),C=VP(o.data,p,d,i,s,3),x=Rc(l,0,A)+Rc(l,1,v)+Rc(l,2,y)+Rc(l,3,C)+Rc(l,4,1),M=Rc(l,5,A)+Rc(l,6,v)+Rc(l,7,y)+Rc(l,8,C)+Rc(l,9,1),I=Rc(l,10,A)+Rc(l,11,v)+Rc(l,12,y)+Rc(l,13,C)+Rc(l,14,1),P=Rc(l,15,A)+Rc(l,16,v)+Rc(l,17,y)+Rc(l,18,C)+Rc(l,19,1);a&&(x=0,M=0,I=0,P*=C/255),HP(o.data,p,d,i,s,0,x),HP(o.data,p,d,i,s,1,M),HP(o.data,p,d,i,s,2,I),HP(o.data,p,d,i,s,3,P)}e.clearRect(0,0,i,s),e.putImageData(o,0,0)}}class DM extends Bl{constructor(){super(...arguments),this.type="mask"}apply(e,n){var{document:r}=this,i=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!a&&!l){var o=new Lp;this.children.forEach(C=>{o.addBoundingBox(C.getBoundingBox(e))}),i=Math.floor(o.x1),s=Math.floor(o.y1),a=Math.floor(o.width),l=Math.floor(o.height)}var d=this.removeStyles(n,DM.ignoreStyles),p=r.createCanvas(i+a,s+l),A=p.getContext("2d");r.screen.setDefaults(A),this.renderChildren(A),new rj(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(A,0,0,i+a,s+l);var v=r.createCanvas(i+a,s+l),y=v.getContext("2d");r.screen.setDefaults(y),n.render(y),y.globalCompositeOperation="destination-in",y.fillStyle=A.createPattern(p,"no-repeat"),y.fillRect(0,0,i+a,s+l),e.fillStyle=y.createPattern(v,"no-repeat"),e.fillRect(0,0,i+a,s+l),this.restoreStyles(n,d)}render(e){}}DM.ignoreStyles=["mask","transform","clip-path"];var Sse=()=>{};class wye extends Bl{constructor(){super(...arguments),this.type="clipPath"}apply(e){var{document:n}=this,r=Reflect.getPrototypeOf(e),{beginPath:i,closePath:s}=e;r&&(r.beginPath=Sse,r.closePath=Sse),Reflect.apply(i,e,[]),this.children.forEach(a=>{if(!(typeof a.path>"u")){var l=typeof a.elementTransform<"u"?a.elementTransform():null;l||(l=v_.fromElement(n,a)),l&&l.apply(e),a.path(e),r&&(r.closePath=s),l&&l.unapply(e)}}),Reflect.apply(s,e,[]),e.clip(),r&&(r.beginPath=i,r.closePath=s)}render(e){}}class UM extends Bl{constructor(){super(...arguments),this.type="filter"}apply(e,n){var{document:r,children:i}=this,s=n.getBoundingBox(e);if(s){var a=0,l=0;i.forEach(I=>{var P=I.extraFilterDistance||0;a=Math.max(a,P),l=Math.max(l,P)});var o=Math.floor(s.width),d=Math.floor(s.height),p=o+2*a,A=d+2*l;if(!(p<1||A<1)){var v=Math.floor(s.x),y=Math.floor(s.y),C=this.removeStyles(n,UM.ignoreStyles),x=r.createCanvas(p,A),M=x.getContext("2d");r.screen.setDefaults(M),M.translate(-v+a,-y+l),n.render(M),i.forEach(I=>{typeof I.apply=="function"&&I.apply(M,0,0,p,A)}),e.drawImage(x,0,0,p,A,v-a,y-l,p,A),this.restoreStyles(n,C)}}}render(e){}}UM.ignoreStyles=["filter","transform","clip-path"];class xye extends Bl{constructor(e,n,r){super(e,n,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(e,n,r,i,s){}}class Cye extends Bl{constructor(){super(...arguments),this.type="feMorphology"}apply(e,n,r,i,s){}}class Eye extends Bl{constructor(){super(...arguments),this.type="feComposite"}apply(e,n,r,i,s){}}class Sye extends Bl{constructor(e,n,r){super(e,n,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,n,r,i,s){var{document:a,blurRadius:l}=this,o=a.window?a.window.document.body:null,d=e.canvas;d.id=a.getUniqueId(),o&&(d.style.display="none",o.appendChild(d)),o2t(d,n,r,i,s,l),o&&o.removeChild(d)}}class Tye extends Bl{constructor(){super(...arguments),this.type="title"}}class Iye extends Bl{constructor(){super(...arguments),this.type="desc"}}var B2t={svg:qE,rect:JQ,circle:eye,ellipse:tye,line:nye,polyline:ej,polygon:rye,path:ha,pattern:iye,marker:sye,defs:oye,linearGradient:aye,radialGradient:lye,stop:cye,animate:YN,animateColor:uye,animateTransform:hye,font:dye,"font-face":fye,"missing-glyph":pye,glyph:ZQ,text:i0,tspan:kM,tref:Aye,a:gye,textPath:mye,image:vye,g:qN,symbol:yye,style:nj,use:bye,mask:DM,clipPath:wye,filter:UM,feDropShadow:xye,feMorphology:Cye,feComposite:Eye,feColorMatrix:rj,feGaussianBlur:Sye,title:Tye,desc:Iye};function Tse(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M2t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tse(Object(n),!0).forEach(function(r){KQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tse(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L2t(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}function R2t(t){return w$.apply(this,arguments)}function w$(){return w$=r0(function*(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=document.createElement("img");return e&&(n.crossOrigin="Anonymous"),new Promise((r,i)=>{n.onload=()=>{r(n)},n.onerror=(s,a,l,o,d)=>{i(d)},n.src=t})}),w$.apply(this,arguments)}class Vv{constructor(e){var{rootEmSize:n=12,emSize:r=12,createCanvas:i=Vv.createCanvas,createImage:s=Vv.createImage,anonymousCrossOrigin:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=n,this.emSize=r,this.createCanvas=i,this.createImage=this.bindCreateImage(s,a),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,n){return typeof n=="boolean"?(r,i)=>e(r,typeof i=="boolean"?i:n):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:n}=this;n.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){var n=this.createElement(e.documentElement);return n.root=!0,n.addStylesFromStyleDefinition(),this.documentElement=n,n}createElement(e){var n=e.nodeName.replace(/^[^:]+:/,""),r=Vv.elementTypes[n];return typeof r<"u"?new r(this,e):new J0e(this,e)}createTextNode(e){return new T2t(this,e)}setViewBox(e){this.screen.setViewBox(M2t({document:this},e))}}Vv.createCanvas=L2t;Vv.createImage=R2t;Vv.elementTypes=B2t;function Ise(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ise(Object(n),!0).forEach(function(r){KQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ise(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}class X1{constructor(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new jF(r),this.screen=new NM(e,r),this.options=r;var i=new Vv(this,r),s=i.createDocumentElement(n);this.document=i,this.documentElement=s}static from(e,n){var r=arguments;return r0(function*(){var i=r.length>2&&r[2]!==void 0?r[2]:{},s=new jF(i),a=yield s.parse(n);return new X1(e,a,i)})()}static fromString(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=new jF(r),s=i.parseFromString(n);return new X1(e,s,r)}fork(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return X1.from(e,n,S1(S1({},this.options),r))}forkString(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return X1.fromString(e,n,S1(S1({},this.options),r))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,n=this;return r0(function*(){var r=e.length>0&&e[0]!==void 0?e[0]:{};n.start(S1({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},r)),yield n.ready(),n.stop()})()}start(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:n,screen:r,options:i}=this;r.start(n,S1(S1({enableRedraw:!0},i),e))}stop(){this.screen.stop()}resize(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,n,r)}}const P2t=Object.freeze(Object.defineProperty({__proto__:null,AElement:gye,AnimateColorElement:uye,AnimateElement:YN,AnimateTransformElement:hye,BoundingBox:Lp,CB1:p$,CB2:A$,CB3:g$,CB4:m$,Canvg:X1,CircleElement:eye,ClipPathElement:wye,DefsElement:oye,DescElement:Iye,Document:Vv,Element:Bl,EllipseElement:tye,FeColorMatrixElement:rj,FeCompositeElement:Eye,FeDropShadowElement:xye,FeGaussianBlurElement:Sye,FeMorphologyElement:Cye,FilterElement:UM,Font:Ah,FontElement:dye,FontFaceElement:fye,GElement:qN,GlyphElement:ZQ,GradientElement:tj,ImageElement:vye,LineElement:nye,LinearGradientElement:aye,MarkerElement:sye,MaskElement:DM,Matrix:YQ,MissingGlyphElement:pye,Mouse:Q0e,PSEUDO_ZERO:gb,Parser:jF,PathElement:ha,PathParser:eo,PatternElement:iye,Point:Vl,PolygonElement:rye,PolylineElement:ej,Property:Ji,QB1:v$,QB2:y$,QB3:_$,RadialGradientElement:lye,RectElement:JQ,RenderedElement:O_,Rotate:q0e,SVGElement:qE,SVGFontLoader:_ye,Scale:Y0e,Screen:NM,Skew:XQ,SkewX:X0e,SkewY:Z0e,StopElement:cye,StyleElement:nj,SymbolElement:yye,TRefElement:Aye,TSpanElement:kM,TextElement:i0,TextPathElement:mye,TitleElement:Tye,Transform:v_,Translate:W0e,UnknownElement:J0e,UseElement:bye,ViewPort:G0e,compressSpaces:cw,default:X1,getSelectorSpecificity:H0e,normalizeAttributeName:$0e,normalizeColor:V0e,parseExternalUrl:qQ,presets:u2t,toNumbers:Md,trimLeft:U0e,trimRight:z0e,vectorMagnitude:d$,vectorsAngle:f$,vectorsRatio:N5},Symbol.toStringTag,{value:"Module"})),XN=joe(RTe);XN.use(PTe);XN.use(DZe);XN.use(D_t);XN.mount("#app");export{J2t as L,eNt as a,kf as g};
