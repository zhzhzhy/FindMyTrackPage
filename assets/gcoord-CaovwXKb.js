/**
 * @preserve
 * gcoord 1.0.6, geographic coordinate library
 * Copyright (c) 2024 Jiulong Hu <me@hujiulong.com>
 */const{sin:f,cos:n0,sqrt:F,abs:C,PI:c}=Math,z=6378245,X=.006693421622965823;function Y(t,o){return t>=72.004&&t<=137.8347&&o>=.8293&&o<=55.8271}function o0(t,o){let e=-100+2*t+3*o+.2*o*o+.1*t*o+.2*F(C(t));return e+=(20*f(6*t*c)+20*f(2*t*c))*2/3,e+=(20*f(o*c)+40*f(o/3*c))*2/3,e+=(160*f(o/12*c)+320*f(o*c/30))*2/3,e}function r0(t,o){let e=300+t+2*o+.1*t*t+.1*t*o+.1*F(C(t));return e+=(20*f(6*t*c)+20*f(2*t*c))*2/3,e+=(20*f(t*c)+40*f(t/3*c))*2/3,e+=(150*f(t/12*c)+300*f(t/30*c))*2/3,e}function i0(t,o){let e=r0(t-105,o-35),n=o0(t-105,o-35);const r=o/180*c;let i=f(r);i=1-X*i*i;const a=F(i);return e=e*180/(z/a*n0(r)*c),n=n*180/(z*(1-X)/(i*a)*c),[e,n]}function B(t){const[o,e]=t;if(!Y(o,e))return[o,e];const n=i0(o,e);return[o+n[0],e+n[1]]}function E(t){const[o,e]=t;if(!Y(o,e))return[o,e];let[n,r]=[o,e],i=B([n,r]),a=i[0]-o,s=i[1]-e;for(;C(a)>1e-6||C(s)>1e-6;)n-=a,r-=s,i=B([n,r]),a=i[0]-o,s=i[1]-e;return[n,r]}const{sin:y,cos:W,atan2:Z,sqrt:_,PI:a0}=Math,J=a0*3e3/180;function w(t){const[o,e]=t,n=o-.0065,r=e-.006,i=_(n*n+r*r)-2e-5*y(r*J),a=Z(r,n)-3e-6*W(n*J),s=i*W(a),g=i*y(a);return[s,g]}function b(t){const[o,e]=t,n=o,r=e,i=_(n*n+r*r)+2e-5*y(r*J),a=Z(r,n)+3e-6*W(n*J),s=i*W(a)+.0065,g=i*y(a)+.006;return[s,g]}const U=180/Math.PI,H=Math.PI/180,$=6378137,d=20037508342789244e-9;function I(t){return[t[0]*U/$,(Math.PI*.5-2*Math.atan(Math.exp(-t[1]/$)))*U]}function v(t){const o=Math.abs(t[0])<=180?t[0]:t[0]-(t[0]<0?-1:1)*360,e=[$*o*H,$*Math.log(Math.tan(Math.PI*.25+.5*t[1]*H))];return e[0]>d&&(e[0]=d),e[0]<-d&&(e[0]=-d),e[1]>d&&(e[1]=d),e[1]<-d&&(e[1]=-d),e}const{abs:O}=Math,K=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Q=[75,60,45,30,15,0],s0=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],l0=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function x(t,o,e){const n=O(o)/e[9];let r=e[0]+e[1]*O(t),i=e[2]+e[3]*n+e[4]*Math.pow(n,2)+e[5]*Math.pow(n,3)+e[6]*Math.pow(n,4)+e[7]*Math.pow(n,5)+e[8]*Math.pow(n,6);return r*=t<0?-1:1,i*=o<0?-1:1,[r,i]}function N(t){const[o,e]=t;let n=[];for(let r=0;r<Q.length;r++)if(O(e)>Q[r]){n=l0[r];break}return x(o,e,n)}function L(t){const[o,e]=t;let n=[];for(let r=0;r<K.length;r++)if(e>=K[r]){n=s0[r];break}return x(o,e,n)}function P(t,o){if(!t)throw new Error(o)}function T(t){return!!t&&Object.prototype.toString.call(t)==="[object Array]"}function V(t){return!isNaN(Number(t))&&t!==null&&!T(t)}function u(...t){const o=t.length-1;return function(...e){let n=o,r=t[o].apply(null,e);for(;n--;)r=t[n].call(null,r);return r}}function R(t,o,e=!1){if(t===null)return;let n,r,i,a,s,g,k=0,M=0,S,q;const{type:j}=t,p=j==="FeatureCollection",t0=j==="Feature",e0=p?t.features.length:1;for(let D=0;D<e0;D++){S=p?t.features[D].geometry:t0?t.geometry:t,q=S?S.type==="GeometryCollection":!1,g=q?S.geometries.length:1;for(let A=0;A<g;A++){let G=0,m=0;if(a=q?S.geometries[A]:S,a===null)continue;const h=a.type;switch(k=e&&(h==="Polygon"||h==="MultiPolygon")?1:0,h){case null:break;case"Point":if(s=a.coordinates,o(s,M,D,G,m)===!1)return!1;M++,G++;break;case"LineString":case"MultiPoint":for(s=a.coordinates,n=0;n<s.length;n++){if(o(s[n],M,D,G,m)===!1)return!1;M++,h==="MultiPoint"&&G++}h==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(s=a.coordinates,n=0;n<s.length;n++){for(r=0;r<s[n].length-k;r++){if(o(s[n][r],M,D,G,m)===!1)return!1;M++}h==="MultiLineString"&&G++,h==="Polygon"&&m++}h==="Polygon"&&G++;break;case"MultiPolygon":for(s=a.coordinates,n=0;n<s.length;n++){for(m=0,r=0;r<s[n].length;r++){for(i=0;i<s[n][r].length-k;i++){if(o(s[n][r][i],M,D,G,m)===!1)return!1;M++}m++}G++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(R(a.geometries[n],o,e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}var l;(function(t){t.WGS84="WGS84",t.WGS1984="WGS84",t.EPSG4326="WGS84",t.GCJ02="GCJ02",t.AMap="GCJ02",t.BD09="BD09",t.BD09LL="BD09",t.Baidu="BD09",t.BMap="BD09",t.BD09MC="BD09MC",t.BD09Meter="BD09MC",t.EPSG3857="EPSG3857",t.EPSG900913="EPSG3857",t.EPSG102100="EPSG3857",t.WebMercator="EPSG3857",t.WM="EPSG3857"})(l||(l={}));const c0={to:{[l.GCJ02]:B,[l.BD09]:u(b,B),[l.BD09MC]:u(N,b,B),[l.EPSG3857]:v}},f0={to:{[l.WGS84]:E,[l.BD09]:b,[l.BD09MC]:u(N,b),[l.EPSG3857]:u(v,E)}},u0={to:{[l.WGS84]:u(E,w),[l.GCJ02]:w,[l.EPSG3857]:u(v,E,w),[l.BD09MC]:N}},g0={to:{[l.WGS84]:I,[l.GCJ02]:u(B,I),[l.BD09]:u(b,B,I),[l.BD09MC]:u(N,b,B,I)}},G0={to:{[l.WGS84]:u(E,w,L),[l.GCJ02]:u(w,L),[l.EPSG3857]:u(v,E,w,L),[l.BD09]:L}},M0={WGS84:c0,GCJ02:f0,BD09:u0,EPSG3857:g0,BD09MC:G0};var h0=M0;function d0(t,o,e){if(P(!!t,"The args[0] input coordinate is required"),P(!!o,"The args[1] original coordinate system is required"),P(!!e,"The args[2] target coordinate system is required"),o===e)return t;const n=h0[o];P(!!n,`Invalid original coordinate system: ${o}`);const r=n.to[e];P(!!r,`Invalid target coordinate system: ${e}`);const i=typeof t;if(P(i==="string"||i==="object",`Invalid input coordinate type: ${i}`),i==="string")try{t=JSON.parse(t)}catch{throw new Error(`Invalid input coordinate: ${t}`)}let a=!1;T(t)&&(P(t.length>=2,`Invalid input coordinate: ${t}`),P(V(t[0])&&V(t[1]),`Invalid input coordinate: ${t}`),t=t.map(Number),a=!0);const s=r;return a?s(t):(R(t,g=>{[g[0],g[1]]=s(g)}),t)}const P0=Object.assign(Object.assign({},l),{CRSTypes:l,transform:d0});export{P0 as e};
